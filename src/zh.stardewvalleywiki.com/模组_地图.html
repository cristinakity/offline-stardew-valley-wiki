
<!DOCTYPE html>
<html class="client-nojs" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>模组:地图 - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"zh","wgMonthNames":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgRequestId":"150407a402742ca3b6c97069","wgCSPNonce":!1,"wgCanonicalNamespace":"模组","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":570,"wgPageName":"模组:地图","wgTitle":"地图","wgCurRevisionId":51233,"wgRevisionId":51233,"wgArticleId":3293,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["模组"],"wgPageContentLanguage":"zh","wgPageContentModel":"wikitext","wgRelevantPageName":"模组:地图","wgRelevantArticleId":3293,"wgUserVariant":"zh","wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,
"watchlist":!1,"tagline":!1}};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","ext.cite.styles":"ready","mediawiki.page.gallery.styles":"ready","skins.vector.styles.legacy":"ready","jquery.makeCollapsible.styles":"ready","mediawiki.toc.styles":"ready"};RLPAGEMODULES=["ext.cite.ux-enhancements","site","mediawiki.page.startup","mediawiki.page.ready","jquery.makeCollapsible","mediawiki.toc","skins.vector.legacy.js"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="/mediawiki/load.php?lang=zh&amp;modules=ext.cite.styles%7Cext.pygments%7Cjquery.makeCollapsible.styles%7Cmediawiki.page.gallery.styles%7Cmediawiki.toc.styles%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="/mediawiki/load.php?lang=zh&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/mediawiki/load.php?lang=zh&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="description" content="← 目录"/>
<link rel="shortcut icon" href="/mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="/mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (zh)"/>
<link rel="EditURI" type="application/rsd+xml" href="//zh.stardewvalleywiki.com/mediawiki/api.php?action=rsd"/>
<link rel="alternate" hreflang="zh" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh"/>
<link rel="alternate" hreflang="zh-Hans" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-hans"/>
<link rel="alternate" hreflang="zh-Hant" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-hant"/>
<link rel="alternate" hreflang="zh-Hans-CN" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-cn"/>
<link rel="alternate" hreflang="zh-Hant-HK" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-hk"/>
<link rel="alternate" hreflang="zh-Hant-MO" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-mo"/>
<link rel="alternate" hreflang="zh-Hans-MY" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-my"/>
<link rel="alternate" hreflang="zh-Hans-SG" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-sg"/>
<link rel="alternate" hreflang="zh-Hant-TW" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-tw"/>
<link rel="alternate" hreflang="x-default" href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE"/>
<link rel="license" href="https://creativecommons.org/licenses/by-nc-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Stardew Valley Wiki的Atom feed" href="/mediawiki/index.php?title=Special:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;feed=atom"/>
<meta property="og:title" content="模组:地图 - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://zh.stardewvalleywiki.com/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE"/>
<meta property="og:description" content="← 目录"/>
<meta property="og:image" content="https://zh.stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="article:modified_time" content="2025-03-20T10:25:56Z"/>
<meta property="article:published_time" content="2025-03-20T10:25:56Z"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="模组:地图 - Stardew Valley Wiki"/>
<meta property="twitter:description" content="← 目录"/>
<meta property="twitter:image" content="https://zh.stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"\u6a21\u7ec4:\u5730\u56fe - Stardew Valley Wiki","headline":"\u6a21\u7ec4:\u5730\u56fe - Stardew Valley Wiki","mainEntityOfPage":"\u6a21\u7ec4:\u5730\u56fe","identifier":"https:\/\/zh.stardewvalleywiki.com\/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE","url":"https:\/\/zh.stardewvalleywiki.com\/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE","description":"\u2190 \u76ee\u5f55","dateModified":"2025-03-20T10:25:56Z","datePublished":"2025-03-20T10:25:56Z","image":{"@type":"ImageObject","url":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/zh.stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/zh.stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-570 ns-subject page-模组_地图 rootpage-模组_地图 skin-vector action-view minerva--history-page-action-enabled skin-vector-legacy">
<div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="zh">模组:地图</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">来自Stardew Valley Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">跳到导航</a>
		<a class="mw-jump-link" href="#searchInput">跳到搜索</a>
		<div id="mw-content-text" lang="zh" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p>← <a href="/%E6%A8%A1%E7%BB%84:%E7%9B%AE%E5%BD%95" title="模组:目录">目录</a>
</p><p>此页面解释如何编辑地图。这是面向模组开发者的高级指南。
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="zh" dir="ltr"><h2 id="mw-toc-heading">目录</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E7.AE.80.E4.BB.8B"><span class="tocnumber">1</span> <span class="toctext">简介</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#.E5.9F.BA.E6.9C.AC.E6.A6.82.E5.BF.B5"><span class="tocnumber">1.1</span> <span class="toctext">基本概念</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#.E5.9C.B0.E5.9D.97.E5.9D.90.E6.A0.87"><span class="tocnumber">1.2</span> <span class="toctext">地块坐标</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#.E5.9C.B0.E5.9B.BE.E6.A0.BC.E5.BC.8F"><span class="tocnumber">1.3</span> <span class="toctext">地图格式</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#.E5.9C.B0.E5.9D.97.E8.A1.A8_vs_.E5.9C.B0.E5.9D.97.E9.9B.86"><span class="tocnumber">1.4</span> <span class="toctext">地块表 vs 地块集</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#.E5.85.A5.E9.97.A8"><span class="tocnumber">2</span> <span class="toctext">入门</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#.E4.BD.BF.E7.94.A8SMAPI"><span class="tocnumber">2.1</span> <span class="toctext">使用SMAPI</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#.E4.BD.BF.E7.94.A8Tiled"><span class="tocnumber">2.2</span> <span class="toctext">使用Tiled</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#.E7.BC.96.E8.BE.91"><span class="tocnumber">3</span> <span class="toctext">编辑</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#.E7.BC.96.E8.BE.91.E5.9C.B0.E5.9B.BE"><span class="tocnumber">3.1</span> <span class="toctext">编辑地图</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E5.9B.BE"><span class="tocnumber">3.2</span> <span class="toctext">自定义地图</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#.E6.B7.BB.E5.8A.A0.E5.9C.B0.E5.9D.97.E9.9B.86"><span class="tocnumber">3.3</span> <span class="toctext">添加地块集</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#.E5.A4.8D.E7.94.A8.E5.8E.9F.E7.89.88.E5.9C.B0.E5.9D.97.E9.9B.86"><span class="tocnumber">3.3.1</span> <span class="toctext">复用原版地块集</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#.E6.9B.BF.E6.8D.A2.E7.8E.B0.E5.AD.98.E5.9C.B0.E5.9D.97.E9.9B.86"><span class="tocnumber">3.3.2</span> <span class="toctext">替换现存地块集</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#.E6.B7.BB.E5.8A.A0.E6.96.B0.E7.9A.84.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E5.9D.97.E9.9B.86"><span class="tocnumber">3.3.3</span> <span class="toctext">添加新的自定义地块集</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#.E5.9C.A8.E5.9C.B0.E5.9B.BE.E4.B8.8A.E7.BB.98.E5.88.B6.E5.9C.B0.E5.9D.97"><span class="tocnumber">3.4</span> <span class="toctext">在地图上绘制地块</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#.E5.9C.B0.E5.9B.BE.E5.B1.9E.E6.80.A7"><span class="tocnumber">3.5</span> <span class="toctext">地图属性</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#.E5.9C.B0.E5.9D.97.E5.B1.9E.E6.80.A7"><span class="tocnumber">3.6</span> <span class="toctext">地块属性</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#.E5.9C.B0.E5.9D.97"><span class="tocnumber">3.7</span> <span class="toctext">地块</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#.E5.9C.B0.E5.9D.97.E5.8A.A8.E7.94.BB"><span class="tocnumber">3.8</span> <span class="toctext">地块动画</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#.E5.9C.B0.E5.9D.97.E7.BF.BB.E8.BD.AC.2F.E6.97.8B.E8.BD.AC"><span class="tocnumber">3.9</span> <span class="toctext">地块翻转/旋转</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#.E9.AB.98.E7.BA.A7.E7.BC.96.E8.BE.91"><span class="tocnumber">4</span> <span class="toctext">高级编辑</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#.E8.90.BD.E5.BA.A7.E9.9D.9E.E5.AE.B6.E5.85.B7.E7.9A.84.E6.A4.85.E5.AD.90"><span class="tocnumber">4.1</span> <span class="toctext">落座非家具的椅子</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#.E5.B7.B2.E7.9F.A5.E5.9C.B0.E5.9B.BE.E5.B1.9E.E6.80.A7"><span class="tocnumber">5</span> <span class="toctext">已知地图属性</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#.E5.BB.BA.E9.80.A0.E5.BB.BA.E7.AD.91"><span class="tocnumber">5.1</span> <span class="toctext">建造建筑</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#.E5.86.9C.E4.BD.9C.E7.89.A9"><span class="tocnumber">5.2</span> <span class="toctext">农作物</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#.E6.A4.8D.E7.89.A9.E3.80.81.E9.87.87.E9.9B.86.E5.93.81.E5.92.8C.E7.89.A9.E5.93.81.E7.94.9F.E6.88.90"><span class="tocnumber">5.3</span> <span class="toctext">植物、采集品和物品生成</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#.E4.BC.A0.E9.80.81.E5.92.8C.E5.9C.B0.E5.9B.BE.E4.BD.8D.E7.BD.AE"><span class="tocnumber">5.4</span> <span class="toctext">传送和地图位置</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#.E9.9F.B3.E9.A2.91"><span class="tocnumber">5.5</span> <span class="toctext">音频</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#.E5.85.89.E7.85.A7"><span class="tocnumber">5.6</span> <span class="toctext">光照</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#.E5.9C.B0.E5.9B.BE.E5.92.8C.E5.9C.B0.E5.9D.97.E6.9B.B4.E6.94.B9"><span class="tocnumber">5.7</span> <span class="toctext">地图和地块更改</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#.E9.92.93.E9.B1.BC"><span class="tocnumber">5.8</span> <span class="toctext">钓鱼</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#.E5.86.9C.E8.88.8D.E5.86.85.E9.83.A8"><span class="tocnumber">5.9</span> <span class="toctext">农舍内部</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#.E5.85.B6.E4.BB.96.E5.9C.B0.E7.82.B9.E5.85.83.E6.95.B0.E6.8D.AE"><span class="tocnumber">5.10</span> <span class="toctext">其他地点元数据</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-35"><a href="#.E5.B7.B2.E7.9F.A5.E5.9C.B0.E5.9D.97.E5.B1.9E.E6.80.A7"><span class="tocnumber">6</span> <span class="toctext">已知地块属性</span></a>
<ul>
<li class="toclevel-2 tocsection-36"><a href="#.E6.A6.82.E8.BF.B0"><span class="tocnumber">6.1</span> <span class="toctext">概述</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#TouchAction"><span class="tocnumber">6.2</span> <span class="toctext">TouchAction</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Action"><span class="tocnumber">6.3</span> <span class="toctext">Action</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89Action"><span class="tocnumber">6.4</span> <span class="toctext">自定义Action</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-40"><a href="#.E9.81.93.E8.B7.AF.E5.B1.82"><span class="tocnumber">7</span> <span class="toctext">道路层</span></a></li>
<li class="toclevel-1 tocsection-41"><a href="#.E6.BD.9C.E5.9C.A8.E9.97.AE.E9.A2.98"><span class="tocnumber">8</span> <span class="toctext">潜在问题</span></a>
<ul>
<li class="toclevel-2 tocsection-42"><a href="#.E5.9C.B0.E5.9D.97.E8.A1.A8.E9.A1.BA.E5.BA.8F"><span class="tocnumber">8.1</span> <span class="toctext">地块表顺序</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#.E5.8E.9F.E7.89.88.E5.9C.B0.E5.9D.97.E8.A1.A8.E7.9A.84.E6.9C.AC.E5.9C.B0.E6.8B.B7.E8.B4.9D"><span class="tocnumber">8.2</span> <span class="toctext">原版地块表的本地拷贝</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="#.E5.9C.B0.E5.9B.BE.E7.89.B9.E6.9C.89.E9.97.AE.E9.A2.98"><span class="tocnumber">8.3</span> <span class="toctext">地图特有问题</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="#Tiled.E4.B8.AD.E7.9A.84.E2.80.9CSave_as.E2.80.9D"><span class="tocnumber">8.4</span> <span class="toctext">Tiled中的“Save as”</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="#.E5.9C.A8Tiled.E4.B8.AD.E5.AE.9A.E4.BD.8D.E5.9C.B0.E5.9D.97.E8.A1.A8"><span class="tocnumber">8.5</span> <span class="toctext">在Tiled中定位地块表</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-47"><a href="#.E6.95.85.E9.9A.9C.E6.8E.92.E9.99.A4"><span class="tocnumber">9</span> <span class="toctext">故障排除</span></a>
<ul>
<li class="toclevel-2 tocsection-48"><a href="#.22Tilesheet_paths_must_be_a_relative_path_without_directory_climbing_.28...2F.29.22"><span class="tocnumber">9.1</span> <span class="toctext">"Tilesheet paths must be a relative path without directory climbing (../)"</span></a></li>
<li class="toclevel-2 tocsection-49"><a href="#.22mod_reordered_the_original_tilesheets.22"><span class="tocnumber">9.2</span> <span class="toctext">"mod reordered the original tilesheets"</span></a></li>
<li class="toclevel-2 tocsection-50"><a href="#.22mod_has_no_tilesheet_with_ID_.27.3Cname.3E.27.22"><span class="tocnumber">9.3</span> <span class="toctext">"mod has no tilesheet with ID '&lt;name&gt;'"</span></a></li>
<li class="toclevel-2 tocsection-51"><a href="#.22Invalid_tile_GID:_.3C.23.3E.22"><span class="tocnumber">9.4</span> <span class="toctext">"Invalid tile GID: &lt;#&gt;"</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-52"><a href="#.E4.BD.BF.E7.94.A8SMAPI.E4.BD.9C.E5.87.BA.E6.9B.B4.E6.94.B9"><span class="tocnumber">10</span> <span class="toctext">使用SMAPI作出更改</span></a>
<ul>
<li class="toclevel-2 tocsection-53"><a href="#.E4.BD.BF.E7.94.A8AssetRequested.E4.BA.8B.E4.BB.B6"><span class="tocnumber">10.1</span> <span class="toctext">使用AssetRequested事件</span></a></li>
<li class="toclevel-2 tocsection-54"><a href="#.E5.9C.B0.E7.82.B9.E5.8A.A0.E8.BD.BD.E5.90.8E"><span class="tocnumber">10.2</span> <span class="toctext">地点加载后</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-55"><a href="#.E6.A8.A1.E7.BB.84.E5.BC.80.E5.8F.91.E8.80.85.E5.B8.AE.E5.8A.A9.E5.92.8C.E6.8A.80.E5.B7.A7"><span class="tocnumber">11</span> <span class="toctext">模组开发者帮助和技巧</span></a></li>
</ul>
</div>

<h2><span id="简介"></span><span class="mw-headline" id=".E7.AE.80.E4.BB.8B">简介</span></h2>
<h3><span id="基本概念"></span><span class="mw-headline" id=".E5.9F.BA.E6.9C.AC.E6.A6.82.E5.BF.B5">基本概念</span></h3>
<ul>
<li><b>地图</b>是指特定区域地形（水、悬崖、陆地等）、地形特征（灌木等）、建筑、道路、触发器等的布局。当您到达某一区域的边界或进入建筑中，屏幕变黑从而转场时，您也就切换了地图。</li>

<li>每个地图都有层层重叠的<b>图层</b>。靠前的层中的物体会遮住靠后层中的物体。标准情况下，各层从后到前如下：

<table class="wikitable">

<tbody><tr>
<th>层名
</th>
<th>典型内容
</th></tr>
<tr>
<td>Back（后层）
</td>
<td>地形、水体和基本特征（例如永久性道路）。
</td></tr>
<tr>
<td>Buildings（建筑层）
</td>
<td>用于放置建筑（如农舍）。任何置于此层的地块将像一堵墙般不可穿过，除非指定了地块属性"Passable" "T"。
</td></tr>
<tr>
<td>Paths（道路层）
</td>
<td>地板、道路、草、碎片（例如“道路”地块表中的石头、杂草、树桩），此类玩家可移除的物品。
</td></tr>
<tr>
<td>Front（前层）
</td>
<td>画在其他物体前的物体，例如树。当玩家在这类物品北方时，则画在玩家贴图前方；若在南方，则画在玩家贴图后方。
</td></tr>
<tr>
<td>AlwaysFront（置顶层）
</td>
<td>总是画在最顶层的物品，例如玩家贴图。一个典型用途是绘制落叶等前景效果。
</td></tr></tbody></table></li>
<p><a href="/File:MapLayers.png" class="image"><img alt="MapLayers.png" src="https://stardewvalleywiki.com/mediawiki/images/6/6f/MapLayers.png" decoding="async" width="467" height="398" /></a>
</p>
<li>可以通过在原版层名后面添加偏移量的方法来添加任意数量的新层。原版层名即<samp>Back</samp>、<samp>Buildings</samp>、<samp>Front</samp> 或 <samp>AlwaysFront</samp>。 例如，<samp>Back-1</samp>层会置于<samp>Back</samp>底层，而<samp>Back2</samp>则会被置于<samp>Back</samp>顶层。可以更改偏移量以创建更多层。
此写法仅对层渲染有用；地块属性和碰撞都必须写在原版的、无偏移的图层中。
</li>

<li>（使用Tiled）在Tiled中，这五种图层中的每个又细分为两种图层，即 Objects Layer（粉色云状图标）和 Tile Layer（蓝色网格图标）。Tile Layer用于编辑地图（放置/移除地块），Objects Layer用于添加和编辑地块数据。自定义图层必须符合上述命名规范。注意有的地图没有Paths层和AlwaysFront层。</li>

<li>每层都由许多<b>地块</b>组成，所谓地块就是排布在网格中的16×16像素方块，用于显示地图。每个地块都可以拥有属性（例如可否通过），特殊逻辑（例如玩家踩上触发动作），以及要显示的贴图。贴图应当表示为贴图索引（或地块索引），也就是在贴图在它的贴图集中的位置（见下文）。</li>

<li>每个地图都有一至多个贴图集（当谈论模组时，也称作地块表），其中包含可用的地块和图像，它们一并组成了可见的地图。</li>
</ul>
<h3><span id="地块坐标"></span><span class="mw-headline" id=".E5.9C.B0.E5.9D.97.E5.9D.90.E6.A0.87">地块坐标</span></h3>
<p>每个地块都有一个(x, y)坐标，表征其在地图上的位置。其中(0, 0)代表左上角的地块。其中<i>x</i>值从左到右依次增加，<i>y</i>值从上到下依次增加。例如：
</p><p><a href="/File:Modding_-_creating_an_XNB_mod_-_tile_coordinates.png" class="image"><img alt="Modding - creating an XNB mod - tile coordinates.png" src="https://stardewvalleywiki.com/mediawiki/images/2/2d/Modding_-_creating_an_XNB_mod_-_tile_coordinates.png" decoding="async" width="318" height="238" /></a>
</p><p>可使用<a rel="nofollow" class="external text" href="https://www.nexusmods.com/stardewvalley/mods/679">Debug Mode</a>模组以在游戏中查看地块坐标。
</p>
<h3><span id="地图格式"></span><span class="mw-headline" id=".E5.9C.B0.E5.9B.BE.E6.A0.BC.E5.BC.8F">地图格式</span></h3>
<p>开发星露谷模组时，有两种可用的地图模式：<samp>.tmx</samp> （Tiled地图编辑器）和 <samp>.tbin</samp>（tIDE地图编辑器，已过时）。两种格式支持的功能几乎相同，但仍有一些小差异，如下：
</p>
<table class="wikitable">

<tbody><tr>
<th>功能
</th>
<th><samp>.tmx</samp>
</th>
<th><samp>.tbin</samp>
</th></tr>
<tr>
<td>格式
</td>
<td>✓ XML（基本上为文本）
</td>
<td>✘ 二进制
</td></tr>
<tr>
<td>使用Tiled编辑
</td>
<td>✓ 支持
</td>
<td>✓ 支持，需要插件
</td></tr>
<tr>
<td>直接编辑
</td>
<td>✓ 可用文本编辑器打开
</td>
<td>✘ 不支持
</td></tr>
<tr>
<td>地块翻转
</td>
<td>✓ 支持
</td>
<td>✘ 不支持
</td></tr>
<tr>
<td>地块旋转
</td>
<td>✓ 支持
</td>
<td>✘ 不支持
</td></tr>
<tr>
<td>源码管理
</td>
<td>✓ 高效存储，可记录更改。
</td>
<td>✘ 低效存储（每次提交均需复制完整文件），不能记录更改。
</td></tr></tbody></table>
<p>因此推荐使用<samp>.tmx</samp>，但两种文件都受支持，且可以通过Tiled中的 <i>File &gt; Export As</i> 选项转换格式。
</p>
<h3><span id="地块表_vs_地块集"></span><span class="mw-headline" id=".E5.9C.B0.E5.9D.97.E8.A1.A8_vs_.E5.9C.B0.E5.9D.97.E9.9B.86">地块表 vs 地块集</span></h3>
<p><samp>Tilesheets</samp>（<b>地块表</b>）是用作贴图的<samp>.png</samp>文件。地块表不包括动画、属性、地形或与像素关联的任何东西 -- 地块表的图像只是纯粹的图像。而<samp>Tilesets</samp>（<b>地块集</b>）为Tiled的XML文件，其中蕴含有关地图如何使用贴图的全部信息。我们并不严格区分这两个术语。
</p>
<h2><span id="入门"></span><span class="mw-headline" id=".E5.85.A5.E9.97.A8">入门</span></h2>
<p>主要有两种方式编辑地图。
</p>
<h3><span id="使用SMAPI"></span><span class="mw-headline" id=".E4.BD.BF.E7.94.A8SMAPI">使用SMAPI</span></h3>
<p>创建SMAPI模组需要编程，但其功能更强大，且多个SMAPI模组可以同时编辑相同地图。若希望使用此途径：
</p>
<ol><li>参见<a href="/%E6%A8%A1%E7%BB%84:%E5%88%9B%E5%BB%BA_SMAPI_%E6%A8%A1%E7%BB%84" title="模组:创建 SMAPI 模组">创建SMAPI模组</a>。</li>
<li>参见下文的<a href="#.E4.BD.BF.E7.94.A8SMAPI.E4.BD.9C.E5.87.BA.E6.9B.B4.E6.94.B9">使用SMAPI作出更改</a>。</li></ol>
<p>此指南的余下部分假设您使用的是Tiled，但许多概念是相通的，因此您可以使用Tiled以及SMAPI（例如，创建/编辑地图相当于SMAPI中的载入/编辑地图）。
</p>
<h3><span id="使用Tiled"></span><span class="mw-headline" id=".E4.BD.BF.E7.94.A8Tiled">使用Tiled</span></h3>
<p>Tiled是一个用于编辑星露谷地图的流行地图编辑器，不需要编程。需要<a href="/%E6%A8%A1%E7%BB%84:%E7%BC%96%E8%BE%91_XNB_%E6%96%87%E4%BB%B6" title="模组:编辑 XNB 文件">解包地图的XNB文件</a>，编辑地图，并制作一个<a rel="nofollow" class="external text" href="https://www.nexusmods.com/stardewvalley/mods/1915">Content Patcher</a>或SMAPI模组以加载地图。若希望使用此方法：
</p>
<ol>
<li>安装<a rel="nofollow" class="external text" href="http://www.mapeditor.org/">Tiled最新版</a>。</li>
<li>安装后，在界面左上角，依次点击Edit &gt; Preferences &gt; Plugins并启用tbin插件（在Windows上为<samp>tbin.dll</samp>，在Linux上为<samp>libtbin.so</samp>，在Mac上为<samp>libtbin.dylib</samp>）。
</li><li>进行如下设置
<table class="wikitable">

<tbody><tr>
<th>设置名
</th>
<th>值
</th>
<th>原因
</th></tr>
<tr>
<td><i>View &gt; Snapping &gt; Snap to Grid</i>
</td>
<td>✓ enabled
</td>
<td>将物体转换为游戏的格式。
</td></tr>
<tr>
<td><i>View &gt; Highlight Current Layer</i>
</td>
<td>✓ enabled
</td>
<td>使您看清当前编辑的地块。
</td></tr></tbody></table></li>
<li>参见<a href="/%E6%A8%A1%E7%BB%84:%E7%BC%96%E8%BE%91_XNB_%E6%96%87%E4%BB%B6" title="模组:编辑 XNB 文件">模组:编辑 XNB 文件</a>以学会如何打包/解包地图文件。</li>
<li>参见下述指南以学会更改地图。</li>
</ol>
<p>（若您正在使用xnbcli来<a href="/%E6%A8%A1%E7%BB%84:%E7%BC%96%E8%BE%91_XNB_%E6%96%87%E4%BB%B6" title="模组:编辑 XNB 文件">解包原始地图</a>，则必须使用<samp>.tbin</samp>插件，无论您实际上是否在使用<samp>.tmx</samp>。这是因为xnbcli只能输出<samp>.tbin</samp>文件。）
</p>
<h2><span id="编辑"></span><span class="mw-headline" id=".E7.BC.96.E8.BE.91">编辑</span></h2>
<h3><span id="编辑地图"></span><span class="mw-headline" id=".E7.BC.96.E8.BE.91.E5.9C.B0.E5.9B.BE">编辑地图</span></h3>
<p>重要提示：当制作自定义地图时，请先打开一个原版地图，并在其基础上编辑。不要尝试在Tiled中创建新地图；游戏必需某些地块、地图性质等。也请注意编辑或添加地图时，大于高155、宽199的尺寸会损坏图层。
</p>
<ol><li><a href="/%E6%A8%A1%E7%BB%84:%E7%BC%96%E8%BE%91_XNB_%E6%96%87%E4%BB%B6" title="模组:编辑 XNB 文件">解包</a>游戏的<samp>Content/Maps</samp>文件夹，并创建一个副本，以在其基础上编辑地图。在将地图正式添加到您的模组的正式文件夹之前，请在此副本文件夹中编辑地图。</li>
<li>若要在非原版地图的基础上编辑，也请使用上述方法解包并将其置于您的工作文件夹。</li>
<li>使用Tiled打开<samp>.tbin</samp>或<samp>.tmx</samp>文件。注意：请确保此文件和解包的地块表位于相同的目录下！</li>
<li>作出更改。</li>
<li>保存文件。不要使用<samp>Save as</samp>选项更改保存的文件夹，否则会无法找到地块表路径。</li>
<li>将<samp>.tbin</samp>或<samp>.tmx</samp>文件及其依赖的自定义地块表移动至您的模组的正式文件夹。具体来说是放在<samp>assets</samp>文件夹。</li>
<li>通过SMAPI或ContentPatcher（或其他模组框架）加载模组。</li></ol>
<h3><span id="自定义地图"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E5.9B.BE">自定义地图</span></h3>
<p>您可以向游戏添加新地图或新地点。最简单的方式是使用Tiled创建地图，然后使用<a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a>以将此自定义地点<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E7%82%B9%E6%95%B0%E6%8D%AE" title="模组:地点数据">添加到游戏</a>。在加载存档后，可以使用此控制台命令来跳转到此地图：<code>debug warp YourLocationName X Y</code>。
</p><p>注意地图必需按照一定模式来建造；请观摩<samp>Content/Maps</samp>文件夹中的例子。修改已经存在的地图通常比从零开始制作新地图容易得多。
</p>
<div style="border-radius: 3px; padding: 8px; background: #e3fcef; min-height: 3em; display: flex; flex-direction: row; align-items: center; max-width: 60em;">
<div style="font-size: 3em; line-height: 1em; margin-right: 0.5rem;">ⓘ</div>
<div><b>强烈推荐使用Content Patcher添加新地点。</b><br /> 亦可使用C#来自己动手添加新地点，但需要注意对象持久性和村民寻路之类的因素，它们都很容易出错。若您<b>的确</b>希望自己动手，则请在<samp>CreatedInitialLocations</samp>和<samp>SaveAddedLocations</samp>环节调用<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Events#Specialised.LoadStageChanged" title="模组:制作指南/APIs/Events">专门的<samp>LoadStageChanged</samp>事件</a>以将此地点添加到<samp>Game1.locations</samp>。</div>
</div>
<h3><span id="添加地块集"></span><span class="mw-headline" id=".E6.B7.BB.E5.8A.A0.E5.9C.B0.E5.9D.97.E9.9B.86">添加地块集</span></h3>
<p>您可以使用自定义模组或原版游戏作为地图的新贴图、地块或图像的来源。若您正在编辑原版地图，请确保<a href="#.E5.9C.B0.E5.9D.97.E8.A1.A8.E9.A1.BA.E5.BA.8F">自定义地块表名称具有<code>z_</code>前缀</a>，以避免改变原版的地块表索引。
</p>
<ol><li>打开您创建的或正在编辑的地图。</li>
<li>点击<samp>Map</samp>，然后点击上面菜单的 <i>Add External Tileset...</i> ，然后打开同一文件夹下的<samp>.tsx</samp>文件。</li>
<li>现在应当能在您的地图中看见此地块集的拷贝，同时已保存的动画、属性和地形保持不变。</li></ol>
<h4><span id="复用原版地块集"></span><span class="mw-headline" id=".E5.A4.8D.E7.94.A8.E5.8E.9F.E7.89.88.E5.9C.B0.E5.9D.97.E9.9B.86">复用原版地块集</span></h4>
<p>假设您希望在地图中使用像<samp>spring_outdoorsTileSheet.png</samp>这样的原版地块表。为此，一种不便的方法是直接基于<samp>.png</samp>文件新建地块集：这意味您需要重新为所有需要动画的地块设置动画，以及需要重新添加所有地块属性，例如可否挖掘。（同时也会丢失原版地块集的所有地形类型。）为避免这种情况，您可以先从现有的地图导出这些信息，然后使用外部地块集，步骤如下：
</p>
<ol><li>打开一个包含所需属性和动画的现有地图。</li>
<li>在Tilesets面板，单击提示 <i>Edit Tileset</i> 的小按钮。这应当会打开一个新的编辑页面。</li>
<li>在打开的新窗口上点击 <i>File</i> ， 然后点击 <i>Export as...</i> ， 然后将其保存为.tsx文件。</li>
<li>关闭地块集编辑器。</li></ol>
<h4><span id="替换现存地块集"></span><span class="mw-headline" id=".E6.9B.BF.E6.8D.A2.E7.8E.B0.E5.AD.98.E5.9C.B0.E5.9D.97.E9.9B.86">替换现存地块集</span></h4>
<p>若您已使用图片创建了地块表，则可替换其地块集：
</p>
<ol><li>打开您创建的或正在编辑的地图。</li>
<li>在右侧的Tilesets面板上，点击相应的地块表。</li>
<li>点击其下方的 <i>Replace Tileset</i> 小按钮。</li>
<li>选择您保存的地块集<samp>.tsx</samp>文件，并点击Open。</li></ol>
<h4><span id="添加新的自定义地块集"></span><span class="mw-headline" id=".E6.B7.BB.E5.8A.A0.E6.96.B0.E7.9A.84.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E5.9D.97.E9.9B.86">添加新的自定义地块集</span></h4>
<p>若您正在制作自己的地块表，且正在第一次尝试将其添加到地图，则可基于此表创建新的地块集。
</p>
<ol><li>创建您的贴图集，并将其与<samp>.tbin</samp>或<samp>.tmx</samp>地图文件置于同一目录下。贴图集应当为PNG图片，其中的小贴图切成16x16像素的图块（参见<a href="/%E6%A8%A1%E7%BB%84:%E7%BC%96%E8%BE%91_XNB_%E6%96%87%E4%BB%B6#.E4.BB.8B.E7.BB.8D" title="模组:编辑 XNB 文件">模组:编辑 XNB 文件#介绍</a>的例子）。</li>
<li>在Tiled打开地图。</li>
<li>添加自定义贴图集：
<ol><li>在 <i>Tilesets</i> 面板，点击<a href="/File:Modding_-_creating_an_XNB_mod_-_Tiled_%27new_tilesheet%27_button.png" class="image"><img alt="Modding - creating an XNB mod - Tiled &#39;new tilesheet&#39; button.png" src="https://stardewvalleywiki.com/mediawiki/images/2/2a/Modding_-_creating_an_XNB_mod_-_Tiled_%27new_tilesheet%27_button.png" decoding="async" width="17" height="17" /></a>按钮。</li>
<li>填写Name字段，即描述性的名称（例如“zcute bugs”）。并选择图像源文件（Source）。</li>
<li>确保已勾选 <i>Embed in map</i>。</li>
<li>不用改动其他设置，点击 <i>OK</i> 即可。</li></ol></li></ol>
<h3><span id="在地图上绘制地块"></span><span class="mw-headline" id=".E5.9C.A8.E5.9C.B0.E5.9B.BE.E4.B8.8A.E7.BB.98.E5.88.B6.E5.9C.B0.E5.9D.97">在地图上绘制地块</span></h3>
<ol><li>在 <i>Layer</i> 面板上，点击您希望编辑的图层。</li>
<li>在左上角的工具条中，点击 Stamp Brush 。</li>
<li>在 <i>Tilesets</i> 面板上，点击您希望使用的地块集的选项卡。</li>
<li>在 <i>Tilesets</i> 面板上，点击一个地块以选中它。按住并拖动鼠标可以同时选中多个地块。</li>
<li>将光标移到地图上，会发现地图上的地块与所选地块重叠了。</li>
<li>点击地图以将选中的地块放到所选图层的指定位置。</li></ol>
<h3><span id="地图属性"></span><span class="mw-headline" id=".E5.9C.B0.E5.9B.BE.E5.B1.9E.E6.80.A7">地图属性</span></h3>
<p>每个地图都可有多种地图属性，这些属性定义了有关地图的特性和行为，例如光照、音乐、传送点等。每个属性都有一个名称（此名称定义了属性的类型）、一个类型（对于星露谷物语，只能为“string”）和一个值（用于配置此属性）。参见下文<a href="#.E5.B7.B2.E7.9F.A5.E5.9C.B0.E5.9B.BE.E5.B1.9E.E6.80.A7">已知地图属性</a>。
</p><p>在Tiled中：
</p>
<ol><li>点击工具栏中的 <i>Map</i> 并选择 <i>Map Properties</i> 。</li>
<li>使用此GUI浏览和编辑地图属性。</li></ol>
<h3><span id="地块属性"></span><span class="mw-headline" id=".E5.9C.B0.E5.9D.97.E5.B1.9E.E6.80.A7">地块属性</span></h3>
<p>地块属性是对每个独立地块设置的属性。它们可以改变游戏行为（例如决定玩家可否穿过此地块），或在玩家踏上/点击此地块时完成特定动作。每个属性都有一个名称（此名称定义了属性的类型）、一个类型（对于星露谷物语，只能为“string”）和一个值。在Tiled中地块属性主要分为两种：<i>object properties</i> 仅作用于选中的地块，而 <i>tile properties</i> 作用于一个地块的所有实例。一般情况下您只需要设置 <i>object properties</i> ， 因此下文将仅针对此进行讲解。
</p><p>注意地块属性需要有与之相应的地块；若没有与之相应的地块，则不会被使用。
</p><p>可用如下方法浏览地块属性：
</p>
<ol><li>在 <i>Layers</i> 面板选中相应的 Objects Layer 。</li>
<li>选中工具栏中的<a href="/File:Modding_-_creating_an_XNB_mod_-_Tiled_%27select_object%27_button.png" class="image"><img alt="Modding - creating an XNB mod - Tiled &#39;select object&#39; button.png" src="https://stardewvalleywiki.com/mediawiki/images/4/4b/Modding_-_creating_an_XNB_mod_-_Tiled_%27select_object%27_button.png" decoding="async" width="19" height="16" /></a> <i>select object</i> 工具。</li>
<li>点击您希望浏览其数据的对象，也就是地图上的灰色选择框：<br /><a href="/File:Modding_-_creating_an_XNB_mod_-_map_object.png" class="image"><img alt="Modding - creating an XNB mod - map object.png" src="https://stardewvalleywiki.com/mediawiki/images/9/9c/Modding_-_creating_an_XNB_mod_-_map_object.png" decoding="async" width="141" height="166" /></a></li>
<li>object properties 现在会在 <i>Properties</i> 面板列出：<br /><a href="/File:Modding_-_creating_an_XNB_mod_-_Tiled_tile_properties_pane.png" class="image"><img alt="Modding - creating an XNB mod - Tiled tile properties pane.png" src="https://stardewvalleywiki.com/mediawiki/images/f/f1/Modding_-_creating_an_XNB_mod_-_Tiled_tile_properties_pane.png" decoding="async" width="209" height="270" /></a></li></ol>
<p>可按如下步骤编辑现有对象的属性：
</p>
<ul><li>更改取值：点击 value 字段并输入新值。</li>
<li>更改名称：选中属性并点击<a href="/File:Modding_-_creating_an_XNB_mod_-_Tiled_%27edit%27_button.png" class="image"><img alt="Modding - creating an XNB mod - Tiled &#39;edit&#39; button.png" src="https://stardewvalleywiki.com/mediawiki/images/e/e9/Modding_-_creating_an_XNB_mod_-_Tiled_%27edit%27_button.png" decoding="async" width="17" height="17" /></a>图标。</li>
<li>添加属性：点击<a href="/File:Modding_-_creating_an_XNB_mod_-_Tiled_%27add%27_button.png" class="image"><img alt="Modding - creating an XNB mod - Tiled &#39;add&#39; button.png" src="https://stardewvalleywiki.com/mediawiki/images/a/a9/Modding_-_creating_an_XNB_mod_-_Tiled_%27add%27_button.png" decoding="async" width="12" height="12" /></a>图标，输入属性名称，并确保选择的类型为“string”，最后点击 OK 。</li></ul>
<p>可按如下步骤添加新对象：
</p>
<ol><li>选中 <i>Layers</i> 面板中某个 Objects Layer 。注意，每个 Tile Layer 都应拥有对应的 Objects Layer 。若某个 Tile Layer 缺失对应的 Objects Layer，则新建一个同名的 Objects Layer。</li>
<li>从工具栏选中 <a href="/File:Modding_-_creating_an_XNB_mod_-_Tiled_%27insert_rectangle%27_button.png" class="image"><img alt="Modding - creating an XNB mod - Tiled &#39;insert rectangle&#39; button.png" src="https://stardewvalleywiki.com/mediawiki/images/2/2e/Modding_-_creating_an_XNB_mod_-_Tiled_%27insert_rectangle%27_button.png" decoding="async" width="20" height="21" /></a> <i>insert rectangle</i>（插入矩形）工具。</li>
<li>在欲编辑的地块上点击并拖动此矩形。确保它对齐到地块网格（参见<a href="#.E4.BD.BF.E7.94.A8Tiled">#使用Tiled</a>），且仅选取了一个地块。</li>
<li>将其Name字段改为<samp>TileData</samp>。</li>
<li>参见上文以编辑其属性。</li></ol>
<h3><span id="地块"></span><span class="mw-headline" id=".E5.9C.B0.E5.9D.97">地块</span></h3>
<p>您可以编辑现有地图的地块。参见<a rel="nofollow" class="external text" href="http://doc.mapeditor.org">Tiled 文档</a>以获取更多信息。
</p>
<h3><span id="地块动画"></span><span class="mw-headline" id=".E5.9C.B0.E5.9D.97.E5.8A.A8.E7.94.BB">地块动画</span></h3>
<div class="floatright"><a href="/File:Modding_-_creating_an_XNB_mod_-_example_animation.gif" class="image"><img alt="Modding - creating an XNB mod - example animation.gif" src="https://stardewvalleywiki.com/mediawiki/images/b/b7/Modding_-_creating_an_XNB_mod_-_example_animation.gif" decoding="async" width="65" height="64" /></a></div>
<p>您可以为地块添加动画，以实现类似于吉尔坐在摇椅上的动画效果（参见右侧示例）。
</p><p>在Tiled中可通过如下步骤创建动画：
</p>
<dl><dd><ol><li>在 <i>Tilesets</i> 面板选中要编辑的地块表，并点击下方的编辑按钮（扳手图标）</li>
<li>选择欲添加动画的地块。</li>
<li>点击工具栏的 <i>Tile Animation Editor</i> ，会打开一个动画编辑窗口。</li>
<li>将地块表中的地块拖动到动画编辑窗口内靠左的白色方框内。这会创建一个新<b>帧</b>。若需要删除帧，则选中此帧并按下Backspace或Delte键（Windows），或者 fn + Backspace键（Apple）。</li>
<li>双击某帧右侧的数字，以设置每帧的持续时间。单位为毫秒。<b>请确保每帧都有相同时间；游戏不能处理每帧时间不同的情况</b> 例如，如下是吉尔摇椅动画的动画编辑器：<br /><a href="/File:Modding_-_creating_an_XNB_mod_-_Tiled_example_animation_pane.gif" class="image"><img alt="Modding - creating an XNB mod - Tiled example animation pane.gif" src="https://stardewvalleywiki.com/mediawiki/images/f/f0/Modding_-_creating_an_XNB_mod_-_Tiled_example_animation_pane.gif" decoding="async" width="669" height="439" /></a></li>
<li>当您完成上述步骤后，关闭先前打开的界面。</li>
<li>现在 <i>Tilesets</i> 面板中的动画地块应当在其右上角显示一个小符号：<br /><a href="/File:Modding_-_creating_an_XNB_mod_-_Tiled_example_animation_tileset.png" class="image"><img alt="Modding - creating an XNB mod - Tiled example animation tileset.png" src="https://stardewvalleywiki.com/mediawiki/images/4/4a/Modding_-_creating_an_XNB_mod_-_Tiled_example_animation_tileset.png" decoding="async" width="50" height="52" /></a><br /> 这意味动画已经成为此地块的一部分了。地图上的此地块的实例现在应当显示相同的动画。</li></ol></dd></dl>
<h3><span id="地块翻转/旋转"></span><span class="mw-headline" id=".E5.9C.B0.E5.9D.97.E7.BF.BB.E8.BD.AC.2F.E6.97.8B.E8.BD.AC">地块翻转/旋转</span></h3>
<div class="thumb tright"><div class="thumbinner" style="width:145px;"><a href="/File:Tiled_tile_rotation.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/7/71/Tiled_tile_rotation.png" decoding="async" width="143" height="188" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:Tiled_tile_rotation.png" class="internal" title="放大"></a></div>示例地块，通过使用翻转/旋转按钮，可以四种方式旋转。</div></div></div>
<p>欲使用翻转/旋转的地块，无需在地块表中手动添加相应地块。这需要安装SMAPI 3.4 或更高版本；原版并不支持地块变换。
</p><p>在Tiled中：
</p>
<dl><dd><ol><li>选中Stamp Brush工具后，点击地块表中欲使用的地块。</li>
<li>点击上方工具栏的 Flip（翻转）或 Rotate（旋转）按钮，它们位于工具栏右侧。</li>
<li>点击地图以放置翻转/旋转后的地块。</li></ol></dd></dl>
<div style="border-radius: 3px; padding: 8px; background: #e3fcef; min-height: 3em; display: flex; flex-direction: row; align-items: center; max-width: 60em;">
<div style="font-size: 3em; line-height: 1em; margin-right: 0.5rem;">ⓘ</div>
<div><b>仅适用于<samp>.tmx</samp>地图文件。</b><br /> <samp>.tbin</samp>插件不支持地块变换。参见<a href="#.E5.9C.B0.E5.9B.BE.E6.A0.BC.E5.BC.8F"><b>地图格式</b></a>以获取更多信息。</div>
</div>
<h2><span id="高级编辑"></span><span class="mw-headline" id=".E9.AB.98.E7.BA.A7.E7.BC.96.E8.BE.91">高级编辑</span></h2>
<h3><span id="落座非家具的椅子"></span><span class="mw-headline" id=".E8.90.BD.E5.BA.A7.E9.9D.9E.E5.AE.B6.E5.85.B7.E7.9A.84.E6.A4.85.E5.AD.90">落座非家具的椅子</span></h3>
<p>玩家可以坐在嵌入在地图中的椅子。其原理如下：检查<samp>Buildings</samp>层的地块，然后把它的地块表、地块表索引与<samp>Data\ChairTiles</samp>中的数据做比对。
</p><p><samp>Data\ChairTiles</samp>中的每个字典项都有形如<code>sheet filename/tile X/tile Y</code>的键名：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>描述
</th></tr>
<tr>
<td>sheet filename
</td>
<td>地块表的<b>文件名</b>，不包含文件扩展名。例如，对于从<code>assets/some-tilesheet.png</code>加载的地块表，其sheet filename应当为<code>some-tilesheet</code>。
</td></tr>
<tr>
<td>tile X<br />tile Y
</td>
<td>此地块在地块表上的X位置和Y位置。从0开始计数。
</td></tr></tbody></table>
<p><br />
每个字典项的值形如<code>width in tiles/height in tiles/direction/type/draw tile X/draw tile Y/is seasonal/alternate tilesheet</code>:
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>描述
</th></tr>
<tr>
<td>width in tiles<br />height in tiles
</td>
<td>座椅的尺寸，单位为地块。例如，设置宽度为2，则会允许玩家坐在该椅子地块右侧的地块上。
</td></tr>
<tr>
<td>direction
</td>
<td>玩家坐下时应当面向的方向。可用的取值为<samp>down</samp>、<samp>left</samp>、<samp>right</samp>、<samp>up</samp>或 <samp>opposite</samp>。任何其他取值都会被默认为<samp>up</samp>。
</td></tr>
<tr>
<td>type
</td>
<td>取下两者之一：
<ul><li>任意椅子代码（例如<samp>playground</samp>或<samp>ccdesk</samp>），此代码会影响游戏中硬编码的椅子逻辑。可以指定诸如<samp>default</samp>的无效值以忽略此。若需要绘制比椅子尺寸高出一个的椅子图像，则需指定<samp>highback_chair</samp>椅子代码。这会在使用时将 draw tile（见下文）设置为左下方的地块。此代码在绘制有靠背的椅子（例如<a href="/%E6%A9%A1%E6%9C%A8%E6%A4%85%E5%AD%90" title="橡木椅子">橡木椅子</a>）时非常实用。</li>
<li><b>或</b> 可以输入<samp>custom <code title="必需字段 &#39;offset_x&#39;">&lt;offset_x&gt;</code> <code title="必需字段 &#39;offset_y&#39;">&lt;offset_y&gt;</code> <code title="必需字段 &#39;extra_height&#39;">&lt;extra_height&gt;</code></samp>以覆盖硬编码的偏移和高度数值。单位为地块（例如，offset_x 设为0.5会将落座位置上移半格）。</li></ul>
</td></tr>
<tr>
<td>draw tile X<br />draw tile Y
</td>
<td>绘制椅子在<samp>TileSheets\ChairTiles</samp>地块表（或自定义地块表）中的X和Y位置。从0开始计数。若宽度/高度大于1，则取左上角的地块。
</td></tr>
<tr>
<td>is seasonal
</td>
<td>落座时是否绘制季节变体。若开启，则<code title="必需字段 &#39;draw tile X&#39;">&lt;draw tile X&gt;</code>和<code title="必需字段 &#39;draw tile Y&#39;">&lt;draw tile Y&gt;</code>每个季节会偏移一格。这也就是说，春/夏/秋/冬贴图应当在地块表中按照从左到右的顺序相邻排列。
</td></tr>
<tr>
<td>alternate tilesheet
</td>
<td><b>可选</b> 用于绘制地块的地块表素材名称，须使用<samp>\\</samp>（双反斜杠）作为路径分隔符。默认值为<samp>TileSheets\\ChairTiles</samp>。
</td></tr></tbody></table>
<h2><span id="已知地图属性"></span><span class="mw-headline" id=".E5.B7.B2.E7.9F.A5.E5.9C.B0.E5.9B.BE.E5.B1.9E.E6.80.A7">已知地图属性</span></h2>
<h3><span id="建造建筑"></span><span class="mw-headline" id=".E5.BB.BA.E9.80.A0.E5.BB.BA.E7.AD.91">建造建筑</span></h3>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>CanBuildHere T</samp><br />(可用于任何户外地点)
</td>
<td>是否允许在当前地点建造建筑。游戏会自动处理建造过程（例如罗宾会询问玩家建造位置）。
</td></tr>
<tr>
<td><samp>BuildConditions <code title="必需字段 &#39;query&#39;">&lt;query&gt;</code></samp><br />(可用于任何户外地点)
</td>
<td>若设置了<samp>CanBuildHere</samp>，则可设置此<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>以判定当前是否可以建造于此。
</td></tr>
<tr>
<td><samp>LooserBuildRestrictions T</samp><br />(可用于任何户外地点)
</td>
<td>若设置此属性，则无需再另行设置<samp>Buildable T</samp>或<samp>Diggable T</samp>。不过，仍可以设置<samp>Buildable F</samp>以阻止建造建筑。其他限制仍会生效。
</td></tr>
<tr>
<td><samp>ValidBuildRect <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> <code title="必需字段 &#39;width&#39;">&lt;width&gt;</code> <code title="必需字段 &#39;height&#39;">&lt;height&gt;</code></samp><br />(可用于任何户外地点)
</td>
<td>可以放置建筑的地块区域。若缺省，建筑可以放置在任何可能的开放空间。
</td></tr></tbody></table>
<h3><span id="农作物"></span><span class="mw-headline" id=".E5.86.9C.E4.BD.9C.E7.89.A9">农作物</span></h3>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>AllowGiantCrops T</samp>
</td>
<td>若设为非空值，则<a href="/%E5%86%9C%E4%BD%9C%E7%89%A9#.E5.B7.A8.E5.A4.A7.E4.BD.9C.E7.89.A9" title="农作物">巨大作物</a>可以在此地块生长（前提是此地块允许种植作物，而这是由<a href="/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=edit&amp;redlink=1" class="new" title="Modding:Migrate to Stardew Valley 1.6（页面不存在）">作物数据</a>或<a href="/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=edit&amp;redlink=1" class="new" title="Modding:Migrate to Stardew Valley 1.6（页面不存在）"><samp>PlantableLocations</samp>上下文字段</a>决定的。）
</td></tr>
<tr>
<td><samp>DirtDecayChance <code title="必需字段 &#39;chance&#39;">&lt;chance&gt;</code></samp>
</td>
<td>每块未种作物的耕地过夜消失的概率。为 0（永不）和 1（必然）之间的值。默认为 0（温室）、0.1（农场）和 1（其他）。
</td></tr></tbody></table>
<h3><span id="植物、采集品和物品生成"></span><span class="mw-headline" id=".E6.A4.8D.E7.89.A9.E3.80.81.E9.87.87.E9.9B.86.E5.93.81.E5.92.8C.E7.89.A9.E5.93.81.E7.94.9F.E6.88.90">植物、采集品和物品生成</span></h3>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>AllowGrassGrowInWinter T</samp>²<br />（适用于任何地点）
</td>
<td>允许<a href="/%E8%8D%89" title="草">草</a>在冬季蔓延。
</td></tr>
<tr>
<td><samp>AllowGrassSurviveInWinter T</samp>²<br />（适用于任何地点）
</td>
<td>允许秋天的<a href="/%E8%8D%89" title="草">草</a>在秋冬换季时不消失。
</td></tr>
<tr>
<td><samp>EnableGrassSpread T</samp>²<br />（适用于任何地点）
</td>
<td>允许此地点的<a href="/%E8%8D%89" title="草">草</a>每天蔓延。
</td></tr>
<tr>
<td><samp>Fall_Objects T</samp>²<br /><samp>Spring_Objects T</samp>²<br /><samp>Summer_Objects T</samp>²<br /><samp>Winter_Objects T</samp>²
</td>
<td><b>请勿使用此属性生成季节采集品！</b>如需生成采集品，请编辑 <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E7%82%B9%E6%95%B0%E6%8D%AE" title="模组:地点数据">Data/Location</a> 的 <samp>Forage</samp> 字段。<br /><br />此属性与 <samp>forceLoadObjects</samp> 属性（未列出）联用，仅适用于高度特化的情景。请勿使用这些属性。<br /><b>例如：<samp>Fall_Objects</samp>。</b>
</td></tr>
<tr>
<td><s><samp>Feed <code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code></samp></s><br /><s>（适用于鸡舍和畜棚）</s>
</td>
<td><s>设置鸡舍或畜棚内的<a href="/%E5%96%82%E6%96%99%E6%96%97" title="喂料斗">喂料斗</a>生成位置。<br /><b>示例：<samp>Feed 3 2</samp>。</b></s><br />1.6 版本已弃用此属性。当前版本中，喂料斗是一种<a href="/%E6%A8%A1%E7%BB%84:%E5%A4%A7%E5%9E%8B%E6%89%93%E9%80%A0%E5%93%81" title="模组:大型打造品">大型打造品</a>，其 ID 为 (BC)99。游戏通过将其数据添加到 <a href="/%E6%A8%A1%E7%BB%84:%E5%BB%BA%E7%AD%91" title="模组:建筑">Data/Buildings</a> 的 <samp>IndoorItems</samp> 字段以在指定位置生成喂料斗。
</td></tr>
<tr>
<td><samp>ForceAllowTreePlanting T</samp>²<br />（适用于任何地点）
</td>
<td>允许在当前位置种植树木（野树和果树），无论正常情况下是否允许种树。
</td></tr>
<tr>
<td><samp>ForceSpawnForageables T</samp>²<br />（适用于室内）
</td>
<td>允许此地点生成采集品。
</td></tr>
<tr>
<td><samp>skipWeedGrowth T</samp>²<br />（适用于任何地点）
</td>
<td>阻止杂草在此地生成和蔓延。
</td></tr>
<tr>
<td><samp>SpawnBeachFarmForage T</samp>²<br />（适用于农场）
</td>
<td>在农场上随机生成海滩采集物和<a href="/%E8%A1%A5%E7%BB%99%E7%AE%B1" title="补给箱">补给箱</a>（就像<a href="/%E5%86%9C%E5%9C%BA%E5%9C%B0%E5%9B%BE" title="农场地图">原版的海滩农场</a>）。仅当一个地块的 <samp>Back</samp> 图层具有 <samp>BeachSpawn T</samp> 属性、该地块为空、且在 <samp>AlwaysFront</samp> 层上没有地块时，采集品和补给箱才能生成于此地块。
</td></tr>
<tr>
<td><samp>SpawnForestFarmForage T</samp>²<br />（适用于农场）
</td>
<td>在农场上随机生成森林采集品（就像<a href="/%E5%86%9C%E5%9C%BA%E5%9C%B0%E5%9B%BE" title="农场地图">原版的森林农场</a>）。仅当一个地块具有 <samp>Type Grass</samp> 属性、该地块为空、且在 <samp>AlwaysFront</samp> 层上没有地块时，采集品才能生成于此地块。
</td></tr>
<tr>
<td><samp>SpawnGrassFromPathsOnNewYear T</samp>²<br />（适用于任何地点）
</td>
<td>新的一年开始时，在每个 <samp>Paths</samp> 层上索引为22的地块上生成草。另请参阅 <samp>SpawnRandomGrassOnNewYear</samp>。
</td></tr>
<tr>
<td><samp>SpawnDebrisOnNewMonth T</samp><br /><samp>SpawnDebrisOnNewYear T</samp>²<br />（适用于任何地点）
</td>
<td>新的月/年开始时，在随机位置生成杂草、石头或数值（服从于通常情况下的生成规则）。
</td></tr>
<tr>
<td><samp>SpawnMountainFarmOreRect <code title="必需字段 &#39;tile X&#39;">&lt;tile X&gt;</code> <code title="必需字段 &#39;tile Y&#39;">&lt;tile Y&gt;</code> <code title="必需字段 &#39;tile width&#39;">&lt;tile width&gt;</code> <code title="必需字段 &#39;tile height&#39;">&lt;tile height&gt;</code></samp><br />（适用于农场）
</td>
<td>农场地图上矿石随机生成的地块区域（就像<a href="/%E5%86%9C%E5%9C%BA%E5%9C%B0%E5%9B%BE" title="农场地图">原版的山顶农场</a>）。矿石仅会生成在具有 <samp>Type Dirt</samp> 地块属性的空地块上。
</td></tr>
<tr>
<td><samp>SpawnRandomGrassOnNewYear T</samp>²<br />（适用于任何地点）
</td>
<td>在新的一年开始时，在随机位置生成草（依赖于通常情况下草的生成规则）。另请参见 <samp>SpawnGrassFromPathsOnNewYear</samp>。
</td></tr>
<tr>
<td><samp>Stumps [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;unused&#39;">&lt;unused&gt;</code>]+</samp><br />（适用于任何地点）
</td>
<td>每天向秘密森林地图添加大树桩。每个树桩的第3个字段似乎无用。<br />示例：<samp>Stumps 24 6 3 29 7 3 26 10 3 46 6 3 34 26 3 41 26 3</samp>。
</td></tr>
<tr>
<td><samp>Treasure <code title="必需字段 &#39;type&#39;">&lt;type&gt;</code> <code title="必需字段 &#39;int id&#39;">&lt;int id&gt;</code></samp><br />（适用于任何地点）
</td>
<td>添加能被挖掘的宝藏。其中 <code title="必需字段 &#39;type&#39;">&lt;type&gt;</code> 取下列值之一：<br /><samp>Coins, Copper, Coal, Iron, Gold, Iridium, CaveCarrot, Arch, Object</samp>。<br /> 若设为 <samp>Arch</samp> 或 <samp>Object</samp> ，则可指定 <code title="必需字段 &#39;id&#39;">&lt;id&gt;</code> 以指定宝藏物品的ID。
</td></tr>
<tr>
<td><samp>Trees [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;int type&#39;">&lt;int type&gt;</code>]+</samp><br />（适用于任何地点）
</td>
<td>向地图添加树。其中 <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> 字段为地块坐标，而 <code title="必需字段 &#39;type&#39;">&lt;type&gt;</code> 为树的类型（ 0：橡树，1：枫树，2：松树，5：棕榈树，6：磨菇树，7：桃花心木）。<br />示例：<samp>Trees 17 18 2 20 31 2</samp>。
</td></tr></tbody></table>
<h3><span id="传送和地图位置"></span><span class="mw-headline" id=".E4.BC.A0.E9.80.81.E5.92.8C.E5.9C.B0.E5.9B.BE.E4.BD.8D.E7.BD.AE">传送和地图位置</span></h3>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>AllowWakeUpWithoutBed <code title="必需字段 &#39;allow&#39;">&lt;allow&gt;</code></samp>
</td>
<td>玩家是否能够不用床便在此位置醒来，类似于姜岛农舍。这主要与<a href="/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=edit&amp;redlink=1" class="new" title="Modding:Migrate to Stardew Valley 1.6（页面不存在）"><samp>Data/LocationContexts</samp></a>的<samp>PassOutLocations</samp>字段配合使用。
</td></tr>
<tr>
<td><samp>BackwoodsEntry [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农场）
</td>
<td>玩家从边远森林进入农场时被传送到的位置。
</td></tr>
<tr>
<td><samp>BusStopEntry [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br /><i>（适用于农场）</i>
</td>
<td>玩家从巴士站进入农场时被传送到的位置。
</td></tr>
<tr>
<td><samp>DefaultWarpLocation <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp><br /><i>（适用于任何地点）</i>
</td>
<td>默认的目的地地块，当玩家或村民被添加到此地点却未指定目标地块时，则会默认传送到此地块。（使用<a href="/%E6%A8%A1%E7%BB%84:%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%91%BD%E4%BB%A4" title="模组:控制台命令">调试命令</a>，例如<samp>debug warp</samp>或<samp>debug eventbyid</samp>就会造成这种情况。）
</td></tr>
<tr>
<td><samp>EntryLocation <code title="必需字段 &#39;tile X&#39;">&lt;tile X&gt;</code> <code title="必需字段 &#39;tile Y&#39;">&lt;tile Y&gt;</code></samp><br />（适用于农舍）
</td>
<td>设置玩家进入农舍时被传送到的地块。
</td></tr>
<tr>
<td><samp>FarmCaveEntry [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农场）
</td>
<td>玩家从农场山洞回到农场时被传送到的地点。
</td></tr>
<tr>
<td><samp>FarmHouseEntry [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农场）
</td>
<td>更改农舍的位置。也就是会更改农舍入口和出口的位置。
</td></tr>
<tr>
<td><samp>ForestEntry [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农场）
</td>
<td>玩家从煤矿森林进入农场时被传送到的位置。
</td></tr>
<tr>
<td><samp>GrandpaShrineLocation [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农场）
</td>
<td>爷爷的神龛的位置。对应于其左上角地块。
</td></tr>
<tr>
<td><samp>GreenhouseLocation [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农场）
</td>
<td>温室的默认位置。对应于温室左上角地块的位置。
</td></tr>
<tr>
<td><samp>KitchenStandingLocation [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农舍）
</td>
<td>使用厨房时玩家的配偶站立的位置。
</td></tr>
<tr>
<td><samp>MailboxLocation [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农场）
</td>
<td>用于移动农舍的邮箱，控制邮箱图标绘制的位置。<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> 是邮箱底座的地块坐标，即用于交互的地块。
</td></tr>
<tr>
<td><samp>NPCWarp [<code title="必需字段 &#39;int fromX&#39;">&lt;int fromX&gt;</code> <code title="必需字段 &#39;int fromY&#39;">&lt;int fromY&gt;</code> <code title="必需字段 &#39;string toArea&#39;">&lt;string toArea&gt;</code> <code title="必需字段 &#39;int toX&#39;">&lt;int toX&gt;</code> <code title="必需字段 &#39;int toY&#39;">&lt;int toY&gt;</code>]+</samp><br />（适用于任何地点）
</td>
<td>相当于<samp>Warp</samp>，但仅适用于村民。
</td></tr>
<tr>
<td><samp>PetBowlLocation <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp><br /><i>(valid in the farm)</i>
</td>
<td>宠物碗的默认位置。
</td></tr>
<tr>
<td><samp>ShippingBinLocation [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农场）
</td>
<td>出货箱的默认位置。对应于出货箱左上角地块。
</td></tr>
<tr>
<td><samp>SpouseAreaLocation [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农场）
</td>
<td>室外的4x4的配偶使用的区域。对应于该区域左上角地块。<div class="thumb tright"><div class="thumbinner" style="width:152px;"><a href="/File:SpouseArea.png" class="image"><img alt="SpouseArea.png" src="https://stardewvalleywiki.com/mediawiki/images/thumb/1/11/SpouseArea.png/150px-SpouseArea.png" decoding="async" width="150" height="90" class="thumbimage" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/1/11/SpouseArea.png/225px-SpouseArea.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/1/11/SpouseArea.png/300px-SpouseArea.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:SpouseArea.png" class="internal" title="放大"></a></div></div></div></div>
</td></tr>
<tr>
<td><samp>SpouseRoomPosition <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp><br />（适用于农舍）
</td>
<td>用于放置<a href="/%E5%A9%9A%E5%A7%BB#.E9.85.8D.E5.81.B6.E7.9A.84.E6.88.BF.E9.97.B4" title="婚姻">配偶的房间</a>的位置，对应于配偶房间的左上角地块。
</td></tr>
<tr>
<td><samp>TravelingCartPosition <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp><br />（适用于煤矿森林）
</td>
<td>用于放置<a href="/%E6%97%85%E8%A1%8C%E8%B4%A7%E8%BD%A6" title="旅行货车">旅行货车</a>的位置，对应于货车左上角。此处的左上角为碰撞箱的左上角，因此货车车篷会高于此地块2格。
</td></tr>
<tr>
<td><samp>Warp [<code title="必需字段 &#39;int fromX&#39;">&lt;int fromX&gt;</code> <code title="必需字段 &#39;int fromY&#39;">&lt;int fromY&gt;</code> <code title="必需字段 &#39;string toArea&#39;">&lt;string toArea&gt;</code> <code title="必需字段 &#39;int toX&#39;">&lt;int toX&gt;</code> <code title="必需字段 &#39;int toY&#39;">&lt;int toY&gt;</code>]+</samp><br />（适用于任何地点）
</td>
<td>设置用于传送玩家到另一地图的地块（例如们）。其中 <code title="必需字段 &#39;fromX&#39;">&lt;fromX&gt;</code> <code title="必需字段 &#39;fromY&#39;">&lt;fromY&gt;</code> 字段是传送点的地块坐标，<code title="必需字段 &#39;toArea&#39;">&lt;toArea&gt;</code> <code title="必需字段 &#39;toX&#39;">&lt;toX&gt;</code> <code title="必需字段 &#39;toY&#39;">&lt;toY&gt;</code> 为待去往地点的名称和传送目标地块的坐标。<br /><b>示例： 6 20 Mountain 76 9。</b>
</td></tr>
<tr>
<td><samp>WarpTotemEntry[<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code>]</samp><br />（适用于农场）
</td>
<td>当玩家通过农场图腾或回程魔杖传送回农场时使用的位置。
</td></tr></tbody></table>
<h3><span id="音频"></span><span class="mw-headline" id=".E9.9F.B3.E9.A2.91">音频</span></h3>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>BrookSounds [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;int type&#39;">&lt;int type&gt;</code>]</samp><br />（适用于室外）
</td>
<td>添加声源。其中 <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> 字段为地块坐标，<code title="必需字段 &#39;type&#39;">&lt;type&gt;</code> 为背景音ID，其取值如下：
<ul><li><samp>0</samp> (babblingBrook);</li>
<li><samp>1</samp> (cracklingFire);</li>
<li><samp>2</samp> (engine);</li>
<li><samp>3</samp> (cricket);</li>
<li><samp>4</samp> (waterfall);</li>
<li><samp>5</samp> (big waterfall).</li></ul>
</td></tr>
<tr>
<td><samp>Music <code title="必需字段 &#39;string name&#39;">&lt;string name&gt;</code></samp><br />（适用于任何地点）
</td>
<td>设置玩家进入此地图时播放的音乐，其中<code title="必需字段 &#39;name&#39;">&lt;name&gt;</code>为音频文件中的<a href="/%E6%A8%A1%E7%BB%84:%E9%9F%B3%E9%A2%91" title="模组:音频">声音提示</a>名称。<br /><b>示例：<samp>Music MarlonsTheme</samp>。</b>（已过时；请使用<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E7%82%B9%E6%95%B0%E6%8D%AE#.E9.9F.B3.E4.B9.90" title="模组:地点数据"><samp>Data/Locations</samp></a>中的音乐字段。仅当<samp>Data/Locations</samp>没有音乐时才使用此属性。）
</td></tr>
<tr>
<td><samp>Music <code title="必需字段 &#39;int start&#39;">&lt;int start&gt;</code> <code title="必需字段 &#39;int end&#39;">&lt;int end&gt;</code> <code title="必需字段 &#39;string name&#39;">&lt;string name&gt;</code></samp><br />（适用于任何地点）
</td>
<td>设置玩家进入此地图时播放的音乐，其中<code title="必需字段 &#39;name&#39;">&lt;name&gt;</code>为音频文件中的<a href="/%E6%A8%A1%E7%BB%84:%E9%9F%B3%E9%A2%91" title="模组:音频">声音提示</a>名称。音乐只会在游戏时间介于 <code title="必需字段 &#39;int start&#39;">&lt;int start&gt;</code>（含）和 <code title="必需字段 &#39;int end&#39;">&lt;int end&gt;</code>（不含）时播放。<br /><b>示例：<samp>Music 800 1200 MarlonsTheme</samp>.</b> （已过时；请使用<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E7%82%B9%E6%95%B0%E6%8D%AE#.E9.9F.B3.E4.B9.90" title="模组:地点数据"><samp>Data/Locations</samp></a>中的音乐字段。仅当<samp>Data/Locations</samp>没有音乐时才使用此属性。）
</td></tr></tbody></table>
<h3><span id="光照"></span><span class="mw-headline" id=".E5.85.89.E7.85.A7">光照</span></h3>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>AmbientLight <code title="必需字段 &#39;byte r&#39;">&lt;byte r&gt;</code> <code title="必需字段 &#39;byte g&#39;">&lt;byte g&gt;</code> <code title="必需字段 &#39;byte b&#39;">&lt;byte b&gt;</code></samp><br />（适用于室内和忽略室外光照的地点）
</td>
<td>设置环境光照的<a href="https://en.wikipedia.org/wiki/RGB_color_model" class="extiw" title="wikipedia:RGB color model">RGB</a>颜色。特别注意，此颜色值为白色 (255,255,255) 减去欲设置颜色的RGB值。<br /><b>示例： <samp>AmbientLight 95 95 95</samp>设置正常情况下白天的室内光照。</b>
</td></tr>
<tr>
<td><samp>AmbientNightLight <code title="必需字段 &#39;byte r&#39;">&lt;byte r&gt;</code> <code title="必需字段 &#39;byte g&#39;">&lt;byte g&gt;</code> <code title="必需字段 &#39;byte b&#39;">&lt;byte b&gt;</code></samp><br />（适用于室内和忽略室外光照的地点）
</td>
<td>设置夜间环境光照的<a href="https://en.wikipedia.org/wiki/RGB_color_model" class="extiw" title="wikipedia:RGB color model">RGB</a>颜色。特别注意，此颜色值为白色 (255,255,255) 减去欲设置颜色的RGB值。<br /><b>示例：<samp>AmbientLight 150 150 30</samp> 设置温室的夜间环境光照。</b>
</td></tr>
<tr>
<td><samp>forceLoadPathLayerLights T</samp>²<br /><b>适用于室外非节日地点</b>
</td>
<td>是否强制从<samp>Paths</samp>层加载地图光照，正常情况下不会从此处加载光照。<br /><b>示例： <samp>forceLoadPathLayerLights true</samp>.</b>
</td></tr>
<tr>
<td><samp>IgnoreLightingTiles T</samp>²<br />（适用于室内）
</td>
<td>是否忽略<samp>Front</samp>和<samp>Buildings</samp>层的光照。<br /><b>示例： <samp>IgnoreLightingTiles true</samp>。</b>
</td></tr>
<tr>
<td><samp>Light [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;int type&#39;">&lt;int type&gt;</code>]+</samp><br />（适用于任何地点）
</td>
<td>添加光源。其中<code title="必需字段 &#39;type&#39;">&lt;type&gt;</code>字段为光源种类（例如4代表壁挂烛台），而 <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> 则为地块坐标。其中<code title="必需字段 &#39;type&#39;">&lt;type&gt;</code>可能的取值为：
<div class="thumb tright"><div class="thumbinner" style="width:232px;"><a href="/File:LightReference.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/thumb/b/bb/LightReference.png/230px-LightReference.png" decoding="async" width="230" height="223" class="thumbimage" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/b/bb/LightReference.png/345px-LightReference.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/b/bb/LightReference.png/460px-LightReference.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:LightReference.png" class="internal" title="放大"></a></div>游戏的所有9种光源类型，以及Paths层光源。</div></div></div>
<ul><li><samp>1</samp> (灯笼);</li>
<li><samp>2</samp>（窗户）；</li>
<li><samp>4</samp>（壁挂烛台）;</li>
<li><samp>5</samp> (坩埚);</li>
<li><samp>6</samp>（室内窗户）；</li>
<li><samp>7</samp> (放映机);</li>
<li><samp>8</samp> (鱼缸);</li>
<li><samp>9</samp>（冬日鹈鹕镇树木）；</li>
<li><samp>10</samp>（光点）。</li></ul>
<p>其他取值会使游戏崩溃。<br /><b>示例： <samp>Light 3 8 4 6 8 4 11 8 4 3 2 5 10 2 5 6 19 5 5 15 5 5 11 5 11 12 5</samp>（探险家公会）。</b>
</p>
</td></tr>
<tr>
<td><samp>WindowLight [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;int type&#39;">&lt;int type&gt;</code>]+</samp><br />（适用于任何地点）
</td>
<td>添加仅在非雨天室内点亮的光源（例如窗户阳光）。参见<samp>Light</samp>以获得详细信息。
</td></tr></tbody></table>
<h3><span id="地图和地块更改"></span><span class="mw-headline" id=".E5.9C.B0.E5.9B.BE.E5.92.8C.E5.9C.B0.E5.9D.97.E6.9B.B4.E6.94.B9">地图和地块更改</span></h3>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>ClearEmptyDirtOnNewMonth T</samp>²<br />（适用于任何地点）
</td>
<td>在新的一年开始时，清除所有未种作物的耕地。
</td></tr>
<tr>
<td><samp>DayTiles [<code title="必需字段 &#39;string layerName&#39;">&lt;string layerName&gt;</code> <code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;int tilesheetIndex&#39;">&lt;int tilesheetIndex&gt;</code>]+</samp><br />（适用于任何地点）
</td>
<td>设置早6时至晚7时出现的地块。晚7时前，此属性会自动寻找<code title="必需字段 &#39;layerName&#39;">&lt;layerName&gt;</code>层中的、位于坐标 (<code title="必需字段 &#39;x&#39;">&lt;x&gt;</code>, <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code>) 处的地块，将满足条件地块的地块表索引设为<code title="必需字段 &#39;tilesheetIndex&#39;">&lt;tilesheetIndex&gt;</code>，并添加辉光以模拟日光。仅当地点在室内且<code title="必需字段 &#39;tilesheetIndex&#39;">&lt;tilesheetIndex&gt;</code>为256、288、405、469或1224会添加辉光。可传入多组参数以同时配置多组地块。<br /><b>示例： <samp>DayTiles Front 3 1 256 Front 3 2 288</samp>。</b>
</td></tr>
<tr>
<td><samp>NightTiles [<code title="必需字段 &#39;string layerName&#39;">&lt;string layerName&gt;</code> <code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;int tilesheetIndex&#39;">&lt;int tilesheetIndex&gt;</code>]+</samp><br />（适用于任何地点）
</td>
<td>在晚7时后改变地块。此外，此属性经常搭配<samp>DayTiles</samp>使用：早6时到晚7时使用<samp>DayTiles</samp>地块，在晚7时后使用<samp>NightTiles</samp>的地块。游戏中，此属性主要用于台灯。注意夜间时间依赖于季节（<a href="/%E6%B8%B8%E6%88%8F%E5%86%85%E6%97%B6%E9%97%B4#.E6.97.A5.E8.90.BD" title="游戏内时间">游戏内时间#日落</a>）。
</td></tr>
<tr>
<td><samp>Doors [<code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;string sheetID&#39;">&lt;string sheetID&gt;</code> <code title="必需字段 &#39;int tileID&#39;">&lt;int tileID&gt;</code>]+</samp><br />（适用于室内）
</td>
<td>配置室内门的功能。与<samp>Action Door</samp>地块属性搭配使用。 其中 <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> 字段为地块坐标，<code title="必需字段 &#39;sheetID&#39;">&lt;sheetID&gt;</code> 为包含门贴图的贴图集名，而 <code title="必需字段 &#39;tileID&#39;">&lt;tileID&gt;</code> 为贴图集内的地块索引。
</td></tr></tbody></table>
<h3><span id="钓鱼"></span><span class="mw-headline" id=".E9.92.93.E9.B1.BC">钓鱼</span></h3>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>FarmFishLocationOverride <code title="必需字段 &#39;location name&#39;">&lt;location name&gt;</code> <code title="必需字段 &#39;chance&#39;">&lt;chance&gt;</code></samp><br />（适用于农场）
</td>
<td>钓鱼时添加一个备选地点名称，其中<code title="必需字段 &#39;chance&#39;">&lt;chance&gt;</code>为 0（不可能）至 1（必然）之间的小数值。例如，<samp>FarmFishLocationOverride Mountain 0.5</samp>在当前地点增加50%概率抓到深山鱼类而非普通鱼类。地点名称是大小写敏感的，可由<a rel="nofollow" class="external text" href="https://www.nexusmods.com/stardewvalley/mods/679">Debug Mode模组</a>给出。
</td></tr>
<tr>
<td><samp>FarmOceanCrabPotOverride T</samp>²<br />（适用于农场）
</td>
<td>使农场的蟹笼能抓到海鱼。
</td></tr></tbody></table>
<h3><span id="农舍内部"></span><span class="mw-headline" id=".E5.86.9C.E8.88.8D.E5.86.85.E9.83.A8">农舍内部</span></h3>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>FarmHouseFlooring <code title="必需字段 &#39;flooring id&#39;">&lt;flooring id&gt;</code></samp><br />（适用于农场）
</td>
<td>创建新存档时，设置农舍初始地板样式。地板ID映射到<samp>Maps/walls_and_floors</samp>地块表中从索引336开始的4x4区域（其中地板ID 0 被映射到左上角的地板）。
</td></tr>
<tr>
<td><samp>FarmHouseFurniture [<code title="必需字段 &#39;furniture ID&#39;">&lt;furniture ID&gt;</code> <code title="必需字段 &#39;tile X&#39;">&lt;tile X&gt;</code> <code title="必需字段 &#39;tile Y&#39;">&lt;tile Y&gt;</code> <code title="必需字段 &#39;rotations&#39;">&lt;rotations&gt;</code>]+</samp><br />（适用于农场）
</td>
<td>创建新存档时，生成初始家具。若在同一地块上添加多个家具，则第一个家具会被放在地上，而最后一个家具会被放在第一个家具上。<br />
</td></tr>
<tr>
<td><samp>FarmHouseStarterGift [<code title="必需字段 &#39;id&#39;">&lt;id&gt;</code> <code title="可选字段 &#39;count&#39;">[count]</code>]+</samp>
</td>
<td>创建新存档时，应当出现在礼盒中的物品。参数由一到多组“物品ID 物品数量”对组成。其中最后一组物品的数量是可选的。
<p>例如，下述代码会生成10条河豚（物体128）和一个水滴鱼面具（帽子56）：
</p>
<pre>FarmHouseStarterGift (O)128 10 (H)56 1</pre>
<p>若缺省，则会添加默认物品（通常为15个防风草种子）。
</p>
</td></tr>
<tr>
<td><samp>FarmHouseStarterSeedsPosition <code title="必需字段 &#39;tile X&#39;">&lt;tile X&gt;</code> <code title="必需字段 &#39;tile Y&#39;">&lt;tile Y&gt;</code></samp><br />（适用于农场）
</td>
<td>设置创建新存档时种子包的放置位置。
</td></tr>
<tr>
<td><samp>FarmHouseWallpaper <code title="必需字段 &#39;wallpaper id&#39;">&lt;wallpaper id&gt;</code></samp><br />（适用于农场）
</td>
<td>创建新存档时，设置农舍初始墙纸样式。墙纸ID映射到<samp>Maps/walls_and_floors</samp>中从左上角开始数的1x4区域。
</td></tr></tbody></table>
<h3><span id="其他地点元数据"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E5.9C.B0.E7.82.B9.E5.85.83.E6.95.B0.E6.8D.AE">其他地点元数据</span></h3>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>CanCaskHere T</samp>²<br />（适用于任何地点）
</td>
<td>允许木桶在此地点工作。
</td></tr>
<tr>
<td><samp>indoorWater T</samp>²<br />（适用于室内）
</td>
<td>允许此地点的水体逻辑（即钓鱼等）。
</td></tr>
<tr>
<td><samp>IsFarm T</samp>²<br />（适用于任何地点）
</td>
<td>将此地点标记为农场。仅影响那些会检查游戏代码中<code>location.IsFarm</code>属性的通用地点/互动逻辑；而那些硬编码到<code>Farm</code>类的逻辑（例如农场动物、宠物、乌鸦、稻草人、温室、农场建筑等）仍然只能用于真正的农场。
</td></tr>
<tr>
<td><samp>IsGreenhouse T</samp>²<br />（适用于任何地点）
</td>
<td>将此地点标记为温室。
</td></tr>
<tr>
<td><samp>LocationContext Default</samp><br />（适用于任何地点）
</td>
<td>将地图设置为星露谷地区的一部分，以使用特定的游戏逻辑，比如天气。
</td></tr>
<tr>
<td><samp>LocationContext Island</samp><br />（适用于任何地点）
</td>
<td>将地图设置为姜岛地区的一部分，以使用特定的游戏逻辑，比如天气。
</td></tr>
<tr>
<td><samp>Outdoors T</samp>²<br />（适用于任何地点）
</td>
<td>设置此区域是否为室外。<br /><b>示例： <samp>Outdoors true</samp>。</b>
</td></tr>
<tr>
<td><samp>ProduceArea <code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;int width&#39;">&lt;int width&gt;</code> <code title="必需字段 &#39;int height&#39;">&lt;int height&gt;</code></samp><br /><i>(valid in coops and barns)</i>
</td>
<td>设置动物能出生在鸡舍或畜棚中的区域。<br /><b>示例： <samp>ProduceArea 6 4 8 7</samp>。</b>
</td></tr>
<tr>
<td><samp>ScreenshotRegion <code title="必需字段 &#39;int left&#39;">&lt;int left&gt;</code> <code title="必需字段 &#39;int top&#39;">&lt;int top&gt;</code> <code title="必需字段 &#39;int right&#39;">&lt;int right&gt;</code> <code title="必需字段 &#39;int bottom&#39;">&lt;int bottom&gt;</code></samp><br />（适用于任何地点）
</td>
<td>限制截图时地图渲染的区域。<br /><b>示例： <samp>ScreenshotRegion 0 27 69 61</samp>。</b>
</td></tr>
<tr>
<td><samp>SeasonOverride [<code title="必需字段 &#39;string season&#39;">&lt;string season&gt;</code>]</samp><br />（适用于任何地点）
</td>
<td>为大多数游戏检查设定一个特殊的季节，这些检查包括可否种植作物、使用何种地块表等。
</td></tr>
<tr>
<td><samp>TreatAsOutdoors T</samp>²<br />（适用于室内）
</td>
<td>此地点会被视作室外，这会产生如下效果：生成除了<samp>Paths</samp>层光照以外的东西，打碎石头产出<a href="/%E7%85%A4%E7%82%AD" title="煤炭">煤炭</a>。<br /><b>示例： <samp>TreatAsOutdoors true</samp>。</b>
</td></tr>
<tr>
<td><samp>UniquePortrait [<code title="必需字段 &#39;str name&#39;">&lt;str name&gt;</code>]+</samp><br />（适用于任何地点）
</td>
<td>根据当前地点将指定NPC的肖像切换为相应的变体。例如例如村民<samp>Jane</samp>位于地点<samp>Room</samp>，则会将肖像切换到<samp>Portraits/Jane_Room</samp>。<br /><b>示例： <samp>UniquePortrait Maru</samp>。</b> （已过时；请使用<a href="/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=edit&amp;redlink=1" class="new" title="Modding:Migrate to Stardew Valley 1.6（页面不存在）">自定义村民外观</a>取代之。这些属性会重写NPC外观。）
</td></tr>
<tr>
<td><samp>UniqueSprite [<code title="必需字段 &#39;str name&#39;">&lt;str name&gt;</code>]+</samp><br />（适用于任何地点）
</td>
<td>根据指定的村民将当前地点的贴图集切换为相应的变体。例如村民<samp>Jane</samp>位于地点<samp>Room</samp>，则会将贴图集切换到<samp>Characters/Jane_Room</samp>。<br /><b>示例： <samp>UniqueSprite Maru</samp>。</b>（已过时；请使用<a href="/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=edit&amp;redlink=1" class="new" title="Modding:Migrate to Stardew Valley 1.6（页面不存在）">自定义村民外观</a>取代之。这些属性会重写NPC外观。）
</td></tr>
<tr>
<td><samp>ViewportClamp <code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;int width&#39;">&lt;int width&gt;</code> <code title="必需字段 &#39;int height&#39;">&lt;int height&gt;</code></samp>
</td>
<td>阻止视窗移出指定区域之外。<br /><b>示例： <samp>ViewportClamp 10 0 35 30</samp></b>（用于巴士站地图，使得左上角能看到的最远地块为 10, 0 而右下角能看到的最远地块为 44, 29 。）
</td></tr>
<tr>
<td><samp>ViewportFollowPlayer T</samp>²<br />（适用于任何地点）
</td>
<td>强制视窗以玩家为中心。<br /><b>示例： <samp>ViewportFollowPlayer</samp>。</b>
</td></tr></tbody></table>
<p><br />
<small>¹ 地图属性主要由<samp>GameLocation</samp>类的各种方法处理，尤其是<samp>resetLocalState</samp>。</small><br />
<small>² <samp>T</samp>值（也就是 <i>true</i> 的缩写）只是惯例，实际上亦可传入任意非空值。</small>
</p>
<h2><span id="已知地块属性"></span><span class="mw-headline" id=".E5.B7.B2.E7.9F.A5.E5.9C.B0.E5.9D.97.E5.B1.9E.E6.80.A7">已知地块属性</span></h2>
<p>本节不包括那些非常专门的属性，例如<samp>TouchAction WomensLocker</samp>。¹
</p>
<h3><span id="概述"></span><span class="mw-headline" id=".E6.A6.82.E8.BF.B0">概述</span></h3>
<table class="wikitable">

<tbody><tr>
<th>图层
</th>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>BeachSpawn T</samp>²
</td>
<td>使用海滩农场类型时，允许此地块生成海滩采集品和补给箱。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>Bed T</samp>²
</td>
<td>若玩家站在此地块上，则其会被认为正在床上，以用于体力回复（多人游戏中）以及晕倒逻辑。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>Buildable T</samp>²
</td>
<td>若无其他障碍，允许在此地块上建造农场建筑。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>DefaultBedPosition T</samp>²
</td>
<td>用于在升级后的农舍中放置玩家床铺，以及在迁移存档时使用。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>DefaultChildBedPosition T</samp>²
</td>
<td>用于在升级的农舍中放置婴儿床。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>Diggable T</samp>²
</td>
<td>将此地块标记为可被锄头挖掘和可以种植作物。也允许<a href="/%E8%8D%89" title="草">草</a>在此地块上生长。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>NoFishing T</samp>²
</td>
<td>禁止玩家在钓鱼时在此地块抛竿。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>NoFurniture T</samp>²
</td>
<td>禁止玩家在此地块上放置物体（不仅包括家具）。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>NoPath</samp>
</td>
<td>禁止村民穿过此地块。使村民必要时绕过此地块。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>NoSpawn All</samp><br /><samp>NoSpawn True</samp>
</td>
<td>禁止在此地块上生成采集品、杂物（树枝、杂草等）和树。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>NoSpawn False</samp>
</td>
<td>禁用此地块先前设置的所有<samp>NoSpawn</samp>属性。例如，可以用此属性来取消一个地块先前设置的<samp>NoSpawn</samp>地块索引属性。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>NoSpawn Grass</samp>
</td>
<td>禁止杂物（例如杂草或石头）生成在此地块。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>NoSpawn Tree</samp>
</td>
<td>禁止树在此生成。禁止玩家在此植树（除非在农场上）。若此地块已有树，禁止树在此生长。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>NoSprinklers T</samp>²
</td>
<td>禁止在此放置洒水器。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>NPCBarrier T</samp>²
</td>
<td>用于农场（包括鸡舍、畜棚、史莱姆屋）、地下矿井或姜岛，可禁止村民穿过或生成于当前地块。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>Passable T</samp>²
</td>
<td>禁止玩家在此地块上行走或放置东西，无论正常情况是否允许（正好与<samp>Buildings</samp>层的<samp>Passable T</samp>属性相反）。通常用于特定的水体地块上以划定桥的边界，从而防止玩家走入水中。既可以作为独立的TileData对象添加到地图中特定的地块上，也可以通过编辑地块表，将该属性直接添加到地块索引上，从而将此属性批量应用于此地块的实例。后一种方式更常用。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TemporaryBarrier T</samp>²
</td>
<td>仅在门打开的瞬间有用。会使玩家不可通过此地块，而村民则会认定该地块为障碍物而暂停后快速通过。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>Type <code title="必需字段 &#39;str type&#39;">&lt;str type&gt;</code></samp>
</td>
<td>设置地块类型，以用于多种游戏逻辑（例如脚步音效或种植作物），其中<code title="必需字段 &#39;type&#39;">&lt;type&gt;</code>取 <i>Dirt</i> 、<i>Stone</i> 、<i>Grass</i> 或 <i>Wood</i> 之一。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>Water T</samp>²
</td>
<td>将地块标记为水体地块，以用于多种游戏逻辑（即：物品会落入水中；可灌满喷壶；可能允许钓鱼；可能允许蟹笼；可灌溉附近水田作物；大部分情况不会被认作空地块；若在室内则可用于回复生命；若在室内、室外、矿井、下水道、潜水艇中则绘制动态的水波纹图，若在沙漠中则不绘制。
<p><b>将属性值设定为 I（大写字母）会使得地块不渲染水波纹。</b>
</p>
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>WaterSource T</samp>²
</td>
<td>允许玩家在此地块灌满喷壶。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>LockedDoorMessage <code title="必需字段 &#39;string data asset path&#39;">&lt;string data asset path&gt;</code></samp>
</td>
<td>用于在未满足<samp>ConditionalDoor</samp>条件时显示一个对话框，其文本取自指定的数据素材。<br /><b>示例：LockedDoorMessage Strings\\\\1_6_Strings:guild_door</b>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>NPCPassable T</samp>²
</td>
<td>相当于仅对村民有效的<samp>Passable</samp>属性，见下文。允许村民穿过此地块。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Passable T</samp>²
</td>
<td>允许穿过此地块，无论此地块正常情况下能否穿过。常用于<samp>Buildings</samp>层的、架在水上的小桥。此属性正好与上文的<samp>Back Passable T</samp>相反。既可以作为独立的TileData对象添加到地图中特定的地块上，也可以通过编辑地块表、将该属性直接添加到地块索引上以将此属性批量应用于此地块的实例。后一种方式更常用。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>ProjectilePassable T</samp>²
</td>
<td>允许抛射物穿过正常情况下无法穿过的地块（例如允许向岩浆池中射击）。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Shadow T</samp>²
</td>
<td>相当于上文的<samp>Passable</samp>属性，但仅用于玩家。允许玩家穿过此地块而不允许村民。
</td></tr>
<tr>
<td><samp>Paths</samp>
</td>
<td><samp>Order <code title="必需字段 &#39;I&#39;">&lt;I&gt;</code></samp>
</td>
<td>此属性应当施用于<samp>Paths</samp>地块表的29和30索引处。此属性设置多人游戏中联机小屋的生成顺序。
</td></tr>
<tr>
<td><samp>Paths</samp>
</td>
<td><samp>SpawnTree <code title="必需字段 &#39;type&#39;">&lt;type&gt;</code> <code title="必需字段 &#39;ID&#39;">&lt;ID&gt;</code> <code title="可选字段 &#39;stage on spawn&#39;">[stage on spawn]</code> <code title="可选字段 &#39;stage on regrow&#39;">[stage on regrow]</code></samp>
</td>
<td>创建地图时生成一棵树。其中：
<ul><li><code title="必需字段 &#39;type&#39;">&lt;type&gt;</code>取 <samp>wild</samp>（生成<a href="/%E6%A0%91" title="树">野树</a>）或 <samp>fruit</samp>（生成<a href="/%E6%A0%91" title="树">果树</a>）。</li>
<li><code title="必需字段 &#39;ID&#39;">&lt;ID&gt;</code>为树在<samp>Data/FruitTrees</samp>或<samp>Data/WildTrees</samp>中的索引。</li>
<li><code title="可选字段 &#39;stage on spawn&#39;">[stage on spawn]</code>设置首次将树添加到地图时的生长阶段（若可用）。</li>
<li><code title="可选字段 &#39;stage on regrow&#39;">[stage on regrow]</code>设置重新生成树木时的生长阶段（若可用）。</li></ul>
<p>此地块在<a href="#.E9.81.93.E8.B7.AF.E5.B1.82"><samp>Paths</samp>地块表中的索引</a>必须为34。
</p>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="TouchAction">TouchAction</span></h3>
<p><samp>TouchAction</samp>属性规定了玩家踏在地块上时执行的操作。
</p>
<table class="wikitable">

<tbody><tr>
<th>图层
</th>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction ChangeIntoSwimsuit</samp>
</td>
<td>使玩家换上泳装，禁止奔跑。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction ChangeOutOfSwimsuit</samp>
</td>
<td>使玩家换上常服，允许奔跑。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction ConditionalDoor <code title="必需字段 &#39;query&#39;">&lt;query&gt;</code></samp>
</td>
<td>使用<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>来确定玩家是否可以通过此地块。 若此地块同时具有<samp>LockedDoorMessage</samp>属性，且前述状态查询未通过，则会显示<samp>LockedDoorMessage</samp>所指定的文本；若未指定前述属性，则会显示默认的“It's locked...”对话框。<br /><i>示例： ConditionalDoor PLAYER_STAT Current monstersKilled 1000</i>
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction DesertBus</samp>
</td>
<td>允许在此乘公交返回巴士站。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction Emote <code title="必需字段 &#39;string npc&#39;">&lt;string npc&gt;</code> <code title="必需字段 &#39;int emoteID&#39;">&lt;int emoteID&gt;</code></samp>
</td>
<td>寻找姓名符合<code title="必需字段 &#39;npc&#39;">&lt;npc&gt;</code>字段的村民，并使其头顶显示<code title="必需字段 &#39;emoteID&#39;">&lt;emoteID&gt;</code>对应的表情（4:罐子，8:问号，12:生气，16:叹号，20:爱心，24:睡觉，28:伤心，32:开心，36:否定，40:愣住，52:游戏，56:音符，60:尴尬）。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction FaceDirection <code title="必需字段 &#39;string npc&#39;">&lt;string npc&gt;</code> <code title="必需字段 &#39;int direction&#39;">&lt;int direction&gt;</code></samp>
</td>
<td>寻找姓名符合<code title="必需字段 &#39;npc&#39;">&lt;npc&gt;</code>字段的村民，并使其面部朝向给定方向（0:上，1:右，2:下，3:左）。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction legendarySword</samp>
</td>
<td>当玩家手持<a href="/%E4%BA%94%E5%BD%A9%E7%A2%8E%E7%89%87" title="五彩碎片">五彩碎片</a>时，给予其<a href="/%E9%93%B6%E6%B2%B3%E5%89%91" title="银河剑">银河剑</a>。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction MagicWarp <code title="必需字段 &#39;string area&#39;">&lt;string area&gt;</code> <code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="可选字段 &#39;string prerequisite&#39;">[string prerequisite]</code></samp>
</td>
<td>将玩家传送到<code title="必需字段 &#39;area&#39;">&lt;area&gt;</code>区域的<code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code>地块坐标处，并产生魔法音效和特效。若指定了<code title="可选字段 &#39;prerequisite&#39;">[prerequisite]</code>字段，则仅当此字段指定的标识已被<samp>Game1.player.mailReceived</samp>设定才会传送。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction PlayEvent <code title="必需字段 &#39;event id&#39;">&lt;event id&gt;</code> <code title="可选字段 &#39;check preconditions&#39;">[check preconditions]</code> <code title="可选字段 &#39;skip if seen&#39;">[skip if seen]</code> <code title="可选字段 &#39;fallback action&#39;">[fallback action]</code></samp>
</td>
<td>相当于<samp>Action PlayEvent</samp>，但在玩家踏上此地块才触发。注意<code title="可选字段 &#39;fallback action&#39;">[fallback action]</code>是一个<samp>Action</samp>地块属性，<b>而非</b> <samp>TouchAction</samp>地块属性。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction PoolEntrance</samp>
</td>
<td>切换玩家走路/游泳模式。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction Sleep</samp>
</td>
<td>经玩家确认后在此睡觉。
</td></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction Warp <code title="必需字段 &#39;string area&#39;">&lt;string area&gt;</code> <code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="可选字段 &#39;string prerequisite&#39;">[string prerequisite]</code></samp>
</td>
<td>在此添加传送到指定地点和位置的传送口，仅用于玩家。此属性完全等价于<samp>TouchAction MagicWarp</samp>，除了没有魔法音效/特效。
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Action">Action</span></h3>
<p><samp>Action</samp>属性使得玩家与地块交互（例如，点击）时触发某种动作：
</p>
<table class="wikitable">

<tbody><tr>
<th>图层
</th>
<th>属性
</th>
<th>解释
</th></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action AdventureShop</samp>
</td>
<td>显示探险家公会的商店界面。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Arcade_Prairie</samp>
</td>
<td>显示“草原王者大冒险”街机游戏。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Arcade_Minecart</samp>
</td>
<td>显示“祝尼魔赛车”街机游戏。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BuyBackpack</samp>
</td>
<td>显示一个让玩家升级背包的菜单（若相应升级可用）。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Billboard</samp>
</td>
<td>显示日历菜单。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Blacksmith</samp>
</td>
<td>若克林特在附近，打开克林特的商店菜单。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Buy</samp>
</td>
<td>用在皮埃尔的杂货店中，当皮埃尔在附近（或去往姜岛而留下收钱箱）时，打开杂货店菜单。用在桑迪的商店中，则当桑迪在附近时打开桑迪商店的菜单。用于其他地点无效。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BrokenBeachBridge</samp>
</td>
<td>提示玩家使用木材修桥。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BuildingSilo</samp>
</td>
<td>若此地块上有建筑，则根据<samp>Data/Buildings</samp>中此建筑的<samp>HayCapacity</samp>字段启用该地块上的<a href="/%E7%AD%92%E4%BB%93" title="筒仓">筒仓</a>交互。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BuildingToggleAnimalDoor</samp>
</td>
<td>若此地块上有建筑，打开或关闭其动物门。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BuyQiCoins</samp>
</td>
<td>显示一个让玩家购买100齐币的对话。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Concessions</samp>
</td>
<td>打开电影院中的小卖部菜单（仅在电影院内有效）。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>TouchAction ConditionalDoor <code title="必需字段 &#39;query&#39;">&lt;query&gt;</code></samp>
</td>
<td>用于室内门下方的地块。此属性利用一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>以检查玩家是否可以打开此门。若检查未通过且此地块具有<samp>LockedDoorMessage</samp>属性，则会显示内容为相应文本字符串的对话框；否则显示通用的"It's locked..."对话框。<br /><i>示例： ConditionalDoor PLAYER_STAT Current monstersKilled 1000</i>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Carpenter</samp>
</td>
<td>当罗宾在附近时打开木匠商店的菜单。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ColaMachine</samp>
</td>
<td>询问玩家是否购买Joja可乐。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ClubCards</samp><br /><samp>Action Blackjack</samp>
</td>
<td>显示卡利科杰克小游戏。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ClubComputer</samp><br /><samp>Action FarmerFile</samp>
</td>
<td>显示包含游戏统计数据的对话框（步数、送出的礼物、挖掘的泥土等）。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ClubSeller</samp>
</td>
<td>显示一个对话框询问玩家是否以<span style="display: none;">data-sort-value="1000000"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />1,000,000金</span>购买<a href="/%E6%97%A0%E5%B0%BD%E8%B4%A2%E5%AF%8C%E4%B9%8B%E9%9B%95%E5%83%8F" title="无尽财富之雕像">无尽财富之雕像</a>。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ClubShop</samp>
</td>
<td>显示赌场商店菜单。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ClubSlots</samp>
</td>
<td>显示老虎机小游戏。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Dialogue <code title="必需字段 &#39;text&#39;">&lt;text&gt;</code></samp>
</td>
<td>显示包含指定文本的通用对话框。参见<a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D" title="模组:对话">对话格式</a>。<br /><i>示例： Action Dialogue Hi there @!</i>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action DivorceBook</samp>
</td>
<td>根据玩家当前婚姻状态，显示离婚选项（好比点击了<a href="/%E5%A9%9A%E5%A7%BB#.E7.A6.BB.E5.A9.9A" title="婚姻">离婚登记书</a>一样）。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Door <code title="必需字段 &#39;npcName&#39;">&lt;npcName&gt;</code> <code title="可选字段 &#39;npcName&#39;">[npcName]</code></samp>
</td>
<td>设置一扇室内门，除非玩家与给定村民有2心及以上的友谊，否则不能打开。门占上下两个地块，此属性需设置在下方的地块上。参见<a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D" title="模组:对话">对话格式</a>。<br /><i>示例： Action Door Abigail</i>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action DropBox <code title="必需字段 &#39;ID&#39;">&lt;ID&gt;</code></samp>
</td>
<td>允许玩家将物品放入此地块，用于给定<code title="必需字段 &#39;ID&#39;">&lt;ID&gt;</code>的<a href="/%E6%A8%A1%E7%BB%84:%E7%89%B9%E5%88%AB%E4%BB%BB%E5%8A%A1" title="模组:特别任务">特别任务</a>期间的收货箱。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ElliottBook</samp>
</td>
<td>显示文本 <i>Blank book</i> 。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ElliottPiano</samp>
</td>
<td>播放四种钢琴音符之一。<i>ElliottPiano 1</i> 为最低音，而 <i>ElliottPiano 4</i> 为最高音。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action EnterSewer</samp>
</td>
<td>若已获得钥匙，则将玩家传送至下水道。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action EvilShrineLeft</samp>
</td>
<td>需要一个五彩碎片以将孩子变成鸽子。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action EvilShrineCenter</samp>
</td>
<td>抹除前配偶对玩家的记忆。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action EvilShrineRight</samp>
</td>
<td>切换农场怪物生成状态。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Forge</samp>
</td>
<td>打开<a href="/%E9%94%BB%E9%80%A0" title="锻造">锻造</a>菜单。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Garbage <code title="必需字段 &#39;ID&#39;">&lt;ID&gt;</code></samp>
</td>
<td>基于<code title="必需字段 &#39;ID&#39;">&lt;ID&gt;</code>随机给予玩家特定物品。每日只能点击一次。TODO: 解释<code title="必需字段 &#39;ID&#39;">&lt;ID&gt;</code>的作用。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Gunther</samp>
</td>
<td>打开博物馆菜单，也就是可以选择捐赠古物或收集奖励的菜单。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action HMTGF</samp>
</td>
<td>在玩家手持<a href="/%E5%A4%A7%E6%B5%B7%E5%8F%82" title="大海参">大海参</a>时给予其一个“<a href="/%3F%3FHMTGF%3F%3F" title="??HMTGF??">??HMTGF??</a>”。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action IceCreamStand</samp>
</td>
<td>若当前为夏季，则显示冰激凌摊界面。否则，玩家会被告知夏天再来。（需要村民站在地块后）。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action JojaShop</samp>
</td>
<td>显示Joja超市界面。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Jukebox</samp>
</td>
<td>显示点唱机菜单以选取背景音乐。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action kitchen</samp><br />（适用于任何地点）
</td>
<td>显示烹饪菜单。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Letter <code title="必需字段 &#39;string messageKey&#39;">&lt;string messageKey&gt;</code></samp>
</td>
<td>以信件方式呈现指定信息，该信息读取自 <i>Content\Strings\StringsFromMaps.xnb</i> 文件的<code title="必需字段 &#39;string messageKey&#39;">&lt;string messageKey&gt;</code><a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE#.E4.BF.A1.E4.BB.B6.E9.94.AE" title="模组:信件数据">信件键</a>。语法与<a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">模组:信件数据</a>相同。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action LockedDoorWarp [<code title="必需字段 &#39;int toX&#39;">&lt;int toX&gt;</code> <code title="必需字段 &#39;int toY&#39;">&lt;int toY&gt;</code> <code title="必需字段 &#39;string toArea&#39;">&lt;string toArea&gt;</code> <code title="必需字段 &#39;int openTime&#39;">&lt;int openTime&gt;</code> <code title="必需字段 &#39;int closeTime&#39;">&lt;int closeTime&gt;</code> <code title="必需字段 &#39;NPC&#39;">&lt;NPC&gt;</code> <code title="必需字段 &#39;friendship&#39;">&lt;friendship&gt;</code>]</samp>
</td>
<td>常用于给门设置一个开放时段。注意必须使用24小时制，即，2000代表20:00。若指定最后两个参数，则在时间限制的基础上添加友谊限制。<br /><i>示例： 7 9 LeahHouse 1000 1800 Leah 500</i>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action LuauSoup</samp>
</td>
<td>在夏威夷宴会上，此地块用于将食材放入汤中。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action MagicInk</samp>
</td>
<td>将魔法墨水添加至钱包。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Mailbox</samp>
</td>
<td>显示玩家邮箱中的下一封信（如有）。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Message <code title="必需字段 &#39;string messageKey&#39;">&lt;string messageKey&gt;</code></samp>
</td>
<td>从 <i>Content\Strings\StringsFromMaps.xnb</i> 中的指定键中加载信息，并显示在对话框中。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action MessageOnce <code title="必需字段 &#39;int eventID&#39;">&lt;int eventID&gt;</code> <code title="必需字段 &#39;string message&#39;">&lt;string message&gt;</code></samp>
</td>
<td>若玩家未观看过指定<code title="必需字段 &#39;eventID&#39;">&lt;eventID&gt;</code>的时间，则标记此事件已被看过，并在对话框中显示指定消息文本。此属性<b>不支持</b>解析<a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D" title="模组:对话">对话格式</a>。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action MessageSpeech <code title="必需字段 &#39;string messageKey&#39;">&lt;string messageKey&gt;</code></samp>
</td>
<td>相当于<samp>Action Message</samp>，但将光标替换为对话光标。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action MineSign <code title="必需字段 &#39;string message&#39;">&lt;string message&gt;</code></samp>
</td>
<td>显示一个小对话框，包含指定的消息原始文本。此属性<b>不支持</b>解析<a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D" title="模组:对话">对话格式</a>。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action MinecartTransport</samp>
</td>
<td>显示矿车目的地菜单（或在矿车未解锁时显示提示信息）。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action MineElevator</samp>
</td>
<td>若玩家已经到达矿井5层以上，则显示矿井电梯菜单（以传送至某一层），否则显示矿井电梯未工作的提示信息。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action NextMineLevel</samp>
</td>
<td>将玩家传送至矿井下一层（若不在矿井中，则传送到矿井1层）。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action None</samp>
</td>
<td>什么也不做。用于在点击动作被另行处理的情况下，将此地块标记为可交互地块。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Notes <code title="必需字段 &#39;int noteID&#39;">&lt;int noteID&gt;</code></samp>
</td>
<td>若玩家找到了指定的遗失之书，则显示其博物馆说明文本，并标记其为已读。<br /><i>示例： Action Notes 17</i>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action NPCMessage <code title="必需字段 &#39;str name&#39;">&lt;str name&gt;</code> "<code title="必需字段 &#39;str dialogueKey&#39;">&lt;str dialogueKey&gt;</code>"</samp>
</td>
<td>若指定村民距玩家14格以内，则从指定字符串文件的指定键处读取对话，并将此对话显示在对话框中。<br /><i>示例： Action NPCMessage Abigail "Strings\\StringsFromCSFiles:Event.cs.1022"</i>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ObeliskWarp <code title="必需字段 &#39;location name&#39;">&lt;location name&gt;</code> <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> <code title="可选字段 &#39;whether to dismount&#39;">[whether to dismount]</code></samp>
</td>
<td>将玩家传送至指定地点和位置，并产生<a href="/%E4%BC%A0%E9%80%81%E5%9B%BE%E8%85%BE" title="传送图腾">传送图腾</a>特效和音效。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action OpenShop <code title="必需字段 &#39;shop id&#39;">&lt;shop id&gt;</code> <code title="可选字段 &#39;from direction&#39;">[from direction]</code> <code title="可选字段 &#39;open time&#39;">[open time]</code> <code title="可选字段 &#39;close time&#39;">[close time]</code> <code title="可选字段 &#39;owner tile area&#39;">[owner tile area]</code></samp>
</td>
<td>打开指定<code title="必需字段 &#39;shop id&#39;">&lt;shop id&gt;</code>的<a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店">商店</a>。除了ID以外的所有参数均可选：
<ul><li><code title="可选字段 &#39;from direction&#39;">[from direction]</code>：若指定，则玩家必须站在商店的指定方位（取<samp>down</samp>、 <samp>up</samp>、<samp>left</samp>、<samp>right</samp>、<samp>none</samp>之一）。若设为<samp>none</samp>则不要求方位。大部分原版商店的默认值为<samp>down</samp>。</li>
<li><code title="可选字段 &#39;open time&#39;">[open time]</code>和<code title="可选字段 &#39;close time&#39;">[close time]</code>：26小时制的开业和停业时间。在营业时间以外与商店交互将不产生任何效果。</li>
<li><code title="可选字段 &#39;owner tile area&#39;">[owner tile area]</code>：若指定，则地块区域必须包含至少一位店主才能使用商店。对于自定义商店，店主由<samp>Owners</samp>字段给出。此地块属性可以按两种格式给出：<samp><code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp>用于单个地块，<samp><code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> <code title="必需字段 &#39;width&#39;">&lt;width&gt;</code> <code title="必需字段 &#39;height&#39;">&lt;height&gt;</code></samp>用于多地块区域。</li></ul>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action PlayEvent <code title="必需字段 &#39;event id&#39;">&lt;event id&gt;</code> <code title="可选字段 &#39;check preconditions&#39;">[check preconditions]</code> <code title="可选字段 &#39;skip if seen&#39;">[skip if seen]</code> <code title="可选字段 &#39;fallback action&#39;">[fallback action]</code></samp>
</td>
<td>立即开启一个服从如下条件的<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:事件数据">事件</a>：
<ul><li><code title="可选字段 &#39;check preconditions&#39;">[check preconditions]</code>：若事件的<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE#.E4.BA.8B.E4.BB.B6.E5.89.8D.E6.8F.90" title="模组:事件数据">事件前提</a>不匹配，是否忽略此地块动作。取<samp>true</samp>或<samp>false</samp>。默认为true。</li>
<li><code title="可选字段 &#39;skip if seen&#39;">[skip if seen]</code>：若玩家已观看此事件，是否忽略此地块动作。默认为true。</li></ul>
<p>若地块因为任何原因（包括事件前提）未能启动，则：
</p>
<ul><li>若指定了<code title="可选字段 &#39;fallback action&#39;">[fallback action]</code>，则会运行此备用动作。此参数可以为任意<samp>Action</samp>地块属性（不包含"Action"前缀），例如<code>Action PlayEvent 60367 true true PlayEvent 520702 false false</code>的备用动作是另一个事件。</li>
<li>否则地块动作会被静默地忽略。</li></ul>
<p>例如，<code>Action PlayEvent 60367 false false</code>会重新播放建立存档时的公交车动画。
</p>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action playSound <code title="必需字段 &#39;str cueName&#39;">&lt;str cueName&gt;</code></samp>
</td>
<td>播放具有指定名称的音效或音乐。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action QiCoins</samp>
</td>
<td>当玩家没有齐币时，显示一个对话框以询问玩家是否购买10齐币，否则显示玩家现有的齐币数。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Saloon</samp>
</td>
<td>当格斯在附近时，打开餐吧菜单。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action SandDragon</samp>
</td>
<td>用于“神秘的齐”任务的第三步“沙之巨龙的最后一餐”。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Shop</samp>
</td>
<td>用于节日地图，打开节日商店。对非节日地图无效。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Theater_BoxOffice</samp>
</td>
<td>若已解锁电影院，打开电影院的售票菜单。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action TownMailbox <code title="必需字段 &#39;ID&#39;">&lt;ID&gt;</code></samp>
</td>
<td>TODO: 此地块属性的功能有待研究。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Warp <code title="必需字段 &#39;int x&#39;">&lt;int x&gt;</code> <code title="必需字段 &#39;int y&#39;">&lt;int y&gt;</code> <code title="必需字段 &#39;str area&#39;">&lt;str area&gt;</code></samp>
</td>
<td>将玩家传送到<code title="必需字段 &#39;area&#39;">&lt;area&gt;</code>游戏地点的<code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code>的地块坐标。<br /><i>示例： Action Warp 76 9 Mountain</i>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action WarpCommunityCenter</samp>
</td>
<td>若玩家已解锁社区中心，则将玩家传送到那里（否则显示“上锁了”消息）。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action WarpGreenhouse</samp>
</td>
<td>若玩家已解锁温室，则将玩家传送到温室内部，否则显示关于温室废墟的消息。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action WizardBook</samp>
</td>
<td>若解锁，则可从此地块购买法师建筑。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action WizardHatch</samp>
</td>
<td>若玩家与法师友谊值足够高，则将玩家传送到法师塔地下室，否则会被告知不能进入。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action WizardShrine</samp>
</td>
<td>显示法师塔的幻觉神龛菜单。
</td></tr></tbody></table>
<p><small>¹ 地块属性在游戏代码中由<samp>GameLocation::doesTileHaveProperty</samp>.=处理。Action和Touch Action则分别由<samp>GameLocation::performAction</samp>和<samp>GameLocation::performTouchAction</samp>处理。表情ID则被列为<samp>Character</samp>常量。</small><br />
<small>² T值（也就是 true 的缩写）只是惯例，实际上亦可传入任意非空值。</small>
</p>
<h3><span id="自定义Action"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89Action">自定义Action</span></h3>
<p>C#模组可以处理自定义<samp>Action</samp>和<samp>TouchAction</samp>地图属性。这是通过调用<samp>GameLocation.RegisterTileAction</samp>和<samp>RegisterTouchAction</samp>方法，并向其传入一个接受地点、地图属性参数、激活玩家、地块位置的回调函数实现的。
</p><p>例如，假设您希望创建一扇需要自定义钥匙解锁的门。您可以添加一个自常规的<code>TouchAction Example.ModId_UnlockGate</code>地图属性（例如直接在地图文件中添加，或通过<a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a>的<samp>EditMap</samp>添加，或通过<a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Content/Content_API&amp;action=edit&amp;redlink=1" class="new" title="模组:制作指南/APIs/Content/Content API（页面不存在）">模组:制作指南/APIs/Content/Content API</a>添加）。然后，可以按如下方法使用C#模组处理此逻辑：
</p>
<table class="mw-collapsible mw-collapsed" style="">
<tbody><tr>
<th style="text-align: left;"><b>示例</b>&#160;
</th></tr>
<tr>
<td><div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">internal</span> <span class="k">class</span> <span class="nc">ModEntry</span> <span class="p">:</span> <span class="n">Mod</span>
<span class="p">{</span>
    <span class="c1">/// &lt;inheritdoc /&gt;</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Entry</span><span class="p">(</span><span class="n">IModHelper</span> <span class="n">helper</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">GameLocation</span><span class="p">.</span><span class="n">RegisterTouchAction</span><span class="p">(</span><span class="s">&quot;Example.ModId_UnlockGate&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">HandleUnlockGate</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">HandleUnlockGate</span><span class="p">(</span><span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">,</span> <span class="n">Farmer</span> <span class="n">player</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">tile</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">const</span> <span class="kt">string</span> <span class="n">mailFlag</span> <span class="p">=</span> <span class="s">&quot;Example.ModId_GateUnlocked&quot;</span><span class="p">;</span>
        <span class="k">const</span> <span class="kt">string</span> <span class="n">keyId</span> <span class="p">=</span> <span class="s">&quot;Example.ModId_GateKey&quot;</span><span class="p">;</span>

        <span class="c1">// unlock gate if locked</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">mailFlag</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">ContainsId</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">Game1</span><span class="p">.</span><span class="n">activeClickableMenu</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DialogueBox</span><span class="p">(</span><span class="s">&quot;This gate is locked. I wonder where the key is?&quot;</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">player</span><span class="p">.</span><span class="n">removeFirstOfThisItemFromInventory</span><span class="p">(</span><span class="n">keyId</span><span class="p">);</span>
            <span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">mailFlag</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// apply open-gate map edit</span>
        <span class="c1">// NOTE: this is a quick example which changes the location&#39;s current map. If another mod reloads the map</span>
        <span class="c1">// (e.g. a content pack editing it), the change will be lost. For persistent changes, you should use the</span>
        <span class="c1">// AssetRequested event to apply the change when the map is reloaded.</span>
        <span class="n">IAssetDataForMap</span> <span class="n">mapHelper</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">GameContent</span><span class="p">.</span><span class="n">GetPatchHelper</span><span class="p">(</span><span class="n">location</span><span class="p">.</span><span class="n">map</span><span class="p">).</span><span class="n">AsMap</span><span class="p">();</span>
        <span class="n">mapHelper</span><span class="p">.</span><span class="n">PatchMap</span><span class="p">(</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Map</span><span class="p">&gt;(</span><span class="s">&quot;assets/unlocked-gate.tmx&quot;</span><span class="p">),</span>
            <span class="n">targetArea</span><span class="p">:</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">tile</span><span class="p">.</span><span class="n">X</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">tile</span><span class="p">.</span><span class="n">Y</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
<p>作为另外一个例子，假设您希望玩家按下功能键时门会解锁。您可以添加一个自常规的<code>Action Example.ModId_UnlockGate</code>地图属性（例如直接在地图文件中添加，或使用<a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a>的<samp>EditMap</samp>添加，或使用<a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Content/Content_API&amp;action=edit&amp;redlink=1" class="new" title="模组:制作指南/APIs/Content/Content API（页面不存在）">模组:制作指南/APIs/Content/Content API</a>添加）。然后，可以按如下方法使用C#模组处理此逻辑：
</p>
<table class="mw-collapsible mw-collapsed" style="">
<tbody><tr>
<th style="text-align: left;"><b>示例</b>&#160;
</th></tr>
<tr>
<td><div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">internal</span> <span class="k">class</span> <span class="nc">ModEntry</span> <span class="p">:</span> <span class="n">Mod</span>
<span class="p">{</span>
    <span class="c1">/// &lt;inheritdoc /&gt;</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Entry</span><span class="p">(</span><span class="n">IModHelper</span> <span class="n">helper</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">GameLocation</span><span class="p">.</span><span class="n">RegisterTileAction</span><span class="p">(</span><span class="s">&quot;Example.ModId_UnlockGate&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">HandleUnlockGate</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kt">bool</span> <span class="nf">HandleUnlockGate</span><span class="p">(</span><span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">,</span> <span class="n">Farmer</span> <span class="n">player</span><span class="p">,</span> <span class="n">Microsoft</span><span class="p">.</span><span class="n">Xna</span><span class="p">.</span><span class="n">Framework</span><span class="p">.</span><span class="n">Point</span> <span class="n">point</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">const</span> <span class="kt">string</span> <span class="n">mailFlag</span> <span class="p">=</span> <span class="s">&quot;Example.ModId_GateUnlocked&quot;</span><span class="p">;</span>
        <span class="k">const</span> <span class="kt">string</span> <span class="n">keyId</span> <span class="p">=</span> <span class="s">&quot;Example.ModId_GateKey&quot;</span><span class="p">;</span>

        <span class="c1">// unlock gate if locked</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">mailFlag</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">ContainsId</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">Game1</span><span class="p">.</span><span class="n">activeClickableMenu</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DialogueBox</span><span class="p">(</span><span class="s">&quot;This gate is locked. I wonder where the key is?&quot;</span><span class="p">);</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">player</span><span class="p">.</span><span class="n">removeFirstOfThisItemFromInventory</span><span class="p">(</span><span class="n">keyId</span><span class="p">);</span>
            <span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">mailFlag</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// apply open-gate map edit</span>
        <span class="c1">// NOTE: this is a quick example which changes the location&#39;s current map. If another mod reloads the map</span>
        <span class="c1">// (e.g. a content pack editing it), the change will be lost. For persistent changes, you should use the</span>
        <span class="c1">// AssetRequested event to apply the change when the map is reloaded.</span>
        <span class="n">IAssetDataForMap</span> <span class="n">mapHelper</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">GameContent</span><span class="p">.</span><span class="n">GetPatchHelper</span><span class="p">(</span><span class="n">location</span><span class="p">.</span><span class="n">map</span><span class="p">).</span><span class="n">AsMap</span><span class="p">();</span>
        <span class="n">mapHelper</span><span class="p">.</span><span class="n">PatchMap</span><span class="p">(</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Map</span><span class="p">&gt;(</span><span class="s">&quot;assets/unlocked-gate.tmx&quot;</span><span class="p">),</span>
            <span class="n">targetArea</span><span class="p">:</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">point</span><span class="p">.</span><span class="n">X</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">point</span><span class="p">.</span><span class="n">Y</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
<h2><span id="道路层"></span><span class="mw-headline" id=".E9.81.93.E8.B7.AF.E5.B1.82">道路层</span></h2>
<p><samp>Paths</samp>层具有来自<samp>paths</samp>地块表的图标地块，后者会影响地图上的游戏行为：
</p>
<div class="thumb tright"><div class="thumbinner" style="width:194px;"><a href="/File:PathsExplanation.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/b/b1/PathsExplanation.png" decoding="async" width="192" height="480" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:PathsExplanation.png" class="internal" title="放大"></a></div>表中所示地块索引</div></div></div>
<table class="wikitable">

<tbody><tr>
<th>地块索引
</th>
<th>解释
</th>
<th>限制
</th></tr>
<tr>
<td>0 ~ 6
</td>
<td>无用。
</td>
<td>
</td></tr>
<tr>
<td>7
</td>
<td>用于指定<a href="/%E6%A8%A1%E7%BB%84:NPC%E6%95%B0%E6%8D%AE" title="模组:NPC数据">配偶露台/房间</a>或<a href="/%E7%94%B5%E5%BD%B1%E9%99%A2" title="电影院">电影院</a>中配偶的站立位置。
<p>对于电影院地块，您可以向 <samp>Paths</samp> 层添加一个 <samp>direction</samp> 地块属性用于指定配偶面部朝向。其取值为<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE#.E6.9C.9D.E5.90.91" title="模组:事件数据">朝向数值</a>（默认为朝下）。而对于配偶露台/房间，您无法指定面部朝向。
</p>
</td>
<td>用于配偶区域和电影院。
</td></tr>
<tr>
<td>8
</td>
<td>添加此地块到光源类型为4（烛台）的<a href="#.E5.85.89.E7.85.A7"><samp>Light</samp>地图属性</a>。
</td>
<td>仅用于室内和节日²。
</td></tr>
<tr>
<td>9–12
</td>
<td>在地点被创建后生成一棵<a href="/%E6%A0%91" title="树">树</a>。农场外的树每天有50%的概率再生（另见31-32）。<br />可用树种：橡树（9）、枫树（10）、松树（11）、棕榈树1（12）。
</td>
<td>仅用于室外。
</td></tr>
<tr>
<td>13–18
</td>
<td>在地点被创建后生成杂物。之后每天随机生成。用于农场室外，每天春季再生。<br />可用杂物：<a href="/%E6%9D%82%E8%8D%89" title="杂草">季节性杂草</a>（13–15）、 石头（16–17）、树枝（18）。
</td>
<td>仅用于室外。
</td></tr>
<tr>
<td>19
</td>
<td>在农场被创建后生成<a href="/%E5%A4%A7%E5%9C%86%E6%9C%A8" title="大圆木">大圆木</a>，此地块指示大圆木的左上角。
</td>
<td>仅用于农场。
</td></tr>
<tr>
<td>20
</td>
<td>在农场被创建后生成<a href="/%E5%9C%86%E7%9F%B3" title="圆石">圆石</a>，此地块指示圆石的左上角。
</td>
<td>仅用于农场。
</td></tr>
<tr>
<td>21
</td>
<td>在农场被创建后生成<a href="/%E5%A4%A7%E6%A0%91%E6%A1%A9" title="大树桩">大树桩</a>（对于森林农场而言，其后每天都会再生），此地块指示大树桩的的左上角。
</td>
<td>仅用于农场。
</td></tr>
<tr>
<td>22
</td>
<td>在地点被创建后生成<a href="/%E8%8D%89" title="草">草</a>。并在其后随机生成。
</td>
<td>仅用于室外。
</td></tr>
<tr>
<td>23
</td>
<td>在地点被创建后随机生成2-3生长阶段的<a href="/%E6%A0%91" title="树">橡树、枫树或松树</a>。
</td>
<td>仅用于室外。
</td></tr>
<tr>
<td>24–26
</td>
<td>在地点被创建后生成通常的灌木。中型灌木会结<a href="/%E9%BB%91%E8%8E%93" title="黑莓">黑莓</a>和<a href="/%E7%BE%8E%E6%B4%B2%E5%A4%A7%E6%A0%91%E8%8E%93" title="美洲大树莓">美洲大树莓</a>。<br />可用灌木：大型（24）、中型（25）、小型（26）。
</td>
<td>仅用于室外。
</td></tr>
<tr>
<td>27
</td>
<td>在地点被创建后，将此地块添加到<samp>babblingBrook</samp>音效对应的<a href="#.E9.9F.B3.E9.A2.91"><samp>BrookSounds</samp>地图属性</a>。
</td>
<td>仅用于室外。
</td></tr>
<tr>
<td>28
</td>
<td>在此处生成一条<a href="/%E8%9B%86" title="蛆">蛆</a>（每日有33%的概率，除非地图已经有50条蛆）。
</td>
<td>仅用于<a href="/%E7%AA%81%E5%8F%98%E8%99%AB%E7%A9%B4" title="突变虫穴">突变虫穴</a>。
</td></tr>
<tr>
<td>29–30
</td>
<td>在<a href="/%E5%90%88%E4%BD%9C" title="合作">合作</a>模式中根据布局（29=附近 30=独立）和<a href="#.E6.A6.82.E8.BF.B0"><samp>Order</samp>地块属性</a>生成联机小屋，此地块指示小屋的左上角。
</td>
<td>仅用于农场。
</td></tr>
<tr>
<td>31–32
</td>
<td>在地点被创建后生成一棵<a href="/%E6%A0%91" title="树">树</a>。农场外的树每天有50%几率再生（参见9-12）。<br />可用树木：棕榈树2（31）、桃花心木（32）。
</td>
<td>仅用于室外。
</td></tr>
<tr>
<td>33
</td>
<td>在地点被创建后生成一棵<a href="/%E9%87%91%E8%89%B2%E6%A0%B8%E6%A1%83" title="金色核桃">金色核桃</a>灌木。
</td>
<td>仅用于室外。
</td></tr>
<tr>
<td>34
</td>
<td>启用此地块的<samp>SpawnTree</samp><a href="#.E5.B7.B2.E7.9F.A5.E5.9C.B0.E5.9D.97.E5.B1.9E.E6.80.A7">地块属性</a>，以允许野树/果树的生成/再生。
</td>
<td>仅用于室外
</td></tr>
<tr>
<td>35
</td>
<td>对游戏无效。仅在编辑地图时用于指示地块（例如，跟踪设置了地块属性的地块）。
</td>
<td>
</td></tr>
<tr>
<td>36
</td>
<td>在创建存档时生成<a href="/%E8%8D%89" title="草">蓝草</a>。此后也会随机生成蓝草。
</td>
<td>仅用于室外。
</td></tr></tbody></table>
<p>说明：
</p>
<ol><li>在<a href="/%E7%AA%81%E5%8F%98%E8%99%AB%E7%A9%B4" title="突变虫穴">突变虫穴</a>种，每日杂物生成率下调至33%。</li>
<li>限制条件可以被<samp>forceLoadPathLayerLights</samp>地图属性覆盖。</li></ol>
<h2><span id="潜在问题"></span><span class="mw-headline" id=".E6.BD.9C.E5.9C.A8.E9.97.AE.E9.A2.98">潜在问题</span></h2>
<h3><span id="地块表顺序"></span><span class="mw-headline" id=".E5.9C.B0.E5.9D.97.E8.A1.A8.E9.A1.BA.E5.BA.8F">地块表顺序</span></h3>
<p>当您替换原版地图时，<b>请勿</b>更改原版地块表的顺序或ID。请在原版地块表的ID前面添加<code>z_</code>以避免改变原始顺序。
</p>
<dl><dt>为何这可能导致出错</dt>
<dd>举例而言，假设您在Tiled种替换了一张通常具有如下地块表的地图：</dd>
<dd><div class="thumb tnone"><div class="thumbinner" style="width:302px;"><a href="/File:Tiled_tileset_order_A.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/thumb/a/a3/Tiled_tileset_order_A.png/300px-Tiled_tileset_order_A.png" decoding="async" width="300" height="216" class="thumbimage" srcset="https://stardewvalleywiki.com/mediawiki/images/a/a3/Tiled_tileset_order_A.png 1.5x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:Tiled_tileset_order_A.png" class="internal" title="放大"></a></div>原始地块表顺序</div></div></div></dd></dl>
<dl><dd>当您添加新地块表时，注意地块表顺序从<b>[paths, untitled tile sheet]</b>变为了<b>[customSheet, paths, untitled tile sheet]</b>：</dd>
<dd><div class="thumb tnone"><div class="thumbinner" style="width:302px;"><a href="/File:Tiled_tileset_order_B.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/thumb/7/79/Tiled_tileset_order_B.png/300px-Tiled_tileset_order_B.png" decoding="async" width="300" height="216" class="thumbimage" srcset="https://stardewvalleywiki.com/mediawiki/images/7/79/Tiled_tileset_order_B.png 1.5x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:Tiled_tileset_order_B.png" class="internal" title="放大"></a></div>添加新地块表的<b>错误</b>方式（因为改变了原始顺序）。</div></div></div></dd></dl>
<dl><dd>若游戏试图从第一张地块表中获取地块，则会从<samp>customSheet</samp>地块表获取，而非按预期从<samp>Paths</samp>中获取。这可能出错，包括视觉故障（例如显示错误的地块贴图）或直接崩溃（尤其是错误地块表比预期的地块表要小时）。</dd></dl>
<dl><dd>为避免此问题，请总保持原始地块表顺序不变，并向新地块表添加<code>z_</code>前缀，使新添加的地块表总位于最后。</dd>
<dd><div class="thumb tnone"><div class="thumbinner" style="width:302px;"><a href="/File:Tiled_tileset_order_C.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/thumb/f/f2/Tiled_tileset_order_C.png/300px-Tiled_tileset_order_C.png" decoding="async" width="300" height="216" class="thumbimage" srcset="https://stardewvalleywiki.com/mediawiki/images/f/f2/Tiled_tileset_order_C.png 1.5x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:Tiled_tileset_order_C.png" class="internal" title="放大"></a></div>添加新地块表的正确方式。</div></div></div></dd></dl>
<dl><dt>如何修复受影响的地块表。</dt>
<dd>参见下文的<i><a href="#.22mod_reordered_the_original_tilesheets.22">"mod reordered the original tilesheets"</a></i>。</dd></dl>
<h3><span id="原版地块表的本地拷贝"></span><span class="mw-headline" id=".E5.8E.9F.E7.89.88.E5.9C.B0.E5.9D.97.E8.A1.A8.E7.9A.84.E6.9C.AC.E5.9C.B0.E6.8B.B7.E8.B4.9D">原版地块表的本地拷贝</span></h3>
<p>当您在Tiled中编辑地图时，可能需要将诸如<samp>path.png</samp>或<samp>spring_town.png</samp>的原版地块表复制到地图文件夹以便Tiled使用。若加载游戏时，这些复制的地块表仍然在地图文件夹中，则可能产生非预期的效果（例如，重新着色模组的编辑将不会对您的地图奏效）。
</p><p>为避免此问题，可采取如下方式之一：
</p>
<ul><li>在测试或发布模组前，从模组文件夹删除原版地块表。</li>
<li>将地块表文件重命名，使之以点号开头（例如<samp>.spring_town.png</samp>）并引用此地块表。当SMAPI在游戏中加载此地图时，它会自动忽略点号，并在<samp>Content/Maps</samp>目录下火在本地文件中寻找<samp>spring_town.png</samp>文件。</li></ul>
<h3><span id="地图特有问题"></span><span class="mw-headline" id=".E5.9C.B0.E5.9B.BE.E7.89.B9.E6.9C.89.E9.97.AE.E9.A2.98">地图特有问题</span></h3>
<p>游戏会假定地图满足某些性质，如果模组地图不满足这些性质，则可能出错。下面是已知的问题：
</p>
<table class="wikitable">

<tbody><tr>
<th>受影响的地图
</th>
<th>问题
</th></tr>
<tr>
<td><samp>Maps/Farm</samp><br /><samp>Maps/Farm_Combat</samp><br /><samp>Maps/Farm_Fishing</samp><br /><samp>Maps/Farm_Foraging</samp><br /><samp>Maps/Farm_Mining</samp>
</td>
<td>&#32;
<ul><li>地图的<samp>Paths</samp>层必须至少有一个索引22地块（草生成地块）。这用于初始化草代码，无论是否真的有草生成。<sup id="cite_ref-1" class="reference"><a href="#cite_note-1">&#91;1&#93;</a></sup></li></ul>
</td></tr>
<tr>
<td><samp>Maps/FarmHouse*</samp>
</td>
<td>&#32;
<ul><li>用于放置玩家床的两个地块必须具有如下属性：<samp>Bed T</samp>（用于判断玩家是否在床上）以及<samp>TouchAction Sleep</samp>。</li>
<li>删除或更改墙纸和地板会导致游戏崩溃。</li>
<li>加载配偶房间时会清除<samp>DayTiles</samp>和<samp>NightTiles</samp>地图属性，因此这两个属性的自定义值对已婚玩家无效。</li>
<li>与升级区域重叠的更改将被升级操作覆盖。为了解决这个问题，您需要将翻新地图文件替换为一个空的地图文件。</li></ul>
</td></tr>
<tr>
<td><samp>Maps/SpouseRooms</samp>
</td>
<td>&#32;
<ul><li>若您添加或更改地块表尺寸，必须同时编辑<samp>Maps/FarmHouse1_marriage</samp>和<samp>Maps/FarmHouse2_marriage</samp>以进行相同的修改（即使您不对农舍进行其他任何更改）。这是必需的，因为地块表引用和尺寸是作为地图文件的一部分而存储的。</li></ul>
</td></tr></tbody></table>
<small><div class="mw-references-wrap"><ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite_ref-1">↑</a></span> <span class="reference-text">草音效设置于<samp>Grass::loadSprite</samp>方法。若<samp>Paths</samp>层具有索引22地块，则<samp>GameLocation::loadObjects</samp>会调用前述方法。（游戏会为每个索引22地块生成一个草，并随后移除它们）。</span>
</li>
</ol></div></small>
<h3><span id="Tiled中的“Save_as”"></span><span class="mw-headline" id="Tiled.E4.B8.AD.E7.9A.84.E2.80.9CSave_as.E2.80.9D">Tiled中的“Save as”</span></h3>
<p>当您在Tiled中使用 'save as' ，请不要另存到其他文件夹。否则地块表引用仍然指向旧文件夹，因此地图无法正常工作。如需另存，请将全部地图文件复制/移动到另一文件夹。
</p>
<h3><span id="在Tiled中定位地块表"></span><span class="mw-headline" id=".E5.9C.A8Tiled.E4.B8.AD.E5.AE.9A.E4.BD.8D.E5.9C.B0.E5.9D.97.E8.A1.A8">在Tiled中定位地块表</span></h3>
<p>当一张地图地块表缺失时，请不要使用locate选项从其他目录加载地块表。否则会生成一个复杂的地块表路径，游戏无法处理此。正确的做法是将地块表拷贝到地图所在目录，然后再引用它们。
</p>
<h2><span id="故障排除"></span><span class="mw-headline" id=".E6.95.85.E9.9A.9C.E6.8E.92.E9.99.A4">故障排除</span></h2>
<p>另见上文<a href="#.E6.BD.9C.E5.9C.A8.E9.97.AE.E9.A2.98"><b>潜在问题</b></a>以了解常见问题。
</p>
<h3><span id="&quot;Tilesheet_paths_must_be_a_relative_path_without_directory_climbing_(../)&quot;"></span><span class="mw-headline" id=".22Tilesheet_paths_must_be_a_relative_path_without_directory_climbing_.28...2F.29.22">"Tilesheet paths must be a relative path without directory climbing (../)"</span></h3>
<dl><dt>这是什么意思？</dt>
<dd>您的地图使用了根目录以外的地块表。产生这种情况的原因可能包括：<a href="#Tiled.E4.B8.AD.E7.9A.84.E2.80.9CSave_as.E2.80.9D">在Tiled中使用了"save as"将地图保存到另外的目录中</a>、复制/粘贴了不同文件夹地图的地块、或手手动添加了来自其他文件夹的地块表。</dd></dl>
<dl><dd>例如：</dd></dl>
<pre style="margin-left: 2em;">📁 Stardew Valley/
   📁 Content/
      📁 Maps/
         🗎 townInterior     &lt;──┐
   📁 Mods/                    │
      📁 YourModName/          │ ../../../Content/Maps/townInterior
         📁 assets/            │
            🗎 your-map.tmx  ───┘
</pre>
<dl><dd>上述例子中的操作是不允许的，因为它非常脆弱（例如玩家可能将模组安装到不同的路径中）。</dd></dl>
<dl><dt>如何修复？</dt>
<dd>
<ol><li>将您使用的地块表复制到地图所在的文件夹中。</li>
<li>对于您的地图中未经改动的原版地块表，在其前面加上点号（例如<samp>.townInterior.png</samp>）。这使SMAPI在加载地图时忽略此文件，并转而加载<samp>Content</samp>文件夹下的地块表。</li>
<li>在Tiled点击 <i>Tilesets</i> 面板下的 <i>Edit Tileset</i> 按钮。</li>
<li>在打开的页面中，点击 <i>Tileset &gt; Tileset Properties</i>。</li>
<li>点击 <i>Image</i> 字段，然后点击 <i>Edit</i> 按钮以在相同文件夹下定位地块表。</li></ol></dd></dl>
<p>Discord用户foggywizard#7430提供了上述3-5步的<a rel="nofollow" class="external text" href="https://imgur.com/a/rukygAr">截图版教程</a>。
</p>
<dl><dd>修复完成后，上述例子应当如下所示：</dd></dl>
<pre style="margin-left: 2em;">📁 Stardew Valley/
   📁 Mods/
      📁 YourModName/
         📁 assets/
            🗎 your-map.tmx       ───┐
            🗎 .townInterior.png  &lt;──┘ .townInterior.png
</pre>
<h3><span id="&quot;mod_reordered_the_original_tilesheets&quot;"></span><span class="mw-headline" id=".22mod_reordered_the_original_tilesheets.22">"mod reordered the original tilesheets"</span></h3>
<dl><dt>这是什么意思？</dt>
<dd>参见<a href="#.E5.9C.B0.E5.9D.97.E8.A1.A8.E9.A1.BA.E5.BA.8F"><b>地块表顺序</b></a>以了解更多信息。</dd></dl>
<dl><dt>如何修复？</dt>
<dd>请确保原版的地块表顺序不变，并将新增的地块表添加<code>z_</code>前缀以确保其位于原版地块表后方。</dd>
<dd><div class="thumb tnone"><div class="thumbinner" style="width:302px;"><a href="/File:Tiled_tileset_order_C.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/thumb/f/f2/Tiled_tileset_order_C.png/300px-Tiled_tileset_order_C.png" decoding="async" width="300" height="216" class="thumbimage" srcset="https://stardewvalleywiki.com/mediawiki/images/f/f2/Tiled_tileset_order_C.png 1.5x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:Tiled_tileset_order_C.png" class="internal" title="放大"></a></div>添加新地块表的正确方式。</div></div></div></dd></dl>
<dl><dd>在Tiled中重命名受影响的地块表：</dd></dl>
<ul class="gallery mw-gallery-traditional" style="margin-left: 2em;">
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:15px auto;"><a href="/File:Tiled_rename_tileset_A.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/thumb/0/0d/Tiled_rename_tileset_A.png/99px-Tiled_rename_tileset_A.png" decoding="async" width="99" height="120" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/0/0d/Tiled_rename_tileset_A.png/149px-Tiled_rename_tileset_A.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/0/0d/Tiled_rename_tileset_A.png/199px-Tiled_rename_tileset_A.png 2x" /></a></div></div>
			<div class="gallerytext">
<p>在 <i>Tilesets</i> 面板中，点击对应地块表的选项卡，并点击下方的 <i>Edit Tileset</i> （扳手）图标。
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:46.5px auto;"><a href="/File:Tiled_rename_tileset_B.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/thumb/c/c6/Tiled_rename_tileset_B.png/120px-Tiled_rename_tileset_B.png" decoding="async" width="120" height="57" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/c/c6/Tiled_rename_tileset_B.png/180px-Tiled_rename_tileset_B.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/c/c6/Tiled_rename_tileset_B.png/240px-Tiled_rename_tileset_B.png 2x" /></a></div></div>
			<div class="gallerytext">
<p>点击顶部菜单的 <i>Tileset &gt; Tileset Properties</i> 以显示属性面板
</p>
			</div>
		</div></li>
		<li class="gallerybox" style="width: 155px"><div style="width: 155px">
			<div class="thumb" style="width: 150px;"><div style="margin:39px auto;"><a href="/File:Tiled_rename_tileset_C.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/thumb/4/43/Tiled_rename_tileset_C.png/120px-Tiled_rename_tileset_C.png" decoding="async" width="120" height="72" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/4/43/Tiled_rename_tileset_C.png/180px-Tiled_rename_tileset_C.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/4/43/Tiled_rename_tileset_C.png/240px-Tiled_rename_tileset_C.png 2x" /></a></div></div>
			<div class="gallerytext">
<p>更改 <i>Name</i> 字段中的名称。
</p>
			</div>
		</div></li>
</ul>
<h3><span id="&quot;mod_has_no_tilesheet_with_ID_'&lt;name&gt;'&quot;"></span><span class="mw-headline" id=".22mod_has_no_tilesheet_with_ID_.27.3Cname.3E.27.22">"mod has no tilesheet with ID '&lt;name&gt;'"</span></h3>
<dl><dt>这是什么意思？</dt>
<dd>您替换了某张原版地图，但是您的自定义地图并不具有原版地图全部的地块表（或您在Tiled中更改了这些地块表的名称）。当游戏试图使用缺失的地块表时，就会崩溃。</dd></dl>
<dl><dt>如何修复？</dt>
<dd>在Tiled中比对原版地图和自定义地图。对于原版地图中的每张地块表，都要确保自定义地图中有相同地块表<b>且</b>其名称不变（无论您是否使用了此地块表）。</dd></dl>
<dl><dd>若您需要重命名地块表：
<ol><li>在 <i>Tileset</i> 面板中，点击欲编辑的地块表选项卡，然后点击下方的 <i>Edit Tileset</i> 图标。</li>
<li>点击顶部菜单的 <i>Tileset &gt; Tileset Properties</i> 以显示属性面板。</li>
<li>将 <i>Name</i> 字段重命名为原版地图的名称。</li></ol></dd></dl>
<h3><span id="&quot;Invalid_tile_GID:_&lt;#&gt;&quot;"></span><span class="mw-headline" id=".22Invalid_tile_GID:_.3C.23.3E.22">"Invalid tile GID: &lt;#&gt;"</span></h3>
<dl><dt>这是什么意思？</dt>
<dd>在编辑地图时，有的地块表不与tmx文件位于同一文件夹，导致XML数据丢失关于此地块表的信息从而错误地重新计算了其他地块集的初始GID。</dd></dl>
<dl><dt>如何修复？</dt>
<dd>确保地图使用的所有地块表都与tmx文件位于同一文件夹，然后进行任意小修改，最后保存地图。</dd>
<dd>这应当能使Tiled更新XML数据并重新计算初始GID。然后您可以撤销您之间所作的修改，然后再次保存地图。</dd></dl>
<dl><dd>在编辑地图时，请务必确保您的地块集和tmx文件位于同一文件夹，以避免无效GID报错。</dd></dl>
<h2><span id="使用SMAPI作出更改"></span><span class="mw-headline" id=".E4.BD.BF.E7.94.A8SMAPI.E4.BD.9C.E5.87.BA.E6.9B.B4.E6.94.B9">使用SMAPI作出更改</span></h2>
<p>此页面主要讲述如何使用Tiled编辑地图，但是也可以使用<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/%E5%85%A5%E9%97%A8" class="mw-redirect" title="模组:制作指南/入门">C# SMAPI模组</a>来进行同样的编辑。如下是使用C#代码修改地点的两个主要途径：
</p>
<h3><span id="使用AssetRequested事件"></span><span class="mw-headline" id=".E4.BD.BF.E7.94.A8AssetRequested.E4.BA.8B.E4.BB.B6">使用AssetRequested事件</span></h3>
<p>多数地图编辑都应当通过<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Content" title="模组:制作指南/APIs/Content"><samp>AssetRequested</samp>事件</a>来完成，因为这样做能防止其他模组重载地图造成您的修改丢失。在<samp>Map</samp>素材被<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/%E6%B8%B8%E6%88%8F%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84#GameLocation_et_al" title="模组:制作指南/游戏基本架构">游戏内地点</a>加载前，<samp>AssetRequested</samp>事件即直接作用于<samp>Map</samp>素材；这意味着此处不能使用地点方法，但可以在地图被读取前作出任何所需修改（例如，更改传送点）。参见<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Events" title="模组:制作指南/APIs/Events">Events API</a>以获得关于事件的帮助。
</p><p>例如，下述模组代码编辑小镇地图，并添加一个可选的<samp>GetTile</samp>辅助方法：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">/// &lt;summary&gt;The mod entry point.&lt;/summary&gt;</span>
<span class="k">internal</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">ModEntry</span> <span class="p">:</span> <span class="n">Mod</span>
<span class="p">{</span>
    <span class="c1">/// &lt;inheritdoc /&gt;</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Entry</span><span class="p">(</span><span class="n">IModHelper</span> <span class="n">helper</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">helper</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">AssetRequested</span> <span class="p">+=</span> <span class="k">this</span><span class="p">.</span><span class="n">OnAssetRequested</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;inheritdoc cref=&quot;IContentEvents.AssetRequested&quot;/&gt;</span>
    <span class="k">private</span> <span class="k">void</span> <span class="nf">OnAssetRequested</span><span class="p">(</span><span class="kt">object?</span> <span class="n">sender</span><span class="p">,</span> <span class="n">AssetRequestedEventArgs</span> <span class="n">e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">IsEquivalentTo</span><span class="p">(</span><span class="s">&quot;Maps/Town&quot;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="n">e</span><span class="p">.</span><span class="n">Edit</span><span class="p">(</span><span class="n">asset</span> <span class="p">=&gt;</span>
            <span class="p">{</span>
                <span class="n">IAssetDataForMap</span> <span class="n">editor</span> <span class="p">=</span> <span class="n">asset</span><span class="p">.</span><span class="n">AsMap</span><span class="p">();</span>
                <span class="n">Map</span> <span class="n">map</span> <span class="p">=</span> <span class="n">editor</span><span class="p">.</span><span class="n">Data</span><span class="p">;</span>

                <span class="c1">// your code here</span>
            <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;Get a tile from the map.&lt;/summary&gt;</span>
    <span class="c1">/// &lt;param name=&quot;map&quot;&gt;The map instance.&lt;/param&gt;</span>
    <span class="c1">/// &lt;param name=&quot;layerName&quot;&gt;The name of the layer from which to get a tile.&lt;/param&gt;</span>
    <span class="c1">/// &lt;param name=&quot;tileX&quot;&gt;The X position measured in tiles.&lt;/param&gt;</span>
    <span class="c1">/// &lt;param name=&quot;tileY&quot;&gt;The Y position measured in tiles.&lt;/param&gt;</span>
    <span class="c1">/// &lt;returns&gt;Returns the tile if found, else &lt;c&gt;null&lt;/c&gt;.&lt;/returns&gt;</span>
    <span class="k">private</span> <span class="n">Tile</span> <span class="nf">GetTile</span><span class="p">(</span><span class="n">Map</span> <span class="n">map</span><span class="p">,</span> <span class="kt">string</span> <span class="n">layerName</span><span class="p">,</span> <span class="kt">int</span> <span class="n">tileX</span><span class="p">,</span> <span class="kt">int</span> <span class="n">tileY</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Layer</span> <span class="n">layer</span> <span class="p">=</span> <span class="n">map</span><span class="p">.</span><span class="n">GetLayer</span><span class="p">(</span><span class="n">layerName</span><span class="p">);</span>
        <span class="n">Location</span> <span class="n">pixelPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Location</span><span class="p">(</span><span class="n">tileX</span> <span class="p">*</span> <span class="n">Game1</span><span class="p">.</span><span class="n">tileSize</span><span class="p">,</span> <span class="n">tileY</span> <span class="p">*</span> <span class="n">Game1</span><span class="p">.</span><span class="n">tileSize</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">layer</span><span class="p">.</span><span class="n">PickTile</span><span class="p">(</span><span class="n">pixelPosition</span><span class="p">,</span> <span class="n">Game1</span><span class="p">.</span><span class="n">viewport</span><span class="p">.</span><span class="n">Size</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>现在，您在地图被地点读取前对其作出任何更改。例如，您可以：
</p>
<ul>
<li>添加自定义地块表：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">map</span><span class="p">.</span><span class="n">AddTileSheet</span><span class="p">(</span><span class="k">new</span> <span class="n">TileSheet</span><span class="p">(</span>
    <span class="n">id</span><span class="p">:</span> <span class="s">&quot;z_custom-tilesheet&quot;</span><span class="p">,</span> <span class="c1">// always prefix custom tilesheets with z_ to avoid reordering vanilla tilesheets</span>
    <span class="n">map</span><span class="p">:</span> <span class="n">map</span><span class="p">,</span>
    <span class="n">imageSource</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">GetActualAssetKey</span><span class="p">(</span><span class="s">&quot;assets/tilesheet.png&quot;</span><span class="p">,</span> <span class="n">ContentSource</span><span class="p">.</span><span class="n">ModFolder</span><span class="p">),</span> <span class="c1">// get a unique asset name for local mod file which can be passed to the game</span>
    <span class="n">sheetSize</span><span class="p">:</span> <span class="k">new</span> <span class="n">Size</span><span class="p">(</span><span class="m">32</span><span class="p">,</span> <span class="m">64</span><span class="p">),</span> <span class="c1">// the size in tiles for the tilesheet image</span>
    <span class="n">tileSize</span><span class="p">:</span> <span class="k">new</span> <span class="n">Size</span><span class="p">(</span><span class="m">16</span><span class="p">)</span>       <span class="c1">// the size of each tile in pixels, should always be 16</span>
<span class="p">));</span>
</pre></div></li>
<li>管理地图属性：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// get a property value</span>
<span class="kt">string</span> <span class="n">currentMusic</span> <span class="p">=</span> <span class="n">map</span><span class="p">.</span><span class="n">Properties</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="s">&quot;Music&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">PropertyValue</span> <span class="n">rawMusic</span><span class="p">)</span>
    <span class="p">?</span> <span class="n">rawMusic</span><span class="p">.</span><span class="n">ToString</span><span class="p">()</span>
    <span class="p">:</span> <span class="k">null</span><span class="p">;</span>

<span class="c1">// add/replace a property</span>
<span class="n">map</span><span class="p">.</span><span class="n">Properties</span><span class="p">[</span><span class="s">&quot;Music&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&quot;MarlonsTheme&quot;</span><span class="p">;</span>

<span class="c1">// delete a property</span>
<span class="n">map</span><span class="p">.</span><span class="n">Properties</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="s">&quot;Music&quot;</span><span class="p">);</span>
</pre></div></li>
<li>管理地块属性：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// get tile</span>
<span class="n">Tile</span> <span class="n">tile</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">GetTile</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">layerName</span><span class="p">:</span> <span class="s">&quot;Back&quot;</span><span class="p">,</span> <span class="n">tileX</span><span class="p">:</span> <span class="m">10</span><span class="p">,</span> <span class="n">tileY</span><span class="p">:</span> <span class="m">20</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">tile</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
    <span class="k">return</span><span class="p">;</span> <span class="c1">// you should handle the tile not being there to avoid errors</span>

<span class="c1">// get a property value</span>
<span class="kt">string</span> <span class="n">diggable</span> <span class="p">=</span> <span class="n">tile</span><span class="p">.</span><span class="n">TileIndexProperties</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="s">&quot;Diggable&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">PropertyValue</span> <span class="n">rawDiggable</span><span class="p">)</span> <span class="p">||</span> <span class="n">tile</span><span class="p">.</span><span class="n">Properties</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="s">&quot;Diggable&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">rawDiggable</span><span class="p">)</span>
    <span class="p">?</span> <span class="n">rawDiggable</span><span class="p">?.</span><span class="n">ToString</span><span class="p">()</span>
    <span class="p">:</span> <span class="k">null</span><span class="p">;</span>

<span class="c1">// set a property</span>
<span class="n">tile</span><span class="p">.</span><span class="n">Properties</span><span class="p">[</span><span class="s">&quot;Diggable&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&quot;T&quot;</span><span class="p">;</span>

<span class="c1">// delete a property</span>
<span class="n">tile</span><span class="p">.</span><span class="n">Properties</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="s">&quot;Diggable&quot;</span><span class="p">);</span>
</pre></div></li>
<li>添加新地块：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="n">tileX</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">tileY</span> <span class="p">=</span> <span class="m">20</span><span class="p">;</span>
<span class="n">Layer</span> <span class="n">layer</span> <span class="p">=</span> <span class="n">map</span><span class="p">.</span><span class="n">GetLayer</span><span class="p">(</span><span class="s">&quot;Back&quot;</span><span class="p">);</span>

<span class="c1">// add a static tile</span>
<span class="n">layer</span><span class="p">.</span><span class="n">Tiles</span><span class="p">[</span><span class="n">tileX</span><span class="p">,</span> <span class="n">tileY</span><span class="p">]</span> <span class="p">=</span> <span class="k">new</span> <span class="n">StaticTile</span><span class="p">(</span>
    <span class="n">layer</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
    <span class="n">tileSheet</span><span class="p">:</span> <span class="n">map</span><span class="p">.</span><span class="n">GetTileSheet</span><span class="p">(</span><span class="s">&quot;z_custom-tilesheet&quot;</span><span class="p">),</span>
    <span class="n">tileIndex</span><span class="p">:</span> <span class="m">100</span><span class="p">,</span>            <span class="c1">// the sprite index in the tilesheet</span>
    <span class="n">blendMode</span><span class="p">:</span> <span class="n">BlendMode</span><span class="p">.</span><span class="n">Alpha</span> <span class="c1">// should usually be Alpha</span>
<span class="p">);</span>

<span class="c1">// add an animated tile</span>
<span class="n">layer</span><span class="p">.</span><span class="n">Tiles</span><span class="p">[</span><span class="n">tileX</span><span class="p">,</span> <span class="n">tileY</span><span class="p">]</span> <span class="p">=</span> <span class="k">new</span> <span class="n">AnimatedTile</span><span class="p">(</span>
    <span class="n">layer</span><span class="p">:</span> <span class="n">layer</span><span class="p">,</span>
    <span class="n">tileFrames</span><span class="p">:</span> <span class="k">new</span> <span class="n">StaticTile</span><span class="p">[]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">StaticTile</span><span class="p">(...),</span>
        <span class="k">new</span> <span class="nf">StaticTile</span><span class="p">(...),</span>
        <span class="k">new</span> <span class="nf">StaticTile</span><span class="p">(...),</span>
    <span class="p">},</span>
    <span class="n">frameInterval</span><span class="p">:</span> <span class="m">100</span> <span class="c1">// frame duration in milliseconds</span>
<span class="p">);</span>
</pre></div></li>
<li>删除地块：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">layer</span><span class="p">.</span><span class="n">Tiles</span><span class="p">[</span><span class="n">tileX</span><span class="p">,</span> <span class="n">tileY</span><span class="p">]</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
</pre></div></li>
<li>应用地块变换：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Tile</span> <span class="n">tile</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">GetTile</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="n">layerName</span><span class="p">:</span> <span class="s">&quot;Back&quot;</span><span class="p">,</span> <span class="n">tileX</span><span class="p">,</span> <span class="n">tileY</span><span class="p">);</span>
<span class="n">tile</span><span class="p">.</span><span class="n">Properties</span><span class="p">[</span><span class="s">&quot;@Rotation&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="m">45</span><span class="p">;</span> <span class="c1">// rotate it 45° clockwise</span>
<span class="n">tile</span><span class="p">.</span><span class="n">Properties</span><span class="p">[</span><span class="s">&quot;@Flip&quot;</span><span class="p">]</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="c1">// flip the tile: 0 (normal), 1 (horizontal), 2 (vertical)</span>
</pre></div></li>
</ul>
<p>另请参阅<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Content#Edit_a_map" title="模组:制作指南/APIs/Content">SMAPI的地图编辑助手</a>，后者允许将自定义地图区域整合进地图等操作。
</p>
<h3><span id="地点加载后"></span><span class="mw-headline" id=".E5.9C.B0.E7.82.B9.E5.8A.A0.E8.BD.BD.E5.90.8E">地点加载后</span></h3>
<p>在<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/%E6%B8%B8%E6%88%8F%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84#GameLocation_et_al" title="模组:制作指南/游戏基本架构">游戏内地点</a>加载完成后，您可以使用游戏的辅助方法以编辑地点及其地图。但需要注意：其他模组（包括游戏本身）随时可能更改地点，若不加以注意，则可能丢失所有更改。
</p><p>例如，在任何<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Events" title="模组:制作指南/APIs/Events">游戏内事件</a>中，可进行如下操作：
</p>
<ul>
<li>获取地图以使用上述方法：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Map</span> <span class="n">map</span> <span class="p">=</span> <span class="n">location</span><span class="p">.</span><span class="n">map</span><span class="p">;</span>
</pre></div></li>
<li>管理地块属性：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Town</span> <span class="n">town</span> <span class="p">=</span> <span class="p">(</span><span class="n">Town</span><span class="p">)</span><span class="n">Game1</span><span class="p">.</span><span class="n">getLocationFromName</span><span class="p">(</span><span class="s">&quot;Town&quot;</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">tileX</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">tileY</span> <span class="p">=</span> <span class="m">20</span><span class="p">;</span>

<span class="c1">// get property value</span>
<span class="kt">string</span> <span class="n">diggable</span> <span class="p">=</span> <span class="n">town</span><span class="p">.</span><span class="n">doesTileHaveProperty</span><span class="p">(</span><span class="n">tileX</span><span class="p">,</span> <span class="n">tileY</span><span class="p">,</span> <span class="s">&quot;Diggable&quot;</span><span class="p">,</span> <span class="s">&quot;Back&quot;</span><span class="p">);</span>

<span class="c1">// set property value</span>
<span class="n">location</span><span class="p">.</span><span class="n">setTileProperty</span><span class="p">(</span><span class="n">tileX</span><span class="p">,</span> <span class="n">tileY</span><span class="p">,</span> <span class="s">&quot;Back&quot;</span><span class="p">,</span> <span class="s">&quot;Diggable&quot;</span><span class="p">,</span> <span class="s">&quot;T&quot;</span><span class="p">);</span>
</pre></div></li>
<li>管理地块：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">location</span><span class="p">.</span><span class="n">removeTile</span><span class="p">(</span><span class="n">tileX</span><span class="p">,</span> <span class="n">tileY</span><span class="p">,</span> <span class="s">&quot;Back&quot;</span><span class="p">);</span>
</pre></div></li>
</ul>
<h2><span id="模组开发者帮助和技巧"></span><span class="mw-headline" id=".E6.A8.A1.E7.BB.84.E5.BC.80.E5.8F.91.E8.80.85.E5.B8.AE.E5.8A.A9.E5.92.8C.E6.8A.80.E5.B7.A7">模组开发者帮助和技巧</span></h2>
<ul><li>您可以访问Stardew Valley Discord并在#Making Mods Section寻求帮助。</li>
<li>Discord用户foggywizard#7430 <a rel="nofollow" class="external text" href="https://imgur.com/a/l1Ql16D">制作了一些Tiled图解指南</a>。包括图解概览、如何寻找坐标所在位置以及如何重命名地块表。</li>
<li><a rel="nofollow" class="external text" href="https://stardewmodding.wiki.gg/wiki/Tutorial:How_Draylon_curves_his_cliffs">教程</a>：Discord用户Draylon是如何绘制悬崖轮廓的。</li></ul>
<!-- 
NewPP limit report
Cached time: 20250321053346
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.391 seconds
Real time usage: 1.082 seconds
Preprocessor visited node count: 5849/1000000
Post‐expand include size: 17368/2097152 bytes
Template argument size: 4630/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 33669/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  362.944      1 -total
 65.84%  238.975    232 Template:T
  4.34%   15.743     28 Template:O
  3.28%   11.914      2 Template:Note_box
  1.90%    6.882      1 Template:Price
  1.15%    4.173      2 Template:Collapse
  0.92%    3.345      3 Template:Nexus_mod
-->

<!-- Saved in parser cache with key zhwiki:pcache:idhash:3293-0!canonical!zh and timestamp 20250321053345 and revision id 51233
 -->
</div></div><div class="printfooter">取自“<a dir="ltr" href="https://zh.stardewvalleywiki.com/mediawiki/index.php?title=模组:地图&amp;oldid=51233">https://zh.stardewvalleywiki.com/mediawiki/index.php?title=模组:地图&amp;oldid=51233</a>”</div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/Special:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB" title="Special:页面分类">分类</a>：<ul><li><a href="/Category:%E6%A8%A1%E7%BB%84" title="Category:模组">模组</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>导航菜单</h2>
	<div id="mw-head">
		<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-personal" class="vector-menu" aria-labelledby="p-personal-label" role="navigation" 
	 >
	<h3 id="p-personal-label">
		<span>个人工具</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="pt-createaccount"><a href="/mediawiki/index.php?title=Special:%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%88%B7&amp;returnto=%E6%A8%A1%E7%BB%84%3A%E5%9C%B0%E5%9B%BE" title="建议您创建一个账户并登录，但这不是强制的">创建账户</a></li><li id="pt-login"><a href="/mediawiki/index.php?title=Special:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&amp;returnto=%E6%A8%A1%E7%BB%84%3A%E5%9C%B0%E5%9B%BE" title="我们鼓励您登录；然而，这不是强制性的[o]" accesskey="o">登录</a></li></ul>
		
	</div>
</nav>


		<div id="left-navigation">
			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-namespaces" class="vector-menu vector-menu-tabs vectorTabs" aria-labelledby="p-namespaces-label" role="navigation" 
	 >
	<h3 id="p-namespaces-label">
		<span>名字空间</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="ca-nstab-模组" class="selected"><a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE">模组</a></li><li id="ca-talk" class="new"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84_talk:%E5%9C%B0%E5%9B%BE&amp;action=edit&amp;redlink=1" rel="discussion" title="关于内容页面的讨论（页面不存在）[t]" accesskey="t">讨论</a></li></ul>
		
	</div>
</nav>


			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-variants" class="vector-menu vector-menu-dropdown vectorMenu" aria-labelledby="p-variants-label" role="navigation" 
	 >
	<input type="checkbox" class="vector-menu-checkbox vectorMenuCheckbox" aria-labelledby="p-variants-label" />
	<h3 id="p-variants-label">
		<span>不转换</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="menu vector-menu-content-list"><li id="ca-varlang-0" class="selected"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh" lang="zh" hreflang="zh">不转换</a></li><li id="ca-varlang-1"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-hans" lang="zh-Hans" hreflang="zh-Hans">简体</a></li><li id="ca-varlang-2"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-hant" lang="zh-Hant" hreflang="zh-Hant">繁體</a></li><li id="ca-varlang-3"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-cn" lang="zh-Hans-CN" hreflang="zh-Hans-CN">大陆简体</a></li><li id="ca-varlang-4"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-hk" lang="zh-Hant-HK" hreflang="zh-Hant-HK">香港繁體</a></li><li id="ca-varlang-5"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-mo" lang="zh-Hant-MO" hreflang="zh-Hant-MO">澳門繁體</a></li><li id="ca-varlang-6"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-my" lang="zh-Hans-MY" hreflang="zh-Hans-MY">大马简体</a></li><li id="ca-varlang-7"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-sg" lang="zh-Hans-SG" hreflang="zh-Hans-SG">新加坡简体</a></li><li id="ca-varlang-8"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;variant=zh-tw" lang="zh-Hant-TW" hreflang="zh-Hant-TW">台灣正體</a></li></ul>
		
	</div>
</nav>


		</div>
		<div id="right-navigation">
			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-views" class="vector-menu vector-menu-tabs vectorTabs" aria-labelledby="p-views-label" role="navigation" 
	 >
	<h3 id="p-views-label">
		<span>视图</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="ca-view" class="collapsible selected"><a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE">阅读</a></li><li id="ca-viewsource" class="collapsible"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;action=edit" title="本页面受到保护。您可以查看其源代码[e]" accesskey="e">查看源代码</a></li><li id="ca-history" class="collapsible"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;action=history" title="本页面过去的版本[h]" accesskey="h">查看历史</a></li></ul>
		
	</div>
</nav>


			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-cactions" class="vector-menu-empty emptyPortlet vector-menu vector-menu-dropdown vectorMenu" aria-labelledby="p-cactions-label" role="navigation" 
	 >
	<input type="checkbox" class="vector-menu-checkbox vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
	<h3 id="p-cactions-label">
		<span>更多</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="menu vector-menu-content-list"></ul>
		
	</div>
</nav>


			<div id="p-search" role="search">
	<h3 >
		<label for="searchInput">搜索</label>
	</h3>
	<form action="/mediawiki/index.php" id="searchform">
		<div id="simpleSearch">
			<input type="search" name="search" placeholder="搜索Stardew Valley Wiki" title="搜索Stardew Valley Wiki[f]" accesskey="f" id="searchInput"/>
			<input type="hidden" name="title" value="Special:搜索">
			<input type="submit" name="fulltext" value="搜索" title="搜索含这些文字的页面" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/>
			<input type="submit" name="go" value="前往" title="若相同标题存在，则直接前往该页面" id="searchButton" class="searchButton"/>
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a  title="访问首页" class="mw-wiki-logo" href="/Stardew_Valley_Wiki"></a>
	</div>
	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-navigation" class="vector-menu vector-menu-portal portal portal-first" aria-labelledby="p-navigation-label" role="navigation" 
	 >
	<h3 id="p-navigation-label">
		<span>导航</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="n-mainpage-description"><a href="/Stardew_Valley_Wiki" title="访问首页[z]" accesskey="z">首页</a></li><li id="n-recentchanges"><a href="/Special:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9" title="本wiki最近更改的列表[r]" accesskey="r">最近更改</a></li><li id="n-.E6.9C.AA.E7.BF.BB.E8.AF.91.E7.9A.84.E9.A1.B5.E9.9D.A2"><a href="/Category:%E6%9C%AA%E7%BF%BB%E8%AF%91%E7%9A%84%E9%A1%B5%E9%9D%A2">未翻译的页面</a></li><li id="n-.E5.B8.AE.E5.8A.A9:.E7.BC.96.E8.BE.91.E5.85.A5.E9.97.A8"><a href="/Help:%E7%BC%96%E8%BE%91%E5%85%A5%E9%97%A8">帮助:编辑入门</a></li><li id="n-randompage"><a href="/Special:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2" title="载入一个随机页面[x]" accesskey="x">随机页面</a></li></ul>
		
	</div>
</nav>


	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-链接" class="vector-menu vector-menu-portal portal" aria-labelledby="p-链接-label" role="navigation" 
	 >
	<h3 id="p-链接-label">
		<span>链接</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="n-.E5.AE.98.E6.96.B9.E7.BD.91.E7.AB.99"><a href="https://stardewvalley.net" rel="nofollow">官方网站</a></li><li id="n-.E5.AE.98.E6.96.B9.E8.AE.BA.E5.9D.9B"><a href="https://forums.stardewvalley.net/" rel="nofollow">官方论坛</a></li><li id="n-.E5.AE.98.E6.96.B9.E5.95.86.E5.93.81"><a href="https://www.stardewvalley.net/shop/" rel="nofollow">官方商品</a></li><li id="n-.E7.A4.BE.E4.BA.A4.E5.AA.92.E4.BD.93"><a href="https://www.stardewvalley.net/links/" rel="nofollow">社交媒体</a></li></ul>
		
	</div>
</nav>

<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-tb" class="vector-menu vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation" 
	 >
	<h3 id="p-tb-label">
		<span>工具</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere"><a href="/Special:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="所有链接至本页面的wiki页面的列表[j]" accesskey="j">链入页面</a></li><li id="t-recentchangeslinked"><a href="/Special:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" rel="nofollow" title="链自本页的页面的最近更改[k]" accesskey="k">相关更改</a></li><li id="t-upload"><a href="//stardewvalleywiki.com/Special:Upload" title="上传文件[u]" accesskey="u">上传文件</a></li><li id="t-specialpages"><a href="/Special:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="所有特殊页面的列表[q]" accesskey="q">特殊页面</a></li><li id="t-print"><a href="javascript:print();" rel="alternate" title="本页面的可打印版本[p]" accesskey="p">可打印版本</a></li><li id="t-permalink"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;oldid=51233" title="本页面该版本的固定链接">固定链接</a></li><li id="t-info"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;action=info" title="关于此页面的更多信息">页面信息</a></li></ul>
		
	</div>
</nav>


	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-lang" class="vector-menu vector-menu-portal portal" aria-labelledby="p-lang-label" role="navigation" 
	 >
	<h3 id="p-lang-label">
		<span>其他语言</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li class="interlanguage-link interwiki-en"><a href="https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps – English" lang="en" hreflang="en" class="interlanguage-link-target">English</a></li></ul>
		
	</div>
</nav>


</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info" >
		<li id="footer-info-lastmod"> 此页面最后编辑于2025年3月20日 (星期四) 10:25。</li>
		<li id="footer-info-copyright">除非另有声明，本网站内容采用<a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike</a>授权。</li>
	</ul>
	<ul id="footer-places" >
		<li id="footer-places-privacy"><a href="/Stardew_Valley_Wiki:%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96" title="Stardew Valley Wiki:隐私政策">隐私政策</a></li>
		<li id="footer-places-about"><a href="/Stardew_Valley_Wiki:%E5%85%B3%E4%BA%8E" title="Stardew Valley Wiki:关于">关于Stardew Valley Wiki</a></li>
		<li id="footer-places-disclaimer"><a href="/Stardew_Valley_Wiki:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="Stardew Valley Wiki:免责声明">免责声明</a></li>
		<li id="footer-places-mobileview"><a href="//zh.stardewvalleywiki.com/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">手机版视图</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico"><a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="/mediawiki/resources/assets/licenses/cc-by-nc-sa.png" alt="Creative Commons Attribution-NonCommercial-ShareAlike" width="88" height="31" loading="lazy"/></a></li>
		<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="/mediawiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/mediawiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /mediawiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
	</ul>
	<div style="clear: both;"></div>
</footer>



<script src="https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.391","walltime":"1.082","ppvisitednodes":{"value":5849,"limit":1000000},"postexpandincludesize":{"value":17368,"limit":2097152},"templateargumentsize":{"value":4630,"limit":2097152},"expansiondepth":{"value":6,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":33669,"limit":5000000},"timingprofile":["100.00%  362.944      1 -total"," 65.84%  238.975    232 Template:T","  4.34%   15.743     28 Template:O","  3.28%   11.914      2 Template:Note_box","  1.90%    6.882      1 Template:Price","  1.15%    4.173      2 Template:Collapse","  0.92%    3.345      3 Template:Nexus_mod"]},"cachereport":{"timestamp":"20250321053346","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":1235});});</script></body></html>

