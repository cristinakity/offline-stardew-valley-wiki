
<!DOCTYPE html>
<html class="client-nojs" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>模组:迁移至游戏本体1.6 - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"zh","wgMonthNames":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgRequestId":"0a905c927b9ecf60e299227a","wgCSPNonce":!1,"wgCanonicalNamespace":"模组","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":570,"wgPageName":"模组:迁移至游戏本体1.6","wgTitle":"迁移至游戏本体1.6","wgCurRevisionId":51248,"wgRevisionId":51248,"wgArticleId":3269,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["模组"],"wgPageContentLanguage":"zh","wgPageContentModel":"wikitext","wgRelevantPageName":"模组:迁移至游戏本体1.6","wgRelevantArticleId":3269,"wgUserVariant":"zh","wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],
"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,"watchlist":!1,"tagline":!1}};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.vector.styles.legacy":"ready","jquery.makeCollapsible.styles":"ready","mediawiki.toc.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","mediawiki.page.ready","jquery.makeCollapsible","mediawiki.toc","skins.vector.legacy.js"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="/mediawiki/load.php?lang=zh&amp;modules=ext.pygments%7Cjquery.makeCollapsible.styles%7Cmediawiki.toc.styles%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="/mediawiki/load.php?lang=zh&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/mediawiki/load.php?lang=zh&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="description" content="←目录"/>
<link rel="shortcut icon" href="/mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="/mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (zh)"/>
<link rel="EditURI" type="application/rsd+xml" href="//zh.stardewvalleywiki.com/mediawiki/api.php?action=rsd"/>
<link rel="alternate" hreflang="zh" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh"/>
<link rel="alternate" hreflang="zh-Hans" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hans"/>
<link rel="alternate" hreflang="zh-Hant" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hant"/>
<link rel="alternate" hreflang="zh-Hans-CN" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-cn"/>
<link rel="alternate" hreflang="zh-Hant-HK" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hk"/>
<link rel="alternate" hreflang="zh-Hant-MO" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-mo"/>
<link rel="alternate" hreflang="zh-Hans-MY" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-my"/>
<link rel="alternate" hreflang="zh-Hans-SG" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-sg"/>
<link rel="alternate" hreflang="zh-Hant-TW" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-tw"/>
<link rel="alternate" hreflang="x-default" href="/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6"/>
<link rel="license" href="https://creativecommons.org/licenses/by-nc-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Stardew Valley Wiki的Atom feed" href="/mediawiki/index.php?title=Special:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;feed=atom"/>
<meta property="og:title" content="模组:迁移至游戏本体1.6 - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://zh.stardewvalleywiki.com/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6"/>
<meta property="og:description" content="←目錄"/>
<meta property="og:image" content="https://zh.stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="模组:迁移至游戏本体1.6 - Stardew Valley Wiki"/>
<meta property="twitter:description" content="←目錄"/>
<meta property="twitter:image" content="https://zh.stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"\u6a21\u7ec4:\u8fc1\u79fb\u81f3\u6e38\u620f\u672c\u4f531.6 - Stardew Valley Wiki","headline":"\u6a21\u7ec4:\u8fc1\u79fb\u81f3\u6e38\u620f\u672c\u4f531.6 - Stardew Valley Wiki","mainEntityOfPage":"\u6a21\u7ec4:\u8fc1\u79fb\u81f3\u6e38\u620f\u672c\u4f531.6","identifier":"https:\/\/zh.stardewvalleywiki.com\/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6","url":"https:\/\/zh.stardewvalleywiki.com\/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6","description":"\u2190\u76ee\u9304","dateModified":"2025-03-22T12:30:26Z","datePublished":"2025-03-22T12:30:26Z","image":{"@type":"ImageObject","url":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/zh.stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/zh.stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-570 ns-subject page-模组_迁移至游戏本体1_6 rootpage-模组_迁移至游戏本体1_6 skin-vector action-view minerva--history-page-action-enabled skin-vector-legacy">
<div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="zh">模组:迁移至游戏本体1.6</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">来自Stardew Valley Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">跳到导航</a>
		<a class="mw-jump-link" href="#searchInput">跳到搜索</a>
		<div id="mw-content-text" lang="zh" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p>←<a href="/%E6%A8%A1%E7%BB%84:%E7%9B%AE%E5%BD%95" title="模组:目录">目录</a>
</p><p><br />
</p>
<div style="border: 1px solid orange; border-left: 1em solid orange; padding: 0.5em 1em; border-radius: 5px;">
<p><b>本页面仅面向模组开发者。模组玩家请参见<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E7%BB%84%E5%85%BC%E5%AE%B9%E6%80%A7" title="模组:模组兼容性">模组:模组兼容性</a>。</b>
</p>
</div>
<p><br />
</p><p>此页面介绍了如何更新您的模组以与星露谷物语 1.6 兼容，并记录了一些更改和新功能。另见<a href="/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3SMAPI_4.0" title="模组:迁移至SMAPI 4.0"><b>迁移至SMAPI 4.0</b></a>。
</p>
<style data-mw-deduplicate="TemplateStyles:r51256">.mw-parser-output .toclimit-2 .toclevel-1 ul,.mw-parser-output .toclimit-3 .toclevel-2 ul,.mw-parser-output .toclimit-4 .toclevel-3 ul,.mw-parser-output .toclimit-5 .toclevel-4 ul,.mw-parser-output .toclimit-6 .toclevel-5 ul,.mw-parser-output .toclimit-7 .toclevel-6 ul{display:none}</style><div class="toclimit-3"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="zh" dir="ltr"><h2 id="mw-toc-heading">目录</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E5.B8.B8.E8.A7.81.E9.97.AE.E9.A2.98.E8.A7.A3.E7.AD.94"><span class="tocnumber">1</span> <span class="toctext">常见问题解答</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#.E8.AF.A5.E7.89.88.E6.9C.AC.E6.9C.89.E4.BD.95.E5.8F.98.E5.8C.96"><span class="tocnumber">1.1</span> <span class="toctext">该版本有何变化</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#.E8.BF.99.E6.98.AF.E4.B8.80.E6.AC.A1.E5.B7.A8.E5.8F.98.E5.90.97"><span class="tocnumber">1.2</span> <span class="toctext">这是一次巨变吗</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#.E5.A6.82.E4.BD.95.E5.8D.87.E7.BA.A7.E6.A8.A1.E7.BB.84"><span class="tocnumber">1.3</span> <span class="toctext">如何升级模组</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#.E6.9E.B6.E6.9E.84.E6.9B.B4.E6.96.B0"><span class="tocnumber">2</span> <span class="toctext">架构更新</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#.NET_6"><span class="tocnumber">2.1</span> <span class="toctext">.NET 6</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.E8.A7.A6.E5.8F.91.E5.8A.A8.E4.BD.9C"><span class="tocnumber">2.2</span> <span class="toctext">触发动作</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#.E5.93.88.E5.B8.8C.E9.9B.86.E5.90.88.E5.AD.97.E6.AE.B5"><span class="tocnumber">2.3</span> <span class="toctext">哈希集合字段</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#DataLoader"><span class="tocnumber">2.4</span> <span class="toctext">DataLoader</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID"><span class="tocnumber">2.5</span> <span class="toctext">唯一字符串ID</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#.E7.89.A9.E5.93.81.E6.9B.B4.E6.96.B0"><span class="tocnumber">3</span> <span class="toctext">物品更新</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81"><span class="tocnumber">3.1</span> <span class="toctext">自定义物品</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#.E6.A6.82.E8.A7.88"><span class="tocnumber">3.1.1</span> <span class="toctext">概览</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#.E7.89.A9.E5.93.81.E5.BC.95.E7.94.A8"><span class="tocnumber">3.1.2</span> <span class="toctext">物品引用</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#.E7.89.A9.E5.93.81.E7.B1.BB.E5.9E.8B"><span class="tocnumber">3.1.3</span> <span class="toctext">物品类型</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#.E5.AE.9A.E4.B9.89.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81"><span class="tocnumber">3.1.4</span> <span class="toctext">定义自定义物品</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#.E9.94.99.E8.AF.AF.E7.89.A9.E5.93.81"><span class="tocnumber">3.1.5</span> <span class="toctext">错误物品</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#.E5.AF.B9.E4.BA.8EC.23.E6.A8.A1.E7.BB.84"><span class="tocnumber">3.1.6</span> <span class="toctext">对于C#模组</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.A4.A7.E5.9E.8B.E6.89.93.E9.80.A0.E5.93.81"><span class="tocnumber">3.2</span> <span class="toctext">自定义大型打造品</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E4.BD.9C.E7.89.A9"><span class="tocnumber">3.3</span> <span class="toctext">自定义作物</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.A0.85.E6.A0.8F"><span class="tocnumber">3.4</span> <span class="toctext">自定义栅栏</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E6.9D.BF.EF.BC.88.E5.8F.AF.E5.88.B6.E4.BD.9C.EF.BC.89.E5.92.8C.E8.B7.AF.E5.BE.84"><span class="tocnumber">3.5</span> <span class="toctext">自定义地板（可制作）和路径</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.9C.BA.E5.99.A8"><span class="tocnumber">3.6</span> <span class="toctext">自定义机器</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E8.BF.91.E6.88.98.E6.AD.A6.E5.99.A8"><span class="tocnumber">3.7</span> <span class="toctext">自定义近战武器</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.94.B5.E5.BD.B1.E5.B0.8F.E5.90.83"><span class="tocnumber">3.8</span> <span class="toctext">自定义电影小吃</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.8D.9A.E7.89.A9.E9.A6.86.E6.8D.90.E8.B5.A0.E5.92.8C.E5.A5.96.E5.8A.B1"><span class="tocnumber">3.9</span> <span class="toctext">自定义博物馆捐赠和奖励</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.9E.9C.E6.A0.91"><span class="tocnumber">3.10</span> <span class="toctext">自定义果树</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81_2"><span class="tocnumber">3.11</span> <span class="toctext">自定义物品</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E8.A3.A4.E5.AD.90"><span class="tocnumber">3.12</span> <span class="toctext">自定义裤子</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E8.A1.AC.E8.A1.AB"><span class="tocnumber">3.13</span> <span class="toctext">自定义衬衫</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.B7.A5.E5.85.B7"><span class="tocnumber">3.14</span> <span class="toctext">自定义工具</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E9.87.8E.E7.94.9F.E6.A0.91.E6.9C.A8"><span class="tocnumber">3.15</span> <span class="toctext">自定义野生树木</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#.E9.BB.98.E8.AE.A4.E9.85.8D.E6.96.B9"><span class="tocnumber">3.16</span> <span class="toctext">默认配方</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#.E5.85.A8.E5.B1.80.E5.BA.93.E5.AD.98"><span class="tocnumber">3.17</span> <span class="toctext">全局库存</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#.E9.B1.BC.E7.BC.B8.E9.B1.BC.E7.B1.BB.E7.9A.84.E5.B8.BD.E5.AD.90"><span class="tocnumber">3.18</span> <span class="toctext">鱼缸鱼类的帽子</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#.E4.B8.8A.E4.B8.8B.E6.96.87.E6.A0.87.E7.AD.BE.E6.9B.B4.E6.94.B9"><span class="tocnumber">3.19</span> <span class="toctext">上下文标签更改</span></a>
<ul>
<li class="toclevel-3 tocsection-37"><a href="#.E6.96.B0.E4.B8.8A.E4.B8.8B.E6.96.87.E6.A0.87.E7.AD.BE"><span class="tocnumber">3.19.1</span> <span class="toctext">新上下文标签</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#ItemContextTagManager.E7.B1.BB"><span class="tocnumber">3.19.2</span> <span class="toctext">ItemContextTagManager类</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#.E5.85.B6.E4.BB.96.E4.B8.8A.E4.B8.8B.E6.96.87.E6.A0.87.E7.AD.BE.E6.9B.B4.E6.94.B9"><span class="tocnumber">3.19.3</span> <span class="toctext">其他上下文标签更改</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-40"><a href="#Inventory.E7.B1.BB"><span class="tocnumber">3.20</span> <span class="toctext">Inventory类</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#.E5.AE.B6.E5.85.B7.E5.8F.98.E6.9B.B4"><span class="tocnumber">3.21</span> <span class="toctext">家具变更</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#C.23.E6.A8.A1.E7.BB.84.E7.9A.84.E5.85.B6.E4.BB.96.E7.89.A9.E4.BD.93.E6.9B.B4.E6.94.B9"><span class="tocnumber">3.22</span> <span class="toctext">C#模组的其他物体更改</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#.E5.85.B6.E4.BB.96.E7.89.A9.E5.93.81.E6.9B.B4.E6.94.B9"><span class="tocnumber">3.23</span> <span class="toctext">其他物品更改</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-44"><a href="#.E5.9C.B0.E7.82.B9.E4.B8.8E.E5.A4.A9.E6.B0.94.E6.9B.B4.E6.96.B0"><span class="tocnumber">4</span> <span class="toctext">地点与天气更新</span></a>
<ul>
<li class="toclevel-2 tocsection-45"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E7.82.B9"><span class="tocnumber">4.1</span> <span class="toctext">自定义地点</span></a>
<ul>
<li class="toclevel-3 tocsection-46"><a href="#.E5.8E.9F.E7.89.88.E4.B8.8A.E4.B8.8B.E6.96.87"><span class="tocnumber">4.1.1</span> <span class="toctext">原版上下文</span></a></li>
<li class="toclevel-3 tocsection-47"><a href="#.E6.A0.BC.E5.BC.8F"><span class="tocnumber">4.1.2</span> <span class="toctext">格式</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-48"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9E.83.E5.9C.BE.E6.A1.B6"><span class="tocnumber">4.2</span> <span class="toctext">自定义垃圾桶</span></a>
<ul>
<li class="toclevel-3 tocsection-49"><a href="#.E6.95.B0.E6.8D.AE.E6.A0.BC.E5.BC.8F"><span class="tocnumber">4.2.1</span> <span class="toctext">数据格式</span></a></li>
<li class="toclevel-3 tocsection-50"><a href="#.E6.96.B0.E5.BB.BA.E5.9E.83.E5.9C.BE.E6.A1.B6"><span class="tocnumber">4.2.2</span> <span class="toctext">新建垃圾桶</span></a></li>
<li class="toclevel-3 tocsection-51"><a href="#.E7.BC.96.E8.BE.91.E5.B7.B2.E6.9C.89.E5.9E.83.E5.9C.BE.E6.A1.B6.E7.A4.BA.E4.BE.8B"><span class="tocnumber">4.2.3</span> <span class="toctext">编辑已有垃圾桶示例</span></a></li>
<li class="toclevel-3 tocsection-52"><a href="#.E5.AF.B9.E4.BA.8EC.23.E6.A8.A1.E7.BB.84.E7.9A.84.E6.9B.B4.E6.94.B9"><span class="tocnumber">4.2.4</span> <span class="toctext">对于C#模组的更改</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-53"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E5.9B.BEAction"><span class="tocnumber">4.3</span> <span class="toctext">自定义地图Action</span></a></li>
<li class="toclevel-2 tocsection-54"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E5.9B.BE.E5.9B.BE.E5.B1.82"><span class="tocnumber">4.4</span> <span class="toctext">自定义地图图层</span></a></li>
<li class="toclevel-2 tocsection-55"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.9F.BF.E8.BD.A6"><span class="tocnumber">4.5</span> <span class="toctext">自定义矿车</span></a>
<ul>
<li class="toclevel-3 tocsection-56"><a href="#.E6.89.93.E5.BC.80.E7.9F.BF.E8.BD.A6.E7.9B.AE.E5.BD.95"><span class="tocnumber">4.5.1</span> <span class="toctext">打开矿车目录</span></a></li>
<li class="toclevel-3 tocsection-57"><a href="#.E7.A4.BA.E4.BE.8B"><span class="tocnumber">4.5.2</span> <span class="toctext">示例</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-58"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E8.A2.AB.E5.8A.A8.E8.8A.82.E6.97.A5"><span class="tocnumber">4.6</span> <span class="toctext">自定义被动节日</span></a>
<ul>
<li class="toclevel-3 tocsection-59"><a href="#.E6.95.B0.E6.8D.AE.E6.A0.BC.E5.BC.8F_2"><span class="tocnumber">4.6.1</span> <span class="toctext">数据格式</span></a></li>
<li class="toclevel-3 tocsection-60"><a href="#NPC.E6.97.A5.E7.A8.8B"><span class="tocnumber">4.6.2</span> <span class="toctext">NPC日程</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-61"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.A4.A9.E6.B0.94"><span class="tocnumber">4.7</span> <span class="toctext">自定义天气</span></a></li>
<li class="toclevel-2 tocsection-62"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E4.B8.96.E7.95.8C.E5.9C.B0.E5.9B.BE"><span class="tocnumber">4.8</span> <span class="toctext">自定义世界地图</span></a></li>
<li class="toclevel-2 tocsection-63"><a href="#.E6.96.B0.E5.9C.B0.E5.9B.BE.E5.B1.9E.E6.80.A7"><span class="tocnumber">4.9</span> <span class="toctext">新地图属性</span></a>
<ul>
<li class="toclevel-3 tocsection-64"><a href="#.E5.BB.BA.E7.AD.91.E5.BB.BA.E9.80.A0"><span class="tocnumber">4.9.1</span> <span class="toctext">建筑建造</span></a></li>
<li class="toclevel-3 tocsection-65"><a href="#.E4.BD.9C.E7.89.A9"><span class="tocnumber">4.9.2</span> <span class="toctext">作物</span></a></li>
<li class="toclevel-3 tocsection-66"><a href="#.E5.86.9C.E8.88.8D.E5.86.85.E9.83.A8"><span class="tocnumber">4.9.3</span> <span class="toctext">农舍内部</span></a></li>
<li class="toclevel-3 tocsection-67"><a href="#.E4.BC.A0.E9.80.81.E4.B8.8E.E5.9C.B0.E5.9B.BE.E4.BD.8D.E7.BD.AE"><span class="tocnumber">4.9.4</span> <span class="toctext">传送与地图位置</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-68"><a href="#.E5.85.B6.E4.BB.96.E5.9C.B0.E5.9B.BE.E5.B1.9E.E6.80.A7.E6.9B.B4.E6.94.B9"><span class="tocnumber">4.10</span> <span class="toctext">其他地图属性更改</span></a></li>
<li class="toclevel-2 tocsection-69"><a href="#.E5.9C.B0.E5.9D.97.E5.B1.9E.E6.80.A7.E6.9B.B4.E6.94.B9"><span class="tocnumber">4.11</span> <span class="toctext">地块属性更改</span></a></li>
<li class="toclevel-2 tocsection-70"><a href="#.E5.85.B6.E4.BB.96.E5.9C.B0.E7.82.B9.2F.E5.9C.B0.E5.9B.BE.E6.9B.B4.E6.94.B9"><span class="tocnumber">4.12</span> <span class="toctext">其他地点/地图更改</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-71"><a href="#.E5.BB.BA.E7.AD.91.E6.9B.B4.E6.96.B0"><span class="tocnumber">5</span> <span class="toctext">建筑更新</span></a>
<ul>
<li class="toclevel-2 tocsection-72"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.BB.BA.E7.AD.91"><span class="tocnumber">5.1</span> <span class="toctext">自定义建筑</span></a></li>
<li class="toclevel-2 tocsection-73"><a href="#.E9.9A.8F.E5.A4.84.E5.BB.BA.E9.80.A0"><span class="tocnumber">5.2</span> <span class="toctext">随处建造</span></a></li>
<li class="toclevel-2 tocsection-74"><a href="#.E5.85.B6.E4.BB.96.E5.BB.BA.E7.AD.91.E6.9B.B4.E6.94.B9"><span class="tocnumber">5.3</span> <span class="toctext">其他建筑更改</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-75"><a href="#NPC.E6.9B.B4.E6.96.B0"><span class="tocnumber">6</span> <span class="toctext">NPC更新</span></a>
<ul>
<li class="toclevel-2 tocsection-76"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89NPC"><span class="tocnumber">6.1</span> <span class="toctext">自定义NPC</span></a></li>
<li class="toclevel-2 tocsection-77"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89NPC.E5.A4.96.E8.A7.82"><span class="tocnumber">6.2</span> <span class="toctext">自定义NPC外观</span></a></li>
<li class="toclevel-2 tocsection-78"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.86.9C.E5.9C.BA.E5.8A.A8.E7.89.A9"><span class="tocnumber">6.3</span> <span class="toctext">自定义农场动物</span></a></li>
<li class="toclevel-2 tocsection-79"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AE.A0.E7.89.A9"><span class="tocnumber">6.4</span> <span class="toctext">自定义宠物</span></a></li>
<li class="toclevel-2 tocsection-80"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.9D.80.E6.80.AA.E7.9B.AE.E6.A0.87"><span class="tocnumber">6.5</span> <span class="toctext">自定义杀怪目标</span></a></li>
<li class="toclevel-2 tocsection-81"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.94.B5.E8.AF.9D"><span class="tocnumber">6.6</span> <span class="toctext">自定义电话</span></a>
<ul>
<li class="toclevel-3 tocsection-82"><a href="#.E6.9D.A5.E7.94.B5"><span class="tocnumber">6.6.1</span> <span class="toctext">来电</span></a></li>
<li class="toclevel-3 tocsection-83"><a href="#C.23.E8.87.AA.E5.AE.9A.E4.B9.89.E5.A4.84.E7.90.86.E5.99.A8"><span class="tocnumber">6.6.2</span> <span class="toctext">C#自定义处理器</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-84"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.95.86.E5.BA.97"><span class="tocnumber">6.7</span> <span class="toctext">自定义商店</span></a></li>
<li class="toclevel-2 tocsection-85"><a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9"><span class="tocnumber">6.8</span> <span class="toctext">对话更改</span></a></li>
<li class="toclevel-2 tocsection-86"><a href="#.E6.97.A5.E7.A8.8B.E6.9B.B4.E6.94.B9"><span class="tocnumber">6.9</span> <span class="toctext">日程更改</span></a></li>
<li class="toclevel-2 tocsection-87"><a href="#.E5.85.B6.E4.BB.96NPC.E6.9B.B4.E6.94.B9"><span class="tocnumber">6.10</span> <span class="toctext">其他NPC更改</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-88"><a href="#.E5.85.B6.E4.BB.96.E6.9B.B4.E6.96.B0"><span class="tocnumber">7</span> <span class="toctext">其他更新</span></a>
<ul>
<li class="toclevel-2 tocsection-89"><a href="#.E6.95.88.E6.9E.9C.E5.A4.A7.E4.BF.AE"><span class="tocnumber">7.1</span> <span class="toctext">效果大修</span></a></li>
<li class="toclevel-2 tocsection-90"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E9.9F.B3.E9.A2.91"><span class="tocnumber">7.2</span> <span class="toctext">自定义音频</span></a></li>
<li class="toclevel-2 tocsection-91"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.95.88.E6.9E.9C"><span class="tocnumber">7.3</span> <span class="toctext">自定义效果</span></a></li>
<li class="toclevel-2 tocsection-92"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.95.B0.E6.8D.AE.E5.AD.97.E6.AE.B5"><span class="tocnumber">7.4</span> <span class="toctext">自定义数据字段</span></a></li>
<li class="toclevel-2 tocsection-93"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.B7.A8.E5.A4.A7.E4.BD.9C.E7.89.A9"><span class="tocnumber">7.5</span> <span class="toctext">自定义巨大作物</span></a></li>
<li class="toclevel-2 tocsection-94"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.82.B9.E5.94.B1.E6.9C.BA.E9.9F.B3.E4.B9.90"><span class="tocnumber">7.6</span> <span class="toctext">自定义点唱机音乐</span></a></li>
<li class="toclevel-2 tocsection-95"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.94.B5.E5.BD.B1"><span class="tocnumber">7.7</span> <span class="toctext">自定义电影</span></a></li>
<li class="toclevel-2 tocsection-96"><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.A9.9A.E7.A4.BC.E4.BA.8B.E4.BB.B6"><span class="tocnumber">7.8</span> <span class="toctext">自定义婚礼事件</span></a></li>
<li class="toclevel-2 tocsection-97"><a href="#.E6.B8.B8.E6.88.8F.E7.8A.B6.E6.80.81.E6.9F.A5.E8.AF.A2"><span class="tocnumber">7.9</span> <span class="toctext">游戏状态查询</span></a></li>
<li class="toclevel-2 tocsection-98"><a href="#.E6.80.A7.E5.88.AB.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.10</span> <span class="toctext">性别更改</span></a></li>
<li class="toclevel-2 tocsection-99"><a href="#.E7.89.A9.E5.93.81.E6.9F.A5.E8.AF.A2"><span class="tocnumber">7.11</span> <span class="toctext">物品查询</span></a></li>
<li class="toclevel-2 tocsection-100"><a href="#.E7.89.A9.E5.93.81.E7.94.9F.E6.88.90.E5.AD.97.E6.AE.B5"><span class="tocnumber">7.12</span> <span class="toctext">物品生成字段</span></a></li>
<li class="toclevel-2 tocsection-101"><a href="#.E9.A2.9C.E8.89.B2.E5.AD.97.E6.AE.B5"><span class="tocnumber">7.13</span> <span class="toctext">颜色字段</span></a></li>
<li class="toclevel-2 tocsection-102"><a href="#modData_.E5.AD.97.E6.AE.B5.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.14</span> <span class="toctext">modData 字段更改</span></a></li>
<li class="toclevel-2 tocsection-103"><a href="#.E6.95.B0.E9.87.8F.E4.BF.AE.E9.A5.B0.E5.99.A8"><span class="tocnumber">7.15</span> <span class="toctext">数量修饰器</span></a></li>
<li class="toclevel-2 tocsection-104"><a href="#.E6.A8.A1.E6.9D.BF.E5.AD.97.E7.AC.A6.E4.B8.B2.E6.A0.BC.E5.BC.8F"><span class="tocnumber">7.16</span> <span class="toctext">模板字符串格式</span></a></li>
<li class="toclevel-2 tocsection-105"><a href="#.E4.BA.8B.E4.BB.B6.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.17</span> <span class="toctext">事件更改</span></a>
<ul>
<li class="toclevel-3 tocsection-106"><a href="#.E9.AB.98.E7.BA.A7.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.17.1</span> <span class="toctext">高级更改</span></a></li>
<li class="toclevel-3 tocsection-107"><a href="#.E4.BA.8B.E4.BB.B6.E5.89.8D.E6.8F.90.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.17.2</span> <span class="toctext">事件前提更改</span></a></li>
<li class="toclevel-3 tocsection-108"><a href="#.E5.91.BD.E4.BB.A4.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.17.3</span> <span class="toctext">命令更改</span></a></li>
<li class="toclevel-3 tocsection-109"><a href="#.E8.8A.82.E6.97.A5.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.17.4</span> <span class="toctext">节日更改</span></a></li>
<li class="toclevel-3 tocsection-110"><a href="#.E5.BC.83.E7.94.A8.E5.8F.91.E4.BF.A1.E5.89.8D.E6.8F.90.EF.BC.88x.EF.BC.89"><span class="tocnumber">7.17.5</span> <span class="toctext">弃用发信前提（x）</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-111"><a href="#Mail_changes"><span class="tocnumber">7.18</span> <span class="toctext">Mail changes</span></a></li>
<li class="toclevel-2 tocsection-112"><a href="#.E4.BF.A1.E4.BB.B6.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.19</span> <span class="toctext">信件更改</span></a></li>
<li class="toclevel-2 tocsection-113"><a href="#Stat_changes_for_C.23_mods"><span class="tocnumber">7.20</span> <span class="toctext">Stat changes for C# mods</span></a></li>
<li class="toclevel-2 tocsection-114"><a href="#C.23.E6.A8.A1.E7.BB.84.E7.BB.9F.E8.AE.A1.E6.95.B0.E6.8D.AE.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.21</span> <span class="toctext">C#模组统计数据更改</span></a></li>
<li class="toclevel-2 tocsection-115"><a href="#.E6.96.B0.E5.A2.9EC.23.E5.B7.A5.E5.85.B7.E6.96.B9.E6.B3.95"><span class="tocnumber">7.22</span> <span class="toctext">新增C#工具方法</span></a>
<ul>
<li class="toclevel-3 tocsection-116"><a href="#.E5.8F.82.E6.95.B0.E5.A4.84.E7.90.86"><span class="tocnumber">7.22.1</span> <span class="toctext">参数处理</span></a></li>
<li class="toclevel-3 tocsection-117"><a href="#.E5.86.85.E5.AE.B9.E7.B4.A0.E6.9D.90"><span class="tocnumber">7.22.2</span> <span class="toctext">内容素材</span></a></li>
<li class="toclevel-3 tocsection-118"><a href="#.E8.BF.87.E6.BB.A4"><span class="tocnumber">7.22.3</span> <span class="toctext">过滤</span></a></li>
<li class="toclevel-3 tocsection-119"><a href="#.E6.B8.B8.E6.88.8F.E8.B7.AF.E5.BE.84"><span class="tocnumber">7.22.4</span> <span class="toctext">游戏路径</span></a></li>
<li class="toclevel-3 tocsection-120"><a href="#.E5.93.88.E5.B8.8C.E9.9B.86.E5.90.88"><span class="tocnumber">7.22.5</span> <span class="toctext">哈希集合</span></a></li>
<li class="toclevel-3 tocsection-121"><a href="#.E8.BF.AD.E4.BB.A3"><span class="tocnumber">7.22.6</span> <span class="toctext">迭代</span></a></li>
<li class="toclevel-3 tocsection-122"><a href="#.E9.9A.8F.E6.9C.BA.E5.8C.96"><span class="tocnumber">7.22.7</span> <span class="toctext">随机化</span></a></li>
<li class="toclevel-3 tocsection-123"><a href="#.E5.85.B6.E4.BB.96"><span class="tocnumber">7.22.8</span> <span class="toctext">其他</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-124"><a href="#StaticDelegateBuilder"><span class="tocnumber">7.23</span> <span class="toctext">StaticDelegateBuilder</span></a></li>
<li class="toclevel-2 tocsection-125"><a href="#.E6.B8.B8.E6.88.8F.E6.97.A5.E5.BF.97.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.24</span> <span class="toctext">游戏日志更改</span></a></li>
<li class="toclevel-2 tocsection-126"><a href="#.E5.85.B6.E4.BB.96.E6.9B.B4.E6.94.B9"><span class="tocnumber">7.25</span> <span class="toctext">其他更改</span></a>
<ul>
<li class="toclevel-3 tocsection-127"><a href="#.E9.9F.B3.E9.A2.91"><span class="tocnumber">7.25.1</span> <span class="toctext">音频</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-128"><a href="#.E8.B0.83.E8.AF.95.E5.91.BD.E4.BB.A4"><span class="tocnumber">8</span> <span class="toctext">调试命令</span></a>
<ul>
<li class="toclevel-2 tocsection-129"><a href="#.E5.9C.B0.E7.82.B9.E9.80.BB.E8.BE.91"><span class="tocnumber">8.1</span> <span class="toctext">地点逻辑</span></a></li>
<li class="toclevel-2 tocsection-130"><a href="#.E8.8F.9C.E5.8D.95.E4.B8.8E.E7.94.A8.E6.88.B7.E7.95.8C.E9.9D.A2"><span class="tocnumber">8.2</span> <span class="toctext">菜单与用户界面</span></a></li>
<li class="toclevel-2 tocsection-131"><a href="#Net.E5.AD.97.E6.AE.B5"><span class="tocnumber">8.3</span> <span class="toctext">Net字段</span></a></li>
<li class="toclevel-2 tocsection-132"><a href="#.E4.BB.BB.E5.8A.A1"><span class="tocnumber">8.4</span> <span class="toctext">任务</span></a></li>
<li class="toclevel-2 tocsection-133"><a href="#.E6.97.A5.E6.9C.9F.E4.B8.8E.E5.AD.A3.E8.8A.82"><span class="tocnumber">8.5</span> <span class="toctext">日期与季节</span></a></li>
<li class="toclevel-2 tocsection-134"><a href="#.E6.97.B6.E9.97.B4"><span class="tocnumber">8.6</span> <span class="toctext">时间</span></a></li>
<li class="toclevel-2 tocsection-135"><a href="#.E5.85.B6.E4.BB.96_2"><span class="tocnumber">8.7</span> <span class="toctext">其他</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-136"><a href="#C.23.E6.A8.A1.E7.BB.84.E7.9A.84.E7.A0.B4.E5.9D.8F.E6.80.A7.E5.8F.98.E6.9B.B4"><span class="tocnumber">9</span> <span class="toctext">C#模组的破坏性变更</span></a>
<ul>
<li class="toclevel-2 tocsection-137"><a href="#.NET_6_2"><span class="tocnumber">9.1</span> <span class="toctext">.NET 6</span></a></li>
<li class="toclevel-2 tocsection-138"><a href="#.E7.89.A9.E5.93.81ID.E6.9B.B4.E6.94.B9"><span class="tocnumber">9.2</span> <span class="toctext">物品ID更改</span></a></li>
<li class="toclevel-2 tocsection-139"><a href="#.E5.85.B6.E4.BB.96ID.E6.9B.B4.E6.94.B9"><span class="tocnumber">9.3</span> <span class="toctext">其他ID更改</span></a></li>
<li class="toclevel-2 tocsection-140"><a href="#.E5.BB.BA.E7.AD.91.E5.92.8C.E5.8A.A8.E7.89.A9.E5.8F.98.E6.9B.B4"><span class="tocnumber">9.4</span> <span class="toctext">建筑和动物变更</span></a></li>
<li class="toclevel-2 tocsection-141"><a href="#.E7.8E.A9.E5.AE.B6.E5.8F.98.E6.9B.B4"><span class="tocnumber">9.5</span> <span class="toctext">玩家变更</span></a></li>
<li class="toclevel-2 tocsection-142"><a href="#.E7.A2.B0.E6.92.9E.E5.8F.98.E6.9B.B4"><span class="tocnumber">9.6</span> <span class="toctext">碰撞变更</span></a></li>
<li class="toclevel-2 tocsection-143"><a href="#.E5.85.B6.E4.BB.96.E7.A0.B4.E5.9D.8F.E6.80.A7API.E5.8F.98.E6.9B.B4"><span class="tocnumber">9.7</span> <span class="toctext">其他破坏性API变更</span></a>
<ul>
<li class="toclevel-3 tocsection-144"><a href="#.E7.A7.BB.E9.99.A4.E6.9C.AA.E4.BD.BF.E7.94.A8.E7.9A.84.E4.BB.A3.E7.A0.81"><span class="tocnumber">9.7.1</span> <span class="toctext">移除未使用的代码</span></a></li>
<li class="toclevel-3 tocsection-145"><a href="#.E9.87.8D.E5.91.BD.E5.90.8D.E7.9A.84.E7.B1.BB"><span class="tocnumber">9.7.2</span> <span class="toctext">重命名的类</span></a></li>
<li class="toclevel-3 tocsection-146"><a href="#.E5.85.B6.E4.BB.96API.E6.9B.B4.E6.94.B9"><span class="tocnumber">9.7.3</span> <span class="toctext">其他API更改</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-147"><a href="#.E6.A3.80.E6.9F.A5.E8.BF.87.E6.97.B6.E4.BB.A3.E7.A0.81"><span class="tocnumber">9.8</span> <span class="toctext">检查过时代码</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-148"><a href="#.E5.86.85.E5.AE.B9.E5.8C.85.E7.A0.B4.E5.9D.8F.E6.80.A7.E6.9B.B4.E6.94.B9"><span class="tocnumber">10</span> <span class="toctext">内容包破坏性更改</span></a>
<ul>
<li class="toclevel-2 tocsection-149"><a href="#.E6.A0.87.E5.87.86.E5.8C.96ID.E5.AD.97.E6.AE.B5"><span class="tocnumber">10.1</span> <span class="toctext">标准化ID字段</span></a></li>
<li class="toclevel-2 tocsection-150"><a href="#.E4.BA.8B.E4.BB.B6_ID_.E6.9B.B4.E6.94.B9"><span class="tocnumber">10.2</span> <span class="toctext">事件 ID 更改</span></a></li>
<li class="toclevel-2 tocsection-151"><a href="#.E6.9D.80.E6.80.AA.E7.9B.AE.E6.A0.87.E6.A0.87.E8.AF.86.E6.9B.B4.E6.94.B9"><span class="tocnumber">10.3</span> <span class="toctext">杀怪目标标识更改</span></a></li>
<li class="toclevel-2 tocsection-152"><a href="#.E5.AF.B9XNB.E7.9A.84.E5.BD.B1.E5.93.8D"><span class="tocnumber">10.4</span> <span class="toctext">对XNB的影响</span></a>
<ul>
<li class="toclevel-3 tocsection-153"><a href="#.E6.A6.82.E8.A7.88_2"><span class="tocnumber">10.4.1</span> <span class="toctext">概览</span></a></li>
<li class="toclevel-3 tocsection-154"><a href="#.E7.B4.A0.E6.9D.90.E6.9B.B4.E6.94.B9"><span class="tocnumber">10.4.2</span> <span class="toctext">素材更改</span></a></li>
<li class="toclevel-3 tocsection-155"><a href="#.E7.A7.BB.E9.99.A4.E6.97.A0.E7.94.A8.E7.B4.A0.E6.9D.90"><span class="tocnumber">10.4.3</span> <span class="toctext">移除无用素材</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-156"><a href="#.E5.8E.9F.E7.89.88.E5.8F.91.E5.B8.83.E8.AF.B4.E6.98.8E"><span class="tocnumber">11</span> <span class="toctext">原版发布说明</span></a></li>
<li class="toclevel-1 tocsection-157"><a href="#.E5.8F.A6.E8.AF.B7.E5.8F.82.E9.98.85"><span class="tocnumber">12</span> <span class="toctext">另请参阅</span></a></li>
</ul>
</div>
</div>
<h2><span id="常见问题解答"></span><span class="mw-headline" id=".E5.B8.B8.E8.A7.81.E9.97.AE.E9.A2.98.E8.A7.A3.E7.AD.94">常见问题解答</span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a href="/File:SMAPI_compatibility.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/thumb/d/db/SMAPI_compatibility.png/300px-SMAPI_compatibility.png" decoding="async" width="300" height="186" class="thumbimage" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/d/db/SMAPI_compatibility.png/450px-SMAPI_compatibility.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/d/db/SMAPI_compatibility.png/600px-SMAPI_compatibility.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:SMAPI_compatibility.png" class="internal" title="放大"></a></div>SMAPI 兼容性走势图。2024年3月星露谷 1.6 的发布造成了兼容性的突降。</div></div></div>
<h3><span id="该版本有何变化"></span><span class="mw-headline" id=".E8.AF.A5.E7.89.88.E6.9C.AC.E6.9C.89.E4.BD.95.E5.8F.98.E5.8C.96">该版本有何变化</span></h3>
<p>1.6版本对游戏代码进行了根本性的修改使模组更加具有扩展性。
</p>
<h3><span id="这是一次巨变吗"></span><span class="mw-headline" id=".E8.BF.99.E6.98.AF.E4.B8.80.E6.AC.A1.E5.B7.A8.E5.8F.98.E5.90.97">这是一次巨变吗</span></h3>
<p>也许吧。更新对游戏基本部分作出了重大改动，而 SMAPI 和 Content Patcher 无法重写所有旧版模组以做出适配。这将会另许多模组无法正常运行，直到它们与游戏的更新适配。不过，就游戏开发者和社区之间的讨论而言，我们一致认为这种短期的麻烦将与修改后带来的长期巨大益处相抵消。
</p>
<h3><span id="如何升级模组"></span><span class="mw-headline" id=".E5.A6.82.E4.BD.95.E5.8D.87.E7.BA.A7.E6.A8.A1.E7.BB.84">如何升级模组</span></h3>
<p>此页面本页面的其余部分可能让您无从下手。庆幸的是，其中大部分内容可能与您的模组无关。
</p><p>以下是让模组适配1.6版本的 “快速入门 ”指南：
</p>
<dl><dt>对于 C# 模组：;</dt>
<dd>
<ol><li>将<a rel="nofollow" class="external text" href="https://www.nuget.org/packages/Pathoschild.Stardew.ModBuildConfig">模组构建配置 NuGet 包</a>更新到最新版本。</li>
<li>在每个 <samp>.csproj</samp> 项目文件中，将 <code>&lt;TargetFramework&gt;net5.0&lt;/TargetFramework&gt;</code> 更改为 <code>&lt;TargetFramework&gt;net6.0&lt;/TargetFramework&gt;</code>。<br /><small>（提示：如果第二行看起来像是 <code>&lt;Project ToolsVersion=...</code> 而非 <code>&lt;Project Sdk="Microsoft.NET.Sdk"&gt;</code>，则您需要先把它<a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E5%88%B0%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%93_1.5.5&amp;action=edit&amp;redlink=1" class="new" title="模组:迁移到游戏本体 1.5.5（页面不存在）">迁移到星露谷物语 1.5.5</a>。）</small></li>
<li>重新构建此解决方法。</li>
<li>修复出现的构建错误。您可以在此页面中搜索相关信息。</li>
<li>查看所有构建警告（尤其是过时警告），因为这些警告可能意味着代码会在 1.6 版本中损坏。</li>
<li>在 <samp>manifest.json</samp> 中更新模组版本号。<br /><small>（某些模组可能会因为运行时出错被添加进 SMAPI 兼容性黑名单，更新版本号也能够移出黑名单，如果缺失修复了错误。）</small></li></ol></dd></dl><small></small><p><small></small>
</p>
<dl><dd><ol><li>测试，以确保模组运行正常。</li>
<li>大致浏览 <a href="#C.23.E6.A8.A1.E7.BB.84.E7.9A.84.E9.87.8D.E8.A6.81.E6.9B.B4.E6.94.B9"><b>C# 模组的重要更改</b></a>以及目录，浏览可能与您的模组有关的章节。</li></ol></dd></dl>
<dl><dt>对于 <a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a> 包；</dt>
<dd>
<ol><li>遵循 <a rel="nofollow" class="external text" href="https://smapi.io/cp-migrate">Content Patcher 迁移指南</a>依次操作，直到您的内容包中有 <code>"Format": "<a href="/mediawiki/index.php?title=Template:Content_Patcher_%E7%89%88%E6%9C%AC&amp;action=edit&amp;redlink=1" class="new" title="Template:Content Patcher 版本（页面不存在）">Template:Content Patcher 版本</a>"</code>。<br /><small><b>不要跳过这步！</b> 如果您没有升级版本，则 Content Patcher 会默认内容包早于 1.6 版本，这在您已经升级完内容包的情况下可能导致令人困惑的错误。</small></li><small>
<li>查看<a href="#.E5.86.85.E5.AE.B9.E5.8C.85.E7.9A.84.E7.A0.B4.E5.9D.8F.E6.80.A7.E5.8F.98.E6.9B.B4"><b>内容包的破坏性变更</b></a>，并酌情升级内容包。</li></small></ol></dd></dl><small><dl><dt>对于使用其他框架的内容包；</dt>
<dd>参见提供框架的模组的文档。如果框架本身已经升级，您往往不需要再另行升级内容包。</dd></dl></small><small><h2><span id="架构更新"></span><span class="mw-headline" id=".E6.9E.B6.E6.9E.84.E6.9B.B4.E6.96.B0">架构更新</span></h2></small><small><h3><span class="mw-headline" id=".NET_6">.NET 6</span></h3></small><small><dl><dd><b>另请参阅：“重要更改”下面的 <a href="#.NET_6_2">.NET 6</a> 部分</b>。</dd></dl></small><small><p>对于 C# 模组作者，星露谷物语现在将 .NET 5 升级到了 .NET 6。参见 <a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-6"><i>What's new in .NET 6</i></a> 以及 <a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-10"><i>What's new in C# 10</i></a>。其中一些重要的点包括：
</p></small><small><ul><li><a rel="nofollow" class="external text" href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-6/">性能提升</a>；</li>
<li><a rel="nofollow" class="external text" href="https://devblogs.microsoft.com/dotnet/update-on-net-hot-reload-progress-and-visual-studio-2022-highlights/">热重载提升</a>；</li>
<li><a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-6#new-linq-apis">新的 LINQ 方法</a>；</li>
<li><a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/record">记录结构（record structs）</a>；</li>
<li>支持 macOS 上的 ARM64。</li></ul></small><small><h3><span id="触发动作"></span><span class="mw-headline" id=".E8.A7.A6.E5.8F.91.E5.8A.A8.E4.BD.9C">触发动作</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E8%A7%A6%E5%8F%91%E5%8A%A8%E4%BD%9C" title="模组:触发动作">模组:触发动作</a>。此小节主要用于叙述更新内容。</div></small><small><p>触发动作是一种新功能，它能够使得内容包在特定事情发生后执行一些操作（包括送信、更改友谊、开启任务等）。
</p><p>例如，下面的代码提供了如下逻辑：当玩家到达农场地点时，若雷欧已经搬到了星露谷，则送一封信，并开启一个对话主题：
</p></small><small><div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Trigger&quot;</span><span class="o">:</span> <span class="s2">&quot;LocationChanged&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Location&quot;</span><span class="o">:</span> <span class="s2">&quot;Farm&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;PLAYER_HAS_FLAG Host leoMoved&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Actions&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;AddMail Current Abigail_LeoMoved Today&quot;</span><span class="p">,</span>
        <span class="s2">&quot;AddConversationTopic LeoMoved 5&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div></small><small><h3><span id="哈希集合字段"></span><span class="mw-headline" id=".E5.93.88.E5.B8.8C.E9.9B.86.E5.90.88.E5.AD.97.E6.AE.B5">哈希集合字段</span></h3></small><small><p>对于 C# 模组作者，游戏现在用<a rel="nofollow" class="external text" href="https://www.bytehide.com/blog/hashset-csharp">哈希集合</a>方法替代了许多（不需要重复项的）列表字段。这使得读写的效率提高到 O(1)、避免了重复项且简化了通用逻辑。
</p><p>这涉及：
</p></small><small><table class="wikitable">

<tbody><tr>
<th>类型
</th>
<th>字段
</th></tr>
<tr>
<td><samp>Farmer</samp>
</td>
<td><samp>achievements</samp><br /><samp>dialogueQuestionsAnswered</samp><br /><samp>eventsSeen</samp><br /><samp>mailForTomorrow</samp><br /><samp>mailReceived</samp><br /><samp>professions</samp><br /><samp>secretNotesSeen</samp><br /><samp>songsHeard</samp>
</td></tr>
<tr>
<td><samp>FarmerTeam</samp>
</td>
<td><samp>acceptedSpecialOrderTypes</samp><br /><samp>broadcastedMail</samp><br /><samp>completedSpecialOrders</samp><br /><samp>collectedNutTracker</samp>
</td></tr>
<tr>
<td><samp>Game1</samp>
</td>
<td><samp>worldStateIDs</samp>
</td></tr>
<tr>
<td><samp>NetWorldState</samp>
</td>
<td><samp>ActivePassiveFestivals</samp><br /><samp>CheckedGarbage</samp><br /><samp>FoundBuriedNuts</samp><br /><samp>IslandVisitors</samp><br /><samp>LocationsWithBuildings</samp>
</td></tr></tbody></table></small><small><p>用法是相似的，许多列表方法（例如 <samp>Contains</samp>）和哈希集合方法的工作方式基本相同。下面是主要的区别：
</p></small><small><ul>
<li>哈希集合没有序。例如，哈希集合不能保证您枚举的第一个值一定是您最先加进去的那个。</li>
<li><p>哈希集合不能索引。例如，您将不能再用 <code>list[0]</code> 来获取第一个值。但是，您仍然可以枚举或使用 <samp>set.First()</samp> 等 LINQ 方法，但多数情况下您应当转而使用 <samp>Add</samp> 或 <samp>Contains</samp> 这种集合方法。

若希望批量删除集合中的元素，则可以使用 <samp>RemoveWhere</samp>：
</p><div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// old code</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Count</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span><span class="p">--)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">&quot;Example.ModId_&quot;</span><span class="p">))</span>
        <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">RemoveAt</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// new code</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">RemoveWhere</span><span class="p">(</span><span class="n">id</span> <span class="p">=&gt;</span> <span class="n">id</span><span class="p">.</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">&quot;Example.ModId_&quot;</span><span class="p">));</span>
</pre></div>
</li>
<li>您不再需要在添加新值之前检查重复项了，因为哈希集合自动忽略重复项。</li>
<li><samp>Add</samp>/<samp>Remove</samp>/<samp>RemoveWhere</samp> 方法不仅能用于增删值，也能用于检查值的存在性，例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;BackpackTip&quot;</span><span class="p">))</span> <span class="c1">// returns true if it wasn&#39;t in the set yet</span>
    <span class="n">Game1</span><span class="p">.</span><span class="n">addMailForTomorrow</span><span class="p">(</span><span class="s">&quot;pierreBackpack&quot;</span><span class="p">);</span>
</pre></div>
</li>
</ul></small><small><h3><span class="mw-headline" id="DataLoader">DataLoader</span></h3></small><small><p><samp>DataLoader</samp> 是一个新的 C# 工具类，它提供了用于加载游戏数据素材的强类型方法。
</p><p>它解决了脆弱旧版方法带来的问题，例如 <code>Game1.content.Load&lt;Dictionary&lt;string, PassiveFestivalData&gt;&gt;("Data\\PassiveFestivals")</code>。使用旧版方法，您可能会拼错素材名称、用错大小写（在 Linux/macOS）上可能导致崩溃，或用错大小写（可能导致在 Linux/macOS 上崩溃），或用错返回值类型。如果您出了这些错，则很可能直到代码发生运行时异常才会察觉。
</p><p>在星露谷 1.6 中，您可以将这种代码重写为 <code>DataLoader.PassiveFestivals(Game1.content)</code>。这更简洁，且无法使用错误的素材名称或类型，因此对于未来的游戏更改更加稳健。
</p></small><small><h3><span id="唯一字符串ID"></span><span class="mw-headline" id=".E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID">唯一字符串ID</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">模组:公共数据字段#唯一字符串ID</a>。此小节主要用于叙述更新内容。</div></small><small><p>Stardew Valley 现在在整个代码中使用“唯一字符串ID”来标识数据（如事件、地点、物品、NPC 等）。例如，<code>Town</code> 是<a href="/%E9%B9%88%E9%B9%95%E9%95%87" title="鹈鹕镇">鹈鹕镇</a>地点的“专属”ID，也就是说，其他地点均不能使用该 ID。这些 ID 用于多种目的，从内部游戏逻辑到<a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">内容包编辑</a>。
</p><p>对于模组，<b>强烈建议</b>...
</p></small><small><ul><li>对所有新内容使用带有<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Manifest#.E5.9F.BA.E6.9C.AC.E5.AD.97.E6.AE.B5" title="模组:制作指南/APIs/Manifest">模组 ID</a> 前缀的命名空间 ID。例如，如果您的模组ID是<code>Example.PufferchickMod</code>，并且您要添加一个河豚鸡（Pufferchick）玩偶，您的物品ID应类似于 <code>Example.PufferchickMod_PufferchickPlushy</code>。在<a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher 包</a>中，您可以使用 <code>{{ModId}}_PufferchickPlushy</code> 自动插入您的模组ID。这消除了模组之间的ID冲突，并使得（对于故障排除者和模组代码）更容易识别哪个模组添加了特定内容。请参阅<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">新版的格式文档</a>以了解推荐的格式。</li>
<li>仅在字符串ID中使用字母数字（a–z, A–Z, 0–9）、下划线（<code>_</code>）和点（<code>.</code>）字符。这很重要，因为它们经常用于某些字符具有特殊含义的地方（如文件名或<a href="#.E6.B8.B8.E6.88.8F.E7.8A.B6.E6.80.81.E6.9F.A5.E8.AF.A2">游戏状态查询</a>）。</li></ul></small><small><p>您可以为 1.6 之前的内容更新唯一字符串ID，而不会破坏现有玩家的存档。建议这样做以减少模组冲突并简化未来的故障排除。以下是每种数据类型的迁移步骤：
</p></small><small><table class="mw-collapsible mw-collapsed" style="">
<tbody><tr>
<th style="text-align: left;"><b>1.6之前内容的迁移步骤</b>&#160;
</th></tr>
<tr>
<td>&#32;
<table class="wikitable">

<tbody><tr>
<th>内容类型
</th>
<th>如何更改ID
</th></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:事件数据">事件ID</a><br /><a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E7.89.A9.E5.93.81ID" title="模组:公共数据字段">物品ID</a><br /><a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">信件ID</a><br /><a href="/%E6%A8%A1%E7%BB%84:%E9%85%8D%E6%96%B9%E6%95%B0%E6%8D%AE" title="模组:配方数据">配方ID</a><br /><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.82.B9.E5.94.B1.E6.9C.BA.E6.9B.B2.E7.9B.AE">点唱机音乐ID</a>
</td>
<td><a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a> 添加了一个自定义的 <a href="/%E6%A8%A1%E7%BB%84:%E8%A7%A6%E5%8F%91%E5%8A%A8%E4%BD%9C" title="模组:触发动作">触发动作</a>，可以在存档数据中迁移ID。
<p>例如，如下代码迁移了两个制作配方ID：
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Target&quot;</span><span class="p">:</span> <span class="s2">&quot;Data/TriggerActions&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Entries&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;{{ModId}}_MigrateToUniqueIds&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;Id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{ModId}}_MigrateToUniqueIds&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Trigger&quot;</span><span class="p">:</span> <span class="s2">&quot;DayStarted&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="err">//</span> <span class="err">注意：如果参数包含空格，请使用双引号。此示例中动作本身使用单引号，因此我们不需要转义其中的双引号。</span>
                <span class="err">&#39;Pathoschild.ContentPatcher_MigrateIds</span> <span class="err">CraftingRecipes</span> <span class="s2">&quot;Puffer Plush&quot;</span> <span class="p">{</span><span class="err">{ModId</span><span class="p">}</span><span class="err">}_PufferPlush</span> <span class="s2">&quot;Puffer Sofa&quot;</span> <span class="p">{</span><span class="err">{ModId</span><span class="p">}</span><span class="err">}_PufferSofa&#39;</span>
            <span class="p">],</span>
            <span class="nt">&quot;HostOnly&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>请参阅<a rel="nofollow" class="external text" href="https://github.com/Pathoschild/StardewMods/blob/develop/ContentPatcher/docs/author-guide/trigger-actions.md">Content Patcher文档</a>了解更多关于使用触发动作的信息，包括限制和有效的 ID 类型。
</p>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E7%82%B9%E6%95%B0%E6%8D%AE" title="模组:地点数据">地点ID</a>
</td>
<td>在 <samp>Data/Locations</samp> 文件中，将地点曾用名添加到该地点的 <samp>FormerLocationNames</samp> 字段。
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:NPC%E6%95%B0%E6%8D%AE" title="模组:NPC数据">NPC内部名称</a>
</td>
<td>在 <samp>Data/Characters</samp> 中，将 NPC 曾用名添加到该 NPC 的 <samp>FormerCharacterNames</samp> 字段。
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E4%BB%BB%E5%8A%A1%E6%95%B0%E6%8D%AE" title="模组:任务数据">任务</a>和<a href="/%E6%A8%A1%E7%BB%84:%E7%89%B9%E5%88%AB%E4%BB%BB%E5%8A%A1" title="模组:特别任务">特别任务</a>ID
</td>
<td>目前没有安全的方法来迁移任务和特别任务ID，因为删除并重新添加任务会重置正在进行中的任务。
</td></tr></tbody></table>
</td></tr></tbody></table></small><small><h2><span id="物品更新"></span><span class="mw-headline" id=".E7.89.A9.E5.93.81.E6.9B.B4.E6.96.B0">物品更新</span></h2></small><small><h3><span id="自定义物品"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">自定义物品</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%95%B0%E6%8D%AE" title="模组:物品数据">模组:物品数据</a>。此小节主要用于叙述更新内容。</div></small><small><h4><span id="概览"></span><span class="mw-headline" id=".E6.A6.82.E8.A7.88">概览</span></h4></small><small><p>Stardew Valley 1.6 对游戏中物品的工作方式进行了三项重大更改：
</p></small><small><ol><li>每个物品现在都有一个字符串ID（<samp>ItemId</samp>）和一个全局唯一的字符串ID（<samp>QualifiedItemId</samp>）。 <samp>QualifiedItemId</samp> 是通过在 <samp>ItemId</samp> 前加上物品类型标识符自动生成的。<p>出于遗留原因，原版物品的<samp>ItemId</samp> 可能不是全局唯一的。例如，河豚（物体 128）和蘑菇箱（大型打造品 128）都定义为 <samp>ItemId: 128</samp>。可以通过 <samp>QualifiedItemId</samp> 区分它们；河豚的限定性ID为<samp>(O)128</samp>，而蘑菇箱的限定性ID为 <samp>(BC)128</samp>。</p></li>
<li>每种物品类型现在在游戏代码中都有一个“物品数据定义”，这个定义告诉游戏如何处理此类物品。<a href="#.E5.AF.B9.E4.BA.8EC.23.E6.A8.A1.E7.BB.84">C# 模组可以添加或编辑定义</a>。每个定义都有一个唯一的前缀，用于限定物品ID。原版类型包括大型打造品（<samp>(BC)</samp>）、靴子（<samp>(B)</samp>）、农舍地板（<samp>(FL)</samp>）、家具（<samp>(F)</samp>）、帽子（<samp>(H)</samp>）、物体（<samp>(O)</samp>）、裤子（<samp>(P)</samp>）、上衣（<samp>(S)</samp>）、工具（<samp>(T)</samp>）、墙纸（<samp>(WP)</samp>）和武器（<samp>(W)</samp>）。</li>
<li>自定义物品现在可以在素材文件的新字段中设置其贴图（见下文）。物品的 <samp>ParentSheetIndex</samp> 字段是物品在其贴图集中的索引。</li></ol></small><small><p>换句话说，物品的四个重要字段是：
</p></small><small><table class="wikitable">

<tbody><tr>
<th>名称
</th>
<th>类型
</th>
<th>描述
</th></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td><samp>string</samp>
</td>
<td>该物品的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串ID</a>，应当全局唯一（原版物品ID可能有重复，以保持向后兼容性）。例如，<samp>128</samp>（原版物品）或 <samp>Example.ModId_Watermelon</samp>（自定义物品）。
</td></tr>
<tr>
<td><samp>QualifiedItemId</samp>
</td>
<td><samp>string</samp>
</td>
<td>全局唯一的物品键，例如原版物品的 <samp>(O)128</samp> 或自定义物品的 <samp>(O)Example.ModId_Watermelon</samp>。限定性物品 ID 是从<samp>TypeDefinitionId</samp> 和 <samp>ItemId</samp> 字段自动生成的。
</td></tr>
<tr>
<td><samp>ParentSheetIndex</samp>
</td>
<td><samp>int</samp>
</td>
<td>物品在其贴图集中的贴图索引。
</td></tr>
<tr>
<td><samp>TypeDefinitionId</samp>
</td>
<td><samp>string</samp>
</td>
<td>该物品的数据定义的 ID，例如 <samp>(O)</samp> 表示“物体”。每种 ID 都有对应的 <samp>ItemRegistry.type_*</samp> 常量：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">TypeDefinitionId</span> <span class="p">==</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">type_object</span><span class="p">)</span>
   <span class="p">...</span>
</pre></div>
</td></tr></tbody></table></small><small><h4><span id="物品引用"></span><span class="mw-headline" id=".E7.89.A9.E5.93.81.E5.BC.95.E7.94.A8">物品引用</span></h4></small><small><p>游戏代码中现在使用 <samp>ItemId</samp>（相当于非限定性物品ID）引用物品，而不再使用 <samp>ParentSheetIndex</samp>。由于很多原版物品的 <samp>ItemId</samp> 与贴图集索引相同，因此大部分数据素材不受影响。例如，以下是一段来自于 <samp>Data/NPCGiftTastes</samp> 的代码，其中包含一个自定义物品：
</p></small><small><div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Universal_Like&quot;</span><span class="err">:</span> <span class="s2">&quot;-2 -7 -26 -75 -80 72 395 613 634 635 636 637 638 724 459 Example.ModID_watermelon&quot;</span>
</pre></div></small><small><p>除非另有说明，非限定性物品ID将生成<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E4%BD%93" title="模组:物体">物体</a>类型的物品。某些素材文件允许使用限定性物品ID。例如，您可以在礼物喜好列表中添加 <code>(O)128</code> 以显式指定添加128 号物体。以下是部分数据素材及其支持的物品ID格式：
</p></small><small><table class="wikitable">

<tbody><tr>
<th>数据素材
</th>
<th>物品ID格式
</th></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E9%85%8D%E6%96%B9%E6%95%B0%E6%8D%AE" title="模组:配方数据"><samp>Data/CraftingRecipes</samp><br /><samp>Data/CookingRecipes</samp></a>
</td>
<td>&#32;
<ul><li>原料：两者都支持。</li>
<li>输出：字段 2 为非限定性物品ID，字段 3 为 <samp>true</samp>（大型打造品）或<samp>false</samp>（物品）。</li></ul>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E6%9E%9C%E6%A0%91%E6%95%B0%E6%8D%AE" title="模组:果树数据"><samp>Data/fruitTrees</samp></a>
</td>
<td>&#32;
<ul><li>水果：两者都支持。</li>
<li>树苗：仅支持非限定性ID。</li></ul>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E7%A4%BC%E7%89%A9%E5%96%9C%E5%A5%BD%E6%95%B0%E6%8D%AE" title="模组:礼物喜好数据"><samp>Data/NPCGiftTastes</samp></a>
</td>
<td>两者都支持，但只有 <samp>(O)</samp> 物品可以作为礼物赠送。
</td></tr></tbody></table></small><small><h4><span id="物品类型"></span><span class="mw-headline" id=".E7.89.A9.E5.93.81.E7.B1.BB.E5.9E.8B">物品类型</span></h4></small><small><p>以下是可添加/编辑自定义物品的物品类型：
</p></small><small><table class="wikitable">

<tbody><tr>
<th>物品类型
</th>
<th>类型标识符
</th>
<th>数据素材
</th></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E5%A4%A7%E5%9E%8B%E6%89%93%E9%80%A0%E5%93%81" title="模组:大型打造品">大型打造品</a>
</td>
<td><samp>(BC)</samp>
</td>
<td><samp>Data/BigCraftables</samp><br /><small>每个物品可以在 <samp>Texture</samp> 字段中设置自定义贴图集名称，并在 <samp>SpriteIndex</samp> 字段中设置贴图索引。默认贴图集为 <samp>TileSheets/Craftables</samp>。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E9%9D%B4%E5%AD%90" title="模组:靴子">鞋类</a>
</td>
<td><samp>(B)</samp>
</td>
<td><samp>Data/Boots</samp><br /><small>每个物品可以在字段 9（物品）和字段 7（鞋子颜色）中设置自定义贴图集名称，并在字段 8（物品）和字段 5（鞋子颜色）中设置贴图索引。默认贴图为 <samp>Maps/springobjects</samp>（物品）和 <samp>Characters/Farmer/shoeColors</samp>（鞋子颜色）。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E5%86%9C%E4%BD%9C%E7%89%A9%E6%95%B0%E6%8D%AE" title="模组:农作物数据">作物</a>
</td>
<td><small>不是严格意义上的物品类型</small>
</td>
<td><samp>Data/Crops</samp><br /><small>每种作物可以设置自定义贴图集名称和贴图索引。默认贴图集为 <samp>TileSheets/crops</samp>。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E9%B1%BC%E7%B1%BB%E6%95%B0%E6%8D%AE" title="模组:鱼类数据">鱼缸鱼类</a>
</td>
<td><small>不是严格意义上的物品类型</small>
</td>
<td><samp>Data/AquariumFish</samp><br /><small>每种鱼可以在字段 6 中设置自定义鱼缸贴图集名称，并在字段 0 中设置贴图索引。默认贴图集为 <samp>LooseSprites/AquariumFish</samp>。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E5%AE%B6%E5%85%B7" title="模组:家具">家具</a>
</td>
<td><samp>(F)</samp>
</td>
<td><samp>Data/Furniture</samp><br /><small>每个物品可以在字段 9 中设置自定义贴图集名称，并在字段 8 中设置贴图索引。默认贴图集为 <samp>TileSheets/furniture</samp>。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E6%9E%9C%E6%A0%91%E6%95%B0%E6%8D%AE" title="模组:果树数据">果树</a>
</td>
<td><small>不是严格意义上的物品类型</small>
</td>
<td><samp>Data/FruitTrees</samp><br /><small>每种果树可以设置自定义贴图集名称和贴图索引。默认贴图集为 <samp>TileSheets/fruitTrees</samp>。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E5%B8%BD%E5%AD%90" title="模组:帽子">帽子</a>
</td>
<td><samp>(H)</samp>
</td>
<td><samp>Data/Hats</samp><br /><small> 每个物品可以在字段 7 中设置自定义贴图集名称，并在字段6中设置贴图索引。默认贴图集为 <samp>Characters/Farmer/hats</samp>。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E4%BD%93" title="模组:物体">物品</a>
</td>
<td><samp>(O)</samp>
</td>
<td><samp>Data/Objects</samp><br /><small> 每个物品可以在 <samp>Texture</samp> 字段中设置自定义贴图集名称，并在 <samp>SpriteIndex</samp> 字段中设置贴图索引。默认贴图集为 <samp>Maps/springobjects</samp>。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E8%A3%A4%E5%AD%90" title="模组:裤子">裤子</a>
</td>
<td><samp>(P)</samp>
</td>
<td><samp>Data/pantsData</samp><br /><small>每个物品可以在 <samp>Texture</samp> 字段中设置自定义贴图集名称，并在 <samp>SpriteIndex</samp> 字段中设置贴图索引。默认贴图集为 <samp>Characters/Farmer/pants</samp>。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E4%B8%8A%E8%A1%A3" title="模组:上衣">上衣</a>
</td>
<td><samp>(S)</samp>
</td>
<td><samp>Data/shirtData</samp><br /><small>每个物品可以在 <samp>Texture</samp> 字段中设置自定义贴图集名称，并在 <samp>SpriteIndex</samp> 字段中设置贴图索引。默认贴图集为 <samp>Characters/Farmer/shirts</samp>。</small>
<p><small>上衣贴图必须正好为 256 像素宽，分为两半：左半部分用于衬衫贴图，右半部分用于颜色遮罩。剩余的空间可以根据需要留空。</small>
</p>
<pre>        贴图         颜色遮罩
   /-----------\  /-----------\
┌────────────────────────────────┐
│ ┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐ │
│ │ 0 ││ 1 ││ 2 ││ a ││ b ││ c │ │
│ └───┘└───┘└───┘└───┘└───┘└───┘ │
│ ┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐ │
│ │ 3 ││ 4 ││ 5 ││ d ││ e ││ f │ │
│ └───┘└───┘└───┘└───┘└───┘└───┘ │
└────────────────────────────────┘
</pre>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E5%B7%A5%E5%85%B7" title="模组:工具">工具</a>
</td>
<td><samp>(T)</samp>
</td>
<td><samp>Data/Tools</samp><br /><small>每个物品可以在<samp>Texture</samp>字段中设置自定义贴图名称，并在<samp>SpriteIndex</samp>字段中设置贴图索引。原版工具使用<samp>TileSheets/Tools</samp>贴图。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E5%A2%99%E7%BA%B8%E5%92%8C%E5%9C%B0%E6%9D%BF" title="模组:墙纸和地板">墙纸和地板</a>
</td>
<td><samp>(WP)</samp>和<samp>(FL)</samp>
</td>
<td><samp>Data/AdditionalWallpaperFlooring</samp><br /><small>请参阅<a href="/%E6%A8%A1%E7%BB%84:%E5%A2%99%E7%BA%B8%E5%92%8C%E5%9C%B0%E6%9D%BF" title="模组:墙纸和地板">格式文档</a>。</small>
</td></tr>
<tr>
<td><a href="/%E6%A8%A1%E7%BB%84:%E6%AD%A6%E5%99%A8" title="模组:武器">武器</a>
</td>
<td><samp>(W)</samp>
</td>
<td><samp>Data/Weapons</samp><br /><small><a href="#Custom_melee_weapons">完全重写</a>为数据模型。</small>
</td></tr></tbody></table></small><small><p>当解析非限定性物品ID（如<samp>128</samp>）时，游戏将按以下顺序获取第一个存在的物品类型：物品、大型打造品、家具、武器、靴子、帽子、裤子、上衣、工具、墙纸和地板。
</p></small><small><h4><span id="定义自定义物品"></span><span class="mw-headline" id=".E5.AE.9A.E4.B9.89.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">定义自定义物品</span></h4></small><small><p>您可以使用 <a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a> 或 <a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Content" title="模组:制作指南/APIs/Content">内容 API</a> 为大多数原版物品类型定义自定义物品。
</p><p>大多数物品数据素材的工作方式与 <samp>Data/Objects</samp> 类似。另请参阅<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.9E.9C.E6.A0.91">自定义果树</a>、<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.B7.A5.E5.85.B7">自定义工具</a>和<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E8.BF.91.E6.88.98.E6.AD.A6.E5.99.A8">自定义近战武器</a>的专门信息。
</p></small><small><h4><span id="错误物品"></span><span class="mw-headline" id=".E9.94.99.E8.AF.AF.E7.89.A9.E5.93.81">错误物品</span></h4></small><small><p>游戏中没有底层数据的物品（例如因为您删除了添加它们的模组）以前会导致诸如不可见物品、错误和崩溃等问题。这在一定程度上通过捆绑的 Error Handler 模组得到了缓解。
</p><p>Stardew Valley 1.6 添加了对这些物品的全面处理。它们将在背包和游戏中显示为 <samp>🛇</samp> 贴图，名称为“错误物品”，并显示描述以指示缺失的物品ID，以便进行故障排除。
</p></small><small><h4><span id="对于C#模组"></span><span class="mw-headline" id=".E5.AF.B9.E4.BA.8EC.23.E6.A8.A1.E7.BB.84">对于C#模组</span></h4></small><small><p>Stardew Valley 1.6 添加了新的方法来比较/构造物品、定义自定义物品类型以及处理物品元数据。请参阅<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%95%B0%E6%8D%AE" title="模组:物品数据">模组:物品数据</a>以获取迁移后的文档。
</p></small><small><h3><span id="自定义大型打造品"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.A4.A7.E5.9E.8B.E6.89.93.E9.80.A0.E5.93.81">自定义大型打造品</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%A4%A7%E5%9E%8B%E6%89%93%E9%80%A0%E5%93%81" title="模组:大型打造品">模组:大型打造品</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过编辑新的 <samp>Data/BigCraftables</samp> 素材来创建/编辑 <a href="/%E6%A8%A1%E7%BB%84:%E5%A4%A7%E5%9E%8B%E6%89%93%E9%80%A0%E5%93%81" title="模组:大型打造品">大型打造品</a>，该素材取代了以前的斜杠分隔的 <samp>Data/BigCraftablesInformation</samp>。
</p><p>除了格式更改外，还添加了...
</p></small><small><ul><li>上下文标签（迁自以前的 <samp>Data/ObjectContextTags</samp> 素材）；</li>
<li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.95.B0.E6.8D.AE.E5.AD.97.E6.AE.B5">自定义数据字段</a>，以便框架模组支持其他功能。</li></ul></small><small><h3><span id="自定义作物"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E4.BD.9C.E7.89.A9">自定义作物</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%86%9C%E4%BD%9C%E7%89%A9%E6%95%B0%E6%8D%AE" title="模组:农作物数据">模组:农作物数据</a>。此小节主要用于叙述更新内容。</div></small><small><p><a href="/%E6%A8%A1%E7%BB%84:%E5%86%9C%E4%BD%9C%E7%89%A9%E6%95%B0%E6%8D%AE" title="模组:农作物数据">作物</a>仍然存储在 <samp>Data/Crops</samp> 中，但该素材在 Stardew Valley 1.6 中进行了全面翻新。斜杠分隔的条目现在被模型化，以简化编辑并启用新功能。
</p></small><small><h3><span id="自定义栅栏"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E6.A0.85.E6.A0.8F">自定义栅栏</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%9B%B4%E6%A0%8F" title="模组:围栏">模组:围栏</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过编辑 <samp>Data/Fences</samp> 素材来添加或自定义<a href="/%E6%89%93%E9%80%A0#.E5.9B.B4.E6.A0.8F" title="打造">围栏</a>。
</p></small><small><h3><span id="自定义地板（可制作）和路径"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E6.9D.BF.EF.BC.88.E5.8F.AF.E5.88.B6.E4.BD.9C.EF.BC.89.E5.92.8C.E8.B7.AF.E5.BE.84">自定义地板（可制作）和路径</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%A2%99%E7%BA%B8%E5%92%8C%E5%9C%B0%E6%9D%BF" title="模组:墙纸和地板">模组:墙纸和地板</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过编辑 <samp>Data/FloorsAndPaths</samp> 素材来添加或自定义<a href="/%E6%89%93%E9%80%A0#.E8.A3.85.E9.A5.B0" title="打造">可打造的地板和路径</a>。请参阅新的文档页面以获取格式信息。
</p></small><small><h3><span id="自定义机器"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E6.9C.BA.E5.99.A8">自定义机器</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E6%9C%BA%E5%99%A8" title="模组:机器">模组:机器</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过编辑 <samp>Data/Machines</samp> 素材来添加/编辑机器逻辑。这支持所有原版功能，包括调用C#模组中定义的自定义代码。
</p><p>对于 C# 模组，1.6 还添加了一个新的 <samp>MachineDataUtility</samp> 类和各种 <samp>Object</samp> 方法，以简化代码中的机器操作。这些方法由游戏代码本身用于实现基础机器逻辑。
</p></small><small><h3><span id="自定义近战武器"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E8.BF.91.E6.88.98.E6.AD.A6.E5.99.A8">自定义近战武器</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E6%AD%A6%E5%99%A8" title="模组:武器">模组:武器</a>。此小节主要用于叙述更新内容。</div></small><small><p><a href="/%E6%A8%A1%E7%BB%84:%E6%AD%A6%E5%99%A8" title="模组:武器">近战武器</a>仍然存储在 <samp>Data/Weapons</samp> 中，但该素材在 Stardew Valley 1.6 中进行了全面翻新。斜杠分隔的条目现在被模型化，以简化编辑并启用新功能（如新的 <samp>Projectiles</samp> 功能）。
</p></small><small><h3><span id="自定义电影小吃"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E7.94.B5.E5.BD.B1.E5.B0.8F.E5.90.83">自定义电影小吃</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E7%94%B5%E5%BD%B1%E9%99%A2%E6%95%B0%E6%8D%AE" title="模组:电影院数据">模组:电影院数据</a>。此小节主要用于叙述更新内容。</div></small><small><dl><dd><i>另请参阅：<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.94.B5.E5.BD.B1">自定义电影</a>。</i></dd></dl></small><small><p>您已经可以<a href="/%E6%A8%A1%E7%BB%84:%E7%94%B5%E5%BD%B1%E9%99%A2%E6%95%B0%E6%8D%AE#.E9.9B.B6.E9.A3.9F.E6.95.B0.E6.8D.AE" title="模组:电影院数据">添加/编辑</a>在<a href="/%E7%94%B5%E5%BD%B1%E9%99%A2" title="电影院">电影院</a>出售的零食，但由于每个零食都有一个数字 ID，该 ID 与它们在原版地块表中的索引相同，因此新增零食可能会发生冲突。
</p><p>Stardew Valley 1.6 通过两个更改解决了这个问题：
</p></small><small><ul>
<li><samp>Id</samp> 字段现在是一个<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串ID</a>。</li>
<li>您现在可以使用不同的贴图，并添加了两个新的必填字段：
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>小吃贴图的贴图集素材名称。
</td></tr>
<tr>
<td><samp>SpriteIndex</samp>
</td>
<td><samp>Texture</samp> 中小吃贴图的索引，0表示左上角的贴图。
</td></tr></tbody></table>
</li>
</ul></small><small><h3><span id="自定义博物馆捐赠和奖励"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.8D.9A.E7.89.A9.E9.A6.86.E6.8D.90.E8.B5.A0.E5.92.8C.E5.A5.96.E5.8A.B1">自定义博物馆捐赠和奖励</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%8D%9A%E7%89%A9%E9%A6%86" title="模组:博物馆">模组:博物馆</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过新的 <samp>Data/MuseumRewards</samp> 数据素材添加/编辑<a href="/%E5%8D%9A%E7%89%A9%E9%A6%86" title="博物馆">博物馆</a>在奖励中返回的物品。
</p><p>“完整收藏”<a href="/%E6%88%90%E5%B0%B1" title="成就">成就</a>会根据数据素材自动作出调整，以添加自定义捐赠。由于游戏仅根据捐赠物品的数量来判断是否达成该成就，因此稍后删除自定义捐赠可能会错误地标记博物馆为已完成（因为您可能已经捐赠了足够多的物品）。
</p></small><small><h3><span id="自定义果树"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E6.9E.9C.E6.A0.91">自定义果树</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E6%9E%9C%E6%A0%91%E6%95%B0%E6%8D%AE" title="模组:果树数据">模组:果树数据</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过编辑修订后的 <samp>Data/FruitTrees</samp> 素材来添加自定义<a href="/%E6%9E%9C%E6%A0%91" title="果树">果树</a>。
</p><p>对于 C# 模组，<samp>fruitsOnTree</samp> 字段（树上的水果数量）已被 <samp>fruit</samp>（水果物品列表）取代。
</p><p>自定义树可以通过两种方式添加到游戏中：
</p></small><small><ul><li>在创建地点时在<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地块</a>上生成它们。也就是说，您可以使用新增的 <samp>SpawnTree: fruit <code title="必需字段 &#39;tree ID&#39;">&lt;tree ID&gt;</code> <code title="可选字段 &#39;growth stage on location created&#39;">[growth stage on location created]</code> <code title="可选字段 &#39;growth stage on day-update regrowth&#39;">[growth stage on day-update regrowth]</code></samp> 地块属性。这些属性必须添加到 <samp>Paths</samp> 图层，该图层还必须具有 <samp>paths</samp> 地块表中的地块 34。</li>
<li>或者通过通常的方式（例如从<a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店">商店</a>、<a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">信件</a>等）给玩家一个种子。</li></ul></small><small><h3><span id="自定义物品_2"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81_2">自定义物品</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E4%BD%93" title="模组:物体">模组:物体</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过编辑新的<samp>Data/Objects</samp>素材来创建/编辑物品（主要物品类型），该素材取代了以前的斜杠分隔的<samp>Data/objectInformation</samp>。
</p><p>除了格式更改外，还添加了...
</p></small><small><ul><li>支持自定义贴图；</li>
<li>修订了晶球掉落，支持条件、概率和物品查询；</li>
<li>扩展了食物/饮料增益（例如设置自定义增益ID，添加自定义增益图标等）；</li>
<li>上下文标签（迁自以前的 <samp>Data/ObjectContextTags</samp>素材）；</li>
<li><a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5" title="模组:公共数据字段">自定义字段</a>，以便框架模组支持其他功能。</li></ul></small><small><h3><span id="自定义裤子"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E8.A3.A4.E5.AD.90">自定义裤子</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E8%A3%A4%E5%AD%90" title="模组:裤子">模组:裤子</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过编辑新的 <samp>Data/Pants</samp> 素材来创建/编辑<a href="/%E8%A3%81%E7%BC%9D#.E8.A3.A4.E5.AD.90" title="裁缝">裤子</a>，该素材取代了 <samp>Data/clothingInformation</samp>。
</p></small><small><h3><span id="自定义衬衫"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E8.A1.AC.E8.A1.AB">自定义衬衫</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E4%B8%8A%E8%A1%A3" title="模组:上衣">模组:上衣</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过编辑新的 <samp>Data/Shirts</samp> 素材来创建/编辑<a href="/%E8%A3%81%E7%BC%9D#.E4.B8.8A.E8.A1.A3" title="裁缝">上衣</a>，该素材取代了 <samp>Data/clothingInformation</samp>。
</p></small><small><h3><span id="自定义工具"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.B7.A5.E5.85.B7">自定义工具</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%B7%A5%E5%85%B7" title="模组:工具">模组:工具</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过编辑新的 <samp>Data/Tools</samp> 素材来创建/编辑<a href="/%E5%B7%A5%E5%85%B7" title="工具">工具</a>。请注意，正确绘制世界中的工具（即玩家手持工具的图像）可能仍需要自定义代码。
</p></small><small><h3><span id="自定义野生树木"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E9.87.8E.E7.94.9F.E6.A0.91.E6.9C.A8">自定义野生树木</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E9%87%8E%E6%A0%91" title="模组:野树">模组:野树</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过编辑 <samp>Data/WildTrees</samp> 素材来创建/编辑<a href="/%E6%A0%91" title="树">野生树木</a>。
</p><p>自定义树可以通过两种方式添加到游戏中：
</p></small><small><ul><li>在创建地点时在<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地块</a>上生成它们。也就是说，您可以使用新增的 <samp>SpawnTree: fruit <code title="必需字段 &#39;tree ID&#39;">&lt;tree ID&gt;</code> <code title="可选字段 &#39;growth stage on location created&#39;">[growth stage on location created]</code> <code title="可选字段 &#39;growth stage on day-update regrowth&#39;">[growth stage on day-update regrowth]</code></samp> 地块属性。这些属性必须添加到 <samp>Paths</samp> 图层，该图层还必须具有 <samp>paths</samp> 地块表中的地块 34。</li>
<li>或者通过通常的方式（例如从<a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店">商店</a>、<a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">信件</a>等）给玩家一个种子。</li></ul></small><small><h3><span id="默认配方"></span><span class="mw-headline" id=".E9.BB.98.E8.AE.A4.E9.85.8D.E6.96.B9">默认配方</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E9%85%8D%E6%96%B9%E6%95%B0%E6%8D%AE" title="模组:配方数据">模组:配方数据</a>。此小节主要用于叙述更新内容。</div></small><small><p>您现在可以通过将条件字段设置为 <samp>default</samp> 来将<a href="/%E6%A8%A1%E7%BB%84:%E9%85%8D%E6%96%B9%E6%95%B0%E6%8D%AE" title="模组:配方数据">打造和烹饪配方</a>设为一开始就会。如果默认配方丢失，将在新的一天开始时重新学习。
</p><p>例如，以下是 <samp>Data/CraftingRecipes</samp> 中的宝箱条目：
</p></small><small><div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Chest&quot;</span><span class="err">:</span> <span class="s2">&quot;388 50/Home/130/true/default/&quot;</span>
</pre></div></small><small><h3><span id="全局库存"></span><span class="mw-headline" id=".E5.85.A8.E5.B1.80.E5.BA.93.E5.AD.98">全局库存</span></h3></small><small><p>C# 模组现在可以设置 <samp>chest.GlobalInventoryId</samp> 字段，使具有相同 ID 的每个箱子共享内部。这取代了<a href="/%E7%A5%9D%E5%B0%BC%E9%AD%94%E7%AE%B1" title="祝尼魔箱">祝尼魔箱</a>的旧版硬编码逻辑；新版中祝尼魔箱默认使用 <samp>"JunimoChests"</samp> 全局库存ID。例如，这可以用于创建多个祝尼魔箱网络或使其他容器共享内部。
</p><p>通过直接使用 <samp>Game1.player.team.globalInventories</samp> 或 <samp>Game1.player.team.GetOrCreateGlobalInventory(id)</samp>，C# 模组可以实现更多模组开发需求。
</p></small><small><h3><span id="鱼缸鱼类的帽子"></span><span class="mw-headline" id=".E9.B1.BC.E7.BC.B8.E9.B1.BC.E7.B1.BB.E7.9A.84.E5.B8.BD.E5.AD.90">鱼缸鱼类的帽子</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E9%B1%BC%E7%B1%BB%E6%95%B0%E6%8D%AE" title="模组:鱼类数据">模组:鱼类数据</a>。此小节主要用于叙述更新内容。</div></small><small><p>自定义<a href="/%E6%A8%A1%E7%BB%84:%E9%B1%BC%E7%B1%BB%E6%95%B0%E6%8D%AE" title="模组:鱼类数据">鱼缸鱼类</a>现在可以像原版<a href="/%E6%B5%B7%E8%83%86" title="海胆">海胆</a>一样佩戴<a href="/%E5%B8%BD%E5%AD%90" title="帽子">帽子</a>。可以通过在 <samp>Data/AquariumFish</samp> 中指定如下新字段以允许为给定鱼类戴帽子：
</p></small><small><table class="wikitable">

<tbody><tr>
<th>索引
</th>
<th>字段
</th>
<th>用途
</th></tr>
<tr>
<td>7
</td>
<td>帽子位置
</td>
<td>帽子在贴图上的像素位置，为具有 <samp>X</samp> 和 <samp>Y</samp> 字段的对象。
</td></tr></tbody></table></small><small><h3><span id="上下文标签更改"></span><span class="mw-headline" id=".E4.B8.8A.E4.B8.8B.E6.96.87.E6.A0.87.E7.AD.BE.E6.9B.B4.E6.94.B9">上下文标签更改</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%87%E7%AD%BE" title="模组:上下文标签">模组:上下文标签</a>。此小节主要用于叙述更新内容。</div></small><small><h4><span id="新上下文标签"></span><span class="mw-headline" id=".E6.96.B0.E4.B8.8A.E4.B8.8B.E6.96.87.E6.A0.87.E7.AD.BE">新上下文标签</span></h4></small><small><p>1.6添加了几个新的<a href="/%E6%A8%A1%E7%BB%84:%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%87%E7%AD%BE" title="模组:上下文标签">物品上下文标签</a>：
</p></small><small><table class="wikitable">

<tbody><tr>
<th>上下文标签
</th>
<th>效果
</th></tr>
<tr>
<td><samp>campfire_item</samp>
</td>
<td>将物品标记为<a href="/%E7%AF%9D%E7%81%AB" title="篝火">篝火</a>。如果物品还具有 <samp>torch_item</samp> 上下文标签，当它放置在世界上并打开时...
<ul><li>篝火火焰会绘制在其上方；</li>
<li>如果物品是<a href="/%E6%A8%A1%E7%BB%84:%E5%A4%A7%E5%9E%8B%E6%89%93%E9%80%A0%E5%93%81" title="模组:大型打造品">大型打造品</a>，则从其中心而不是顶部发出光线。</li></ul>
</td></tr>
<tr>
<td><samp>fish_pond_ignore</samp>
</td>
<td>禁止玩家将此鱼添加到<a href="/%E9%B1%BC%E5%A1%98" title="鱼塘">鱼塘</a>，无论其是否有 <samp>Data/FishPondData</samp> 数据。
</td></tr>
<tr>
<td><samp>geode_crusher_ignored</samp>
</td>
<td>禁止玩家使用<a href="/%E6%99%B6%E7%90%83%E7%A0%B4%E5%BC%80%E5%99%A8" title="晶球破开器">晶球破开器</a>打开此物品，无论其在 <a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E4%BD%93" title="模组:物体"><samp>Data/Objects</samp></a> 中是否具有晶球字段。
</td></tr>
<tr>
<td><samp>item_type_<code title="必需字段 &#39;type&#39;">&lt;type&gt;</code></samp>
</td>
<td>适用于<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E4%BD%93" title="模组:物体">物体类型</a>的物品，用于指定物体类别。（非物体类型的物品，该标签总是为 <samp>item_type_</samp>。即，下划线后没有任何内容。）该标签是自动生成的，不应手动设置。该标签在少数地方被检查（例如<a href="/%E5%8D%9A%E7%89%A9%E9%A6%86" title="博物馆">博物馆</a>以检查物品是否为文物或矿物），但大多数游戏不会受到影响。
</td></tr>
<tr>
<td><samp>museum_donatable</samp><br /><samp>not_museum_donatable</samp>
</td>
<td>设置物品是否可以捐赠给<a href="/%E5%8D%9A%E7%89%A9%E9%A6%86" title="博物馆">博物馆</a>，覆盖原版逻辑。
</td></tr>
<tr>
<td><samp>not_giftable</samp>
</td>
<td>禁止玩家将此物品赠送给 NPC，NPC 将完全忽略该物品（例如，就像您拿着工具一样）。
<p>这仅影响礼物赠送，不会影响非礼物逻辑，如任务目标或特殊订单目标。如果 NPC 还具有该物品的 <samp>reject_*</samp> 对话，则对话优先。
</p>
</td></tr>
<tr>
<td><samp>not_placeable</samp><br /><samp>placeable</samp>
</td>
<td>设置物品是否可以放置在地面上。
</td></tr>
<tr>
<td><samp>prevent_loss_on_death</samp>
</td>
<td>表示该物品在玩家晕倒时不会<a href="/%E6%8E%A2%E9%99%A9%E5%AE%B6%E5%85%AC%E4%BC%9A#.E7.89.A9.E5.93.81.E6.89.BE.E5.9B.9E.E6.9C.8D.E5.8A.A1" title="探险家公会">丢失</a>。
</td></tr>
<tr>
<td><samp>sign_item</samp>
</td>
<td>将物品标记为<a href="/%E6%89%93%E9%80%A0#.E6.A0.87.E7.89.8C" title="打造">标牌</a>，允许玩家在其上显示物品或将其放置在<a href="/%E9%B1%BC%E5%A1%98" title="鱼塘">鱼塘</a>上以显示鱼的数量。
</td></tr>
<tr>
<td><samp>torch_item</samp>
</td>
<td>将物品标记为<a href="/%E7%81%AB%E6%8A%8A" title="火把">火把</a>，允许玩家打开/关闭它以发出光线。
<p>另请参阅<samp>campfire_item</samp>。
</p>
</td></tr></tbody></table></small><small><p>影响<a href="/%E6%A8%A1%E7%BB%84:%E6%9C%BA%E5%99%A8" title="模组:机器">机器</a>的上下文标签：
</p></small><small><table class="wikitable">

<tbody><tr>
<th>上下文标签
</th>
<th>效果
</th></tr>
<tr>
<td><samp>crystalarium_banned</samp>
</td>
<td>当应用于宝石或矿物物品时，禁止玩家将其放置在<a href="/%E6%99%B6%E7%90%83%E7%A0%B4%E5%BC%80%E5%99%A8" title="晶球破开器">晶球破开器</a>中。
</td></tr>
<tr>
<td><samp>keg_juice</samp><br /><samp>keg_wine</samp>
</td>
<td>允许在<a href="/%E5%B0%8F%E6%A1%B6" title="小桶">小桶</a>中处理该物品以生产果汁或果酒。
</td></tr>
<tr>
<td><samp>preserves_jelly</samp><br /><samp>preserves_pickle</samp>
</td>
<td>允许在<a href="/%E7%BD%90%E5%A4%B4%E7%93%B6" title="罐头瓶">罐头瓶</a>中处理该物品以生产果酱或腌菜。
</td></tr>
<tr>
<td><samp>seedmaker_banned</samp>
</td>
<td>当应用于种子物品时，禁止玩家将其放置在<a href="/%E7%A7%8D%E5%AD%90%E7%94%9F%E4%BA%A7%E5%99%A8" title="种子生产器">种子生产器</a>中。
</td></tr>
<tr>
<td><samp>tapper_item</samp>
</td>
<td>将物品标记为<a href="/%E6%A0%91%E6%B6%B2%E9%87%87%E9%9B%86%E5%99%A8" title="树液采集器">树液采集器</a>或<a href="/%E9%87%8D%E5%9E%8B%E6%A0%91%E6%B6%B2%E9%87%87%E9%9B%86%E5%99%A8" title="重型树液采集器">重型树液采集器</a>。
</td></tr>
<tr>
<td><samp>tapper_multiplier_<code title="必需字段 &#39;multiplier&#39;">&lt;multiplier&gt;</code></samp>
</td>
<td>应用于树液采集器生产速度的乘数。例如，<samp>2</samp> 将使物品花费其基础时间的一半（即每个物品将在 <sup>基础时间</sup>/<sub>速度乘数</sub> 内完成）。如果省略，默认为1。
</td></tr></tbody></table></small><small><p>以及没有影响游戏逻辑的信息标签：
</p></small><small><table class="wikitable">

<tbody><tr>
<th>上下文标签
</th>
<th>效果
</th></tr>
<tr>
<td><samp>fish_legendary</samp><br /><samp>fish_legendary_family</samp>
</td>
<td>将鱼标记为<a href="/%E9%B1%BC" title="鱼">传说鱼类</a>或<a href="/%E4%BB%BB%E5%8A%A1#.E5.A4.A7.E5.AE.B6.E6.97.8F" title="任务">二代传说鱼类</a>。这些标签纯粹是信息性的；传说鱼类的行为由 <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E7%82%B9%E6%95%B0%E6%8D%AE" title="模组:地点数据"><samp>Data/Locations</samp></a> 中的数据字段（如<samp>CatchLimit</samp>或<samp>IsBossFish</samp>）确定。
</td></tr>
<tr>
<td><samp>geode</samp>
</td>
<td>（自动添加）将物品标记为<a href="/%E7%9F%BF%E7%89%A9#.E6.99.B6.E7.90.83" title="矿物">晶球</a>物品，可以在<a href="/%E9%93%81%E5%8C%A0%E9%93%BA" title="铁匠铺">克林特的铁匠铺</a>或使用<a href="/%E6%99%B6%E7%90%83%E7%A0%B4%E5%BC%80%E5%99%A8" title="晶球破开器">晶球破开器</a>打开。如果 <a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E4%BD%93" title="模组:物体"><samp>Data/Objects</samp></a> 中存在晶球字段，则会自动添加此标签。
</td></tr>
<tr>
<td><samp>id_<code title="必需字段 &#39;item id&#39;">&lt;item id&gt;</code></samp>
</td>
<td>（自动添加）<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E7.89.A9.E5.93.81.E7.B1.BB.E5.9E.8B" title="模组:公共数据字段">限定性物品ID</a>，如<samp>id_(o)128</samp>。这可以用于通过上下文标签匹配或排除物品。ID中的任何空格都替换为下划线，单引号被删除。
</td></tr>
<tr>
<td><samp>is_machine</samp>
</td>
<td>（自动添加）表示物品具有<a href="/%E6%A8%A1%E7%BB%84:%E6%9C%BA%E5%99%A8" title="模组:机器">机器逻辑</a>。这是基于 <samp>Data/Machines</samp> 自动添加的。
</td></tr>
<tr>
<td><samp>machine_input</samp>
</td>
<td>（自动添加）物品是否为接受玩家物品的机器。如果 <samp>Data/Machines</samp> 中的字段满足如下条件，则自动添加此标签：
<ul><li>如果 <samp>HasInput</samp> 为 true；</li>
<li><b>或</b>如果任何输出规则具有 <samp>ItemPlacedInMachine</samp> 触发条件。</li></ul>
</td></tr>
<tr>
<td><samp>machine_output</samp>
</td>
<td>（自动添加）物品是否为生产玩家可收集物品的机器。如果 <samp>Data/Machines</samp> 中的字段满足如下条件，则自动添加此标签：
<ul><li>如果 <samp>HasOutput</samp> 为 true；</li>
<li><b>或</b>如果它具有任何输出规则。</li></ul>
</td></tr></tbody></table></small><small><h4><span id="ItemContextTagManager类"></span><span class="mw-headline" id="ItemContextTagManager.E7.B1.BB">ItemContextTagManager类</span></h4></small><small><p>对于 C# 模组，1.6添加了一个新的<samp>ItemContextTagManager</samp>类，简化了<a href="/%E6%A8%A1%E7%BB%84:%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%87%E7%AD%BE" title="模组:上下文标签">物品上下文标签</a>的工作并减少了重复代码。
</p><p>这提供了几个实用方法：
</p></small><small><table class="wikitable">

<tbody><tr>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td><code>GetBaseContextTags(id)</code>
</td>
<td>根据物品在 <samp>Data/Objects</samp>或 <samp>Data/BigCraftables</samp> 中的原始数据获取基础上下文标签。这不包括基于实例信息添加的动态标签（如质量），您可以使用 <code>item.GetContextTags()</code> 获取这些标签。
</td></tr>
<tr>
<td><code>DoesTagQueryMatch(query, tags)</code>
</td>
<td>获取上下文标签查询是否与给定标签匹配。例如，<code>ItemContextTagManager.DoesTagQueryMatch("bone_item, !fossil_item", item.GetContextTags())</code>如果物品是骨头物品但不是化石（如<a href="/%E9%AA%A8%E7%AC%9B" title="骨笛">骨笛</a>），则返回 true。
</td></tr>
<tr>
<td><code>DoAllTagsMatch(requiredTags, actualTags)</code><br /><code>DoAnyTagsMatch(requiredTags, actualTags)</code>
</td>
<td>判断每个标签（<samp>DoAllTagsMatch</samp>）或至少一个标签（<samp>DoAnyTagsMatch</samp>）是否与物品的实际标签匹配。这也支持反向选择，如<samp>"!fossil_item"</samp>。
</td></tr>
<tr>
<td><code>DoesTagMatch(requiredTag, actualTags)</code>
</td>
<td>判断单个标签是否与实际物品标签匹配。这也支持反向选择，如<samp>"!fossil_item"</samp>。
</td></tr>
<tr>
<td><code>SanitizeContextTag(tag)</code>
</td>
<td>（专用）替换可能出现在物品名称中的字符，使其可用于上下文标签中。例如，<code>SanitizeContextTag("Sam's Boombox")</code> 返回 <samp>sams_boombox</samp>。
</td></tr></tbody></table></small><small><h4><span id="其他上下文标签更改"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E4.B8.8A.E4.B8.8B.E6.96.87.E6.A0.87.E7.AD.BE.E6.9B.B4.E6.94.B9">其他上下文标签更改</span></h4></small><small><ul><li>上下文标签现在不区分大小写。</li></ul></small><small><h3><span id="Inventory类"></span><span class="mw-headline" id="Inventory.E7.B1.BB">Inventory类</span></h3></small><small><p>对于C#模组，1.6添加了一个新的 <samp>Inventory</samp> 类来管理物品库存（例如，箱子内部或玩家背包）。这用于 <samp>Farmer.items</samp> 和 <samp>Chest.items</samp> 字段。它实现了 <samp>IList&lt;Item&gt;</samp> ，因此大多数现有代码仍然可以正常工作。
</p><p>这有三个主要优点：
</p></small><small><ul>
<li>它有一些方法可以简化许多常见操作。例如：
<table class="wikitable">

<tbody><tr>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td><code>HasAny()</code>
</td>
<td>判断库存中是否包含任何物品（忽略空槽）。
</td></tr>
<tr>
<td><code>CountItemStacks()</code>
</td>
<td>获取库存中的物品堆叠数量（忽略空槽）。
</td></tr>
<tr>
<td><code>ContainsId(id)</code>
</td>
<td>判断库存中是否包含给定物品，可使用限定性或非限定性物品ID。
</td></tr>
<tr>
<td><code>ContainsId(id, minCount)</code>
</td>
<td>判断库存中是否包含给定物品，且其数量至少为 <samp>minCount</samp>。可使用限定性或非限定性物品ID。
</td></tr>
<tr>
<td><code>CountId(id)</code>
</td>
<td>获取库存中给定物品的数量，可使用限定性或非限定性物品ID。
</td></tr>
<tr>
<td><code>GetById(id)</code>
</td>
<td>获取库存中具有给定 ID 的物品的列表，可使用限定性或非限定性物品ID。
</td></tr>
<tr>
<td><code>ReduceId(id, count)</code>
</td>
<td>移除指定数量的指定物品，可使用限定性或非限定性物品ID。这会减少相应的物品数量，直到总共移除 <samp>count</samp> 个物品，并清除任何堆叠数量为零的槽。
</td></tr></tbody></table></li>
<li>许多常见操作已统一，因此以前仅适用于玩家的方法现在也可以用于箱子。</li>
<li>Inventory类有一个按物品 ID 的内部索引，因此像 <code>items.ContainsId("(O)128")</code> 这样的操作效率更高，因为它们不再遍历列表。</li>
</ul></small><small><p>这取代了一些以前的方法：
</p></small><small><table class="wikitable">

<tbody><tr>
<th>游戏类
</th>
<th>旧代码
</th>
<th>迁移
</th></tr>
<tr>
<td rowspan="6"><samp>Farmer</samp>
</td>
<td><code>getItemCount(id)</code><br /><code>GetTallyOfObject(id)</code><br /><code>GetTallyOfObject(id, isBigCraftable)</code><br /><code>hasItemInInventory(id, count)</code><br /><code>hasItemInList(list, id, count)</code>
</td>
<td>&#32;
<ul><li>要检查物品ID，请使用 <code>items.CountId(id)</code> 或 <code>Items.ContainsId(id, count)</code>。</li>
<li>要检查金色核桃或齐钻，请使用 <samp>Game1.netWorldState.Value.GoldenWalnuts</samp> 和 <samp>Farmer.QiGems</samp> 字段。</li>
<li>要检查类别匹配或 <samp>-777</samp>（季节性野生种子），<samp>getItemCount</samp> 和 <samp>getItemCountInList</samp> 仍然存在。</li></ul>
</td></tr>
<tr>
<td><code>hasItemInInventoryNamed(name)</code><br /><code>hasItemWithNameThatContains(name)</code>
</td>
<td>在大多数情况下，您应该通过ID匹配物品（请参阅上一行）。
<p>如果您确实需要通过名称匹配物品，可以像这样替换：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// 精确名称</span>
<span class="kt">bool</span> <span class="n">hasMatch</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">Any</span><span class="p">(</span><span class="n">item</span> <span class="p">=&gt;</span> <span class="n">item</span><span class="p">?.</span><span class="n">Name</span> <span class="p">==</span> <span class="n">name</span><span class="p">);</span>

<span class="c1">// 名称包含</span>
<span class="kt">bool</span> <span class="n">hasMatch</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">Any</span><span class="p">(</span><span class="n">item</span> <span class="p">=&gt;</span> <span class="n">item</span><span class="p">?.</span><span class="n">Name</span><span class="p">?.</span><span class="n">Contains</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">is</span> <span class="k">true</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><code>areAllItemsNull()</code>
</td>
<td>使用 <code>!items.HasAny()</code>。
</td></tr>
<tr>
<td><code>numberOfItemsInInventory()</code>
</td>
<td>使用 <code>items.CountItemStacks()</code> 获取所有物品计数。也可使用 <code>Items.Count(p =&gt; p is Object)</code> 筛选某类物品。
</td></tr>
<tr>
<td><code>consumeObject(id, count)</code>
</td>
<td>使用 <code>items.ReduceId(id, count)</code>。
</td></tr>
<tr>
<td><code>removeItemsFromInventory(id, count)</code>
</td>
<td>&#32;
<ul><li>要通过 ID 移除物品，使用 <code>items.ReduceId(id, count)</code>。</li>
<li>要扣除金色核桃或齐钻，修改 <samp>Game1.netWorldState.Value.GoldenWalnuts</samp> 和 <samp>Farmer.QiGems</samp> 字段。</li></ul>
</td></tr>
<tr>
<td rowspan="2"><samp>Object</samp>
</td>
<td><code>ConsumeInventoryItem(player, id, count)</code>
</td>
<td>这个方法非常专门，不应由模组代码调用，但等效的方法是 <code>(Object.autoLoadChest&#160;?? player.items).ReduceId(id, count)</code>。另请参阅<samp>Farmer.removeItemsFromInventory</samp> 的注释。
</td></tr>
<tr>
<td><code>GetTallyOfObject(player, id)</code>
</td>
<td>这个方法非常专门，不应由模组代码调用，但等效的方法是 <code>(Object.autoLoadChest&#160;?? player.items).CountId(id)</code>。另请参阅<samp>Farmer.getTallyOfObject</samp> 的注释。
</td></tr></tbody></table></small><small><p>它实现了一个新的 <samp>IInventory</samp>接口，允许模组将自己的实现传递给代码。
</p></small><small><h3><span id="家具变更"></span><span class="mw-headline" id=".E5.AE.B6.E5.85.B7.E5.8F.98.E6.9B.B4">家具变更</span></h3></small><small><div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%AE%B6%E5%85%B7" title="模组:家具">模组:家具</a>。此小节主要用于叙述更新内容。</div></small><small><ul>
<li><a href="/%E6%A8%A1%E7%BB%84:%E5%AE%B6%E5%85%B7" title="模组:家具"><samp>Data/furniture</samp></a> 不再有语言变体。翻译已移至 <samp>Strings/Furniture</samp>。</li>
<li>
<a href="/%E6%A8%A1%E7%BB%84:%E5%AE%B6%E5%85%B7" title="模组:家具"><samp>Data/furniture</samp></a> 中有一些变化：
<ul>
<li>字段索引 6 现在是放置限制，字段索引 7 现在是显示名称。显示名字段在英语中不再省略。</li>
<li>字段索引 7（显示名称）现在允许<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。</li>
<li>新增了以下字段：

<table class="wikitable">

<tbody><tr>
<th>索引
</th>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td>8
</td>
<td>贴图索引
</td>
<td>在贴图表贴图中绘制的贴图索引。
</td></tr>
<tr>
<td>9
</td>
<td>贴图
</td>
<td>（可选）要绘制的贴图集的素材名称。默认为 <samp>TileSheets/furniture</samp>。
</td></tr>
<tr>
<td>10
</td>
<td>禁止随机出售
</td>
<td>（可选）是否禁止此家具出现在随机生成的商店库存和家具目录中。默认为 false。
</td></tr>
<tr>
<td>11
</td>
<td>上下文标签
</td>
<td>（可选）适用于此家具的<a href="/%E6%A8%A1%E7%BB%84:%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%87%E7%AD%BE" title="模组:上下文标签">上下文标签</a>列表，以空格分隔。默认为空。
</td></tr></tbody></table></li>
</ul>
</li>
</ul></small><small><h3><span id="C#模组的其他物体更改"></span><span class="mw-headline" id="C.23.E6.A8.A1.E7.BB.84.E7.9A.84.E5.85.B6.E4.BB.96.E7.89.A9.E4.BD.93.E6.9B.B4.E6.94.B9">C#模组的其他物体更改</span></h3></small><small><ul><li>可放置物品更改：
<ul><li>现在每个可放置物品都有一个 <samp>Location</samp> 字段，即此对象所在地点。这移除了许多相关方法的地点参数。</li>
<li>现在通过 <samp>obj.TileLocation</samp> 设置物品的地块位置会自动计算碰撞箱（但直接通过 <samp>tileLocation</samp> Net 字段设置则不会重新计算）。</li>
<li>现在 <samp>obj.IsScarecrow()</samp> 和 <samp>GetScarecrowRadius()</samp> 也能用于非大型打造品的物品了。</li></ul></li>
<li>服装更改：
<ul><li>现在 <samp>Clothes.clothesType</samp> 是一个枚举自然。</li>
<li>现在服装不限性别了，因此：重命名 <samp>indexInTileSheetMale</samp> 为 <samp>indexInTileSheet</samp>；淘汰 <samp>indexInTileSheetFemale</samp> 方法；将不同男女款的服装改为常规物品。</li>
<li>移除了无用的 <samp>ClothesType.ACCESSORY</samp></li>
<li>现在 <samp>Farmer.pants</samp> 和 <samp>Farmer.shirt</samp> 存储物品 ID 而非贴图集 ID。</li>
<li>向 <samp>Data/TailoringRecipes</samp> 添加了一个 <samp>CraftingIdFeminine</samp> 字段，以覆盖女性角色的 <samp>CraftingId</samp> 字段。</li></ul></li>
<li>作物更改：
<ul><li>添加了 <samp>Game1.cropData</samp>，现在无需重复加载 <samp>Data/Crops</samp> 素材就能读取作物信息。</li>
<li>移除了大多数仅用作数据镜像的作物字段（例如 <samp>harvestMethod</samp> 或 <samp>seasonsToGrowIn</samp>）。模组可以转而使用 <samp>crop.GetData()</samp> 获取作物信息。</li>
<li>部分解除了肥料的硬编码。现在几乎所有肥料逻辑都集中到了 <samp>HoeDirt</samp> 方法的一个可修改的子集中。唯一一个仍然嵌入别处的肥料逻辑为 <samp>Utility.tryToPlaceItem</samp> 中的交互错误。</li>
<li>现在地块没有肥料时其 HoeDirt.fertilizer.Value 为 <samp>null</samp>。有肥料时，此字段的取值既可能为限定性物品 ID，也可能为非限定性物品 ID。</li>
<li>移除了 <samp>crop.InferSeedIndex()</samp>。此方法用于支持旧版作物，但现在只需进行存档迁移就能修复旧版作物。</li></ul></li>
<li>工具修改：
<ul><li>修复了一些不支持自定义工具等级的逻辑。</li></ul></li></ul></small><small><ul>
<li>其他物品逻辑：<ul>
<li>简化了许多物品类型的构造函数，尤其是 <samp>Object</samp>。</li>
<li> 
field set to a new <samp>Honey</samp> type (instead of null).</li>
<li>现在 <samp>Object.performObjectDropInAction</samp> 方法能够更协调地处理 <samp>probe</samp> 参数。这仅影响 <samp>probe: true</samp> 的方法调用。</li>
<li>现在 <samp>Item.salePrice()</samp> 方法提供了获取无<a href="/%E5%90%88%E4%BD%9C#.E5.88.A9.E6.B6.A6.E7.8E.87" title="合作">利润率</a>价格的方法。</li>
<li>添加了新的字段和方法：

<table class="wikitable">

<tbody><tr>
<th>类型
</th>
<th>字段/方法
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Chest</samp>
</td>
<td><samp>GetItemsForPlayer()</samp>
</td>
<td>简写 <samp>chest.GetItemsForPlayer(Game1.player.UniqueMultiplayerID)</samp>。
</td></tr>
<tr>
<td rowspan="2"><samp>Crop</samp>
</td>
<td><samp>GetHarvestMethod()</samp>
</td>
<td>获取用于收获作物的方法（<samp>HarvestMethod.Grab</samp> 或 <samp>HarvestMethod.Scythe</samp> 之一）。
</td></tr>
<tr>
<td><samp>IsInSeason(location)</samp>
</td>
<td>此作物是否能够在指定地点的当前季节生长（若作物在指定地点忽视季节，例如<a href="/%E6%B8%A9%E5%AE%A4" title="温室">温室</a>，则返回 true）。
</td></tr>
<tr>
<td rowspan="8"><samp>HoeDirt</samp>
</td>
<td><samp>HasFertilizer()</samp>
</td>
<td>判断土壤是否已被施肥。
</td></tr>
<tr>
<td><samp>CanApplyFertilizer(itemId)</samp>
</td>
<td>判断玩家是否可以在当前土壤使用指定肥料。
</td></tr>
<tr>
<td><samp>CheckApplyFertilizerRules(itemId)</samp>
</td>
<td>判断玩家是否可以在当前土壤使用指定肥料，若不能，则返回具体原因（若可用）。
</td></tr>
<tr>
<td><samp>GetFertilizerSpeedBoost()</samp>
</td>
<td>获取此地块的肥料提供的作物生长速度加成。
</td></tr>
<tr>
<td><samp>GetFertilizerWaterRetentionChance()</samp>
</td>
<td>获取此地块的肥料提供的保湿概率，后者为介于 0（不保湿）到 1（一定保湿）之间的数值。
</td></tr>
<tr>
<td><samp>GetFertilizerQualityBoostLevel()</samp>
</td>
<td>获取此地块的肥料提供的作物品质加成。
</td></tr>
<tr>
<td><samp>GetFertilizerSourceRect()</samp>
</td>
<td>获取此地块施加某种肥料后的地块贴图。返回土壤贴图集中的像素区域。
<p>（此方法也存在于旧版中，但现在无需肥料 ID 参数了。）
</p>
</td></tr>
<tr>
<td><samp>isWatered()</samp>
</td>
<td>判断此地块是否已浇水。
</td></tr>
<tr>
<td rowspan="5"><samp>Item</samp>
</td>
<td><samp>IsRecipe</samp><br /><samp>Quality</samp><br /><samp>Stack</samp><br /><samp>sellToStorePrice(…)</samp>
</td>
<td>等价于先前 <samp>Object</samp> 对应的字段/方法，用于简化公共代码，避免单独处理 <samp>Object</samp> 物品。
</td></tr>
<tr>
<td><samp>appliesProfitMargins()</samp>
</td>
<td>判断计算此物品售价时是否应当使用<a href="/%E5%90%88%E4%BD%9C#.E5.88.A9.E6.B6.A6.E7.8E.87" title="合作">利润率</a>。
</td></tr>
<tr>
<td><samp>CanBeLostOnDeath()</samp>
</td>
<td>判断此物品在玩家晕倒时是否会丢失，若会丢失，则可以通过<a href="/%E6%8E%A2%E9%99%A9%E5%AE%B6%E5%85%AC%E4%BC%9A#.E7.89.A9.E5.93.81.E6.89.BE.E5.9B.9E.E6.9C.8D.E5.8A.A1" title="探险家公会">物品找回服务</a>来找回它。
</td></tr>
<tr>
<td><samp>HasTypeId(id)</samp><br /><samp>HasTypeObject()</samp><br /><samp>HasTypeBigCraftable()</samp>
</td>
<td>判断此物品是否具有给定<a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81&amp;action=edit&amp;redlink=1" class="new" title="模组:物品（页面不存在）">类型 ID</a>。它们都是空安全的，也可用作空检查：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">HasTypeId</span><span class="p">(</span><span class="n">ItemRegistry</span><span class="p">.</span><span class="n">type_object</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// item is non-null and has type (O)</span>
<span class="p">}</span>
</pre></div>
<p><samp>HasTypeObject()</samp> 和 <samp>HasTypeBigCraftable()</samp> 相当于向此方法传入 <samp>ItemRegistry.type_object</samp> 和 <samp>ItemRegistry.type_bigCraftable</samp>。
</p>
</td></tr>
<tr>
<td><samp>TryGetTempData</samp><br /><samp>SetTempData</samp>
</td>
<td>获取/设置未在多人游戏中同步的、或未写入存档文件中的临时物品信息。
<p>例如，游戏使用如下代码向钓鱼小游戏传入鱼类生成数据：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">spawn</span><span class="p">.</span><span class="n">IsBossFish</span><span class="p">)</span>
    <span class="n">fish</span><span class="p">.</span><span class="n">SetTempData</span><span class="p">(</span><span class="n">nameof</span><span class="p">(</span><span class="n">spawn</span><span class="p">.</span><span class="n">IsBossFish</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span>

<span class="p">...</span>

<span class="n">fish</span><span class="p">.</span><span class="n">TryGetTempData</span><span class="p">(</span><span class="n">nameof</span><span class="p">(</span><span class="n">SpawnFishData</span><span class="p">.</span><span class="n">IsBossFish</span><span class="p">),</span> <span class="k">out</span> <span class="kt">bool</span> <span class="n">bossFish</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>FishingRod</samp>
</td>
<td><samp>CanUseBait()</samp><br /><samp>CanUseTackle()</samp><br /><samp>GetBait()</samp><br /><samp>GetTackle()</samp><br /><samp>HasMagicBait()</samp><br /><samp>HasCuriosityLure()</samp>
</td>
<td>处理鱼竿的<a href="/%E9%B1%BC%E9%A5%B5" title="鱼饵">鱼饵</a>和<a href="/%E6%B8%94%E5%85%B7" title="渔具">渔具</a>更简便了。
</td></tr>
<tr>
<td rowspan="2"><samp>Furniture</samp>
</td>
<td><samp>SetPlacement</samp><br /><samp>SetHeldObject</samp>
</td>
<td>设置家具的位置和旋转（<samp>SetPlacement</samp>）或其上放置的物品（<samp>SetHeldObject</samp>）。后者会初始化物品的地块坐标，以与家具实例相匹配。
<p>它们用于一气呵成地初始化家具。例如：
// oak table holding decorative bowl
Furniture table = ItemRegistry
</p>
<pre>   .Create&lt;Furniture&gt;("(F)1120")
   .SetPlacement(5, 4, 0)
   .SetHeldObject(ItemRegistry.Create&lt;Furniture&gt;("(F)1364"));
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
</td></tr>
<tr>
<td><samp>IsTable()</samp>
</td>
<td>判断家具是否时桌子。
</td></tr>
<tr>
<td rowspan="2"><samp>FruitTree</samp>
</td>
<td><samp>GetQuality()</samp>
</td>
<td>获取当前果树产出的水果品质。
</td></tr>
<tr>
<td><samp>TryAddFruit()</samp>
</td>
<td>基于<a href="/%E6%A8%A1%E7%BB%84:%E6%9E%9C%E6%A0%91%E6%95%B0%E6%8D%AE" title="模组:果树数据">果树数据</a>向果树添加水果。
</td></tr>
<tr>
<td><samp>IndoorPot</samp>
</td>
<td><samp>Water()</samp>
</td>
<td>简化了向<a href="/%E8%8A%B1%E7%9B%86" title="花盆">花盆</a>浇水的过程。
</td></tr>
<tr>
<td><samp>Object</samp>
</td>
<td><samp>GetBoundingBox()</samp><br /><samp>GetBoundingBoxAt(x, y)</samp>
</td>
<td>获取放置在地上的物品的碰撞区域，单位为像素。这代替了旧版的 <samp>getBoundingBox(position)</samp> 方法。
</td></tr>
<tr>
<td><samp>Tool</samp>
</td>
<td><samp>isScythe()</samp>
</td>
<td>等价于旧版的 <samp>MeleeWeapon</samp> 方法，用于简化公共代码，避免单独处理 <samp>MeleeWeapon</samp> 物品。
</td></tr>
<tr>
<td rowspan="3"><samp>Tree</samp>
</td>
<td><samp>CheckForNewTexture()</samp>
</td>
<td>若此树木的贴图会基于<a href="/%E6%A8%A1%E7%BB%84:%E9%87%8E%E6%A0%91" title="模组:野树">其数据</a>发生变化，则此方法用于重设其贴图。
</td></tr>
<tr>
<td><samp>GetMaxSizeHere</samp>
</td>
<td>获取此树在当前位置能生长到的最高阶段（例如，考虑到附近的树木会阻止生长）。
</td></tr>
<tr>
<td><samp>IsGrowthBlockedByNearbyTree</samp>
</td>
<td>判断此树是否因为周边有成熟树木而生长受阻。
</td></tr></tbody></table>
</li>
<li>模块化的 <samp>Object.CheckForAction</samp> 用于简化模组不要。</li>
<li>重置了 <samp>Item.getOne()</samp> 的实现，以避免常见的陷阱（这仅影响使用自定义物品类或修改 <samp>Item.getOne</samp> / <samp>Item._GetOneFrom</samp> 的模组）。</li>
<li>修复了果树在过夜更新时，遗忘其构造函数中的生长阶段的问题。
</li>
</ul>
<h3><span id="其他物品更改"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E7.89.A9.E5.93.81.E6.9B.B4.E6.94.B9">其他物品更改</span></h3>
<ul><li>添加了每个物品的显示名称（例如，用于自定义风味物品）。请参阅 <samp>ObjectDisplayName</samp> <a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2#.E7.89.A9.E5.93.81.E7.94.9F.E6.88.90.E5.AD.97.E6.AE.B5" title="模组:物品查询">物品生成字段</a>，或 C# 中的 <samp>object.displayNameFormat</samp>。</li>
<li><a href="/%E5%A7%9C%E5%B2%9B#.E5.AE.9D.E7.9F.B3.E9.B8.9F" title="姜岛">物品基座</a>现在是普通物品，因此您可以使用像 CJB 物品生成器这样的模组来生成它们。</li>
<li>在 <samp>Data/SpecialOrders</samp> 中添加了可选的 <samp>Condition</samp> <a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>字段。</li>
<li>物品数据更累：
<ul><li>现在 <samp>Data/Boots</samp>、<samp>Data/Bundles</samp>、<samp>Data/CookingRecipes</samp>、<samp>Data/CraftingRecipes</samp>、<samp>Data/Furniture</samp>、<samp>Data/Hats</samp> 和 <samp>Data/Weapons</samp> 中的显示名称字段添加了英语显示名称。</li>
<li>随机生成的<a href="/%E5%86%9C%E5%9C%BA#.E7.9F.B3.E5.A4.B4" title="农场">石头</a>、<a href="/%E5%86%9C%E5%9C%BA#.E6.9C.A8.E5.A4.B4" title="农场">树枝</a>和<a href="/%E6%9D%82%E8%8D%89" title="杂草">杂草</a>已被正式化为“垃圾”。它们现在有如下特点：物品类型为 <samp>Litter</samp>，<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%95%B0%E6%8D%AE#.E7.B1.BB.E5.88.AB" title="模组:物品数据">类别</a>为 -999（<samp>StardewValley.Object.litterCategory</samp>），具有相关的显示名称/描述（如“金矿石”和“打破以获得金矿石”而不是“石头”和“...”），价格为 0（不可出售），营养值为 -300（不可食用）。这还将所有矿洞矿点添加到 <samp>Data/Objects</samp> 中，因此游戏不再通过创建无效物品以显示矿点贴图（在 1.6 中这样做会显示错误物品贴图）。</li>
<li><a href="/%E8%9C%82%E8%9C%9C" title="蜂蜜">蜂蜜</a>物品现在具有 <samp>honey_item</samp> 上下文标签。</li>
<li>上衣不再具有动态的数字ID范围；每个可用的上衣现在都列在 <a href="/%E6%A8%A1%E7%BB%84:%E4%B8%8A%E8%A1%A3" title="模组:上衣"><samp>Data/Shirts</samp></a> 中。</li>
<li>您现在可以通过 <samp>Data/Objects</samp> 的 <samp>Buff</samp> 字段自定义食物的增益。</li>
<li><samp>Data/Objects</samp> 中的类型字段不再使用子字符串匹配进行检查（例如，游戏现在使用<code>data.Type == "Fish"</code>而不是<code>typeAndCategory.Contains("Fish")</code>），这可能会影响依赖该未记录行为的模组。</li></ul></li>
<li>作物变更：
<ul><li>现在水稻作物每天都会重新检查附近的水源，因此如果您添加/移除带有水源的建筑物或更改地图布局，它们将更新。</li>
<li>在 <samp>Data/Crops</samp> 中，每个收获选项现在是自洽的。例如，您可以设置 <samp>HarvestMinStack</samp> 而无需设置 <samp>ExtraHarvestChance</samp>。</li></ul></li>
<li>鱼类变更：
<ul><li><samp>Data/Fish</samp> 不再包含翻译，因此只有一个 <samp>Data/Fish.xnb</samp> 文件。鱼的显示名称现在取自 <samp>Data/Objects</samp>。</li>
<li>在 <samp>Data/Fish</samp> 中添加了一个新字段（索引 13），用于设置鱼是否可以出现在钓鱼教程中。</li></ul></li>
<li><samp>Data/CookingRecipes</samp> 和 <samp>Data/CraftingRecipes</samp> 中的配方更改：
<ul><li>这些素材不再有语言变体。</li>
<li>显示名称现在支持<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。</li>
<li>显示名称现在可以留空。若留空，则该配方名称默认为其产出的第一个物品的名称。</li></ul></li>
<li>其他物品逻辑：
<ul><li>现在加载存档时会自动添加本应解锁但丢失的配方。</li>
<li>现在 <samp>Data/Bundles</samp> 稍后加载，因此内容包可以安全地编辑它。</li>
<li>现在具有 <samp>fridge: true</samp> 的箱子被视为迷您冰箱，可用于烹饪。</li>
<li>礼盒现在可以包含多个物品。</li>
<li>修复了如果家具没有前贴图时，家具绘制在坐着的玩家上方的问题。</li>
<li>修复了克林特升级工具时不受递归物品搜索逻辑影响的问题。</li>
<li>修复了 <samp>tool.getOne()</samp> 未复制工具名称的问题。</li>
<li>修复了如果物品/配方名称不匹配时，烹饪菜单不断创建悬停物品的问题。</li></ul></li></ul>
<h2><span id="地点与天气更新"></span><span class="mw-headline" id=".E5.9C.B0.E7.82.B9.E4.B8.8E.E5.A4.A9.E6.B0.94.E6.9B.B4.E6.96.B0">地点与天气更新</span></h2>
<h3><span id="自定义地点"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E7.82.B9">自定义地点</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E7%82%B9%E6%95%B0%E6%8D%AE" title="模组:地点数据">模组:地点数据</a>。此小节主要用于叙述更新内容。</div>
<p>现在可以通过编辑 <samp>Data/Locations</samp> 素材来添加/编辑地点。这使得地点中的几乎所有内容都可以配置——显示名称、默认传送地块、地点的创建方式、远古斑点/鱼/采集/杂草、音乐等。
</p><p>有关新数据格式的文档，请参见<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E7%82%B9%E6%95%B0%E6%8D%AE" title="模组:地点数据">模组:地点数据</a>。
</p>
<h4><span id="原版上下文"></span><span class="mw-headline" id=".E5.8E.9F.E7.89.88.E4.B8.8A.E4.B8.8B.E6.96.87">原版上下文</span></h4>
<ul><li>游戏之前有两个硬编码的地点上下文：<samp>Default</samp>（用于星露谷地区）和 <samp>Island</samp>（用于<a href="/%E5%A7%9C%E5%B2%9B" title="姜岛">姜岛</a>）。它们已被替换为 <samp>Data/LocationContexts</samp> 中的数据模型。</li>
<li>现在<a href="/%E6%B2%99%E6%BC%A0" title="沙漠">沙漠</a>隶属于全新的 <samp>Desert</samp> 上下文（而不是<samp>Default</samp>）。之前硬编码的沙漠逻辑（如总是晴天）现在只是 <samp>Data/LocationContexts</samp> 中的上下文数据的一部分。</li></ul>
<h4><span id="格式"></span><span class="mw-headline" id=".E6.A0.BC.E5.BC.8F">格式</span></h4>
<p>可以通过编辑新增的 <samp>Data/LocationContexts</samp> 素材文件来创建自定义上下文，以及在地点的 <samp>LocationContext</samp> <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地图属性</a>中设置上下文名称。
</p><p>此素材文件内含一个“字符串 → 数据模型”查询，其中键名与 <samp>Name</samp> 字段一致，值为包含如下字段的数据模型：
</p>
<dl style="margin-left: 2em;">
<dt>所需字段：</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Name</samp>
</td>
<td>此地点上下文的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串ID</a>。
</td></tr></tbody></table>
</dd>

<dt>玩家动作：</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>AllowRainTotem</samp>
</td>
<td>（可选）是否可以在此处使用<a href="/%E9%9B%A8%E6%B0%B4%E5%9B%BE%E8%85%BE" title="雨水图腾">雨水图腾</a>来强制明日降雨。若为 false，则在此处使用雨水图腾会显示“该物品无法在此处使用”消息。
</td></tr>
<tr>
<td><samp>RainTotemAffectsContext</samp>
</td>
<td>（可选）若设置，则在此处使用雨水图腾会改变指定地点上下文的天气。例如，在沙漠中使用雨水图腾会改变星露谷地区的天气。
</td></tr>
<tr>
<td><samp>MaxPassOutCost</samp>
</td>
<td>（可选）玩家在此地点（由于<a href="/%E8%83%BD%E9%87%8F" title="能量">疲劳</a>或在凌晨 2 点）昏倒，可能丢失的最大<a href="/%E9%87%91%E5%B8%81" title="金币">金币</a>数。若忽略或设为 <samp>-1</samp>，则使用与 <samp>Default</samp> 上下文相同的值（默认为 <span style="display: none;">data-sort-value="1000"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />1,000金</span>）。
</td></tr>
<tr>
<td><samp>PassOutMail</samp>
</td>
<td>（可选）玩家在此地点（由于<a href="/%E8%83%BD%E9%87%8F" title="能量">疲劳</a>或在凌晨 2 点）昏倒，可能收到的<a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">信件</a>的ID（假设之前没有收到过）。若多个信件可用，则会随机选取一个（除非指定了 <samp>SkipRandomSelection</samp>）。
<p>此字段为包含如下字段的数据模型所组成的列表：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>此列表项的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串ID</a>。
</td></tr>
<tr>
<td><samp>Mail</samp>
</td>
<td>欲添加的<a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6ID&amp;action=edit&amp;redlink=1" class="new" title="模组:信件ID（页面不存在）">信件 ID</a>。
<p>游戏会按照如下顺序在 <samp>Data/mail</samp> 中寻找存在的信件 ID（如果玩家丢失了<a href="/%E9%87%91%E5%B8%81" title="金币">金币</a>，则 <code title="必需字段 &#39;billed&#39;">&lt;billed&gt;</code> 为 <samp>Billed</samp>，否则为 <samp>NotBilled</samp>；<code title="必需字段 &#39;gender&#39;">&lt;gender&gt;</code> 为 <samp>Female</samp> 或 <samp>Male</samp>）：
</p>
<ul><li><samp><code title="必需字段 &#39;letter id&#39;">&lt;letter id&gt;</code>_<code title="必需字段 &#39;billed&#39;">&lt;billed&gt;</code>_<code title="必需字段 &#39;gender&#39;">&lt;gender&gt;</code></samp></li>
<li><samp><code title="必需字段 &#39;letter id&#39;">&lt;letter id&gt;</code>_<code title="必需字段 &#39;billed&#39;">&lt;billed&gt;</code></samp></li>
<li><samp><code title="必需字段 &#39;letter id&#39;">&lt;letter id&gt;</code></samp></li></ul>
<p>若在 <samp>Data/mail</samp> 没有匹配项，则游戏会发送 <samp>passedOut2</samp>。
</p><p>若信件 ID 以 <samp>passedOut</samp> 开头，则信件文本中的 <samp>{0}</samp> 会被自动替换为丢失的金币数量，且不会出现在<a href="/%E6%94%B6%E9%9B%86%E5%93%81" title="收集品">收集品</a>页面中。
</p>
</td></tr>
<tr>
<td><samp>MaxPassOutCost</samp>
</td>
<td>（可选）可能丢失的最大<a href="/%E9%87%91%E5%B8%81" title="金币">金币</a>数量。此字段会被用于该地点上下文的 <samp>MaxPassOutCost</samp> 之后（也就是，基于 <samp>MaxPassOutCost</samp> 计算得到的随机值会被该字段截断）。默认为无限。
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示此列表项是否可用。默认为总是可用。
</td></tr>
<tr>
<td><samp>SkipRandomSelection</samp>
</td>
<td>（可选）若为 true，则在具备 <samp>Condition</samp> 条件时发送此信件，而非发送随机信件。默认为 true。
<p>If true, send this mail if the <samp>Condition</samp> matches instead of choosing a random valid mail. Default false.
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>PassOutLocations</samp>
</td>
<td>（可选）当玩家（由于<a href="/%E8%83%BD%E9%87%8F" title="能量">疲惫</a>或在凌晨 2 时）在此地点晕倒<b>且</b>在另一个地点上下文处开启新的一天，此字段用于指示玩家醒来的地点。（若玩家在同一个上下文晕倒和开启下一天，则会在其睡觉的最后一张床上醒来）。
<p>若选中的地面不包含床且不具有 <a href="#New_map_properties"><samp>AllowWakeUpWithoutBed</samp> 地图属性</a>，则玩家会在农舍中醒来。
</p><p>此字段为包含如下字段的数据模型所组成的列表：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>此列表项的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串 ID</a>。
</td></tr>
<tr>
<td><samp>Location</samp>
</td>
<td>内部地点名称。
</td></tr>
<tr>
<td><samp>Position</samp>
</td>
<td>此地点的<b>默认</b>地块坐标，为一个具有 <samp>X</samp> 和 <samp>Y</samp> 字段的数据模型。若此地点具有床，则玩家会被放置在第一个找到的床。
<p>The <i>default</i> tile position within the location, specified as an object with <samp>X</samp> and <samp>Y</samp> fields. If the location has any bed furniture, they'll be placed in the first bed found instead.
</p>
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示词列表项是否可用。默认为总是可用。
</td></tr></tbody></table>
<p>若没有指定地点或没有匹配地点，则玩家会在家中的床上醒来。
</p>
</td></tr>
<tr>
<td><samp>ReviveLocations</samp>
</td>
<td>（可选）若玩家在战斗中被打晕，则此字段指示其苏醒位置。
<p>此字段为包含如下字段的数据模型所组成的列表：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>此列表项的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2_ID" title="模组:公共数据字段">唯一字符串 ID</a>。
</td></tr>
<tr>
<td><samp>Location</samp>
</td>
<td>内部地点名称。
</td></tr>
<tr>
<td><samp>Position</samp>
</td>
<td>地点内的地块坐标，为一个具有 <samp>X</samp> 和 <samp>Y</samp> 字段的数据模型。
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示此列表项是否可用。默认为总是可用。
</td></tr></tbody></table>
<p>若选中的地点有一个键名为 <samp>PlayerKilled</samp>  的标准<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:事件数据">事件</a>（键名中不可包含 <samp>/</samp> 或事件前提），则此事件会在玩家醒过来时播放，且游戏会使用遗失物品或<a href="/%E9%87%91%E5%B8%81" title="金币">金币</a>逻辑。游戏不会追踪此事件，因此玩家每次苏醒时都会播放此事件。如果没有事件，则玩家醒来时不会丢失物品或金币。
</p><p>若没有指定地点或没有匹配地点，则玩家会在<a href="/%E5%93%88%E7%BB%B4%E7%9A%84%E8%AF%8A%E6%89%80" title="哈维的诊所">哈维的诊所</a>醒来。
</p>
</td></tr></tbody></table>
</dd>

<dt>季节：</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>SeasonOverride</samp>
</td>
<td>（可选）此地点上下文终年保持的季节（取 <samp>spring</samp>、<samp>summer</samp>、<samp>fall</samp>、<samp>winter</samp> 之一）。例如，将此字段设为 <samp>summer</samp> 会使得此地点上下文终年为夏季，无论日历上的季节为何。若忽略，则使用日历季节。
</td></tr></tbody></table>
</dd>

<dt>天气：</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>WeatherConditions</samp>
</td>
<td>（可选）此地点上下文的各地点的天气逻辑（若指定了 <samp>CopyWeatherFromLocation</samp>，则忽略此字段）。默认为总是晴天。若设定了多组数据，则使用第一个匹配的。
<p>此字段为包含如下字段的数据模型所组成的列表：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>此列表项的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串 ID</a>。
</td></tr>
<tr>
<td><samp>Weather</samp>
</td>
<td>欲设置的<a href="#Custom_weather">天气 ID</a>。
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示此列表项是否可用。默认为总是可用。
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>CopyWeatherFromLocation</samp>
</td>
<td>（可选）用于拷贝其他地点的天气，此字段应当为欲拷贝地点的 <samp>Name</samp>（即，唯一 ID）。
</td></tr></tbody></table>
<p>若此地点上下文中有某个<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E8.A2.AB.E5.8A.A8.E8.8A.82.E6.97.A5">被动节日</a>正处于活跃状态，则无论天气字段为何，游戏中都会是晴天。
</p>
</dd>

<dt>音乐：</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>DefaultMusic</samp>
</td>
<td>（可选）玩家进入该地点时播放的<a href="/%E6%A8%A1%E7%BB%84:%E9%9F%B3%E9%A2%91" title="模组:音频">音乐 ID</a>。此字段可以被 <samp>Music</samp> 地图属性覆盖。虽然此字段名为“默认”音乐，但实际上要比下文提到的季节音乐优先级高。若忽略，则此字段无效。
</td></tr>
<tr>
<td><samp>DefaultMusicCondition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示是否应当使用 <samp>DefaultMusic</samp>（如果没有播放更具体的音乐）。默认为总是使用。
</td></tr>
<tr>
<td><samp>DefaultMusicDelayOneScreen</samp>
</td>
<td>（可选）当玩家切换地点，音乐改变时，是否静音或播放环境音（若有），直到下一次传送（类似于星露谷地区）。默认为 false。
</td></tr>
<tr>
<td><samp>Music</samp>
</td>
<td>（可选）该地点上下文上午播放的<a href="/%E6%A8%A1%E7%BB%84:%E9%9F%B3%E9%A2%91" title="模组:音频">声音提示 ID</a> 的列表。若为雨天，或地图具有  <samp>Music</samp> 地图属性，或该地点上下文 <samp>DefaultMusic</samp> 字段非空，则不使用此字段。若指定多个值，则会按列表顺序每天选取一首播放。
<p>此字段为包含如下字段的数据模型所组成的列表：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>（可选）当前列表项的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串 ID</a>。默认为 <samp>Track</samp> 字段的取值。
</td></tr>
<tr>
<td><samp>Track</samp>
</td>
<td>欲播放的<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E9.9F.B3.E9.A2.91">音轨 ID</a>。
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示此列表项是否可用。默认为总是可用。
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>DayAmbience</samp><br /><samp>NightAmbience</samp>
</td>
<td>（可选）没有正在播放的音乐时，背景音效的<a href="/%E6%A8%A1%E7%BB%84:%E9%9F%B3%E9%A2%91" title="模组:音频">声音提示 ID</a>，这两个字段分别用于<a href="/%E6%B8%B8%E6%88%8F%E5%86%85%E6%97%B6%E9%97%B4" title="游戏内时间">白天和晚上</a>。两个字段都默认为空。
</td></tr>
<tr>
<td><samp>PlayRandomAmbientSounds</samp>
</td>
<td>（可选）是否基于季节和事件等因素播放随机室外背景音效（例如鸟叫、蟋蟀叫、雨天的嚎叫）。这与 <samp>DayAmbience</samp> 和 <samp>NightAmbience</samp> 字段无关。默认为 true。
</td></tr></tbody></table>
</dd>

<dt>高级：</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>此列表项的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5" title="模组:公共数据字段">自定义字段</a>。
</td></tr></tbody></table>
</dd>
</dl>
<h3><span id="自定义垃圾桶"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.9E.83.E5.9C.BE.E6.A1.B6">自定义垃圾桶</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%9E%83%E5%9C%BE%E6%A1%B6" title="模组:垃圾桶">模组:垃圾桶</a>。此小节主要用于叙述更新内容。</div>
<h4><span id="数据格式"></span><span class="mw-headline" id=".E6.95.B0.E6.8D.AE.E6.A0.BC.E5.BC.8F">数据格式</span></h4>
<p>您现在可以通过编辑新增的 <samp>Data/GarbageCans</samp> 素材来添加或编辑<a href="/%E5%9E%83%E5%9C%BE%E6%A1%B6" title="垃圾桶">垃圾桶</a>（见下面的例子）。
</p><p>此素材文件内含一个包含如下字段的数据模型：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>DefaultBaseChance</samp>
</td>
<td>翻垃圾桶可能找到物品的概率，介于 0（从不）到 1（总是）之间的数值。若此未通过此随机检查，则仅能生成 <samp>IgnoreBaseChance</samp> 为 true 的物品。此字段可以被每个垃圾桶独立的 <samp>BaseChance</samp> 字段覆盖。默认为 0.2 。
</td></tr>
<tr>
<td><samp>BeforeAll</samp><br /><samp>AfterAll</samp>
</td>
<td>需要前置（<samp>BeforeAll</samp>）或后置（<samp>AfterAll</samp>）到所有垃圾桶的 <samp>GarbageCans</samp> → <samp>Items</samp> 字段的物品。此字段中指定的物品和垃圾桶相应字段中的物品工作方式相同（即，服从相应垃圾桶的基础概率）。
</td></tr>
<tr>
<td><samp>GarbageCans</samp>
</td>
<td>每个垃圾桶独立的数据。此字段为一个包含如下字段的“字符串 → 数据模型”搜索：
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td>键名
</td>
<td>此垃圾桶的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串ID</a>。
</td></tr>
<tr>
<td><samp>BaseChance</samp>
</td>
<td>（可选）若设置，则覆盖 <samp>DefaultBaseChance</samp> 根字段。默认为 <samp>DefaultBaseChance</samp>。
</td></tr>
<tr>
<td><samp>Items</samp>
</td>
<td>（可选）玩家翻垃圾桶时试图生成的物品。按照 <samp>BeforeAll</samp> + <samp>Items</samp> + <samp>AfterAll</samp> 的顺序，匹配成功的第一个物品会被生成，后面的物品会被忽略。默认为空。
<p>此字段为包含如下字段的数据模型所组成的列表：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td>通用字段
</td>
<td>参见<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2#.E7.89.A9.E5.93.81.E7.94.9F.E6.88.90.E5.AD.97.E6.AE.B5" title="模组:物品查询">物品生成字段</a>以了解受支持的通用字段。
<p>若设为返回多个物品的<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2" title="模组:物品查询">物品查询</a>，则会随机选取一个。
</p>
</td></tr>
<tr>
<td><samp>IgnoreBaseChance</samp>
</td>
<td>（可选）此物品在 <samp>BaseChance</samp> 随机检查未通过的情况下是否仍能生成。默认为 false。
</td></tr>
<tr>
<td><samp>IsMegaSuccess</samp>
</td>
<td>（可选）是否将此物品视为“巨大成功”。若是，则选中此物品时会播放特别的 <samp>crit</samp> 音效，并播放稍大的动画。默认为 false。
</td></tr>
<tr>
<td><samp>IsDoubleMegaSuccess</samp>
</td>
<td>（可选）是否将此物品视为“双重巨大成功”。若是，则选中此物品会播放爆炸音效和戏剧化的动画。默认为 false。
</td></tr>
<tr>
<td><samp>AddToInventoryDirectly</samp>
</td>
<td>（可选）是否直接将此物品添加到背包，若背包无空间，则打开一个菜单。若为 false，则此物品会被直接扔在垃圾桶旁边的地上。默认为 false。
</td></tr>
<tr>
<td><samp>CreateMultipleDebris</samp>
</td>
<td>（可选）是否将此物品分为多个物品组，每组堆叠数量为 1。若启用  <samp>AddToInventoryDirectly</samp> 则此字段无效。默认为 false。
</td></tr></tbody></table>
</td></tr></tbody></table>
<p>若垃圾桶在 <samp>GarbageCans</samp> 下没有对应条目，则仅使用 <samp>BeforeAll</samp>+<samp>AfterAll</samp> 字段。
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>此条目的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5" title="模组:公共数据字段">自定义字段</a>。
</td></tr></tbody></table>
<h4><span id="新建垃圾桶"></span><span class="mw-headline" id=".E6.96.B0.E5.BB.BA.E5.9E.83.E5.9C.BE.E6.A1.B6">新建垃圾桶</span></h4>
<p>您可以仅使用<a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a>或<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Content" title="模组:制作指南/APIs/Content">SMAPI 的内容接口</a>来新建垃圾桶。例如，下面的内容包添加了一个 ID 为 <samp>Example.ModId_Carpenter</samp> 的垃圾桶：
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.5.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/GarbageCans&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TargetField&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;GarbageCans&quot;</span> <span class="p">],</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;{{ModId}}_Carpenter&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Items&quot;</span><span class="o">:</span> <span class="p">[</span>
                        <span class="c1">// 25% chance of pufferfish</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;ID&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ModId}}_Pufferfish&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;RANDOM 0.25&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(O)128&quot;</span>
                        <span class="p">},</span>

                        <span class="c1">// else guaranteed random House Plant item</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;ID&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ModId}}_RandomHousePlant&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ItemID&quot;</span><span class="o">:</span> <span class="s2">&quot;RANDOM_ITEMS (F) 1376 1390&quot;</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>然后，您可以在某个地块上添加 <code>Action: Garbage Example.ModId_Carpenter</code> <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地块属性</a>来将其标记为使用此数据的垃圾桶。
</p>
<h4><span id="编辑已有垃圾桶示例"></span><span class="mw-headline" id=".E7.BC.96.E8.BE.91.E5.B7.B2.E6.9C.89.E5.9E.83.E5.9C.BE.E6.A1.B6.E7.A4.BA.E4.BE.8B">编辑已有垃圾桶示例</span></h4>
<p>您可以仅使用<a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a>或<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Content" title="模组:制作指南/APIs/Content">SMAPI 的内容接口</a>来编辑已有的垃圾桶。例如，下面的内容包向餐吧的垃圾桶添加了河豚，并将其前置于当日菜肴。
</p><p>注意此示例使用 <samp>TargetField</samp> 来“移步至”餐吧的物品列表，然后操作作为列表项的物品。指定不在列表中的 ID 会添加一个新列表项，就像编辑常规列表素材一样。
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.5.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/GarbageCans&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TargetField&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;GarbageCans&quot;</span><span class="p">,</span> <span class="s2">&quot;Saloon&quot;</span><span class="p">,</span> <span class="s2">&quot;Items&quot;</span> <span class="p">],</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="c1">// 25% chance of pufferfish</span>
                
                <span class="s2">&quot;{{ModId}}_Pufferfish&quot;</span><span class="o">:</span><span class="p">{</span>
                    <span class="s2">&quot;ID&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ModId}}_Pufferfish&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;RANDOM 0.25&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(O)128&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;MoveEntries&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s2">&quot;ID&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ModId}}_Pufferfish&quot;</span><span class="p">,</span> <span class="s2">&quot;BeforeId&quot;</span><span class="o">:</span> <span class="s2">&quot;Base_DishOfTheDay&quot;</span> <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h4><span id="对于C#模组的更改"></span><span class="mw-headline" id=".E5.AF.B9.E4.BA.8EC.23.E6.A8.A1.E7.BB.84.E7.9A.84.E6.9B.B4.E6.94.B9">对于C#模组的更改</span></h4>
<p>之前垃圾桶被 <samp>Town.garbageChecked</samp> 追踪，后者是一个布尔字段的数组。此方式在星露谷物语 1.6 中无法工作，因为我们将不再局限于鹈鹕镇地图的垃圾桶。此字段已经被替换为 <samp>Game1.netWorldState.Value.CheckedGarbage</samp>，它是一个垃圾桶 ID 的哈希集合。
</p><p>若希望迁移代码：
</p>
<table class="wikitable">

<tbody><tr>
<th>动作
</th>
<th>1.5.6
</th>
<th>1.6
</th></tr>
<tr>
<td>检查垃圾桶是否被翻过
</td>
<td><div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="nx">Town</span> <span class="nx">town</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Town</span><span class="p">)</span><span class="nx">Game1</span><span class="p">.</span><span class="nx">getLocationFromName</span><span class="p">(</span><span class="s2">&quot;Town&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">town</span><span class="p">.</span><span class="nx">garbageChecked</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
   <span class="p">...</span>
</pre></div>
</td>
<td><div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">Game1</span><span class="p">.</span><span class="nx">netWorldState</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nx">CheckedGarbage</span><span class="p">.</span><span class="nx">Contains</span><span class="p">(</span><span class="s2">&quot;Saloon&quot;</span><span class="p">))</span>
   <span class="p">...</span>
</pre></div>
</td></tr>
<tr>
<td>标记一个垃圾桶为可翻找
</td>
<td><div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="nx">Town</span> <span class="nx">town</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Town</span><span class="p">)</span><span class="nx">Game1</span><span class="p">.</span><span class="nx">getLocationFromName</span><span class="p">(</span><span class="s2">&quot;Town&quot;</span><span class="p">);</span>
<span class="nx">town</span><span class="p">.</span><span class="nx">garbageChecked</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></div>
</td>
<td><div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="nx">Game1</span><span class="p">.</span><span class="nx">netWorldState</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nx">CheckedGarbage</span><span class="p">.</span><span class="nx">Add</span><span class="p">(</span><span class="s2">&quot;Saloon&quot;</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
<p>下表用于迁移旧版垃圾桶 ID：
</p>
<table class="wikitable">

<tbody><tr>
<th>位置
</th>
<th>ID 1.5.6
</th>
<th>ID 1.6
</th></tr>
<tr>
<td><a href="/%E4%B9%94%E8%BF%AA" title="乔迪">乔迪</a>和<a href="/%E8%82%AF%E7%89%B9" title="肯特">肯特</a>房子边上
</td>
<td><code>0</code>
</td>
<td><code>JodiAndKent</code>
</td></tr>
<tr>
<td><a href="/%E6%B5%B7%E8%8E%89" title="海莉">海莉</a>和<a href="/%E8%89%BE%E7%B1%B3%E4%B8%BD" title="艾米丽">艾米丽</a>房子边上
</td>
<td><code>1</code>
</td>
<td><code>EmilyAndHaley</code>
</td></tr>
<tr>
<td><a href="/%E5%88%98%E6%98%93%E6%96%AF" title="刘易斯">刘易斯</a>房子边上
</td>
<td><code>2</code>
</td>
<td><code>Mayor</code>
</td></tr>
<tr>
<td><a href="/%E5%8D%9A%E7%89%A9%E9%A6%86" title="博物馆">博物馆</a>边上
</td>
<td><code>3</code>
</td>
<td><code>Museum</code>
</td></tr>
<tr>
<td><a href="/%E5%85%8B%E6%9E%97%E7%89%B9" title="克林特">克林特</a>的<a href="/%E9%93%81%E5%8C%A0%E9%93%BA" title="铁匠铺">铁匠铺</a>边上
</td>
<td><code>4</code>
</td>
<td><code>Blacksmith</code>
</td></tr>
<tr>
<td><a href="/%E6%98%9F%E4%B9%8B%E6%9E%9C%E5%AE%9E%E9%A4%90%E5%90%A7" title="星之果实餐吧">星之果实餐吧</a>边上
</td>
<td><code>5</code>
</td>
<td><code>Saloon</code>
</td></tr>
<tr>
<td><a href="/%E8%89%BE%E8%8A%99%E7%90%B3" title="艾芙琳">艾芙琳</a>和<a href="/%E4%B9%94%E6%B2%BB" title="乔治">乔治</a>房子边上
</td>
<td><code>6</code>
</td>
<td><code>Evelyn</code>
</td></tr>
<tr>
<td><a href="/Joja%E8%B6%85%E5%B8%82" title="Joja超市">Joja超市</a>边上
</td>
<td><code>7</code>
</td>
<td><code>JojaMart</code>
</td></tr></tbody></table>
<h3><span id="自定义地图Action"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E5.9B.BEAction">自定义地图Action</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE#.E8.87.AA.E5.AE.9A.E4.B9.89Action" title="模组:地图">模组:地图#自定义Action</a>。此小节主要用于叙述更新内容。</div>
<p>C#模组现在可以通过调用 <samp>GameLocation.RegisterTileAction</samp> 和 <samp>RegisterTouchAction</samp> 来处理自定义的 <samp>Action</samp> 和 <samp>TouchAction</samp> <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地图属性</a>，并传递一个回调函数，该函数接收地点、地图属性参数、激活它的玩家和地块位置。
</p><p>例如，假设您需要一扇上锁的门，需要自定义钥匙物品才能打开。为此，您可以添加一个常规的 <code>TouchAction Example.ModId_UnlockGate</code> 地图属性（可直接在地图文件中添加，或使用 <a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a> 的 <samp>EditMap</samp>，或使用<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Content" title="模组:制作指南/APIs/Content">内容 API</a>）。然后您可以直接在 C# 模组中处理逻辑。有关示例，请参见更新的文档。
</p><p>再例如，假设您希望玩家按下操作键时解锁门。为此，您可以添加一个常规的 <code>Action Example.ModId_UnlockGate</code> 地图属性（可直接在地图文件中添加，或使用 <a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a> 的 <samp>EditMap</samp>，或使用<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Content" title="模组:制作指南/APIs/Content">内容 API</a>）。然后您可以直接在 C# 模组中处理逻辑。有关示例，请参见更新的文档。
</p>
<h3><span id="自定义地图图层"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E5.9B.BE.E5.9B.BE.E5.B1.82">自定义地图图层</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">模组:地图</a>。此小节主要用于叙述更新内容。</div>
<p>您现在可以在原版图层名称（即<samp>Back</samp>、<samp>Buildings</samp>、<samp>Front</samp>或<samp>AlwaysFront</samp>）后添加偏移来添加任意数量的<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地图图层</a>。例如，<samp>Back-1</samp> 将绘制在 <samp>Back</samp> 下层，而 <samp>Back2</samp> 将绘制在 <samp>Back</samp> 上层。您可以递增数字以添加更多图层。
</p><p>这仅影响图层渲染。地块属性仍必须设置在原始图层上。
</p>
<h3><span id="自定义矿车"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E7.9F.BF.E8.BD.A6">自定义矿车</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E7%9F%BF%E8%BD%A6" title="模组:矿车">模组:矿车</a>。此小节主要用于叙述更新内容。</div>
<p>您现在可以通过编辑 <samp>Data\Minecarts</samp> 数据素材来扩展<a href="/%E7%9F%BF%E8%BD%A6" title="矿车">矿车</a>。
</p><p>此素材文件内含一个“字符串 → 模组”查询，其中：
</p>
<ul><li>键名为矿车网络的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串ID</a>。当您与矿车互动时，会以列表显示矿车目的地。</li>
<li>值为包含如下字段的数据模型：</li></ul>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Destinations</samp>
</td>
<td>此矿车网络的目的地。此字段为包含如下字段的数据模型所组成的列表：
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>此网络中目的地的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串 ID</a>。
</td></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>，用于在矿车菜单中显示目的地名称。您可以使用 <samp>LocationName</samp> 标记来代表地点的显示名称（例如 <code>[LocationName Desert]</code> 代表<a href="/%E6%B2%99%E6%BC%A0" title="沙漠">沙漠</a>的显示名称）。
</td></tr>
<tr>
<td><samp>TargetLocation</samp>
</td>
<td>目的地的<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E7%82%B9%E6%95%B0%E6%8D%AE" title="模组:地点数据">地点 ID</a>。
</td></tr>
<tr>
<td><samp>TargetTile</samp>
</td>
<td>地点内目的地的地块坐标，为一个具有 <samp>X</samp> 和 <samp>Y</samp> 字段的数据模型。
</td></tr>
<tr>
<td><samp>TargetDirection</samp>
</td>
<td>玩家到达后面部朝向（取 <samp>down</samp>、<samp>left</samp>、<samp>right</samp>、<samp>up</samp> 之一）。
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示该矿车是否可用。默认为总是可用。
</td></tr>
<tr>
<td><samp>Price</samp>
</td>
<td>（可选）到达此目的地所需花费的金币。默认为空。
</td></tr>
<tr>
<td><samp>BuyTicketMessage</samp>
</td>
<td>（可选）若此目的地需要付费，则此字段为用于显示付费确认消息的<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。若存在 <code>{0}</code>，则其会被替换为价格。默认为此网络的 <samp>BuyTicketMessage</samp> 字段。
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>（可选）此目的地的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5" title="模组:公共数据字段">自定义字段</a>。
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>UnlockCondition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，用于指示此矿车网络是否解锁。默认为总是解锁。
</td></tr>
<tr>
<td><samp>LockedMessage</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>，当矿车 <samp>UnlockCondition</samp> 字段为 false 时与之互动就会显示此消息。默认为 "<i>Out of order</i>" 的翻译。
</td></tr>
<tr>
<td><samp>ChooseDestinationMessage</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>，用于提示用户选择目的地。默认为 "<i>Choose destination:</i>" 的翻译。
</td></tr>
<tr>
<td><samp>BuyTicketMessage</samp>
</td>
<td>（可选）若目的地需要付费，则此字段为用于显示付费确认消息的<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。若存在 <code>{0}</code>，则其会被替换为价格。默认为 "<i>Buy a ticket for {0}g?</i>" 的翻译。
</td></tr></tbody></table>
<h4><span id="打开矿车目录"></span><span class="mw-headline" id=".E6.89.93.E5.BC.80.E7.9F.BF.E8.BD.A6.E7.9B.AE.E5.BD.95">打开矿车目录</span></h4>
<p>您可以使用 <samp>Action: MinecartTransport <code title="可选字段 &#39;network ID&#39;">[network ID]</code> <code title="可选字段 &#39;exclude destination ID&#39;">[exclude destination ID]</code></samp> <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地图属性</a>来打开矿车目录。当玩家与此地块互动时，就会打开 <code title="可选字段 &#39;network ID&#39;">[network ID]</code> 矿车网络（默认为 <samp>Default</samp>）的菜单。若指定了 <code title="可选字段 &#39;exclude destination ID&#39;">[exclude destination ID]</code>，则矿车菜单会隐藏对应的目的地（常用于隐藏当前地点）。例如，<a href="/%E5%B7%B4%E5%A3%AB%E7%AB%99" title="巴士站">巴士站</a>矿车使用 <code>Action: MinecartTransport Default Bus</code>。
</p><p>对于 C# 模组，您可以调用 <code>Game1.currentLocation.ShowMineCartMenu(networkId, excludeDestinationId)</code>，工作方式几乎相同（除了需要 <samp>networkId</samp>）。
</p>
<h4><span id="示例"></span><span class="mw-headline" id=".E7.A4.BA.E4.BE.8B">示例</span></h4>
<p>下面的 <a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a> 内容包添加了<a href="/%E9%93%81%E8%B7%AF" title="铁路">铁路</a>作为矿车目的地，然后添加了一个装饰性矿车。在<a href="/%E9%9A%8F%E6%9C%BA%E4%BA%8B%E4%BB%B6" title="随机事件">地震事件</a>发生后解锁此矿车。
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.5.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// add minecart destination</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/Minecarts&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TargetField&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Default&quot;</span><span class="p">,</span> <span class="s2">&quot;Destinations&quot;</span> <span class="p">],</span> <span class="c1">// for the &quot;Default&quot; network, edit the &quot;Destinations&quot; field</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Railroad&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Railroad&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;DisplayName&quot;</span><span class="o">:</span> <span class="s2">&quot;[LocationName Railroad]&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;LOCATION_ACCESSIBLE Railroad&quot;</span><span class="p">,</span>

                    <span class="s2">&quot;TargetLocation&quot;</span><span class="o">:</span> <span class="s2">&quot;Railroad&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;TargetTile&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;X&quot;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="o">:</span> <span class="mi">39</span> <span class="p">},</span>
                    <span class="s2">&quot;TargetDirection&quot;</span><span class="o">:</span> <span class="s2">&quot;down&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// add decorative minecart</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditMap&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Maps/Railroad&quot;</span><span class="p">,</span>
            <span class="s2">&quot;FromFile&quot;</span><span class="o">:</span> <span class="s2">&quot;assets/Custom_Railroad_Minecart.tmx&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ToArea&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;X&quot;</span><span class="o">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span> <span class="s2">&quot;Width&quot;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;Height&quot;</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3><span id="自定义被动节日"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E8.A2.AB.E5.8A.A8.E8.8A.82.E6.97.A5">自定义被动节日</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84:%E8%8A%82%E6%97%A5%E6%95%B0%E6%8D%AE" title="模组:节日数据">模组:节日数据</a>或新文档页面。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<p>您现在可以通过编辑 <samp>Data/PassiveFestivals</samp> 数据素材来添加或修改被动节日。
</p><p>（所谓<b>被动节日</b>就是<a href="/%E5%A4%9C%E5%B8%82" title="夜市">夜市</a>这样的节日，其会在特定时期取代一个地点，在此期间玩家可以随时出入节日地点，且时间正常流动。）
</p>
<h4><span id="数据格式_2"></span><span class="mw-headline" id=".E6.95.B0.E6.8D.AE.E6.A0.BC.E5.BC.8F_2">数据格式</span></h4>
<p><samp>Data/PassiveFestivals</samp> 素材文件内含一个“字符串 → 数据模型”查询，其中：
</p>
<ul><li>键名为节日的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串ID</a>。</li>
<li>值为包含如下字段的数据模型：</li></ul>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>，用于在<a href="/%E6%97%A5%E5%8E%86" title="日历">日历</a>上显示节日名称。
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td>节日启动的<a href="/%E5%AD%A3%E8%8A%82" title="季节">季节</a>。
</td></tr>
<tr>
<td><samp>StartDay</samp><br /><samp>EndDay</samp>
</td>
<td>节日在当月的起止日期。
</td></tr>
<tr>
<td><samp>StartTime</samp>
</td>
<td>节日每天的起始时间
</td></tr>
<tr>
<td><samp>StartMessage</samp>
</td>
<td>一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>，用于在节日开始时显示一则<a href="https://en.wikipedia.org/wiki/Pop-up_notification" class="extiw" title="wikipedia:Pop-up notification">弹出式通知</a>。
</td></tr>
<tr>
<td><samp>MapReplacements</samp>
</td>
<td>节日取代的地点。虽然此字段名为替换“地图”，实际上替换的却是<b>地点</b>（例如，可以使用 <a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a> 向 <samp>CustomLocations</samp> 添加）。
<p>此字段为一个“字符串 → 字符串”查询，其中键名为欲替代的地点，值为新地点。键和值都应当使用地点内部名称，可使用 <a rel="nofollow" class="external text" href="https://www.nexusmods.com/stardewvalley/mods/679">Debug Mode</a> 模组查看地点内部名称。下面的示例会在<a href="/%E5%A4%9C%E5%B8%82" title="夜市">夜市</a>期间将 <samp>Beach</samp> 替换为 <samp>BeachNightMarket</samp> 地点：
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;MapReplacements&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;Beach&quot;</span><span class="o">:</span> <span class="s2">&quot;BeachNightMarket&quot;</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示此节日是否可用（受其他字段限制，如 <samp>StartDay</samp> 和 <samp>EndDay</samp>）。默认为总是可用。
</td></tr>
<tr>
<td><samp>ShowOnCalendar</samp>
</td>
<td>（可选）节日是否会出现在<a href="/%E6%97%A5%E5%8E%86" title="日历">日历</a>上，会使用与<a href="/%E6%97%A5%E5%8E%86#.E5.86.AC.E5.AD.A3" title="日历">夜市</a>相同的铱星图标。默认为 true。
</td></tr>
<tr>
<td><samp>DailySetupMethod</samp><br /><samp>CleanupMethod</samp>
</td>
<td>（可选）一个 C# 方法，可以在节日每天开始时（<samp>DailySetupMethod</samp>）和/或节日最后一天结束后过夜时（<samp>CleanupMethod</samp>）执行自定义逻辑。
<p>此字段格式必须为 <samp><code title="必需字段 &#39;full type name&#39;">&lt;full type name&gt;</code>: <code title="必需字段 &#39;method name&#39;">&lt;method name&gt;</code></samp>（例如 <samp>ExampleMod.Namespace.Type, ExampleMod: MethodName</samp>）。方法必须为静态方法、零参数、空返回值。
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>此节日的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串 ID</a>。
</td></tr></tbody></table>
<h4><span id="NPC日程"></span><span class="mw-headline" id="NPC.E6.97.A5.E7.A8.8B">NPC日程</span></h4>
<p>当一个被动节日启动时，NPC 会按如下顺序检查<a href="/%E6%A8%A1%E7%BB%84:%E8%A1%8C%E7%A8%8B%E6%95%B0%E6%8D%AE" class="mw-redirect" title="模组:行程数据">日程键</a>：
</p>
<table class="wikitable">

<tbody><tr>
<th>语法
</th>
<th>概述
</th></tr>
<tr>
<td><samp><code title="必需字段 &#39;festival ID&#39;">&lt;festival ID&gt;</code>_<code title="必需字段 &#39;festival day&#39;">&lt;festival day&gt;</code></samp>
</td>
<td>应用于指定日期。参数 <code title="必需字段 &#39;festival day&#39;">&lt;festival day&gt;</code> 时相对的，因此 <samp>1</samp> 对应于节日的 <samp>StartDay</samp>。<br /><small>示例： <samp>NightMarket_3</samp> 或 <samp>marriage_NightMarket_3</samp></small>
</td></tr>
<tr>
<td><samp><code title="必需字段 &#39;festival ID&#39;">&lt;festival ID&gt;</code></samp>
</td>
<td>若没有具体日期的条目，则应用此条目。<br /><small>示例：<samp>NightMarket</samp> 或 <samp>marriage_NightMarket</samp></small>
</td></tr></tbody></table>
<p>若 NPC 已婚，则会向日程键添加一个 <samp>marriage_</samp> 前缀（例如 <samp>marriage_<code title="必需字段 &#39;festival ID&#39;">&lt;festival ID&gt;</code>_<code title="必需字段 &#39;festival day&#39;">&lt;festival day&gt;</code></samp>），并忽略无此前缀的键。
</p>
<h3><span id="自定义天气"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.A4.A9.E6.B0.94">自定义天气</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%A4%A9%E6%B0%94%E6%95%B0%E6%8D%AE" title="模组:天气数据">模组:天气数据</a>。此小节主要用于叙述更新内容。</div>
<p>现在您可以通过编辑 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E7.82.B9.E4.B8.8A.E4.B8.8B.E6.96.87">地点上下文数据</a> 来更改天气算法，也可以（使用 C# 模组）自定义天气。
</p><p><samp>Game1.weather</samp> 和 <samp>Game1.weatherForTomorrow</samp> 等字段现在都是字符串型的，且可以支持自定义模组天气 ID。原版天气的变化对于 Content Patcher 内容包并无影响，因为新的天气 ID 能够自动匹配 Content Patcher 使用的旧版天气 ID（例如 <samp>Sun</samp>、<samp>Rain</samp>、<samp>Snow</samp>、<samp>Storm</samp> 和 <samp>Wind</samp>）。C# 模组也可以使用 <samp>Festival</samp> 天气，而 Content Patcher 只能对此使用 <samp>Sun</samp>。<samp>Game1.weather_sunny</samp> 等常量现在有了新的字符串值（<samp>Game1.legacy_weather_sunny</samp> 等常量用于旧版数值）。
</p><p>游戏本体会将无效天气视作晴天。C# 模组可以通过 <samp>UpdateTicked</samp> 等 <a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Events" title="模组:制作指南/APIs/Events">正常的 SMAPI 时间</a>来实现自定义天气效果，也可通过<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Harmony" title="模组:制作指南/APIs/Harmony">修改</a> <samp>Game1.ApplyWeatherForNewDay</samp> 或 <samp>Game1.populateDebrisWeatherArray</samp> 等方法来达成目的。
</p>
<h3><span id="自定义世界地图"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E4.B8.96.E7.95.8C.E5.9C.B0.E5.9B.BE">自定义世界地图</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E4%B8%96%E7%95%8C%E5%9C%B0%E5%9B%BE" title="模组:世界地图">模组:世界地图</a>。此小节主要用于叙述更新内容。</div>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a href="/File:Modding_map_area.png" class="image"><img alt="" src="https://stardewvalleywiki.com/mediawiki/images/thumb/4/47/Modding_map_area.png/300px-Modding_map_area.png" decoding="async" width="300" height="177" class="thumbimage" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/4/47/Modding_map_area.png/450px-Modding_map_area.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/4/47/Modding_map_area.png/600px-Modding_map_area.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:Modding_map_area.png" class="internal" title="放大"></a></div>默认世界地图。地图对应星露谷地区，其中红框标记的部分是一个地图区域，它具有独立的贴图、提示框/名称、玩家图标定位。</div></div></div>
<p>您现在可以通过编辑 <samp>Data/WorldMap</samp> 素材来更改游戏菜单中显示的世界地图。您可以：
</p>
<ul><li>为某些地点添加自定义地图；</li>
<li>设置覆盖贴图；</li>
<li>添加/编辑提示框；</li>
<li>设置实时玩家定位；</li>
<li>其他。</li></ul>
<p>游戏的默认地图完全由 <samp>Data/WorldMap</samp> 定义，包括显示的文本以及改变地图的条件。
</p>
<h3><span id="新地图属性"></span><span class="mw-headline" id=".E6.96.B0.E5.9C.B0.E5.9B.BE.E5.B1.9E.E6.80.A7">新地图属性</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE#.E5.B7.B2.E7.9F.A5.E5.9C.B0.E5.9B.BE.E5.B1.9E.E6.80.A7" title="模组:地图">模组:地图#已知地图属性</a>。此小节主要用于叙述更新内容。</div>
<p>1.6 新增了一些<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地图属性</a>。
</p>
<h4><span id="建筑建造"></span><span class="mw-headline" id=".E5.BB.BA.E7.AD.91.E5.BB.BA.E9.80.A0">建筑建造</span></h4>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>说明
</th></tr>
<tr>
<td><samp>CanBuildHere T</samp><br />（适用于任何户外位置）
</td>
<td>是否允许在此位置建造建筑。游戏会自动调整以适应（例如，罗宾会让您选择建造位置）。参见<a href="#.E9.9A.8F.E5.A4.84.E5.BB.BA.E9.80.A0">“随处建造”更新内容</a>。
</td></tr>
<tr>
<td><samp>BuildConditions <code title="必需字段 &#39;query&#39;">&lt;query&gt;</code></samp><br />（适用于任何户外位置）
</td>
<td>如果设置了 <samp>CanBuildHere</samp>，则可忽略此字段。此字段是一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，用于指示当前是否允许建造。
</td></tr>
<tr>
<td><samp>LooserBuildRestrictions T</samp><br />（适用于任何户外位置）
</td>
<td>如果设置，则地块无需单独设置 <samp>Buildable T</samp> 或 <samp>Diggable T</samp> 属性。使用该地图属性后，也可指定 <samp>Buildable F</samp> 地块属性来单独禁止在地块上建造。其他限制仍然适用。
</td></tr>
<tr>
<td><samp>ValidBuildRect <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> <code title="必需字段 &#39;width&#39;">&lt;width&gt;</code> <code title="必需字段 &#39;height&#39;">&lt;height&gt;</code></samp><br />（适用于任何户外位置）
</td>
<td>地图内允许放置建筑的地块区域。如果省略，建筑可以放置在地图上的任何开放空间。
</td></tr></tbody></table>
<h4><span id="作物"></span><span class="mw-headline" id=".E4.BD.9C.E7.89.A9">作物</span></h4>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>说明
</th></tr>
<tr>
<td><samp>AllowGiantCrops T</samp>
</td>
<td>如果非空，则<a href="/%E5%86%9C%E4%BD%9C%E7%89%A9#.E5.B7.A8.E5.A4.A7.E4.BD.9C.E7.89.A9" title="农作物">巨大作物</a>可以在此位置生长（需要<a href="/%E6%A8%A1%E7%BB%84:%E5%86%9C%E4%BD%9C%E7%89%A9%E6%95%B0%E6%8D%AE" title="模组:农作物数据">作物数据</a>或 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E7.82.B9.E4.B8.8A.E4.B8.8B.E6.96.87"><samp>PlantableLocations</samp>上下文字段</a> 也允许此处生长巨大作物）。
</td></tr>
<tr>
<td><samp>DirtDecayChance <code title="必需字段 &#39;chance&#39;">&lt;chance&gt;</code></samp>
</td>
<td>每个耕土地块在没有作物的情况下在一夜之间消失的概率，值介于 0（从不）和 1（总是）之间。默认为 0（温室）、0.1（农场）和 1（其他任何地方）。
</td></tr></tbody></table>
<h4><span id="农舍内部"></span><span class="mw-headline" id=".E5.86.9C.E8.88.8D.E5.86.85.E9.83.A8">农舍内部</span></h4>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>说明
</th></tr>
<tr>
<td><samp>FarmHouseStarterGift [<code title="必需字段 &#39;id&#39;">&lt;id&gt;</code> <code title="可选字段 &#39;count&#39;">[count]</code>]+</samp>
</td>
<td>创建存档时，应出现在农舍初始礼盒中的物品。格式为物品ID（限定性或非限定性均可）和物品数量成对出现，可以指定一至多组数据对。
<p>例如，下面的代码将添加10个河豚（物体 128）和一个水滴鱼面具（帽子 56）：
</p>
<pre>FarmHouseStarterGift (O)128 10 (H)56 1</pre>
<p>如果省略，则添加默认物品（通常是 15 个防风草种子）。
</p>
</td></tr></tbody></table>
<h4><span id="传送与地图位置"></span><span class="mw-headline" id=".E4.BC.A0.E9.80.81.E4.B8.8E.E5.9C.B0.E5.9B.BE.E4.BD.8D.E7.BD.AE">传送与地图位置</span></h4>
<table class="wikitable">

<tbody><tr>
<th>属性
</th>
<th>说明
</th></tr>
<tr>
<td><samp>AllowWakeUpWithoutBed <code title="必需字段 &#39;allow&#39;">&lt;allow&gt;</code></samp>
</td>
<td>玩家是否可以在此位置没有床的情况下醒来，类似于姜岛农舍。这通常与 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E7.82.B9.E4.B8.8A.E4.B8.8B.E6.96.87"><samp>Data/LocationContexts</samp></a> 中的<samp>PassOutLocations</samp>一起使用。
</td></tr>
<tr>
<td><samp>DefaultWarpLocation <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp><br /><i>（适用于任何位置）</i>
</td>
<td>默认到达地块，当玩家或 NPC 在没有目标地块的情况下被添加到地点时，会被传送到默认地块（例如，使用<a href="/%E6%A8%A1%E7%BB%84:%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%91%BD%E4%BB%A4" title="模组:控制台命令">调试命令</a>，如<samp>debug warp</samp>或<samp>debug eventbyid</samp>）。
</td></tr>
<tr>
<td><samp>PetBowlLocation <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp><br /><i>（适用于农场）</i>
</td>
<td>宠物碗的默认位置。
</td></tr>
<tr>
<td><samp>SpouseRoomPosition <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp><br /><i>（适用于农舍）</i>
</td>
<td><a href="/%E5%A9%9A%E5%A7%BB" title="婚姻">配偶的房间</a>的左上角位置。
</td></tr>
<tr>
<td><samp>TravelingCartPosition <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp><br /><i>（适用于森林）</i>
</td>
<td><a href="/%E6%97%85%E8%A1%8C%E8%B4%A7%E8%BD%A6" title="旅行货车">旅行货车</a>的左上角位置。这是碰撞框的左上角，因此屋顶将延伸到此地块上方两个地块。
</td></tr></tbody></table>
<p><br />
</p>
<h3><span id="其他地图属性更改"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E5.9C.B0.E5.9B.BE.E5.B1.9E.E6.80.A7.E6.9B.B4.E6.94.B9">其他地图属性更改</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">模组:地图</a>。此小节主要用于叙述更新内容。</div>
<table class="wikitable">

<tbody><tr>
<th>地图属性
</th>
<th>更改
</th></tr>
<tr>
<td><samp>Arch</samp><br /><samp>asdf</samp><br /><samp>Debris</samp><br /><samp>Fish</samp>
</td>
<td>已移除（这些未使用）。
</td></tr>
<tr>
<td><samp>FarmHouseFlooring</samp><br /><samp>FarmHouseFurniture</samp><br /><samp>FarmHouseStarterSeedsPosition</samp><br /><samp>FarmHouseWallpaper</samp>
</td>
<td>这些现在独立工作。例如，您现在可以使用 <samp>FarmHouseFlooring</samp> 而不需要同时设置 <samp>FarmHouseFurniture</samp>。
</td></tr>
<tr>
<td><s><samp>Music</samp></s>
</td>
<td>已弃用；使用 <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E7%82%B9%E6%95%B0%E6%8D%AE" title="模组:地点数据"><samp>Data/Locations</samp></a> 中的音乐字段代替。<br /><s>如果地点在 <samp>Data/Locations</samp> 中没有音乐条目，则应用此属性。</s><br />此属性已从所有原版地图中移除。
</td></tr>
<tr>
<td><samp>NPCWarp</samp><br /><samp>Warp</samp>
</td>
<td>现在具有容错性。它们会自动忽略多余的空格，如果解析仍然失败，则会记录一个信息性警告，并尽可能进行下一次传送。
</td></tr>
<tr>
<td><samp>Stumps</samp>
</td>
<td>现在对所有地点都有效。
</td></tr>
<tr>
<td><s><samp>UniquePortrait</samp></s><br /><s><samp>UniqueSprite</samp></s>
</td>
<td>已弃用；使用<a href="#Custom_NPC_appearance">自定义NPC外观</a>代替。<br /><s>这些属性将覆盖NPC外观。</s><br />此属性已从所有原版地图中移除。
</td></tr></tbody></table>
<h3><span id="地块属性更改"></span><span class="mw-headline" id=".E5.9C.B0.E5.9D.97.E5.B1.9E.E6.80.A7.E6.9B.B4.E6.94.B9">地块属性更改</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE#.E5.B7.B2.E7.9F.A5.E5.9C.B0.E5.9D.97.E5.B1.9E.E6.80.A7" title="模组:地图">模组:地图#已知地块属性</a>。此小节主要用于叙述更新内容。</div>
<ul>
<li>您现在可以通过将其设置为地块属性来覆盖地块索引属性。</li>
<li>新增了<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地块属性</a>：
<table class="wikitable">
<tbody><tr>
<th>层
</th>
<th>属性
</th>
<th>说明
</th></tr>
<tr>
<td><samp>Paths</samp>
</td>
<td><samp>SpawnTree <code title="必需字段 &#39;category&#39;">&lt;category&gt;</code> <code title="必需字段 &#39;ID&#39;">&lt;ID&gt;</code> <code title="必需字段 &#39;Growth stage&#39;">&lt;Growth stage&gt;</code> <code title="必需字段 &#39;Regrowth stage&#39;">&lt;Regrowth stage&gt;</code></samp>
</td>
<td>在地图创建时生成一棵树。<code title="必需字段 &#39;category&#39;">&lt;category&gt;</code> 可以是 <samp>wild</samp> 或 <samp>fruit</samp>。<samp>wild</samp>将生成<a href="/%E6%A0%91" title="树">野树</a>，而 <samp>fruit</samp> 将生成<a href="/%E6%9E%9C%E6%A0%91" title="果树">果树</a>。
</td></tr></tbody></table>
</li>
<li>新增了 <samp>Action</samp> <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地块属性</a>：
<table class="wikitable">

<tbody><tr>
<th>层
</th>
<th>属性
</th>
<th>说明
</th></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BuildingSilo</samp>
</td>
<td>如果建筑覆盖此地块，则在此地块上启用<a href="/%E7%AD%92%E4%BB%93" title="筒仓">筒仓</a>交互。会受到 <samp>Data/Buildings</samp> 中的 <samp>HayCapacity</samp> 字段限制。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BuildingToggleAnimalDoor</samp>
</td>
<td>如果建筑覆盖此地块，则打开或关闭其动物门。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Dialogue</samp>
</td>
<td>&#32;
<ul><li>消息现在可以是<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。</li>
<li>修复了悬停在 <samp>Action Dialogue</samp>地块上时，光标未变为检查图标的问题。</li></ul>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Forge</samp>
</td>
<td>打开<a href="/%E9%94%BB%E9%80%A0" title="锻造">锻造</a>菜单。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action None</samp>
</td>
<td>不执行任何操作。这用于标记地块为可交互地块。您可能需要单独编写交互逻辑。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ObeliskWarp <code title="必需字段 &#39;location name&#39;">&lt;location name&gt;</code> <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> <code title="可选字段 &#39;whether to dismount&#39;">[whether to dismount]</code></samp>
</td>
<td>使用<a href="/%E4%BC%A0%E9%80%81%E5%9B%BE%E8%85%BE" title="传送图腾">传送图腾</a>动画/音效将玩家传送到指定地点的指定坐标处。
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action OpenShop <code title="必需字段 &#39;shop id&#39;">&lt;shop id&gt;</code> <code title="可选字段 &#39;from direction&#39;">[from direction]</code> <code title="可选字段 &#39;open time&#39;">[open time]</code> <code title="可选字段 &#39;close time&#39;">[close time]</code> <code title="可选字段 &#39;owner tile area&#39;">[owner tile area]</code></samp>
</td>
<td>打开 ID 为 <code title="必需字段 &#39;shop id&#39;">&lt;shop id&gt;</code> 的<a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店">商店</a>。除 ID 外的所有参数都是可选的：
<ul><li><code title="可选字段 &#39;from direction&#39;">[from direction]</code>：如果指定，玩家必须站在相对于商店的此方向上（<samp>down</samp>、<samp>up</samp>、<samp>left</samp>、<samp>right</samp> 或 <samp>none</samp>之一）。设置为 <samp>none</samp> 则不对玩家面部朝向做要求。大多数原版商店的默认值为 <samp>down</samp>。</li>
<li><code title="可选字段 &#39;open time&#39;">[open time]</code> 和 <code title="可选字段 &#39;close time&#39;">[close time]</code>：商店可用的开门和关门时间，使用 26 小时格式。在这些时间之外与地块交互将不执行任何操作。</li>
<li><code title="可选字段 &#39;owner tile area&#39;">[owner tile area]</code>：如果指定，则指定地块区域必须至少有一位店主才能启用商店。对于自定义商店，这些由其 <samp>Owners</samp> 字段定义。可以以两种形式指定：<samp><code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp> 表示单个地块，或<samp><code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> <code title="必需字段 &#39;width&#39;">&lt;width&gt;</code> <code title="必需字段 &#39;height&#39;">&lt;height&gt;</code></samp> 表示多地块区域。</li></ul>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action PlayEvent <code title="必需字段 &#39;event id&#39;">&lt;event id&gt;</code> <code title="可选字段 &#39;check preconditions&#39;">[check preconditions]</code> <code title="可选字段 &#39;skip if seen&#39;">[skip if seen]</code> <code title="可选字段 &#39;fallback action&#39;">[fallback action]</code></samp>
</td>
<td>立即开始一个<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:事件数据">事件</a>，受以下条件限制：
<ul><li><code title="可选字段 &#39;check preconditions&#39;">[check preconditions]</code>：如果<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE#.E4.BA.8B.E4.BB.B6.E5.89.8D.E6.8F.90" title="模组:事件数据">事件前提</a>不匹配，是否忽略此操作（<samp>true</samp> 或 <samp>false</samp>）。默认为true。</li>
<li><code title="可选字段 &#39;skip if seen&#39;">[skip if seen]</code>：如果玩家已经看过给定事件，是否忽略此操作。默认为 true。</li></ul>
<p>如果事件因任何原因未开始（包括上述条件）：
</p>
<ul><li>如果指定了 <code title="可选字段 &#39;fallback action&#39;">[fallback action]</code>，则会运行此默认行为。该默认行为可以是任何 <samp>Action</samp> 地块属性（不带 "Action" 前缀），如<code>Action PlayEvent 60367 true true PlayEvent 520702 false false</code>，代表原事件播放失败时播放一个不同的事件。</li>
<li>否则，操作将被静默地忽略。</li></ul>
<p>例如，<code>Action PlayEvent 60367 false false</code> 将重播游戏开始时的公交车到达事件。
</p>
</td></tr></tbody></table>
</li>
<li>新增了 <samp>TouchAction</samp> <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地块属性</a>：
<table class="wikitable">

<tbody><tr>
<th>层
</th>
<th>属性
</th>
<th>说明
</th></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction PlayEvent <code title="必需字段 &#39;event id&#39;">&lt;event id&gt;</code> <code title="可选字段 &#39;check preconditions&#39;">[check preconditions]</code> <code title="可选字段 &#39;skip if seen&#39;">[skip if seen]</code> <code title="可选字段 &#39;fallback action&#39;">[fallback action]</code></samp>
</td>
<td>等同于 <samp>Action PlayEvent</samp>，但在点击时激活。请注意，<code title="可选字段 &#39;fallback action&#39;">[fallback action]</code> 是 <samp>Action</samp> 地块属性，而不是&lt; samp&gt;TouchAction 地块属性。
</td></tr></tbody></table></li>
<li>更改了现有的地块属性：
<table class="wikitable">

<tbody><tr>
<th>层
</th>
<th>属性
</th>
<th>原因
</th></tr>
<tr>
<td rowspan="4"><samp>Back</samp>
</td>
<td><samp>NoSpawn</samp>
</td>
<td>添加了 <samp>NoSpawn false</samp> 形式，这将禁用地块上的任何先前的 <samp>NoSpawn</samp> 属性。例如，假设您为地块表中的某个地块指定了 <samp>NoSpawn</samp> 地块索引属性，但希望为某些地块实例单独启用生成，则可以为后者另行指定 <samp>NoSpawn false</samp> 地块属性。
</td></tr>
<tr>
<td><s><samp>TouchAction Bus</samp></s>
</td>
<td>已移除。游戏或模组未使用此属性。
</td></tr>
<tr>
<td><samp>TouchAction Emote</samp>
</td>
<td>修复了如果指定的 NPC 未找到时的错误。
</td></tr>
<tr>
<td><samp>Treasure</samp>
</td>
<td>添加了 <samp>Treasure Item <code title="必需字段 &#39;item ID&#39;">&lt;item ID&gt;</code></samp> 形式，接受 <a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E7.89.A9.E5.93.81ID" title="模组:公共数据字段">限定性或非限定性物品ID</a>。
</td></tr>
<tr>
<td rowspan="2"><samp>Buildings</samp>
</td>
<td><s><samp>Action ItemChest</samp></s><br /><s><samp>Action Minecart</samp></s><br /><s><samp>Action RemoveChest</samp></s>
</td>
<td>已移除。游戏或模组未使用这些属性。
</td></tr>
<tr>
<td><samp>Action Kitchen</samp>
</td>
<td>现在在任何地点都有效（包括没有冰箱的位置）。
</td></tr></tbody></table>
</li>
</ul>
<h3><span id="其他地点/地图更改"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E5.9C.B0.E7.82.B9.2F.E5.9C.B0.E5.9B.BE.E6.9B.B4.E6.94.B9">其他地点/地图更改</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84" class="mw-redirect" title="模组">模组</a>及其他适当页面。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<ul><li>农场数据：
<ul><li>向 <samp>Data/AdditionalFarms</samp> 添加了一个 <samp>SpawnMonstersByDefault</samp> 字段，用于设置“在农场出现怪物”<a href="/%E9%80%89%E9%A1%B9#.E9.AB.98.E7.BA.A7.E6.B8.B8.E6.88.8F.E8.AE.BE.E7.BD.AE" title="选项">高级存档选项</a>的默认值。</li>
<li>修复了如果农场类型的信息框没有描述，就会在创建新存档界面崩溃的问题。</li></ul></li>
<li>通用地点数据：
<ul><li>现在所有地点都可以由动物。淘汰了 <samp>IAnimalLocation</samp> 方法，其功能由 <samp>GameLocation</samp> 实现。</li>
<li>新增了<a href="/%E6%A8%A1%E7%BB%84:%E9%B1%BC%E7%B1%BB%E6%95%B0%E6%8D%AE" title="模组:鱼类数据">钓鱼区域</a>，以简化钓鱼和地图模组之间的兼容性（尤其是对山顶农场、荒野农场、鹈鹕镇和沙漠）。</li>
<li>新增了未找到请求的地点或图层时的描述性错误。模组可以使用 <samp>map.RequireLayer</samp> 和 <samp>Game1.RequireLocation</samp> 来获取地点，这些方法具有类似的错误检查。</li>
<li>为 C# 模组新增了 <samp>WarpPathfindingCache</samp>，这模块化了 NPC 的寻路逻辑。如果需要，您可以对您的自定义地点编辑 <samp>IgnoreLocationNames</samp>、<samp>OverrideTargetNames</samp> 和 <samp>GenderRestrictions</samp> 字段。</li>
<li>现在检查地块索引的游戏逻辑的容错率更高，因此编辑预期的地块不会导致崩溃。</li>
<li>将 <samp>DecoratableLocation</samp> 地块/强制区域全部迁移至字符串（此工作始于 1.5.5 版本）。</li></ul></li>
<li>通用地图更改：
<ul><li>添加了<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地图属性和地块属性</a>的校验。若格式无效，则游戏会记录一个详细的错误，并跳过它。</li>
<li>移除了 <samp>Maps/paths</samp> 中无用的<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE#Paths.E5.B1.82" title="模组:地图">路径地块</a>以及全部地图文件。</li></ul></li>
<li>地点上下文数据：
<ul><li>现在建筑物内部会默认继承其父地点的地点上下文。</li>
<li>添加了 <samp>Game1.locationContextData</samp> 用于缓存 <samp>Data/LocationContexts</samp> 中的数据。</li>
<li>添加了原版上下文 ID 的常量，例如 <samp>LocationContexts.IslandId</samp>。</li>
<li>添加了请求地点上下文 ID 的校验（对于模组逻辑，则为 <samp>LocationContexts.Require(id)</samp>）。</li>
<li>移除了 <samp>Data/LocationContexts</samp> 中的 <samp>Name</samp> 字段，因为与 ID 重复。</li></ul></li></ul>
<ul>
<li>添加了一些方法用于简化常用操作：
<table class="wikitable">

<tbody><tr>
<th>类型
</th>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td rowspan="7"><samp>Building</samp>
</td>
<td><samp>GetParentLocation</samp>
</td>
<td>获取该建筑物所在的地点。
</td></tr>
<tr>
<td><samp>IsInCurrentLocation</samp>
</td>
<td>判断此建筑与当前玩家是否处于同一地点。
</td></tr>
<tr>
<td><samp>HasIndoors</samp>
</td>
<td>判断建筑是否有内部地点。
</td></tr>
<tr>
<td><samp>GetIndoors</samp>
</td>
<td>获取建筑内部的地点，若可用。
</td></tr>
<tr>
<td><samp>HasIndoorsName</samp>
</td>
<td>判断此建筑内部是否有地点，以及其唯一名称是否匹配给定值（例如 <code>building.HasIndoorsName("FarmHouse")</code>）。
</td></tr>
<tr>
<td><samp>GetIndoorsName</samp>
</td>
<td>获取此建筑内部的地点的唯一名称，若可用。
</td></tr>
<tr>
<td>...
</td>
<td>另请参阅<a href="#.E5.85.B6.E4.BB.96.E5.BB.BA.E7.AD.91.E6.9B.B4.E6.94.B9">其他建筑更改</a>以了解非地点方法。
</td></tr>
<tr>
<td rowspan="7"><samp>Cabin</samp><br /><samp>FarmHouse</samp>
</td>
<td><samp>GetCellar</samp>
</td>
<td>获取此联机小屋的<a href="/%E5%86%9C%E8%88%8D#.E5.8D.87.E7.BA.A7" title="农舍">地下室</a>，若有。
</td></tr>
<tr>
<td><samp>CanAssignFarmhand</samp><br /><samp>AssignFarmhand</samp>
</td>
<td>（仅用于小屋）检查联机小屋是否可以分配给一个农场帮手/把联机小屋分配给农场帮手。
</td></tr>
<tr>
<td><samp>HasOwner</samp>
</td>
<td>检查此房子是否被分配了玩家，无论此玩家是否已经创建好了角色。
</td></tr>
<tr>
<td><samp>OwnerId</samp>
</td>
<td>获取此房子的主人的唯一 ID，若有。
</td></tr>
<tr>
<td><samp>IsOwnedByCurrentPlayer</samp>
</td>
<td>判断此联机小屋是否属于当前玩家。
</td></tr>
<tr>
<td><samp>IsOwnerActivated</samp>
</td>
<td>判断此房子是否已经被分配了玩家且该玩家已创建角色。
</td></tr>
<tr>
<td><samp>HasNpcSpouse</samp>
</td>
<td>判断此房子的主人是否已结婚（<samp>HasNpcSpouse()</samp>）；判断此房子的主人是否与特定 NPC 结婚（<samp>HasNpcSpouse(name)</samp>）。这代替了 <samp>shouldShowSpouseRoom()</samp>。
</td></tr>
<tr>
<td rowspan="2"><samp>Farm</samp>
</td>
<td><samp>GetStarterFarmhouseLocation</samp>
</td>
<td>获取农舍的默认地块位置（另见 <samp>farm.GetMainFarmHouseEntry()</samp>）。
</td></tr>
<tr>
<td><samp>GetStarterPetBowlLocation</samp>
</td>
<td>获取宠物碗的默认地块位置。
</td></tr>
<tr>
<td rowspan="19"><samp>GameLocation</samp>
</td>
<td><samp>AddDefaultBuildings</samp>
</td>
<td>此地点被创建和/或加载后，可以重写此方法以添加自定义建筑。“默认建筑”既可以在丢失后重建（例如原版农舍），也可以仅在存档创建时建立依次（例如原版预建的联机小屋）。
<p>这取代了旧版的 <samp>farm.AddModularShippingBin()</samp> 方法。
</p>
</td></tr>
<tr>
<td><samp>GetFridge</samp><br /><samp>GetFridgePosition</samp>
</td>
<td>获取冰箱的箱子或地块坐标，若此地点有冰箱。
</td></tr>
<tr>
<td><samp>GetSeason</samp><br /><samp>GetSeasonIndex</samp><br /><samp>GetSeasonKey</samp>
</td>
<td>获取此地点内部作为枚举类型、数字（例如 <samp>0</samp> 代表春季）或字符串（例如 <samp>spring</samp>）出现的地点季节。例如，<a href="/%E5%A7%9C%E5%B2%9B" title="姜岛">姜岛</a>季节总是夏季。
</td></tr>
<tr>
<td><samp>GetWeather</samp><br /><samp>IsDebrisWeatherHere</samp><br /><samp>IsLightningHere</samp><br /><samp>IsRainingHere</samp><br /><samp>IsSnowingHere</samp>
</td>
<td>获取此地点上下文的当前天气，无论玩家是否在室内。
</td></tr>
<tr>
<td><samp>InDesertContext</samp><br /><samp>InIslandContext</samp><br /><samp>InValleyContext</samp>
</td>
<td>判断此地点是否在 <samp>Island</samp> 或 <samp>Default</samp> 地点上下文中。
</td></tr>
<tr>
<td><samp>IsActiveLocation</samp>
</td>
<td>判断此地点是否为活跃地点（参见<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/%E6%B8%B8%E6%88%8F%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84#.E5.86.9C.E5.9C.BA.E5.B8.AE.E6.89.8B.E5.BD.B1.E5.AD.90.E4.B8.96.E7.95.8C" title="模组:制作指南/游戏基本架构">影子地点</a>）。
</td></tr>
<tr>
<td><samp>IsTemporary</samp>
</td>
<td>判断此地点是否为用于节日或小游戏的临时地点。此判断是基于地点名称进行的（例如，地点以 <samp>Temp</samp> 或其他特定名称开头）。
</td></tr>
<tr>
<td><samp>GetLocationContextId</samp>
</td>
<td>获取 <samp>Data/LocationContexts</samp> 中包含此建筑的地点上下文的 ID。
</td></tr>
<tr>
<td><samp>GetContainingBuilding</samp>
</td>
<td>获取包含此地点的建筑实例，若可用（例如，联机小屋内部的建筑实例为对应的联机小屋）。
<p>Get the building instance which contains this location (like the cabin for a cabin interior), if applicable.
</p>
</td></tr>
<tr>
<td><samp>GetParentLocation</samp>
</td>
<td>获取包含此地点的父地点（例如联机小屋内部的父地点为农场），若无，则返回 <samp>null</samp>。
</td></tr>
<tr>
<td><samp>GetRootLocation</samp>
</td>
<td>获取包含此地点的父地点（例如联机小屋内部的父地点为农场），若无，则返回此地点本身。
</td></tr>
<tr>
<td><samp>GetInstancedBuildingInteriors</samp>
</td>
<td>获取实例化到此建筑的所有建筑内部地点（实例化建筑内部是指仅用作建筑内部、不在 <samp>Game1.locations</samp> 中独立存在的地点）。
</td></tr>
<tr>
<td><samp>GetMapPropertySplitBySpaces</samp><br /><samp>GetTilePropertySplitBySpaces</samp>
</td>
<td>获取地图/地块属性，并将其分割为单词。若地图/地块属性未定义，则返回空数组。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">GetMapPropertySplitBySpaces</span><span class="p">(</span><span class="s">&quot;ScreenshotRegion&quot;</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>HasMapPropertyWithValue</samp>
</td>
<td>判断地图属性是否已定义且非空。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">canUseCasks</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">HasMapPropertyWithValue</span><span class="p">(</span><span class="s">&quot;CanCaskHere&quot;</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>StoreHayInAnySilo</samp>
</td>
<td>向有剩余空间的筒仓添加干草（优先选择此地点的筒仓，然后是农场的筒仓，然后是其他地方的筒仓）。
</td></tr>
<tr>
<td><samp>TryGetMapProperty</samp>
</td>
<td>获取地图属性并将其解析为字符串，若已定义。
<p>示例
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">TryGetMapProperty</span><span class="p">(</span><span class="s">&quot;Warps&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">warps</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGetMapPropertyAs</samp>
</td>
<td>获取地图属性并将其解析为 <samp>bool</samp>、 <samp>double</samp>、<samp>Point</samp>、<samp>Rectangle</samp> 或 <samp>Vector2</samp> 类型的值。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(!</span><span class="k">this</span><span class="p">.</span><span class="n">TryGetMapPropertyAs</span><span class="p">(</span><span class="s">&quot;MailboxLocation&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">Point</span> <span class="n">position</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Point</span><span class="p">(</span><span class="m">68</span><span class="p">,</span> <span class="m">16</span><span class="p">);</span> <span class="c1">// default value</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>removeObjectsAndSpawned</samp>
</td>
<td>移除地块区域内的所有物品、灌木、资源团块、地形特征。
</td></tr>
<tr>
<td><samp>OnBuildingConstructed</samp><br /><samp>OnBuildingMoved</samp><br /><samp>OnBuildingDemolished</samp>
</td>
<td>这些方法在任何玩家建造、移动或移除建筑时，都会对每个玩家调用。
</td></tr>
<tr>
<td rowspan="3"><samp>LibraryMuseum</samp>
</td>
<td><samp>HasDonatedArtifacts()</samp>
</td>
<td>判断是否有物品被捐赠到了<a href="/%E5%8D%9A%E7%89%A9%E9%A6%86" title="博物馆">博物馆</a>。
</td></tr>
<tr>
<td><samp>HasDonatedArtifactAt(tile)</samp>
</td>
<td>判断<a href="/%E5%8D%9A%E7%89%A9%E9%A6%86" title="博物馆">博物馆</a>指定地块是否有捐赠品。
</td></tr>
<tr>
<td><samp>HasDonatedArtifact(itemId)</samp>
</td>
<td>判断指定限定性/非限定性物品 ID 的物品是否被捐赠到了<a href="/%E5%8D%9A%E7%89%A9%E9%A6%86" title="博物馆">博物馆</a>。
</td></tr>
<tr>
<td rowspan="2"><samp>MineShaft</samp>
</td>
<td><samp>GetLevelName</samp>
</td>
<td>获取一个已生成的<a href="/%E7%9F%BF%E4%BA%95" title="矿井">矿井</a>或<a href="/%E9%AA%B7%E9%AB%85%E6%B4%9E%E7%A9%B4" title="骷髅洞穴">骷髅洞穴</a>矿层的地点名称。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">locationName</span> <span class="p">=</span> <span class="n">MineShaft</span><span class="p">.</span><span class="n">GetLevelName</span><span class="p">(</span><span class="m">10</span><span class="p">);</span> <span class="c1">// returns &quot;UndergroundMine10&quot;</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">warpFarmer</span><span class="p">(</span><span class="n">locationName</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>IsGeneratedLevel</samp>
</td>
<td>获取一个地点或地点名称是否为已生成的<a href="/%E7%9F%BF%E4%BA%95" title="矿井">矿井</a>或<a href="/%E9%AA%B7%E9%AB%85%E6%B4%9E%E7%A9%B4" title="骷髅洞穴">骷髅洞穴</a>矿层名称。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">locationName</span> <span class="p">=</span> <span class="s">&quot;UndergroundMine10&quot;</span><span class="p">;</span>
<span class="kt">bool</span> <span class="n">isMine</span> <span class="p">=</span> <span class="n">MineShaft</span><span class="p">.</span><span class="n">IsGeneratedLevel</span><span class="p">(</span><span class="n">locationName</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">level</span><span class="p">);</span> <span class="c1">// returns true, 10</span>
</pre></div>
</td></tr>
<tr>
<td><samp>VolcanoDungeon</samp>
</td>
<td><samp>GetLevelName</samp><br /><samp>IsGeneratedLevel</samp>
</td>
<td>相当于对应的 <samp>MineShaft</samp> 方法，但用于<a href="/%E7%81%AB%E5%B1%B1%E5%9C%B0%E7%89%A2" title="火山地牢">火山地牢</a>。
</td></tr></tbody></table>
</li>
</ul>
<ul><li>在 <samp>StardewValley.Extensions</samp> 中添加了字符串型地图/地块属性的 <samp>TryAdd</samp>/<samp>TryGetValue</samp> 扩展。例如，您可以使用 <samp>map.Properties.TryGetValue(key, out string value)</samp>。</li>
<li>现在 <samp>MineShaft.tryToAddMonster</samp> 返回是否矿井添加了怪物。</li>
<li>现在 <samp>Game1.GetNumberBuildingsConstructed</samp> 和 <samp>location.getNumberBuildingsConstructed</samp> 有了重载方法，用于统计所有建筑类型，也可以指定是否统计正在建造中的建筑。</li>
<li>修复了 <samp>location.refurbishMapPortion</samp> 将 <samp>Back</samp> 源属性复制到 <samp>Building</samp> 目标图层的问题。</li>
<li>修复了游戏不能一致地检测室内地点传送门的问题。</li></ul>
<h2><span id="建筑更新"></span><span class="mw-headline" id=".E5.BB.BA.E7.AD.91.E6.9B.B4.E6.96.B0">建筑更新</span></h2>
<h3><span id="自定义建筑"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.BB.BA.E7.AD.91">自定义建筑</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%BB%BA%E7%AD%91" title="模组:建筑">模组:建筑</a>。此小节主要用于叙述更新内容。</div>
<p>您现在可以通过编辑 <samp>Data/Buildings</samp> 素材来添加自定义建筑。
</p>
<h3><span id="随处建造"></span><span class="mw-headline" id=".E9.9A.8F.E5.A4.84.E5.BB.BA.E9.80.A0">随处建造</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84:%E5%BB%BA%E7%AD%91" title="模组:建筑">模组:建筑</a>和<a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">模组:地图</a>。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<ul><li>您现在可以使用<a href="#.E5.9C.B0.E5.9B.BE.2F.E5.9C.B0.E5.9D.97.E5.B1.9E.E6.80.A7.E6.9B.B4.E6.94.B9">新的 <samp>CanBuildHere</samp> 和相关地图属性</a>来允许在任何位置进行建筑建造。游戏会自动进行相应调整（例如，罗宾会让您选择建造建筑的位置）。</li>
<li>建筑和动物不再硬编码到<a href="/%E5%86%9C%E5%9C%BA" title="农场">农场</a>位置（除了<a href="/%E8%81%94%E6%9C%BA%E5%B0%8F%E5%B1%8B" title="联机小屋">联机小屋</a>和<a href="/%E5%86%9C%E8%88%8D" title="农舍">农舍</a>）。</li>
<li>现在在任何地点割草都会将干草添加到筒仓中，动物也会自动取食任何地点的干草。</li></ul>
<h3><span id="其他建筑更改"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E5.BB.BA.E7.AD.91.E6.9B.B4.E6.94.B9">其他建筑更改</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84:%E5%BB%BA%E7%AD%91" title="模组:建筑">模组:建筑</a>。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<dl><dd>另见<a href="#.E5.85.B6.E4.BB.96.E5.9C.B0.E7.82.B9.2F.E5.9C.B0.E5.9B.BE.E6.9B.B4.E6.94.B9">其他地点更改</a>以了解地点相关的建筑更改。</dd></dl>
<dl><dt>通用建筑更改</dt></dl>
<ul><li>现在建筑显示名称和描述存储在 <samp>Strings/Buildings</samp> 以便复用。</li>
<li>移除了 <samp>Data/Blueprints</samp>。其功能被 <samp>Data/Buildings</samp>（建筑数据）和 <samp>Strings/Buildings</samp>（显示名称和描述）。</li></ul>
<ul>
<li>添加了一些方法用于简化常用操作：
<table class="wikitable">

<tbody><tr>
<th>类型
</th>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td rowspan="7"><samp>Building</samp>
</td>
<td><samp>CreateInstanceFromId</samp>
</td>
<td>从 <samp>Data/Buildings</samp> 中的类型 ID 创建一个建筑实例。例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Building</span> <span class="n">shippingBin</span> <span class="p">=</span> <span class="n">Building</span><span class="p">.</span><span class="n">CreateInstanceFromId</span><span class="p">(</span><span class="s">&quot;Shipping Bin&quot;</span><span class="p">,</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">Zero</span><span class="p">);</span> <span class="c1">// creates an instance of StardewValley.Buildings.ShippingBin</span>
</pre></div>
</td></tr>
<tr>
<td><samp>GetData</samp><br /><samp>TryGetData</samp>
</td>
<td>从 <samp>Data/Building</samp> 中获取建筑类型数据。
</td></tr>
<tr>
<td><samp>GetMetadata</samp>
</td>
<td>从[[<samp>Data/Buildings</samp> 中的 <samp>Metadata</samp> 字段]]获取此建筑的元数据。
</td></tr>
<tr>
<td><samp>GetPaintDataKey</samp>
</td>
<td>获取此建筑在 <samp>Data/PaintData</samp> 中的键（若存在）。
</td></tr>
<tr>
<td><samp>ReloadBuildingData</samp>
</td>
<td>重新加载此建筑在 <samp>Data/Buildings</samp> 中的数据。
</td></tr>
<tr>
<td><samp>FinishConstruction</samp>
</td>
<td>立即完成正在进行中的建造或升级。
</td></tr>
<tr>
<td><samp>UpdateTransparency</samp>
</td>
<td>在下次游戏刷新时更新本地玩家所在地的建筑透明度。
<p>此方法主要用于让模组覆盖/修改透明度逻辑：
</p>
</td></tr>
<tr>
<td><samp>Farm</samp>
</td>
<td><samp>GetMainFarmHouse</samp>
</td>
<td>获取主<a href="/%E5%86%9C%E8%88%8D" title="农舍">农舍</a>。
</td></tr>
<tr>
<td><samp>GameLocation</samp>
</td>
<td><samp>OnParentBuildingUpgraded</samp>
</td>
<td>包含此地点的建筑物升级时会调用此方法，若可用。
</td></tr></tbody></table>
</li>
</ul>
<ul><li>添加了建筑 <samp>id</samp>  字段，该字段是世界中每个建筑的唯一标识。</li></ul>
<dl><dt><a href="/%E7%A5%9D%E5%B0%BC%E9%AD%94%E5%B1%8B" title="祝尼魔屋">祝尼魔屋</a>更改</dt></dl>
<ul><li>现在每个祝尼魔屋都有独立的 <samp>JunimoHut.cropHarvestRange</samp> 且可编辑。</li></ul>
<dl><dt><a href="/%E9%B1%BC%E5%A1%98" title="鱼塘">鱼塘</a>更改</dt></dl>
<ul>
<li>在 <samp>Data/FishPondData</samp> 中，添加了一个 <samp>Precedence</samp> 字段，用于设置鱼塘规则被检查的先后顺序（从小到大）。这确保了备用规则总是最后被检查。原版的鱼塘规则使用如下数值，以保证一致性：
<table class="wikitable">

<tbody><tr>
<th>优先级
</th>
<th>用于
</th></tr>
<tr>
<td>0<br /><small>（默认值）</small>
</td>
<td>特定鱼类
</td></tr>
<tr>
<td>100
</td>
<td>自定义组（如沙漠鱼类）。
</td></tr>
<tr>
<td>500
</td>
<td>宽泛类别（如海鱼）。
</td></tr>
<tr>
<td>1000
</td>
<td>备用项（例如，要求只能向鱼塘添加鱼）。
</td></tr></tbody></table>
</li>
<li>在 <samp>Data/FishPondData</samp> 中，鱼塘奖励的 <samp>ItemId</samp> 现在可以为<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2" title="模组:物品查询">物品查询</a>了。</li>
<li>现在可以将<a href="/%E9%B1%BC#.E4.BC.A0.E8.AF.B4.E9.B1.BC.E7.B1.BB" title="鱼">传说鱼类</a>加入<a href="/%E9%B1%BC%E5%A1%98" title="鱼塘">鱼塘</a>了，如果它们在 <samp>Data/FishPondData</samp> 中有对应条目。</li>
</ul>
<h2><span id="NPC更新"></span><span class="mw-headline" id="NPC.E6.9B.B4.E6.96.B0">NPC更新</span></h2>
<h3><span id="自定义NPC"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89NPC">自定义NPC</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:NPC%E6%95%B0%E6%8D%AE" title="模组:NPC数据">模组:NPC数据</a>。此小节主要用于叙述更新内容。</div>
<p>自定义 NPC 数据在 1.6 版本中进行了全面更新。新的 <samp>Data/Characters</samp> 素材取代了 <samp>Data/NPCDispositions</samp> + <samp>Data/spousePatios</samp> + <samp>Data/spouseRooms</samp>，采用了一种更易于编辑和理解的数据模型格式，并提供了许多字段来自定义以前硬编码的数据。
</p><p>有关新格式的文档，请参见<a href="/%E6%A8%A1%E7%BB%84:NPC%E6%95%B0%E6%8D%AE#.E4.B8.BB.E8.A6.81.E6.95.B0.E6.8D.AE" title="模组:NPC数据">模组:NPC数据#主要数据</a>。
</p>
<h3><span id="自定义NPC外观"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89NPC.E5.A4.96.E8.A7.82">自定义NPC外观</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:NPC%E6%95%B0%E6%8D%AE" title="模组:NPC数据">模组:NPC数据</a>。此小节主要用于叙述更新内容。</div>
<p>每个 NPC 现在可以使用 <samp>Data/Characters</samp> 中的新 <samp>Appearance</samp> 字段拥有任意数量的自定义肖像/贴图，并带有任意条件。这使得模组可以添加诸如室内/室外服装等功能，而无需重新加载贴图，从而优化性能。如果多个服装均可用，游戏将每天随机选取一件。
</p><p>更多信息请参见<a href="/%E6%A8%A1%E7%BB%84:NPC%E6%95%B0%E6%8D%AE#.E5.8A.A8.E6.80.81.E5.A4.96.E8.A7.82" title="模组:NPC数据">模组:NPC数据#动态外观</a>。
</p>
<h3><span id="自定义农场动物"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.86.9C.E5.9C.BA.E5.8A.A8.E7.89.A9">自定义农场动物</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%8A%A8%E7%89%A9%E6%95%B0%E6%8D%AE" title="模组:动物数据">模组:动物数据</a>。此小节主要用于叙述更新内容。</div>
<p>您现在可以通过编辑改进后的 <samp>Data/FarmAnimals</samp> 素材来创建和编辑<a href="/%E5%8A%A8%E7%89%A9" title="动物">农场动物</a>。现在动物数据改为了数据模型，并增加了对自定义动物的内置支持，以及允许每个动物有更多的自定义选项（如大小、生长、产品、外观和声音等）。
</p><p>以前有两种贴图集布局，取决于动物是生活在<a href="/%E7%95%9C%E6%A3%9A" title="畜棚">畜棚</a>还是<a href="/%E9%B8%A1%E8%88%8D" title="鸡舍">鸡舍</a>。为了兼容旧版的贴图集布局（例如更新1.6版本之前的自定义动物），需要进行如下设置：
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="err">//</span> <span class="err">对于谷仓动物</span>
<span class="s2">&quot;UseFlippedRightForLeft&quot;</span><span class="err">:</span> <span class="kc">true</span><span class="err">,</span>
<span class="s2">&quot;UseDoubleUniqueAnimationFrames&quot;</span><span class="err">:</span> <span class="kc">false</span>

<span class="err">//</span> <span class="err">对于鸡舍动物</span>
<span class="s2">&quot;UseFlippedRightForLeft&quot;</span><span class="err">:</span> <span class="kc">false</span><span class="err">,</span>
<span class="s2">&quot;UseDoubleUniqueAnimationFrames&quot;</span><span class="err">:</span> <span class="kc">true</span>
</pre></div>
<h3><span id="自定义宠物"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.AE.A0.E7.89.A9">自定义宠物</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%AE%A0%E7%89%A9" title="模组:宠物">模组:宠物</a>。此小节主要用于叙述更新内容。</div>
<ul><li>您现在可以通过编辑新的 <samp>Data/Pets</samp> 素材来创建和自定义<a href="/%E5%8A%A8%E7%89%A9#.E7.8C.AB.E6.88.96.E7.8B.97" title="动物">宠物</a>类型和品种。</li>
<li>宠物碗现在是一个可以建造或移动的建筑。每只宠物被分配到一个可用的宠物碗。对于 C# 模组，每只宠物现在都有一个包含唯一 ID 的 <samp>guid</samp> 字段，每个宠物碗都有一个 <samp>petGuid</samp> 字段来用于记录其所有者（参见 <samp>PetBowl::HasPet()</samp> 和 <samp>PetBowl::FindPet()</samp> 方法）。</li>
<li>在<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE#.E5.9F.BA.E6.9C.AC.E6.A0.BC.E5.BC.8F" title="模组:事件数据">事件角色设置</a>中，您现在可以使用 <samp>pet</samp> 来添加玩家选择的宠物类型。在其他事件命令中，其角色名称为 <samp>PetActor</samp>。这取代了旧版的 <samp>cat</samp>（名称为 <samp>Cat</samp>）和 <samp>dog</samp>（名称为 <samp>Dog</samp>），尽管这些仍然有效。</li>
<li>对于 C# 模组：
<ul><li>所有宠物现在使用通用的 <samp>Pet</samp> 类，而不是 <samp>Cat</samp> 或 <samp>Dog</samp>。宠物的 <samp>petType</samp> 字段记录了宠物类型。</li>
<li>玩家偏好的宠物类型记录在 <samp>Game1.player.whichPetType</samp>。以前的 <samp>catPerson</samp> 字段现在是只读的。</li>
<li>添加了 <samp>Pet.type_cat</samp> 和 <samp>Pet.type_dog</samp> 常量，对应于默认宠物类型。</li></ul></li></ul>
<h3><span id="自定义杀怪目标"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E6.9D.80.E6.80.AA.E7.9B.AE.E6.A0.87">自定义杀怪目标</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至新的文档页面。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<dl><dd>另请参阅：<a href="#.E6.9D.80.E6.80.AA.E7.9B.AE.E6.A0.87.E6.A0.87.E8.AF.86.E6.9B.B4.E6.94.B9">杀怪目标标识更改</a>。<i></i></dd></dl>
<p>您现在可以通过编辑新增的 <samp>Data/MonsterSlayerQuests</samp> 数据素材来添加/编辑<a href="/%E6%8E%A2%E9%99%A9%E5%AE%B6%E5%85%AC%E4%BC%9A" title="探险家公会">探险家公会</a>的杀怪目标。
</p><p>此素材文件内含一个“字符串 → 数据模型”查询，其中：
</p>
<ul><li>键名为杀怪目标的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串 ID</a>。</li>
<li>值为包含如下字段的数据模型。</li></ul>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>，用于显示此目标在探险家公会计分板上的名称。
</td></tr>
<tr>
<td><samp>Targets</samp>
</td>
<td>计入杀怪目标的<a href="/%E6%A8%A1%E7%BB%84:%E6%80%AA%E7%89%A9%E6%95%B0%E6%8D%AE#.E6.80.AA.E7.89.A9ID" title="模组:怪物数据">怪物ID</a>列表，须与 <samp>Count</samp> 相匹配。
</td></tr>
<tr>
<td><samp>Count</samp>
</td>
<td>达成杀怪目标的数量，须与 <samp>Targets</samp> 相匹配。
</td></tr>
<tr>
<td><samp>RewardItemId</samp>
</td>
<td>（可选）完成此目标后，从<a href="/%E5%90%89%E5%B0%94" title="吉尔">吉尔</a>处得到的奖励物品的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E7.89.A9.E5.93.81ID" title="模组:公共数据字段">限定性ID</a>。默认为空。
</td></tr>
<tr>
<td><samp>RewardItemPrice</samp>
</td>
<td>（可选）完成此目标后，在<a href="/%E9%A9%AC%E9%BE%99" title="马龙">马龙</a>的商店购买相应奖励物品的价格。若为 -1，则禁止购买。默认为 -1。
</td></tr>
<tr>
<td><samp>RewardDialogue</samp><br /><samp>RewardDialogueFlag</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>，用于在完成杀怪目标后与<a href="/%E5%90%89%E5%B0%94" title="吉尔">吉尔</a>的对话，以及此对话的<a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">信件 ID</a>。都默认为空。
<p>若设置了奖励物品，则其会在对话后出现。
</p><p>若单用 <samp>RewardDialogue</samp> 而不指定 <samp>RewardDialogueFlag</samp>，则完成杀怪目标后每次打开奖励菜单都会弹出此对话，直到玩家收集奖励物品。若没有设置 <samp>RewardItems</samp>，则不会出现此问题，因为游戏会立即认为玩家收集了奖励物品。
</p><p>此字段不会真正送一封信；如果您希望送一封信，参见 <samp>RewardMail</samp> 或 <samp>RewardMailAll</samp>。
</p>
</td></tr>
<tr>
<td><samp>RewardFlag</samp><br /><samp>RewardFlagAll</samp>
</td>
<td>（可选）完成该目标后与<a href="/%E5%90%89%E5%B0%94" title="吉尔">吉尔</a>交谈，可为当前玩家（<samp>RewardFlag</samp>）或所有玩家（<samp>RewardFlagAll</samp>）设置指定的<a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">信件标识</a>。默认为空。
<p>注意一般用不到 <samp>RewardFlag</samp>，因为游戏会设置一个 <samp>Gil_<code title="必需字段 &#39;goal ID&#39;">&lt;goal ID&gt;</code></samp> 信件标识。
</p><p>此字段并不会真正送一封信；如果您希望送一封信，参见 <samp>RewardMail</samp> 或 <samp>RewardMailAll</samp>。
</p>
</td></tr>
<tr>
<td><samp>RewardMail</samp><br /><samp>RewardMailAll</samp>
</td>
<td>（可选）完成该目标后与<a href="/%E5%90%89%E5%B0%94" title="吉尔">吉尔</a>交谈，可为当前玩家（<samp>RewardMail</samp>）或所有玩家（<samp>RewardMailAll</samp>）送一封信。默认为空。
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>此目标的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5" title="模组:公共数据字段">自定义字段</a>。
</td></tr></tbody></table>
<h3><span id="自定义电话"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E7.94.B5.E8.AF.9D">自定义电话</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E7%94%B5%E8%AF%9D" title="模组:电话">模组:电话</a>。此小节主要用于叙述更新内容。</div>
<p>模组现在可以自定义<a href="/%E7%94%B5%E8%AF%9D" title="电话">电话</a>（包括呼叫的内容和电话号）。
</p>
<h4><span id="来电"></span><span class="mw-headline" id=".E6.9D.A5.E7.94.B5">来电</span></h4>
<p>您可以通过编辑 <samp>Data/IncomingPhoneCalls</samp> 素材来添加或自定义来电。
</p><p>此素材内含一个“字符串 → 数据模型”查询，其中：
</p>
<ul><li>键名为此来电的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串 ID</a>。</li>
<li>值为包含如下字段的数据模型所组成的列表：</li></ul>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Dialogue</samp>
</td>
<td>玩家接电话时显示的对话文本。可以使用完整的<a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D" title="模组:对话">对话格式</a>（包括问题和回答选项）。
</td></tr>
<tr>
<td><samp>FromNpc</samp>
</td>
<td>（可选）来电 NPC 的内部名称。若指定此字段，则会显示此 NPC 的姓名和肖像。
</td></tr>
<tr>
<td><samp>FromPortrait</samp>
</td>
<td>（可选）欲显示的肖像的贴图集素材名称（例如 <samp>Portraits/Abigail</samp>）。若也指定了 <samp>FromNpc</samp>，则此字段的肖像会覆盖来电 NPC 的默认肖像。若 <samp>FromNpc</samp> 和 <samp>FromDisplayName</samp> 都为空，则会显示此字段指定的肖像，而姓名显示为&#160;??? 。
</td></tr>
<tr>
<td><samp>FromDisplayName</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>，用于显示来电 NPC 的姓名。若指定了 <samp>FromNpc</samp>，则此字段的姓名会覆盖来电 NPC 的默认姓名。
</td></tr>
<tr>
<td><samp>MaxCalls</samp>
</td>
<td>（可选）玩家能收到此来电的最大次数。设为 <samp>-1</samp> 代表无限制，默认为 1。
</td></tr>
<tr>
<td><samp>TriggerCondition</samp><br /><samp>RingCondition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示是否可以发起此来电（<samp>TriggerCondition</samp>）或此来电是否响铃（<samp>RingCondition</samp>）。
<p>玩家是否能接到电话取决于这两个字段：
在将来电推送给全部玩家之前，首先会检查房主的 <samp>TriggerCondition</samp>，然后再分别检查每个玩家的 <samp>RingCondition</samp> 字段，以决定其电话是否响铃。
</p>
</td></tr>
<tr>
<td><samp>IgnoreBaseChance</samp>
</td>
<td>（可选）此字段若为 true，则游戏在检查是否要触发来电时，会忽略 1% 的基础概率判断，而仅检查此来电是否可用。默认为 false。
</td></tr>
<tr>
<td><samp>SimpleDialogueSplitBy</samp>
</td>
<td>（可选，专用）若设置此字段，则认为此电话不需要 NPC 姓名和肖像，且使用此字段指定的字符来折行。例如，<code>"SimpleDialogueSplitBy": "#"</code> 会将 <code>Box A#Box B#Box C</code> 分为三个依次出现的对话框。
<p>大多数情况您应当忽略此字段。如有需要，请使用 <samp>Dialogue</samp> 中的常规对话格式。此字段主要用于支持旧版来电。
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>此来电的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5" title="模组:公共数据字段">自定义字段</a>。
</td></tr></tbody></table>
<h4><span id="C#自定义处理器"></span><span class="mw-headline" id="C.23.E8.87.AA.E5.AE.9A.E4.B9.89.E5.A4.84.E7.90.86.E5.99.A8">C#自定义处理器</span></h4>
<p>C# 模组可以实现 <samp>StardewValley.PhoneCalls.IPhoneHandler</samp> 并将其添加至 <samp>Phone.PhoneHandlers</samp>，以控制来电和去电：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">/// &lt;summary&gt;The mod entry point.&lt;/summary&gt;</span>
<span class="k">internal</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">ModEntry</span> <span class="p">:</span> <span class="n">Mod</span>
<span class="p">{</span>
    <span class="c1">/// &lt;inheritdoc /&gt;</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Entry</span><span class="p">(</span><span class="n">IModHelper</span> <span class="n">helper</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Phone</span><span class="p">.</span><span class="n">PhoneHandlers</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">CustomPhoneHandler</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">/// &lt;summary&gt;A custom phone handler.&lt;/summary&gt;</span>
<span class="k">internal</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">CustomPhoneHandler</span> <span class="p">:</span> <span class="n">IPhoneHandler</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
<p>参见<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/%E5%85%A5%E9%97%A8#.E5.A6.82.E4.BD.95.E5.8F.8D.E7.BC.96.E8.AF.91.E6.B8.B8.E6.88.8F.E4.BB.A3.E7.A0.81.EF.BC.9F" class="mw-redirect" title="模组:制作指南/入门">反编译代码</a>中的 <samp>StardewValley.PhoneCalls.DefaultPhoneHandler</samp> 以获得示例代码。
</p>
<h3><span id="自定义商店"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.95.86.E5.BA.97">自定义商店</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店">模组:商店</a>。此小节主要用于叙述更新内容。</div>
<p>您现在可以通过新的 <samp>Data/Shops</samp> 素材创建和编辑商店。有关文档和示例，请参见<a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店">模组:商店</a>。
</p>
<h3><span id="对话更改"></span><span class="mw-headline" id=".E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">对话更改</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D" title="模组:对话">模组:对话</a>。此小节主要用于叙述更新内容。</div>
<ul>
<li>添加了新的对话键：
<table class="wikitable">

<tbody><tr>
<th>素材
</th>
<th>键格式
</th>
<th>描述
</th></tr>
<tr>
<td rowspan="22"><samp>Characters/Dialogue/&lt;name&gt;</samp>
</td></tr>
<tr>
<td><samp>AcceptBirthdayGift_<code title="必需字段 &#39;id&#39;">&lt;id&gt;</code></samp><br /><samp>AcceptBirthdayGift_<code title="必需字段 &#39;tag&#39;">&lt;tag&gt;</code></samp><br /><samp>AcceptBirthdayGift_<code title="必需字段 &#39;taste&#39;">&lt;taste&gt;</code></samp><br /><samp>AcceptBirthdayGift_Negative</samp><br /><samp>AcceptBirthdayGift_Positive</samp><br /><samp>AcceptBirthdayGift</samp>
</td>
<td>当玩家赠送生日礼物时显示。
</td></tr>
<tr>
<td><samp>AcceptBouquet</samp>
</td>
<td>当NPC接受玩家的<a href="/%E8%8A%B1%E6%9D%9F" title="花束">花束</a>时显示。
</td></tr>
<tr>
<td><samp>AcceptGift_<code title="必需字段 &#39;id&#39;">&lt;id&gt;</code></samp><br /><samp>AcceptGift_<code title="必需字段 &#39;tag&#39;">&lt;tag&gt;</code></samp>
</td>
<td>当玩家赠送非生日礼物时显示。可以指定物品ID（如 <samp>AcceptGift_(O)128</samp>）或上下文标签（如 <samp>AcceptGift_category_fish</samp>）。
</td></tr>
<tr>
<td><samp>DumpsterDiveComment</samp>
</td>
<td>当 NPC 发现玩家翻垃圾桶时显示。
</td></tr>
<tr>
<td><samp>HitBySlingshot</samp>
</td>
<td>当玩家用<a href="/%E5%BC%B9%E5%BC%93" title="弹弓">弹弓</a>射击他们时显示。
</td></tr>
<tr>
<td><samp>RejectBouquet_Divorced</samp><br /><samp>RejectBouquet_NotDatable</samp><br /><samp>RejectBouquet_NpcAlreadyMarried</samp><br /><samp>RejectBouquet_VeryLowHearts</samp><br /><samp>RejectBouquet_LowHearts</samp><br /><samp>RejectBouquet</samp>
</td>
<td>当 NPC 拒绝<a href="/%E8%8A%B1%E6%9D%9F" title="花束">花束</a>时显示。
</td></tr>
<tr>
<td><samp>RejectGift_Divorced</samp>
</td>
<td>当 NPC 因为与您离婚而拒绝礼物时显示。
</td></tr>
<tr>
<td><samp>RejectItem_<code title="必需字段 &#39;id&#39;">&lt;id&gt;</code></samp><br /><samp>RejectItem_<code title="必需字段 &#39;tag&#39;">&lt;tag&gt;</code></samp>
</td>
<td>如果设置，NPC 将拒绝接受任何匹配的物品并显示此对话。可以指定物品ID（如 <samp>RejectItem_(O)128</samp>）或上下文标签（如 <samp>RejectItem_category_fish</samp>）。这可以禁止赠送礼物、电影票、花束、美人鱼吊坠等，但不会阻止接受任务或特殊订单的物品。
</td></tr>
<tr>
<td><samp>RejectMermaidPendant_Divorced</samp><br /><samp>RejectMermaidPendant_NeedHouseUpgrade</samp><br /><samp>RejectMermaidPendant_NotDatable</samp><br /><samp>RejectMermaidPendant_NpcWithSomeoneElse</samp><br /><samp>RejectMermaidPendant_PlayerWithSomeoneElse</samp><br /><samp>RejectMermaidPendant_Under8Hearts</samp><br /><samp>RejectMermaidPendant_Under10Hearts</samp><br /><samp>RejectMermaidPendant_Under10Hearts_AskedAgain</samp><br /><samp>RejectMermaidPendant</samp>
</td>
<td>当 NPC 拒绝<a href="/%E7%BE%8E%E4%BA%BA%E9%B1%BC%E5%90%8A%E5%9D%A0" title="美人鱼吊坠">美人鱼吊坠</a>时显示。
</td></tr>
<tr>
<td><samp>RejectMovieTicket_AlreadyInvitedBySomeoneElse</samp><br /><samp>RejectMovieTicket_AlreadyWatchedThisWeek</samp><br /><samp>RejectMovieTicket_Divorced</samp><br /><samp>RejectMovieTicket_DontWantToSeeThatMovie</samp><br /><samp>RejectMovieTicket</samp>
</td>
<td>当 NPC 拒绝<a href="/%E7%94%B5%E5%BD%B1%E7%A5%A8" title="电影票">电影票</a>时显示。
</td></tr>
<tr>
<td><samp>SpouseFarmhouseClutter</samp>
</td>
<td>当 NPC 配偶无法找到农舍厨房的站立位置时显示。
</td></tr>
<tr>
<td><samp>SpouseGiftJealous</samp>
</td>
<td>当您给另一个与配偶同性别且符合条件的 NPC 赠送礼物时（除非是他们的生日），NPC 配偶会显示此对话。
</td></tr>
<tr>
<td><samp>Spouse_MonstersInHouse</samp>
</td>
<td>当 NPC 配偶在农舍中且附近有怪物时显示。
</td></tr>
<tr>
<td><samp>SpouseStardrop</samp>
</td>
<td>当您从配偶那里获得<a href="/%E6%98%9F%E4%B9%8B%E6%9E%9C%E5%AE%9E" title="星之果实">星之果实</a>时显示。
</td></tr>
<tr>
<td><samp>Fair_Judging</samp>
</td>
<td>在<a href="/%E6%98%9F%E9%9C%B2%E8%B0%B7%E5%B1%95%E8%A7%88%E4%BC%9A" title="星露谷展览会">星露谷展览会</a>上，当刘易斯评判展览品时显示。
<p>如果设置了此键而没有 <samp>Fair_Judged*</samp>，NPC在评判结束后将继续显示此对话。
</p><p>这取代了之前在 <samp>Strings/StringsFromCSFiles</samp> 中的硬编码翻译：<samp>Event.cs.1602</samp>（玛妮）、<samp>Event.cs.1604</samp>（皮埃尔）和 <samp>Event.cs.1606</samp>（威利）。
</p>
</td></tr>
<tr>
<td><samp>Fair_Judged_PlayerLost_PurpleShorts</samp><br /><samp>Fair_Judged_PlayerLost_Skipped</samp><br /><samp>Fair_Judged_PlayerLost</samp><br /><samp>Fair_Judged_PlayerWon</samp><br /><samp>Fair_Judged</samp>
</td>
<td>在<a href="/%E6%98%9F%E9%9C%B2%E8%B0%B7%E5%B1%95%E8%A7%88%E4%BC%9A" title="星露谷展览会">星露谷展览会</a>上，当刘易斯完成评判展览品后显示。
<p>这些取代了之前在 <samp>Strings/StringsFromCSFiles</samp> 中的硬编码翻译：<samp>Event.cs.1591</samp>（皮埃尔当他获胜时）、<samp>Event.cs.1593</samp>（皮埃尔当玩家获胜时）、<samp>Event.cs.1595</samp>（玛妮）、<samp>Event.cs.1597</samp>（威利）和 <samp>Event.cs.1600</samp>（玛妮关于紫色短裤）。
</p>
</td></tr>
<tr>
<td><samp>FlowerDance_Accept_Roommate</samp><br /><samp>FlowerDance_Accept_Spouse</samp><br /><samp>FlowerDance_Accept</samp>
</td>
<td>在<a href="/%E8%8A%B1%E8%88%9E%E8%8A%82" title="花舞节">花舞节</a>上，当 NPC 同意跳舞时显示。游戏会优先使用 <samp>_Roommate</samp>（如果是室友）或 <samp>_Spouse</samp>（如果已婚）的变体（如果适用），否则会检查普通键。
<p><i>这取代了之前在 <samp>Strings/StringsFromCSFiles</samp> 中的硬编码翻译（<samp>Event.cs.1613</samp>、<samp>Event.cs.1615</samp>、<samp>Event.cs.1617</samp>、<samp>Event.cs.1619</samp>、<samp>Event.cs.1621</samp>、<samp>Event.cs.1623</samp>、<samp>Event.cs.1625</samp>、<samp>Event.cs.1627</samp>、<samp>Event.cs.1629</samp> 和 <samp>Event.cs.1631</samp>）。</i>
</p>
</td></tr>
<tr>
<td><samp>FlowerDance_Decline</samp>
</td>
<td>在<a href="/%E8%8A%B1%E8%88%9E%E8%8A%82" title="花舞节">花舞节</a>上，当 NPC 拒绝跳舞时显示。这取代了之前的 <samp>danceRejection</samp> 键（该键仍然作为后备使用）。
</td></tr>
<tr>
<td><samp>WinterStar_GiveGift_Before_Roommate</samp><br /><samp>WinterStar_GiveGift_Before_Spouse</samp><br /><samp>WinterStar_GiveGift_Before</samp><br /><samp>WinterStar_GiveGift_After_Roommate</samp><br /><samp>WinterStar_GiveGift_After_Spouse</samp><br /><samp>WinterStar_GiveGift_After</samp>
</td>
<td>在<a href="/%E5%86%AC%E6%97%A5%E6%98%9F%E7%9B%9B%E5%AE%B4" title="冬日星盛宴">冬日星盛宴</a>上，当 NPC 给玩家礼物时（在玩家打开礼物之前和之后）显示。游戏会优先使用 <samp>_Roommate</samp>（如果是室友）或 <samp>_Spouse</samp>（如果已婚）的变体（如果适用），否则会检查普通键。如果省略，打开礼物前后的对话将分别默认为所有 NPC 的通用翻译。
</td></tr>
<tr>
<td><samp>WinterStar_ReceiveGift_<code title="必需字段 &#39;id&#39;">&lt;id&gt;</code></samp><br /><samp>WinterStar_ReceiveGift_<code title="必需字段 &#39;tag&#39;">&lt;tag&gt;</code></samp><br /><samp>WinterStar_ReceiveGift</samp>
</td>
<td>在<a href="/%E5%86%AC%E6%97%A5%E6%98%9F%E7%9B%9B%E5%AE%B4" title="冬日星盛宴">冬日星盛宴</a>上，当 NPC 从玩家那里收到礼物时显示。可以指定为物品ID（如 <samp>WinterStar_ReceiveGift_(O)128</samp>）、上下文标签（如 <samp>WinterStar_ReceiveGift_category_fish</samp>）或任何物品（如 <samp>WinterStar_ReceiveGift</samp>）。
</td></tr>
<tr>
<td><samp>WipedMemory</samp>
</td>
<td>当您使用<a href="/%E8%AE%B0%E5%BF%86%E4%B9%8B%E9%BB%91%E6%9A%97%E7%A5%9E%E6%AE%BF" title="记忆之黑暗神殿">记忆之黑暗神殿</a>擦除 NPC 的记忆后，第一次与他们交谈时显示。
</td></tr></tbody></table>
</li>
<li>添加了新的<a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D" title="模组:对话">对话</a>命令：
<table class="wikitable">

<tbody><tr>
<th>命令
</th>
<th>描述
</th></tr>
<tr id="gender-switch">
<td><samp>${male^female}$</samp><br /><samp>${male^female^non-binary}$</samp>
</td>
<td>根据玩家的性别更改文本。这在很大程度上取代了 <samp>^</samp> 对话标记（该标记仍然有效），并且比该标记支持更多的地方。这是在大多数其他命令或解析之前应用的，因此可以安全地用于 <samp>^</samp> 可能有不同含义的情况（例如信件文本）。
</td></tr>
<tr>
<td><samp>$action <code title="必需字段 &#39;action&#39;">&lt;action&gt;</code></samp>
</td>
<td>运行一个<a href="/%E6%A8%A1%E7%BB%84:%E8%A7%A6%E5%8F%91%E5%8A%A8%E4%BD%9C" title="模组:触发动作">触发动作字符串</a>，例如 <samp>$action AddMoney 500</samp> 为当前玩家添加<span style="display: none;">data-sort-value="500"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />500金</span>。
</td></tr>
<tr>
<td><samp>$query <code title="必需字段 &#39;query&#39;">&lt;query&gt;</code>#<code title="必需字段 &#39;if true&#39;">&lt;if true&gt;</code>&#124;<code title="必需字段 &#39;if false&#39;">&lt;if false&gt;</code></samp>
</td>
<td>根据<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>显示不同的对话文本。
</td></tr>
<tr>
<td><samp>$t <code title="必需字段 &#39;topic ID&#39;">&lt;topic ID&gt;</code> <code title="可选字段 &#39;day length&#39;">[day length]</code></samp>
</td>
<td>为接下来的 <code title="可选字段 &#39;day length&#39;">[day length]</code> 天（默认为 4 天）添加一个<a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D#.E5.AF.B9.E8.AF.9D.E4.B8.BB.E9.A2.98" title="模组:对话">对话主题</a>。
</td></tr>
<tr>
<td><samp>$v <code title="必需字段 &#39;event id&#39;">&lt;event id&gt;</code> <code title="可选字段 &#39;check preconditions&#39;">[check preconditions]</code> <code title="可选字段 &#39;skip if seen&#39;">[skip if seen]</code></samp>
</td>
<td>立即开始一个<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:事件数据">事件</a>并结束当前对话（需要满足参数中的的条件）。
</td></tr></tbody></table>
</li>
<li>改进了对话命令：
<table class="wikitable">

<tbody><tr>
<th>命令
</th>
<th>变更
</th></tr>
<tr>
<td><samp>$p</samp>
</td>
<td>您现在可以检查多个回答ID。
</td></tr></tbody></table></li>
<li><a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D#.E5.9B.9E.E7.AD.94ID" title="模组:对话">回答ID</a>现在是<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串ID</a>。</li>
<li><a href="/%E7%A7%98%E5%AF%86#.E7.89.A9.E5.93.81.E7.94.9F.E6.88.90.E5.AF.86.E9.9B.86" title="秘密">物品生成代码</a>现在使用字符串物品ID。这意味着您可以使用其<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E7.89.A9.E5.93.81ID" title="模组:公共数据字段">限定性物品ID</a>生成任何物品（例如 <code>[(F)1664]</code> 生成<a href="/%E7%A5%9E%E7%A7%98%E5%9C%B0%E6%AF%AF" title="神秘地毯">神秘地毯</a>），但不能再在前面加零（例如 <code>[128]</code> 是河豚，但 <code>[0128]</code> 是错误物品）。</li>
<li>对于 C# 模组，<samp>Dialogue</samp> 现在可以记录生成该对话的翻译键（如果适用）。例如，您可以检测玩家在<a href="/%E8%8A%B1%E8%88%9E%E8%8A%82" title="花舞节">花舞节</a>上被拒绝的情况（代码源自 <a rel="nofollow" class="external text" href="https://github.com/spacechase0/StardewValleyMods">Three-Heart Dance Partner</a>）：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">private</span> <span class="k">void</span> <span class="nf">OnMenuChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">MenuChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">bool</span> <span class="n">isDanceRejection</span> <span class="p">=</span>
        <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">?.</span><span class="n">currentEvent</span><span class="p">?.</span><span class="n">FestivalName</span> <span class="p">==</span> <span class="s">&quot;Flower Dance&quot;</span>
        <span class="p">&amp;&amp;</span> <span class="n">e</span><span class="p">.</span><span class="n">NewMenu</span> <span class="k">is</span> <span class="n">DialogueBox</span> <span class="n">dialogueBox</span>
        <span class="p">&amp;&amp;</span> <span class="n">dialogueBox</span><span class="p">.</span><span class="n">characterDialogue</span> <span class="k">is</span> <span class="p">{}</span> <span class="n">dialogue</span>
        <span class="p">&amp;&amp;</span> <span class="n">dialogue</span><span class="p">.</span><span class="n">TranslationKey</span> <span class="p">==</span> <span class="err">$</span><span class="s">&quot;Characters\\Dialogue\\{dialogue.speaker?.Name}:danceRejection&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>对于直接创建 <samp>Dialogue</samp> 实例的C#模组，现在有几种方法可以做到：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// 从翻译键</span>
<span class="kt">var</span> <span class="n">dialogue</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dialogue</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="s">&quot;Strings\\StringsFromCSFiles:Utility.cs.5360&quot;</span><span class="p">);</span>

<span class="c1">// 从自定义文本（带或不带翻译键）</span>
<span class="kt">var</span> <span class="n">dialogue</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dialogue</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s">&quot;Some arbitrary text to show as-is&quot;</span><span class="p">);</span>

<span class="c1">// 从带有标记的翻译</span>
<span class="kt">var</span> <span class="n">dialogue</span> <span class="p">=</span> <span class="n">Dialogue</span><span class="p">.</span><span class="n">FromTranslation</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="s">&quot;Data\\ExtraDialogue:PurchasedItem_2_QualityLow_Willy&quot;</span><span class="p">,</span> <span class="n">whatToCallPlayer</span><span class="p">,</span> <span class="n">particle</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">DisplayName</span><span class="p">);</span>
</pre></div>
<p>您还可以使用 <samp>Dialogue.TryGetDialogue</samp> 或 <samp>npc.TryGetDialogue</samp> 轻松添加缺省逻辑。例如：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Dialogue</span> <span class="n">dialogue</span> <span class="p">=</span>
    <span class="n">npc</span><span class="p">.</span><span class="n">TryGetDialogue</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;rejection_{itemId}_{locationName}_{x}_{y}&quot;</span><span class="p">)</span>
    <span class="p">??</span> <span class="n">npc</span><span class="p">.</span><span class="n">TryGetDialogue</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;rejection_{itemId}_{locationName}&quot;</span><span class="p">)</span>
    <span class="p">??</span> <span class="n">npc</span><span class="p">.</span><span class="n">TryGetDialogue</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;rejection_{itemId}&quot;</span><span class="p">)</span>
    <span class="p">??</span> <span class="k">new</span> <span class="n">Dialogue</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="s">&quot;Strings\\StringsFromCSFiles:NPC.cs.3971&quot;</span><span class="p">);</span>
</pre></div>
</li>
<li>对于 C# 模组，添加了 <samp>dialogue.sideEffects</samp> 字段，以在显示对话时运行代码。</li>
<li>“揭示喜好”对话命令现在使用格式 <samp>%revealtaste:<code title="必需字段 &#39;npc name&#39;">&lt;npc name&gt;</code>:<code title="必需字段 &#39;item ID&#39;">&lt;item ID&gt;</code></samp> 以支持物品ID。（之前的 <samp>%revealtaste<code title="必需字段 &#39;npc name&#39;">&lt;npc name&gt;</code><code title="必需字段 &#39;item index&#39;">&lt;item index&gt;</code></samp> 格式仍然有效，以支持旧的内容包，但物品索引只能是数字。）</li>
<li>对于显式声明肖像命令的礼物喜好对话，相应的对话肖像不会再被覆盖。</li>
<li>修复了如下问题：未知的<a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D" title="模组:对话">对话</a>命令以 <samp>$</samp> 开头时，如果非数字，则会被解析为肖像编号。</li>
<li>修复了 NPC 只有在拥有 <code>{day name}{hearts}</code> 对话时才会使用 <code>{day name}{hearts}_{year}</code> 对话的问题。</li>
<li>修复了 NPC 只在英语中使用 <code>MovieInvitation</code> 对话键的问题。</li>
</ul>
<h3><span id="日程更改"></span><span class="mw-headline" id=".E6.97.A5.E7.A8.8B.E6.9B.B4.E6.94.B9">日程更改</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E8%A1%8C%E7%A8%8B%E6%95%B0%E6%8D%AE" class="mw-redirect" title="模组:行程数据">模组:行程数据</a>。此小节主要用于叙述更新内容。</div>
<ul>
<li>日程键现在不区分大小写。</li>
<li>添加了新的 <samp><code title="必需字段 &#39;day of week&#39;">&lt;day of week&gt;</code>_<code title="必需字段 &#39;min hearts&#39;">&lt;min hearts&gt;</code></samp> 日程键。</li>
<li>添加了 <samp>NPC.ScheduleKey</samp> 字段以储存该 NPC 的当前日程。</li>
<li>日程命令现在自动去除首尾空白字符，因此可以多行以提高可读性。例如：
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Wed&quot;</span><span class="err">:</span> <span class="s2">&quot;</span>
<span class="s2">    1000 ArchaeologyHouse 11 9 0/</span>
<span class="s2">    1800 Town 47 87 0/</span>
<span class="s2">    2200 SeedShop 1 9 3 abigail_sleep</span>
<span class="s2">&quot;</span>
</pre></div></li>
<li>修复了某些情况下 <samp>{season}_spring_{hearts}</samp> 会成为默认日程的问题。现在默认日程总是 <samp>spring</samp>。</li>
<li>日程现在具有容错性：
<ul><li>修复了无法解析所选日程时的崩溃问题。NPC 现在会记录报错并尝试使用下一个默认日程。</li>
<li>修复了某些硬编码日程不存在（如潘妮的 <samp>marriageJob</samp> 或潘姆的 <samp>bus</samp>）时的崩溃问题。</li>
<li>修复了日程命令为空时的错误。</li></ul>
</li></ul>
<h3><span id="其他NPC更改"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96NPC.E6.9B.B4.E6.94.B9">其他NPC更改</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84:NPC%E6%95%B0%E6%8D%AE" title="模组:NPC数据">模组:NPC数据</a> as needed。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<ul>
<li>添加了 <samp>Game1.characterData</samp> 和 <samp>Game1.farmAnimalData</samp> 字段，所以无需重复读取 <samp>Data/Characters</samp> 或 <samp>Data/FarmAnimals</samp> 素材就能读取 NPC / 动物数据。
</li>
<li>现在所有翻译后的 NPC 姓名都存储在 <samp>Strings/NPCNames</samp>。
</li><li>为 C# 模组添加了新的字段和方法：

<table class="wikitable">

<tbody><tr>
<th>类型
</th>
<th>字段/方法
</th>
<th>效果
</th></tr>
<tr>
<td rowspan="2"><samp>AdventureGuild</samp>
</td>
<td><samp>IsComplete(data)</samp>
</td>
<td>判断指定的<a href="/%E6%8E%A2%E9%99%A9%E5%AE%B6%E5%85%AC%E4%BC%9A" title="探险家公会">杀怪目标</a>是否完成，无论玩家是否已收集其奖励。
</td></tr>
<tr>
<td><samp>HasCollectedReward(player, id)</samp>
</td>
<td>判断指定玩家是否完成了指定<a href="/%E6%8E%A2%E9%99%A9%E5%AE%B6%E5%85%AC%E4%BC%9A" title="探险家公会">杀怪无标</a>并收集了奖励。例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">isPhoneUnlocked</span> <span class="p">=</span> <span class="n">AdventureGuild</span><span class="p">.</span><span class="n">HasCollectedReward</span><span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">,</span> <span class="s">&quot;Gil_FlameSpirits&quot;</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>AnimalHouse</samp>
</td>
<td><samp>adoptAnimal</samp>
</td>
<td>向此地点添加一只动物，并将此地点设为动物的家。
</td></tr>
<tr>
<td><samp>AnimatedSprite</samp>
</td>
<td><samp>Owner</samp>
</td>
<td>此贴图属于哪个 NPC。
</td></tr>
<tr>
<td rowspan="3"><samp>Character</samp>
</td>
<td><samp>IsVillager</samp>
</td>
<td>此角色是否为 NPC 类型的村民（即，不是怪物、马、宠物、孩子等）。换句话说，这检查当前 NPC 是否使用来自 <samp>Data/Characters</samp> 的数据（无论其是否真的在该素材中有对应条目）。
</td></tr>
<tr>
<td><samp>StandingPixel</samp>
</td>
<td>角色在其当前地点缓存的像素坐标，即其边界框的中心像素坐标。
</td></tr>
<tr>
<td><samp>Tile</samp><br /><samp>TilePoint</samp>
</td>
<td>角色在其当前地点缓存的地块坐标。<samp>Tile</samp> 是指精确的非整数坐标，而 <samp>TilePoint</samp> 为整数坐标。
</td></tr>
<tr>
<td rowspan="7"><samp>FarmAnimal</samp>
</td>
<td><samp>isAdult</samp>
</td>
<td>判断农场动物是否成熟（与 <samp>isBaby()</samp> 相反）。
</td></tr>
<tr>
<td><samp>CanGetProduceWithTool</samp>
</td>
<td>判断可否使用指定工具收集农场动物产品（例如，奶牛使用挤奶桶）。
</td></tr>
<tr>
<td><samp>CanLiveIn</samp>
</td>
<td>判断动物是否可以被添加进建筑。
</td></tr>
<tr>
<td><samp>GetDisplayName</samp><br /><samp>GetShopDescription</samp>
</td>
<td>获取此动物的翻译后的显示名称或商店描述。
</td></tr>
<tr>
<td><samp>GetHarvestType</samp>
</td>
<td>判断此动物的产品是否已掉落或已被收集。
</td></tr>
<tr>
<td><samp>growFully</samp>
</td>
<td>若此动物仍为幼体，则立即催熟为成体。
</td></tr>
<tr>
<td><samp>ReloadTextureIfNeeded</samp>
</td>
<td>基于当前的状态和数据更新动物贴图。
</td></tr>
<tr>
<td rowspan="2"><samp>Farmer</samp>
</td>
<td><samp>GetDisplayPants</samp><br /><samp>GetDisplayShirt</samp>
</td>
<td>获取玩家裤子和上衣的贴图集和贴图索引。这可以用于重载的服装、穿着的服装和默认服装。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">GetDisplayShirt</span><span class="p">(</span><span class="k">out</span> <span class="n">Texture2D</span> <span class="n">texture</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">spriteIndex</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>CanDyePants</samp><br /><samp>CanDyeShirt</samp>
</td>
<td>获取当前穿着的裤子或上衣是否可以<a href="/%E6%9F%93%E8%89%B2" title="染色">染色</a>。
</td></tr>
<tr>
<td><samp>Monster</samp>
</td>
<td><samp>GetDisplayName(name)</samp>
</td>
<td>获取某种怪物的显示名称。
</td></tr>
<tr>
<td rowspan="4"><samp>NPC</samp>
</td>
<td><samp>CanReceiveGifts</samp>
</td>
<td>判断此 NPC 是否可以接收玩家的礼物（无论其当日是否已经收到礼物）。
</td></tr>
<tr>
<td><samp>GetData</samp><br /><samp>NPC.TryGetData</samp>
</td>
<td>从 <samp>Data/Characters</samp> 中获取此 NPC 的数据，若有。
</td></tr>
<tr>
<td><samp>NPC.GetDisplayName(name)</samp>
</td>
<td>通过 NPC 的内部名称，获取其当前语言下的翻译后名称。
</td></tr>
<tr>
<td><samp>hasDarkSkin</samp>
</td>
<td>判断此角色是否为深色皮肤，以决定孩子肤色。
</td></tr>
<tr>
<td><samp>Pet</samp>
</td>
<td><samp>GetPetData</samp><br /><samp>TryGetData</samp>
</td>
<td>从 <samp>Data/Pets</samp> 中获取此宠物的数据，若有。
</td></tr>
<tr>
<td><samp>ShopMenu</samp>
</td>
<td><samp>ShopId</samp>
</td>
<td>用于识别当前商店的键。对于标准商店，可以为 <samp>Data/Shops</samp> 中的唯一商店 ID；对于家具，可以为 <samp>Dresser</samp> 或 <samp>FishTank</samp>。此字段一定为相关的商店 ID。
<p>此字段取代了旧版的 <samp>shopContext</samp> 字段，通常会与对应的唯一商店 ID（若有相同。
</p>
</td></tr>
<tr>
<td><samp>Utility</samp>
</td>
<td><samp>getAllVillagers</samp>
</td>
<td>获取所有村民（不包括马、宠物、怪物、孩子等）。类似于加了过滤器的 <samp>getAllCharacters</samp>。
</td></tr></tbody></table>
</li>
<li>现在 NPC 住宅数据变动会在存档时更新。</li>
<li>现在 <samp>NPC.reloadSprite()</samp> 添加了一个参数，用于仅重载外观而不改变其他数据。</li>
<li>现在 <samp>Utility.getAllCharacters()</samp> 返回一个纯 <samp>List&lt;NPC&gt;</samp> 类型的值，而不是自定义的 <samp>DisposableList&lt;NPC&gt;</samp>，因此您可以对其使用 LINQ 查询。</li>
<li>现在 <samp>Utility.GetHorseWarpRestrictionsForFarmer(player)</samp> 返回一个枚举类型（这使模组更高效便捷地修改），并新增了一个 <samp>Utility.GetHorseWarpErrorMessage(restrictions)</samp> 方法用于获取对应的错误信息。</li>
<li>现在 <samp>Farmer.hasAFriendWithHeartLevel</samp> 有一个可选的满心参数。</li>
<li>移除了 <samp>FarmAnimal</samp> 中大部分仅用于存储数据镜像的字段/属性。</li>
<li>移除了  <samp>Data/NPCGiftTastes</samp> 中的无效物品 ID。</li>
<li>修复了 NPC 在加载存档时有时会重复的问题（特别是其住所变动的情形）。</li>
<li>修复了<a href="/%E8%B4%BE%E6%96%AF" title="贾斯">贾斯</a>或<a href="/%E6%96%87%E6%A3%AE%E7%89%B9" title="文森特">文森特</a>这样的儿童 NPC 在有关礼物喜好的对话中，忽略 <samp>Data/NPCDispositions</samp>（现在改为 <samp>Data/Characters</samp>）中的亲属关系标识，例如 "mom"。</li>
<li>修复了 NPC 使用 <samp>NPC</samp> 的子类时忽略对话的问题。</li>
<li>修复了英语下怪物不从 <samp>Data/Monsters</samp> 中加载显示名称的问题。f</li>
<li>修复了玩家的孩子 <samp>IsInvisible</samp> 标识。</li>
</ul>
<h2><span id="其他更新"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E6.9B.B4.E6.96.B0">其他更新</span></h2>
<h3><span id="效果大修"></span><span class="mw-headline" id=".E6.95.88.E6.9E.9C.E5.A4.A7.E4.BF.AE">效果大修</span></h3>
<p>1.6 重写了增益效果逻辑，以使其更自洽、更可扩展：
</p>
<ul><li>效果逻辑统一为 <samp>Game1.player.buffs</samp>，其为效果数据的唯一来源。它替换了 <samp>player.added*</samp> 和 <samp>player.appliedBuffs</samp> 字段、<samp>BuffsDisplay</samp> 逻辑、附魔状态加成、穿戴靴子/戒指加成。</li>
<li>这也取消了效果类型（例如，效果可以加成武器，武器也可以加成效果）和装备（工具也可以有效果）的限制。</li>
<li>现在效果发生更改时，会被完全重新计算，这修复了一系列长期存在的漏洞，例如加成偏移和双重负面效果。就像先前那样，效果本身是局域的；仅有效果ID和总加成效果会被同步。</li></ul>
<p><b>对于 C# 模组</b>：
</p>
<ul><li>现在每个效果都有一个唯一字符串ID。您可以指定一个同名的新效果来替换旧效果（这意味您无需手动查找和移除此效果先前的实例）。</li>
<li>效果持续时间可以设为 <samp>Buff.ENDLESS</samp> 代表效果一直持续到当天玩家入睡。</li>
<li>您可以通过重写 <samp>Item.AddEquipmentEffects</samp> 来向任何设备添加标准加成效果，也可以通过重载 <samp>Item.onEquip</samp> 和 <samp>Item.onUnequip</samp> 来添加自定义行为/效果。</li>
<li>您可以通过重写 <samp>Item.GetFoodOrDrinkBuffs()</samp> 来添加自定义食物或饮料效果。</li>
<li>现在 <samp>Buff</samp> 构造函数支持自定义图标贴图集、贴图索引、显示名称、描述和持续时长，以全面支持自定义效果。</li>
<li>您现在可以通过扩展 <samp>BuffsDisplay.displayAttributes</samp> 来更改效果加成的显示方式（或添加新的加成）。</li>
<li>您现在可以通过设置 <samp>buff.visible = false</samp> 来使效果不可见，</li></ul>
<p>下面代码用于定义一个 +3 速度的增益：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Buff</span> <span class="n">buff</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Buff</span><span class="p">(</span>
    <span class="n">id</span><span class="p">:</span> <span class="s">&quot;Example.ModId_ZoomZoom&quot;</span><span class="p">,</span>
    <span class="n">displayName</span><span class="p">:</span> <span class="s">&quot;Zoom Zoom&quot;</span><span class="p">,</span> <span class="c1">// can optionally specify description text too</span>
    <span class="n">iconTexture</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">ModContent</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Texture2D</span><span class="p">&gt;(</span><span class="s">&quot;assets/zoom.png&quot;</span><span class="p">),</span>
    <span class="n">iconSheetIndex</span><span class="p">:</span> <span class="m">0</span><span class="p">,</span>
    <span class="n">duration</span><span class="p">:</span> <span class="m">30</span><span class="n">_000</span><span class="p">,</span> <span class="c1">// 30 seconds</span>
    <span class="n">effects</span><span class="p">:</span> <span class="k">new</span> <span class="n">BuffEffects</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Speed</span> <span class="p">=</span> <span class="p">{</span> <span class="m">10</span> <span class="p">}</span> <span class="c1">// shortcut for buff.Speed.Value = 10</span>
    <span class="p">}</span>
<span class="p">);</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">applyBuff</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
</pre></div>
<p>您可以检查效果是否已被激活（例如 <code>Game1.player.hasBuff("Example.ModId_ZoomZoom")</code>），并在代码中应用相应自定义效果。
</p>
<h3><span id="自定义音频"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E9.9F.B3.E9.A2.91">自定义音频</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E9%9F%B3%E9%A2%91" title="模组:音频">模组:音频</a>。此小节主要用于叙述更新内容。</div>
<p>您现在可以通过编辑新的 <samp>Data/AudioChanges</samp> 素材来添加或编辑音乐曲目或音效。新的声音提示会添加到游戏的音效库中，因此可以把它们当作普通音频来使用（例如 <samp>Music</samp> <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地图属性</a>）。这支持 <samp>.ogg</samp> 和 <samp>.wav</samp> 文件，以及原版音频功能（例如从一个ID随机播放音频）。
</p><p>1.6 版本中的音频也更加容错：当播放不存在的音频时，游戏不再崩溃，而是记录错误并返回默认的静音点击声。（如果您使用 <code>try..catch</code> 来检查声音提示是否存在，您应该检查 <code>Game1.soundbank.Exists(name)</code>。）
</p>
<h3><span id="自定义效果"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E6.95.88.E6.9E.9C">自定义效果</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E6%95%88%E6%9E%9C" title="模组:效果">模组:效果</a>。此小节主要用于叙述更新内容。</div>
<dl><dd>另请参阅<a href="#.E6.95.88.E6.9E.9C.E5.A4.A7.E4.BF.AE">效果大修</a>。</dd></dl>
<p>您现在可以通过编辑新的 <samp>Data/Buffs</samp> 素材来定义自定义效果。然后您可以在别处使用该效果，例如 <samp>Data/Object</samp> 的 <samp>Buff</samp> 字段或 C# 的 <samp>Buff</samp> 构造函数。
</p>
<h3><span id="自定义数据字段"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E6.95.B0.E6.8D.AE.E5.AD.97.E6.AE.B5">自定义数据字段</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5" title="模组:公共数据字段">模组:公共数据字段#自定义字段</a>。此小节主要用于叙述更新内容。</div>
<p>许多数据素材具有<samp>CustomFields</samp>字段。此字段会被游戏忽略，但可以被框架模组读取，从而实现特定功能。
</p><p>例如，某个内容包可能通过自定义字段来<a href="/%E6%A8%A1%E7%BB%84:%E5%86%9C%E4%BD%9C%E7%89%A9%E6%95%B0%E6%8D%AE" title="模组:农作物数据">添加作物</a>：
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Format&quot;</span><span class="p">:</span> <span class="s2">&quot;2.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Changes&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Target&quot;</span><span class="p">:</span> <span class="s2">&quot;Data/Crops&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Entries&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;Example.Id_CucumberSeeds&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;Seasons&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;summer&quot;</span> <span class="p">],</span>
                    <span class="nt">&quot;DaysInPhase&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">],</span>
                    <span class="nt">&quot;HarvestItemId&quot;</span><span class="p">:</span> <span class="s2">&quot;Example.Id_Cucumber&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;Texture&quot;</span><span class="p">:</span> <span class="s2">&quot;{{InternalAssetKey: assets/crops.png}}&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;SpriteIndex&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                    <span class="nt">&quot;CustomFields&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;Example.FrameworkMod/WetTexture&quot;</span><span class="p">:</span> <span class="s2">&quot;{{InternalAssetKey: assets/crops-wet.png}}&quot;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>然后，C#模组可以处理该自定义字段（如果已设置）：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">IsRainingHere</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">CropData</span> <span class="n">data</span> <span class="p">=</span> <span class="n">crop</span><span class="p">.</span><span class="n">GetData</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">data</span><span class="p">.</span><span class="n">CustomFields</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="s">&quot;Example.FrameworkMod/WetTexture&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">textureName</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="c1">// 做一些神奇的事情</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>请参阅每种素材类型的文档中的 <samp>CustomFields</samp>，以查看是否支持该字段。除了本页列出的部分外，自定义字段还添加到了 <samp>Data/AdditionalFarms</samp>、<samp>Data/AdditionalLanguages</samp>、<samp>Data/FishPondData</samp>、<samp>Data/HomeRenovations</samp>、<samp>Data/Movies</samp> 和 <samp>Data/SpecialOrders</samp>。
</p><p>请参阅<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5" title="模组:公共数据字段">主文档</a>。
</p>
<h3><span id="自定义巨大作物"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.B7.A8.E5.A4.A7.E4.BD.9C.E7.89.A9">自定义巨大作物</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至新的文档页面。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<p>您现在可以通过编辑 <samp>Data/GiantCrops</samp> 数据素材来添加/编辑<a href="/%E5%86%9C%E4%BD%9C%E7%89%A9#.E5.B7.A8.E5.A4.A7.E4.BD.9C.E7.89.A9" title="农作物">巨大作物</a>。
</p><p>此素材文件内含一个“字符串 → 数据模型”查询，其中：
</p>
<ul><li>键名为巨大作物的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串 ID</a>。</li>
<li>值为包含如下字段的模型：</li></ul>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>FromItemId</samp>
</td>
<td>能够长成巨大作物的常规作物<b>所产出物品</b>的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E7.89.A9.E5.93.81ID" title="模组:公共数据字段">物品 ID</a>（限定性或非限定性）。例如，<samp>(O)254</samp> 是<a href="/%E7%94%9C%E7%93%9C" title="甜瓜">甜瓜</a>。
<p>任意数量的巨大作物都可以使用相同的 <samp>FromItemId</samp> 值。会生成其他字段匹配成功的第一个巨大作物（若有）。
</p>
</td></tr>
<tr>
<td><samp>HarvestItems</samp>
</td>
<td>打碎巨大作物的掉落物。若有多个物品匹配成功，则都会掉落。
<p>此字段为包含如下字段的数据模型所组成的列表：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td>通用字段
</td>
<td>参见<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2#.E7.89.A9.E5.93.81.E7.94.9F.E6.88.90.E5.AD.97.E6.AE.B5" title="模组:物品查询">物品生成字段</a>以了解受支持的通用物品字段。
<p>若设为返回多个物品的<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2" title="模组:物品查询">物品查询</a>，则随机选取一个。
</p>
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td>（可选）选中该条目的概率，为介于 0（从不掉落）到 1（总是掉落）之间的数值。默认为 1（100% 概率）。
</td></tr>
<tr>
<td><samp>ForShavingEnchantment</samp>
</td>
<td>（可选）此物品是否只能使用<a href="/%E9%94%BB%E9%80%A0#.E5.B7.A5.E5.85.B7.E7.9A.84.E9.99.84.E9.AD.94" title="锻造">木屑附魔</a>收获（<samp>true</samp>），仅打碎时收获（<samp>false</samp>），或两种方式均可（<samp>null</samp>）。默认为 <samp>null</samp>。
</td></tr>
<tr>
<td><samp>ScaledMinStackWhenShaving</samp><br /><samp>ScaledMaxStackWhenShaving</samp>
</td>
<td>（可选）作物在使用<a href="/%E9%94%BB%E9%80%A0#.E5.B7.A5.E5.85.B7.E7.9A.84.E9.99.84.E9.AD.94" title="锻造">木屑附魔</a>工具时掉落的最小/最大堆叠数，按工具的能力等级调整。
<p>此数值会乘以此附魔工具每一击的伤害。例如，铱斧头每一击会减少巨大作物 3 点 HP，因此每一击会使此数值乘以 3。
</p><p>若同时设置两个字段，则会生成介于这两个值之间的随机值。若仅设置一个字段，则会用于截断物品生成字段的返回值。若都忽略，则照常使用通用的 <samp>MinStack</samp>/<samp>MaxStack</samp> 字段，且<b>不会</b>根据附魔调整其取值。
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>此巨大作物的贴图集素材名称。
</td></tr>
<tr>
<td><samp>TexturePosition</samp>
</td>
<td>（可选）<samp>Texture</samp> 中贴图左上角的像素坐标，为包含 <samp>X</samp> 和 <samp>Y</samp> 字段的数据模型。默认为 (0, 0)。
</td></tr>
<tr>
<td><samp>TileSize</samp>
</td>
<td>（可选）此巨大作物占据的地块区域，为包含 <samp>X</samp> 和 <samp>Y</samp> 字段的数据模型。此字段影响贴图大小（每个地块应当为 16x16 像素）和生成巨大作物所需的地块。注意巨大作物的贴图在绘制时会额外增加一个地块的高度。默认为（3，3）。
</td></tr>
<tr>
<td><samp>Health</samp>
</td>
<td>（可选）此巨大作物的 HP，必须将其耗尽才能打碎巨大作物。每次<a href="/%E6%96%A7%E5%A4%B4" title="斧头">斧头</a>击打扣除的 HP 点数与斧头等级有关。此字段默认为 3。
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td>（可选）每个作物区域每晚长成巨大作物的概率，介于 0（从不）到 1（总是）之间。默认为 0.01（1%）。
<p>注意，此概率会检查每种适用的巨大作物。若同种作物能生成三种巨大作物，每种巨大作物生成概率为 1%，则该作物有 3% 概率长成巨大作物。
</p>
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示此巨大作物是否可用。默认为总是可用。
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>此作物的<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.AD.97.E6.AE.B5" title="模组:公共数据字段">自定义字段</a>。
</td></tr></tbody></table>
<h3><span id="自定义点唱机音乐"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E7.82.B9.E5.94.B1.E6.9C.BA.E9.9F.B3.E4.B9.90">自定义点唱机音乐</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至新的文档页面。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<p>您现在可以通过编辑新增的 <samp>Data/JukeboxTracks</samp> 数据素材来修改<a href="/%E8%BF%B7%E4%BD%A0%E7%82%B9%E5%94%B1%E6%9C%BA" title="迷你点唱机">点唱机</a>音乐。
</p><p>此素材文件内含一个“字符串 → 数据模型”查询，其中：
</p>
<ul><li>键名为<a href="/%E6%A8%A1%E7%BB%84:%E9%9F%B3%E9%A2%91" title="模组:音频">声音提示 ID</a>（大小写敏感）。</li>
<li>值为包含如下字段的数据模型：</li></ul>
<p>若玩家已听过一个未收录在 <samp>Data/JukeboxTracks</samp> 的音乐，则将键名设为此声音提示的 ID 可以自动启用该音乐。欲禁用音乐，请添加一个 <samp>"Available": false</samp> 字段。
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Name</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>，用于显示此音乐在游戏内的标题。默认为相应的声音提示 ID。
</td></tr>
<tr>
<td><samp>Available</samp>
</td>
<td>（可选）此音乐是否在点唱机菜单中显示。可以为 <samp>true</samp>（总是显示）、<samp>false</samp>（总不显示）、<samp>null</samp>（玩家听过才显示）。默认为 <samp>null</samp>。
<p>满足 <samp>"Available": true</samp> 的音乐会列在点唱机菜单前部。
</p>
</td></tr>
<tr>
<td><samp>AlternativeTrackIds</samp>
</td>
<td>（可选）此音乐的其他声音提示 ID 所组成的列表（大小写不敏感）。若玩家听过其中任何一个，则会在菜单中显示对应的条目。默认为空。
<p>例如，此字段可用于重命名音乐，以兼容旧版玩家：
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;{{ModId}}_TrackName&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;{{i18n: track-name}}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AlternativeTrackIds&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;OldTrackName&quot;</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
<h3><span id="自定义电影"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E7.94.B5.E5.BD.B1">自定义电影</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84:%E7%94%B5%E5%BD%B1%E9%99%A2%E6%95%B0%E6%8D%AE" title="模组:电影院数据">模组:电影院数据</a>。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<dl><dd>另请参阅：<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.94.B5.E5.BD.B1.E9.9B.B6.E9.A3.9F">自定义电影零食</a>。</dd></dl>
<p><a href="/%E6%A8%A1%E7%BB%84:%E7%94%B5%E5%BD%B1%E9%99%A2%E6%95%B0%E6%8D%AE#.E7.94.B5.E5.BD.B1.E6.95.B0.E6.8D.AE" title="模组:电影院数据">电影数据</a>在旧版中的限制非常多，且极易导致模组冲突，因为 (a) 我们需要增加电影 ID，例如 <samp>spring_movie_3</samp>；(b) 我们每个季节只能看一场电影；(c) 一部电影所有的贴图都必须位于原版的 <samp>LooseSprites/Movies</samp> 贴图集中。
</p><p>星露谷物语 1.6 大修了电影的工作方式以处理这些限制。
</p>
<dl>
<dt>选择电影</dt>
<dd><p>在旧版中，需要按照特殊的 ID 格式选择电影：<samp>spring_movie_0</samp> 会在您建好电影院的那年春季播放，<samp>spring_movie_1</samp> 会在下一年春季播放，以此类推。这意味着需要在游戏中等待两年才能看见第一部自定义电影，且需手动管理 ID 冲突。</p>
在 1.6 中，基于下面的新增字段，每月可以有多部电影。若同一季节可以播放多部电影，则每部电影会在当月等长的时段内上映（例如，当月有四部电影，则每部电影连续放映七天）。若电影部数多余当月天数，则会选取 28 部电影上映。</dd>

<dt>新数据字段
</dt><dd>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Seasons</samp>
</td>
<td>（可选）应当播放此电影的季节。若忽略，代表所有季节。例如：
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Seasons&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Spring&quot;</span><span class="p">,</span> <span class="s2">&quot;Summer&quot;</span> <span class="p">]</span>
</pre></div>
</td></tr>
<tr>
<td><samp>YearModulus</samp><br /><samp>YearRemainder</samp>
</td>
<td>（可选）基于模数和余数交替播放电影，其中建好电影院的那一年视作第 0 年。若忽略，则在所有年份播放。
<p>例如：
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// play in the first year, and every second year thereafter</span>
<span class="s2">&quot;YearModulus&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="s2">&quot;YearRemainder&quot;</span><span class="o">:</span> <span class="mi">0</span>
</pre></div>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// play in the second year, and every second year thereafter</span>
<span class="s2">&quot;YearModulus&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="s2">&quot;YearRemainder&quot;</span><span class="o">:</span> <span class="mi">1</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>（可选）电影海报和银幕图像的素材名称，若忽略，则默认为 <samp>LooseSprites\Movies</samp>。
<p>贴图集的布局必须为每部电影单独占一行，每行 490x128 像素。每部电影左上角的 13x19 的区域用于存放海报。然后，应当有两行电影图像，图像与图像之间相隔 6 像素。最左侧的图像应当距贴图集左边缘 16 像素。（电影无需使用全部图片槽位。）
</p>
</td></tr>
<tr>
<td><samp>CranePrizes</samp>
</td>
<td>（可选）此电影上映当日添加到<a href="/%E7%94%B5%E5%BD%B1%E9%99%A2#.E6.8A.93.E5.A8.83.E5.A8.83" title="电影院">抓娃娃机</a>奖池的物品，若有。
<p>此字段为包含如下字段的数据模型所组成的列表：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td>通用字段
</td>
<td>参见<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2#.E7.89.A9.E5.93.81.E7.94.9F.E6.88.90.E5.AD.97.E6.AE.B5" title="模组:物品查询">物品生成字段</a>以了解受支持的通用物品字段。
<p>若设为返回多个物品的<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2" title="模组:物品查询">物品查询</a>，则随机选取一个。
</p>
</td></tr>
<tr>
<td><samp>Rarity</samp>
</td>
<td>（可选）添加此物品到哪个奖池。可用的取值为 <samp>1</samp>（普通）、<samp>2</samp>（稀有）、<samp>3</samp>（豪华）。默认为 <samp>1</samp>。
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>ClearDefaultCranePrizeGroups</samp>
</td>
<td>（可选）需要弃用默认物品的奖池，也就是仅使用 <samp>CranePrizes</samp> 中指定的物品。默认为空。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;ClearDefaultCranePrizeGroups&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">]</span>
</pre></div>
</td></tr></tbody></table>
</dd>

<dt>其他更改</dt>
<dd>
<ul><li><samp>Data/Movies</samp>、<samp>Data/Concessions</samp> 和 <samp>Data/MoviesReactions</samp> 不再有语言变体。与之相对地，翻译被迁移到了 <samp>Strings/*</samp> 素材文件，而数据素材使用<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>来获取相应文本。</li>
<li>现在 <samp>Data/Movies</samp> 为一个列表而非字典。次序决定了电影在同一季节上映的顺序。内容包编辑它们的方式与之前相同。</li>
<li>新增了一个 <samp>debug movieSchedule <code title="可选字段 &#39;year&#39;">[year]</code></samp> 命令用于辅助选择电影的故障排查。</li>
<li>新增了 C# 模组方法：<samp>MovieTheater.GetMovieToday()</samp>、<samp>GetUpcomingMovie()</samp> 和 <samp>GetUpcomingMovie(afterDate)</samp>。</li></ul>
</dd>
</dl>
<p>例如，下面的内容包新增了一个《Pufferchick II》电影，在第三年冬天上映。
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.5.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/Movies&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;{{ModId}}_PufferchickII&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ModId}}_PufferchickII&quot;</span><span class="p">,</span> <span class="c1">// must specify ID again when creating a new entry</span>

                    <span class="s2">&quot;Seasons&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;winter&quot;</span> <span class="p">],</span>
                    <span class="s2">&quot;YearModulus&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
                    <span class="s2">&quot;YearRemainder&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

                    <span class="s2">&quot;Title&quot;</span><span class="o">:</span> <span class="s2">&quot;Pufferchick II&quot;</span><span class="p">,</span> <span class="c1">// display text should usually use {{i18n}} for translations in actual usage</span>
                    <span class="s2">&quot;Description&quot;</span><span class="o">:</span> <span class="s2">&quot;A sequel to the breakthrough adventure anime Pufferchick. The world is saved; what happens next?&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Tags&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;family&quot;</span><span class="p">,</span> <span class="s2">&quot;adventure&quot;</span> <span class="p">],</span>

                    <span class="s2">&quot;Texture&quot;</span><span class="o">:</span> <span class="s2">&quot;{{InternalAssetKey: assets/movie.png}}&quot;</span><span class="p">,</span> <span class="c1">// an image in your content pack</span>
                    <span class="s2">&quot;SheetIndex&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

                    <span class="s2">&quot;Scenes&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="p">...</span> <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3><span id="自定义婚礼事件"></span><span class="mw-headline" id=".E8.87.AA.E5.AE.9A.E4.B9.89.E5.A9.9A.E7.A4.BC.E4.BA.8B.E4.BB.B6">自定义婚礼事件</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至新的文档页面。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<p>现在可以通过编辑 <samp>Data\Weddings</samp> 数据素材来改变<a href="/%E5%A9%9A%E5%A7%BB#.E5.A9.9A.E7.A4.BC" title="婚姻">婚礼</a>，此素材文件内含一个两字段数据模型（见下文）：
</p>
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>EventScript</samp>
</td>
<td>婚礼播放的<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:事件数据">事件脚本</a>。游戏会使用配偶 NPC/玩家的对应脚本；若不存在，则会使用默认脚本。
<p>此字段为一个“字符串 → 字符串”字典，其中：
</p>
<ul><li>键名为 NPC 内部名称（例如 <samp>Abigail</samp>）、唯一玩家 ID 或 <samp>default</samp>（默认脚本）。</li>
<li>值为欲播放事件的<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。</li></ul>
<p>事件脚本可以接受如下三种额外标记：
</p>
<table class="wikitable">

<tbody><tr>
<th>标记
</th>
<th>效果
</th></tr>
<tr>
<td><samp>[SetupContextualWeddingAttendees]</samp>
</td>
<td>把所有 <samp>Attendees</samp> 的 <samp>Setup</samp> 值连接在一起得到的字符串。
</td></tr>
<tr>
<td><samp>[ContextualWeddingCelebrations]</samp>
</td>
<td>把所有 <samp>Attendees</samp> 的 <samp>Celebration</samp> 值连接在一起得到的字符串。
</td></tr>
<tr>
<td><samp>[SpouseActor]</samp>
</td>
<td>结婚 NPC/玩家 的演员 ID（例如 <samp>Abigail</samp> 或 <samp>farmer2</samp>）。可以用于事件命令，例如 <code>faceDirection [SpouseActor] 1</code>。
<p>（您也可以使用 <samp>spouse</samp> 作为演员 ID，但仅适用于已与 NPC 结婚的情况）。 
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Attendees</samp>
</td>
<td>应当参加婚礼的其他 NPC（除非其为新人）。此字段为一个“字符串 → 数据模型”查询，其中键为 NPC 内部名，值为包含如下字段的数据模型：
<table class="wikitable">

<tbody><tr>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>内部 NPC 名称。
</td></tr>
<tr>
<td><samp>Setup</samp>
</td>
<td>NPC 参与婚礼时的地块坐标和面部朝向。这相当于<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE#.E5.9F.BA.E6.9C.AC.E6.A0.BC.E5.BC.8F" title="模组:事件数据">事件基本数据</a>中的字段 2。
</td></tr>
<tr>
<td><samp>Celebration</samp>
</td>
<td>（可选）庆祝时欲运行的<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:事件数据">事件脚本</a>，例如 <samp>faceDirection Pierre 3 true</samp> 使得皮埃尔面向左。此字段可以包含任意数量的脚本命令。
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td>（可选）一个<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>，指示该 NPC 是否应当参与。默认为 true。
</td></tr>
<tr>
<td><samp>IgnoreUnlockConditions</samp>
</td>
<td>（可选）若此 NPC 的 <samp>Data/Characters</samp> 的 <samp>UnlockConditions</samp> 字段匹配失败，是否强制添加此 NPC。默认为 false。
</td></tr></tbody></table>
</td></tr></tbody></table>
<h3><span id="游戏状态查询"></span><span class="mw-headline" id=".E6.B8.B8.E6.88.8F.E7.8A.B6.E6.80.81.E6.9F.A5.E8.AF.A2">游戏状态查询</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">模组:游戏状态查询</a>。此小节主要用于叙述更新内容。</div>
<p><b>游戏状态查询</b>是原版新增的一种逻辑，用于指定某些内容的触发条件，如<a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店">商店数据</a>。其灵感来自 <a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a> 的条件。
</p>
<h3><span id="性别更改"></span><span class="mw-headline" id=".E6.80.A7.E5.88.AB.E6.9B.B4.E6.94.B9">性别更改</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84:%E5%AF%B9%E8%AF%9D" title="模组:对话">模组:对话</a>。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<ul><li>新增了一个<a href="#gender-switch"><b>内联性别切换标识</b></a>用于依据玩家性别改变相应文本。这减少了重复的文本，比 <samp>^</samp> 用途更广泛，可用于信件或其他不能使用 <samp>^</samp> 来切换性别的地方，且支持更多性别。</li>
<li>对于 C# 模组作者，新增了一个统一的 <samp>Gender</samp> 字段以用于玩家和 NPC 的性别，取值可能为 <samp>Male</samp>、<samp>Female</samp> 和 <samp>Unspecified</samp>。此字段取代了 <samp>Farmer.isMale</samp> 和 NPC 性别数值常量。注意原版游戏仅能创建男性或女性玩家，尽管模组可以覆盖此逻辑。</li>
<li>现在取消了男（女）性玩家只能穿男（女）款衣服的限制。</li>
<li>移除了在非对话文本中使用 <samp>^</samp> 标记仅用于法语的问题。这被一个新增的内联性别切换标识取代。</li></ul>
<h3><span id="物品查询"></span><span class="mw-headline" id=".E7.89.A9.E5.93.81.E6.9F.A5.E8.AF.A2">物品查询</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2" title="模组:物品查询">模组:物品查询</a>。此小节主要用于叙述更新内容。</div>
<p><b>物品查询</b>是原版新增的一种逻辑，用于动态地选择一个或多个物品，而无需指定单个物品ID。它适用于各种地方，如<a href="/%E6%A8%A1%E7%BB%84:%E6%9C%BA%E5%99%A8" title="模组:机器">机器数据</a>和<a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店">商店数据</a>。
</p><p>例如，商店可以使用 <samp>RANDOM_ITEMS</samp> 物品查询来出售随机的<a href="/%E5%AE%B6%E5%B1%85%E6%A4%8D%E7%89%A9" title="家居植物">家居植物</a>：
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;ItemId&quot;</span><span class="p">:</span> <span class="s2">&quot;RANDOM_ITEMS (F) 1376 1390&quot;</span><span class="p">,</span>
    <span class="nt">&quot;MaxItems&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
<h3><span id="物品生成字段"></span><span class="mw-headline" id=".E7.89.A9.E5.93.81.E7.94.9F.E6.88.90.E5.AD.97.E6.AE.B5">物品生成字段</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2#.E7.89.A9.E5.93.81.E7.94.9F.E6.88.90.E5.AD.97.E6.AE.B5" title="模组:物品查询">模组:物品查询#物品生成字段</a>。此小节主要用于叙述更新内容。</div>
<p>多个数据素材（如<a href="/%E6%A8%A1%E7%BB%84:%E6%9C%BA%E5%99%A8" title="模组:机器">机器</a>和<a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店">商店</a>）允许您使用物品查询来指定欲生成的物品。为了保持一致性，这些素材共享一组通用字段，即“物品生成字段”。
</p>
<h3><span id="颜色字段"></span><span class="mw-headline" id=".E9.A2.9C.E8.89.B2.E5.AD.97.E6.AE.B5">颜色字段</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E9.A2.9C.E8.89.B2" title="模组:公共数据字段">模组:公共数据字段#颜色</a>。此小节主要用于叙述更新内容。</div>
<p>1.6 版本添加了标准化颜色格式，用于各种数据字段。颜色值可以是颜色名称、十六进制颜色代码或 8 位 RGB 颜色代码。
</p><p>例如，您可以在 <a href="/%E6%A8%A1%E7%BB%84:%E9%87%8E%E6%A0%91" title="模组:野树"><samp>Data/WildTrees</samp></a> 中设置落叶颜色：
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;DebrisColor&quot;</span><span class="err">:</span> <span class="s2">&quot;White&quot;</span>
</pre></div>
<h3><span id="modData_字段更改"></span><span class="mw-headline" id="modData_.E5.AD.97.E6.AE.B5.E6.9B.B4.E6.94.B9"><samp>modData</samp> 字段更改</span></h3>
<p><samp>modData</samp> 字段是任意字符串值的字典，可以在多人游戏中同步，且会保存到存档文件中，因此模组可以存储实例的自定义数据。此字段现已支持存储建筑、角色（包括 NPC 和玩家）、物品、地点和地形特征。
</p><p>星露谷物语 1.6
</p>
<ul><li>向 <samp>Crop</samp>、<samp>Projectile</samp> 和 <samp>Quest</samp> 类型新增了 <samp>modData</samp> 字段。</li>
<li>将 <samp>ModDataDictionary</samp> 移动到 <samp>StardewValley.Mods</samp> 命名空间。</li>
<li>修复了进行特殊设备代换（例如把<a href="/%E6%B7%98%E7%9B%98" title="淘盘">淘盘</a>当作帽子）时 <samp>Item.modData</samp> 不能同步复制的问题。</li></ul>
<h3><span id="数量修饰器"></span><span class="mw-headline" id=".E6.95.B0.E9.87.8F.E4.BF.AE.E9.A5.B0.E5.99.A8">数量修饰器</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E6.95.B0.E9.87.8F.E4.BF.AE.E9.A5.B0.E5.99.A8" title="模组:公共数据字段">模组:公共数据字段#数量修饰器</a>。此小节主要用于叙述更新内容。</div>
<p><b>数量修饰器</b>用于动态地更改素材中的数字字段，如 <a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店"><samp>Data/Shops</samp></a> 或 <a href="/%E6%A8%A1%E7%BB%84:%E6%9C%BA%E5%99%A8" title="模组:机器"><samp>Data/Machines</samp></a>。例如，您可以将商店物品的价格翻倍或提高机器输出产品的质量。您可以为同一字段叠加任意数量的修饰器。
</p>
<h3><span id="模板字符串格式"></span><span class="mw-headline" id=".E6.A8.A1.E6.9D.BF.E5.AD.97.E7.AC.A6.E4.B8.B2.E6.A0.BC.E5.BC.8F">模板字符串格式</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模组:模板字符串</a>。此小节主要用于叙述更新内容。</div>
<p>Stardew Valley 1.6 添加了<b>模板字符串</b>，使您可以自由地组合纯文本和标记。模板字符串使用一组内置标记来表达特定内容，如 <samp>FarmName</samp>、<samp>LocalizedText</samp> 等。
</p><p>例如，以前您通常需要从<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E7.BF.BB.E8.AF.91.E9.94.AE" title="模组:公共数据字段">翻译键</a>加载文本。而通过模板字符串，您可以直接在素材中使用文字文本（包括<a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a>标记）：
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="err">//</span> <span class="err">以前</span>
<span class="s2">&quot;Dialogue&quot;</span><span class="err">:</span> <span class="s2">&quot;Strings\\StringsFromCSFiles:ShopMenu.cs.11488&quot;</span><span class="err">,</span>

<span class="err">//</span> <span class="err">现在：自由组合纯文本和标记</span>
<span class="s2">&quot;Dialogue&quot;</span><span class="err">:</span> <span class="s2">&quot;Welcome to Pierre&#39;s，{{PlayerName}}！How is [FarmName] doing?&quot;</span><span class="err">,</span>
</pre></div>
<p>模板字符串仅在特定字段中可用（如 wiki 或代码文档中所示）。
</p><p>请参阅<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模组:模板字符串</a>了解用法。
</p>
<h3><span id="事件更改"></span><span class="mw-headline" id=".E4.BA.8B.E4.BB.B6.E6.9B.B4.E6.94.B9"><a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:事件数据">事件</a>更改</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:事件数据">模组:事件数据</a>。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<h4><span id="高级更改"></span><span class="mw-headline" id=".E9.AB.98.E7.BA.A7.E6.9B.B4.E6.94.B9">高级更改</span></h4>
<ul><li>现在事件 ID 是<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串 ID</a>，因此模组可以避免与其他模组发生键名冲突。非条件事件必须在其键名中包含一个空的事件前提（例如 <samp>"Example.ModId_EventName/"</samp>），以将其与分支区分开来。</li>
<li>现在包含一个直接参数的事件/节日命令可以使用大小写不敏感的名称 <samp>up</samp> 或数值作为参数。</li>
<li>现在事件脚本错误被计入日志（且仍会像旧版那样在聊天框中显示）。</li>
<li>对于 C# 模组:
<ul><li>现在可以使用新增的 <samp>Event</samp> 方法（<samp>RegisterPrecondition</samp>、<samp>RegisterPreconditionAlias</samp>、<samp>RegisterCommand</samp> 和 <samp>RegisterCommandAlias</samp>）来添加自定义事件前提和命令。</li>
<li>新增了 <samp>Event.fromAssetName</samp>，指示此事件所在的数据素材（若有）。</li>
<li>新增了 <samp>Game1.eventsSeenSinceLastLocationChange</samp> 用于跟踪从玩家到达当前地点到现在位置播放过的事件。</li></ul></li></ul>
<h4><span id="事件前提更改"></span><span class="mw-headline" id=".E4.BA.8B.E4.BB.B6.E5.89.8D.E6.8F.90.E6.9B.B4.E6.94.B9">事件前提更改</span></h4>
<ul>
<li>添加了前提条件的验证。如果格式或假设无效，游戏现在会记录详细的错误。</li>
<li>为所有前提条件添加了不区分大小写的可读名称。</li>
<li>事件和前提条件现在支持引号，因此您可以在参数中转义空格和斜杠。</li>
<li>添加了新的前提条件，并使一些旧的前提条件更加灵活。</li>
</ul>
<h4><span id="命令更改"></span><span class="mw-headline" id=".E5.91.BD.E4.BB.A4.E6.9B.B4.E6.94.B9">命令更改</span></h4>
<ul>
<li>添加了事件命令的验证。若格式或假设无效，则游戏会记录一个详细的错误，且（若可用）跳过该命令，而不是直接崩溃或忽略命令。这也意味着对事件参数的要求更严格（例如，不再能将 true/false 字段设为无效值，加引号的参数内部的引号需要转义，等等）。</li>
<li>现在事件命令能够识别引号，因此您可以转义参数中的空格或斜杠，例如 <code>/speak "I'm running A/B tests"/</code>。</li>
<li>现在事件命令会去除首尾的空白字符，因此可以换行以提高可读性。换行符必须在 <samp>/</samp> 分隔符之前或之后。示例：
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;SomeEventId/&quot;</span><span class="o">:</span> <span class="s2">&quot;</span>
<span class="s2">    none/</span>
<span class="s2">    -1000 -1000/</span>
<span class="s2">    farmer 5 7 0/</span>
<span class="s2">    ...</span>
<span class="s2">&quot;</span>
</pre></div>
<p>这也可以与<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE#.E6.B3.A8.E9.87.8A" title="模组:事件数据">注释语法</a>相结合，以添加注释（提醒：不能在前三个命令中使用注释）。示例：
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;SomeEventId/&quot;</span><span class="o">:</span> <span class="s2">&quot;</span>
<span class="s2">    none/            </span>
<span class="s2">    -1000 -1000/     </span>
<span class="s2">    farmer 5 7 0/    -- actor positions/</span>
<span class="s2">    ...</span>
<span class="s2">&quot;</span>
</pre></div>
</li>
<li>现在您可以在事件命令中向 NPC 名称添加 <code>?</code> 后缀，表示此 NPC 可选。例如，<code>jump Kent?</code> 使得肯特失踪时不会报错。当用在第一个事件位置时，则仅当 NPC 在 <samp>Data/Characters</samp> 中存在且 <samp>UnlockConditions</samp> 匹配成功时才会添加此 NPC。
</li>
<li>新增了事件命令：
<table class="wikitable">

<tbody><tr>
<th>命令
</th>
<th>描述
</th></tr>
<tr>
<td><samp>action <code title="必需字段 &#39;action&#39;">&lt;action&gt;</code></samp>
</td>
<td>运行一个<a href="/%E6%A8%A1%E7%BB%84:%E8%A7%A6%E5%8F%91%E5%8A%A8%E4%BD%9C" title="模组:触发动作">触发动作字符串</a>，例如 <samp>action AddMoney 500</samp> 代表给予当前玩家 <span style="display: none;">data-sort-value="500"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />500金</span>。
</td></tr>
<tr>
<td><samp>addItem <code title="必需字段 &#39;item ID&#39;">&lt;item ID&gt;</code> <code title="可选字段 &#39;count&#39;">[count]</code> <code title="可选字段 &#39;quality&#39;">[quality]</code></samp>
</td>
<td>向玩家背包添加一个物品（若物品栏已满，则打开一个菜单）。其中 <code title="必需字段 &#39;item ID&#39;">&lt;item ID&gt;</code> 可以为<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E7.89.A9.E5.93.81ID" title="模组:公共数据字段">限定性或非限定性物品 ID</a>，而 <code title="可选字段 &#39;quality&#39;">[quality]</code> 是<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%95%B0%E6%8D%AE#.E5.93.81.E8.B4.A8" title="模组:物品数据">品质数值</a>。
</td></tr>
<tr>
<td><samp>addSpecialOrder <code title="必需字段 &#39;order ID&#39;">&lt;order ID&gt;</code></samp><br /><samp>removeSpecialOrder <code title="必需字段 &#39;order ID&#39;">&lt;order ID&gt;</code></samp>
</td>
<td>为玩家队伍添加或移除一个特别任务。此命令影响所有玩家，因为特别任务是共享的。
</td></tr>
<tr>
<td><samp>eventSeen <code title="必需字段 &#39;event ID&#39;">&lt;event ID&gt;</code> <code title="可选字段 &#39;seen&#39;">[seen]</code></samp>
</td>
<td>在玩家的已看过事件列表中添加/移除指定的事件 ID。参数 <code title="可选字段 &#39;seen&#39;">[seen]</code> 为 true 代表添加，反之代表移除。默认为 true。
<p>一个事件可以使用 <samp>eventSeen <code title="必需字段 &#39;event ID&#39;">&lt;event ID&gt;</code> false</samp> 命令来将其<b>自身</b>标记为未看过。这会立即生效（即，事件结束后不会添加到已看过事件列表中），但是游戏会阻止此事件再次播放，直到玩家改变地点，以避免事件循环。当玩家重新进入此地点时，此事件还会播放。
</p>
</td></tr>
<tr>
<td><samp>mailToday <code title="必需字段 &#39;mail key&#39;">&lt;mail key&gt;</code></samp>
</td>
<td>立即向邮箱中添加一封信，参数 <code title="必需字段 &#39;mail key&#39;">&lt;mail key&gt;</code> 代表 <samp>Data/Mail</samp> 中的信件键。
</td></tr>
<tr>
<td><samp>questionAnswered <code title="必需字段 &#39;answer ID&#39;">&lt;answer ID&gt;</code> <code title="可选字段 &#39;answered&#39;">[answered]</code></samp>
</td>
<td>在玩家对话回答列表中添加/移除一个答案 ID。若 <code title="可选字段 &#39;answered&#39;">[answered]</code> 为 true 则添加，反之则移除。默认为 true&gt;
</td></tr>
<tr>
<td><samp>replaceWithClone <code title="必需字段 &#39;NPC name&#39;">&lt;NPC name&gt;</code></samp>
</td>
<td>使用一个临时副本替换已在此事件中的 NPC。这用于修改事件中的 NPC 而避免对真实 NPC 造成影响。
<p>下面的例子替换了玛妮在事件中的姓名和肖像：
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Some.ModId_ExampleEvent/&quot;</span><span class="o">:</span> <span class="s2">&quot;continue/64 15/farmer 64 15 2 Marnie 64 17 0/replaceWithClone Marnie/changeName Marnie Pufferchick/changePortrait Marnie Pufferchick/[...]/end&quot;</span>
</pre></div>
</td></tr>
<tr>
<td><samp>setSkipActions <code title="可选字段 &#39;actions&#39;">[actions]</code></samp>
</td>
<td>设置玩家跳过事件时应当运行的<a href="/%E6%A8%A1%E7%BB%84:%E8%A7%A6%E5%8F%91%E5%8A%A8%E4%BD%9C" title="模组:触发动作">触发动作</a>。您可以列出多条动作，使用 <samp>#</samp> 进行分隔。您也可以省略参数，代表不运行动作。当玩家跳过事件时，会使用最新的 <samp>setSkipActions</samp>。
<p>例如，下面的代码在玩家跳过事件时给予其<a href="/%E8%8A%B1%E7%9B%86" title="花盆">花盆</a>。如果该事件已经给了玩家一个花盆，然后玩家选择跳过事件剩余部分，则不会获得额外的花盆。
</p>
<pre>/setSkipActions AddCraftingRecipe Current "Garden Pot"#AddItem (BC)62
/skippable
/...
/addItem (BC)62
/setSkipActions AddCraftingRecipe Current "Garden Pot"
</pre>
<p>若事件正常完成而没有被跳过，则不会触发此事件。
</p>
</td></tr>
<tr>
<td><samp>stopSound <code title="必需字段 &#39;sound ID&#39;">&lt;sound ID&gt;</code> <code title="可选字段 &#39;immediate&#39;">[immediate]</code></samp>
</td>
<td>停止播放 <samp>startSound</samp> 命令播放的声音。这对于已经播放结束或还未开始播放的声音并无影响。若您播放了多个 ID 相同的声音，则此命令会将其全部停止（例如 <code>startSound fuse/startSound fuse/stopSound fuse</code>）。
<p>默认情况下，声音会立即停止播放。对于循环播放的声音，可以将 <code title="可选字段 &#39;immediate&#39;">[immediate]</code> 设为 <samp>false</samp> 代表播放完这一轮再停止播放（例如 <code>stopSound fuse false</code>）。
</p>
</td></tr>
<tr>
<td><samp>temporaryAnimatedSprite ...</samp>
</td>
<td>向此事件添加一个临时动画贴图，使用如下字段，用空格分隔：
<table class="wikitable">

<tbody><tr>
<th>索引
</th>
<th>字段
</th>
<th>效果
</th></tr>
<tr>
<td>0
</td>
<td><samp>texture</samp>
</td>
<td>贴图集素材名称。
</td></tr>
<tr>
<td>1&#8211;4
</td>
<td><samp>rectangle</samp>
</td>
<td><samp>texture</samp> 中欲绘制的像素区域，依次为 <samp><code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> <code title="必需字段 &#39;width&#39;">&lt;width&gt;</code> <code title="必需字段 &#39;height&#39;">&lt;height&gt;</code></samp>。
</td></tr>
<tr>
<td>5
</td>
<td><samp>interval</samp>
</td>
<td>动画中每帧的停留时间。
</td></tr>
<tr>
<td>6
</td>
<td><samp>frames</samp>
</td>
<td>帧数。
</td></tr>
<tr>
<td>7
</td>
<td><samp>loops</samp>
</td>
<td>重复播放此动画的次数。
</td></tr>
<tr>
<td>8&#8211;9
</td>
<td><samp>tile</samp>
</td>
<td>绘制此贴图的地块坐标，形如 <samp><code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp>。
</td></tr>
<tr>
<td>10
</td>
<td><samp>flicker</samp>
</td>
<td>是否使贴图重复闪烁。
</td></tr>
<tr>
<td>11
</td>
<td><samp>flip</samp>
</td>
<td>是否水平翻转贴图。
</td></tr>
<tr>
<td>12
</td>
<td><samp>sort tile Y</samp>
</td>
<td>用于计算图层深度的地块 Y 坐标，会影响两个贴图重叠时绘制的先后顺序。数值越大，图层越高。
</td></tr>
<tr>
<td>13
</td>
<td><samp>alpha fade</samp>
</td>
<td>基于设置的透明度值使贴图淡出。数字越大，淡出越快。1 代表立即淡出。
</td></tr>
<tr>
<td>14
</td>
<td><samp>scale</samp>
</td>
<td>将贴图尺寸乘以此值（会与正常情况下的 4× 像素拉伸叠加）。
</td></tr>
<tr>
<td>15
</td>
<td><samp>scale change</samp>
</td>
<td>根据应用在正常缩放基础上的乘数来改变缩放比例。持续不断。
</td></tr>
<tr>
<td>16
</td>
<td><samp>rotation</samp>
</td>
<td>应用于此贴图的旋转，为<a href="https://en.wikipedia.org/wiki/radians" class="extiw" title="wikipedia:radians">弧度制</a>。
</td></tr>
<tr>
<td>17
</td>
<td><samp>rotation change</samp>
</td>
<td>不断旋转贴图，速度取决于输入值。
</td></tr>
<tr>
<td>18+
</td>
<td>标识
</td>
<td>下列空格分隔的标识的任意组合：
<ul><li><samp>color <code title="必需字段 &#39;color&#39;">&lt;color&gt;</code></samp>：将一个<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E9.A2.9C.E8.89.B2" title="模组:公共数据字段">标准颜色</a>应用于此贴图。</li>
<li><samp>hold_last_frame</samp>：在动画播放完毕后立即冻结最后一帧。</li>
<li><samp>ping_pong</samp>：导致动画各帧“回文”播放：例如，假设一个动画有 0、1、2 三帧，没有此标识时其播放顺序为 "0 1 2 0 1 2"，有此标识时则为 "0 1 2 1 0" 。</li>
<li><samp>motion <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp>：根据设置的取值移动贴图。可以去负数和小数。</li>
<li><samp>acceleration <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp>: <b>[TODO: 记录此条目功能]</b></li>
<li><samp>acceleration_change <code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code></samp>: <b>[TODO: 记录此条目功能]</b></li></ul>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>translateName <code title="必需字段 &#39;actor&#39;">&lt;actor&gt;</code> <code title="必需字段 &#39;translation key&#39;">&lt;translation key&gt;</code></samp>
</td>
<td>设置 NPC 在事件中的显示名称。
</td></tr>
<tr>
<td><samp>warpFarmers [<code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> <code title="必需字段 &#39;direction&#39;">&lt;direction&gt;</code>]+ <code title="必需字段 &#39;default offset&#39;">&lt;default offset&gt;</code> <code title="必需字段 &#39;default x&#39;">&lt;default x&gt;</code> <code title="必需字段 &#39;default&#39;">&lt;default&gt;</code> <code title="必需字段 &#39;direction&#39;">&lt;direction&gt;</code></samp>
</td>
<td>将联机的玩家传送到给定的<a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/%E6%B8%B8%E6%88%8F%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84#.E5.9C.B0.E5.9D.97" title="模组:制作指南/游戏基本架构">地块坐标</a>和<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE#.E6.9C.9D.E5.90.91" title="模组:事件数据">数值型面部朝向</a>。<code title="必需字段 &#39;x&#39;">&lt;x&gt;</code> <code title="必需字段 &#39;y&#39;">&lt;y&gt;</code> <code title="必需字段 &#39;direction&#39;">&lt;direction&gt;</code> 三元组会依次应用于每个联机玩家（例如，第一个三元组用于房主，第二个三元组用于第一个农场帮手，等等）。三元组之后是一个偏移方向（可以是 <samp>up</samp>、<samp>down</samp>、<samp>left</samp>或<samp>right</samp> 中的一个），以及一个末尾三元组，该三元组定义了任何其他玩家使用的默认值。
</td></tr></tbody></table>
</li>
<li>修复了一些命令在存在布尔参数时假设其为 true，无论其值是什么。这影响了<samp>changeToTemporaryMap</samp>、<samp>emote</samp>、<samp>extendSourceRect</samp>、<samp>faceDirection</samp>、<samp>globalFade</samp>、<samp>globalFadeToClear</samp>、<samp>positionOffset</samp> 和 <samp>warp</samp>命令。</li>
<li>修复了一些命令假设除了 <samp>true</samp>（大小写敏感）之外的任何值都是假的。这影响了<samp>animate</samp>、<samp>glow</samp>、<samp>hideShadow</samp>、<samp>ignoreMovementAnimation</samp>、<samp>temporaryAnimatedSprite</samp>、<samp>temporarySprite</samp>和<samp>viewport</samp>命令。</li>
<li>修复了一些命令在无法将参数解析为预期类型的值时会静默地忽略这些参数。这影响了<samp>addItem</samp>、<samp>makeInvisible</samp>和<samp>removeItem</samp>命令。</li>
<li>修复了向一些命令传入不可用的 <samp>farmer[number]</samp>，或向预期 <samp>farmer</samp> 的命令传入 <samp>farmer[number]</samp> 时导致的崩溃。</li>
<li>修复了一些命令在检查 <samp>farmer*</samp> 演员 ID 时没有考虑自定义玩家演员。</li>
<li>修复了“传送出去”事件命令能够使用仅限NPC或有性别之分的传送点。现在如果可能的话，它们会使用对所有玩家可用的传送点。</li>
<li>更改了特定命令：
<table class="wikitable">

<tbody><tr>
<th>命令
</th>
<th>更改
</th></tr>
<tr>
<td><samp>addCookingRecipe</samp>
</td>
<td>修复了玩家已学会此配方的情况下会出错的问题。
</td></tr>
<tr>
<td><samp>addMailReceived</samp>
</td>
<td>&#32;
<ul><li>重命名为 <samp>mailReceived</samp>。（现在旧版名称作为别名存在，因此仍可用。）</li>
<li>您现在可以通过将第三个参数设为 false 来将收到的邮件设为未收到，例如  <samp>mailReceived <code title="必需字段 &#39;id&#39;">&lt;id&gt;</code> false</samp>。</li></ul>
</td></tr>
<tr>
<td><samp>addTemporaryActor</samp>
</td>
<td>&#32;
<ul><li>现在只有在没有找到精确匹配时，才会将素材名称中的下划线替换为空格。您应当使用引号括起包含空格的参数，例如：<code>addTemporaryActor "White Chicken" …</code>。</li>
<li>显示名称中的下划线不再被替换为空格。您应当使用引号括起包含空格的参数。</li>
<li>现在参数 9（<code title="可选字段 &#39;animal name&#39;">[animal name]</code>）是 <code title="可选字段 &#39;override name&#39;">[override name]</code>，可以用来设置非动物对象的名称。</li></ul>
</td></tr>
<tr>
<td><samp>animate</samp>
</td>
<td>现在只有在没有找到精确匹配时，才会将 NPC 名称中的下划线替换为空格。您应当使用引号括起包含空格的参数，例如：<code>animate "Mr Qi" …</code>.
</td></tr>
<tr>
<td><samp>ambientLight</samp>
</td>
<td>移除了四参数形式（因为未被使用，且行为迷惑）。<samp>ambientLight</samp> 的其他版本仍照常工作。
</td></tr>
<tr>
<td><samp>awardFestivalPrize</samp>
</td>
<td>新增了对任意物品 ID 的支持，例如 <code>awardFestivalPrize (O)128</code> 代表奖励一条河豚。
</td></tr>
<tr>
<td><samp>changeLocation</samp>
</td>
<td>现在会更新事件坐标偏移（如有需要）。
</td></tr>
<tr>
<td><samp>changeName</samp>
</td>
<td>NPC 名字中的下划线不再被替换未空格。您应当使用引号括起有空格的名字，例如 <code>changeName Leo "Neo Leo"</code>.
</td></tr>
<tr>
<td><samp>changePortrait</samp><br /><samp>changeSprite</samp>
</td>
<td>现在您可以忽略后缀参数，以将 NPC 重置回他们的正常肖像/贴图。
</td></tr>
<tr>
<td><samp>faceDirection</samp>
</td>
<td>您现在可以使用英文名指定面部朝向，例如 <samp>faceDirection up</samp>
</td></tr>
<tr>
<td><samp>ignoreMovementAnimation</samp>
</td>
<td>&#32;
<ul><li>修复了其 "ignore" 参数被忽略的问题。</li>
<li>现在只有在没有找到精确匹配时，才会将 NPC 名称中的下划线替换为空格。您应当使用引号括起包含空格的参数，例如：<code>ignoreMovementAnimation "Mr Qi" …</code>.</li></ul>
</td></tr>
<tr>
<td><samp>itemAboveHead</samp>
</td>
<td>新增了对任意物品 ID 的支持，例如 <code>awardFestivalPrize (O)128</code> 代表奖励一条河豚。
</td></tr>
<tr>
<td><samp>makeInvisible</samp>
</td>
<td>修复了使用默认区域大小时，地形特征未被隐藏的问题。
</td></tr>
<tr>
<td><samp>playSound</samp>
</td>
<td>命令 <samp>playSound</samp> 启动的音频现在会在事件结束时自动停止。
</td></tr>
<tr>
<td><samp>removeItem</samp>
</td>
<td>添加一个用于物品计数的可选参数，例如 <code>removeItem (O)128 10</code> 代表移除 10 条河豚。
</td></tr>
<tr>
<td><samp>speak</samp>
</td>
<td>修复了使用翻译键调用友谊和社交任务时后者不更新的问题。
</td></tr></tbody></table></li>
<li>移除了某些命令：
<table class="wikitable">

<tbody><tr>
<th>命令
</th>
<th>更改
</th></tr>
<tr>
<td><samp>addToTable</samp>
</td>
<td>已移除（未被使用，且反直觉）。
</td></tr>
<tr>
<td><samp>addTool</samp>
</td>
<td>已移除（未被使用，且仅支持<a href="/%E5%9B%9E%E7%A8%8B%E9%AD%94%E6%9D%96" title="回程魔杖">回程魔杖</a>）。请转而使用 <samp>addItem</samp>，后者可支持其他工具。
</td></tr>
<tr>
<td><samp>grabObject</samp>
</td>
<td>已移除（已损坏且未被使用）。
</td></tr>
<tr>
<td><samp>showRivalFrame</samp><br /><samp>taxVote</samp>
</td>
<td>已移除（为未实装功能的一部分）。
</td></tr>
<tr>
<td><samp>weddingSprite</samp>
</td>
<td>已移除（已损坏且未被使用）。
</td></tr></tbody></table>
</li></ul>
<h4><span id="节日更改"></span><span class="mw-headline" id=".E8.8A.82.E6.97.A5.E6.9B.B4.E6.94.B9">节日更改</span></h4>
<ul><li>现在可以将 <samp>Data/Festivals/*</samp> 中的 <samp>startedMessage</samp> 字段设为一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>，以自定义节日开始通知消息。</li>
<li>现在节日将事件 ID 设为像 <samp>festival_fall16</samp> 这样的值，而不是<samp>-1</samp>。</li>
<li>所有节日数据字段现在都支持<a href="/%E6%A8%A1%E7%BB%84:%E8%8A%82%E6%97%A5%E6%95%B0%E6%8D%AE#.E5.B9.B4.E5.8F.98.E4.BD.93" title="模组:节日数据">年变体</a>。</li>
<li>修复了如果 NPC 被多次添加到 <samp>set-up</samp> 字段中，就会在节日中被重复创建的问题。现在第一个条目后面的条目会导致 NPC 被移动而非重复创建。</li>
<li>修复了节日 <samp>set-up</samp> 字段的<a href="/%E6%A8%A1%E7%BB%84:%E8%8A%82%E6%97%A5%E6%95%B0%E6%8D%AE#.E5.B9.B4.E5.8F.98.E4.BD.93" title="模组:节日数据">年变体</a>被追加到主脚本中而不是替换它的问题。</li></ul>
<h4><span id="弃用发信前提（x）"></span><span class="mw-headline" id=".E5.BC.83.E7.94.A8.E5.8F.91.E4.BF.A1.E5.89.8D.E6.8F.90.EF.BC.88x.EF.BC.89">弃用发信前提（<samp>x</samp>）</span></h4>
<p>使用 <samp>x</samp> 事件前提作为发送信件的方式现已弃用（但仍然有效）。您应该使用<a href="#.E8.A7.A6.E5.8F.91.E5.8A.A8.E4.BD.9C">触发动作</a>来执行此类操作。
</p><p>所有使用它的原版事件已被等效的触发动作替换。以下事件ID不再存在；如果您检查它们（如使用 <samp>HasSeenEvent</samp>），您需要检查新动作或它们设置的信件标识：
</p>
<table class="wikitable">

<tbody><tr>
<th>旧事件 ID
</th>
<th>新动作 ID
</th>
<th>信件标识
</th></tr>
<tr>
<td><samp>68</samp>
</td>
<td><samp>Mail_Mom_5K</samp>
</td>
<td><samp>mom1</samp>
</td></tr>
<tr>
<td><samp>69</samp>
</td>
<td><samp>Mail_Mom_15K</samp>
</td>
<td><samp>mom2</samp>
</td></tr>
<tr>
<td><samp>70</samp>
</td>
<td><samp>Mail_Mom_32K</samp>
</td>
<td><samp>mom3</samp>
</td></tr>
<tr>
<td><samp>71</samp>
</td>
<td><samp>Mail_Mom_120K</samp>
</td>
<td><samp>mom4</samp>
</td></tr>
<tr>
<td><samp>72</samp>
</td>
<td><samp>Mail_Dad_5K</samp>
</td>
<td><samp>dad1</samp>
</td></tr>
<tr>
<td><samp>73</samp>
</td>
<td><samp>Mail_Dad_15K</samp>
</td>
<td><samp>dad2</samp>
</td></tr>
<tr>
<td><samp>74</samp>
</td>
<td><samp>Mail_Dad_32K</samp>
</td>
<td><samp>dad3</samp>
</td></tr>
<tr>
<td><samp>75</samp>
</td>
<td><samp>Mail_Dad_120K</samp>
</td>
<td><samp>dad4</samp>
</td></tr>
<tr>
<td><samp>76</samp>
</td>
<td><samp>Mail_Tribune_UpAndComing</samp>
</td>
<td><samp>newsstory</samp>
</td></tr>
<tr>
<td><samp>706</samp>
</td>
<td><samp>Mail_Pierre_Fertilizers</samp>
</td>
<td><samp>fertilizers</samp>
</td></tr>
<tr>
<td><samp>707</samp>
</td>
<td><samp>Mail_Pierre_FertilizersHighQuality</samp>
</td>
<td><samp>fertilizers2</samp>
</td></tr>
<tr>
<td><samp>909</samp>
</td>
<td><samp>Mail_Robin_Woodchipper</samp>
</td>
<td><samp>WoodChipper</samp>
</td></tr>
<tr>
<td><samp>2111194</samp>
</td>
<td><samp>Mail_Emily_8heart</samp>
</td>
<td><samp>EmilyClothingTherapy</samp>
</td></tr>
<tr>
<td><samp>2111294</samp>
</td>
<td><samp>Mail_Emily_10heart</samp>
</td>
<td><samp>EmilyCamping</samp>
</td></tr>
<tr>
<td><samp>2346091</samp>
</td>
<td><samp>Mail_Alex_10heart</samp>
</td>
<td><samp>joshMessage</samp>
</td></tr>
<tr>
<td><samp>2346092</samp>
</td>
<td><samp>Mail_Sam_10heart</samp>
</td>
<td><samp>samMessage</samp>
</td></tr>
<tr>
<td><samp>2346093</samp>
</td>
<td><samp>Mail_Harvey_10heart</samp>
</td>
<td><samp>harveyBalloon</samp>
</td></tr>
<tr>
<td><samp>2346094</samp>
</td>
<td><samp>Mail_Elliott_10heart</samp>
</td>
<td><samp>elliottBoat</samp>
</td></tr>
<tr>
<td><samp>2346095</samp>
</td>
<td><samp>Mail_Elliott_8heart</samp>
</td>
<td><samp>elliottReading</samp>
</td></tr>
<tr>
<td><samp>2346096</samp>
</td>
<td><samp>Mail_Penny_10heart</samp>
</td>
<td><samp>pennySpa</samp>
</td></tr>
<tr>
<td><samp>2346097</samp>
</td>
<td><samp>Mail_Abigail_8heart</samp>
</td>
<td><samp>abbySpiritBoard</samp>
</td></tr>
<tr>
<td><samp>3333094</samp>
</td>
<td><samp>Mail_Pierre_ExtendedHours</samp>
</td>
<td><samp>pierreHours</samp>
</td></tr>
<tr>
<td><samp>3872126</samp>
</td>
<td><samp>Mail_Willy_BackRoomUnlocked</samp>
</td>
<td><samp>willyBackRoomInvitation</samp>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Mail_changes"><a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">Mail</a> changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">模组:信件数据</a>。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<h3><span id="信件更改"></span><span class="mw-headline" id=".E4.BF.A1.E4.BB.B6.E6.9B.B4.E6.94.B9"><a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">信件</a>更改</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84:%E4%BF%A1%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:信件数据">模组:信件数据</a>。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<ul>
<li>现在信件可以附上多个物品（使用多个 <samp>%item</samp> 命令）。当玩家拿走第一个物品时，下一个物品会出现在槽中以备抓取。</li>
<li>新增了信件命令：
<table class="wikitable">

<tbody><tr>
<th>命令
</th>
<th>效果
</th></tr>
<tr>
<td><samp>%action <code title="必需字段 &#39;action&#39;">&lt;action&gt;</code>%%</samp>
</td>
<td>运行一个<a href="/%E6%A8%A1%E7%BB%84:%E8%A7%A6%E5%8F%91%E5%8A%A8%E4%BD%9C" title="模组:触发动作">触发动作字符串</a>，例如 <samp>%action AddMoney 500%%</samp> 代表给当前玩家 <span style="display: none;">data-sort-value="500"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />500金</span>。
</td></tr></tbody></table></li>
<li>改进了信件命令：
<table class="wikitable">

<tbody><tr>
<th>命令
</th>
<th>更改
</th></tr>
<tr>
<td><samp>%item</samp>
</td>
<td>&#32;
<ul><li>新增了 <samp>%item id <code title="必需字段 &#39;item id&#39;">&lt;item id&gt;</code> <code title="可选字段 &#39;count&#39;">[count]</code></samp> 语法，允许其中 <code title="必需字段 &#39;item id&#39;">&lt;item id&gt;</code> 接受限定性或非限定性物品 ID。若列出了多个物品（例如 <samp>%item id (BC)12 3 (O)34 5&#160;%%</samp>），则随机选取一个。这淘汰了 <samp>bigobject</samp>、<samp>furniture</samp>、<samp>object</samp> 和 <samp>tools</samp> 选项。</li>
<li>新增了 <samp>%item specialOrder <code title="必需字段 &#39;order id&#39;">&lt;order id&gt;</code> <code title="可选字段 &#39;immediately&#39;">[immediately]</code></samp> 语法，用于随信附上一个特别任务。</li>
<li>向 <samp>%item cookingRecipe <code title="必需字段 &#39;key&#39;">&lt;key&gt;</code></samp> 添加了一个可选的 <code title="必需字段 &#39;key&#39;">&lt;key&gt;</code> 参数，用于教会玩家<a href="/%E6%A8%A1%E7%BB%84:%E9%85%8D%E6%96%B9%E6%95%B0%E6%8D%AE" title="模组:配方数据">烹饪配方</a>。先前的 <samp>%item cookingRecipe</samp> 语法不受影响。</li>
<li>现在“类型”参数对大小写不敏感。</li>
<li>修复了 <samp>%item craftingRecipe</samp> 不支持含下划线的配方 ID。现在会先检查是否有逐字匹配的配方，然后再像旧版那样把下划线替换为空格，然后如果还没找到会记录一则警告，而不是添加无效配方。</li></ul>
</td></tr></tbody></table></li>
<li>现在所有<a href="/%E7%89%B9%E6%AE%8A%E7%89%A9%E5%93%81%E4%B8%8E%E8%83%BD%E5%8A%9B" title="特殊物品与能力">钱包物品</a>都由信件标识追踪。因此添加了如下信件标识：<samp>HasClubCard</samp>, <samp>HasDarkTalisman</samp>、<samp>HasDwarvishTranslationGuide</samp>、<samp>HasMagicInk</samp>、<samp>HasMagnifyingGlass</samp>、<samp>HasRustyKey</samp>、<samp>HasSkullKey</samp>、<samp>HasSpecialCharm</samp>、<samp>HasTownKey</samp>、<samp>HasUnlockedSkullDoor</samp>。</li>
<li>修复了打开无效信件时的错误。</li>
</ul>
<h3><span id="Stat_changes_for_C#_mods"></span><span class="mw-headline" id="Stat_changes_for_C.23_mods">Stat changes for C# mods</span></h3>
<h3><span id="C#模组统计数据更改"></span><span class="mw-headline" id="C.23.E6.A8.A1.E7.BB.84.E7.BB.9F.E8.AE.A1.E6.95.B0.E6.8D.AE.E6.9B.B4.E6.94.B9">C#模组统计数据更改</span></h3>
<p>跟踪统计信息的 API（例如 <code>Game1.stats</code> 和 <code>Game1.player.stats</code>）已经进行了全面改造。
</p><p>特别地，所有统计信息现在都在底层的统计字典中。如果您直接使用统计字段（如 <code>stats.dirtHoed</code>），您需要使用属性（如 <code>stats.DirtHoed</code>）或方法（如 <code>stats.Get(StatsKey.DirtHoed)</code>）。这使得游戏或模组能够以标准方式访问所有统计信息，而无需使用反射。1.6 版本还为游戏中跟踪的所有统计信息添加了 <samp>StatsKey</samp> 常量。
</p><p><samp>stats</samp> API 也被重新改造了：
</p>
<table class="wikitable">

<tbody><tr>
<th>成员
</th>
<th>注释
</th></tr>
<tr>
<td><samp>Values</samp>
</td>
<td>游戏跟踪的数值。这取代了 <samp>stats_dictionary</samp>。
</td></tr>
<tr>
<td><samp>Get(key)</samp>
</td>
<td>获取被跟踪的数值。这取代了 <samp>getStat</samp>。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">uint</span> <span class="n">daysPlayed</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">stats</span><span class="p">.</span><span class="n">Get</span><span class="p">(</span><span class="n">StatKeys</span><span class="p">.</span><span class="n">DaysPlayed</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Set(key, value)</samp>
</td>
<td>设置新的统计数值。此方法是新增的。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Game1</span><span class="p">.</span><span class="n">stats</span><span class="p">.</span><span class="n">Set</span><span class="p">(</span><span class="n">StatKeys</span><span class="p">.</span><span class="n">ChildrenTurnedToDoves</span><span class="p">,</span> <span class="m">5</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Increment(key)</samp><br /><samp>Increment(key, amount)</samp>
</td>
<td>将给定数量添加到统计信息中（默认为 1），并返回新的统计信息值。这改进了原来的 <samp>incrementStat</samp>。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">uint</span> <span class="n">stepsTaken</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">stats</span><span class="p">.</span><span class="n">Increment</span><span class="p">(</span><span class="n">StatKeys</span><span class="p">.</span><span class="n">StepsTaken</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
<p>这也可以用于跟踪自定义模组统计信息，它们不必是游戏通常跟踪的统计信息。自定义统计信息应以前缀您的模组唯一 ID 来避免冲突：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Game1</span><span class="p">.</span><span class="n">stats</span><span class="p">.</span><span class="n">Set</span><span class="p">(</span><span class="s">&quot;Your.ModId_CustomStat&quot;</span><span class="p">,</span> <span class="m">5</span><span class="p">);</span>
</pre></div>
<p>最后，现在将统计信息设置为 0 会将其从统计字典中移除（因为这是缺失的统计信息的默认值）。
</p>
<h3><span id="新增C#工具方法"></span><span class="mw-headline" id=".E6.96.B0.E5.A2.9EC.23.E5.B7.A5.E5.85.B7.E6.96.B9.E6.B3.95">新增C#工具方法</span></h3>
<p>星露谷物语 1.6 新增了一些方法用于简化通用逻辑。
</p>
<h4><span id="参数处理"></span><span class="mw-headline" id=".E5.8F.82.E6.95.B0.E5.A4.84.E7.90.86">参数处理</span></h4>
<p>新增的 <samp>ArgUtility</samp> 类可以用于分割、读取、验证 <samp>string[]</samp> 参数列表。主要的方法为：
</p>
<dl><dt>分割数组：</dt></dl>
<dl><dd><table class="wikitable">

<tbody><tr>
<th><samp>ArgUtility</samp> 方法
</th>
<th>效果
</th></tr>
<tr>
<td><samp>SplitBySpace</samp>
</td>
<td>按空格分割字符串中的参数。这会自动忽略多余的空格，因此 <samp>" x &#160;y "</samp> 和 <samp>"x y"</samp> 是等价的。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpace</span><span class="p">(</span><span class="s">&quot;a b c&quot;</span><span class="p">);</span>
<span class="kt">string</span> <span class="n">secondField</span> <span class="p">=</span> <span class="n">fields</span><span class="p">[</span><span class="m">1</span><span class="p">];</span> <span class="c1">// &quot;b&quot;</span>
</pre></div>
</td></tr>
<tr>
<td><samp>SplitBySpaceAndGet</samp>
</td>
<td>获取空格分隔的字符串中指定索引处的值（若有），否则返回默认值。示例：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">thirdField</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceAndGet</span><span class="p">(</span><span class="s">&quot;a b c&quot;</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span> <span class="c1">// &quot;c&quot;</span>
<span class="kt">string</span> <span class="n">invalidFieldA</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceAndGet</span><span class="p">(</span><span class="s">&quot;a b c&quot;</span><span class="p">,</span> <span class="m">5</span><span class="p">);</span> <span class="c1">// null</span>
<span class="kt">string</span> <span class="n">invalidFieldB</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceAndGet</span><span class="p">(</span><span class="s">&quot;a b c&quot;</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">:</span> <span class="s">&quot;boop&quot;</span><span class="p">);</span> <span class="c1">// &quot;boop&quot;</span>
</pre></div>
<p>当您只需要获取单个值时，此方法比 <samp>SplitBySpace</samp> 更高效，但如果您需要获取多个值，则比 <samp>SplitBySpace</samp> 更低效。
</p>
</td></tr>
<tr>
<td><samp>SplitBySpaceQuoteAware</samp>
</td>
<td>按空格将字符串分割为参数，支持双引号代表含空格参数。参见下文的 <samp>SplitQuoteAware</samp> 以了解如何处理双引号。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">buildingName</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceQuoteAware</span><span class="p">(</span><span class="s">&quot;BUILDINGS_CONSTRUCTED Here \&quot;Junimo Hut\&quot;&quot;</span><span class="p">)[</span><span class="m">1</span><span class="p">];</span> <span class="c1">// Junimo Hut</span>
</pre></div>
</td></tr>
<tr>
<td><samp>SplitQuoteAware</samp>
</td>
<td>按指定分隔符分割字符串，支持使用双引号保护单个参数内部的分隔符。
<p>文本中出现的双引号会导致忽略任何分隔符，直到下一个双引号出现，除非此双引号使用 <code>\"</code> 进行了转义。未转义的双引号会被删除。（注意 C# 或 JSON 字符串中，反斜杠应当转义，例如 <code>"\\"</code> 代表单个反斜杠）。
</p><p>例如：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitQuoteAware</span><span class="p">(</span><span class="s">&quot;A,B,C&quot;</span><span class="p">,</span> <span class="sc">&#39;,&#39;</span><span class="p">);</span>        <span class="c1">// [ &quot;A&quot;, &quot;B&quot;, &quot;C&quot; ]</span>
<span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitQuoteAware</span><span class="p">(</span><span class="s">&quot;A,\&quot;B,C\&quot;,D&quot;</span><span class="p">,</span> <span class="sc">&#39;,&#39;</span><span class="p">);</span> <span class="c1">// [ &quot;A&quot;, &quot;B,C&quot;, &quot;D&quot; ]</span>
<span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitQuoteAware</span><span class="p">(</span><span class="s">&quot;A,\\\&quot;B,C&quot;</span><span class="p">,</span> <span class="sc">&#39;,&#39;</span><span class="p">);</span>    <span class="c1">// [ &quot;A&quot;, &quot;\&quot;B&quot;, &quot;C&quot; ]</span>
</pre></div>
<p>您可以为更高级的情况设置可选参数。例如，<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>使用此功能来实现分割两次：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">gameStateQuery</span> <span class="p">=</span> <span class="s">&quot;BUILDINGS_CONSTRUCTED Here \&quot;Junimo Hut\&quot;, SEASON Spring&quot;</span><span class="p">;</span>

<span class="kt">string</span><span class="p">[]</span> <span class="n">queries</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitQuoteAware</span><span class="p">(</span><span class="n">gameStateQuery</span><span class="p">,</span> <span class="sc">&#39;,&#39;</span><span class="p">,</span> <span class="n">StringSplitOptions</span><span class="p">.</span><span class="n">RemoveEmptyEntries</span><span class="p">,</span> <span class="n">keepQuotesAndEscapes</span><span class="p">:</span> <span class="k">true</span><span class="p">);</span> <span class="c1">// [ &quot;BUILDINGS_CONSTRUCTED Here \&quot;Junimo Hut\&quot;&quot;, &quot;SEASON Spring&quot; ]</span>
<span class="kt">string</span> <span class="n">buildingName</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceQuoteAware</span><span class="p">(</span><span class="n">queries</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span> <span class="c1">// Junimo Hut</span>
</pre></div>
</td></tr>
<tr>
<td><samp>EscapeQuotes</samp>
</td>
<td>转义字符串内的引号，因此其会被 <samp>SplitQuoteAware</samp> 这样的方法忽略。
<p>此方法不是幂等的（即，调用两次会出现两层引号）。
</p>
</td></tr>
<tr>
<td><samp>UnsplitQuoteAware</samp>
</td>
<td>将一个参数数组使用指定分隔符打包为字符串，其中含此分隔符的字段会加上双引号转义。对返回的字符串使用 <samp>SplitQuoteAware</samp> 会得到原先的数组。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">args</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">UnsplitQuoteAware</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="s">&quot;B C&quot;</span><span class="p">,</span> <span class="s">&quot;D&quot;</span> <span class="p">},</span> <span class="sc">&#39; &#39;</span><span class="p">);</span> <span class="c1">// A &quot;B C&quot; D</span>
</pre></div>
<p>此方法不是幂等的（即，调用两次会出现两层引号）。
</p>
</td></tr></tbody></table></dd></dl>
<dl><dt>读取数组：</dt></dl>
<dl><dd><table class="wikitable">

<tbody><tr>
<th><samp>ArgUtility</samp> 方法
</th>
<th>效果
</th></tr>
<tr>
<td><samp>HasIndex</samp>
</td>
<td>判断索引是否没有超界。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">&quot;10 5&quot;</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">inRange</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">HasIndex</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// true (index 1 has the value &#39;5&#39;)</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Get</samp><br /><samp>GetBool</samp><br /><samp>GetDirection</samp><br /><samp>GetEnum</samp><br /><samp>GetFloat</samp><br /><samp>GetInt</samp>
</td>
<td>获取数组指定索引处的取值，会自动解析为相应的类型（例如字符串、布尔值、<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE#.E6.9C.9D.E5.90.91" title="模组:事件数据">direction</a>、枚举类型等）。若索引超界或无法解析对应的值，则返回默认值。
<p>例如，旧版中的如下代码：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="k">value</span> <span class="p">=</span> <span class="n">fields</span><span class="p">.</span><span class="n">Length</span> <span class="p">&gt;</span> <span class="m">4</span> <span class="p">&amp;&amp;</span> <span class="kt">int</span><span class="p">.</span><span class="n">TryParse</span><span class="p">(</span><span class="n">fields</span><span class="p">[</span><span class="m">4</span><span class="p">],</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">parsed</span><span class="p">)</span>
    <span class="p">?</span> <span class="n">parsed</span>
    <span class="p">:</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>
</pre></div>
<p>现在可以重写为这样：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="k">value</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetInt</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="p">-</span><span class="m">1</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGet</samp><br /><samp>TryGetBool</samp><br /><samp>TryGetDirection</samp><br /><samp>TryGetEnum</samp><br /><samp>TryGetFloat</samp><br /><samp>TryGetInt</samp><br /><samp>TryGetPoint</samp><br /><samp>TryGetRectangle</samp><br /><samp>TryGetVector2</samp>
</td>
<td>尝试获取数组指定索引处的取值。若无法找到或不能解析为对应类型，则会设置  <samp>out string error</samp> 参数，以便记录相应错误。
<p>例如，下面的代码可以从一个空格分隔的字符串读取数值：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">&quot;10 35&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">TryGetInt</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">error</span><span class="p">))</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Parsed value: {value}&quot;</span><span class="p">);</span> <span class="c1">// &quot;Parsed value: 35&quot;</span>
<span class="k">else</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Failed parsing value: {error}&quot;</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Warn</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGetOptional</samp><br /><samp>TryGetOptionalBool</samp><br /><samp>TryGetOptionalDirection</samp><br /><samp>TryGetOptionalEnum</samp><br /><samp>TryGetOptionalFloat</samp><br /><samp>TryGetOptionalInt</samp><br /><samp>TryGetOptionalRemainder</samp>
</td>
<td>等价于 <samp>TryGet*</samp>，但此方法在参数丢失时会返回默认值。例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">&quot;10&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">TryGetOptionalInt</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="n">error</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">:</span> <span class="m">99</span><span class="p">))</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Parsed value: {value}&quot;</span><span class="p">);</span> <span class="c1">// &quot;Parsed value: 99&quot;</span>
<span class="k">else</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Failed parsing value: {error}&quot;</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Warn</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>GetRemainder</samp><br /><samp>TryGetRemainder</samp><br /><samp>TryGetOptionalRemainder</samp>
</td>
<td>类似于前一个方法，但会截取从指定索引开始直到字符串末尾的值。例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">&quot;A B C D E F&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">TryGetRemainder</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">remainder</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">error</span><span class="p">))</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Remainder: {remainder}&quot;</span><span class="p">);</span> <span class="c1">// &quot;Remainder: C D E F&quot;</span>
<span class="k">else</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Failed getting remainder: {error}&quot;</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Warn</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>GetSubsetOf</samp>
</td>
<td>获取输入数组的一个切片，例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">subset1</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetSubsetOf</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&quot;D&quot;</span> <span class="p">},</span> <span class="n">startAt</span><span class="p">:</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// B, C, D</span>
<span class="kt">string</span><span class="p">[]</span> <span class="n">subset2</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetSubsetOf</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&quot;D&quot;</span> <span class="p">},</span> <span class="n">startAt</span><span class="p">:</span> <span class="m">1</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="m">2</span><span class="p">);</span> <span class="c1">// B, C</span>
</pre></div>
<p>只要 <samp>startAt</samp> 非负，此方法就能有较高容错。例如：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">subset2</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetSubsetOf</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&quot;D&quot;</span> <span class="p">},</span> <span class="n">startAt</span><span class="p">:</span> <span class="m">100</span><span class="p">);</span> <span class="c1">// &lt;empty array&gt;</span>
<span class="kt">string</span><span class="p">[]</span> <span class="n">subset1</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetSubsetOf</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&quot;D&quot;</span> <span class="p">},</span> <span class="n">startAt</span><span class="p">:</span> <span class="m">1</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="m">100</span><span class="p">);</span> <span class="c1">// B, C, D</span>
</pre></div>
</td></tr></tbody></table></dd></dl>
<h4><span id="内容素材"></span><span class="mw-headline" id=".E5.86.85.E5.AE.B9.E7.B4.A0.E6.9D.90">内容素材</span></h4>
<table class="wikitable">

<tbody><tr>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td><samp>LocalizedContentManager.DoesAssetExist</samp>
</td>
<td>判断此素材来自于 <samp>Content</samp> 文件夹还是 <a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Content" title="模组:制作指南/APIs/Content">SMAPI 内容接口</a>。例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">exists</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="n">DoesAssetExist</span><span class="p">&lt;</span><span class="n">Map</span><span class="p">&gt;(</span><span class="s">&quot;Maps/Town&quot;</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>LocalizedContentManager.IsValidTranslationKey</samp>
</td>
<td>判断字符串是否为翻译键（形如 <samp><code title="必需字段 &#39;asset name&#39;">&lt;asset name&gt;</code>:<code title="必需字段 &#39;key&#39;">&lt;key&gt;</code></samp>），且对应素材和键值都存在。例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">exists</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="n">IsValidTranslationKey</span><span class="p">(</span><span class="s">&quot;Strings\\NPCNames:Abigail&quot;</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
<h4><span id="过滤"></span><span class="mw-headline" id=".E8.BF.87.E6.BB.A4">过滤</span></h4>
<p>现在游戏提供一个优化了的 <samp>RemoveWhere</samp> 方法，可以对 <samp>NetCollection</samp>、<samp>NetDictionary</samp>、<samp>NetList</samp> 和（通过扩展）<samp>IDictionary</samp> 实现复杂度 O(n) 的过滤。这淘汰了 <samp>Filter</samp> 方法。
</p><p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="n">dirtTilesRemoved</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">terrainFeatures</span><span class="p">.</span><span class="n">RemoveWhere</span><span class="p">(</span><span class="n">pair</span> <span class="p">=&gt;</span> <span class="n">pair</span><span class="p">.</span><span class="n">Value</span> <span class="k">is</span> <span class="n">HoeDirt</span><span class="p">);</span>
</pre></div>
<h4><span id="游戏路径"></span><span class="mw-headline" id=".E6.B8.B8.E6.88.8F.E8.B7.AF.E5.BE.84">游戏路径</span></h4>
<p>现在游戏文件夹路径是硬编码的，现在则集中化为一些方法：
</p>
<table class="wikitable">

<tbody><tr>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Program.GetLocalAppDataFolder</samp><br /><samp>Program.GetAppDataFolder</samp>
</td>
<td>获取游戏应用数据文件夹（即，包含<a href="/%E5%AD%98%E6%A1%A3" title="存档">存档</a>文件的文件夹）或本地应用数据文件夹（即，包含 <samp>ErrorLogs</samp> 和 <samp>Screenshots</samp> 的文件夹）的绝对路径。这些方法在 Windows 上等价，但在 Linux/macOS 上不同。
</td></tr>
<tr>
<td><samp>Program.GetSavesFolder</samp>
</td>
<td>获取游戏的<a href="/%E5%AD%98%E6%A1%A3" title="存档">存档</a>文件夹的绝对路径。
</td></tr>
<tr>
<td><samp>Game1.GetScreenshotFolder</samp>
</td>
<td>获取游戏的 <samp>Screenshots</samp> 文件夹的绝对路径。
</td></tr>
<tr>
<td><samp>options.GetFilePathForDefaultOptions</samp>
</td>
<td>获取游戏的 <samp>default_options</samp> 文件的绝对路径。
</td></tr></tbody></table>
<h4><span id="哈希集合"></span><span class="mw-headline" id=".E5.93.88.E5.B8.8C.E9.9B.86.E5.90.88">哈希集合</span></h4>
<p>由于<a href="#.E5.93.88.E5.B8.8C.E9.9B.86.E5.90.88.E5.AD.97.E6.AE.B5">游戏现在使用哈希集合字段</a>，因此提供了一些处理它们的扩展：
</p>
<table class="wikitable">

<tbody><tr>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td><samp>AddRange</samp>
</td>
<td>将列表或枚举类型的所有值添加到哈希集合。
</td></tr>
<tr>
<td><samp>RemoveWhere</samp>
</td>
<td>移除符合指定条件的所有值。
</td></tr>
<tr>
<td><samp>Toggle</samp>
</td>
<td>基于布尔值添加/移除哈希集合中的值。例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="kt">bool</span> <span class="n">hasClubCard</span>
<span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">mailReceived</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="s">&quot;HasClubCard&quot;</span><span class="p">);</span> <span class="p">}</span>
    <span class="k">set</span> <span class="p">{</span> <span class="n">mailReceived</span><span class="p">.</span><span class="n">Toggle</span><span class="p">(</span><span class="s">&quot;HasClubCard&quot;</span><span class="p">,</span> <span class="k">value</span><span class="p">);</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
<h4><span id="迭代"></span><span class="mw-headline" id=".E8.BF.AD.E4.BB.A3">迭代</span></h4>
<p>新的 <samp>Utility.ForEach*</samp> 方法可以让您快速高效地（极少进行内存分配、装箱等操作）检查游戏中每一种类型的对象。这些方法比使用 LINQ 或 <samp>yield</samp> 方法的等效代码要快得多。
</p>
<table class="wikitable">

<tbody><tr>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Utility.ForEachBuilding</samp>
</td>
<td>对游戏中的每个建筑进行某些操作。
</td></tr>
<tr>
<td><samp>Utility.ForEachCharacter</samp><br /><samp>Utility.ForEachVillager</samp>
</td>
<td>对游戏中的每个 NPC 进行某些操作。其中，<samp>ForEachCharacter</samp> 匹配所有 NPC 类型（村民、马、宠物、怪物、玩家孩子等），而 <samp>ForEachVillager</samp> 仅匹配<a href="/%E9%98%BF%E6%AF%94%E7%9B%96%E5%B0%94" title="阿比盖尔">阿比盖尔</a>这样的村民 NPC。
</td></tr>
<tr>
<td><samp>Utility.ForEachCrop</samp>
</td>
<td>对游戏中种在地上或<a href="/%E8%8A%B1%E7%9B%86" title="花盆">花盆</a>中的每个作物进行某些操作。
</td></tr>
<tr>
<td><samp>Utility.ForEachItem</samp>
</td>
<td>对游戏中的每个物品进行某些操作，包括装在其他物品中的物品（例如，箱子中或桌子上的物品）、孩子头上的帽子、玩家背包中的物品等。
</td></tr>
<tr>
<td><samp>Utility.ForEachItemIn</samp>
</td>
<td>对指定地点的每个物品进行某些操作，包括装在其他物品中的物品（例如，箱子中或桌子上的物品）。
</td></tr>
<tr>
<td><samp>Utility.ForEachLocation</samp>
</td>
<td>对游戏中每个地点进行某些操作，可以选择是否包括建筑内部、<a href="/%E7%9F%BF%E4%BA%95" title="矿井">矿井</a>矿层和<a href="/%E7%81%AB%E5%B1%B1%E5%9C%B0%E7%89%A2" title="火山地牢">火山地牢</a>矿层。
</td></tr></tbody></table>
<p>如下代码计算世界上一共种下了多少防风草：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="n">parsnips</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">Utility</span><span class="p">.</span><span class="n">ForEachCrop</span><span class="p">(</span><span class="n">crop</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">crop</span><span class="p">.</span><span class="n">IndexOfHarvest</span> <span class="p">==</span> <span class="s">&quot;24&quot;</span><span class="p">)</span>
        <span class="n">parsnips</span><span class="p">++;</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span> <span class="c1">// whether to keep iterating after this crop</span>
<span class="p">});</span>
</pre></div>
<p>您也可以通过如下代码将过时物品的所有实例替换为新物品：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Utility</span><span class="p">.</span><span class="n">ForEachItem</span><span class="p">((</span><span class="n">item</span><span class="p">,</span> <span class="k">remove</span><span class="p">,</span> <span class="n">replaceWith</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">QualifiedItemId</span> <span class="p">==</span> <span class="s">&quot;(O)OldId&quot;</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Item</span> <span class="n">newItem</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&quot;(O)NewId&quot;</span><span class="p">,</span> <span class="n">item</span><span class="p">.</span><span class="n">Stack</span><span class="p">,</span> <span class="n">item</span><span class="p">.</span><span class="n">Quality</span><span class="p">);</span>
        <span class="n">replaceWith</span><span class="p">(</span><span class="n">newItem</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
<p>添加自定义物品类型的 C# 模组可以重写 <samp>Item.ForEachItem</samp> 以支持嵌套物品。
</p>
<h4><span id="随机化"></span><span class="mw-headline" id=".E9.9A.8F.E6.9C.BA.E5.8C.96">随机化</span></h4>
<table class="wikitable">

<tbody><tr>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Utility.CreateDaySaveRandom</samp>
</td>
<td>使用最常用种子创建一个 <samp>Random</samp> 示例（基于存档 ID 和游戏天数）。
</td></tr>
<tr>
<td><samp>Utility.CreateRandom</samp><br /><samp>Utility.CreateRandomSeed</samp>
</td>
<td>使用给定种子创建一个 <samp>Random</samp>（或随机数种子）。其中种子值可以为任何数值类型。
</td></tr>
<tr>
<td><samp>Utility.TryCreateIntervalRandom</samp>
</td>
<td>获取一个随机数生成器，具有相同同步键的随机生成器在同一时间区间中（<samp>tick</samp>、<samp>day</samp>、<samp>season</samp> 或 <samp>year</samp> 之一）会产出相同的值，即便对于不同的联机玩家也如此。
<p>下面的随机数生成器会在同一天之内产出相同的数值：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="kt">int</span> <span class="nf">GetDailyRandomNumber</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Utility</span><span class="p">.</span><span class="n">TryCreateIntervalRandom</span><span class="p">(</span><span class="s">&quot;day&quot;</span><span class="p">,</span> <span class="s">&quot;example sync key&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">Random</span> <span class="n">random</span><span class="p">,</span> <span class="k">out</span> <span class="n">_</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">random</span><span class="p">.</span><span class="n">Next</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.TryGetRandom</samp>
</td>
<td>从字典中获取随机数项。
</td></tr>
<tr>
<td><samp>random.Choose</samp>
</td>
<td>随机抽取提供的取值之一：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">npcName</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">Choose</span><span class="p">(</span><span class="s">&quot;Abigail&quot;</span><span class="p">,</span> <span class="s">&quot;Penny&quot;</span><span class="p">,</span> <span class="s">&quot;Sam&quot;</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>random.ChooseFrom</samp>
</td>
<td>从列表或数组中随机抽取一项：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">names</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;Abigail&quot;</span><span class="p">,</span> <span class="s">&quot;Penny&quot;</span><span class="p">,</span> <span class="s">&quot;Sam&quot;</span> <span class="p">};</span>
<span class="kt">string</span> <span class="n">npcName</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">ChooseFrom</span><span class="p">(</span><span class="n">names</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>random.NextBool</samp>
</td>
<td>随机选取 <samp>true</samp> 或 <samp>false</samp>。例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">flipSprite</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">NextBool</span><span class="p">();</span>
</pre></div>
<p>您可以酌情设置 <samp>true</samp> 的概率：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">flipSprite</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">NextBool</span><span class="p">(</span><span class="m">0.8</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
<h4><span id="其他"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96">其他</span></h4>
<p>下面列出了其他的新增方法：
</p>
<table class="wikitable">

<tbody><tr>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td><samp>Game1.getOfflineFarmhands()</samp>
</td>
<td>获取还未联机到游戏的农场帮手。
</td></tr>
<tr>
<td><samp>Game1.PerformActionWhenPlayerFree</samp>
</td>
<td>等到玩家可以自由活动（即，没有打开菜单、没有观看时间、没有使用工具，等等），调用给定的回调方法。若玩家当前就能自由活动，则会立即运行。
<p>例如，假设您是通过钓鱼宝箱得到第一个晶球的，则可使用此方法来在钓鱼宝箱菜单关闭后显示晶球动画。
</p>
</td></tr>
<tr>
<td><samp>Game1.createRadialDebris_MoreNatural</samp>
</td>
<td>将掉落物洒在一个坐标附近，该方法比 <samp>createRadialDebris</samp> 更随机。
</td></tr>
<tr>
<td><samp>Object.GetCategoryColor</samp><br /><samp>Object.GetCategoryDisplayName</samp>
</td>
<td>当需要在信息框中显示某个物品类别时，获取其颜色和显示名称。
</td></tr>
<tr>
<td><samp>Utility.distanceFromScreen</samp>
</td>
<td>获取世界中的某个坐标距玩家视口的像素距离，0 代表此坐标位于视口之内。
</td></tr>
<tr>
<td><samp>Utility.DrawErrorTexture</samp>
</td>
<td>向屏幕绘制缺失贴图图像 (🚫)，会自动拉伸至指定尺寸。
</td></tr>
<tr>
<td><samp>Utility.DrawSquare</samp>
</td>
<td>向屏幕绘制一个正方形，其具有指定的背景颜色和/或边框。
</td></tr>
<tr>
<td><samp>Utility.GetEnumOrDefault</samp>
</td>
<td>获取一个枚举类型的值，若不可用，返回默认值。这主要用于验证数据文件的输入。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">NpcGender</span> <span class="n">gender</span> <span class="p">=</span> <span class="p">(</span><span class="n">NPCGender</span><span class="p">)</span><span class="m">999999</span><span class="p">;</span>
<span class="n">gender</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">GetEnumOrDefault</span><span class="p">(</span><span class="n">gender</span><span class="p">,</span> <span class="n">Gender</span><span class="p">.</span><span class="n">Male</span><span class="p">);</span> <span class="c1">// returns Gender.Male since there&#39;s no enum constant with value 999999</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.getRandomNpcFromHomeRegion</samp>
</td>
<td>基于 <a href="/%E6%A8%A1%E7%BB%84:NPC%E6%95%B0%E6%8D%AE" title="模组:NPC数据"><samp>Data/Characters</samp></a> 中的 <samp>HomeRegion</samp> 字段获取一个随机可社交 NPC。例如，下面的代码会获取一个家住 <samp>Town</samp> 的随机 NPC：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">NPC</span> <span class="n">npc</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">getRandomNpcFromHomeRegion</span><span class="p">(</span><span class="n">NPC</span><span class="p">.</span><span class="n">region_town</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.isFestivalDay</samp>
</td>
<td>此方法在早于 1.6 的版本中就存在，但现在您可以忽略参数以检查当天，而不再必须指定参数：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">festivalToday</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">isFestivalToday</span><span class="p">();</span>
</pre></div>
<p>也可以检查特定地点上下文的数据：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">desertFestivalToday</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">isFestivalToday</span><span class="p">(</span><span class="n">LocationContexts</span><span class="p">.</span><span class="n">DesertId</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.IsPassiveFestivalDay</samp>
</td>
<td>此方法在早于 1.6 的版本中就存在，但现在您可以忽略参数以检查当天，而不再必须指定参数：
<p>This method existed before 1.6, but now can now omit arguments to check today instead of a specific date:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">passiveFestivalToday</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">IsPassiveFestivalDay</span><span class="p">();</span>
</pre></div>
<p>您也可以检查指定的被动节日：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">nightMarketToday</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">IsPassiveFestivalDay</span><span class="p">(</span><span class="s">&quot;NightMarket&quot;</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.TryGetPassiveFestivalData</samp><br /><samp>Utility.TryGetPassiveFestivalDataForDay</samp>
</td>
<td>获取指定 ID 或日期的<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E8.A2.AB.E5.8A.A8.E8.8A.82.E6.97.A5">被动节日数据</a>。
</td></tr>
<tr>
<td><samp>Utility.TryParseDirection</samp>
</td>
<td>将字符串解析为面部朝向类型值（例如 <samp>Game1.down</samp>），若可用。这支持大小写不敏感的朝向名称（<samp>down</samp>、<samp>left</samp>、<samp>right</samp> 或 <samp>up</samp> 之一）或<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE#.E6.9C.9D.E5.90.91" title="模组:事件数据">数值型数据</a>。
</td></tr>
<tr>
<td><samp>Utility.TryParseEnum</samp>
</td>
<td>若可用，则将字符串解析为枚举类型的值，对大小写不敏感。不同于 <a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/api/system.enum.tryparse"><samp>Enum.TryParse</samp></a>，此方法不会强制转换无效数值：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Enum</span><span class="p">.</span><span class="n">TryParse</span><span class="p">(</span><span class="s">&quot;999999&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">DayOfWeek</span> <span class="n">day</span><span class="p">);</span>        <span class="c1">// true, even though there&#39;s no matching DayOfWeek value</span>
<span class="n">Utility</span><span class="p">.</span><span class="n">TryParseEnum</span><span class="p">(</span><span class="s">&quot;999999&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">DayOfWeek</span> <span class="n">day</span><span class="p">);</span> <span class="c1">// false</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.fuzzyCompare</samp>
</td>
<td>判断某个单词是否能够模糊匹配指定查询。返回数值型的匹配优先级（值越小，匹配程度越高），若不匹配，则返回空。
</td></tr>
<tr>
<td><samp>rectangle.GetPoints</samp><br /><samp>rectangle.GetVectors</samp>
</td>
<td>获取给定 <samp>Rectangle</samp> 内的所有整数坐标。例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">var</span> <span class="n">tileArea</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
<span class="n">Point</span><span class="p">[]</span> <span class="n">tiles</span> <span class="p">=</span> <span class="n">tileArea</span><span class="p">.</span><span class="n">GetPoints</span><span class="p">();</span> <span class="c1">// (0, 0), (1, 0), (0, 1), (1, 1)</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.GetDeterministicHashCode</samp>
</td>
<td>（专用）获取一个字符串键或数值的<a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/Hash_function">哈希值</a>。不同于 <a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/api/system.object.gethashcode"><samp>string.GetHashCode</samp></a> 或 <a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/api/system.hashcode.combine"><samp>HashCode.Combine</samp></a>，此命令产出的哈希值与会话或联机玩家无关。
</td></tr>
<tr>
<td><samp>Utility.WrapIndex</samp>
</td>
<td>把出界的索引移到数组另一端，以确保索引总是有效的（例如，最后一个索引 + 1 得到第一个索引，第一个索引 - 1 得到最后一个索引）。
<p>示例：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">values</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;0&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span> <span class="p">};</span>
<span class="kt">int</span> <span class="n">index</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">WrapIndex</span><span class="p">(-</span><span class="m">1</span><span class="p">,</span> <span class="n">values</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span> <span class="c1">// 2</span>
</pre></div>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="StaticDelegateBuilder">StaticDelegateBuilder</span></h3>
<p>对于 C# 模组，<samp>StaticDelegateBuilder</samp> 是一个特化的类，用于将方法名转换为优化后的委托，以供代码调用。原版代码使用它来优化素材中引用的方法，例如<a href="/%E6%A8%A1%E7%BB%84:%E6%9C%BA%E5%99%A8" title="模组:机器"><samp>Data/Machines</samp></a>。
</p><p>例如，考虑如下静态方法：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">OutputDeconstructor</span><span class="p">(</span><span class="n">Object</span> <span class="n">machine</span><span class="p">,</span> <span class="n">Item</span> <span class="n">inputItem</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">probe</span><span class="p">,</span> <span class="n">MachineItemOutput</span> <span class="n">outputData</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int?</span> <span class="n">overrideMinutesUntilReady</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
<p>以及对应的委托：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="k">delegate</span> <span class="kt">bool</span> <span class="nf">MachineOutputDelegate</span><span class="p">(</span><span class="n">Object</span> <span class="n">machine</span><span class="p">,</span> <span class="n">Item</span> <span class="n">inputItem</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">probe</span><span class="p">,</span> <span class="n">MachineItemOutput</span> <span class="n">outputData</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int?</span> <span class="n">overrideMinutesUntilReady</span><span class="p">);</span>
</pre></div>
<p>您可以创建一个优化后的委托，并像下面这样调用它：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">StaticDelegateBuilder</span><span class="p">.</span><span class="n">TryCreateDelegate</span><span class="p">(</span><span class="s">&quot;StardewValley.Object.OutputDeconstructor&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">MachineOutputDelegate</span> <span class="n">method</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">error</span><span class="p">))</span>
    <span class="k">return</span> <span class="nf">method</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">inputItem</span><span class="p">,</span> <span class="n">probe</span><span class="p">,</span> <span class="n">outputData</span><span class="p">,</span> <span class="k">out</span> <span class="n">minutesUntilMorning</span><span class="p">);</span>
<span class="k">else</span>
    <span class="n">Game1</span><span class="p">.</span><span class="n">log</span><span class="p">.</span><span class="n">Warn</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Machine {ItemId} has invalid output method: {error}&quot;</span><span class="p">);</span>
</pre></div>
<p><samp>TryCreateDelegate</samp> 方法会缓存创建的委托，因此重复调用会返回相同的委托实例。
</p>
<h3><span id="游戏日志更改"></span><span class="mw-headline" id=".E6.B8.B8.E6.88.8F.E6.97.A5.E5.BF.97.E6.9B.B4.E6.94.B9">游戏日志更改</span></h3>
<p>现在游戏通过内部的 <samp>Game1.log</samp> 包装器来写调试输出，而非直接使用 <samp>Console.WriteLine</samp>。例如：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// old code</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Error playing sound: &quot;</span> <span class="p">+</span> <span class="n">ex</span><span class="p">);</span>

<span class="c1">// new code</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">log</span><span class="p">.</span><span class="n">Error</span><span class="p">(</span><span class="s">&quot;Error playing sound.&quot;</span><span class="p">,</span> <span class="n">ex</span><span class="p">);</span>
</pre></div>
<p>这有如下好处：
</p>
<ul><li>对于原版玩家，游戏不再占用时间和资源来向一个无论如何也不可见的控制台写入信息。</li>
<li>对于模组玩家，现在 SMAPI 能做到如下几点：
<ul><li>区分游戏的调试/警告/报错信息（旧版中很多警告/报错都是隐藏的 <samp>TRACE</samp> 等级的日志，它们现在都能以正确的日志等级显示）；</li>
<li>对游戏记录的异常也套用了相同的格式；</li>
<li>更高效地重定向游戏输出，无需控制台拦截。</li></ul></li></ul>
<h3><span id="其他更改"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E6.9B.B4.E6.94.B9">其他更改</span></h3>
<h4><span id="音频"></span><span class="mw-headline" id=".E9.9F.B3.E9.A2.91">音频</span></h4>
<ul>
<li>新增了 <samp>Game1.sounds</samp>，统一了高级音效逻辑（例如，根据距离衰减和多玩家同步）。</li>
<li>新增了用于音乐的 <samp>silence</samp> 声音提示。不同于 <samp>none</samp>，后者会同时停止小镇音乐和环境音效。</li>
<li>新增了 <samp>Game1.soundBank.Exists(cueName)</samp> 方法，用于检查声音提示是否存在。</li>
<li>新增了 <samp>Game1.playSound</samp> 重载方法，以获取正在播放的声音提示。</li>
<li>新增了 <samp>character.playNearbySoundAll</samp> 和 <samp>playNearbySoundAllLocal</samp> 方法用于为玩家/角色旁边的玩家播放声音。</li>
<li>像 <samp>DelayedAction.playSoundAfterDelay</samp> 添加了位置参数。</li>
<li>移除了 <samp>NetAudioCueManager</samp> 和 <samp>Game1.locationCues</samp> （未使用）。</li>
<li>
同意了用于播放正常/调音/位置音效（也增加了对调音的非同步音效和调音的位置音效的支持）：
<table class="wikitable">

<tbody><tr>
<th>旧版方法
</th>
<th>新版方法
</th></tr>
<tr>
<td><samp>Game1.playSound</samp><br /><samp>Game1.playSoundAt</samp><br /><samp>Game1.playSoundPitched</samp>
</td>
<td><samp>Game1.playSound</samp>
</td></tr>
<tr>
<td><samp>GameLocation.playSound</samp><br /><samp>GameLocation.playSoundAt</samp><br /><samp>GameLocation.playSoundPitched</samp>
</td>
<td><samp>GameLocation.playSound</samp>
</td></tr>
<tr>
<td><samp>GameLocation.localSound</samp><br /><samp>GameLocation.localSoundAt</samp>
</td>
<td><samp>GameLocation.localSound</samp>
</td></tr>
<tr>
<td><samp>NetAudio.Play</samp><br /><samp>NetAudio.PlayAt</samp><br /><samp>NetAudio.PlayPitched</samp>
</td>
<td><samp>NetAudio.Play</samp>
</td></tr>
<tr>
<td><samp>NetAudio.PlayLocal</samp><br /><samp>NetAudio.PlayLocalAt</samp>
</td>
<td><samp>NetAudio.PlayLocal</samp>
</td></tr></tbody></table></li>
</ul>
<h2><span id="调试命令"></span><span class="mw-headline" id=".E8.B0.83.E8.AF.95.E5.91.BD.E4.BB.A4">调试命令</span></h2>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%91%BD%E4%BB%A4" title="模组:控制台命令">模组:控制台命令</a>。此小节主要用于叙述更新内容。</div>
<ul>
<li>所有调试命令现在都支持引号，因此您可以传递带有空格的参数，例如 <code>debug build "Junimo Hut"</code>。</li>
<li>新增了<a href="/%E6%A8%A1%E7%BB%84:%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%91%BD%E4%BB%A4" title="模组:控制台命令">调试命令</a>：
<table class="wikitable">

<tbody><tr>
<th>命令
</th>
<th>描述
</th></tr>
<tr>
<td><samp>action <code title="必需字段 &#39;action&#39;">&lt;action&gt;</code></samp>
</td>
<td>运行一个<a href="/%E6%A8%A1%E7%BB%84:%E8%A7%A6%E5%8F%91%E5%8A%A8%E4%BD%9C" title="模组:触发动作">触发动作字符串</a>，例如 <samp>action AddMoney 500</samp> 可以为当前玩家添加 <span style="display: none;">data-sort-value="500"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />500金</span>。
</td></tr>
<tr>
<td><samp>artifactSpots</samp>
</td>
<td>在玩家周围的每个空地块上生成一个<a href="/%E8%BF%9C%E5%8F%A4%E6%96%91%E7%82%B9" title="远古斑点">远古斑点</a>。
</td></tr>
<tr>
<td><samp>endEvent</samp> / <samp>ee</samp>
</td>
<td>立即结束当前的事件或节日，应用事件的跳过逻辑（如果有）。事件会被标记为已观看，但您可以使用 <samp>eventById</samp> 命令重新观看。
<p>此命令替换了1.6之前的命令（<samp>ee</samp>、<samp>endEvent</samp>/<samp>leaveEvent</samp>和<samp>eventOver</samp>），这些命令以不同的方式工作，并且有副作用，如重新启动事件或清除玩家的信件。
</p>
</td></tr>
<tr>
<td><samp>exportShops</samp>
</td>
<td>导出游戏中每个商店的当前条件下的内容摘要。这将保存到磁盘上的文件中，并在控制台中显示文件路径。
</td></tr>
<tr>
<td><samp>filterLoadMenu</samp> / <samp>flm</samp>
</td>
<td>语法：<samp>filterLoadMenu <code title="必需字段 &#39;search text&#39;">&lt;search text&gt;</code></samp>
<p>筛选当前存档列表，只显示玩家名称或农场名称包含给定文本的存档。
</p>
</td></tr>
<tr>
<td><samp>forcebuild</samp>
</td>
<td>等同于<samp>build</samp>，但禁用所有安全检查，因此您可以在通常不允许建造的地方建造，例如建造在农场动物或放置的物体上等。
</td></tr>
<tr>
<td><samp>gamequery</samp> / <samp>gq</samp>
</td>
<td><i>语法：<samp>gq <code title="必需字段 &#39;query&#39;">&lt;query&gt;</code></samp></i>
<p>检查给定的<a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>在当前上下文中是否为真。例如：
</p>
<pre>gq !SEASON Spring, WEATHER Here Sun
&gt; 结果：true。
</pre>
</td></tr>
<tr>
<td><samp>itemquery</samp> / <samp>iq</samp>
</td>
<td>语法：<samp>iq <code title="必需字段 &#39;query&#39;">&lt;query&gt;</code></samp>
<p>打开一个商店菜单，显示所有匹配给定<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2" title="模组:物品查询">物品查询</a>的物品（所有物品免费）。例如：
</p>
<ul><li><samp>debug iq ALL_ITEMS</samp> 显示所有物品；</li>
<li><samp>debug iq ALL_ITEMS (W)</samp> 显示所有武器；</li>
<li><samp>debug iq (O)128</samp> 显示一个河豚（物品128）；</li>
<li><samp>debug iq FLAVORED_ITEM Wine (O)128</samp> 显示河豚酒。</li></ul>
</td></tr>
<tr>
<td><samp>logFile</samp>
</td>
<td>开始将调试消息写入 <samp>%appdata%/StardewValley/ErrorLogs/game-latest.txt</samp> 的日志文件，以简化故障排除。您也可以在游戏聊天框中输入 <samp>/logtext</samp> 来启用它。
<p>如果安装了 SMAPI，则此命令无效，因为调试消息已经保存到 SMAPI 的日志中。
</p>
</td></tr>
<tr>
<td><samp>logSounds</samp>
</td>
<td>将每个播放的音效信息记录到 SMAPI 控制台窗口。
</td></tr>
<tr>
<td><samp>movieSchedule <code title="可选字段 &#39;year&#39;">[year]</code></samp>
</td>
<td>列出给定 <code title="可选字段 &#39;year&#39;">[year]</code>（默认为当前年份）将播放的电影及其播放日期。
</td></tr>
<tr>
<td><samp>qualifiedid</samp>
</td>
<td>打印手持物品的显示名称和<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E7.89.A9.E5.93.81ID" title="模组:公共数据字段">限定性物品ID</a>。
</td></tr>
<tr>
<td><samp>search</samp>
</td>
<td><i>语法：<samp>search <code title="可选字段 &#39;term&#39;">[term]</code></samp></i>
<p>列出所有包含给定关键词的调试命令（如果省略关键词，则列出所有调试命令）。例如：
</p>
<pre>debug search backpack
&gt; Found 2 debug commands matching search term 'backpack':
    - Backpack
    - FillBackpack (fbp, fill, fillbp)</pre>
</td></tr>
<tr>
<td><samp>setFarmEvent</samp> / <samp>sfe</samp>
</td>
<td>语法：<samp>setFarmEvent <code title="必需字段 &#39;event id&#39;">&lt;event id&gt;</code></samp>
<p>如果没有计划中的农场过夜事件，则排队一个<a href="/%E9%9A%8F%E6%9C%BA%E4%BA%8B%E4%BB%B6#.E5.86.9C.E5.9C.BA.E4.BA.8B.E4.BB.B6" title="随机事件">农场过夜事件</a>。<code title="必需字段 &#39;event id&#39;">&lt;event id&gt;</code> 可以是以下之一：
</p>
<ul><li><samp>dogs</samp>（动物丢失事件）；</li>
<li><a href="/%E9%9A%8F%E6%9C%BA%E4%BA%8B%E4%BB%B6#.E5.9C.B0.E9.9C.87" title="随机事件"><samp>earthquake</samp></a>；</li>
<li><a href="/%E9%9A%8F%E6%9C%BA%E4%BA%8B%E4%BB%B6#.E5.86.9C.E4.BD.9C.E7.89.A9.E4.BB.99.E5.AD.90" title="随机事件"><samp>fairy</samp></a>；</li>
<li><a href="/%E9%9A%8F%E6%9C%BA%E4%BA%8B%E4%BB%B6#.E9.99.A8.E7.9F.B3" title="随机事件"><samp>meteorite</samp></a>；</li>
<li><a href="/%E9%9A%8F%E6%9C%BA%E4%BA%8B%E4%BB%B6#.E7.9F.B3.E7.8C.AB.E5.A4.B4.E9.B9.B0" title="随机事件"><samp>owl</samp></a>；</li>
<li><a href="/%E9%9A%8F%E6%9C%BA%E4%BA%8B%E4%BB%B6#.E5.A5.87.E6.80.AA.E7.9A.84.E8.83.B6.E5.9B.8A" title="随机事件"><samp>ufo</samp></a>；</li>
<li><a href="/%E9%9A%8F%E6%9C%BA%E4%BA%8B%E4%BB%B6#.E5.A5.B3.E5.B7.AB" title="随机事件"><samp>witch</samp></a>。</li></ul>
<p>请注意，即使农场事件运行，它也可能在不执行任何操作的情况下退出（例如，像 <samp>ufo</samp> 这样的稀有事件在开始时会有额外的条件检查）。
</p>
</td></tr>
<tr>
<td><samp>shop</samp>
</td>
<td><i>语法：<samp>shop <code title="必需字段 &#39;shop ID&#39;">&lt;shop ID&gt;</code> <code title="可选字段 &#39;owner name&#39;">[owner name]</code></samp></i>
<p>打开一个<a href="/%E6%A8%A1%E7%BB%84:%E5%95%86%E5%BA%97" title="模组:商店">在 <samp>Data/Shops</samp> 中定义的商店</a>，无论店主是否在附近。指定 <code title="可选字段 &#39;owner name&#39;">[owner name]</code> 将使用该 NPC 作为店主，否则命令将尽可能找到最近的有效 NPC（否则将打开没有 NPC 的商店）。
</p>
</td></tr>
<tr>
<td><samp>skinBuilding</samp> / <samp>bsm</samp>
</td>
<td>如果玩家正站在建筑物下方，则打开一个菜单以更改建筑物的外观。
</td></tr>
<tr>
<td><samp>testwedding</samp>
</td>
<td>立即播放<a href="/%E5%A9%9A%E5%A7%BB#.E5.A9.9A.E7.A4.BC" title="婚姻">婚礼</a>事件。这要求玩家已经结婚 - 要测试特定的 NPC，请先使用<samp>debug marry</samp>与该 NPC 结婚，然后再运行此命令。
</td></tr>
<tr>
<td><samp>thishouseupgrade</samp> / <samp>thishouse</samp> / <samp>thu</samp>
</td>
<td>等同于 <samp>houseupgrade</samp>，但可以通过从另一个玩家的房屋内部或外部南侧运行来升级该玩家的房屋。
</td></tr>
<tr>
<td><samp>toggleCheats</samp>
</td>
<td>启用或禁用在游戏聊天中输入调试命令（前缀为<samp>/</samp>）。
</td></tr>
<tr>
<td><samp>tokens</samp>
</td>
<td>语法：<samp>tokens <code title="必需字段 &#39;tokenizable string&#39;">&lt;tokenizable string&gt;</code></samp>
<p>解析一个<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>并打印其输出。例如：
</p>
<pre>tokens [LocalizedText Strings\StringsFromCSFiles:MapPage.cs.11064 [EscapedText [FarmName]]]
&gt; 结果："Lon Lon Farm"
</pre>
</td></tr>
<tr>
<td><samp>worldMapLines</samp>
</td>
<td>切换<a href="/%E6%A8%A1%E7%BB%84:%E4%B8%96%E7%95%8C%E5%9C%B0%E5%9B%BE#.E8.B0.83.E8.AF.95.E8.AF.95.E5.9B.BE" title="模组:世界地图">世界地图的调试视图</a>。
</td></tr></tbody></table></li>
<li>改进了现有的调试命令：
<table class="wikitable">

<tbody><tr>
<th>命令
</th>
<th>更改
</th></tr>
<tr>
<td><samp>build</samp>
</td>
<td>移除了自定义空格处理；现在游戏会使用引号传递带有空格的参数，而不是用 9 替换它们（例如<code>Junimo9Hut</code> → <code>"Junimo Hut"</code>）。
</td></tr>
<tr>
<td><samp>clearFurniture</samp>
</td>
<td>现在在农舍外也有效。
</td></tr>
<tr>
<td><samp>dialogue</samp>
</td>
<td>移除了自定义空格处理；现在游戏会使用引号传递包含空格的 NPC 名称，第一个参数后的所有文本被视为对话的一部分（例如<code>debug dialogue "Some NPC" Some dialogue text$h</code>）。
</td></tr>
<tr>
<td><samp>ebi</samp>
</td>
<td>修复了不能在事件发生地点正确运行该事件的问题。
</td></tr>
<tr>
<td><samp>fish</samp>
</td>
<td>修复了未持有钓鱼竿时的错误。现在它会在没有渔具的情况下打开钓鱼小游戏。
</td></tr>
<tr>
<td><samp>frameOffset</samp>
</td>
<td>&#32;
<ul><li>简化了用法。您现在可以直接传递负偏移量（如<samp>debug frameOffset -5 -10</samp>），而不需要使用 <samp>s</samp> 数字前缀。</li>
<li>修复了命令只接受每个数字的最后一位的问题。</li></ul>
</td></tr>
<tr>
<td><samp>getStat</samp><br /><samp>setStat</samp>
</td>
<td>添加了参数验证。
</td></tr>
<tr>
<td><samp>grass</samp>
</td>
<td>现在应用于当前地点，而不是农场。
</td></tr>
<tr>
<td><samp>growAnimals</samp><br /><samp>growAnimalsFarm</samp>
</td>
<td>合并为一个 <samp>growAnimals</samp> 命令，支持任何地点，并且不会重置已经是成年动物的年龄。
</td></tr>
<tr>
<td><samp>growCrops</samp>
</td>
<td>修复了种植混合种子或巨型作物时的错误。
</td></tr>
<tr>
<td><samp>itemNamed</samp>
</td>
<td>移除了自定义空格处理；现在游戏会使用引号传递带有空格的参数，而不是删除它们（例如<code>EelRoe</code> → <code>"Eel Roe"</code>）。
</td></tr>
<tr>
<td><samp>junimoGoodbye</samp><br /><samp><samp>junimoStar</samp>
</samp></td>
<td>添加了验证，确保您在社区中心内。
</td></tr>
<tr>
<td><samp>killAll</samp><br /><samp>killAllHorses</samp><br /><samp>killNpc</samp>
</td>
<td>这些命令现在也会移除建筑物内的匹配 NPC。
</td></tr>
<tr>
<td><samp>killMonsterStat</samp>
</td>
<td>移除了自定义空格处理；现在游戏会使用引号传递带有空格的参数，而不是用 0 替换它们（例如<code>Dust0Spirit</code> → <code>"Dust Spirit"</code>）。
</td></tr>
<tr>
<td><samp>mailForTomorrow</samp>
</td>
<td>修复了信件ID中的 0 被替换为下划线的问题。
</td></tr>
<tr>
<td><samp>monster</samp>
</td>
<td>添加了怪物名称的验证。
</td></tr>
<tr>
<td><samp>moveBuilding</samp>
</td>
<td>现在应用于当前地点，而不是农场。
</td></tr>
<tr>
<td><samp>movie</samp>
</td>
<td>重写；现在更简单，应用正常的游戏逻辑，默认为今天的电影，并避免依赖 <samp>Data/NPCDispositions</samp> 中的 NPC 索引，因为这些索引可能会因自定义 NPC 而改变。
<p>新用法：
</p>
<dl><dd><samp>debug movie <code title="可选字段 &#39;movie ID&#39;">[movie ID]</code> <code title="可选字段 &#39;invite NPC name&#39;">[invite NPC name]</code></samp></dd>
<dd><i><samp>debug movie current <code title="可选字段 &#39;invite NPC name&#39;">[invite NPC name]</code></samp></i></dd></dl>
<p>电影 ID 默认为今天的电影，NPC 名称可以省略，以在没有邀请者的情况下观看电影。指定 <samp>current</samp> 作为电影 ID 时将使用默认值。
</p>
</td></tr>
<tr>
<td><samp>panMode</samp>
</td>
<td>该命令在激活时不再阻碍调试命令的处理。现在您可以通过再次运行 <samp>debug panMode</samp> 将其关闭，使用 <samp>debug panMode clear</samp> 清除，或使用 <samp>debug panMode {time}</samp> 设置时间。
</td></tr>
<tr>
<td><samp>paintBuilding</samp>
</td>
<td>&#32;
<ul><li>现在应用于当前地点，而不是农场。</li>
<li>添加了目标建筑物的验证。</li></ul>
</td></tr>
<tr>
<td><samp>playSound</samp>
</td>
<td>添加了一个可选的音高参数，如 <samp>debug playSound barrelBreak 1200</samp>。音高是一个从 1（低音）到 2400（高音）的值。
</td></tr>
<tr>
<td><samp>question</samp>
</td>
<td>您现在可以通过将第二个参数设置为 false 来忘记已选择的答案（而不是添加它），如<samp>question <code title="必需字段 &#39;id&#39;">&lt;id&gt;</code> false</samp>。
</td></tr>
<tr>
<td><samp>runTestEvent</samp>
</td>
<td>修复了对 Unix 换行符的支持。
</td></tr>
<tr>
<td><samp>seenEvent</samp>
</td>
<td>您现在可以通过将第二个参数设置为 false 来忘记一个事件（而不是添加它），如<samp>seenEvent <code title="必需字段 &#39;id&#39;">&lt;id&gt;</code> false</samp>。
</td></tr>
<tr>
<td><samp>seenMail</samp>
</td>
<td>您现在可以通过将第二个参数设置为 false 来移除已收到的信件（而不是添加它），如<samp>seenMail <code title="必需字段 &#39;id&#39;">&lt;id&gt;</code> false</samp>。
</td></tr>
<tr>
<td><samp>skinBuilding</samp>
</td>
<td>&#32;
<ul><li>现在应用于当前位置，而不是农场。</li>
<li>添加了目标建筑物的验证。</li></ul>
</td></tr>
<tr>
<td><samp>skullGear</samp>
</td>
<td>&#32;
<ul><li>修复了命令设置 32 个槽位而不是 36 个的问题。</li>
<li>修复了命令未按某些游戏代码预期添加空槽位的问题。</li></ul>
</td></tr>
<tr>
<td><samp>setupFishPondFarm</samp>
</td>
<td>修复了农场已经建造了非鱼塘建筑物时的错误。
</td></tr>
<tr>
<td><samp>speech</samp>
</td>
<td>移除了自定义空格处理；现在游戏使用引号传递包含空格的 NPC 名称，第一个参数后的所有文本被视为对话的一部分（例如<code>debug speech "Some NPC" Some dialogue text$h</code>）。
</td></tr>
<tr>
<td><samp>spreadDirt</samp>
</td>
<td>现在应用于当前地点，而不是农场。
</td></tr>
<tr>
<td><samp>spreadSeeds</samp>
</td>
<td>现在应用于当前地点，而不是农场。
</td></tr>
<tr>
<td><samp>thisHouseUpgrade</samp>
</td>
<td>现在应用于当前地点，而不是农场。
</td></tr>
<tr>
<td><samp>warpToPlayer</samp>
</td>
<td>移除了自定义空格处理；现在游戏使用引号传递带有空格的参数，而不是删除它们（例如<code>JohnSmith</code> → <code>"John Smith"</code>）。
</td></tr>
<tr>
<td><samp>whereIs</samp>
</td>
<td>&#32;
<ul><li>现在列出所有匹配的 NPC，而不是第一个。</li>
<li>现在搜索当前的事件或节日（如果有）。</li></ul>
</td></tr></tbody></table></li>
<li>移除了一些调试命令：
<table class="wikitable">

<tbody><tr>
<th>命令
</th>
<th>备注
</th></tr>
<tr>
<td><samp>ax</samp><br /><samp>bigItem</samp>/<samp>b</samp>/<samp>bi</samp>/<samp>big</samp><br /><samp>boots</samp><br /><samp>clothes</samp><br /><samp>hoe</samp><br /><samp>milkPail</samp>/<samp>mp</samp><br /><samp>pan</samp><br /><samp>pickaxe</samp>/<samp>pick</samp>/<samp>pickax</samp><br /><samp>ring</samp>/<samp>addRing</samp><br /><samp>shears</samp>/<samp>scissors</samp><br /><samp>slingshot</samp><br /><samp>tool</samp><br /><samp>wateringCan</samp>/<samp>can</samp><br /><samp>wand</samp><br /><samp>weapon</samp>
</td>
<td>这些命令被更通用的命令取代，如 <code>item (O)128</code>（按ID生成物品）、<code>fuzzyItemNamed pufferfish</code>（按物品名称生成）或<code>itemQuery FLAVORED_ITEM Wine (O)128</code>（按<a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E5%93%81%E6%9F%A5%E8%AF%A2" title="模组:物品查询">物品查询</a>生成）。
</td></tr>
<tr>
<td><samp>addQuartz</samp><br /><samp>blueBook</samp><br /><samp>blueprint</samp><br /><samp>end</samp>
</td>
<td>这些是 1.6 中移除的未使用功能的一部分。
</td></tr>
<tr>
<td><samp>changeStat</samp>
</td>
<td>移除；使用 <samp>setStat</samp> 代替。
</td></tr>
<tr>
<td><samp>ee</samp><br /><samp>endEvent</samp>/<samp>leaveEvent</samp><br /><samp>eventOver</samp>
</td>
<td>被新的 <samp>endEvent</samp> 命令取代。
</td></tr>
<tr>
<td><samp>everythingshop</samp>
</td>
<td>移除。您可以使用 <code>debug iq ALL_ITEMS</code> 获取所有物品，或使用 <code>debug iq ALL_ITEMS (O)</code> 获取给定类型的所有物品。
</td></tr>
<tr>
<td><samp>oldMineGame</samp>
</td>
<td>与 1.4 之前的<a href="/%E7%A5%9D%E5%B0%BC%E9%AD%94%E8%B5%9B%E8%BD%A6" title="祝尼魔赛车">祝尼魔赛车</a>代码一起移除。
</td></tr>
<tr>
<td><samp>pathSpouseToMe</samp>/<samp>pstm</samp>
</td>
<td>与未实现的农场活动代码一起移除。
</td></tr></tbody></table></li>
<li>为一些调试命令添加了替代名称（新名称在括号中）：<samp>bpm</samp> + <samp>bsm</samp>（<samp>paintBuilding</samp> + <samp>skinBuilding</samp>）、<samp>craftingRecipe</samp>（addCraftingRecipe）、<samp>db</samp>（speakTo）、<samp>dialogue</samp>（addDialogue）、<samp>pdb</samp>（printGemBirds）、<samp>r</samp>（resetForPlayerEntry）、<samp>removeLargeTf</samp>（removeLargeTerrainFeature）、<samp>sb</samp>（showTextAboveHead）、<samp>sl</samp> + <samp>sr</samp>（<samp>shiftToolbarLeft</samp> + shiftToolbarRight）、<samp>sn</samp>（secretNote）和<samp>tls</samp>（toggleLightingScale）。</li>
<li>重新设计了调试命令的输出记录方式。这修复了一个问题，即它们并不总是记录到正确的位置（例如，通过聊天框运行的命令可能会记录到控制台，反之亦然），并允许模组传递自定义 logger 以捕获或重定向输出。</li>
</ul>
<h4><span id="地点逻辑"></span><span class="mw-headline" id=".E5.9C.B0.E7.82.B9.E9.80.BB.E8.BE.91">地点逻辑</span></h4>
<ul><li><a href="/%E6%B2%99%E6%BC%A0" title="沙漠">沙漠</a>不再假设玩家是乘公交车到达的，除非其先前的地点为<a href="/%E5%B7%B4%E5%A3%AB%E7%AB%99" title="巴士站">巴士站</a>。</li>
<li>现在 C# 模组可以分别通过 <samp>BusStop.TicketPrice</samp> 和 <samp>BoatTunnel.TicketPrice</samp> 来修改公交车和威利的船的票价。</li></ul>
<h4><span id="菜单与用户界面"></span><span class="mw-headline" id=".E8.8F.9C.E5.8D.95.E4.B8.8E.E7.94.A8.E6.88.B7.E7.95.8C.E9.9D.A2">菜单与用户界面</span></h4>
<ul><li>重写了日历菜单（<samp>Billboard</samp>），以简化自定义事件和事件类型。C# 模组现在可以编辑 <samp>billboard.calendarDayData</samp> 或修补 <samp>billboard.GetEventsForDay</samp> 来添加新事件。</li>
<li>添加了 <samp>Game1.textShadowDarkerColor</samp> 字段，用于替换之前在 <samp>Utility.drawTextWithShadow</samp> 中硬编码的颜色。</li>
<li>添加了 <samp>MoneyDial.ShouldShakeMainMoneyBox</samp> 字段，以简化自定义金额显示。</li>
<li>部分解除了 <samp>ShopMenu</samp> 过滤标签的硬编码。现在可以通过设置 <samp>shopMenu.tabButtons</samp> 字段并使用任意的 <samp>Func&lt;ISalable, bool&gt; Filter</samp> 值来更改过滤标签，或者使用预定义的标签集，如 <samp>shopMenu.UseDresserTabs()</samp>。</li>
<li><samp>SpriteText</samp> 方法现在接受任意的 <samp>Color</samp> 色调，而不是少数预定义的颜色 ID。</li>
<li><samp>DiscreteColorPicker.getColorFromSelection</samp> 方法现在为静态方法，以便重用。</li>
<li>修复了 <samp>DiscreteColorPicker</samp> 构造函数忽略初始颜色参数的问题，并添加了一个接受 <samp>Color</samp> 值的构造函数。</li>
<li>修复了在切换语言时自定义语言的字体可能无法加载的边缘情况。</li></ul>
<h4><span id="Net字段"></span><span class="mw-headline" id="Net.E5.AD.97.E6.AE.B5"><a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/%E6%B8%B8%E6%88%8F%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84#Net.E5.AD.97.E6.AE.B5" title="模组:制作指南/游戏基本架构">Net字段</a></span></h4>
<ul><li>移除了大多数类型的隐式转换操作符，因为它们的行为有时会违反直觉。仅保留了 <samp>NetBool</samp>、<samp>NetInt</samp> 和 <samp>NetString</samp>；它们现在被标记为过时，并在使用时引发构建警告。</li>
<li><samp>NetLocationRef</samp> 现在具有公共的 <samp>LocationName</samp> 和 <samp>IsStructure</samp> 字段，并且其 <samp>Update</samp> 方法允许强制更新此字段。</li></ul>
<h4><span id="任务"></span><span class="mw-headline" id=".E4.BB.BB.E5.8A.A1">任务</span></h4>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">此部分文档应当迁移至<a href="/%E6%A8%A1%E7%BB%84:%E4%BB%BB%E5%8A%A1%E6%95%B0%E6%8D%AE" title="模组:任务数据">模组:任务数据</a>。当您复制内容时， <b><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6#.E5.A6.82.E4.BD.95.E5.A4.8D.E5.88.B6.E4.BF.A1.E6.81.AF.E5.88.B0.E6.8C.87.E5.AE.9A.E9.A1.B5.E9.9D.A2" title="模组 talk:迁移至游戏本体1.6">请确保您署名了原作者</a></b>。</div>
<ul><li>现在任务具有字符串 ID，这简化了自定义任务框架。</li>
<li>新增了任务数据解析的验证。</li>
<li>在 <a href="/%E6%A8%A1%E7%BB%84:%E7%89%B9%E5%88%AB%E4%BB%BB%E5%8A%A1" title="模组:特别任务"><samp>Data/SpecialOrders</samp></a> 中，<samp>Duration</samp> 和 <samp>Repeatable</samp> 字段现在为强类型、大小写不敏感。</li>
<li>对于 C# 模组，修复了 <samp>DescriptionElement</samp> 不允许超过四个翻译标记替换的问题。</li></ul>
<h4><span id="日期与季节"></span><span class="mw-headline" id=".E6.97.A5.E6.9C.9F.E4.B8.8E.E5.AD.A3.E8.8A.82">日期与季节</span></h4>
<ul><li>添加了 <samp>Season</samp> 枚举，用于强类型且不区分大小写的季节检查（例如 <code>Game1.season == Season.Spring</code> 代替 <code>Game1.currentSeason == "spring"</code>）。</li>
<li>添加了 <samp>Game1.season</samp>、<samp>Game1.GetSeasonForLocation</samp>、<samp>Game1.WorldDate.Season</samp> 和 <samp>location.GetSeason()</samp> 来获取季节枚举。</li>
<li>添加了 <samp>Utility.getSeasonKey</samp> 以从季节枚举中获取键形式。</li>
<li>改进了 <samp>WorldDate</samp>：</li></ul>
<pre> ** 添加了 <samp>Now()</samp> 以获取与当前日期匹配的新实例；
 ** 添加了 <samp>WorldDate.Equals</samp> 和 <samp>GetHashCode</samp> 的实现；
 ** 添加了代码文档；
 ** <samp>TotalDays</samp> 不再写入保存文件。
</pre>
<ul><li>为了清晰起见，重命名了一些成员（<samp>Game1.GetSeasonForLocation</samp> → <samp>GetSeasonKeyForLocation</samp>，<samp>location.GetSeasonForLocation</samp> → <samp>GetSeasonKey</samp>，<samp>WorldDate.Season</samp> → <samp>SeasonKey</samp>）。</li>
<li>修复了 <samp>location.GetSeasonKey()</samp> 未应用温室逻辑的问题。</li></ul>
<h4><span id="时间"></span><span class="mw-headline" id=".E6.97.B6.E9.97.B4">时间</span></h4>
<ul><li>对于 C# 模组，<samp>Game1.realMilliSecondsPerGame</samp> 和 <samp>Game1.realMilliSecondsPerGameTenMinutes</samp> 字段不再标记为 <samp>const</samp>，并且 <samp>GameLocation.getExtraMillisecondsPerInGameMinuteForThisLocation()</samp> 方法已被替换为可设置的 <samp>ExtraMillisecondsPerInGameMinute</samp> 属性。这允许你更改游戏中的时间流苏，但应谨慎操作，因为这可能会导致意外效果。</li></ul>
<h4><span id="其他_2"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96_2">其他</span></h4>
<ul><li>Linux/macOS 上的错误堆栈跟踪现在包含行号。</li>
<li>所有以空格分隔的字段现在会忽略多余的空格，而不是崩溃。这影响了地图/图块属性、数据素材、事件命令、游戏状态查询等。</li>
<li>所有玩家和 NPC 现在都有 <samp>Tile</samp> 和 <samp>TilePoint</samp> 属性（他们的地块位置缓存）以及 <samp>StandingPixel</samp> 属性（其边界框中心的像素坐标缓存）。这些属性<a href="#.E5.85.B6.E4.BB.96.E7.A0.B4.E5.9D.8F.E6.80.A7API.E6.9B.B4.E6.94.B9">替换了各种已删除的方法</a>。</li>
<li>所有地形特征现在都有 <samp>Tile</samp> 和 <samp>Location</samp> 属性，并且在大多数情况下，它们的方法不再有地点/地块参数。</li>
<li>现在所有 <a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/%E6%B8%B8%E6%88%8F%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84#Net.E5.AD.97.E6.AE.B5" title="模组:制作指南/游戏基本架构">Net 字段</a> 都有 <samp>Name</samp> 和 <samp>Owner</samp> 字段，用于在出现同步问题时显示信息性报错，并验证常见错误（例如 Net 字段未添加到 <samp>NetFields</samp> 集合）。</li>
<li>游戏现在会跟踪玩家访问过的地面。模组可以通过 C#（通过 <samp>Game1.player.locationsVisited</samp>）或 <a href="/%E6%A8%A1%E7%BB%84:%E6%B8%B8%E6%88%8F%E7%8A%B6%E6%80%81%E6%9F%A5%E8%AF%A2" title="模组:游戏状态查询">游戏状态查询</a>（通过 <samp>PLAYER_VISITED_LOCATION</samp>）检查该列表。对于已有的存档，游戏会根据可访问的位置、已观看的事件、设置的信件标识等追溯性填充此列表。</li>
<li>添加了菜单排队功能（通过 C# 中的 <samp>Game1.nextClickableMenu</samp>）。例如，当您的背包已满时尝试从信件中取出物品时会应用此功能。</li>
<li>在许多地方添加了 C# 代码文档。</li>
<li>添加了 <samp>Id</samp> 字段，使内容包更方便地编辑鱼塘、电影小卖部、随机收集包和裁缝配方数据。</li>
<li>添加了 <samp>Game1.Multiplayer</samp> 以获取游戏的低级处理程序。（大多数代码仍应使用 <a href="/%E6%A8%A1%E7%BB%84:%E5%88%B6%E4%BD%9C%E6%8C%87%E5%8D%97/APIs/Multiplayer" title="模组:制作指南/APIs/Multiplayer">SMAPI 的多人 API</a>。）</li>
<li>添加了 <samp>Game1.versionBuildNumber</samp>，包含构建号（如 <samp>26039</samp>）。</li>
<li>向 <samp>NetPosition</samp> 添加了字段更改事件。</li>
<li>添加了 <samp>LocalizedContentManager.CurrentLanguageString</samp>，它缓存了语言代码（如 <samp>pt-BR</samp>）。</li>
<li>游戏现在更一致地使用 <samp>[XmlInclude]</samp> 标记其类型。这意味着默认的存档序列化器可以处理更多类型（例如所有怪物），并且更容易创建自定义序列化器。</li>
<li>重构了代码的许多部分，使其对 C# 模组更具可修改性。这包括将所有类标记为公共，将 <samp>private</samp> 成员更改为 <samp>protected</samp> 或 <samp>public</samp>，将成员标记为 <samp>virtual</samp>，重写或拆分代码以便更容易扩展等。</li>
<li>规范了 <samp>startup_preferences</samp> 的格式，以简化故障排除。</li>
<li>修复了许多情况下游戏使用 <samp>Game1.player</samp> 而不是给定玩家的问题。</li></ul>
<h2><span id="C#模组的破坏性变更"></span><span class="mw-headline" id="C.23.E6.A8.A1.E7.BB.84.E7.9A.84.E7.A0.B4.E5.9D.8F.E6.80.A7.E5.8F.98.E6.9B.B4">C#模组的破坏性变更</span></h2>
<p><b>此节仅描述此更新可能如何破坏现存的模组。参见“该版本有何变化”章节以了解更多信息，包括模组可以使用的新功能。</b>
</p><p>另请参阅<a href="#.E5.86.85.E5.AE.B9.E5.8C.85.E7.9A.84.E7.A0.B4.E5.9D.8F.E6.80.A7.E5.8F.98.E6.9B.B4"><b>内容包的破坏性变更</b></a>，它们也影响 C# 模组。
</p>
<h3><span class="mw-headline" id=".NET_6_2">.NET 6</span></h3>
<dl><dd>另请参阅“该版本有何变化”下的 <a href="#.NET_6">.NET 6</a>。</dd></dl>
<p>星露谷物语 1.6 从 .NET 5 升级到了 .NET 6 。SMAPI 仍然可以较好地加载 .NET 5 模组，但编译它们时会发生构建错误。欲升级 C# 模组：
</p>
<ol>
<li>确保您有 <a rel="nofollow" class="external text" href="https://visualstudio.microsoft.com/vs">Visual Studio Community 2022</a> 或更高版本。（使用更早版本的 Visual Studio 编译 .NET 6 是不受官方支持的。）
</li>
<li>在 Visual Studio 中，点击 <i>Help &gt; Check For Updates</i> 并安装最新版本。</li>
<li>完全退出 Visual Studio。</li>
<li>在文本编辑器中打开每个模组的 <samp>.csproj</samp> 文件，然后找到下面这行：
<div class="mw-highlight mw-highlight-lang-xml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">&lt;TargetFramework&gt;</span>net5.0<span class="nt">&lt;/TargetFramework&gt;</span>
</pre></div>
<p>将其改为：
</p>
<div class="mw-highlight mw-highlight-lang-xml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">&lt;TargetFramework&gt;</span>net6.0<span class="nt">&lt;/TargetFramework&gt;</span>
</pre></div>
</li>
<li>删除您的解决方案的隐藏的 <samp>.vs</samp> 文件夹，以及每个项目的 <samp>bin</samp> 和 <samp>obj</samp> 文件夹。</li>
<li>重新在 Visual Studio 中打开解决方案，点击 <i>Build &gt; Rebuild Solution</i>，并确认其仍然能正常载入游戏。</li>
</ol>
<h3><span id="物品ID更改"></span><span class="mw-headline" id=".E7.89.A9.E5.93.81ID.E6.9B.B4.E6.94.B9">物品ID更改</span></h3>
<dl><dd>另请参阅：<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">新增内容中的自定义物品</a>。</dd></dl>
<p><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">主要的 <samp>Item</samp> 属性已更改</a>。要迁移现有代码：
</p>
<ul>
<li>不要使用 <samp>ParentSheetIndex</samp> 来比较物品。例如，<samp>item.ParentSheetIndex == 0</samp> 会匹配<a href="/%E6%9D%82%E8%8D%89" title="杂草">杂草</a>和任何自定义物品（如果其贴图位于自定义贴图表的第一个位置）。您应该使用 <a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E7.89.A9.E5.93.81ID" title="模组:公共数据字段">新的 <samp>ItemId</samp> 和 <samp>QualifiedItemId</samp> 属性</a> 来比较物品。例如，以下是迁移各种常见形式的方法：

<table class="wikitable">

<tbody><tr>
<th>旧代码
</th>
<th>新代码
</th></tr>

<tr>
<td><samp>item.ParentSheetIndex == 848</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)848"</samp>
</td></tr>
<tr>
<td><samp>IsNormalObjectAtParentSheetIndex(item, 74)</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)74"</samp>
</td></tr>
<tr>
<td><samp>!item.bigCraftable &amp;&amp; item.ParentSheetIndex == 128</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)128"</samp>
</td></tr>
<tr>
<td><samp>item is Boots &amp;&amp; item.ParentSheetIndex == 505</samp>
</td>
<td><samp>item.QualifiedItemId == "(B)505"</samp>
</td></tr></tbody></table></li>
<li>不要假设物品贴图位于原版贴图表中。例如，不要渲染 <samp>Game1.objectSpriteSheet</samp> 来获取物品的贴图表，而是调用 <code>ItemRegistry.GetMetadata(item.QualifiedItemId).GetTexture()</code> 来获取其贴图表。</li>
<li>创建物品的方式与以前相同，只是您现在需要指定物品的 <samp>ItemId</samp>，而不是 <samp>QualifiedItemId</samp> 或 <samp>ParentSheetIndex</samp>。对于原版物品，这是<samp>ItemId</samp> 和 <samp>ParentSheetIndex</samp> 相同。例如：

<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="s">&quot;634&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>                      <span class="c1">// 原版物品</span>
<span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="s">&quot;Example.ModId_Watermelon&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// 自定义物品</span>
</pre></div>
<p>您也可以使用新的 <samp>ItemRegistry</samp> API 来基于 <samp>QualifiedItemId</samp> 构造物品：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Item</span> <span class="n">item</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&quot;(B)505&quot;</span><span class="p">);</span> <span class="c1">// 橡胶靴</span>
</pre></div></li>
</ul>
<h3><span id="其他ID更改"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96ID.E6.9B.B4.E6.94.B9">其他ID更改</span></h3>
<p>游戏中的许多其他内容现在也有唯一的字符串ID（包括<a href="#.E6.95.88.E6.9E.9C.E5.A4.A7.E4.BF.AE">增益</a>、<a href="#.E5.AD.97.E7.AC.A6.E4.B8.B2.E4.BA.8B.E4.BB.B6ID">事件</a>和果树）。要迁移现有代码：
</p>
<ul><li>当引用数字ID时，通常只需将其转换为字符串（如 <code>Game1.player.hasBuff("1590166")</code> 或 <code>Game1.player.eventsSeen.Contains("1590166")</code>）。</li>
<li>创建增益效果时，请参阅<a href="#.E6.95.88.E6.9E.9C.E5.A4.A7.E4.BF.AE">效果大修</a>了解如何创建效果。</li>
<li>对于已有的内容包数据，请参阅<a href="#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID">唯一字符串ID</a>部分中的迁移步骤。</li></ul>
<h3><span id="建筑和动物变更"></span><span class="mw-headline" id=".E5.BB.BA.E7.AD.91.E5.92.8C.E5.8A.A8.E7.89.A9.E5.8F.98.E6.9B.B4">建筑和动物变更</span></h3>
<dl><dd><i>另请参阅：<a href="#.E9.9A.8F.E5.A4.84.E5.BB.BA.E9.80.A0">新增内容中的随处建造</a>。</i></dd></dl>
<ul><li>由于所有位置现在都允许建造建筑和饲养动物，处理 <samp>BuildableGameLocation</samp> 和 <samp>IAnimalLocation</samp> 的模组代码将无法检测到所有可建造的地点。您可以用 <samp>location.IsBuildableLocation()</samp>（或直接访问 <samp>location.buildings</samp>）和 <samp>location.animals.Any()</samp> 来替换它们。模组不应再引用 <samp>BuildableGameLocation</samp> 和 <samp>IAnimalLocation</samp>。</li>
<li>由于建筑可以随处建造，您不能再假设建筑位于农场。您可以检查新的 <samp>building.buildingLocation</samp> 字段。</li>
<li>您应该审查对农场的直接引用（如 <code>Game1.getFarm()</code> 或 <code>Game1.getLocationFromName("Farm")</code>），看看是否需要重写以允许其他地点。</li>
<li><code>Utility.numSilos()</code> 不应再用于计算剩余干草量，因为它不考虑能储存干草的自定义建筑。请改用 <code>Game1.getFarm().GetHayCapacity()</code>。</li>
<li><samp>Cat</samp> 和 <samp>Dog</samp> 类现在已不再使用；所有宠物现在直接是 <samp>Pet</samp>。</li></ul>
<h3><span id="玩家变更"></span><span class="mw-headline" id=".E7.8E.A9.E5.AE.B6.E5.8F.98.E6.9B.B4">玩家变更</span></h3>
<dl><dd>另请参阅：<a href="#.E6.95.88.E6.9E.9C.E5.A4.A7.E4.BF.AE">新增内容中的效果大修</a>。</dd></dl>
<ul>
<li>作为<a href="#.E6.95.88.E6.9E.9C.E5.A4.A7.E4.BF.AE">效果大修</a>的一部分，<samp>Game1.player</samp> / <samp>Farmer</samp> 的多个字段发生了变化：
<table class="wikitable">

<tbody><tr>
<th>旧字段
</th>
<th>迁移方法
</th></tr>
<tr>
<td><samp>appliedBuffs</samp><br /><samp>appliedSpecialBuffs</samp>
</td>
<td>使用 <code>Game1.player.hasBuff(id)</code> 代替。
</td></tr>
<tr>
<td><samp>attack</samp><br /><samp>immunity</samp>
</td>
<td>使用 <samp>Attack</samp> 和 <samp>Immunity</samp> 代替。
</td></tr>
<tr>
<td><samp>addedCombatLevel</samp><br /><samp>addedFarmingLevel</samp><br /><samp>addedFishingLevel</samp><br /><samp>addedForagingLevel</samp><br /><samp>addedLuckLevel</samp><br /><samp>addedMiningLevel</samp><br /><samp>attackIncreaseModifier</samp><br /><samp>critChanceModifier</samp><br /><samp>critPowerModifier</samp><br /><samp>knockbackModifier</samp><br /><samp>weaponPrecisionModifier</samp><br /><samp>weaponSpeedModifier</samp>
</td>
<td>使用 <samp>Game1.player.buffs</samp> 下的等效属性代替（例如 <samp>Game1.player.buffs.CombatLevel）。
</samp></td></tr>
<tr>
<td><samp>resilience</samp>
</td>
<td>使用 <samp>buffs.Defense</samp> 代替。
</td></tr>
<tr>
<td><samp>addedSpeed</samp><br /><samp>CombatLevel</samp><br /><samp>CraftingTime</samp><br /><samp>FarmingLevel</samp><br /><samp>FishingLevel</samp><br /><samp>ForagingLevel</samp><br /><samp>LuckLevel</samp><br /><samp>MagneticRadius</samp><br /><samp>MaxStamina</samp><br /><samp>MiningLevel</samp><br /><samp>Stamina</samp>
</td>
<td>这些现在是只读的，不能直接设置。您可以通过<a href="#.E6.95.88.E6.9E.9C.E5.A4.A7.E4.BF.AE">添加增益</a>（可以添加不可见效果）、装备加成等来更改它们。
</td></tr></tbody></table></li>
<li>游戏会自动重新计算增益效果。如需重置效果，只要重新应用该效果即可。有关更多信息，请参阅<a href="#.E6.95.88.E6.9E.9C.E5.A4.A7.E4.BF.AE">效果大修</a>。</li>
<li>增益效果逻辑已集中到 <samp>Game1.player.buffs</samp>。这取代了许多以前的字段/方法，如 <samp>Game1.buffsDisplay</samp>。</li>
</ul>
<h3><span id="碰撞变更"></span><span class="mw-headline" id=".E7.A2.B0.E6.92.9E.E5.8F.98.E6.9B.B4">碰撞变更</span></h3>
<p>游戏的地块碰撞逻辑已大修合并为 <samp>GameLocation</samp> 上的一组更简单的方法：
</p>
<table class="wikitable">

<tbody><tr>
<th>方法
</th>
<th>效果
</th></tr>
<tr>
<td><samp>CanSpawnCharacterHere</samp>
</td>
<td>判断 NPC 是否可以生成于给定的地块上（例如，该 NPC 在地图范围内且指定图块可行走），该地块没有放置物体，并且未设置 <samp>NoFurniture</samp> <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">地块属性</a>。
</td></tr>
<tr>
<td><samp>CanItemBePlacedHere</samp>
</td>
<td>判断物品是否可以非浮动地放置在给定地块上（例如，该物品在地图范围内，且未被不可行走的物品阻挡），并且未设置 <samp>NoFurniture</samp> <a href="/%E6%A8%A1%E7%BB%84:%E5%9C%B0%E5%9B%BE" title="模组:地图">图块属性</a>。
</td></tr>
<tr>
<td><samp>isBuildable</samp>
</td>
<td>判断是否可以在给定的地块上建造建筑。
</td></tr>
<tr>
<td><samp>IsTilePassable</samp>
</td>
<td>判断地块是否可以行走（忽略与游戏内物体、NPC 等的碰撞）。
</td></tr>
<tr>
<td><samp>IsTileOccupiedBy</samp>
</td>
<td>获取地块是否包含玩家、物体、NPC/怪物/宠物等、地形特征、建筑等。您可以选择要检查的实体，以及忽略不阻挡移动的实体。
</td></tr>
<tr>
<td><samp>IsTileBlockedBy</samp>
</td>
<td>等同于同时调用 <samp>IsTilePassable</samp> 和 <samp>IsTileOccupiedBy</samp>。
</td></tr>
<tr>
<td><samp>IsLocationSpecificOccupantOnTile</samp><br /><samp>IsLocationSpecificPlacementRestriction</samp>
</td>
<td>通常不应直接使用。用于检查特定位置的碰撞（例如<a href="/%E7%9F%BF%E4%BA%95" title="矿井">矿井</a>中的梯子或<a href="/%E5%A7%9C%E5%B2%9B" title="姜岛">姜岛</a>上的鹦鹉特快）。
</td></tr></tbody></table>
<h3><span id="其他破坏性API变更"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96.E7.A0.B4.E5.9D.8F.E6.80.A7API.E5.8F.98.E6.9B.B4">其他破坏性API变更</span></h3>
<p>（本节旨在当您遇到构建错误时为您提供快速参考；否则无需阅读。）
</p>
<h4><span id="移除未使用的代码"></span><span class="mw-headline" id=".E7.A7.BB.E9.99.A4.E6.9C.AA.E4.BD.BF.E7.94.A8.E7.9A.84.E4.BB.A3.E7.A0.81">移除未使用的代码</span></h4>
<p>1.6 移除了大量未使用的代码。包括以下类：
</p>
<table class="wikitable">

<tbody><tr>
<th>命名空间
</th>
<th>类名
</th></tr>
<tr>
<td><samp>StardewValley</samp>
</td>
<td>&#32;
<ul><li><samp>BuildingUpgrade</samp></li>
<li><samp>DisposableList</samp></li>
<li><samp>FurniturePlacer</samp></li>
<li><samp>ListPool</samp></li>
<li><samp>OneTimeRandom</samp></li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.Characters</samp>
</td>
<td>&#32;
<ul><li><samp>BotchedNetBool</samp></li>
<li><samp>BotchedNetField</samp></li>
<li><samp>BotchedNetInt</samp></li>
<li><samp>BotchedNetLong</samp></li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.Menus</samp>
</td>
<td>&#32;
<ul><li><samp>FarmInfoPage</samp></li>
<li><samp>MiniatureTerrainFeature</samp></li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.Monsters</samp>
</td>
<td>&#32;
<ul><li><samp>LavaCrab</samp></li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.Objects</samp>
</td>
<td>&#32;
<ul><li><samp>ObjectFactory</samp>（由<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81"><samp>ItemRegistry</samp></a> 替换）</li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.TerrainFeatures</samp>
</td>
<td>&#32;
<ul><li><samp>Quartz</samp></li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.Tools</samp>
</td>
<td>&#32;
<ul><li><samp>Blueprints</samp></li>
<li><samp>ToolFactory</samp>（由<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81"><samp>ItemRegistry</samp></a> 替换）</li></ul>
</td></tr></tbody></table>
<p>以及这些类成员：
</p>
<table class="wikitable">

<tbody><tr>
<th>类型
</th>
<th>成员
</th></tr>
<tr>
<td><samp>Axe</samp>
</td>
<td>&#32;
<ul><li><samp>StumpStrength</samp></li></ul>
</td></tr>
<tr>
<td><samp>Bush</samp>
</td>
<td>&#32;
<ul><li><samp>alpha</samp></li>
<li><samp>lastPlayerToHit</samp></li></ul>
</td></tr>
<tr>
<td><samp>Chest</samp>
</td>
<td>&#32;
<ul><li><samp>chestType</samp></li>
<li><samp>coins</samp></li></ul>
</td></tr>
<tr>
<td><samp>CosmeticPlant</samp>
</td>
<td>&#32;
<ul><li><samp>scale</samp></li></ul>
</td></tr>
<tr>
<td><samp>CraftingRecipe</samp>
</td>
<td>&#32;
<ul><li><samp>itemType</samp></li></ul>
</td></tr>
<tr>
<td><samp>Critter</samp>
</td>
<td>&#32;
<ul><li><samp>InitShared()</samp></li></ul>
</td></tr>
<tr>
<td><samp>Crop</samp>
</td>
<td>&#32;
<ul><li><samp>daysOfUnclutteredGrowth</samp></li></ul>
</td></tr>
<tr>
<td><samp>Dialogue</samp>
</td>
<td>&#32;
<ul><li><samp>dialogueToBeKilled</samp></li></ul>
</td></tr>
<tr>
<td><samp>Farm</samp>
</td>
<td>&#32;
<ul><li><samp>GetSpouseOutdoorAreaSpritesheetIndex()</samp></li></ul>
</td></tr>
<tr>
<td><samp>FarmAnimal</samp>
</td>
<td>&#32;
<ul><li><samp>homeLocation</samp></li></ul>
</td></tr>
<tr>
<td><samp>Farmer</samp>
</td>
<td>&#32;
<ul><li><samp>barnUpgradeLevel</samp> 和 <samp>BarnUpgradeLevel</samp></li>
<li><samp>blueprints</samp></li>
<li><samp>coalPieces</samp> 和 <samp>CoalPieces</samp></li>
<li><samp>coopUpgradeLevel</samp> 和 <samp>CoopUpgradeLevel</samp></li>
<li><samp>copperPieces</samp> 和 <samp>CopperPieces</samp></li>
<li><samp>eyeColor</samp></li>
<li><samp>feed</samp> 和 <samp>Feed</samp></li>
<li><samp>furnitureOwned</samp></li>
<li><samp>goldPieces</samp> 和 <samp>GoldPieces</samp></li>
<li><samp>hasBusTicket</samp></li>
<li><samp>hasGreenhouse</samp></li>
<li><samp>iridiumPieces</samp> 和 <samp>IridiumPieces</samp></li>
<li><samp>ironPieces</samp> 和 <samp>IronPieces</samp></li>
<li><samp>newSkillPointsToSpend</samp></li>
<li><samp>overallsColor</samp></li>
<li><samp>ownsFurniture</samp></li>
<li><samp>quartzPieces</samp> 和 <samp>QuartzPieces</samp></li>
<li><samp>shirtColor</samp></li>
<li><samp>skinColor</samp></li>
<li><samp>stonePieces</samp> 和 <samp>StonePieces</samp></li>
<li><samp>theaterBuildDate</samp></li>
<li><samp>woodPieces</samp> 和 <samp>WoodPieces</samp></li></ul>
</td></tr>
<tr>
<td><samp>Game1</samp>
</td>
<td>&#32;
<ul><li><samp>boardingBus</samp></li>
<li><samp>chanceToRainTomorrow</samp></li>
<li><samp>checkForNewLevelPerks</samp></li>
<li><samp>cloud</samp></li>
<li><samp>coopDwellerBorn<samp></samp></samp></li>
<li><samp>cropsOfTheWeek</samp></li>
<li><samp>currentBarnTexture</samp></li>
<li><samp>currentBillboard</samp></li>
<li><samp>currentCoopTexture</samp></li>
<li><samp>currentFloor</samp></li>
<li><samp>currentHouseTexture</samp></li>
<li><samp>currentWallpaper</samp></li>
<li><samp>dealerCalicoJackTotal</samp></li>
<li><samp>FarmerFloor</samp></li>
<li><samp>farmerWallpaper</samp></li>
<li><samp>fertilizer</samp></li>
<li><samp>floorPrice</samp></li>
<li><samp>greenhouseTexture</samp></li>
<li><samp>inMine<samp></samp></samp></li>
<li><samp>jukeboxPlaying</samp></li>
<li><samp>keyHelpString</samp></li>
<li><samp>listeningForKeyControlDefinitions<samp></samp></samp></li>
<li><samp>littleEffect</samp></li>
<li><samp>logoScreenTexture</samp></li>
<li><samp>mailboxTexture</samp></li>
<li><samp>menuChoice</samp></li>
<li><samp>menuUp<samp></samp></samp></li>
<li><samp>nameSelectUp<samp></samp></samp></li>
<li><samp>nameSelectType</samp></li>
<li><samp>numberOfSelectedItems</samp></li>
<li><samp>particleRaining<samp></samp></samp></li>
<li><samp>pickingTool</samp></li>
<li><samp>pickToolDelay</samp></li>
<li><samp>pickToolInterval</samp></li>
<li><samp>priceOfSelectedItem</samp></li>
<li><samp>progressBar</samp></li>
<li><samp>removeSquareDebrisFromTile(…)</samp></li>
<li><samp>selectedItemsType</samp></li>
<li><samp>shiny</samp></li>
<li><samp>shippingTax</samp></li>
<li><samp>showKeyHelp<samp></samp></samp></li>
<li><samp>slotResult</samp></li>
<li><samp>startedJukeboxMusic</samp></li>
<li><samp>tinyFontBorder</samp></li>
<li><samp>toolHeld</samp></li>
<li><samp>toolIconBox</samp></li>
<li><samp>tvStation</samp></li>
<li><samp>tvStationTexture</samp></li>
<li><samp>wallpaperPrice</samp></li></ul>
</td></tr>
<tr>
<td><samp>GameLocation</samp>
</td>
<td>&#32;
<ul><li><samp>boardBus(…)</samp></li>
<li><samp>checkForMapChanges()</samp></li>
<li><samp>getWallDecorItem(…)</samp></li>
<li><samp>removeBatch(…)</samp></li>
<li><samp>removeDirt(…)</samp></li>
<li><samp>removeStumpOrBoulder(…)</samp></li>
<li><samp>tryToBuyNewBackpack()</samp></li></ul>
</td></tr>
<tr>
<td><samp>GiantCrop</samp>
</td>
<td>&#32;
<ul><li><samp>forSale</samp></li></ul>
</td></tr>
<tr>
<td><samp>IClickableMenu</samp>
</td>
<td>&#32;
<ul><li><samp>currentRegion</samp></li></ul>
</td></tr>
<tr>
<td><samp>MeleeWeapon</samp>
</td>
<td>&#32;
<ul><li><samp>attackSwordCooldownTime</samp></li>
<li><samp>doStabbingSwordFunction(…)</samp></li></ul>
</td></tr>
<tr>
<td><samp>Monster</samp>
</td>
<td>&#32;
<ul><li><samp>doHorizontalMovement(…)</samp></li>
<li><samp>durationOfRandomMovements</samp></li>
<li><samp>coinsToDrop</samp></li></ul>
</td></tr>
<tr>
<td><samp>NPC</samp>
</td>
<td>&#32;
<ul><li><samp>idForClones</samp></li></ul>
</td></tr>
<tr>
<td><samp>Object</samp>
</td>
<td>&#32;
<ul><li><samp>attachToSprinklerAttachment(…)</samp></li>
<li><samp>canBePlacedInWater()</samp></li>
<li><samp>consumeRecipe(…)</samp></li>
<li><samp>copperBar</samp></li>
<li><samp>goldBar</samp></li>
<li><samp>iridiumBar</samp></li>
<li><samp>ironBar</samp></li>
<li><samp>isHoeDirt</samp> 和 <samp>IsHoeDirt</samp></li></ul>
</td></tr>
<tr>
<td><samp>PathFindController</samp>
</td>
<td>&#32;
<ul><li><samp>CheckClearance(…)</samp></li>
<li><samp>limit</samp></li></ul>
</td></tr>
<tr>
<td><samp>SaveGame</samp>
</td>
<td>&#32;
<ul><li><samp>cropsOfTheWeek</samp></li>
<li><samp>currentFloor</samp></li>
<li><samp>currentWallpaper</samp></li>
<li><samp>FarmerFloor</samp></li>
<li><samp>farmerWallpaper</samp></li>
<li><samp>shippingTax</samp></li></ul>
</td></tr>
<tr>
<td><samp>Spiker</samp>
</td>
<td>&#32;
<ul><li><samp>GetSpawnPosition</samp></li></ul>
</td></tr>
<tr>
<td><samp>Stats</samp>
</td>
<td>&#32;
<ul><li><samp>barsSmelted</samp> 和 <samp>BarsSmelted</samp></li>
<li><samp>coalFound</samp> 和 <samp>CoalFound</samp></li>
<li><samp>coinsFound</samp> 和 <samp>coinsFound</samp></li>
<li><samp>starLevelCropsShipped</samp> 和 <samp>starLevelCropsShipped</samp></li></ul>
</td></tr>
<tr>
<td><samp>Tool</samp>
</td>
<td>&#32;
<ul><li><samp>batteredSwordSpriteIndex</samp></li>
<li><samp>copperColor</samp></li>
<li><samp>GetSecondaryEnchantmentCount()</samp></li>
<li><samp>goldColor</samp></li>
<li><samp>iridiumColor</samp></li>
<li><samp>nonUpgradeable</samp></li>
<li><samp>parsnipSpriteIndex</samp></li>
<li><samp>Stackable</samp></li>
<li><samp>startOfNegativeWeaponIndex</samp></li>
<li><samp>steelColor</samp></li></ul>
</td></tr>
<tr>
<td><samp>Utility</samp>
</td>
<td>&#32;
<ul><li><samp>buyFloor()</samp></li>
<li><samp>buyWallpaper()</samp></li>
<li><samp>cropsOfTheWeek()</samp></li>
<li><samp>facePlayerEndBehavior(…)</samp></li>
<li><samp>getRandomSlotCharacter()</samp></li>
<li><samp>plantCrops(…)</samp></li>
<li><samp>showLanternBar()</samp></li></ul>
</td></tr></tbody></table>
<h4><span id="重命名的类"></span><span class="mw-headline" id=".E9.87.8D.E5.91.BD.E5.90.8D.E7.9A.84.E7.B1.BB">重命名的类</span></h4>
<p>这些类在 1.6 版本中被重命名：
</p>
<table class="wikitable">

<tbody><tr>
<th>旧名称
</th>
<th>新名称
</th></tr>
<tr>
<td><samp>Game1.MusicContext</samp>
</td>
<td><samp>MusicContext</samp> (在 <samp>StardewValley.GameData</samp> 中)
</td></tr>
<tr>
<td><samp>LocationContext</samp>
</td>
<td><samp>LocationContexts</samp>
</td></tr>
<tr>
<td><samp>SpecialOrder.QuestStatus</samp>
</td>
<td><samp>SpecialOrderStatus</samp> (在 <samp>StardewValley.SpecialOrders</samp> 中)
</td></tr></tbody></table>
<p>这些类被移动到不同的命名空间：
</p>
<table class="wikitable">

<tbody><tr>
<th>类型
</th>
<th>旧命名空间
</th>
<th>新命名空间
</th></tr>
<tr>
<td><samp>AmethystEnchantment</samp><br /><samp>AquamarineEnchantment</samp><br /><samp>ArchaeologistEnchantment</samp><br /><samp>ArtfulEnchantment</samp><br /><samp>AutoHookEnchantment</samp><br /><samp>AxeEnchantment</samp><br /><samp>BaseEnchantment</samp><br /><samp>BaseWeaponEnchantment</samp><br /><samp>BottomlessEnchantment</samp><br /><samp>BugKillerEnchantment</samp><br /><samp>CrusaderEnchantment</samp><br /><samp>DiamondEnchantment</samp><br /><samp>EfficientToolEnchantment</samp><br /><samp>EmeraldEnchantment</samp><br /><samp>FishingRodEnchantment</samp><br /><samp>GalaxySoulEnchantment</samp><br /><samp>GenerousEnchantment</samp><br /><samp>HaymakerEnchantment</samp><br /><samp>HoeEnchantment</samp><br /><samp>JadeEnchantment</samp><br /><samp>MagicEnchantment</samp><br /><samp>MasterEnchantment</samp><br /><samp>MilkPailEnchantment</samp><br /><samp>PanEnchantment</samp><br /><samp>PickaxeEnchantment</samp><br /><samp>PowerfulEnchantment</samp><br /><samp>PreservingEnchantment</samp><br /><samp>ReachingToolEnchantment</samp><br /><samp>RubyEnchantment</samp><br /><samp>ShavingEnchantment</samp><br /><samp>ShearsEnchantment</samp><br /><samp>SwiftToolEnchantment</samp><br /><samp>TopazEnchantment</samp><br /><samp>VampiricEnchantment</samp><br /><samp>WateringCanEnchantment</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.Enchantments</samp>
</td></tr>
<tr>
<td><samp>Extensions</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.Extensions</samp>
</td></tr>
<tr>
<td><samp>ModDataDictionary</samp><br /><samp>ModHooks</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.Mods</samp>
</td></tr>
<tr>
<td><samp>PathFindController</samp><br /><samp>PathNode</samp><br /><samp>PriorityQueue</samp><br /><samp>SchedulePathDescription</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.Pathfinding</samp>
</td></tr>
<tr>
<td><samp>SpecialOrder</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.SpecialOrders</samp>
</td></tr>
<tr>
<td><samp>CollectObjective</samp><br /><samp>DeliverObjective</samp><br /><samp>DonateObjective</samp><br /><samp>FishObjective</samp><br /><samp>GiftObjective</samp><br /><samp>JKScoreObjective</samp><br /><samp>OrderObjective</samp><br /><samp>ReachMineFloorObjective</samp><br /><samp>ShipObjective</samp><br /><samp>SlayObjective</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.SpecialOrders.Objectives</samp>
</td></tr>
<tr>
<td><samp>FriendshipReward</samp><br /><samp>GemsReward</samp><br /><samp>MailReward</samp><br /><samp>MoneyReward</samp><br /><samp>OrderReward</samp><br /><samp>ResetEventReward</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.SpecialOrders.Rewards</samp>
</td></tr></tbody></table>
<h4><span id="其他API更改"></span><span class="mw-headline" id=".E5.85.B6.E4.BB.96API.E6.9B.B4.E6.94.B9">其他API更改</span></h4>
<p>这些类成员在 1.6 版本中发生了变化：
</p>
<table class="wikitable">

<tbody><tr>
<th>类型
</th>
<th>成员
</th>
<th>迁移说明
</th></tr>
<tr>
<td><samp>BigSlime</samp>
</td>
<td><samp>heldObject</samp>
</td>
<td>替换为 <samp>heldItem</samp>，允许非物体对象。
</td></tr>
<tr>
<td rowspan="3"><samp>Bush</samp>
</td>
<td><samp>overrideSeason</samp>
</td>
<td>已移除；使用 <code>bush.Location.GetSeason()</code> 代替。
</td></tr>
<tr>
<td><samp>greenhouseBush</samp>
</td>
<td>已移除；使用 <code>bush.IsSheltered()</code> 或 <code>bush.currentLocation.IsGreenhouse</code> 代替。
</td></tr>
<tr>
<td><samp>inBloom</samp>
</td>
<td>移除参数，例如 <code>bush.inBloom(Game1.currentSeason, Game1.dayOfMonth)</code> → <code>bush.inBloom()</code>。
</td></tr>
<tr>
<td rowspan="3"><samp>Character</samp>
</td>
<td><samp>getStandingX</samp><br /><samp>getStandingY</samp><br /><samp>getStandingXY</samp>
</td>
<td>已移除；使用 <samp>character.StandingPixel</samp> 代替。
</td></tr>
<tr>
<td><samp>getTileLocation</samp><br /><samp>getTileX</samp><br /><samp>getTileY</samp><br />
</td>
<td>已移除；使用 <samp>character.Tile</samp> 代替。
</td></tr>
<tr>
<td><samp>getTileLocationPoint</samp>
</td>
<td>已移除；使用 <samp>character.TilePoint</samp> 代替。
</td></tr>
<tr>
<td><samp>Chest</samp>
</td>
<td><samp>MoveToSafePosition</samp>
</td>
<td>替换为更简单的 <samp>TryMoveToSafePosition</samp>。
</td></tr>
<tr>
<td rowspan="2"><samp>Dialogue</samp>
</td>
<td><samp>dialogues</samp>
</td>
<td>从 <code>List&lt;string&gt;</code> 更改为 <code>List&lt;DialogueLine&gt;</code>。每行对话的 <samp>Text</samp> 字段等于旧值。
</td></tr>
<tr>
<td><samp>isOnFinalDialogue()</samp>
</td>
<td>当前对话是否为最后一句带消息文本的对话；这是因为 <samp>dialogues</samp> 中可能仍有一些“空对话”，这些空对话常用于实现对话以外的特定效果。
</td></tr>
<tr>
<td rowspan="3"><samp>Farmer</samp>
</td>
<td><samp>changePants(…)</samp>
</td>
<td>重命名为 <samp>changePantsColor(…)</samp>，以与 <samp>change[Eye&#124;Hair&#124;Shoe]Color</samp> 保持一致。
</td></tr>
<tr>
<td><samp>isMarried()</samp>
</td>
<td>重命名为 <samp>isMarriedOrRoommates()</samp> 以明确含义。
</td></tr>
<tr>
<td><samp>visibleQuestCount</samp>
</td>
<td>替换为 <samp>hasVisibleQuests</samp>。
</td></tr>
<tr>
<td><samp>Flooring</samp>
</td>
<td><samp>GetFloorPathLookup</samp>
</td>
<td>使用 <samp>Game1.floorPathData</samp> 代替。
</td></tr>
<tr>
<td><samp>Forest</samp>
</td>
<td><samp>log</samp>
</td>
<td>移动到 <samp>Forest.resourceClumps</samp> 中。
</td></tr>
<tr>
<td><samp>FruitTree</samp>
</td>
<td><samp>GreenHouseTree</samp>
</td>
<td>替换为 <samp>IgnoresSeasonsHere()</samp>。
</td></tr>
<tr>
<td rowspan="3"><samp>Game1</samp>
</td>
<td><samp>bigCraftableInformation</samp>
</td>
<td>已全面改造为 <a href="/%E6%A8%A1%E7%BB%84:%E5%A4%A7%E5%9E%8B%E6%89%93%E9%80%A0%E5%93%81" title="模组:大型打造品"><samp>Game1.bigCraftableData</samp></a>。
</td></tr>
<tr>
<td><samp>clothingInformation</samp>
</td>
<td>已全面改造为 <a href="/%E6%A8%A1%E7%BB%84:%E4%B8%8A%E8%A1%A3" title="模组:上衣"><samp>Game1.shirtData</samp></a> 和 <a href="/%E6%A8%A1%E7%BB%84:%E8%A3%A4%E5%AD%90" title="模组:裤子"><samp>Game1.pantsData</samp></a>。
</td></tr>
<tr>
<td><samp>objectInformation</samp>
</td>
<td>已全面改造为 <a href="/%E6%A8%A1%E7%BB%84:%E7%89%A9%E4%BD%93" title="模组:物体"><samp>Game1.objectData</samp></a>。
</td></tr>
<tr>
<td rowspan="3"><samp>GameLocation</samp>
</td>
<td><samp>getCharacters</samp>
</td>
<td>已移除；使用 <samp>characters</samp> 字段代替。
</td></tr>
<tr>
<td><samp>GetMapPropertyPosition</samp>
</td>
<td>替换为 <samp>TryGetMapPropertyAs</samp>，支持多种数据类型（不仅仅是 <samp>Point</samp>）。
</td></tr>
<tr>
<td><samp>isTileOccupied</samp><br /><samp>isTileOccupiedForPlacement</samp><br /><samp>isTileOccupiedIgnoreFloors</samp><br /><samp>isTileLocationOpenIgnoreFrontLayers</samp><br /><samp>isTileLocationTotallyClearAndPlaceable</samp><br /><samp>isTileLocationTotallyClearAndPlaceableIgnoreFloors</samp>
</td>
<td>已移除。碰撞逻辑已重写。新的逻辑使用一组新方法（主要是 <samp>isTilePassable</samp>、<samp>IsTileOccupiedBy</samp> 和 <samp>CanItemBePlacedHere</samp>）。建议模组更新为使用新方法。
<p>以下是一组扩展方法，用于在您正式更新前临时修复旧版代码。但不建议依赖这些方法，因为它们不会在未来的版本中被维护。
</p>
<table class="mw-collapsible mw-collapsed" style="">
<tbody><tr>
<th style="text-align: left;"><b>展开查看不推荐的代码</b>&#160;
</th></tr>
<tr>
<td><div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">GameLocationExtensions</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileOccupiedForPlacement</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">tileLocation</span><span class="p">,</span> <span class="n">Object</span> <span class="n">toPlace</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">CanItemBePlacedHere</span><span class="p">(</span><span class="n">tileLocation</span><span class="p">,</span> <span class="n">toPlace</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">toPlace</span><span class="p">.</span><span class="n">isPassable</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileOccupied</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">tileLocation</span><span class="p">,</span> <span class="kt">string</span> <span class="n">characterToIgnore</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">ignoreAllCharacters</span> <span class="p">=</span> <span class="k">false</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">CollisionMask</span> <span class="n">mask</span> <span class="p">=</span> <span class="n">ignoreAllCharacters</span> <span class="p">?</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">All</span> <span class="p">&amp;</span> <span class="p">~</span><span class="n">CollisionMask</span><span class="p">.</span><span class="n">Characters</span> <span class="p">&amp;</span> <span class="p">~</span><span class="n">CollisionMask</span><span class="p">.</span><span class="n">Farmers</span> <span class="p">:</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">All</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">IsTileOccupiedBy</span><span class="p">(</span><span class="n">tileLocation</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileOccupiedIgnoreFloors</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">tileLocation</span><span class="p">,</span> <span class="kt">string</span> <span class="n">characterToIgnore</span> <span class="p">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">IsTileOccupiedBy</span><span class="p">(</span><span class="n">tileLocation</span><span class="p">,</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">Buildings</span> <span class="p">|</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">Furniture</span> <span class="p">|</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">Objects</span> <span class="p">|</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">Characters</span> <span class="p">|</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">TerrainFeatures</span><span class="p">,</span> <span class="n">ignorePassables</span><span class="p">:</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">Flooring</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileLocationOpenIgnoreFrontLayers</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Location</span> <span class="n">tile</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">map</span><span class="p">.</span><span class="n">RequireLayer</span><span class="p">(</span><span class="s">&quot;Buildings&quot;</span><span class="p">).</span><span class="n">Tiles</span><span class="p">[</span><span class="n">tile</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="n">tile</span><span class="p">.</span><span class="n">Y</span><span class="p">]</span> <span class="p">==</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">location</span><span class="p">.</span><span class="n">isWaterTile</span><span class="p">(</span><span class="n">tile</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="n">tile</span><span class="p">.</span><span class="n">Y</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileLocationTotallyClearAndPlaceable</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">isTileLocationTotallyClearAndPlaceable</span><span class="p">(</span><span class="k">new</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileLocationTotallyClearAndPlaceableIgnoreFloors</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">v</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">isTileOnMap</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">location</span><span class="p">.</span><span class="n">isTileOccupiedIgnoreFloors</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">location</span><span class="p">.</span><span class="n">isTilePassable</span><span class="p">(</span><span class="k">new</span> <span class="n">Location</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">Y</span><span class="p">),</span> <span class="n">Game1</span><span class="p">.</span><span class="n">viewport</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">location</span><span class="p">.</span><span class="n">isTilePlaceable</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileLocationTotallyClearAndPlaceable</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">v</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Vector2</span> <span class="n">pixel</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">((</span><span class="n">v</span><span class="p">.</span><span class="n">X</span> <span class="p">*</span> <span class="n">Game1</span><span class="p">.</span><span class="n">tileSize</span><span class="p">)</span> <span class="p">+</span> <span class="n">Game1</span><span class="p">.</span><span class="n">tileSize</span> <span class="p">/</span> <span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">Y</span> <span class="p">*</span> <span class="n">Game1</span><span class="p">.</span><span class="n">tileSize</span><span class="p">)</span> <span class="p">+</span> <span class="n">Game1</span><span class="p">.</span><span class="n">tileSize</span> <span class="p">/</span> <span class="m">2</span><span class="p">);</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="n">Furniture</span> <span class="n">f</span> <span class="k">in</span> <span class="n">location</span><span class="p">.</span><span class="n">furniture</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">furniture_type</span> <span class="p">!=</span> <span class="n">Furniture</span><span class="p">.</span><span class="n">rug</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">f</span><span class="p">.</span><span class="n">isPassable</span><span class="p">()</span> <span class="p">&amp;&amp;</span> <span class="n">f</span><span class="p">.</span><span class="n">GetBoundingBox</span><span class="p">().</span><span class="n">Contains</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">pixel</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">pixel</span><span class="p">.</span><span class="n">Y</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">f</span><span class="p">.</span><span class="n">AllowPlacementOnThisTile</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">Y</span><span class="p">))</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">isTileOnMap</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">location</span><span class="p">.</span><span class="n">isTileOccupied</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">location</span><span class="p">.</span><span class="n">isTilePassable</span><span class="p">(</span><span class="k">new</span> <span class="n">Location</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">Y</span><span class="p">),</span> <span class="n">Game1</span><span class="p">.</span><span class="n">viewport</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">location</span><span class="p">.</span><span class="n">isTilePlaceable</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>GiantCrop</samp>
</td>
<td><samp>which</samp>
</td>
<td>替换为 <samp>itemId</samp>。
</td></tr>
<tr>
<td><samp>Item</samp>
</td>
<td><samp>SanitizeContextTag</samp>
</td>
<td>替换为 <samp>ItemContextTagManager.SanitizeContextTag</samp>。
</td></tr>
<tr>
<td><samp>LocalizedContentManager</samp>
</td>
<td><samp>LanguageCodeString</samp>
</td>
<td>现在为静态。
</td></tr>
<tr>
<td><samp>LocationContextData</samp>
</td>
<td><samp>Name</samp>
</td>
<td>已移除；使用其在 <samp>Game1.locationContextData</samp> 中的字典键代替。
</td></tr>
<tr>
<td><samp>NetFields</samp>
</td>
<td><samp>AddFields</samp>
</td>
<td>已移除；使用 <samp>AddField</samp> 代替。例如：
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// 旧代码</span>
<span class="n">NetFields</span><span class="p">.</span><span class="n">AddFields</span><span class="p">(</span><span class="n">textureName</span><span class="p">,</span> <span class="n">spriteWidth</span><span class="p">,</span> <span class="n">spriteHeight</span><span class="p">);</span>

<span class="c1">// 新代码</span>
<span class="n">NetFields</span>
    <span class="p">.</span><span class="n">AddField</span><span class="p">(</span><span class="n">textureName</span><span class="p">)</span>
    <span class="p">.</span><span class="n">AddField</span><span class="p">(</span><span class="n">spriteWidth</span><span class="p">)</span>
    <span class="p">.</span><span class="n">AddField</span><span class="p">(</span><span class="n">spriteHeight</span><span class="p">);</span>
</pre></div>
<p>注意，第二个参数（<samp>name</samp>）通常应省略，因为它会从第一个参数传递的值中自动获取值。
</p>
</td></tr>
<tr>
<td rowspan="7"><samp>NPC</samp>
</td>
<td><samp>canReceiveThisItemAsGift(…)</samp>
</td>
<td>已移除。最接近的等效方法是 <code>item.canBeGivenAsGift()</code>，或者您可以使用 <code>npc.tryReceiveActiveObject(Game1.player, probe: true)</code> 检查 NPC 是否会接受玩家持有的物品（作为礼物或其他用途）。
</td></tr>
<tr>
<td><samp>Gender</samp><br /><samp>female</samp><br /><samp>male</samp><br /><samp>undefined</samp>
</td>
<td><samp>Gender</samp> 字段现在使用 <samp>Gender</samp> 枚举而不是数字常量。例如，<code>npc.Gender == NPC.female</code> 在 1.6 中变为 <code>npc.Gender == Gender.Female</code>。
</td></tr>
<tr>
<td><samp>homeRegion</samp>
</td>
<td>已移除；使用 <samp>npc.GetData()?.HomeRegion</samp> 代替。将 <samp>0</samp> 替换为 <samp>"Other"</samp> 或 <samp>NPC.region_other</samp>，<samp>1</samp> 替换为 <samp>"Desert"</samp> 或 <samp>NPC.region_desert</samp>，<samp>2</samp> 替换为 <samp>"Town"</samp> 或 <samp>NPC.region_town</samp>。
</td></tr>
<tr>
<td><samp>isBirthday</samp>
</td>
<td>移除参数，例如 <code>npc.isBirthday(Game1.currentSeason, Game1.dayOfMonth)</code> → <code>npc.isBirthday()</code>。
</td></tr>
<tr>
<td><samp>isVillager()</samp>
</td>
<td>已弃用；使用 <samp>character.IsVillager</samp> 属性代替。
</td></tr>
<tr>
<td><samp>populateRoutesFromLocationToLocationList</samp>
</td>
<td>替换为 <samp>WarpPathfindingCache.PopulateCache</samp>。
</td></tr>
<tr>
<td><samp>Schedule</samp>
</td>
<td>不再可赋值，使用 <samp>TryLoadSchedule</samp> 的重载之一代替。
</td></tr>
<tr>
<td rowspan="3"><samp>Object</samp>
</td>
<td><samp>GetContextTagList()</samp>
</td>
<td>替换为 <samp>GetContextTags()</samp>，返回哈希集合而不是列表。
</td></tr>
<tr>
<td><samp>HasBeenPickedUpByPlayer</samp>
</td>
<td>已移除；使用 <samp>HasBeenInInventory</samp> 代替。
</td></tr>
<tr>
<td><samp>isPotentialBasicShippedCategory</samp>
</td>
<td>第二个参数现在应为整数（如 <samp>-75</samp> 或 <samp>Object.VegetableCategory</samp>），而不是字符串（如 <samp>"-75"</samp>）。
</td></tr>
<tr>
<td rowspan="9"><samp>Utility</samp>
</td>
<td><samp>doesItemWithThisIndexExistAnywhere</samp>
</td>
<td>替换为 <samp>Utility.doesItemExistAnywhere</samp>，接受字符串物品ID。例如：
<ul><li><code>Utility.doesItemWithThisIndexExistAnywhere(128)</code> &#8594; <code>Utility.doesItemExistAnywhere("(O)128")</code>;</li>
<li><code>Utility.doesItemWithThisIndexExistAnywhere(128, true)</code> &#8594; <code>Utility.doesItemExistAnywhere("(BC)128")</code>。</li></ul>
</td></tr>
<tr>
<td><samp>ForAllLocations</samp><br /><samp>iterateAllCrops</samp><br /><samp>iterateAllItems</samp>
</td>
<td>已移除；使用等效的 <samp>Utility.ForEach*</samp> 方法代替。
</td></tr>
<tr>
<td><samp>GetHorseWarpRestrictionsForFarmer</samp>
</td>
<td>现在返回一个标识枚举，而不是整数值列表。等效值为 1 → <samp>NoOwnedHorse</samp>，2 → <samp>Indoors</samp>，3 → <samp>NoRoom</samp>，4 → <samp>InUse</samp>。
<p>例如：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// 旧代码</span>
<span class="kt">bool</span> <span class="n">inUse</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">GetHorseWarpRestrictionsForFarmer</span><span class="p">(</span><span class="n">player</span><span class="p">).</span><span class="n">Any</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span> <span class="p">==</span> <span class="m">4</span><span class="p">);</span>

<span class="c1">// 新代码</span>
<span class="kt">bool</span> <span class="n">inUse</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">GetHorseWarpRestrictionsForFarmer</span><span class="p">(</span><span class="n">player</span><span class="p">).</span><span class="n">HasFlag</span><span class="p">(</span><span class="n">Utility</span><span class="p">.</span><span class="n">HorseWarpRestrictions</span><span class="p">.</span><span class="n">InUse</span><span class="p">);</span>
</pre></div>
<p>以下代码用于检查是否不存在马匹传送限制：
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">canSummon</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">GetHorseWarpRestrictionsForFarmer</span><span class="p">(</span><span class="n">player</span><span class="p">)</span> <span class="p">==</span> <span class="n">Utility</span><span class="p">.</span><span class="n">HorseWarpRestrictions</span><span class="p">.</span><span class="n">None</span><span class="p">;</span>
</pre></div>
<p>对于 C# 模组，如果您希望为自定义马匹传送限制添加错误消息，可以修改 <samp>Utility.GetHorseWarpErrorMessage</samp>。
</p>
</td></tr>
<tr>
<td><samp>getRandomTownNPC(…)</samp>
</td>
<td>替换为 <code>Utility.GetRandomWinterStartParticipant(…)</code> 或 <code>Utility.getRandomNpcFromHomeRegion(NPC.region_town)</code>。
</td></tr>
<tr>
<td><samp>getTodaysBirthdayNPC</samp>
</td>
<td>移除参数，例如 <code>Utility.getTodaysBirthdayNPC(Game1.currentSeason, Game1.dayOfMonth)</code> → <code>Utility.getTodaysBirthdayNPC()</code>。
</td></tr>
<tr>
<td><samp>getPooledList</samp><br /><samp>returnPooledList</samp>
</td>
<td>游戏不再使用列表池。在大多数情况下，您应该使用 <a href="#.E8.BF.AD.E4.BB.A3"><samp>Utility.ForEach*</samp> 方法</a> 代替，这些方法不需要列表池。
</td></tr>
<tr>
<td><samp>numObelisksOnFarm</samp>
</td>
<td>重命名为 <samp>GetObeliskTypesBuilt</samp>，它会搜索所有地点。
</td></tr>
<tr>
<td><samp>numSilos</samp>
</td>
<td>已移除。
<p>如果您使用此方法来计算干草储量，1.6 版本中会稍微复杂一些，因为新版本中可以使用自定义建筑存储干草，且该建筑可以建造在任何地点。要获取当前地点的储量，请使用 <samp>Game1.currentLocation.GetHayCapacity()</samp> 代替之。要获取世界中的总干草储量，请使用 <samp>Utility.ForEachLocation</samp> 遍历所有地点，将每个地点干草储量相加。
</p><p>如果您确实需要获取筒仓的数量，请使用 <samp>location.getNumberBuildingsConstructed("Silo")</samp>（单个地点）或 <samp>Game1.GetNumberBuildingsConstructed("Silo")</samp>（所有地点）。
</p>
</td></tr>
<tr>
<td><samp>removeThisCharacterFromAllLocations</samp>
</td>
<td>已移除；使用 <samp>Game1.removeCharacterFromItsLocation</samp> 代替。
</td></tr>
<tr>
<td><samp>ShopMenu</samp>
</td>
<td><samp>storeContext</samp>
</td>
<td>替换为 <samp>ShopId</samp>。
</td></tr>
<tr>
<td rowspan="3"><samp>Stats</samp>
</td>
<td><samp>averageBedtime</samp><br /><samp>beveragesMade</samp><br /><samp>bouldersCracked</samp><br /><samp>caveCarrotsFound</samp><br /><samp>cheeseMade</samp><br /><samp>chickenEggsLayed</samp><br /><samp>copperFound</samp><br /><samp>cowMilkProduced</samp><br /><samp>cropsShipped</samp><br /><samp>daysPlayed</samp><br /><samp>diamondsFound</samp><br /><samp>dirtHoed</samp><br /><samp>duckEggsLayed</samp><br /><samp>fishCaught</samp><br /><samp>geodesCracked</samp><br /><samp>giftsGiven</samp><br /><samp>goatCheeseMade</samp><br /><samp>goatMilkProduced</samp><br /><samp>goldFound</samp><br /><samp>goodFriends</samp><br /><samp>individualMoneyEarned</samp><br /><samp>iridiumFound</samp><br /><samp>ironFound</samp><br /><samp>itemsCooked</samp><br /><samp>itemsCrafted</samp><br /><samp>itemsForaged</samp><br /><samp>itemsShipped</samp><br /><samp>monstersKilled</samp><br /><samp>mysticStonesCrushed</samp><br /><samp>notesFound</samp><br /><samp>otherPreciousGemsFound</samp><br /><samp>piecesOfTrashRecycled</samp><br /><samp>preservesMade</samp><br /><samp>prismaticShardsFound</samp><br /><samp>questsCompleted</samp><br /><samp>rabbitWoolProduced</samp><br /><samp>rocksCrushed</samp><br /><samp>seedsSown</samp><br /><samp>sheepWoolProduced</samp><br /><samp>slimesKilled</samp><br /><samp>stepsTaken</samp><br /><samp>stoneGathered</samp><br /><samp>stumpsChopped</samp><br /><samp>timesFished</samp><br /><samp>timesUnconscious</samp><br /><samp>totalMoneyGifted</samp><br /><samp>trufflesFound</samp><br /><samp>weedsEliminated</samp>
</td>
<td>已移除；使用等效的属性或方法。例如，<code>Game1.stats.daysPlayed</code> 可以替换为 <code>Game1.stats.DaysPlayed</code> 或类似 <code>Game1.stats.Get(StatKeys.DaysPlayed)</code> 的方法。请参阅 <a href="#C.23.E6.A8.A1.E7.BB.84.E7.BB.9F.E8.AE.A1.E6.95.B0.E6.8D.AE.E6.9B.B4.E6.94.B9">C# 模组统计数据更改</a>。
</td></tr>
<tr>
<td><samp>getStat(…)</samp><br /><samp>incrementStat(…)</samp>
</td>
<td>替换为 <samp>Get(…)</samp> 和 <samp>Increment(…)</samp>。请参阅 <a href="#C.23.E6.A8.A1.E7.BB.84.E7.BB.9F.E8.AE.A1.E6.95.B0.E6.8D.AE.E6.9B.B4.E6.94.B9">C# 模组统计数据更改</a>。
</td></tr>
<tr>
<td><samp>stat_dictionary</samp>
</td>
<td>重命名为 <samp>Values</samp>。请参阅 <a href="#C.23.E6.A8.A1.E7.BB.84.E7.BB.9F.E8.AE.A1.E6.95.B0.E6.8D.AE.E6.9B.B4.E6.94.B9">C# 模组统计数据更改</a>。
</td></tr>
<tr>
<td><samp>Woods</samp>
</td>
<td><samp>stumps</samp>
</td>
<td>移动到 <samp>resourceClumps</samp> 中。
</td></tr></tbody></table>
<h3><span id="检查过时代码"></span><span class="mw-headline" id=".E6.A3.80.E6.9F.A5.E8.BF.87.E6.97.B6.E4.BB.A3.E7.A0.81">检查过时代码</span></h3>
<p>重建整个模组（在 Visual Studio 中，点击“生成 &gt; 重新生成解决方案”），然后检查“错误列表”窗格中是否有形如“'X' is obsolete”的警告。任何来自原版游戏代码且标记为过时的内容将不再有效，之所以保留它们，只是为了便于迁移存档。通常，警告会包含应使用的新版内容的说明。
</p>
<h2><span id="内容包破坏性更改"></span><span class="mw-headline" id=".E5.86.85.E5.AE.B9.E5.8C.85.E7.A0.B4.E5.9D.8F.E6.80.A7.E6.9B.B4.E6.94.B9">内容包破坏性更改</span></h2>
<p><b>本节仅描述此更新可能如何破坏现有模组。有关更多信息，包括模组可以使用的新功能，请参阅上文的“新增内容”部分。</b>
</p>
<h3><span id="标准化ID字段"></span><span class="mw-headline" id=".E6.A0.87.E5.87.86.E5.8C.96ID.E5.AD.97.E6.AE.B5">标准化ID字段</span></h3>
<p>Stardew Valley 1.6 为下列素材添加了 <samp>Id</samp> 字段。对于 Content Patcher 内容包，下列字段替换了之前的复合 ID：
</p>
<table class="wikitable">

<tbody><tr>
<th>素材
</th>
<th>旧键
</th>
<th>新键
</th>
<th>迁移步骤
</th></tr>
<tr>
<td><samp>Data/ConcessionTastes</samp><br /><samp>Data/MovieReactions</samp><br /><samp>Data/RandomBundles</samp> (收集包所在区域)<br /><samp>Data/RandomBundles</samp> (具体的收集包)
</td>
<td><samp>Name</samp><br /><samp>NPCName</samp><br /><samp>AreaName</samp><br /><i>无</i>
</td>
<td><samp>Id</samp>
</td>
<td>无。<samp>Id</samp> 字段会自动设置为相同的值（或收集包的 <samp>Name</samp>），因此内容包无需更改。创建新条目时省略新字段。
</td></tr>
<tr>
<td><samp>Data/FishPondData</samp><br /><samp>Data/RandomBundles</samp> (收集包)
</td>
<td><samp>RequiredTags</samp><br /><i>无</i>
</td>
<td><samp>Id</samp>
</td>
<td>使用新的 <samp>Id</samp> 字段来定位条目，并在创建新条目时添加它。必需。
</td></tr>
<tr>
<td><samp>Data/TailoringRecipes</samp>
</td>
<td><samp>FirstItemTags</samp> 和 <samp>SecondItemTags</samp>
</td>
<td><samp>Id</samp>
</td>
<td>使用新的 <samp>Id</samp> 字段来定位条目，并在创建新条目时添加它。如果省略，则默认为 <samp>CraftedItemIds</samp>（逗号分隔）或 <samp>CraftedItemId</samp> 值，但冲突的可能性很高，因此模组应始终指定唯一的 ID。
</td></tr></tbody></table>
<p>例如，假设您有一个使用 Content Patcher 的补丁如下：
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Format&quot;</span><span class="p">:</span> <span class="s2">&quot;2.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Changes&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Target&quot;</span><span class="p">:</span> <span class="s2">&quot;Data/TailorRecipes&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Entries&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;item_cloth|item_pufferchick&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;FirstItemTags&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;item_cloth&quot;</span> <span class="p">],</span>
                    <span class="nt">&quot;SecondItemTags&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;item_pufferchick&quot;</span> <span class="p">],</span>
                    <span class="nt">&quot;CraftedItemId&quot;</span><span class="p">:</span> <span class="s2">&quot;(S)1260&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>更新到 Stardew Valley 1.6 时，您需要将复合 ID（<samp>item_cloth|item_pufferchick</samp>）替换为实际 ID：
</p>
<ul><li>要编辑原版条目，您需要解包素材文件并获取其新的 <samp>Id</samp> 值。</li>
<li>要添加自定义条目，请使用<a href="/%E6%A8%A1%E7%BB%84:%E5%85%AC%E5%85%B1%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5#.E5.94.AF.E4.B8.80.E5.AD.97.E7.AC.A6.E4.B8.B2ID" title="模组:公共数据字段">唯一字符串 ID</a>。</li></ul>
<p>例如：
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Format&quot;</span><span class="p">:</span> <span class="s2">&quot;2.5.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Changes&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Target&quot;</span><span class="p">:</span> <span class="s2">&quot;Data/TailorRecipes&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Entries&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;ExampleAuthor.ModId_RainCoatFromPufferchick&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;Id&quot;</span><span class="p">:</span> <span class="s2">&quot;ExampleAuthor.ModId_RainCoatFromPufferchick&quot;</span><span class="p">,</span> <span class="err">//</span> <span class="err">创建时需要再次指定</span> <span class="err">ID</span>
                    <span class="nt">&quot;FirstItemTags&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;item_cloth&quot;</span> <span class="p">],</span>
                    <span class="nt">&quot;SecondItemTags&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;item_pufferchick&quot;</span> <span class="p">],</span>
                    <span class="nt">&quot;CraftedItemId&quot;</span><span class="p">:</span> <span class="s2">&quot;(S)1260&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p><br />
</p>
<h3><span id="事件_ID_更改"></span><span class="mw-headline" id=".E4.BA.8B.E4.BB.B6_ID_.E6.9B.B4.E6.94.B9">事件 ID 更改</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E4%BA%8B%E4%BB%B6%E6%95%B0%E6%8D%AE" title="模组:事件数据">模组:事件数据</a>。此小节主要用于叙述更新内容。</div>
<dl><dd>另请参阅：<a href="#.E5.AD.97.E7.AC.A6.E4.B8.B2.E4.BA.8B.E4.BB.B6ID">新增内容中的字符串事件 ID</a>。</dd></dl>
<p>事件现在具有唯一的字符串 ID。
</p><p>创建事件时：
</p>
<ul>
<li>新事件应使用全局唯一 ID，格式为 <samp>Your.ModId_EventName</samp>。现有事件可以保持不变，但建议迁移以避免未来冲突。</li>
<li>每个非分支事件<b>必须</b>在其键中有一个前提条件（即使为空）。例如，将 <code>"Your.ModId_EventName": "..."</code> 更改为 <code>"Your.ModId_EventName/": "..."</code>。这是为了让游戏区分事件和分支脚本。

<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Example.ModId_EventName/&quot;</span><span class="err">:</span> <span class="s2">&quot;...&quot;</span><span class="err">,</span> <span class="err">//</span> <span class="err">事件：由游戏自动加载</span>
<span class="s2">&quot;SomeFork&quot;</span><span class="err">:</span> <span class="s2">&quot;...&quot;</span>                  <span class="err">//</span> <span class="err">事件分支：除非通过事件脚本加载，否则忽略</span>
</pre></div></li>
</ul>
<h3><span id="杀怪目标标识更改"></span><span class="mw-headline" id=".E6.9D.80.E6.80.AA.E7.9B.AE.E6.A0.87.E6.A0.87.E8.AF.86.E6.9B.B4.E6.94.B9">杀怪目标标识更改</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见更新后的文档：<a href="/%E6%A8%A1%E7%BB%84:%E6%9D%80%E6%80%AA%E7%9B%AE%E6%A0%87" title="模组:杀怪目标">模组:杀怪目标</a>。此小节主要用于叙述更新内容。</div>
<dl><dd>另请参阅：<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.9D.80.E6.80.AA.E7.9B.AE.E6.A0.87">自定义杀怪目标</a>。</dd></dl>
<p>游戏现在通过目标 ID（而不是生成的物品）来跟踪<a href="/%E6%8E%A2%E9%99%A9%E5%AE%B6%E5%85%AC%E4%BC%9A" title="探险家公会">杀怪目标</a>的完成情况。如果您检查如下信件标识，则需要更新它们：
</p>
<table class="wikitable">

<tbody><tr>
<th>旧标识
</th>
<th>新标识
</th></tr>
<tr>
<td><samp>Gil_Slime Charmer Ring</samp>
</td>
<td><samp>Gil_Slimes</samp>
</td></tr>
<tr>
<td><samp>Gil_Savage Ring</samp>
</td>
<td><samp>Gil_Shadows</samp>
</td></tr>
<tr>
<td><samp>Gil_Vampire Ring</samp>
</td>
<td><samp>Gil_Bats</samp>
</td></tr>
<tr>
<td><samp>Gil_Skeleton Mask</samp>
</td>
<td><samp>Gil_Skeletons</samp>
</td></tr>
<tr>
<td><samp>Gil_Insect Head</samp>
</td>
<td><samp>Gil_Insects</samp>
</td></tr>
<tr>
<td><samp>Gil_Hard Hat</samp>
</td>
<td><samp>Gil_Duggy</samp>
</td></tr>
<tr>
<td><samp>Gil_Burglar's Ring</samp>
</td>
<td><samp>Gil_DustSpirits</samp>
</td></tr>
<tr>
<td><samp>Gil_Crabshell Ring</samp>
</td>
<td><samp>Gil_Crabs</samp>
</td></tr>
<tr>
<td><samp>Gil_Arcane Hat</samp>
</td>
<td><samp>Gil_Mummies</samp>
</td></tr>
<tr>
<td><samp>Gil_Knight's Helmet</samp>
</td>
<td><samp>Gil_Dinos</samp>
</td></tr>
<tr>
<td><samp>Gil_Napalm Ring</samp>
</td>
<td><samp>Gil_Serpents</samp>
</td></tr>
<tr>
<td><samp>Gil_Telephone</samp>
</td>
<td><samp>Gil_FlameSpirits</samp>
</td></tr></tbody></table>
<h3><span id="对XNB的影响"></span><span class="mw-headline" id=".E5.AF.B9XNB.E7.9A.84.E5.BD.B1.E5.93.8D">对XNB的影响</span></h3>
<h4><span id="概览_2"></span><span class="mw-headline" id=".E6.A6.82.E8.A7.88_2">概览</span></h4>
<p>本节提供了《星露谷物语 1.6》中 XNB 文件更改的摘要。这不包括新文件（因为它们不会影响旧版模组），也不包括非英文文件中的文本更改。
</p><p><a href="/%E6%A8%A1%E7%BB%84:%E4%BD%BF%E7%94%A8_XNB_%E6%A8%A1%E7%BB%84" title="模组:使用 XNB 模组">XNB 模组</a>会受到不成比例的影响，因为...
</p>
<ol><li>它们会替换整个文件；</li>
<li>它们通过 MonoGame 内容管道加载，该管道对格式变化的容忍度较低；</li>
<li>它们无法受益于<a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a>为其内容包提供的兼容性重写。</li></ol>
<p>Content Patcher 包通常不受影响（Content Patcher 会尝试自动重写内容包）。不过，如果内容包直接替换素材而非编辑素材，则更有可能像 XNB 模组一样受到影响。
</p>
<h4><span id="素材更改"></span><span class="mw-headline" id=".E7.B4.A0.E6.9D.90.E6.9B.B4.E6.94.B9">素材更改</span></h4>
<p>兼容性可以粗略划分为以下四类：
</p>
<ul><li>“<b>✘ 已损坏</b>”：旧版模组会删除游戏的新增内容或重大更改，或无法正常运行。坚持使用旧版模组可能带来从显示故障到游戏崩溃在内的各种问题，具体取决于游戏如何使用素材。</li>
<li>“✘ 影响更新”：旧版模组会删除 1.6 中的小更改（例如，错误修复）。</li>
<li>“✓ 几乎无影响”：旧版模组一般不受影响，除非它们替换了整个素材文件，或编辑了特殊的条目或字段。</li>
<li>空白：旧版模组一般不受影响。</li></ul>
<table class="wikitable">

<tbody><tr>
<th rowspan="2">内容素材
</th>
<th rowspan="2">1.6 的更改
</th>
<th colspan="2">是否兼容早于 1.6 的模组
</th></tr>
<tr>
<th>XNB 模组
</th>
<th>内容包
</th></tr>
<tr>
<td><samp>Buildings/houses</samp>
</td>
<td>&#32;
<ul><li>修复了丢失的像素。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Abigail</samp><br /><samp>Characters/Dialogue/Alex</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Caroline</samp><br /><samp>Characters/Dialogue/Demetrius</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Elliott</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Emily</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li>
<li>修复了错别字</li>
<li>更新了 <samp>%revealtaste</samp> 格式（后向兼容）</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/George</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">冬日星盛宴礼物交换对话</a>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Gus</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Haley</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Harvey</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Jas</samp><br /><samp>Characters/Dialogue/Jodi</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Krobus</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">室友赠送星之果实的对话</a>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Leah</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Lewis</samp>
</td>
<td>&#32;
<ul><li>更新了 <samp>%revealtaste</samp> 格式（后向兼容）</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Linus</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">翻垃圾桶对话</a>。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Marnie</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">Stardew Valley Fair dialogue</a></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/MarriageDialogue</samp><br /><samp>Characters/Dialogue/MarriageDialogueAbigail</samp><br /><samp>Characters/Dialogue/MarriageDialogueElliott</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/MarriageDialogueEmily</samp>
</td>
<td>&#32;
<ul><li>将 <samp>spring_Maru</samp> 键改为 <samp>spring_Emily</samp>。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/MarriageDialogueKrobus</samp><br /><samp>Characters/Dialogue/MarriageDialogueLeah</samp><br /><samp>Characters/Dialogue/MarriageDialogueMaru</samp><br /><samp>Characters/Dialogue/MarriageDialoguePenny</samp><br /><samp>Characters/Dialogue/MarriageDialogueSam</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Maru</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Penny</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Pierre</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">星露谷展览会对话</a>。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Robin</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Sam</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Sandy</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Sebastian</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Willy</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">星露谷展览会对话</a>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Shane</samp>
</td>
<td>&#32;
<ul><li>新增了<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Farmer/hats</samp>
</td>
<td>&#32;
<ul><li>移除了小鸡面具上的游离像素。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/schedules/Elliott</samp>
</td>
<td>&#32;
<ul><li>修复了 <samp>Fri_6</samp> 和 <samp>Fri</samp> 条目的顺序。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Characters/schedules/Lewis</samp>
</td>
<td>&#32;
<ul><li>修复了 <samp>winter_Sun</samp> 行程。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/schedules/Maru</samp>
</td>
<td>&#32;
<ul><li>修复了 <samp>summer_Mon</samp> 和 <samp>summer_Sun</samp> 行程。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/schedules/Penny</samp>
</td>
<td>&#32;
<ul><li>修复了 <samp>summer_Sun</samp> schedule</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Characters/Schedules/Shane</samp>
</td>
<td>&#32;
<ul><li>修复了对话键。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/animationDescriptions</samp>
</td>
<td>&#32;
<ul><li>修复了刘易斯在餐吧饮酒的动画帧。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/AquariumFish</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">更改了键类型</a>。</li>
<li>为<a href="/%E6%B5%B7%E8%83%86" title="海胆">海胆</a>新增了帽子坐标。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/BigCraftablesInformation</samp>
</td>
<td>&#32;
<ul><li>素材文件替换为<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.A4.A7.E5.9E.8B.E6.89.93.E9.80.A0.E5.93.81"><samp>Data/BigCraftables</samp></a>：
<ul><li>迁移为数据模型格式</li>
<li>添加了新功能</li></ul></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（运行时会自动迁移）。</small>
</td></tr>
<tr>
<td><samp>Data/Blueprints</samp>
</td>
<td>&#32;
<ul><li>素材文件替换为<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.BB.BA.E7.AD.91"><samp>Data/Buildings</samp></a>:
<ul><li>迁移为数据模型格式</li>
<li>添加了新功能</li></ul></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（运行时会自动迁移）。</small>
</td></tr>
<tr>
<td><samp>Data/Boots</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">更改了键类型</a>。</li>
<li>新增了显示名称</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（运行时会自动迁移）。</small>
</td></tr>
<tr>
<td><samp>Data/Bundles</samp>
</td>
<td>&#32;
<ul><li>不再忽略显示名称前的空字段。</li>
<li>新增了英语显示名称字段。</li>
<li>移除了动物收集包中的肉制品。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td><b>✘ 可能损坏</b>
</td></tr>
<tr>
<td><samp>Data/ClothingInformation</samp>
</td>
<td>&#32;
<ul><li>素材文件替换为<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E8.A3.A4.E5.AD.90"><samp>Data/Pants</samp></a>和<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E4.B8.8A.E8.A1.A3"><samp>Data/Shirts</samp></a>：
<ul><li>迁移为数据模型格式</li>
<li>** 新增了新功能</li></ul></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td><b>✘ 可能损坏</b>
</td></tr>
<tr>
<td><samp>Data/Concessions</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.94.B5.E5.BD.B1.E9.9B.B6.E9.A3.9F">新增了必填字段（<samp>Texture</samp> 和 <samp>SpriteIndex</samp>）</a></li>
<li>替换翻译为<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。</li>
<li>替换 ID 为字符串。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td><b>✘ 可能损坏</b>
</td></tr>
<tr>
<td><samp>Data/ConcessionTastes</samp>
</td>
<td>&#32;
<ul><li>添加了自动的 <samp>ID</samp> 字段。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/CookingRecipes</samp>
</td>
<td>&#32;
<ul><li>替换翻译为<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。</li>
<li>现在可以忽略显示名称以自动使用物品名称。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 可能无影响
</td></tr>
<tr>
<td><samp>Data/CraftingRecipes</samp>
</td>
<td>&#32;
<ul><li>替换翻译为<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。</li>
<li>现在可以忽略显示名称以自动使用物品名称。</li>
<li><samp>default</samp> 解锁条件更新。</li>
<li>修复了野炊篝火条目中的错别字。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Crops</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E4.BD.9C.E7.89.A9">完全重写</a></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（运行时会自动迁移）</small>
</td></tr>
<tr>
<td><samp>Data/Events/AnimalShop</samp>
</td>
<td>&#32;
<ul><li>更新了命令语法（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/Events/Farm</samp>
</td>
<td>&#32;
<ul><li>使用<a href="/%E6%A8%A1%E7%BB%84:%E8%A7%A6%E5%8F%91%E5%8A%A8%E4%BD%9C" title="模组:触发动作">触发动作</a>替换了发送信件事件。</li>
<li>更新了宠物事件以支持自定义宠物类型。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（✘ 如果内容包更改了发送邮件事件，则可能出现重复信件）</small>
</td></tr>
<tr>
<td><samp>Data/Events/FishShop</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Events/Forest</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li>
<li>更新了下水道事件中贾斯的 <samp>faceDirection</samp> 命令。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Events/IslandHut</samp>
</td>
<td>&#32;
<ul><li>更新了雷欧名字的译法。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Events/IslandNorth</samp>
</td>
<td>&#32;
<ul><li>更新了引用格式。</li>
<li>修复了空白的音乐字段（向后兼容）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>(✘ likely broken if they edit the <samp>6497421</samp> event)</small>
</td></tr>
<tr>
<td><samp>Data/Events/IslandSouth</samp>
</td>
<td>&#32;
<ul><li>修复了空白的音乐字段（向后兼容）。</li>
<li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Events/JoshHouse</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Events/LeahHouse</samp>
</td>
<td>&#32;
<ul><li>修复了莉亚 2 心事件中的 <samp>move</samp> 命令格式。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Events/Mountain</samp>
</td>
<td>&#32;
<ul><li>修复了玛鲁的 14 心事件中跳过对话的问题。</li>
<li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Events/Saloon</samp><br /><samp>Data/Events/ScienceHouse</samp><br /><samp>Data/Events/SebastianRoom</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Events/Town</samp>
</td>
<td>&#32;
<ul><li>修复了社区中心竣工事件中的 <samp>warp</samp> 命令格式。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Events/WizardHouse</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/ExtraDialogue</samp>
</td>
<td>&#32;
<ul><li>切分了 <samp>SummitEvent_Dialogue1_Spouse</samp> 条目。</li>
<li>修复了顶峰对话中的事件命令格式。</li>
<li>移动<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">翻垃圾桶对话</a>至 NPC 文件中。</li>
<li>移除了无用条目</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/FarmAnimals</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.86.9C.E5.9C.BA.E5.8A.A8.E7.89.A9">完全重写</a></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td><b>✘ 已损坏</b>
</td></tr>
<tr>
<td><samp>Data/Festivals/fall16</samp>
</td>
<td>&#32;
<ul><li>更新了命令语法（向后兼容）。</li>
<li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Festivals/fall27</samp>
</td>
<td>&#32;
<ul><li>移除了 <samp>shop</samp> 字段（迁移至<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.95.86.E5.BA.97">（<samp>Data/Shops</samp></a>）。</li></ul>
</td>
<td>✓ 几乎无影响
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Festivals/spring13</samp>
</td>
<td>&#32;
<ul><li>迁移至新增的 <samp>warpFarmers</samp> 命令。</li>
<li>移除了 <samp>shop</samp> 字段（迁移至 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.95.86.E5.BA.97"><samp>Data/Shops</samp></a>）。</li>
<li>更新了 <samp>faceDirection</samp> 语法。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>(✘ 如果内容包编辑了 <samp>mainEvent</samp> 或 <samp>afterEggHunt</samp> 字段则可能损坏)</small>
</td></tr>
<tr>
<td><samp>Data/Festivals/spring24</samp><br /><samp>Data/Festivals/summer11</samp><br /><samp>Data/Festivals/summer28</samp>
</td>
<td>&#32;
<ul><li>迁移至新增的 <samp>warpFarmers</samp> 命令。</li>
<li>移除了 <samp>shop</samp> 字段（迁移至 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.95.86.E5.BA.97"><samp>Data/Shops</samp></a>）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>(✘ 如果内容包编辑了 <samp>mainEvent</samp> 字段则可能损坏）。</small>
</td></tr>
<tr>
<td><br /><samp>Data/Festivals/winter8</samp>
</td>
<td>&#32;
<ul><li>迁移至新增的 <samp>warpFarmers</samp> 命令</li>
<li>移除了 <samp>shop</samp> 字段（移动至 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.95.86.E5.BA.97"><samp>Data/Shops</samp></a>）。</li>
<li>移除了损坏的 <samp>loadActors MainEvent</samp> 命令。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（✘ 如果内容包编辑了 <samp>mainEvent</samp> 或 <br /><samp>afterIceFishing</samp> 字段则可能损坏）。</small>
</td></tr>
<tr>
<td><samp>Data/Festivals/winter25</samp>
</td>
<td>&#32;
<ul><li>移除了 <samp>shop</samp> 字段（迁移至 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.95.86.E5.BA.97"><samp>Data/Shops</samp></a>）。</li></ul>
</td>
<td>✓ 几乎无影响
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Fish</samp>
</td>
<td>&#32;
<ul><li>不再为每种语言单设文件。</li>
<li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">更改了键类型</a>。</li>
<li>现在字段 13 指示鱼是否可以出现在钓鱼教程中。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✘ 可能损坏。
</td></tr>
<tr>
<td><samp>Data/FishPondData</samp>
</td>
<td>&#32;
<ul><li>新增了必填的 <samp>Id</samp> 以及可选的 <samp>Precedence</samp> 字段。</li>
<li>标准化命名： <samp>ID</samp>→<samp>Id</samp>。</li>
<li>改为使用限定性物品 ID。</li>
<li>置默认项于底部。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✘ 可能损坏
</td></tr>
<tr>
<td><samp>Data/fruitTrees</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E6.9E.9C.E6.A0.91">完全重写</a></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td><b>✘ 已损坏</b>
</td></tr>
<tr>
<td><samp>Data/Furniture</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">更改了键类型</a></li>
<li>替换翻译为<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。</li>
<li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">更改了键类型</a></li>
<li>不再忽略显示名称前的空字段。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（运行时会自动迁移）</small>
</td></tr>
<tr>
<td><samp>Data/hats</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">更改了键类型</a>。</li>
<li>不再忽略显示名称前的空字段。</li>
<li>新增了显示名称 field in English</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td><b>✘ 可能损坏</b>
</td></tr>
<tr>
<td><samp>Data/Locations</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9C.B0.E7.82.B9">完全重写</a></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（运行时会自动迁移）</small>
</td></tr>
<tr>
<td><samp>Data/mail</samp>
</td>
<td>&#32;
<ul><li>迁移至 <samp>%item id</samp>（向后兼容）。</li>
<li>移除了无用条目</li>
<li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Monsters</samp>
</td>
<td>&#32;
<ul><li>更改 "Dust Spirit"（灰尘贴图）为 "Dust Sprite"。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/Movies</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.94.B5.E5.BD.B1">大部分重写</a></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td><b>✘ 已损坏</b>
</td></tr>
<tr>
<td><samp>Data/MoviesReactions</samp>
</td>
<td>&#32;
<ul><li>替换翻译为<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2" title="模组:模板字符串">模板字符串</a>。</li>
<li>标准化命名：<samp>ID</samp>→<samp>Id</samp> 。</li>
<li>修复了错别字。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/NPCDispositions</samp>
</td>
<td>&#32;
<ul><li>替换素材为 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89NPC"><samp>Data/Characters</samp></a>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（运行时会自动迁移）。</small>
</td></tr>
<tr>
<td><samp>Data/NPCGiftTastes</samp>
</td>
<td>&#32;
<ul><li>移除了无效物品 ID。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/ObjectContextTags</samp>
</td>
<td>&#32;
<ul><li>移除了字段（替换为 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.A4.A7.E5.9E.8B.E6.89.93.E9.80.A0.E5.93.81"><samp>Data/BigCraftables</samp></a> 和 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E4.BD.93"><samp>Data/Objects</samp></a>）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（运行时会自动迁移，在物体之前定义的上下文标签和大型打造品的上下文标签除外。)
</small><p><small></small>
</p>
</td></tr>
<tr>
<td><samp>Data/ObjectInformation</samp>
</td>
<td>&#32;
<ul><li>素材文件替换为<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E4.BD.93"><samp>Data/Objects</samp></a>：
<ul><li>迁移为数据模型格式</li>
<li>新增了功能</li>
<li>新增了条目</li>
<li>调整了<a href="#.E5.85.B6.E4.BB.96.E7.89.A9.E5.93.81.E6.9B.B4.E6.94.B9">垃圾物品</a>。</li>
<li>修复了错别字</li></ul></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（运行时会自动迁移）。</small>
</td></tr>
<tr>
<td><samp>Data/PaintData</samp>
</td>
<td>&#32;
<ul><li>修复了 <samp>Deluxe Barn</samp> 条目末尾的斜杠。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/Quests</samp>
</td>
<td>&#32;
<ul><li>更改键类型为字符串。</li>
<li>迁移为使用字符串 ID（向后兼容）。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/RandomBundles</samp>
</td>
<td>&#32;
<ul><li>新增了可选的 <samp>Id</samp> 字段。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/SecretNotes</samp>
</td>
<td>&#32;
<ul><li>更新了 <samp>%revealtaste</samp> 格式（后向兼容）</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/SpecialOrders</samp>
</td>
<td>&#32;
<ul><li>更改了 <samp>Repeatable</samp> 和 <samp>Duration</samp> 的字段类型。</li>
<li>新增了可选的 <samp>CustomFields</samp> 和 <samp>Conditions</samp> 字段。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/SpousePatios</samp><br /><samp>Data/SpouseRooms</samp>
</td>
<td>&#32;
<ul><li>移除素材文件（合并至 <a href="#.E8.87.AA.E5.AE.9A.E4.B9.89NPC"><samp>Data/Characters</samp></a>）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td><b>✘ 已损坏</b>
</td></tr>
<tr>
<td><samp>Data/TailoringRecipes</samp>
</td>
<td>&#32;
<ul><li>更改为<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.89.A9.E5.93.81">字符串物品 ID</a>（向后兼容）。</li>
<li>新增了可选的 <samp>Id</samp> 和 <samp>CraftedItemIdFeminine</samp> 字段。</li>
<li>移除了 <samp>CraftedItemColor</samp> 字段。</li>
<li>调整了有性别变体的上衣的裁缝配方。</li>
<li>标准化命名：<samp>ID</samp>→<samp>Id</samp> 。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（<samp>MoveEntries</samp> 可能损坏，但现在最后检查默认项。）</small>
</td></tr>
<tr>
<td><samp>Data/TV/CookingChannel</samp><br /><samp>Data/TV/TipChannel</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Data/weapons</samp>
</td>
<td>&#32;
<ul><li><a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E8.BF.91.E6.88.98.E6.AD.A6.E5.99.A8">全面翻修</a>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响<br /><small>（运行时会自动迁移）。</small>
</td></tr>
<tr>
<td><samp>LooseSprites/Cursors</samp>
</td>
<td>&#32;
<ul><li>在空白区域新增了贴图。</li>
<li>迁移邮箱数据至 <samp>Buildings/Mailbox</samp>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>LooseSprites/Cursors2</samp>
</td>
<td>&#32;
<ul><li>在空白区域新增了贴图。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>LooseSprites/map</samp>
</td>
<td>&#32;
<ul><li>重新绘制，以更好地匹配游戏中的地点。</li>
<li>新增了更多细节。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✘ 可能损坏。
</td></tr>
<tr>
<td><samp>Maps/AbandonedJojaMart</samp><br /><samp>Maps/AdventureGuild</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/AnimalShop</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/ArchaeologyHouse</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li>
<li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Backwoods</samp><br /><samp>Maps/Backwoods_GraveSite</samp><br /><samp>Maps/Backwoods_Staircase</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Barn</samp><br /><samp>Maps/Barn2</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地图属性。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Barn3</samp>
</td>
<td>&#32;
<ul><li>新增了 <samp>AutoFeed</samp> 地图属性。</li>
<li>移除了无用的地图属性。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/BathHouse_Entry</samp><br /><samp>Maps/BathHouse_MensLocker</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li>
<li>移除了无用的寻路地块。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/BathHouse_Pool</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li>
<li>移除了无用的地图和地块属性。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/BathHouse_WomensLocker</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li>
<li>移除了无用的寻路地块。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Beach</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地图属性。</li>
<li>移除了无用的寻路地块。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Beach-Jellies</samp><br /><samp>Maps/Beach-Luau</samp><br /><samp>Maps/Beach-NightMarket</samp>
</td>
<td>&#32;
<ul><li>节日商店数据现位于 <samp>Data/Shops</samp>。</li>
<li>移除无用地图/地块属性。</li>
<li>移除了无用的寻路地块。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Blacksmith</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/BoatTunnel</samp>
</td>
<td>&#32;
<ul><li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/BugLand</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/BusStop</samp>
</td>
<td>&#32;
<ul><li>移除无用地图/地块属性。</li>
<li>移除了无用的寻路地块。</li>
<li>变更 <samp>Action BusTicket</samp> 为 <samp>Action None</samp>。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Caldera</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地图属性。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Cellar</samp>
</td>
<td>&#32;
<ul><li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Club</samp>
</td>
<td>&#32;
<ul><li>新增了 <samp>LocationContext</samp> 地图属性。</li>
<li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Coop</samp><br /><samp>Maps/Coop2</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地图属性。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Coop3</samp>
</td>
<td>&#32;
<ul><li>新增了 <samp>AutoFeed</samp> 地图属性。</li>
<li>移除了无用的地图属性。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Desert</samp>
</td>
<td>&#32;
<ul><li>新增了 <samp>LocationContext</samp> 地图属性。</li>
<li>移除无用地图/地块属性。</li>
<li>移除了无用的寻路地块。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/ElliottHouse</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Farm</samp><br /><samp>Maps/Farm_Combat</samp><br /><samp>Maps/Farm_Fishing</samp><br /><samp>Maps/Farm_Foraging</samp><br /><samp>Maps/Farm_FourCorners</samp><br /><samp>Maps/Farm_Island</samp><br /><samp>Maps/Farm_Mining</samp>
</td>
<td>&#32;
<ul><li>新增了地块集。</li>
<li>新增了玩家 5 ~ 8 的联机小屋位置。</li>
<li>新增了 <samp>PetBowlLocation</samp> 地图属性（仅用于 <samp>Maps/Four_Corners</samp> 和 <samp>Farm/Island</samp>）。</li>
<li>新增了 <samp>SpouseAreaLocation</samp> 地图属性（仅用于 <samp>Maps/Farm_Island</samp>）。</li>
<li>重要的地块/地块属性更改。</li>
<li>移除了农舍和宠物碗区域限制（现在可移动）。</li>
<li>移除无用地图/地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✘ may remove changes
</td></tr>
<tr>
<td><samp>Maps/Farm_Greenhouse_Dirt</samp><br /><samp>Maps/Farm_Greenhouse_Dirt_FourCorners</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地图属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/FarmHouse</samp><br /><samp>Maps/FarmHouse_Bedroom_Normal</samp><br /><samp>Maps/FarmHouse_Bedroom_Open</samp><br /><samp>Maps/FarmHouse_Cellar</samp><br /><samp>Maps/FarmHouse_ChildBed_0</samp><br /><samp>Maps/FarmHouse_ChildBed_1</samp><br /><samp>Maps/FarmHouse_CornerRoom_Add</samp><br /><samp>Maps/FarmHouse_CornerRoom_Remove</samp><br /><samp>Maps/FarmHouse_SouthernRoom_Add</samp><br /><samp>Maps/FarmHouse_SouthernRoom_Remove</samp><br /><samp>Maps/FarmHouse1</samp><br /><samp>Maps/FarmHouse1_marriage</samp><br /><samp>Maps/FarmHouse2</samp><br /><samp>Maps/FarmHouse2_marriage</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地图属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/FishingGame</samp>
</td>
<td>&#32;
<ul><li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/FishShop</samp>
</td>
<td>&#32;
<ul><li>修复了损坏的 <samp>DayTiles</samp> 和 <samp>NightTiles</samp> 值。</li>
<li>移除了无用的寻路地块。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Forest</samp>
</td>
<td>&#32;
<ul><li>移除无用地图/地块属性。</li>
<li>移除了无用的寻路地块。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Forest-FlowerFestival</samp>
</td>
<td>&#32;
<ul><li>节日商店数据现位于 <samp>Data/Shops</samp>。</li>
<li>移除无用地图/地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Forest-IceFestival</samp>
</td>
<td>&#32;
<ul><li>节日商店数据现位于 <samp>Data/Shops</samp>。</li>
<li>修复了传送点。</li>
<li>移除无用地图/地块属性。</li>
<li>移除了无用的寻路地块。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Forest-SewerClean</samp>
</td>
<td>&#32;
<ul><li>移除无用地图/地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/HaleyHouse</samp><br /><samp>Maps/HarveyRoom</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Hospital</samp>
</td>
<td>&#32;
<ul><li>移除了弃用的 <samp>UniquePortrait</samp> 和 <samp>UniqueSprite</samp> 地图属性。</li>
<li>移除了无用的寻路地块。</li></ul>
</td>
<td>✘ 影响更新<br /><small>(This may cause mod conflicts)
</small></td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Island_Bridge_Broken</samp><br /><samp>Maps/Island_Bridge_Repaired</samp><br /><samp>Maps/Island_House_Cave</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地图属性。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Island_N</samp>
</td>
<td>&#32;
<ul><li>升级了金色核桃灌木地块，使之仍能用于 1.6。</li>
<li>移除了无用的地块属性。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/IslandNorthCave1</samp><br /><samp>Maps/IslandSouthEastCave</samp><br /><samp>Maps/IslandSouthEastCave_pirates</samp><br /><samp>Maps/IslandWestCave1</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Island_Bridge_Broken</samp><br /><samp>Maps/Island_Bridge_Repaired</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地图属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Island_E</samp><br /><samp>Maps/IslandFarmCave</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Island_House_Cave</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地图属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Island_Hut</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Island_N</samp>
</td>
<td>&#32;
<ul><li>新增了 <samp>NowSpawn False</samp> 地块属性，用于修复金色核桃树。</li>
<li>移除了无用的地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Island_N_Trader</samp><br /><samp>Maps/Island_Secret</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Island_Shrine</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Island_W</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/IslandFarmHouse</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/JojaMart</samp><br /><samp>Maps/JoshHouse</samp><br /><samp>Maps/LeahHouse</samp><br /><samp>Maps/ManorHouse</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/MarnieBarn</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地图属性。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Mine</samp>
</td>
<td>&#32;
<ul><li>更新了<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E7.9F.BF.E8.BD.A6">矿车</a>。</li>
<li>移除了无用的地图属性。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Mountain</samp>
</td>
<td>&#32;
<ul><li>移除无用地图/地块属性。</li>
<li>移除了无用的寻路地块。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Mountain-BridgeFixed</samp><br /><samp>Maps/Mountain_Shortcuts</samp>
</td>
<td>&#32;
<ul><li>移除无用地图/地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/MovieTheater</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/MovieTheaterScreen</samp>
</td>
<td>&#32;
<ul><li>地块集更新。</li></ul>
</td>
<td>✘ 贴图损坏（例如，椅子丢失）
</td>
<td>✓ 几乎无影响<br /><small>（✘ 如果内容包编辑了受影响的贴图，则可能造成贴图损坏）</small>
</td></tr>
<tr>
<td><samp>Maps/MovieTheaterScreen_TileSheet</samp>
</td>
<td>&#32;
<ul><li>优化光锥。</li>
<li>移动椅子贴图，以为全新光锥留出空间。</li></ul>
</td>
<td>✘ 贴图损坏（例如，椅子丢失）
</td>
<td>✓ 几乎无影响<br /><small>（✘ 如果内容包编辑了受影响的贴图，则可能造成贴图损坏）</small>
</td></tr>
<tr>
<td><samp>Maps/paths</samp>
</td>
<td>&#32;
<ul><li>新增<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E9.87.8E.E6.A0.91">自定义野树生成点</a>图标。</li>
<li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/QiNutRoom</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Railroad</samp>
</td>
<td>&#32;
<ul><li>移除无用地图属性。</li>
<li>移除了无用的寻路地块。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Saloon</samp><br /><samp>Maps/SamHouse</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/SandyHouse</samp>
</td>
<td>&#32;
<ul><li>新增 <samp>LocationContext</samp> 地图属性。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/ScienceHouse</samp><br /><samp>Maps/SebastianRoom</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/SeedShop</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地块属性。</li>
<li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Sewer</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Shed</samp><br /><samp>Maps/Shed2</samp>
</td>
<td>&#32;
<ul><li>新增 <samp>FloorIDs</samp> 和 <samp>WallIDs</samp> 地图属性。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/SkullCave</samp>
</td>
<td>&#32;
<ul><li>新增 <samp>LocationContext</samp> 地块属性。</li>
<li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/SlimeHutch</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/spousePatios</samp>
</td>
<td>&#32;
<ul><li>移除无用地图/地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/spring_outdoorsTileSheet</samp><br /><samp>Maps/summer_outdoorsTileSheet</samp><br /><samp>Maps/fall_outdoorsTileSheet</samp><br /><samp>Maps/winter_outdoorsTileSheet</samp>
</td>
<td>&#32;
<ul><li>宠物碗数据迁移至 <samp>Buildings/Pet Bowl</samp>。</li></ul>
</td>
<td>✓ 几乎无影响
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Submarine</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地块属性。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Sunroom</samp>
</td>
<td>&#32;
<ul><li>added <samp>IsGreenhouse&lt;/samp map property</samp></li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Tent</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Town</samp>
</td>
<td>&#32;
<ul><li>升级了<a href="#.E8.87.AA.E5.AE.9A.E4.B9.89.E5.9E.83.E5.9C.BE.E6.A1.B6">垃圾桶 ID</a>（向后兼容）。</li>
<li>移除无用地图/地块属性。</li>
<li>移除了无用的寻路地块。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Town-Christmas</samp>
</td>
<td>&#32;
<ul><li>节日商店数据现位于 <samp>Data/Shops</samp>。</li>
<li>移除无用地图/地块属性。</li>
<li>移除了无用的寻路地块。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Town-DogHouse</samp>
</td>
<td>&#32;
<ul><li>移除无用地图/地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Town-EggFestival</samp>
</td>
<td>&#32;
<ul><li>节日商店数据现位于 <samp>Data/Shops</samp>。</li>
<li>修复了艾利欧特在寻蛋时重复出现的问题。</li>
<li>移除无用地图/地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Town-Fair</samp>
</td>
<td>&#32;
<ul><li>移除无用地图/地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Town-Halloween</samp>
</td>
<td>&#32;
<ul><li>节日商店数据现位于 <samp>Data/Shops</samp>。</li>
<li>移除无用地图/地块属性。</li>
<li>移除了无用的寻路地块。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Town-Theater</samp><br /><samp>Maps/Town-TheaterCC</samp><br /><samp>Maps/Town-TrashGone</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Trailer</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地块属性。</li>
<li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Trailer_big</samp>
</td>
<td>&#32;
<ul><li>移除了无用的寻路地块。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Tunnel</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp></li>
<li>移除了无用的地块属性。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/WitchHut</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp></li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/WitchSwamp</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp></li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/WitchWarpCave</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/WizardHouse</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li>
<li>移除无用的寻路地块。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/WizardHouseBasement</samp>
</td>
<td>&#32;
<ul><li>迁移 <samp>Music</samp> 属性至 <samp>Data/Locations</samp>。</li>
<li>移除了无用的地块属性。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Maps/Woods</samp>
</td>
<td>&#32;
<ul><li>移除了无用的地块属性。</li>
<li>标准化 <samp>T</samp> 为布尔地块属性（向后兼容）。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Minigames/boatJourneyMap</samp>
</td>
<td>&#32;
<ul><li>素材替换为重新绘制的季节变体，例如 <samp>fall_boatJourneyMap</samp>。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td><b>✘ 已损坏</b>
</td></tr>
<tr>
<td><samp>Strings/Characters</samp>
</td>
<td>&#32;
<ul><li>新增了新条目</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/BundleNames</samp>
</td>
<td>&#32;
<ul><li>移除了无用条目</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Characters</samp>
</td>
<td>&#32;
<ul><li>新增了新条目</li>
<li>移除了无用的条目。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/credits</samp>
</td>
<td>&#32;
<ul><li>更新到 1.6 版。</li>
<li>各种更改。</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✘ 影响更新
</td></tr>
<tr>
<td><samp>Strings/Events</samp>
</td>
<td>&#32;
<ul><li>迁移艾米丽和谢恩的<a href="#.E5.AF.B9.E8.AF.9D.E6.9B.B4.E6.94.B9">花舞节对话</a>至其 NPC 对话文件中。</li></ul>
</td>
<td>✓ 几乎无影响
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Strings/FarmAnimals</samp>
</td>
<td>&#32;
<ul><li>新增了新条目</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Lexicon</samp>
</td>
<td>&#32;
<ul><li>移除了无用条目</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Locations</samp>
</td>
<td>&#32;
<ul><li>新增了新条目</li>
<li>向 <samp>BusStop_BuyTicketToDesert</samp> 添加了占位符。</li>
<li>重命名 <samp>BoatTunnel_BuyTicket</samp> 为 <samp>BuyTicket</samp>。</li>
<li>更新了蜗牛教授的译名。移除了无用条目。</li>
<li>修复了错别字。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Strings/NPCNames</samp>
</td>
<td>&#32;
<ul><li>新增了新条目。</li>
<li>移除了无用条目。</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Notes</samp>
</td>
<td>&#32;
<ul><li>删除了末尾空格。</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Objects</samp>
</td>
<td>&#32;
<ul><li>新增了新条目</li>
<li>移除了无用条目</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/schedules/Caroline</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Strings/SpecialOrderStrings</samp>
</td>
<td>&#32;
<ul><li>renamed <i>Dust Spirits</i> to <i>Dust Sprites</i></li>
<li>修复了错别字</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Strings/StringsFromCSFiles</samp>
</td>
<td>&#32;
<ul><li>新增了新条目</li>
<li>移除了无用条目</li>
<li>重新翻译了 <samp>FarmComputer_*</samp>。</li>
<li>合并了一些性别翻译。</li>
<li>合并 <samp>ItemDeliveryQuest.cs.13533</samp> 至<samp>ItemDeliveryQuest.cs.13534</samp>–<samp>13536</samp>。</li>
<li>将某些玩家名字占位符从 <samp>{0}</samp> 变更为 <samp>@</samp>。</li>
<li>修复了错别字</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr>
<tr>
<td><samp>Strings/StringsFromMaps</samp>
</td>
<td>&#32;
<ul><li>修复了错别字</li>
<li>移除了无用条目</li></ul>
</td>
<td>✘ 影响更新
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/UI</samp>
</td>
<td>&#32;
<ul><li>新增了新条目</li>
<li>在 <samp>Character_CoopHelpString</samp> 中添加了表示联机小屋数量的占位符。</li>
<li>修复了错别字</li>
<li>移除了无用条目</li></ul>
</td>
<td><b>✘ 已损坏</b>
</td>
<td>✓ 几乎无影响
</td></tr></tbody></table>
<h4><span id="移除无用素材"></span><span class="mw-headline" id=".E7.A7.BB.E9.99.A4.E6.97.A0.E7.94.A8.E7.B4.A0.E6.9D.90">移除无用素材</span></h4>
<p>Stardew Valley 1.6 删除了一些无用的素材。模组通常不会受到影响。
</p><p>移除的素材：
</p>
<ul><li><samp>Characters/Dana</samp></li>
<li><samp>Characters/Dick</samp></li>
<li><samp>Characters/femaleRival</samp></li>
<li><samp>Characters/maleRival</samp></li>
<li><samp>Characters/shirts</samp></li>
<li><samp>Characters/WeddingOutfits</samp></li>
<li><samp>Data/TV/InterviewShow</samp></li>
<li><samp>Effects/BrightWhite</samp></li>
<li><samp>Fonts/tinyFontBorder</samp></li>
<li><samp>Maps/Cabin</samp></li>
<li><samp>Maps/Cabin1</samp></li>
<li><samp>Maps/Cabin1_marriage</samp></li>
<li><samp>Maps/Cabin2</samp></li>
<li><samp>Maps/Cabin2_marriage</samp></li>
<li><samp>Maps/Island_Boulder_Removed</samp></li>
<li><samp>Maps/qiNutRoom_tilesheet_0</samp></li>
<li><samp>Maps/spring_outrdoorsTileSheet_lightergrass</samp></li>
<li><samp>Portraits/Dobson</samp></li>
<li><samp>TerrainFeatures/DiggableWall_basic</samp></li>
<li><samp>TerrainFeatures/DiggableWall_basic_dark</samp></li>
<li><samp>TerrainFeatures/DiggableWall_frost</samp></li>
<li><samp>TerrainFeatures/DiggableWall_frost_dark</samp></li>
<li><samp>TerrainFeatures/DiggableWall_lava</samp></li>
<li><samp>TerrainFeatures/DiggableWall_lava_dark</samp></li>
<li><samp>TerrainFeatures/Quartz</samp></li></ul>
<h2><span id="原版发布说明"></span><span class="mw-headline" id=".E5.8E.9F.E7.89.88.E5.8F.91.E5.B8.83.E8.AF.B4.E6.98.8E">原版发布说明</span></h2>
<p>已迁至<a href="/%E7%89%88%E6%9C%AC%E5%8E%86%E5%8F%B2#1.6" title="版本历史">版本历史#1.6</a>。
</p>
<h2><span id="另请参阅"></span><span class="mw-headline" id=".E5.8F.A6.E8.AF.B7.E5.8F.82.E9.98.85">另请参阅</span></h2>
<ul><li><a href="https://stardewvalleywiki.com/User:Pathoschild/Modding_wishlist/Completed#Done_in_Stardew_Valley_1.6" class="extiw" title="en:User:Pathoschild/Modding wishlist/Completed">此表单</a>列出了一些此页面上没有提及的特殊更改。</li></ul></li></ul></small>
<!-- 
NewPP limit report
Cached time: 20250329194958
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.722 seconds
Real time usage: 1.549 seconds
Preprocessor visited node count: 7608/1000000
Post‐expand include size: 40249/2097152 bytes
Template argument size: 7070/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 113644/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  978.790      1 -total
 15.57%  152.424      2 Template:Collapse
  4.48%   43.816    135 Template:T
  1.75%   17.116     67 Template:Migration_guide_doc_status
  1.62%   15.819     55 Template:O
  1.30%   12.739      1 Template:TOC
  0.47%    4.599      5 Template:Price
  0.29%    2.843      3 Template:Content_Patcher_example
  0.19%    1.881      7 Template:Content_Patcher_version
  0.16%    1.612      1 Template:Modder_compatibility_header
-->

<!-- Saved in parser cache with key zhwiki:pcache:idhash:3269-0!canonical!zh and timestamp 20250329194956 and revision id 51248
 -->
</div></div><div class="printfooter">取自“<a dir="ltr" href="https://zh.stardewvalleywiki.com/mediawiki/index.php?title=模组:迁移至游戏本体1.6&amp;oldid=51248">https://zh.stardewvalleywiki.com/mediawiki/index.php?title=模组:迁移至游戏本体1.6&amp;oldid=51248</a>”</div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/Special:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB" title="Special:页面分类">分类</a>：<ul><li><a href="/Category:%E6%A8%A1%E7%BB%84" title="Category:模组">模组</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>导航菜单</h2>
	<div id="mw-head">
		<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-personal" class="vector-menu" aria-labelledby="p-personal-label" role="navigation" 
	 >
	<h3 id="p-personal-label">
		<span>个人工具</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="pt-createaccount"><a href="/mediawiki/index.php?title=Special:%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%88%B7&amp;returnto=%E6%A8%A1%E7%BB%84%3A%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" title="建议您创建一个账户并登录，但这不是强制的">创建账户</a></li><li id="pt-login"><a href="/mediawiki/index.php?title=Special:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&amp;returnto=%E6%A8%A1%E7%BB%84%3A%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" title="我们鼓励您登录；然而，这不是强制性的[o]" accesskey="o">登录</a></li></ul>
		
	</div>
</nav>


		<div id="left-navigation">
			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-namespaces" class="vector-menu vector-menu-tabs vectorTabs" aria-labelledby="p-namespaces-label" role="navigation" 
	 >
	<h3 id="p-namespaces-label">
		<span>名字空间</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="ca-nstab-模组" class="selected"><a href="/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6">模组</a></li><li id="ca-talk"><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" rel="discussion" title="关于内容页面的讨论[t]" accesskey="t">讨论</a></li></ul>
		
	</div>
</nav>


			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-variants" class="vector-menu vector-menu-dropdown vectorMenu" aria-labelledby="p-variants-label" role="navigation" 
	 >
	<input type="checkbox" class="vector-menu-checkbox vectorMenuCheckbox" aria-labelledby="p-variants-label" />
	<h3 id="p-variants-label">
		<span>不转换</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="menu vector-menu-content-list"><li id="ca-varlang-0" class="selected"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh" lang="zh" hreflang="zh">不转换</a></li><li id="ca-varlang-1"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hans" lang="zh-Hans" hreflang="zh-Hans">简体</a></li><li id="ca-varlang-2"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hant" lang="zh-Hant" hreflang="zh-Hant">繁體</a></li><li id="ca-varlang-3"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-cn" lang="zh-Hans-CN" hreflang="zh-Hans-CN">大陆简体</a></li><li id="ca-varlang-4"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hk" lang="zh-Hant-HK" hreflang="zh-Hant-HK">香港繁體</a></li><li id="ca-varlang-5"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-mo" lang="zh-Hant-MO" hreflang="zh-Hant-MO">澳門繁體</a></li><li id="ca-varlang-6"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-my" lang="zh-Hans-MY" hreflang="zh-Hans-MY">大马简体</a></li><li id="ca-varlang-7"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-sg" lang="zh-Hans-SG" hreflang="zh-Hans-SG">新加坡简体</a></li><li id="ca-varlang-8"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-tw" lang="zh-Hant-TW" hreflang="zh-Hant-TW">台灣正體</a></li></ul>
		
	</div>
</nav>


		</div>
		<div id="right-navigation">
			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-views" class="vector-menu vector-menu-tabs vectorTabs" aria-labelledby="p-views-label" role="navigation" 
	 >
	<h3 id="p-views-label">
		<span>视图</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="ca-view" class="collapsible selected"><a href="/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6">阅读</a></li><li id="ca-viewsource" class="collapsible"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;action=edit" title="本页面受到保护。您可以查看其源代码[e]" accesskey="e">查看源代码</a></li><li id="ca-history" class="collapsible"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;action=history" title="本页面过去的版本[h]" accesskey="h">查看历史</a></li></ul>
		
	</div>
</nav>


			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-cactions" class="vector-menu-empty emptyPortlet vector-menu vector-menu-dropdown vectorMenu" aria-labelledby="p-cactions-label" role="navigation" 
	 >
	<input type="checkbox" class="vector-menu-checkbox vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
	<h3 id="p-cactions-label">
		<span>更多</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="menu vector-menu-content-list"></ul>
		
	</div>
</nav>


			<div id="p-search" role="search">
	<h3 >
		<label for="searchInput">搜索</label>
	</h3>
	<form action="/mediawiki/index.php" id="searchform">
		<div id="simpleSearch">
			<input type="search" name="search" placeholder="搜索Stardew Valley Wiki" title="搜索Stardew Valley Wiki[f]" accesskey="f" id="searchInput"/>
			<input type="hidden" name="title" value="Special:搜索">
			<input type="submit" name="fulltext" value="搜索" title="搜索含这些文字的页面" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/>
			<input type="submit" name="go" value="前往" title="若相同标题存在，则直接前往该页面" id="searchButton" class="searchButton"/>
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a  title="访问首页" class="mw-wiki-logo" href="/Stardew_Valley_Wiki"></a>
	</div>
	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-navigation" class="vector-menu vector-menu-portal portal portal-first" aria-labelledby="p-navigation-label" role="navigation" 
	 >
	<h3 id="p-navigation-label">
		<span>导航</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="n-mainpage-description"><a href="/Stardew_Valley_Wiki" title="访问首页[z]" accesskey="z">首页</a></li><li id="n-recentchanges"><a href="/Special:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9" title="本wiki最近更改的列表[r]" accesskey="r">最近更改</a></li><li id="n-.E6.9C.AA.E7.BF.BB.E8.AF.91.E7.9A.84.E9.A1.B5.E9.9D.A2"><a href="/Category:%E6%9C%AA%E7%BF%BB%E8%AF%91%E7%9A%84%E9%A1%B5%E9%9D%A2">未翻译的页面</a></li><li id="n-.E5.B8.AE.E5.8A.A9:.E7.BC.96.E8.BE.91.E5.85.A5.E9.97.A8"><a href="/Help:%E7%BC%96%E8%BE%91%E5%85%A5%E9%97%A8">帮助:编辑入门</a></li><li id="n-randompage"><a href="/Special:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2" title="载入一个随机页面[x]" accesskey="x">随机页面</a></li></ul>
		
	</div>
</nav>


	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-链接" class="vector-menu vector-menu-portal portal" aria-labelledby="p-链接-label" role="navigation" 
	 >
	<h3 id="p-链接-label">
		<span>链接</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="n-.E5.AE.98.E6.96.B9.E7.BD.91.E7.AB.99"><a href="https://stardewvalley.net" rel="nofollow">官方网站</a></li><li id="n-.E5.AE.98.E6.96.B9.E8.AE.BA.E5.9D.9B"><a href="https://forums.stardewvalley.net/" rel="nofollow">官方论坛</a></li><li id="n-.E5.AE.98.E6.96.B9.E5.95.86.E5.93.81"><a href="https://www.stardewvalley.net/shop/" rel="nofollow">官方商品</a></li><li id="n-.E7.A4.BE.E4.BA.A4.E5.AA.92.E4.BD.93"><a href="https://www.stardewvalley.net/links/" rel="nofollow">社交媒体</a></li></ul>
		
	</div>
</nav>

<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-tb" class="vector-menu vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation" 
	 >
	<h3 id="p-tb-label">
		<span>工具</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere"><a href="/Special:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" title="所有链接至本页面的wiki页面的列表[j]" accesskey="j">链入页面</a></li><li id="t-recentchangeslinked"><a href="/Special:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" rel="nofollow" title="链自本页的页面的最近更改[k]" accesskey="k">相关更改</a></li><li id="t-upload"><a href="//stardewvalleywiki.com/Special:Upload" title="上传文件[u]" accesskey="u">上传文件</a></li><li id="t-specialpages"><a href="/Special:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="所有特殊页面的列表[q]" accesskey="q">特殊页面</a></li><li id="t-print"><a href="javascript:print();" rel="alternate" title="本页面的可打印版本[p]" accesskey="p">可打印版本</a></li><li id="t-permalink"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;oldid=51248" title="本页面该版本的固定链接">固定链接</a></li><li id="t-info"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;action=info" title="关于此页面的更多信息">页面信息</a></li></ul>
		
	</div>
</nav>


	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-lang" class="vector-menu vector-menu-portal portal" aria-labelledby="p-lang-label" role="navigation" 
	 >
	<h3 id="p-lang-label">
		<span>其他语言</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li class="interlanguage-link interwiki-en"><a href="https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.6" title="Modding:Migrate to Stardew Valley 1.6 – English" lang="en" hreflang="en" class="interlanguage-link-target">English</a></li></ul>
		
	</div>
</nav>


</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info" >
		<li id="footer-info-lastmod"> 此页面最后编辑于2025年3月22日 (星期六) 12:30。</li>
		<li id="footer-info-copyright">除非另有声明，本网站内容采用<a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike</a>授权。</li>
	</ul>
	<ul id="footer-places" >
		<li id="footer-places-privacy"><a href="/Stardew_Valley_Wiki:%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96" title="Stardew Valley Wiki:隐私政策">隐私政策</a></li>
		<li id="footer-places-about"><a href="/Stardew_Valley_Wiki:%E5%85%B3%E4%BA%8E" title="Stardew Valley Wiki:关于">关于Stardew Valley Wiki</a></li>
		<li id="footer-places-disclaimer"><a href="/Stardew_Valley_Wiki:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="Stardew Valley Wiki:免责声明">免责声明</a></li>
		<li id="footer-places-mobileview"><a href="//zh.stardewvalleywiki.com/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">手机版视图</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico"><a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="/mediawiki/resources/assets/licenses/cc-by-nc-sa.png" alt="Creative Commons Attribution-NonCommercial-ShareAlike" width="88" height="31" loading="lazy"/></a></li>
		<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="/mediawiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/mediawiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /mediawiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
	</ul>
	<div style="clear: both;"></div>
</footer>



<script src="https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.722","walltime":"1.549","ppvisitednodes":{"value":7608,"limit":1000000},"postexpandincludesize":{"value":40249,"limit":2097152},"templateargumentsize":{"value":7070,"limit":2097152},"expansiondepth":{"value":6,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":113644,"limit":5000000},"timingprofile":["100.00%  978.790      1 -total"," 15.57%  152.424      2 Template:Collapse","  4.48%   43.816    135 Template:T","  1.75%   17.116     67 Template:Migration_guide_doc_status","  1.62%   15.819     55 Template:O","  1.30%   12.739      1 Template:TOC","  0.47%    4.599      5 Template:Price","  0.29%    2.843      3 Template:Content_Patcher_example","  0.19%    1.881      7 Template:Content_Patcher_version","  0.16%    1.612      1 Template:Modder_compatibility_header"]},"cachereport":{"timestamp":"20250329194958","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":127});});</script></body></html>


