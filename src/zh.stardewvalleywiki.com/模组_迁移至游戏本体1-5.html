
<!DOCTYPE html>
<html class="client-nojs" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>模组:迁移至游戏本体1.6 - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"zh","wgMonthNames":["","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"wgRequestId":"de2f43ea2b61cbabcafa41c1","wgCSPNonce":!1,"wgCanonicalNamespace":"模组","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":570,"wgPageName":"模组:迁移至游戏本体1.6","wgTitle":"迁移至游戏本体1.6","wgCurRevisionId":49065,"wgRevisionId":49065,"wgArticleId":3269,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["未翻译的页面","待扩充页面","模组"],"wgPageContentLanguage":"zh","wgPageContentModel":"wikitext","wgRelevantPageName":"模组:迁移至游戏本体1.6","wgRelevantArticleId":3269,"wgUserVariant":"zh","wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],
"wgRestrictionMove":[],"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,"watchlist":!1,"tagline":!1}};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.vector.styles.legacy":"ready","jquery.makeCollapsible.styles":"ready","mediawiki.toc.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","mediawiki.page.ready","jquery.makeCollapsible","mediawiki.toc","skins.vector.legacy.js"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="/mediawiki/load.php?lang=zh&amp;modules=ext.pygments%7Cjquery.makeCollapsible.styles%7Cmediawiki.toc.styles%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="/mediawiki/load.php?lang=zh&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="/mediawiki/load.php?lang=zh&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="description" content="←目录"/>
<link rel="shortcut icon" href="/mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="/mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (zh)"/>
<link rel="EditURI" type="application/rsd+xml" href="//zh.stardewvalleywiki.com/mediawiki/api.php?action=rsd"/>
<link rel="alternate" hreflang="zh" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh"/>
<link rel="alternate" hreflang="zh-Hans" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hans"/>
<link rel="alternate" hreflang="zh-Hant" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hant"/>
<link rel="alternate" hreflang="zh-Hans-CN" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-cn"/>
<link rel="alternate" hreflang="zh-Hant-HK" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hk"/>
<link rel="alternate" hreflang="zh-Hant-MO" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-mo"/>
<link rel="alternate" hreflang="zh-Hans-MY" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-my"/>
<link rel="alternate" hreflang="zh-Hans-SG" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-sg"/>
<link rel="alternate" hreflang="zh-Hant-TW" href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-tw"/>
<link rel="alternate" hreflang="x-default" href="/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6"/>
<link rel="license" href="https://creativecommons.org/licenses/by-nc-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Stardew Valley Wiki的Atom feed" href="/mediawiki/index.php?title=Special:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;feed=atom"/>
<meta property="og:title" content="模组:迁移至游戏本体1.6 - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://zh.stardewvalleywiki.com/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6"/>
<meta property="og:description" content="←目录"/>
<meta property="og:image" content="https://zh.stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="article:modified_time" content="2024-10-01T15:24:53Z"/>
<meta property="article:published_time" content="2024-10-01T15:24:53Z"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="模组:迁移至游戏本体1.6 - Stardew Valley Wiki"/>
<meta property="twitter:description" content="←目录"/>
<meta property="twitter:image" content="https://zh.stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"\u6a21\u7ec4:\u8fc1\u79fb\u81f3\u6e38\u620f\u672c\u4f531.6 - Stardew Valley Wiki","headline":"\u6a21\u7ec4:\u8fc1\u79fb\u81f3\u6e38\u620f\u672c\u4f531.6 - Stardew Valley Wiki","mainEntityOfPage":"\u6a21\u7ec4:\u8fc1\u79fb\u81f3\u6e38\u620f\u672c\u4f531.6","identifier":"https:\/\/zh.stardewvalleywiki.com\/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6","url":"https:\/\/zh.stardewvalleywiki.com\/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6","description":"\u2190\u76ee\u5f55","dateModified":"2024-10-01T15:24:53Z","datePublished":"2024-10-01T15:24:53Z","image":{"@type":"ImageObject","url":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/zh.stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/zh.stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/zh.stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-570 ns-subject page-模组_迁移至游戏本体1_6 rootpage-模组_迁移至游戏本体1_6 skin-vector action-view minerva--history-page-action-enabled skin-vector-legacy">
<div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="zh">模组:迁移至游戏本体1.6</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">来自Stardew Valley Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">跳到导航</a>
		<a class="mw-jump-link" href="#searchInput">跳到搜索</a>
		<div id="mw-content-text" lang="zh" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p>←<a href="/%E6%A8%A1%E7%BB%84:%E7%9B%AE%E5%BD%95" title="模组:目录">目录</a>
</p><p><b>注：<a href="https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.6" class="extiw" title="en:Modding:Migrate to Stardew Valley 1.6">原页面</a>的创造者为<a href="https://stardewvalleywiki.com/User:Pathoschild" class="extiw" title="en:User:Pathoschild">Pathoschild</a>，其他贡献者请参阅<a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" title="模组 talk:迁移至游戏本体1.6">此处</a>。</b>
</p><p><br />
</p>
<div style="border: 1px solid orange; border-left: 1em solid orange; padding: 0.5em 1em; border-radius: 5px;">
<p><b>本页面仅面向模组开发者。模组玩家请参见<a href="/%E6%A8%A1%E7%BB%84:%E6%A8%A1%E7%BB%84%E5%85%BC%E5%AE%B9%E6%80%A7" title="模组:模组兼容性">模组:模组兼容性</a>。</b>
</p>
</div>
<p><br />
此页面介绍了如何更新你的模组以与星露谷物语 1.6 兼容，并记录了一些更改和新功能。另见<a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3SMAPI_4.0&amp;action=edit&amp;redlink=1" class="new" title="模组:迁移至SMAPI 4.0（页面不存在）"><i>迁移至SMAPI 4.0</i></a>。
</p>
<table class="alert" id="construction">

<tbody><tr>
<td style="padding-right: 12px;"><a href="/File:Robin_building.png" class="image"><img alt="Robin building.png" src="https://stardewvalleywiki.com/mediawiki/images/2/22/Robin_building.png" decoding="async" width="90" height="131" /></a>
</td>
<td><style data-mw-deduplicate="TemplateStyles:r23369">.mw-parser-output .decorativequotemark{font-family:"Georgia","Times New Roman","Times",serif;font-size:5em;line-height:0.02em;font-weight:bold;color:rgb(41,129,178);border-right:1px solid rgb(47,148,204);padding:25px 0.06em 0em 0.2em}.mw-parser-output .quotetext{padding-left:15px}.mw-parser-output .quotesource{text-align:left;font-size:0.9em;margin-top:0;padding-left:120px}</style>
<table>

<tbody><tr>
<td rowspan="2" class="decorativequotemark">&#8220;
</td>
<td class="quotetext">&#8220;我这里还有很多事情需要处理。&#8221;
</td></tr>
<tr>
<td class="quotesource">&#8212;&#8212; 罗宾
</td></tr>
</tbody></table>
<p><span style="font-size: larger;"><b>不完整的翻译</b></span>
</p><p>本文或部分尚未完全翻译成中文。
欢迎您通过<a rel="nofollow" class="external text" href="//zh.stardewvalleywiki.com/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;action=edit">编辑</a>帮助其建设。<br />
<span style="font-size: smaller;">最后由 <a href="/User:Candybear" title="User:Candybear">Candybear</a> 编辑于2024-10-01 15:24:53.</span>
</p>
</td></tr></tbody></table>
<table role="presentation" class="alert" id="stub">

<tbody><tr>
<th><a href="/File:Axe.png" class="image"><img alt="Axe" src="https://stardewvalleywiki.com/mediawiki/images/f/fb/Axe.png" decoding="async" width="48" height="48" /></a>
</th>
<td><span class="header">页面仍需完善</span>
<p>该页面由于下列原因被标记为不完善：
</p>
<ul><li>正在逐步完成移植</li></ul>
</td></tr></tbody></table>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="zh" dir="ltr"><h2 id="mw-toc-heading">目录</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E5.B8.B8.E8.A7.81.E9.97.AE.E9.A2.98.E8.A7.A3.E7.AD.94"><span class="tocnumber">1</span> <span class="toctext">常见问题解答</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#.E8.AF.A5.E7.89.88.E6.9C.AC.E6.9C.89.E4.BD.95.E5.8F.98.E5.8C.96.EF.BC.9F"><span class="tocnumber">1.1</span> <span class="toctext">该版本有何变化？</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#.E8.BF.99.E5.B0.B1.E6.98.AF.E2.80.9C.E6.A8.A1.E7.BB.84.E5.90.AF.E7.A4.BA.E5.BD.95.E2.80.9D.E5.90.97.EF.BC.9F"><span class="tocnumber">1.2</span> <span class="toctext">这就是“模组启示录”吗？</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#.E5.A6.82.E4.BD.95.E6.9B.B4.E6.96.B0.E6.A8.A1.E7.BB.84.EF.BC.9F"><span class="tocnumber">1.3</span> <span class="toctext">如何更新模组？</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#.E6.9E.B6.E6.9E.84.E6.9B.B4.E6.96.B0"><span class="tocnumber">2</span> <span class="toctext">架构更新</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#.NET_6"><span class="tocnumber">2.1</span> <span class="toctext">.NET 6</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Trigger_actions"><span class="tocnumber">2.2</span> <span class="toctext">Trigger actions</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Hash_set_fields"><span class="tocnumber">2.3</span> <span class="toctext">Hash set fields</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#DataLoader"><span class="tocnumber">2.4</span> <span class="toctext">DataLoader</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Unique_string_IDs"><span class="tocnumber">2.5</span> <span class="toctext">Unique string IDs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#What.27s_new_for_items"><span class="tocnumber">3</span> <span class="toctext">What's new for items</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Custom_items"><span class="tocnumber">3.1</span> <span class="toctext">Custom items</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Overview"><span class="tocnumber">3.1.1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Item_references"><span class="tocnumber">3.1.2</span> <span class="toctext">Item references</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Item_types"><span class="tocnumber">3.1.3</span> <span class="toctext">Item types</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Define_a_custom_item"><span class="tocnumber">3.1.4</span> <span class="toctext">Define a custom item</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Error_items"><span class="tocnumber">3.1.5</span> <span class="toctext">Error items</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#For_C.23_mods"><span class="tocnumber">3.1.6</span> <span class="toctext">For C# mods</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#Custom_big_craftables"><span class="tocnumber">3.2</span> <span class="toctext">Custom big craftables</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Custom_crops"><span class="tocnumber">3.3</span> <span class="toctext">Custom crops</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Custom_fences"><span class="tocnumber">3.4</span> <span class="toctext">Custom fences</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Custom_floors_.28craftable.29_.26_paths"><span class="tocnumber">3.5</span> <span class="toctext">Custom floors (craftable) &amp; paths</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Custom_machines"><span class="tocnumber">3.6</span> <span class="toctext">Custom machines</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Custom_melee_weapons"><span class="tocnumber">3.7</span> <span class="toctext">Custom melee weapons</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Custom_movie_concessions"><span class="tocnumber">3.8</span> <span class="toctext">Custom movie concessions</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Custom_museum_donations_.26_rewards"><span class="tocnumber">3.9</span> <span class="toctext">Custom museum donations &amp; rewards</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Custom_fruit_trees"><span class="tocnumber">3.10</span> <span class="toctext">Custom fruit trees</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Custom_objects"><span class="tocnumber">3.11</span> <span class="toctext">Custom objects</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Custom_pants"><span class="tocnumber">3.12</span> <span class="toctext">Custom pants</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Custom_shirts"><span class="tocnumber">3.13</span> <span class="toctext">Custom shirts</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Custom_tools"><span class="tocnumber">3.14</span> <span class="toctext">Custom tools</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Custom_wild_trees"><span class="tocnumber">3.15</span> <span class="toctext">Custom wild trees</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Default_recipes"><span class="tocnumber">3.16</span> <span class="toctext">Default recipes</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Global_inventories"><span class="tocnumber">3.17</span> <span class="toctext">Global inventories</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#Hats_on_aquarium_fish"><span class="tocnumber">3.18</span> <span class="toctext">Hats on aquarium fish</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Context_tag_changes"><span class="tocnumber">3.19</span> <span class="toctext">Context tag changes</span></a>
<ul>
<li class="toclevel-3 tocsection-37"><a href="#New_context_tags"><span class="tocnumber">3.19.1</span> <span class="toctext">New context tags</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#ItemContextTagManager_class"><span class="tocnumber">3.19.2</span> <span class="toctext">ItemContextTagManager class</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#Other_context_tag_changes"><span class="tocnumber">3.19.3</span> <span class="toctext">Other context tag changes</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-40"><a href="#Inventory_class"><span class="tocnumber">3.20</span> <span class="toctext">Inventory class</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Furniture_changes"><span class="tocnumber">3.21</span> <span class="toctext">Furniture changes</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#Other_item_changes_for_C.23_mods"><span class="tocnumber">3.22</span> <span class="toctext">Other item changes for C# mods</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#Other_item_changes"><span class="tocnumber">3.23</span> <span class="toctext">Other item changes</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span id="常见问题解答"></span><span class="mw-headline" id=".E5.B8.B8.E8.A7.81.E9.97.AE.E9.A2.98.E8.A7.A3.E7.AD.94">常见问题解答</span></h2>
<h3><span id="该版本有何变化？"></span><span class="mw-headline" id=".E8.AF.A5.E7.89.88.E6.9C.AC.E6.9C.89.E4.BD.95.E5.8F.98.E5.8C.96.EF.BC.9F">该版本有何变化？</span></h3>
<p>1.6版本对游戏代码进行了根本性的修改使模组更加具有扩展性。
</p>
<h3><span id="这就是“模组启示录”吗？"></span><span class="mw-headline" id=".E8.BF.99.E5.B0.B1.E6.98.AF.E2.80.9C.E6.A8.A1.E7.BB.84.E5.90.AF.E7.A4.BA.E5.BD.95.E2.80.9D.E5.90.97.EF.BC.9F">这就是“模组启示录”吗？</span></h3>
<p>也许吧。更新对游戏基本部分作出了重大改动，而SMAPI和Content Patcher无法重写所有旧版模组以做出适配。这将会另许多模组无法正常运行，直到它们与游戏的更新适配。不过，就游戏开发者和社区之间的讨论而言，我们一致认为这种短期的麻烦将与修改后带来的长期巨大益处相抵消。
</p>
<h3><span id="如何更新模组？"></span><span class="mw-headline" id=".E5.A6.82.E4.BD.95.E6.9B.B4.E6.96.B0.E6.A8.A1.E7.BB.84.EF.BC.9F">如何更新模组？</span></h3>
<p>本页面的其余部分可能让你无从下手。庆幸的是，其中大部分内容可能与您的模组无关。
</p><p>以下是让模组适配1.6版本的 “快速入门 ”指南：
</p>
<dl><dt>C#模组&#58;</dt>
<dd>
<ol><li>将<a rel="nofollow" class="external text" href="https://www.nuget.org/packages/Pathoschild.Stardew.ModBuildConfig">模组构建配置NuGet解析包</a>更新到最新版本。</li>
<li>在每个<samp>.csproj</samp>项目文件中，将 <code>&lt;TargetFramework&gt;net5.0&lt;/TargetFramework&gt;</code> 更改为 <code>&lt;TargetFramework&gt;net6.0&lt;/TargetFramework&gt;</code>。<br /><small>（提示：如果第二行看起来像 <code>&lt;Project ToolsVersion=...</code> 而非 <code>&lt;Project Sdk="Microsoft.NET.Sdk"&gt;</code>，则需要先<a href="/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.5.5" title="模组:迁移至游戏本体1.5.5">将其迁移至1.5.5</a>。）</small></li>
<li>重建方案。</li>
<li>修复构建错误。您可以根据需要搜索此页面以获取有关信息。</li>
<li>Review all build warnings (particularly obsolete-code warnings), which may indicate code that broke in 1.6.</li>
<li>Increment your mod version in <samp>manifest.json</samp>.<br /><small>(Some mods may be added to SMAPI's compatibility blacklist due to runtime errors. Incrementing the mod version will fix that if so.)</small></li>
<li>Test to make sure the mod works.</li>
<li>Skim through <a href="#Breaking_changes_for_C.23_mods"><i>breaking changes for C# mods</i></a> and the table of contents, and check any section that might be relevant to the mod.</li></ol></dd></dl>
<dl><dt>For <a href="/%E6%A8%A1%E7%BB%84:Content_Patcher" title="模组:Content Patcher">Content Patcher</a> packs&#58;</dt>
<dd>
<ol><li>Follow the <a rel="nofollow" class="external text" href="https://smapi.io/cp-migrate">Content Patcher migration guide</a> until your content pack has <code>"Format": "2.5.0"</code>.<br /><small><b>Do not skip this step!</b> Content Patcher will assume your content pack is pre-1.6 if you don't, which can cause confusing errors if you already updated it.</small></li>
<li>Review <a href="#Breaking_changes_for_content_packs"><i>breaking changes for content packs</i></a> and update the content pack as needed.</li></ol></dd></dl>
<dl><dt>For content packs which use another framework&#58;</dt>
<dd>See the documentation for the framework mod. Often you won't need to update the content pack if the framework mod itself was updated.</dd></dl>
<h2><span id="架构更新"></span><span class="mw-headline" id=".E6.9E.B6.E6.9E.84.E6.9B.B4.E6.96.B0">架构更新</span></h2>
<h3><span class="mw-headline" id=".NET_6">.NET 6</span></h3>
<dl><dd><i>See also: <a href="#.NET_6_2">.NET 6</a> under breaking changes.</i></dd></dl>
<p>For C# mod authors, Stardew Valley 1.6 updates from .NET 5 to .NET 6. See <a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-6"><i>What's new in .NET 6</i></a> and <a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-10"><i>What's new in C# 10</i></a> for more info, but some highlights include...
</p>
<ul><li><a rel="nofollow" class="external text" href="https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-6/">improved performance</a>;</li>
<li><a rel="nofollow" class="external text" href="https://devblogs.microsoft.com/dotnet/update-on-net-hot-reload-progress-and-visual-studio-2022-highlights/">improved hot reload</a>;</li>
<li><a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-6#new-linq-apis">new LINQ methods</a>;</li>
<li><a rel="nofollow" class="external text" href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/record">record structs</a>;</li>
<li>and support for ARM64 on macOS.</li></ul>
<h3><span class="mw-headline" id="Trigger_actions">Trigger actions</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Trigger_actions&amp;action=edit&amp;redlink=1" class="new" title="Modding:Trigger actions（页面不存在）">Modding:Trigger actions</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>Trigger actions are a new feature which lets content packs perform an action when something happens, with support for a wide range of actions (like sending mail, changing friendship, starting a quest, etc).
</p><p>For example, it lets you have logic like "<i>When the player arrives in the Farm location, if Leo has moved to the valley, then send a letter and start a conversation topic</i>":
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Trigger&quot;</span><span class="o">:</span> <span class="s2">&quot;LocationChanged&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Location&quot;</span><span class="o">:</span> <span class="s2">&quot;Farm&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;PLAYER_HAS_FLAG Host leoMoved&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Actions&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;AddMail Current Abigail_LeoMoved Today&quot;</span><span class="p">,</span>
        <span class="s2">&quot;AddConversationTopic LeoMoved 5&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Hash_set_fields">Hash set fields</span></h3>
<p>For C# mod authors, the game now uses <a rel="nofollow" class="external text" href="https://www.bytehide.com/blog/hashset-csharp">hash sets</a> for many list fields which expect unique values. That allows much more efficient O(1) read/write, prevents duplicate values, and simplifies common logic.
</p><p>This affects:
</p>
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>fields
</th></tr>
<tr>
<td><samp>Farmer</samp>
</td>
<td><samp>achievements</samp><br /><samp>dialogueQuestionsAnswered</samp><br /><samp>eventsSeen</samp><br /><samp>mailForTomorrow</samp><br /><samp>mailReceived</samp><br /><samp>professions</samp><br /><samp>secretNotesSeen</samp><br /><samp>songsHeard</samp>
</td></tr>
<tr>
<td><samp>FarmerTeam</samp>
</td>
<td><samp>acceptedSpecialOrderTypes</samp><br /><samp>broadcastedMail</samp><br /><samp>completedSpecialOrders</samp><br /><samp>collectedNutTracker</samp>
</td></tr>
<tr>
<td><samp>Game1</samp>
</td>
<td><samp>worldStateIDs</samp>
</td></tr>
<tr>
<td><samp>NetWorldState</samp>
</td>
<td><samp>ActivePassiveFestivals</samp><br /><samp>CheckedGarbage</samp><br /><samp>FoundBuriedNuts</samp><br /><samp>IslandVisitors</samp><br /><samp>LocationsWithBuildings</samp>
</td></tr></tbody></table>
<p>Usage is very similar, and many list methods like <samp>Contains</samp> work the same way with hash sets. Here are the main differences:
</p>
<ul>
<li>Hash sets aren't ordered. For example, there's no guarantee that the first value when you enumerate it was the earliest one added.</li>
<li><p>Hash sets can't be indexed. For example, you can no longer use <code>list[0]</code> to get the first value. You can still enumerate them or use LINQ methods like <samp>set.First()</samp>, but in most cases you should use the set methods like <samp>Add</samp> or <samp>Contains</samp> instead.</p>
<p>To remove multiple matching values from the set, you can use <samp>RemoveWhere</samp> instead:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// old code</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Count</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span><span class="p">--)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">&quot;Example.ModId_&quot;</span><span class="p">))</span>
        <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">RemoveAt</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// new code</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">RemoveWhere</span><span class="p">(</span><span class="n">id</span> <span class="p">=&gt;</span> <span class="n">id</span><span class="p">.</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">&quot;Example.ModId_&quot;</span><span class="p">));</span>
</pre></div>
</li>
<li>You no longer need to check before adding a value, since the hash set will ignore duplicates.</li>
<li>The <samp>Add</samp>/<samp>Remove</samp>/<samp>RemoveWhere</samp> methods return whether a value was added/removed, which lets you check at the same time. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;BackpackTip&quot;</span><span class="p">))</span> <span class="c1">// returns true if it wasn&#39;t in the set yet</span>
    <span class="n">Game1</span><span class="p">.</span><span class="n">addMailForTomorrow</span><span class="p">(</span><span class="s">&quot;pierreBackpack&quot;</span><span class="p">);</span>
</pre></div>
</li>
</ul>
<h3><span class="mw-headline" id="DataLoader">DataLoader</span></h3>
<p><samp>DataLoader</samp> is a new C# utility which provides strongly-typed methods to load the game's data assets.
</p><p>This solves an issue where we often needed fragile code like <code>Game1.content.Load&lt;Dictionary&lt;string, PassiveFestivalData&gt;&gt;("Data\\PassiveFestivals")</code>. With that code, it's easy to accidentally misspell the asset name, use different capitalization (which would break on Linux/macOS), or use the wrong return type. If you did, you likely wouldn't notice until the code actually executed at runtime and threw an exception.
</p><p>In Stardew Valley 1.6, you can now rewrite that code like <code>DataLoader.PassiveFestivals(Game1.content)</code>. That's simpler, you can't use the wrong asset name or type, and it's more future-proof in case the game changes them.
</p>
<h3><span class="mw-headline" id="Unique_string_IDs">Unique string IDs</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Common_data_field_types&amp;action=edit&amp;redlink=1" class="new" title="Modding:Common data field types（页面不存在）">Modding:Common data field types#Unique string ID</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>Stardew Valley now uses <i>unique string IDs</i> throughout the code to identify data (like events, locations, items, NPCs, etc). For example, <code>Town</code> is the unique ID for the <a href="/mediawiki/index.php?title=Pelican_Town&amp;action=edit&amp;redlink=1" class="new" title="Pelican Town（页面不存在）">Pelican Town</a> location; no other location can use that ID. The IDs are used for a wide range of purposes, from internal game logic to <a href="/mediawiki/index.php?title=Modding:Content_Patcher&amp;action=edit&amp;redlink=1" class="new" title="Modding:Content Patcher（页面不存在）">content pack edits</a>.
</p><p>For mods, it's <b>strongly recommended</b> to...
</p>
<ul><li>Use namespaced IDs prefixed with your <a href="/mediawiki/index.php?title=Modding:Modder_Guide/APIs/Manifest&amp;action=edit&amp;redlink=1" class="new" title="Modding:Modder Guide/APIs/Manifest（页面不存在）">mod's unique ID</a> for all new content. For example, if your mod ID is <code>Example.PufferchickMod</code> and you're adding a pufferchick plushy, your item ID would look like <code>Example.PufferchickMod_PufferchickPlushy</code>. In a <a href="/mediawiki/index.php?title=Modding:Content_Patcher&amp;action=edit&amp;redlink=1" class="new" title="Modding:Content Patcher（页面不存在）">Content Patcher pack</a>, you can use <code>{{ModId}}_PufferchickPlushy</code> to insert your mod ID automatically. This eliminates ID conflicts between mods, and makes it easy (for both troubleshooters and mod code) to identify which mod added a particular content. See <a href="/mediawiki/index.php?title=Modding:Common_data_field_types&amp;action=edit&amp;redlink=1" class="new" title="Modding:Common data field types（页面不存在）">the new format docs</a> for the recommended format.</li>
<li>Only use alphanumeric (a–z, A–Z, 0–9), underscore (<code>_</code>), and dot (<code>.</code>) characters in string IDs. This is important because they're often used in places where some characters have special meaning (like file names or <a href="#Game_state_queries">game state queries</a>).</li></ul>
<p>You can optionally migrate pre-1.6 content to use unique string IDs too, without breaking existing players' saves. This is recommended to reduce mod conflicts and simplify troubleshooting going forward. Here's how to migrate for each data type:
</p>
<table class="mw-collapsible mw-collapsed" style="">
<tbody><tr>
<th style="text-align: left;"><b>migration steps for pre-1.6 content</b>&#160;
</th></tr>
<tr>
<td>&#32;
<table class="wikitable">

<tbody><tr>
<th>content type
</th>
<th>how to change IDs
</th></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Event_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Event data（页面不存在）">event IDs</a><br /><a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">item IDs</a><br /><a href="/mediawiki/index.php?title=Modding:Mail_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Mail data（页面不存在）">mail IDs</a><br /><a href="/mediawiki/index.php?title=Modding:Recipe_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Recipe data（页面不存在）">recipe IDs</a><br /><a href="#Custom_jukebox_tracks">song IDs for jukebox</a>
</td>
<td><a href="/mediawiki/index.php?title=Modding:Content_Patcher&amp;action=edit&amp;redlink=1" class="new" title="Modding:Content Patcher（页面不存在）">Content Patcher</a> adds a custom <a href="/mediawiki/index.php?title=Modding:Trigger_actions&amp;action=edit&amp;redlink=1" class="new" title="Modding:Trigger actions（页面不存在）">trigger action</a> which can migrate IDs everywhere in the save data.
<p>For example, this migrates two crafting recipe IDs:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/TriggerActions&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;{{ModId}}_MigrateToUniqueIds&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ModId}}_MigrateToUniqueIds&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Trigger&quot;</span><span class="o">:</span> <span class="s2">&quot;DayStarted&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Actions&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="c1">// Note: use double-quotes around an argument if it contains spaces. This example has single-quotes for</span>
                <span class="c1">// the action itself, so we don&#39;t need to escape the double-quotes inside it.</span>
                <span class="s1">&#39;Pathoschild.ContentPatcher_MigrateIds CraftingRecipes &quot;Puffer Plush&quot; {{ModId}}_PufferPlush &quot;Puffer Sofa&quot; {{ModId}}_PufferSofa&#39;</span>
            <span class="p">],</span>
            <span class="s2">&quot;HostOnly&quot;</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>See the <a rel="nofollow" class="external text" href="https://github.com/Pathoschild/StardewMods/blob/develop/ContentPatcher/docs/author-guide/trigger-actions.md">Content Patcher docs</a> for more info about using the trigger action, including restrictions and valid ID types.
</p>
</td></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Location_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Location data（页面不存在）">location IDs</a>
</td>
<td>Add the old name to the location's <samp>FormerLocationNames</samp> field in <samp>Data/Locations</samp>.
</td></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:NPC_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:NPC data（页面不存在）">NPC internal names</a>
</td>
<td>Add the old name to the NPC's <samp>FormerCharacterNames</samp> field in <samp>Data/Characters</samp>.
</td></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Quest_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Quest data（页面不存在）">quest</a> and <a href="/mediawiki/index.php?title=Modding:Special_orders&amp;action=edit&amp;redlink=1" class="new" title="Modding:Special orders（页面不存在）">special order</a> IDs
</td>
<td>Currently there's no safe way to migrate quest and special order IDs, since removing and readding them will reset any progress the player has made on them.
</td></tr></tbody></table>
</td></tr></tbody></table>
<h2><span id="What's_new_for_items"></span><span class="mw-headline" id="What.27s_new_for_items">What's new for items</span></h2>
<h3><span class="mw-headline" id="Custom_items">Custom items</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Modding:Items</a>的最新文档。本节仅描述1.6的更新内容。</div>
<h4><span class="mw-headline" id="Overview">Overview</span></h4>
<p>Stardew Valley 1.6 makes three major changes to how items work in the game:
</p>
<ol><li>Each item now has a string ID (<samp>ItemId</samp>) and a globally unique string ID (<samp>QualifiedItemId</samp>). The <samp>QualifiedItemId</samp> is auto-generated by prefixing the <samp>ItemId</samp> with the item type identifier.<p>For legacy reasons, the <samp>ItemId</samp> for vanilla items may not be globally unique. For example, Pufferfish (object 128) and Mushroom Box (bigcraftable 128) both have <samp>ItemId: 128</samp>. They can be distinguished by their <samp>QualifiedItemId</samp>, which are <samp>(O)128</samp> and <samp>(BC)128</samp> respectively.</p></li>
<li>Each item type now has an <i>item data definition</i> in the game code which tells the game how to handle it. <a href="#For_C.23_mods">C# mods can add or edit definitions</a>. Each definition has a unique prefix which is used in the qualified item IDs. The vanilla types are bigcraftables (<samp>(BC)</samp>), boots (<samp>(B)</samp>), farmhouse flooring (<samp>(FL)</samp>), furniture (<samp>(F)</samp>), hats (<samp>(H)</samp>), objects (<samp>(O)</samp>), pants (<samp>(P)</samp>), shirts (<samp>(S)</samp>), tools (<samp>(T)</samp>), wallpaper (<samp>(WP)</samp>), and weapons (<samp>(W)</samp>).</li>
<li>Custom items can now provide their own item texture, specified in a new field in the item data assets (see below). The item's <samp>ParentSheetIndex</samp> field is the index within that texture.</li></ol>
<p>In other words, the four important fields for items are:
</p>
<table class="wikitable">

<tbody><tr>
<th>name
</th>
<th>type
</th>
<th>description
</th></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td><samp>string</samp>
</td>
<td>A <a href="/mediawiki/index.php?title=Modding:Common_data_field_types&amp;action=edit&amp;redlink=1" class="new" title="Modding:Common data field types（页面不存在）">unique string ID</a> for this item which should be globally unique (but may not be for existing vanilla items for backwards compatibility). For example, <samp>128</samp> (vanilla item) or <samp>Example.ModId_Watermelon</samp> (custom item).
</td></tr>
<tr>
<td><samp>QualifiedItemId</samp>
</td>
<td><samp>string</samp>
</td>
<td>A globally unique item key, like <samp>(O)128</samp> for a vanilla item or <samp>(O)Example.ModId_Watermelon</samp> for a custom one. This is auto-generated from the <samp>TypeDefinitionId</samp> and <samp>ItemId</samp> fields.
</td></tr>
<tr>
<td><samp>ParentSheetIndex</samp>
</td>
<td><samp>int</samp>
</td>
<td>The item's sprite index within its spritesheet.
</td></tr>
<tr>
<td><samp>TypeDefinitionId</samp>
</td>
<td><samp>string</samp>
</td>
<td>The ID for the data definition which defines the item, like <samp>(O)</samp> for an object. You can use <samp>ItemRegistry.type_*</samp> constants with this field:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">TypeDefinitionId</span> <span class="p">==</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">type_object</span><span class="p">)</span>
   <span class="p">...</span>
</pre></div>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Item_references">Item references</span></h4>
<p>Item references throughout the game code now use the <samp>ItemId</samp> instead of the <samp>ParentSheetIndex</samp>. Since the <samp>ItemId</samp> is identical to the index for existing vanilla items, most data assets are unaffected by this change. For example, here's from <samp>Data/NPCGiftTastes</samp> with one custom item:
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Universal_Like&quot;</span><span class="err">:</span> <span class="s2">&quot;-2 -7 -26 -75 -80 72 395 613 634 635 636 637 638 724 459 Example.ModID_watermelon&quot;</span>
</pre></div>
<p>Unless otherwise noted, unqualified item IDs will produce <a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">objects</a>. Some assets let you override that by specifying a <samp>QualifiedItemId</samp> value instead. For example, you can add <code>(O)128</code> to the gift taste list to explicitly add for an object. Here's a partial list of data assets and their supported item ID formats:
</p>
<table class="wikitable">

<tbody><tr>
<th>data asset
</th>
<th>item ID format
</th></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Recipe_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Recipe data（页面不存在）"><samp>Data/CraftingRecipes</samp><br /><samp>Data/CookingRecipes</samp></a>
</td>
<td>&#32;
<ul><li>Ingredients: both supported.</li>
<li>Output: set field 2 to the unqualified item ID, and field 3 to one of <samp>true</samp> (bigcraftable) or <samp>false</samp> (object).</li></ul>
</td></tr>
<tr>
<td><a href="#Custom_fruit_trees"><samp>Data/fruitTrees</samp></a>
</td>
<td>&#32;
<ul><li>Fruit: both supported.</li>
<li>Sapling: unqualified only.</li></ul>
</td></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Gift_taste_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Gift taste data（页面不存在）"><samp>Data/NPCGiftTastes</samp></a>
</td>
<td>Both supported, but only <samp>(O)</samp> items can be gifted.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Item_types">Item types</span></h4>
<p>These are the item types for which custom items can added/edited:
</p>
<table class="wikitable">

<tbody><tr>
<th>item type
</th>
<th>type identifier
</th>
<th>data asset
</th></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">big craftables</a>
</td>
<td><samp>(BC)</samp>
</td>
<td><samp>Data/BigCraftables</samp><br /><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The default texture is <samp>TileSheets/Craftables</samp>.</small>
</td></tr>
<tr>
<td>boots
</td>
<td><samp>(B)</samp>
</td>
<td><samp>Data/Boots</samp><br /><small>Each item can set a custom texture name in fields 9 (item) and 7 (shoe color), and sprite index in fields 8 (item) and 5 (shoe color). The default textures are <samp>Maps/springobjects</samp> (item) and <samp>Characters/Farmer/shoeColors</samp> (shoe color).</small>
</td></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Crop_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Crop data（页面不存在）">crops</a>
</td>
<td><small><i>not technically an item type</i></small>
</td>
<td><samp>Data/Crops</samp><br /><small>Each crop can set a custom texture name and sprite index. The default texture is <samp>TileSheets/crops</samp>.</small>
</td></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Fish_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Fish data（页面不存在）">fish (in fish tanks)</a>
</td>
<td><small><i>not technically an item type</i></small>
</td>
<td><samp>Data/AquariumFish</samp><br /><small>Each fish can set a custom aquarium texture name in field 6, and sprite index in field 0. The default texture is <samp>LooseSprites/AquariumFish</samp>.</small>
</td></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">furniture</a>
</td>
<td><samp>(F)</samp>
</td>
<td><samp>Data/Furniture</samp><br /><small>Each item can set a custom texture name in field 9, and sprite index in field 8. The default texture is <samp>TileSheets/furniture</samp>.</small>
</td></tr>
<tr>
<td>fruit trees
</td>
<td><small><i>not technically an item type</i></small>
</td>
<td><samp>Data/FruitTrees</samp><br /><small>Each fruit tree can set a custom texture name and sprite index. The default texture is <samp>TileSheets/fruitTrees</samp>.</small>
</td></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">hats</a>
</td>
<td><samp>(H)</samp>
</td>
<td><samp>Data/Hats</samp><br /><small>Each item can set a custom texture name in field 7, and sprite index in field 6. The default texture is <samp>Characters/Farmer/hats</samp>.</small>
</td></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">objects</a>
</td>
<td><samp>(O)</samp>
</td>
<td><samp>Data/Objects</samp><br /><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The default texture is <samp>Maps/springobjects</samp>.</small>
</td></tr>
<tr>
<td><a href="#Custom_pants">pants</a>
</td>
<td><samp>(P)</samp>
</td>
<td><samp>Data/pantsData</samp><br /><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The default texture is <samp>Characters/Farmer/pants</samp>.</small>
</td></tr>
<tr>
<td><a href="#Custom_shirts">shirts</a>
</td>
<td><samp>(S)</samp>
</td>
<td><samp>Data/shirtData</samp><br /><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The default texture is <samp>Characters/Farmer/shirts</samp>.</small>
<p><small>Shirt textures must be exactly 256 pixels wide, divided into two halves: the left half for the shirt sprites, and the right half for any dye masks. The remaining space can be left blank if needed.</small>
</p>
<pre>      sprites       dye masks
   /-----------\  /-----------\
┌────────────────────────────────┐
│ ┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐ │
│ │ 0 ││ 1 ││ 2 ││ a ││ b ││ c │ │
│ └───┘└───┘└───┘└───┘└───┘└───┘ │
│ ┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐ │
│ │ 3 ││ 4 ││ 5 ││ d ││ e ││ f │ │
│ └───┘└───┘└───┘└───┘└───┘└───┘ │
└────────────────────────────────┘
</pre>
</td></tr>
<tr>
<td><a href="#Custom_tools">tools</a>
</td>
<td><samp>(T)</samp>
</td>
<td><samp>Data/Tools</samp><br /><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The vanilla tools use the <samp>TileSheets/Tools</samp> texture.</small>
</td></tr>
<tr>
<td>Wallpaper &amp; floorpaper
</td>
<td><samp>(WP)</samp> and <samp>(FL)</samp>
</td>
<td><samp>Data/AdditionalWallpaperFlooring</samp><br /><small>See <a href="/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.5.5&amp;action=edit&amp;redlink=1" class="new" title="Modding:Migrate to Stardew Valley 1.5.5（页面不存在）">format docs</a>.</small>
</td></tr>
<tr>
<td><a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">weapons</a>
</td>
<td><samp>(W)</samp>
</td>
<td><samp>Data/Weapons</samp><br /><small><a href="#Custom_melee_weapons">Completely overhauled</a> into a data model.</small>
</td></tr></tbody></table>
<p>When resolving an unqualified item ID like <samp>128</samp>, the game will get the first item type for which it exists in this order: object, big craftable, furniture, weapon, boots, hat, pants, shirt, tool, wallpaper, and floorpaper.
</p>
<h4><span class="mw-headline" id="Define_a_custom_item">Define a custom item</span></h4>
<p>You can define custom items for most vanilla item types using only <a href="/mediawiki/index.php?title=Modding:Content_Patcher&amp;action=edit&amp;redlink=1" class="new" title="Modding:Content Patcher（页面不存在）">Content Patcher</a> or <a href="/mediawiki/index.php?title=Modding:Modder_Guide/APIs/Content&amp;action=edit&amp;redlink=1" class="new" title="Modding:Modder Guide/APIs/Content（页面不存在）">SMAPI's content API</a>.
</p><p>Most item data assets work just like <samp>Data/Objects</samp>. See also specific info for <a href="#Custom_fruit_trees">custom fruit trees</a>, <a href="#Custom_tools">custom tools</a>, and <a href="#Custom_melee_weapon_data">melee weapons</a>.
</p>
<h4><span class="mw-headline" id="Error_items">Error items</span></h4>
<p>In-game items with no underlying data (e.g. because you removed the mod which adds them) would previously cause issues like invisible items, errors, and crashes. This was partly mitigated by the bundled Error Handler mod.
</p><p>Stardew Valley 1.6 adds comprehensive handling for such items. They'll be shown with a <samp>🛇</samp> sprite in inventory UIs and in-game, the name Error Item, and a description which indicates the missing item ID for troubleshooting.
</p>
<h4><span id="For_C#_mods"></span><span class="mw-headline" id="For_C.23_mods">For C# mods</span></h4>
<p>Stardew Valley 1.6 added new ways to compare/construct items, define custom item types, and work with item metadata. Please see <a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Modding:Items</a> for the migrated docs.
</p>
<h3><span class="mw-headline" id="Custom_big_craftables">Custom big craftables</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Modding:Items#Big craftables</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now create/edit <a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">big craftables</a> by editing the new <samp>Data/BigCraftables</samp> asset, which replaces the previous slash-delimited <samp>Data/BigCraftablesInformation</samp>.
</p><p>Besides the format change, this adds...
</p>
<ul><li>context tags (moved from the former <samp>Data/ObjectContextTags</samp> asset);</li>
<li><a href="#Custom_data_fields">custom fields</a> to let framework mods support additional features.</li></ul>
<h3><span class="mw-headline" id="Custom_crops">Custom crops</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Crop_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Crop data（页面不存在）">Modding:Crop data</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p><a href="/mediawiki/index.php?title=Modding:Crop_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Crop data（页面不存在）">Crops</a> are still stored in <samp>Data/Crops</samp>, but that asset has been overhauled in Stardew Valley 1.6. The slash-delimited entries are now models to simplify edits and enable new features.
</p>
<h3><span class="mw-headline" id="Custom_fences">Custom fences</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Fences&amp;action=edit&amp;redlink=1" class="new" title="Modding:Fences（页面不存在）">Modding:Fences</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now add or customize <a href="/mediawiki/index.php?title=Crafting&amp;action=edit&amp;redlink=1" class="new" title="Crafting（页面不存在）">fences</a> by editing the <samp>Data/Fences</samp> asset.
</p>
<h3><span id="Custom_floors_(craftable)_&amp;_paths"></span><span class="mw-headline" id="Custom_floors_.28craftable.29_.26_paths">Custom floors (craftable) &amp; paths</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Floors_and_Paths&amp;action=edit&amp;redlink=1" class="new" title="Modding:Floors and Paths（页面不存在）">Modding:Floors and Paths</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now add or customize <a href="/mediawiki/index.php?title=Crafting&amp;action=edit&amp;redlink=1" class="new" title="Crafting（页面不存在）">craftable floors &amp; paths</a> by editing the <samp>Data/FloorsAndPaths</samp> asset. See the new doc page for formatting information.
</p>
<h3><span class="mw-headline" id="Custom_machines">Custom machines</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Machines&amp;action=edit&amp;redlink=1" class="new" title="Modding:Machines（页面不存在）">Modding:Machines</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now add/edit machine logic by editing the <samp>Data/Machines</samp> asset. This supports the full range of vanilla functionality, including calling custom code define in C# mods.
</p><p>For C# mods, 1.6 also adds a new <samp>MachineDataUtility</samp> class and various <samp>Object</samp> to simplify working with machines in code. These are used by the game code itself to implement the base machine logic.
</p>
<h3><span class="mw-headline" id="Custom_melee_weapons">Custom melee weapons</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Modding:Items#Weapons</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p><a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Melee weapons</a> are still stored in <samp>Data/Weapons</samp>, but that asset has been overhauled in Stardew Valley 1.6. The slash-delimited entries are now models to simplify edits and enable new features (like the new <samp>Projectiles</samp> feature).
</p>
<h3><span class="mw-headline" id="Custom_movie_concessions">Custom movie concessions</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Movie_theater_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Movie theater data（页面不存在）">Modding:Movie theater data</a>的最新文档。本节仅描述1.6的更新内容。</div>
<dl><dd><i>See also: <a href="#Custom_movies">custom movies</a>.</i></dd></dl>
<p>You could already <a href="/mediawiki/index.php?title=Modding:Movie_theater_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Movie theater data（页面不存在）">add/edit concessions</a> sold in the <a href="/mediawiki/index.php?title=Movie_Theater&amp;action=edit&amp;redlink=1" class="new" title="Movie Theater（页面不存在）">movie theater</a>, but conflicts were likely since each concession had an incrementing numeric ID which matched its position in the vanilla tilesheet.
</p><p>Stardew Valley 1.6 addresses that with two changes:
</p>
<ul>
<li>The <samp>Id</samp> field is now a <a href="/mediawiki/index.php?title=Modding:Common_data_field_types&amp;action=edit&amp;redlink=1" class="new" title="Modding:Common data field types（页面不存在）">unique string ID</a>.</li>
<li>You can now use a different texture with two new required fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture containing the concession's sprite.
</td></tr>
<tr>
<td><samp>SpriteIndex</samp>
</td>
<td>The index within the <samp>Texture</samp> for the concession sprite, where 0 is the top-left sprite.
</td></tr></tbody></table>
</li>
</ul>
<h3><span id="Custom_museum_donations_&amp;_rewards"></span><span class="mw-headline" id="Custom_museum_donations_.26_rewards">Custom museum donations &amp; rewards</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Museum&amp;action=edit&amp;redlink=1" class="new" title="Modding:Museum（页面不存在）">Modding:Museum</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now add/edit the items which the <a href="/mediawiki/index.php?title=Museum&amp;action=edit&amp;redlink=1" class="new" title="Museum（页面不存在）">museum</a> gives back in rewards through the new <samp>Data/MuseumRewards</samp> data asset.
</p><p>The <i>A Complete Collection</i> <a href="/mediawiki/index.php?title=Achievements&amp;action=edit&amp;redlink=1" class="new" title="Achievements（页面不存在）">achievement</a> is automatically adjusted to require any custom donations added too. This is based on the number of donated items though, so removing custom donations later may incorrectly mark the museum complete (since you may have donated enough items to meet the total required).
</p>
<h3><span class="mw-headline" id="Custom_fruit_trees">Custom fruit trees</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Fruit_trees&amp;action=edit&amp;redlink=1" class="new" title="Modding:Fruit trees（页面不存在）">Modding:Fruit trees</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now add custom <a href="/mediawiki/index.php?title=Fruit_Trees&amp;action=edit&amp;redlink=1" class="new" title="Fruit Trees（页面不存在）">fruit trees</a> by editing the revamped <samp>Data/FruitTrees</samp> asset.
</p><p>For C# mods, the <samp>fruitsOnTree</samp> field (number of fruit on the tree) has been replaced by <samp>fruit</samp> (list of fruit items).
</p><p>Custom trees can be added to the game in two ways:
</p>
<ul><li>Spawn them on <a href="/mediawiki/index.php?title=Modding:Maps&amp;action=edit&amp;redlink=1" class="new" title="Modding:Maps（页面不存在）">map tiles</a> when the location is created, using the new <samp>SpawnTree: fruit <code title="必需字段 &#39;tree ID&#39;">&lt;tree ID&gt;</code> <code title="可选字段 &#39;growth stage on location created&#39;">[growth stage on location created]</code> <code title="可选字段 &#39;growth stage on day-update regrowth&#39;">[growth stage on day-update regrowth]</code></samp> tile property. This must be added on the <samp>Paths</samp> layer, which must also have tile index 34 from the <samp>paths</samp> tilesheet.</li>
<li>Or give the player a seed item in the usual ways (e.g. from <a href="#Custom_shops">a shop</a>, <a href="/mediawiki/index.php?title=Modding:Mail_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Mail data（页面不存在）">mail letter</a>, etc).</li></ul>
<h3><span class="mw-headline" id="Custom_objects">Custom objects</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Modding:Items#Objects</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now create/edit objects (the main item type) by editing the new <samp>Data/Objects</samp> asset, which replaces the previous slash-delimited <samp>Data/objectInformation</samp>.
</p><p>Besides the format change, this adds...
</p>
<ul><li>support for custom textures;</li>
<li>revamped geode drops with support for conditions, probabilities, and item queries;</li>
<li>expanded food/drink buffs (e.g. set a custom buff ID, add a custom buff icon, etc);</li>
<li>context tags (moved from the former <samp>Data/ObjectContextTags</samp> asset);</li>
<li><a href="#Custom_data_fields">custom fields</a> to let framework mods support additional features.</li></ul>
<h3><span class="mw-headline" id="Custom_pants">Custom pants</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Modding:Items#Pants</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now create/edit <a href="/mediawiki/index.php?title=Tailoring&amp;action=edit&amp;redlink=1" class="new" title="Tailoring（页面不存在）">pants</a> by editing the new <samp>Data/Pants</samp> asset, which replaces <samp>Data/clothingInformation</samp>.
</p>
<h3><span class="mw-headline" id="Custom_shirts">Custom shirts</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Modding:Items#Shirts</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now create/edit <a href="/mediawiki/index.php?title=Tailoring&amp;action=edit&amp;redlink=1" class="new" title="Tailoring（页面不存在）">shirts</a> by editing the new <samp>Data/Shirts</samp> asset, which replaces <samp>Data/clothingInformation</samp>.
</p>
<h3><span class="mw-headline" id="Custom_tools">Custom tools</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Modding:Items#Tools</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now create/edit <a href="/mediawiki/index.php?title=Tools&amp;action=edit&amp;redlink=1" class="new" title="Tools（页面不存在）">tools</a> by editing the new <samp>Data/Tools</samp> asset. Note that drawing the tool correctly in the world (ie, while the player is trying to use it) probably still needs custom code.
</p>
<h3><span class="mw-headline" id="Custom_wild_trees">Custom wild trees</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Wild_trees&amp;action=edit&amp;redlink=1" class="new" title="Modding:Wild trees（页面不存在）">Modding:Wild trees</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now create/edit <a href="/mediawiki/index.php?title=Trees&amp;action=edit&amp;redlink=1" class="new" title="Trees（页面不存在）">wild trees</a> by editing the <samp>Data/WildTrees</samp> asset.
</p><p>Custom trees can be added to the game in two ways:
</p>
<ul><li>Spawn them on <a href="/mediawiki/index.php?title=Modding:Maps&amp;action=edit&amp;redlink=1" class="new" title="Modding:Maps（页面不存在）">map tiles</a> when the location is created, using the new <samp>SpawnTree: wild <code title="必需字段 &#39;tree ID&#39;">&lt;tree ID&gt;</code> <code title="可选字段 &#39;growth stage on location created&#39;">[growth stage on location created]</code> <code title="可选字段 &#39;growth stage on day-update regrowth&#39;">[growth stage on day-update regrowth]</code></samp> tile property. This must be added on the <samp>Paths</samp> layer, which must also have tile index 34 from the <samp>paths</samp> tilesheet.</li>
<li>Or give the player a seed item in the usual ways (e.g. from <a href="#Custom_shops">a shop</a>, <a href="/mediawiki/index.php?title=Modding:Mail_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Mail data（页面不存在）">mail letter</a>, etc).</li></ul>
<h3><span class="mw-headline" id="Default_recipes">Default recipes</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Recipe_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Recipe data（页面不存在）">Modding:Recipe data</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>You can now have <a href="/mediawiki/index.php?title=Modding:Recipe_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Recipe data（页面不存在）">crafting and cooking recipes</a> that are learned automatically by setting the condition field to <samp>default</samp>. Any missing default recipes will be learned on day start.
</p><p>For example, here's the chest entry from <samp>Data/CraftingRecipes</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Chest&quot;</span><span class="o">:</span> <span class="s2">&quot;388 50/Home/130/true/default/&quot;</span>
</pre></div>
<h3><span class="mw-headline" id="Global_inventories">Global inventories</span></h3>
<p>C# mods can now set a <samp>chest.GlobalInventoryId</samp> field to make it share a global inventory with every other chest having the same ID. This replaces the equivalent hardcoded logic for <a href="/mediawiki/index.php?title=Junimo_Chest&amp;action=edit&amp;redlink=1" class="new" title="Junimo Chest（页面不存在）">Junimo chests</a>, which now just default to a <samp>"JunimoChests"</samp> global inventory ID. For example, this can be used to have multiple Junimo chest networks or make other containers share inventory.
</p><p>C# mods can also use this to store items for other mod purposes, by using <samp>Game1.player.team.globalInventories</samp> or <samp>Game1.player.team.GetOrCreateGlobalInventory(id)</samp> directly.
</p>
<h3><span class="mw-headline" id="Hats_on_aquarium_fish">Hats on aquarium fish</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Fish_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Fish data（页面不存在）">Modding:Fish data</a>的最新文档。本节仅描述1.6的更新内容。</div>
<p>Custom <a href="/mediawiki/index.php?title=Modding:Fish_data&amp;action=edit&amp;redlink=1" class="new" title="Modding:Fish data（页面不存在）">fish in aquariums</a> can now wear <a href="/mediawiki/index.php?title=Hats&amp;action=edit&amp;redlink=1" class="new" title="Hats（页面不存在）">hats</a>, just like vanilla <a href="/mediawiki/index.php?title=Sea_Urchin&amp;action=edit&amp;redlink=1" class="new" title="Sea Urchin（页面不存在）">sea urchins</a>. This can be enabled by specifying a new field in <samp>Data/AquariumFish</samp>:
</p>
<table class="wikitable">

<tbody><tr>
<th>index
</th>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td>7
</td>
<td>hat position
</td>
<td>The pixel position of the hat on the sprite, specified as an object with <samp>X</samp> and <samp>Y</samp> values.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Context_tag_changes">Context tag changes</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Modding:Items#Context tags</a>的最新文档。本节仅描述1.6的更新内容。</div>
<h4><span class="mw-headline" id="New_context_tags">New context tags</span></h4>
<p>1.6 adds several new <a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">item context tags</a>:
</p>
<table class="wikitable">

<tbody><tr>
<th>context tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>campfire_item</samp>
</td>
<td>Marks the item as a <a href="/mediawiki/index.php?title=Campfire&amp;action=edit&amp;redlink=1" class="new" title="Campfire（页面不存在）">campfire</a>. If the item also has the <samp>torch_item</samp> context tag, when it's placed in the world and turned on...
<ul><li>campfire flames are drawn over it;</li>
<li>if the item is <a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">big craftable</a>, light is emitted from its center instead of the top.</li></ul>
</td></tr>
<tr>
<td><samp>fish_pond_ignore</samp>
</td>
<td>Prevents players from adding this fish to <a href="/mediawiki/index.php?title=Fish_Pond&amp;action=edit&amp;redlink=1" class="new" title="Fish Pond（页面不存在）">fish ponds</a>, even if it would otherwise match an entry in <samp>Data/FishPondData</samp>.
</td></tr>
<tr>
<td><samp>geode_crusher_ignored</samp>
</td>
<td>Prevents breaking this item open in a <a href="/mediawiki/index.php?title=Geode_Crusher&amp;action=edit&amp;redlink=1" class="new" title="Geode Crusher（页面不存在）">geode crusher</a>, even if the item has geode fields in <a href="#Custom_objects"><samp>Data/Objects</samp></a>.
</td></tr>
<tr>
<td><samp>item_type_<code title="必需字段 &#39;type&#39;">&lt;type&gt;</code></samp>
</td>
<td>For an <a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">object-type item</a>, the type value from the 'type and category' field. (Non-object items always have the exact tag <samp>item_type_</samp> with nothing after the last underscore.) This is automatic and shouldn't be set manually. The tag is checked in a few places (<i>e.g.</i> the <a href="/mediawiki/index.php?title=Museum&amp;action=edit&amp;redlink=1" class="new" title="Museum（页面不存在）">museum</a> to check if an item is an artifact or mineral), but most of the game won't be affected.
</td></tr>
<tr>
<td><samp>museum_donatable</samp><br /><samp>not_museum_donatable</samp>
</td>
<td>Set whether the item can be donated to the <a href="/mediawiki/index.php?title=Museum&amp;action=edit&amp;redlink=1" class="new" title="Museum（页面不存在）">museum</a>, overriding the vanilla logic.
</td></tr>
<tr>
<td><samp>not_giftable</samp>
</td>
<td>Prevents players from gifting this item to NPCs, who'll ignore the item entirely (e.g. as if you were holding a tool).
<p>This only affects gift-giving, it doesn't affect non-gift logic like quest goals or special order objectives. If the NPC also has a <samp>reject_*</samp> dialogue for the item, the dialogue takes priority.
</p>
</td></tr>
<tr>
<td><samp>not_placeable</samp><br /><samp>placeable</samp>
</td>
<td>Sets whether the item can be placed on the ground.
</td></tr>
<tr>
<td><samp>prevent_loss_on_death</samp>
</td>
<td>Indicates the item can't be <a href="/mediawiki/index.php?title=Adventurer%27s_Guild&amp;action=edit&amp;redlink=1" class="new" title="Adventurer&#39;s Guild（页面不存在）">lost when the player dies</a>.
</td></tr>
<tr>
<td><samp>sign_item</samp>
</td>
<td>Marks the item as a <a href="/mediawiki/index.php?title=Crafting&amp;action=edit&amp;redlink=1" class="new" title="Crafting（页面不存在）">sign</a>, which lets player display items on it or place it on a <a href="/mediawiki/index.php?title=Fish_Pond&amp;action=edit&amp;redlink=1" class="new" title="Fish Pond（页面不存在）">fish pond</a> to show the fish count.
</td></tr>
<tr>
<td><samp>torch_item</samp>
</td>
<td>Marks the item as a <a href="/mediawiki/index.php?title=Torch&amp;action=edit&amp;redlink=1" class="new" title="Torch（页面不存在）">torch</a>, which lets the player turn it on/off to emit light.
<p>See also <samp>campfire_item</samp>.
</p>
</td></tr></tbody></table>
<p>Context tags which affect <a href="#Custom_machines">machine processing</a>:
</p>
<table class="wikitable">

<tbody><tr>
<th>context tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>crystalarium_banned</samp>
</td>
<td>When applied to a gem or mineral item, prevents players from placing it in a <a href="/mediawiki/index.php?title=Crystalarium&amp;action=edit&amp;redlink=1" class="new" title="Crystalarium（页面不存在）">crystalarium</a>.
</td></tr>
<tr>
<td><samp>keg_juice</samp><br /><samp>keg_wine</samp>
</td>
<td>Allows processing the item in a <a href="/mediawiki/index.php?title=Keg&amp;action=edit&amp;redlink=1" class="new" title="Keg（页面不存在）">keg</a> to produce a juice or wine variant.
</td></tr>
<tr>
<td><samp>preserves_jelly</samp><br /><samp>preserves_pickle</samp>
</td>
<td>Allows processing the item in a <a href="/mediawiki/index.php?title=Preserves_Jar&amp;action=edit&amp;redlink=1" class="new" title="Preserves Jar（页面不存在）">preserves jar</a> to produce a jelly or pickled variant.
</td></tr>
<tr>
<td><samp>seedmaker_banned</samp>
</td>
<td>When applied to a seed item, prevents players from placing it in a <a href="/mediawiki/index.php?title=Seed_Maker&amp;action=edit&amp;redlink=1" class="new" title="Seed Maker（页面不存在）">seed maker</a>.
</td></tr>
<tr>
<td><samp>tapper_item</samp>
</td>
<td>Marks the item as a <a href="/mediawiki/index.php?title=Tapper&amp;action=edit&amp;redlink=1" class="new" title="Tapper（页面不存在）">tapper</a> or <a href="/mediawiki/index.php?title=Heavy_Tapper&amp;action=edit&amp;redlink=1" class="new" title="Heavy Tapper（页面不存在）">heavy tapper</a>.
</td></tr>
<tr>
<td><samp>tapper_multiplier_<code title="必需字段 &#39;multiplier&#39;">&lt;multiplier&gt;</code></samp>
</td>
<td>The multiplier applied to the tapper production speed. For example, <samp>2</samp> will make items take half their base time (<i>i.e.</i> each item will finish in <sup>base time</sup>/<sub>speed multiplier</sub>). Defaults to 1 if omitted.
</td></tr></tbody></table>
<p>And informational tags which have no effect on the game logic:
</p>
<table class="wikitable">

<tbody><tr>
<th>context tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>fish_legendary</samp><br /><samp>fish_legendary_family</samp>
</td>
<td>Marks the fish as a <a href="/mediawiki/index.php?title=Fish&amp;action=edit&amp;redlink=1" class="new" title="Fish（页面不存在）">legendary fish</a> or <a href="/mediawiki/index.php?title=Quests&amp;action=edit&amp;redlink=1" class="new" title="Quests（页面不存在）">legendary fish family</a>. These are purely informational; the legendary fish behavior is determined by data fields like <samp>CatchLimit</samp> or <samp>IsBossFish</samp> in <a href="#Custom_locations"><samp>Data/Locations</samp></a>.
</td></tr>
<tr>
<td><samp>geode</samp>
</td>
<td><i>(Added automatically)</i> Marks the item as a <a href="/mediawiki/index.php?title=Minerals&amp;action=edit&amp;redlink=1" class="new" title="Minerals（页面不存在）">geode</a> item, which can be broken open at <a href="/mediawiki/index.php?title=Blacksmith&amp;action=edit&amp;redlink=1" class="new" title="Blacksmith（页面不存在）">Clint's blacksmith shop</a> or using a <a href="/mediawiki/index.php?title=Geode_Crusher&amp;action=edit&amp;redlink=1" class="new" title="Geode Crusher（页面不存在）">geode crusher</a>. This is added automatically if the geode fields are present in <a href="#Custom_objects"><samp>Data/Objects</samp></a>.
</td></tr>
<tr>
<td><samp>id_<code title="必需字段 &#39;item id&#39;">&lt;item id&gt;</code></samp>
</td>
<td><i>(Added automatically)</i> The <a href="#Custom_items">qualified item ID</a>, like <samp>id_(o)128</samp>. This can be used to match or exclude an item by ID using context tags. Any spaces in the ID are replaced with underscores, and single quotes are removed.
</td></tr>
<tr>
<td><samp>is_machine</samp>
</td>
<td><i>(Added automatically)</i> Indicates the item has <a href="#Custom_machines">machine logic</a>. This is added automatically based on <samp>Data/Machines</samp>.
</td></tr>
<tr>
<td><samp>machine_input</samp>
</td>
<td><i>(Added automatically)</i> Whether the item is a machine which accepts items from the player. This is added automatically based on the machine's fields in <samp>Data/Machines</samp>:
<ul><li>if <samp>HasInput</samp> is true;</li>
<li><i>or</i> if any output rules have an <samp>ItemPlacedInMachine</samp> trigger.</li></ul>
</td></tr>
<tr>
<td><samp>machine_output</samp>
</td>
<td><i>(Added automatically)</i> Whether the item is a machine which produces items for the player to collect. This is added automatically based on the machine's fields in <samp>Data/Machines</samp>:
<ul><li>if <samp>HasOutput</samp> is true;</li>
<li><i>or</i> if it has any output rules.</li></ul>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="ItemContextTagManager_class">ItemContextTagManager class</span></h4>
<p>For C# mods, 1.6 adds a new <samp>ItemContextTagManager</samp> class which simplifies working with <a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">item context tags</a> and reduces repeated code.
</p><p>This provides a few utility methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><code>GetBaseContextTags(id)</code>
</td>
<td>Get the base context tags for an item based on its raw data in <samp>Data/Objects</samp> or <samp>Data/BigCraftables</samp>. This doesn't include dynamic tags added that are based on instance info (like quality), which you can get using <code>item.GetContextTags()</code>.
</td></tr>
<tr>
<td><code>DoesTagQueryMatch(query, tags)</code>
</td>
<td>Get whether a context tag query matches the given tags. For example, <code>ItemContextTagManager.DoesTagQueryMatch("bone_item, !fossil_item", item.GetContextTags())</code> returns true if the item is a bone item but not a fossil (like the <a href="/mediawiki/index.php?title=Bone_Flute&amp;action=edit&amp;redlink=1" class="new" title="Bone Flute（页面不存在）">Bone Flute</a>).
</td></tr>
<tr>
<td><code>DoAllTagsMatch(requiredTags, actualTags)</code><br /><code>DoAnyTagsMatch(requiredTags, actualTags)</code>
</td>
<td>Get whether every (<samp>DoAllTagsMatch</samp>) or at least one (<samp>DoAnyTagsMatch&lt;/samp) required tag matches the actual item tags. This supports negated required tags like <samp>"!fossil_item"</samp> too.
</samp></td></tr>
<tr>
<td><code>DoesTagMatch(requiredTag, actualTags)</code>
</td>
<td>Get whether a single tag matches the actual item tags. This supports negated required tags like <samp>"!fossil_item"</samp> too.
</td></tr>
<tr>
<td><code>SanitizeContextTag(tag)</code>
</td>
<td><i>(Specialized)</i> Replace characters that may appear in item names so they're valid in context tags. For example, <code>SanitizeContextTag("Sam's Boombox")</code> returns <samp>sams_boombox</samp>.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Other_context_tag_changes">Other context tag changes</span></h4>
<ul><li>Context tags are now case-insensitive.</li></ul>
<h3><span class="mw-headline" id="Inventory_class">Inventory class</span></h3>
<p>For C# mods, 1.6 adds a new <samp>Inventory</samp> class to manage a list of items. This is used for the <samp>Farmer.items</samp> and <samp>Chest.items</samp> fields. It implements <samp>IList&lt;Item&gt;</samp>, so most existing code should still work fine.
</p><p>This has three main benefits:
</p>
<ul>
<li>It has methods to simplify many common operations. For example:
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><code>HasAny()</code>
</td>
<td>Get whether the inventory contains any items (ignoring empty slots).
</td></tr>
<tr>
<td><code>CountItemStacks()</code>
</td>
<td>Get the number of item stacks in the inventory (ignoring empty slots).
</td></tr>
<tr>
<td><code>ContainsId(id)</code>
</td>
<td>Get whether the inventory contains any item with the given qualified or unqualified item ID.
</td></tr>
<tr>
<td><code>ContainsId(id, minCount)</code>
</td>
<td>Get whether the inventory contains items with the given qualified or unqualified item ID, and their combined stack size is at least <samp>minCount</samp>.
</td></tr>
<tr>
<td><code>CountId(id)</code>
</td>
<td>Get the combined stack size of all items with the given qualified or unqualified item ID.
</td></tr>
<tr>
<td><code>GetById(id)</code>
</td>
<td>Get a list of items in the inventory with the given qualified or unqualified item ID.
</td></tr>
<tr>
<td><code>ReduceId(id, count)</code>
</td>
<td>Remove the given number of items matching the given qualified or unqualified item ID. This reduces the stack size for matching items until a total of <samp>count</samp> have been removed, and clears any slots which reach a stack size of zero.
</td></tr></tbody></table></li>
<li>Many common operations have been unified, so previously player-only methods can now be used with chests too.</li>
<li>It has an internal index by item ID, so operations like <code>items.ContainsId("(O)128")</code> are much more efficient since they no longer iterate the list.</li>
</ul>
<p>This replaces some previous methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>game class
</th>
<th>old code
</th>
<th>migration
</th></tr>
<tr>
<td rowspan="6"><samp>Farmer</samp>
</td>
<td><code>getItemCount(id)</code><br /><code>GetTallyOfObject(id)</code><br /><code>GetTallyOfObject(id, isBigCraftable)</code><br /><code>hasItemInInventory(id, count)</code><br /><code>hasItemInList(list, id, count)</code>
</td>
<td>&#32;
<ul><li>To check an item ID, use <code>items.CountId(id)</code> or <code>Items.ContainsId(id, count)</code>.</li>
<li>To check Golden Walnuts or Qi Gems, use the <samp>Game1.netWorldState.Value.GoldenWalnuts</samp> and <samp>Farmer.QiGems</samp> fields.</li>
<li>To check category matches or <samp>-777</samp> (seasonal wild seeds), the <samp>getItemCount</samp> and <samp>getItemCountInList</samp> still exist.</li></ul>
</td></tr>
<tr>
<td><code>hasItemInInventoryNamed(name)</code><br /><code>hasItemWithNameThatContains(name)</code>
</td>
<td>In most cases, you should match items by ID instead (see the previous row).
<p>If you really need to match items by name, you can replace it like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// exact name</span>
<span class="kt">bool</span> <span class="n">hasMatch</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">Any</span><span class="p">(</span><span class="n">item</span> <span class="p">=&gt;</span> <span class="n">item</span><span class="p">?.</span><span class="n">Name</span> <span class="p">==</span> <span class="n">name</span><span class="p">);</span>

<span class="c1">// name contains</span>
<span class="kt">bool</span> <span class="n">hasMatch</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">Any</span><span class="p">(</span><span class="n">item</span> <span class="p">=&gt;</span> <span class="n">item</span><span class="p">?.</span><span class="n">Name</span><span class="p">?.</span><span class="n">Contains</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">is</span> <span class="k">true</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><code>areAllItemsNull()</code>
</td>
<td>Use <code>!items.HasAny()</code>.
</td></tr>
<tr>
<td><code>numberOfItemsInInventory()</code>
</td>
<td>Use <code>items.CountItemStacks()</code> to count all items, or <code>Items.Count(p =&gt; p is Object)</code> to match this method's actual behavior.
</td></tr>
<tr>
<td><code>consumeObject(id, count)</code>
</td>
<td>Use <code>items.ReduceId(id, count)</code>.
</td></tr>
<tr>
<td><code>removeItemsFromInventory(id, count)</code>
</td>
<td>&#32;
<ul><li>To remove an item by ID, use <code>items.ReduceId(id, count)</code>.</li>
<li>To deduct Golden Walnuts or Qi Gems, change the <samp>Game1.netWorldState.Value.GoldenWalnuts</samp> and <samp>Farmer.QiGems</samp> fields.</li></ul>
</td></tr>
<tr>
<td rowspan="2"><samp>Object</samp>
</td>
<td><code>ConsumeInventoryItem(player, id, count)</code>
</td>
<td>This was somewhat specialized and shouldn't be called by mod code, but the equivalent would be <code>(Object.autoLoadChest&#160;?? player.items).ReduceId(id, count)</code>. See also notes for <samp>Farmer.removeItemsFromInventory</samp>.
</td></tr>
<tr>
<td><code>GetTallyOfObject(player, id)</code>
</td>
<td>This was somewhat specialized and shouldn't be called by mod code, but the equivalent would be <code>(Object.autoLoadChest&#160;?? player.items).CountId(id)</code>. See also notes for <samp>Farmer.getTallyOfObject</samp>.
</td></tr></tbody></table>
<p>It implements a new <samp>IInventory</samp> interface, which lets mods pass their own implementations to code which works on inventories.
</p>
<h3><span class="mw-headline" id="Furniture_changes">Furniture changes</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">参见位于<a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">Modding:Items#Furniture</a>的最新文档。本节仅描述1.6的更新内容。</div>
<ul>
<li><a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）"><samp>Data/furniture</samp></a> no longer has language variants. Translations were moved into <samp>Strings/Furniture</samp>.</li>
<li>
There are a few changes in <a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）"><samp>Data/furniture</samp></a>:
<ul>
<li>Field index 6 is now placement restrictions and field index 7 is now display name. The display name field is no longer omitted in English.</li>
<li>Field index 7 (display name) now allows <a href="/mediawiki/index.php?title=Modding:Tokenizable_strings&amp;action=edit&amp;redlink=1" class="new" title="Modding:Tokenizable strings（页面不存在）">tokenizable strings</a>.</li>
<li>Added new fields:

<table class="wikitable">

<tbody><tr>
<th>index
</th>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td>8
</td>
<td>sprite index
</td>
<td>The sprite index within the spritesheet texture to draw.
</td></tr>
<tr>
<td>9
</td>
<td>texture
</td>
<td><i>(Optional)</i> The asset name of the texture to draw. Defaults to <samp>TileSheets/furniture</samp>.
</td></tr>
<tr>
<td>10
</td>
<td>off limits for random sale
</td>
<td><i>(Optional)</i> Whether to prevent this furniture from appearing in randomly generated shop stocks and the furniture catalogue. Default false.
</td></tr>
<tr>
<td>11
</td>
<td>context tags
</td>
<td><i>(Optional)</i> A space-delimited list of <a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">context tags</a> which apply to this furniture. Default none.
</td></tr></tbody></table></li>
</ul>
</li>
</ul>
<h3><span id="Other_item_changes_for_C#_mods"></span><span class="mw-headline" id="Other_item_changes_for_C.23_mods">Other item changes for C# mods</span></h3>
<ul><li>Placed object changes:
<ul><li>Every placed object now has a <samp>Location</samp> property set to the location which contains it. This removes location parameters from many object methods.</li>
<li>Setting an object's tile position through <samp>obj.TileLocation</samp> now recalculcates its collision box automatically. (Setting it through the <samp>tileLocation</samp> net field directly won't though.)</li>
<li>The <samp>obj.IsScarecrow()</samp> and <samp>GetScarecrowRadius()</samp> methods now work for non-bigcraftable objects too.</li></ul></li>
<li>Clothing changes:
<ul><li><samp>Clothes.clothesType</samp> is now an enum field.</li>
<li>Clothing is no longer gender-specific. This renames <samp>indexInTileSheetMale</samp> to <samp>indexInTileSheet</samp>, obsoletes <samp>indexInTileSheetFemale</samp>, and converts gender-variant clothing into regular items.</li>
<li>Removed unused <samp>ClothesType.ACCESSORY</samp> value.</li>
<li><samp>Farmer.pants</samp> and <samp>Farmer.shirt</samp> now store the item ID instead of the sprite index.</li>
<li>In <samp>Data/TailoringRecipes</samp>, added a <samp>CraftingIdFeminine</samp> field which overrides <samp>CraftingId</samp> for female characters.</li></ul></li>
<li>Crop changes:
<ul><li>Added <samp>Game1.cropData</samp> to read crop info without constantly reloading the <samp>Data/Crops</samp> asset.</li>
<li>Removed most crop fields which only mirror the data (like <samp>harvestMethod</samp> or <samp>seasonsToGrowIn</samp>). Mods can get the info through <samp>crop.GetData()</samp> instead.</li>
<li>Partly de-hardcoded fertilizer logic. Almost all fertilizer logic is now centralized into a new patchable set of <samp>HoeDirt</samp> methods (see list below). The only fertilizer logic that's still embedded elsewhere is the interaction errors in <samp>Utility.tryToPlaceItem</samp>.</li>
<li>HoeDirt.fertilizer.Value is now set to <samp>null</samp> when there is no fertilizer. Both qualified and unqualified IDs should be expected.</li>
<li>Removed <samp>crop.InferSeedIndex()</samp>. This was used to support old crops, which are now fixed by a save migration instead.</li></ul></li>
<li>Tool changes:
<ul><li>Fixed various logic not handling custom tool upgrade levels.</li></ul></li></ul>
<ul>
<li>Other item logic:<ul>
<li>Simplified the constructors for many item types, particularly <samp>Object</samp>.</li>
<li><a href="/mediawiki/index.php?title=Honey&amp;action=edit&amp;redlink=1" class="new" title="Honey（页面不存在）">Honey</a> items now have their <samp>preserve</samp> field set to a new <samp>Honey</samp> type (instead of null).</li>
<li>The <samp>Object.performObjectDropInAction</samp> method now applies the <samp>probe</samp> argument much more consistently. This only affects method calls with <samp>probe: true</samp>.</li>
<li>The <samp>Item.salePrice()</samp> method now has option to get the price without <a href="/mediawiki/index.php?title=Multiplayer&amp;action=edit&amp;redlink=1" class="new" title="Multiplayer（页面不存在）">profit margins</a>.</li>
<li>Added new fields &amp; methods:

<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>field/method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Chest</samp>
</td>
<td><samp>GetItemsForPlayer()</samp>
</td>
<td>Shortcut for <samp>chest.GetItemsForPlayer(Game1.player.UniqueMultiplayerID)</samp>.
</td></tr>
<tr>
<td rowspan="2"><samp>Crop</samp>
</td>
<td><samp>GetHarvestMethod()</samp>
</td>
<td>Get the method used to harvest the crop (one of <samp>HarvestMethod.Grab</samp> or <samp>HarvestMethod.Scythe</samp>).
</td></tr>
<tr>
<td><samp>IsInSeason(location)</samp>
</td>
<td>Whether the crop can grow in the location's current season (or true if crops ignore seasons in the location, like the <a href="/mediawiki/index.php?title=Greenhouse&amp;action=edit&amp;redlink=1" class="new" title="Greenhouse（页面不存在）">greenhouse</a>).
</td></tr>
<tr>
<td rowspan="8"><samp>HoeDirt</samp>
</td>
<td><samp>HasFertilizer()</samp>
</td>
<td>Get whether the dirt has any fertilizer applied.
</td></tr>
<tr>
<td><samp>CanApplyFertilizer(itemId)</samp>
</td>
<td>Get whether a player can apply the given fertilizer to this dirt.
</td></tr>
<tr>
<td><samp>CheckApplyFertilizerRules(itemId)</samp>
</td>
<td>Get whether a player can apply the given fertilizer to this dirt, and the reason they can't if applicable.
</td></tr>
<tr>
<td><samp>GetFertilizerSpeedBoost()</samp>
</td>
<td>Get the crop growth speed boost from fertilizers applied to this dirt.
</td></tr>
<tr>
<td><samp>GetFertilizerWaterRetentionChance()</samp>
</td>
<td>Get the water retention chance from fertilizers applied to this dirt, as a value between 0 (no change) and 1 (100% chance of staying watered).
</td></tr>
<tr>
<td><samp>GetFertilizerQualityBoostLevel()</samp>
</td>
<td>Get the quality boost level from fertilizers applied to this dirt, which influences the chance of producing a higher-quality crop.
</td></tr>
<tr>
<td><samp>GetFertilizerSourceRect()</samp>
</td>
<td>Get the pixel area within the dirt spritesheet to draw for any fertilizer applied to this dirt.
<p>(This method existed before, but no longer requires the fertilizer ID argument.)
</p>
</td></tr>
<tr>
<td><samp>isWatered()</samp>
</td>
<td>Get whether the dirt is currently watered.
</td></tr>
<tr>
<td rowspan="5"><samp>Item</samp>
</td>
<td><samp>IsRecipe</samp><br /><samp>Quality</samp><br /><samp>Stack</samp><br /><samp>sellToStorePrice(…)</samp>
</td>
<td>Equivalent to the previous <samp>Object</samp> fields/methods, to simplify common code and avoid needing to special-case <samp>Object</samp> items.
</td></tr>
<tr>
<td><samp>appliesProfitMargins()</samp>
</td>
<td>Get whether this item should apply <a href="/mediawiki/index.php?title=Multiplayer&amp;action=edit&amp;redlink=1" class="new" title="Multiplayer（页面不存在）">profit margins</a> to shop prices.
</td></tr>
<tr>
<td><samp>CanBeLostOnDeath()</samp>
</td>
<td>Get whether this item can be lost when the player dies, so it can be recovered from the <a href="/mediawiki/index.php?title=Adventurer%27s_Guild&amp;action=edit&amp;redlink=1" class="new" title="Adventurer&#39;s Guild（页面不存在）">item recovery service</a>.
</td></tr>
<tr>
<td><samp>HasTypeId(id)</samp><br /><samp>HasTypeObject()</samp><br /><samp>HasTypeBigCraftable()</samp>
</td>
<td>Get whether the item has the given <a href="#Custom_items">type definition ID</a>. These are null-safe and double as a null check:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">HasTypeId</span><span class="p">(</span><span class="n">ItemRegistry</span><span class="p">.</span><span class="n">type_object</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// item is non-null and has type (O)</span>
<span class="p">}</span>
</pre></div>
<p><samp>HasTypeObject()</samp> and <samp>HasTypeBigCraftable()</samp> are shortcuts for passing <samp>ItemRegistry.type_object</samp> and <samp>ItemRegistry.type_bigCraftable</samp> respectively.
</p>
</td></tr>
<tr>
<td><samp>TryGetTempData</samp><br /><samp>SetTempData</samp>
</td>
<td>Get or set temporary item info that's not synchronized in multiplayer or written to the save file.
<p>For example, the game uses this to pass spawn options to the fishing minigame:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">spawn</span><span class="p">.</span><span class="n">IsBossFish</span><span class="p">)</span>
    <span class="n">fish</span><span class="p">.</span><span class="n">SetTempData</span><span class="p">(</span><span class="n">nameof</span><span class="p">(</span><span class="n">spawn</span><span class="p">.</span><span class="n">IsBossFish</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span>

<span class="p">...</span>

<span class="n">fish</span><span class="p">.</span><span class="n">TryGetTempData</span><span class="p">(</span><span class="n">nameof</span><span class="p">(</span><span class="n">SpawnFishData</span><span class="p">.</span><span class="n">IsBossFish</span><span class="p">),</span> <span class="k">out</span> <span class="kt">bool</span> <span class="n">bossFish</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>FishingRod</samp>
</td>
<td><samp>CanUseBait()</samp><br /><samp>CanUseTackle()</samp><br /><samp>GetBait()</samp><br /><samp>GetTackle()</samp><br /><samp>HasMagicBait()</samp><br /><samp>HasCuriosityLure()</samp>
</td>
<td>Simplifies working with the fishing rod's <a href="/mediawiki/index.php?title=Bait&amp;action=edit&amp;redlink=1" class="new" title="Bait（页面不存在）">bait</a> and <a href="/mediawiki/index.php?title=Tackle&amp;action=edit&amp;redlink=1" class="new" title="Tackle（页面不存在）">tackle</a>.
</td></tr>
<tr>
<td rowspan="2"><samp>Furniture</samp>
</td>
<td><samp>SetPlacement</samp><br /><samp>SetHeldObject</samp>
</td>
<td>Set the furniture's position and rotation (<samp>SetPlacement</samp>) or held object (<samp>SetHeldObject</samp>). The latter will initialize the held object's tile position to match the furniture instance.
<p>These are used by the game to initialize furniture in one go. For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// oak table holding decorative bowl</span>
<span class="n">Furniture</span> <span class="n">table</span> <span class="p">=</span> <span class="n">ItemRegistry</span>
    <span class="p">.</span><span class="n">Create</span><span class="p">&lt;</span><span class="n">Furniture</span><span class="p">&gt;(</span><span class="s">&quot;(F)1120&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="n">SetPlacement</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">.</span><span class="n">SetHeldObject</span><span class="p">(</span><span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Create</span><span class="p">&lt;</span><span class="n">Furniture</span><span class="p">&gt;(</span><span class="s">&quot;(F)1364&quot;</span><span class="p">));</span>
</pre></div>
</td></tr>
<tr>
<td><samp>IsTable()</samp>
</td>
<td>Get whether this furniture is a table.
</td></tr>
<tr>
<td rowspan="2"><samp>FruitTree</samp>
</td>
<td><samp>GetQuality()</samp>
</td>
<td>Get the quality of fruit currently being produced by the fruit tree.
</td></tr>
<tr>
<td><samp>TryAddFruit()</samp>
</td>
<td>Add a fruit item to the tree based on <a href="#Custom_fruit_trees">its data</a>.
</td></tr>
<tr>
<td><samp>IndoorPot</samp>
</td>
<td><samp>Water()</samp>
</td>
<td>Simplifies watering dirt in the <a href="/mediawiki/index.php?title=Garden_Pot&amp;action=edit&amp;redlink=1" class="new" title="Garden Pot（页面不存在）">garden pot</a>.
</td></tr>
<tr>
<td><samp>Object</samp>
</td>
<td><samp>GetBoundingBox()</samp><br /><samp>GetBoundingBoxAt(x, y)</samp>
</td>
<td>Get the pixel collision area for the item placed in the world. These replace the former <samp>getBoundingBox(position)</samp> method.
</td></tr>
<tr>
<td><samp>Tool</samp>
</td>
<td><samp>isScythe()</samp>
</td>
<td>Equivalent to the previous <samp>MeleeWeapon</samp> method, to simplify common code and avoid needing to special-case <samp>MeleeWeapon</samp> items.
</td></tr>
<tr>
<td rowspan="3"><samp>Tree</samp>
</td>
<td><samp>CheckForNewTexture()</samp>
</td>
<td>Reset the tree's texture if it would change based on <a href="#Custom_wild_trees">its data</a>.
</td></tr>
<tr>
<td><samp>GetMaxSizeHere</samp>
</td>
<td>Get the maximum size the tree can grow in its current position (e.g. accounting for nearby trees blocking growth).
</td></tr>
<tr>
<td><samp>IsGrowthBlockedByNearbyTree</samp>
</td>
<td>Get whether growth is blocked because it's too close to another fully-grown tree.
</td></tr></tbody></table>
</li>
<li>Modularized <samp>Object.CheckForAction</samp> to simplify mod patches.</li>
<li>Reworked <samp>Item.getOne()</samp> implementation to avoid common pitfalls. (This only affects mods with custom item classes, or which patch <samp>Item.getOne</samp> or <samp>Item._GetOneFrom</samp>.)</li>
<li>Fixed fruit trees forgetting the growth stage set in their constructor when they're updated overnight.</li>
</ul>
<h3><span class="mw-headline" id="Other_item_changes">Other item changes</span></h3>
<ul><li>Added per-object display names (<i>e.g.</i> for custom flavored items). See the <samp>ObjectDisplayName</samp> <a href="/mediawiki/index.php?title=Modding:Item_queries&amp;action=edit&amp;redlink=1" class="new" title="Modding:Item queries（页面不存在）">item spawn field</a>, or <samp>object.displayNameFormat</samp> in C#.</li>
<li><a href="/mediawiki/index.php?title=Ginger_Island&amp;action=edit&amp;redlink=1" class="new" title="Ginger Island（页面不存在）">Item pedestals</a> are now normal item, so you can spawn them using a mod like CJB Item Spawner to display items.</li>
<li>Added optional <samp>Condition</samp> <a href="/mediawiki/index.php?title=Modding:Game_state_queries&amp;action=edit&amp;redlink=1" class="new" title="Modding:Game state queries（页面不存在）">game state query</a> field to <samp>Data/SpecialOrders</samp>.</li>
<li>Item data changes:
<ul><li>The display name field now exists in English too for <samp>Data/Boots</samp>, <samp>Data/Bundles</samp>, <samp>Data/CookingRecipes</samp>, <samp>Data/CraftingRecipes</samp>, <samp>Data/Furniture</samp>, <samp>Data/Hats</samp>, and <samp>Data/Weapons</samp>.</li>
<li>The randomly spawned <a href="/mediawiki/index.php?title=The_Farm&amp;action=edit&amp;redlink=1" class="new" title="The Farm（页面不存在）">stones</a>, <a href="/mediawiki/index.php?title=The_Farm&amp;action=edit&amp;redlink=1" class="new" title="The Farm（页面不存在）">twigs</a>, and <a href="/mediawiki/index.php?title=Weeds&amp;action=edit&amp;redlink=1" class="new" title="Weeds（页面不存在）">weeds</a> have been formalized into <i>litter</i>. They all now have object type <samp>Litter</samp>, <a href="/mediawiki/index.php?title=Modding:Items&amp;action=edit&amp;redlink=1" class="new" title="Modding:Items（页面不存在）">category</a> -999 (<samp>StardewValley.Object.litterCategory</samp>), a relevant display name/description (like <i>Gold Stone</i> &amp; <i>Break apart to obtain gold ore</i> instead of <i>Stone</i> &amp; <i>...</i>), a price of 0 (not sellable), and edibility of -300 (inedible). This also adds all mine ore nodes to <samp>Data/Objects</samp>, so the game no longer creates invalid items to show their sprite. (Doing so in 1.6 will now show an Error Item sprite instead.)</li>
<li><a href="/mediawiki/index.php?title=Honey&amp;action=edit&amp;redlink=1" class="new" title="Honey（页面不存在）">Honey</a> items now have the <samp>honey_item</samp> context tag.</li>
<li>Shirts no longer have a dynamic numeric ID range; every valid shirt is now listed in <a href="#Custom_shirts"><samp>Data/Shirts</samp></a>.</li>
<li>You can now apply a custom buff ID when the item is eaten, via <samp>Data/Objects</samp>'s <samp>Buff</samp> field.</li>
<li>The type field in <samp>Data/Objects</samp> is no longer checked using substring matching (e.g. the game now uses <code>data.Type == "Fish"</code> instead of <code>typeAndCategory.Contains("Fish")</code>), which may impact mods which depended on that undocumented behavior.</li></ul></li>
<li>Crop changes:
<ul><li>Paddy crops now recheck for nearby water each day, so they'll update if you add/remove a building with water or change the map layout.</li>
<li>In <samp>Data/Crops</samp>, each harvest option is now self-contained. For example, you can set <samp>HarvestMinStack</samp> without <samp>ExtraHarvestChance</samp>.</li></ul></li>
<li>Fish changes:
<ul><li><samp>Data/Fish</samp> is no longer translated, so there's only one <samp>Data/Fish.xnb</samp> field. Fish display names are now taken from <samp>Data/Objects</samp>.</li>
<li>Added a new field (index 13) in <samp>Data/Fish</samp>, which sets whether the fish can be selected for the first-catch tutorial.</li></ul></li>
<li>Recipe changes in <samp>Data/CookingRecipes</samp> and <samp>Data/CraftingRecipes</samp>:
<ul><li>These assets no longer have language variants.</li>
<li>The display name now supports <a href="/mediawiki/index.php?title=Modding:Tokenizable_strings&amp;action=edit&amp;redlink=1" class="new" title="Modding:Tokenizable strings（页面不存在）">tokenizable strings</a>.</li>
<li>The display name can now be left blank to get it from the first item in the output list.</li></ul></li>
<li>Other item logic:
<ul><li>Missing recipes that should already be unlocked are now added to the player automatically on save load.</li>
<li><samp>Data/Bundles</samp> is now loaded later, so content packs can edit it reliably.</li>
<li>Chests with <samp>fridge: true</samp> are now treated as mini-fridges for the cooking menu.</li>
<li>Gift boxes can now contain multiple items.</li>
<li>Fixed furniture drawn over sitting players if it has no front texture.</li>
<li>Fixed tool being upgraded by Clint not affected by recursive item search logic.</li>
<li>Fixed <samp>tool.getOne()</samp> not copying the tool name.</li>
<li>Fixed cooking menu constantly creating hovered item if the item/recipe names don't match.</li></ul></li></ul></li></ul>
<!-- 
NewPP limit report
Cached time: 20250320075903
Cache expiry: 86400
Dynamic content: false
Complications: [vary‐user]
CPU time usage: 0.115 seconds
Real time usage: 0.123 seconds
Preprocessor visited node count: 1074/1000000
Post‐expand include size: 10164/2097152 bytes
Template argument size: 2545/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 11970/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   24.092      1 -total
 36.39%    8.766      1 Template:翻译
 30.17%    7.268      1 Template:Quote
 12.96%    3.123     21 模组:迁移至游戏本体1.6/doc_status
  7.36%    1.772      5 Template:T
  6.32%    1.522      1 Template:Stub
  5.61%    1.352      4 Template:O
  5.52%    1.329      1 Template:Collapse
  5.02%    1.210      1 Template:Modder_compatibility_header
  3.42%    0.823      1 Template:Content_Patcher_version
-->

<!-- Saved in parser cache with key zhwiki:pcache:idhash:3269-0!canonical!zh and timestamp 20250320075903 and revision id 49065
 -->
</div></div><div class="printfooter">取自“<a dir="ltr" href="https://zh.stardewvalleywiki.com/mediawiki/index.php?title=模组:迁移至游戏本体1.6&amp;oldid=49065">https://zh.stardewvalleywiki.com/mediawiki/index.php?title=模组:迁移至游戏本体1.6&amp;oldid=49065</a>”</div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/Special:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB" title="Special:页面分类">分类</a>：<ul><li><a href="/Category:%E6%9C%AA%E7%BF%BB%E8%AF%91%E7%9A%84%E9%A1%B5%E9%9D%A2" title="Category:未翻译的页面">未翻译的页面</a></li><li><a href="/Category:%E5%BE%85%E6%89%A9%E5%85%85%E9%A1%B5%E9%9D%A2" title="Category:待扩充页面">待扩充页面</a></li><li><a href="/Category:%E6%A8%A1%E7%BB%84" title="Category:模组">模组</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>导航菜单</h2>
	<div id="mw-head">
		<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-personal" class="vector-menu" aria-labelledby="p-personal-label" role="navigation" 
	 >
	<h3 id="p-personal-label">
		<span>个人工具</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="pt-createaccount"><a href="/mediawiki/index.php?title=Special:%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%88%B7&amp;returnto=%E6%A8%A1%E7%BB%84%3A%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" title="建议您创建一个账户并登录，但这不是强制的">创建账户</a></li><li id="pt-login"><a href="/mediawiki/index.php?title=Special:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&amp;returnto=%E6%A8%A1%E7%BB%84%3A%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" title="我们鼓励您登录；然而，这不是强制性的[o]" accesskey="o">登录</a></li></ul>
		
	</div>
</nav>


		<div id="left-navigation">
			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-namespaces" class="vector-menu vector-menu-tabs vectorTabs" aria-labelledby="p-namespaces-label" role="navigation" 
	 >
	<h3 id="p-namespaces-label">
		<span>名字空间</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="ca-nstab-模组" class="selected"><a href="/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6">模组</a></li><li id="ca-talk"><a href="/%E6%A8%A1%E7%BB%84_talk:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" rel="discussion" title="关于内容页面的讨论[t]" accesskey="t">讨论</a></li></ul>
		
	</div>
</nav>


			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-variants" class="vector-menu vector-menu-dropdown vectorMenu" aria-labelledby="p-variants-label" role="navigation" 
	 >
	<input type="checkbox" class="vector-menu-checkbox vectorMenuCheckbox" aria-labelledby="p-variants-label" />
	<h3 id="p-variants-label">
		<span>不转换</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="menu vector-menu-content-list"><li id="ca-varlang-0" class="selected"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh" lang="zh" hreflang="zh">不转换</a></li><li id="ca-varlang-1"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hans" lang="zh-Hans" hreflang="zh-Hans">简体</a></li><li id="ca-varlang-2"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hant" lang="zh-Hant" hreflang="zh-Hant">繁體</a></li><li id="ca-varlang-3"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-cn" lang="zh-Hans-CN" hreflang="zh-Hans-CN">大陆简体</a></li><li id="ca-varlang-4"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-hk" lang="zh-Hant-HK" hreflang="zh-Hant-HK">香港繁體</a></li><li id="ca-varlang-5"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-mo" lang="zh-Hant-MO" hreflang="zh-Hant-MO">澳門繁體</a></li><li id="ca-varlang-6"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-my" lang="zh-Hans-MY" hreflang="zh-Hans-MY">大马简体</a></li><li id="ca-varlang-7"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-sg" lang="zh-Hans-SG" hreflang="zh-Hans-SG">新加坡简体</a></li><li id="ca-varlang-8"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;variant=zh-tw" lang="zh-Hant-TW" hreflang="zh-Hant-TW">台灣正體</a></li></ul>
		
	</div>
</nav>


		</div>
		<div id="right-navigation">
			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-views" class="vector-menu vector-menu-tabs vectorTabs" aria-labelledby="p-views-label" role="navigation" 
	 >
	<h3 id="p-views-label">
		<span>视图</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="ca-view" class="collapsible selected"><a href="/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6">阅读</a></li><li id="ca-viewsource" class="collapsible"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;action=edit" title="本页面受到保护。您可以查看其源代码[e]" accesskey="e">查看源代码</a></li><li id="ca-history" class="collapsible"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;action=history" title="本页面过去的版本[h]" accesskey="h">查看历史</a></li></ul>
		
	</div>
</nav>


			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-cactions" class="vector-menu-empty emptyPortlet vector-menu vector-menu-dropdown vectorMenu" aria-labelledby="p-cactions-label" role="navigation" 
	 >
	<input type="checkbox" class="vector-menu-checkbox vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
	<h3 id="p-cactions-label">
		<span>更多</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="menu vector-menu-content-list"></ul>
		
	</div>
</nav>


			<div id="p-search" role="search">
	<h3 >
		<label for="searchInput">搜索</label>
	</h3>
	<form action="/mediawiki/index.php" id="searchform">
		<div id="simpleSearch">
			<input type="search" name="search" placeholder="搜索Stardew Valley Wiki" title="搜索Stardew Valley Wiki[f]" accesskey="f" id="searchInput"/>
			<input type="hidden" name="title" value="Special:搜索">
			<input type="submit" name="fulltext" value="搜索" title="搜索含这些文字的页面" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/>
			<input type="submit" name="go" value="前往" title="若相同标题存在，则直接前往该页面" id="searchButton" class="searchButton"/>
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a  title="访问首页" class="mw-wiki-logo" href="/Stardew_Valley_Wiki"></a>
	</div>
	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-navigation" class="vector-menu vector-menu-portal portal portal-first" aria-labelledby="p-navigation-label" role="navigation" 
	 >
	<h3 id="p-navigation-label">
		<span>导航</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="n-mainpage-description"><a href="/Stardew_Valley_Wiki" title="访问首页[z]" accesskey="z">首页</a></li><li id="n-recentchanges"><a href="/Special:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9" title="本wiki最近更改的列表[r]" accesskey="r">最近更改</a></li><li id="n-.E6.9C.AA.E7.BF.BB.E8.AF.91.E7.9A.84.E9.A1.B5.E9.9D.A2"><a href="/Category:%E6%9C%AA%E7%BF%BB%E8%AF%91%E7%9A%84%E9%A1%B5%E9%9D%A2">未翻译的页面</a></li><li id="n-.E5.B8.AE.E5.8A.A9:.E7.BC.96.E8.BE.91.E5.85.A5.E9.97.A8"><a href="/Help:%E7%BC%96%E8%BE%91%E5%85%A5%E9%97%A8">帮助:编辑入门</a></li><li id="n-randompage"><a href="/Special:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2" title="载入一个随机页面[x]" accesskey="x">随机页面</a></li></ul>
		
	</div>
</nav>


	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-链接" class="vector-menu vector-menu-portal portal" aria-labelledby="p-链接-label" role="navigation" 
	 >
	<h3 id="p-链接-label">
		<span>链接</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="n-.E5.AE.98.E6.96.B9.E7.BD.91.E7.AB.99"><a href="https://stardewvalley.net" rel="nofollow">官方网站</a></li><li id="n-.E5.AE.98.E6.96.B9.E8.AE.BA.E5.9D.9B"><a href="https://forums.stardewvalley.net/" rel="nofollow">官方论坛</a></li><li id="n-.E5.AE.98.E6.96.B9.E5.95.86.E5.93.81"><a href="https://www.stardewvalley.net/shop/" rel="nofollow">官方商品</a></li><li id="n-.E7.A4.BE.E4.BA.A4.E5.AA.92.E4.BD.93"><a href="https://www.stardewvalley.net/links/" rel="nofollow">社交媒体</a></li></ul>
		
	</div>
</nav>

<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-tb" class="vector-menu vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation" 
	 >
	<h3 id="p-tb-label">
		<span>工具</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere"><a href="/Special:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" title="所有链接至本页面的wiki页面的列表[j]" accesskey="j">链入页面</a></li><li id="t-recentchangeslinked"><a href="/Special:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6" rel="nofollow" title="链自本页的页面的最近更改[k]" accesskey="k">相关更改</a></li><li id="t-upload"><a href="//stardewvalleywiki.com/Special:Upload" title="上传文件[u]" accesskey="u">上传文件</a></li><li id="t-specialpages"><a href="/Special:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="所有特殊页面的列表[q]" accesskey="q">特殊页面</a></li><li id="t-print"><a href="javascript:print();" rel="alternate" title="本页面的可打印版本[p]" accesskey="p">可打印版本</a></li><li id="t-permalink"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;oldid=49065" title="本页面该版本的固定链接">固定链接</a></li><li id="t-info"><a href="/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;action=info" title="关于此页面的更多信息">页面信息</a></li></ul>
		
	</div>
</nav>


	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-lang" class="vector-menu vector-menu-portal portal" aria-labelledby="p-lang-label" role="navigation" 
	 >
	<h3 id="p-lang-label">
		<span>其他语言</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li class="interlanguage-link interwiki-en"><a href="https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.6" title="Modding:Migrate to Stardew Valley 1.6 – English" lang="en" hreflang="en" class="interlanguage-link-target">English</a></li></ul>
		
	</div>
</nav>


</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info" >
		<li id="footer-info-lastmod"> 此页面最后编辑于2024年10月1日 (星期二) 15:24。</li>
		<li id="footer-info-copyright">除非另有声明，本网站内容采用<a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike</a>授权。</li>
	</ul>
	<ul id="footer-places" >
		<li id="footer-places-privacy"><a href="/Stardew_Valley_Wiki:%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96" title="Stardew Valley Wiki:隐私政策">隐私政策</a></li>
		<li id="footer-places-about"><a href="/Stardew_Valley_Wiki:%E5%85%B3%E4%BA%8E" title="Stardew Valley Wiki:关于">关于Stardew Valley Wiki</a></li>
		<li id="footer-places-disclaimer"><a href="/Stardew_Valley_Wiki:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="Stardew Valley Wiki:免责声明">免责声明</a></li>
		<li id="footer-places-mobileview"><a href="//zh.stardewvalleywiki.com/mediawiki/index.php?title=%E6%A8%A1%E7%BB%84:%E8%BF%81%E7%A7%BB%E8%87%B3%E6%B8%B8%E6%88%8F%E6%9C%AC%E4%BD%931.6&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">手机版视图</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico"><a href="https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="/mediawiki/resources/assets/licenses/cc-by-nc-sa.png" alt="Creative Commons Attribution-NonCommercial-ShareAlike" width="88" height="31" loading="lazy"/></a></li>
		<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="/mediawiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/mediawiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /mediawiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
	</ul>
	<div style="clear: both;"></div>
</footer>



<script src="https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.115","walltime":"0.123","ppvisitednodes":{"value":1074,"limit":1000000},"postexpandincludesize":{"value":10164,"limit":2097152},"templateargumentsize":{"value":2545,"limit":2097152},"expansiondepth":{"value":5,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":11970,"limit":5000000},"timingprofile":["100.00%   24.092      1 -total"," 36.39%    8.766      1 Template:翻译"," 30.17%    7.268      1 Template:Quote"," 12.96%    3.123     21 模组:迁移至游戏本体1.6/doc_status","  7.36%    1.772      5 Template:T","  6.32%    1.522      1 Template:Stub","  5.61%    1.352      4 Template:O","  5.52%    1.329      1 Template:Collapse","  5.02%    1.210      1 Template:Modder_compatibility_header","  3.42%    0.823      1 Template:Content_Patcher_version"]},"cachereport":{"timestamp":"20250320075903","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":226});});</script></body></html>

