<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">


<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Modding:Machines - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"4cbe3be85c7c3c93f3b497c1","wgCSPNonce":!1,"wgCanonicalNamespace":"Modding","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":570,"wgPageName":"Modding:Machines","wgTitle":"Machines","wgCurRevisionId":171823,"wgRevisionId":171823,"wgArticleId":16460,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Modding:Machines","wgRelevantArticleId":16460,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgMFMode":"stable","wgMFAmc":!1,"wgMFAmcOutreachActive":!1,
"wgMFAmcOutreachUserEligible":!1,"wgMFLazyLoadImages":!0,"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,"watchlist":!1,"tagline":!1},"wgMFIsPageContentModelEditable":!0,"wgCargoMapClusteringMinimum":80,"wgCargoMonthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"wgCargoMonthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgCargoWeekDays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"wgCargoWeekDaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"wgMinervaPermissions":{"watch":!0,"talk":!1},"wgMinervaFeatures":{"beta":!1,"donate":!0,"mobileOptionsLink":!0,"categories":!1,"pageIssues":!0,"talkAtTop":!1,"historyInPageActions":!1,"overflowSubmenu":!1,"tabsOnSpecials":!1,"personalMenu":!1,"mainMenuExpanded":!1,"simplifiedTalk":!0},"wgMinervaDownloadNamespaces":[0]};RLSTATE={
"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.minerva.base.styles":"ready","skins.minerva.content.styles":"ready","skins.minerva.content.styles.images":"ready","mediawiki.hlist":"ready","mediawiki.ui.icon":"ready","mediawiki.ui.button":"ready","skins.minerva.icons.wikimedia":"ready","skins.minerva.mainMenu.icons":"ready","skins.minerva.mainMenu.styles":"ready","mobile.init.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","skins.minerva.options","skins.minerva.scripts","mobile.init"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="mediawiki/loadaf7f.css?lang=en&amp;modules=ext.pygments%7Cmediawiki.hlist%7Cmediawiki.ui.button%2Cicon%7Cmobile.init.styles%7Cskins.minerva.base.styles%7Cskins.minerva.content.styles%7Cskins.minerva.content.styles.images%7Cskins.minerva.icons.wikimedia%7Cskins.minerva.mainMenu.icons%2Cstyles&amp;only=styles&amp;skin=minerva"/>
<script async="" src="mediawiki/loadc82b.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=minerva&amp;target=mobile"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="mediawiki/load1154.css?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=minerva"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="description" content="← Index"/>
<meta name="theme-color" content="#eaecf0"/>
<meta name="viewport" content="initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0, width=device-width"/>
<link rel="manifest" href="mediawiki/api-resultc989.json?action=webapp-manifest"/>
<link rel="shortcut icon" href="mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="mediawiki/api-result251f.xml?action=rsd"/>
<link rel="license" href="../creativecommons.org/licenses/by-nc-sa/3.0/index.html"/>
<meta property="og:title" content="Modding:Machines - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://stardewvalleywiki.com/Modding:Machines"/>
<meta property="og:description" content="← Index"/>
<meta property="og:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="article:modified_time" content="2024-05-29T06:38:07Z"/>
<meta property="article:published_time" content="2024-05-29T06:38:07Z"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="Modding:Machines - Stardew Valley Wiki"/>
<meta property="twitter:description" content="← Index"/>
<meta property="twitter:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"Modding:Machines - Stardew Valley Wiki","headline":"Modding:Machines - Stardew Valley Wiki","mainEntityOfPage":"Modding:Machines","identifier":"https:\/\/stardewvalleywiki.com\/Modding:Machines","url":"https:\/\/stardewvalleywiki.com\/Modding:Machines","description":"\u2190 Index","dateModified":"2024-05-29T06:38:07Z","datePublished":"2024-05-29T06:38:07Z","image":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-570 ns-subject page-Modding_Machines rootpage-Modding_Machines stable skin-minerva action-view skin-vector-legacy">
<div id="mw-mf-viewport">
	<div id="mw-mf-page-center">
		<a class="mw-mf-page-center__mask" href="#"></a>
		<header class="header-container header-chrome">
			<form class="header" action="../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php" method="get">
				<nav class="navigation-drawer toggle-list view-border-box">
					<input type="checkbox" id="main-menu-input" class="toggle-list__checkbox" role="button" aria-labelledby="mw-mf-main-menu-button">
					<label for="main-menu-input" id="mw-mf-main-menu-button"
						class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-menu-base20 mw-ui-icon-flush-left toggle-list__toggle"
						title="Open main menu" data-event-name="ui.mainmenu">Open main menu</label>
					<div id="mw-mf-page-left" class="menu toggle-list__list view-border-box">
	<ul id="p-navigation">
			<li class="">
			    <a href="Stardew_Valley_Wiki.html" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-home" data-event-name="menu.home"><span>Home</span></a>
			</li>
			<li class="">
			    <a href="Wizard_Bookshelf.html#/random" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-die " data-event-name="menu.random"><span>Random</span></a>
			</li>
	</ul>
	<ul id="p-personal">
			<li class="">
			    <a href="mediawiki/indexaece.html?title=Special:UserLogin&amp;returnto=Modding%3AMachines" class="menu__item--login mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-logIn " data-event-name="menu.login"><span>Log in</span></a>
			</li>
	</ul>
	<ul id="pt-preferences">
			<li class="jsonly">
			    <a href="mediawiki/indexf152-2.html?title=Special:MobileOptions&amp;returnto=Modding%3AMachines" class="menu__item--settings mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-settings " data-event-name="menu.settings"><span>Settings</span></a>
			</li>
	</ul>
	<ul class="hlist">
			<li class="">
			    <a href="Stardew_Valley_Wiki_About.html" class="" data-event-name=""><span>About Stardew Valley Wiki</span></a>
			</li>
			<li class="">
			    <a href="Stardew_Valley_Wiki_General_disclaimer.html" class="" data-event-name=""><span>Disclaimers</span></a>
			</li>
	</ul>
</div>

					<label class="main-menu-mask" for="main-menu-input"></label>
				</nav>
				<div class="branding-box">
					<a href="Stardew_Valley_Wiki.html">
						<span>Stardew Valley Wiki</span>
						
					</a>
				</div>
				<div class="search-box">
					<input class="search mw-ui-background-icon-search skin-minerva-search-trigger" type="search" name="search" id="searchInput"
						autocomplete="off" placeholder="Search Stardew Valley Wiki" aria-label="Search Stardew Valley Wiki"
						value="">
				</div>
				<nav class="minerva-user-navigation" aria-label="User navigation">
					<div><button id="searchIcon" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-search-base20 skin-minerva-search-trigger" type="submit">Search</button></div>
					
				</nav>
			</form>
		</header>
		<main id="content" class="mw-body">
			<div class="banner-container">
			<div id="siteNotice"></div>
			</div>
			
			<div class="pre-content heading-holder">
				<div class="page-heading">
					<h1 id="section_0">Modding:Machines</h1>
					<div class="tagline"></div>
				</div>
				<nav class="page-actions-menu">
	<ul id="page-actions" class="page-actions-menu__list">
		<li id="language-selector" class="page-actions-menu__list-item">
				<a id="" href="#" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-language-base20 mw-ui-icon-with-label-desktop language-selector disabled"
					data-mw="interface"
					data-event-name="menu.languages" role="button" title="Language">Language</a>
		</li>
		<li id="page-actions-watch" class="page-actions-menu__list-item">
				<a id="ca-watch" href="mediawiki/indexaece.html?title=Special:UserLogin&amp;returnto=Modding%3AMachines" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-star-base20 mw-ui-icon-with-label-desktop watch-this-article mw-watchlink menu__item--page-actions-watch"
					data-mw="interface"
					data-event-name="menu.watch" role="button" title="Watch">Watch</a>
		</li>
		<li id="page-actions-edit" class="page-actions-menu__list-item">
				<a id="ca-edit" href="mediawiki/index77c1.html?title=Modding:Machines&amp;action=edit&amp;section=0" class="edit-page menu__item--page-actions-edit mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-editLock-base20 mw-ui-icon-with-label-desktop"
					data-mw="interface"
					data-event-name="menu.edit" role="button" title="Edit the lead section of this page">Edit</a>
		</li>
	</ul>
</nav>
<!-- version 1.0.2 (change every time you update a partial) -->

				
				
				<div class="minerva__subtitle"></div>
			</div>
			
			<div id="bodyContent" class="content"><div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><script>function mfTempOpenSection(id){var block=document.getElementById("mf-section-"+id);block.className+=" open-block";block.previousSibling.className+=" open-block";}</script><div class="mw-parser-output"><section class="mf-section-0" id="mf-section-0"><p>← <a href="Modding_Index.html" title="Modding:Index">Index</a>
</p><p>This page explains how add/edit machines in the game data. This is an advanced guide for modders.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Definitions"><span class="tocnumber">1</span> <span class="toctext">Definitions</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Data_format"><span class="tocnumber">2</span> <span class="toctext">Data format</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Item_processing_rules"><span class="tocnumber">2.1</span> <span class="toctext">Item processing rules</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Behavior_tweaks"><span class="tocnumber">2.2</span> <span class="toctext">Behavior tweaks</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Audio_.26_visuals"><span class="tocnumber">2.3</span> <span class="toctext">Audio &amp; visuals</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Player_interaction_messages"><span class="tocnumber">2.4</span> <span class="toctext">Player interaction messages</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Advanced_logic"><span class="tocnumber">2.5</span> <span class="toctext">Advanced logic</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#For_C.23_mods"><span class="tocnumber">3</span> <span class="toctext">For C# mods</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Interacting_with_machines"><span class="tocnumber">3.1</span> <span class="toctext">Interacting with machines</span></a></li>
</ul>
</li>
</ul>
</div>

</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(1)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span class="mw-headline" id="Definitions">Definitions</span></h2><section class="mf-section-1 collapsible-block" id="mf-section-1">
<p>A "machine" is a placeable object which takes input and/or produces output based on the rules in <samp>Data/Machines</samp>. A machine doesn't need to do both (e.g. <a href="Solar_Panel.html" title="Solar Panel">solar panels</a> produce output without accepting input), and it's not necessarily something players would intuitively consider a machine (e.g. <a href="Incubator.html" title="Incubator">incubators</a> and <a href="Mushroom_Log.html" title="Mushroom Log">mushroom logs</a> are machines).
</p>
</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(2)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span class="mw-headline" id="Data_format">Data format</span></h2><section class="mf-section-2 collapsible-block" id="mf-section-2">
<p>You can add/edit machine logic by editing the <samp>Data/Machines</samp> <a href="Modding_Editing_XNB_files.html" title="Modding:Editing XNB files">asset</a>.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is the <a href="Modding_Common_data_field_types.html#Item_ID" title="Modding:Common data field types"><b>qualified</b> item ID</a> for the item which acts as a machine (like <samp>(BC)127</samp> for <a href="The_Cave.html" title="The Cave">mushroom boxes</a>).</li>
<li>The value is a model with the fields listed below.</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Item_processing_rules">Item processing rules</span></h3>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>OutputRules</samp>
</td>
<td>The output produced by this machine. If multiple output rules can be produced, the first available one is selected. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="Modding_Common_data_field_types.html#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this rule within the current machine (it doesn't need to be unique between machines).
</td></tr>
<tr>
<td><samp>Triggers</samp>
</td>
<td>When to apply this output rule. This can list any number of triggers; the output will apply if any of them match.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="Modding_Common_data_field_types.html#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this trigger within the current rule.
</td></tr>
<tr>
<td><samp>Trigger</samp>
</td>
<td><i>(Optional)</i> When this output rule applies. Defaults to <samp>ItemPlacedInMachine</samp>. The possible values are...
<ul><li><samp>ItemPlacedInMachine</samp>: apply this rule when an item is placed into the machine. This is the most common machine behavior.</li>
<li><samp>OutputCollected</samp>: apply this rule when the machine's previous output is collected. An output-collected rule won't require or consume the input items, and the input item will be the previous output. For example, this is used to reload the <a href="Crystalarium.html" title="Crystalarium">crystalarium</a>.</li>
<li><samp>MachinePutDown</samp>: apply this rule when the machine is put down. For example, this is used to start the <a href="Worm_Bin.html" title="Worm Bin">worm bin</a>.</li>
<li><samp>DayUpdate</samp>: apply this rule when a new day starts, if it isn't already processing output. For example, this is used for the <a href="Soda_Machine.html" title="Soda Machine">soda machine</a>.</li></ul>
<p>You can specify multiple values, like <code>"Trigger": "DayUpdate, MachinePutDown, OutputCollected"</code>.
</p>
</td></tr>
<tr>
<td><samp>RequiredItemId</samp>
</td>
<td><i>(Optional)</i> The qualified or unqualified item ID for the item to match, if the trigger is <samp>ItemPlacedInMachine</samp> or <samp>OutputCollected</samp>. Defaults to allowing any item ID.
</td></tr>
<tr>
<td><samp>RequiredTags</samp>
</td>
<td><i>(Optional)</i> The <a href="Modding_Context_tags.html" class="mw-redirect" title="Modding:Context tags">context tags</a> to match against input items, if the trigger is <samp>ItemPlacedInMachine</samp> or <samp>OutputCollected</samp>. An item must have all of the listed tags to select this rule. You can negate a tag with <samp>!</samp> (like <code>"RequiredTags": [ "bone_item", "!fossil_item" ]</code> for bone items that aren't fossils).
</td></tr>
<tr>
<td><samp>RequiredCount</samp>
</td>
<td><i>(Optional)</i> The required stack size for the input item, if the trigger is <samp>ItemPlacedInMachine</samp> or <samp>OutputCollected</samp>. Default 1.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="Modding_Game_state_queries.html" title="Modding:Game state queries">game state query</a> which indicates whether this trigger should be checked. Item-only tokens are valid for this check if the trigger is <samp>ItemPlacedInMachine</samp> or <samp>OutputCollected</samp>. Defaults to always true.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>OutputItem</samp>
</td>
<td>The items produced by this machine. If multiple output entries match, one will be selected randomly unless you specify <samp>UseFirstValidOutput</samp>. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="Modding_Item_queries.html#Item_spawn_fields" title="Modding:Item queries">item spawn fields</a> for the generic item fields supported by machine output.
<p>Notes:
</p>
<ul>
<li>If <samp>ItemId</samp> or <samp>RandomItemId</samp> is set to an <a href="Modding_Item_queries.html" title="Modding:Item queries">item query</a> which returns multiple items, one item will be selected at random.</li>
<li>The <samp>ItemId</samp> and <samp>RandomItemId</samp> can optionally contain special tokens, which will be replaced before the item ID is parsed. For example, you can use <code>FLAVORED_ITEM Wine DROP_IN_ID</code> to create a wine for whatever item was placed in the machine.
<table class="wikitable">

<tbody><tr>
<th>token
</th>
<th>replaced with
</th></tr>
<tr>
<td><samp>DROP_IN_ID</samp>
</td>
<td>The qualified item ID for the item placed in the machine.
</td></tr>
<tr>
<td><samp>DROP_IN_PRESERVE</samp>
</td>
<td>If the item placed into the machine is a flavored item like Apple Juice or Tuna Roe, the <i>unqualified</i> item ID for the flavor item (e.g. the apple in Apple Wine). Otherwise <samp>0</samp>.
</td></tr>
<tr>
<td><samp>NEARBY_FLOWER_ID</samp>
</td>
<td>The item ID for a flower within 5 tiles of the machine, or <samp>-1</samp> if no flower is found. For example, <a href="Bee_House.html" title="Bee House">bee houses</a> produce <code>FLAVORED_ITEM Honey NEARBY_FLOWER_ID</code>.
</td></tr></tbody></table>
</li>
<li>The <samp>ObjectInternalName</samp> can optionally contain <samp>{0}</samp>, which will be replaced with the input item's internal name. This is used to prevent flavored items from stacking (<i>e.g.</i> apple <a href="Wine.html" title="Wine">wine</a> and blueberry wine).</li>
<li>The <samp>Condition</samp> field will check the <i>input</i> (not output) item for item-related conditions.</li>
</ul>
</td></tr>
<tr>
<td><samp>PreserveType</samp>
</td>
<td><i>(Optional)</i> The produced item's preserved item type, if applicable. This sets the equivalent flag on the output item. The valid values are <samp>Jelly</samp>, <samp>Juice</samp>, <samp>Pickle</samp>, <samp>Roe</samp> or <samp>AgedRoe</samp>, and <samp>Wine</samp>. Defaults to none.
</td></tr>
<tr>
<td><samp>PreserveId</samp>
</td>
<td><i>(Optional)</i> The produced item's preserved unqualified item ID, if applicable. For example, <a href="Wine.html" title="Wine">blueberry wine</a> has its preserved item ID set to the <a href="Blueberry.html" title="Blueberry">blueberry</a> ID. This can be set to <samp>DROP_IN</samp> to use the input item's ID. Default none.
</td></tr>
<tr>
<td><samp>CopyColor</samp>
</td>
<td><i>(Optional)</i> Whether to inherit the color of the input item if it was a <samp>ColoredObject</samp>. This mainly affects <a href="Roe.html" title="Roe">roe</a>. Default false.
</td></tr>
<tr>
<td><samp>CopyPrice</samp>
</td>
<td><i>(Optional)</i> Whether to inherit the base price of the input item (before <samp>PriceModifiers</samp> are applied). This is ignored if the input or output aren't both object (<samp>(O)</samp>)-type.
</td></tr>
<tr>
<td><samp>CopyQuality</samp>
</td>
<td><i>(Optional)</i> Whether to inherit the quality of the input item (before <samp>QualityModifiers</samp> are applied).
</td></tr>
<tr>
<td><samp>PriceModifiers</samp><br><samp>PriceModifiers</samp>
</td>
<td><i>(Optional)</i> <a href="Modding_Migrate_to_Stardew_Valley_1.html#Quantity_modifiers" title="Modding:Migrate to Stardew Valley 1.6">Quantity modifiers</a> applied to the output item's price. Default none.
</td></tr>
<tr>
<td><samp>IncrementMachineParentSheetIndex</samp>
</td>
<td><i>(Optional)</i> An amount by which to increment the machine's spritesheet index while it's processing this output. This stacks with the <samp>ShowNextIndexWhenLoaded</samp> or <samp>ShowNextIndexWhileWorking</samp> field. Default 0.
</td></tr>
<tr>
<td><samp>OutputMethod</samp>
</td>
<td><i>(Optional, specialized)</i> A C# method which decides which item to produce. If set, the <samp>ItemId</samp> field is optional and ignored.
<p>This must be specified in the form <samp><code title="required field 'full type name'">&lt;full type name&gt;</code>: <code title="required field 'method name'">&lt;method name&gt;</code></samp> (like <samp>StardewValley.Object, Stardew Valley: OutputSolarPanel</samp>). The method must be static and match the game's <samp>MachineOutputDelegate</samp> method signature:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">/// &lt;summary&gt;Get the output item to produce.&lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="machine"&gt;The machine instance for which to produce output.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="inputItem"&gt;The item being dropped into the machine, if applicable.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="probe"&gt;Whether the machine is only checking whether the input is valid. If so, the input/machine shouldn't be changed and no animations/sounds should play.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="outputData"&gt;The item output data from &lt;c&gt;Data/Machines&lt;/c&gt; for which output is being created, if applicable.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="overrideMinutesUntilReady"&gt;The in-game minutes until the item will be ready to collect, if set. This overrides the equivalent fields in the machine data if set.&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;Returns the item to produce, or &lt;c&gt;null&lt;/c&gt; if none should be produced.&lt;/returns&gt;</span>
<span class="k">public</span> <span class="k">static</span> <span class="n">Item</span> <span class="nf">GetOutput</span><span class="p">(</span><span class="n">Object</span> <span class="n">machine</span><span class="p">,</span> <span class="n">Item</span> <span class="n">inputItem</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">probe</span><span class="p">,</span> <span class="n">MachineItemOutput</span> <span class="n">outputData</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int?</span> <span class="n">overrideMinutesUntilReady</span><span class="p">);</span>
</pre></div>
<p>If this method returns null, the machine won't output anything.
</p>
</td></tr>
<tr>
<td><samp>CustomData</samp>
</td>
<td>Machine-specific data provided to the machine logic, if applicable.
<p>For example, the cask uses this to set the aging rate for each item:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"OutputItem"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"OutputMethod"</span><span class="o">:</span> <span class="s2">"StardewValley.Objects.Cask, Stardew Valley: OutputCask"</span><span class="p">,</span>
    <span class="s2">"CustomData"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"AgingMultiplier"</span><span class="o">:</span> <span class="mi">4</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>UseFirstValidOutput</samp>
</td>
<td><i>(Optional)</i> If multiple <samp>OutputItem</samp> entries match, whether to use the first match instead of choosing one randomly. Default false.
</td></tr>
<tr>
<td><samp>MinutesUntilReady</samp><br><samp>DaysUntilReady</samp>
</td>
<td><i>(Optional)</i> The number of in-game minutes or days until the output is ready to collect. If both days and minutes are specified, days are used. If none are specified, the item will be ready instantly.
</td></tr>
<tr>
<td><samp>InvalidCountMessage</samp>
</td>
<td><i>(Optional)</i> If set, overrides the machine's main <samp>InvalidCountMessage</samp> field.
</td></tr>
<tr>
<td><samp>RecalculateOnCollect</samp>
</td>
<td><i>(Optional)</i> Whether to regenerate the output right before the player collects it, similar to <a href="Bee_House.html" title="Bee House">bee houses</a>. If the new item is null, the original output is returned instead.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>AdditionalConsumedItems</samp>
</td>
<td><i>(Optional)</i> A list of extra items required before <samp>OutputRules</samp> will be checked. If specified, every listed item must be present in the player, <a href="Hopper.html" title="Hopper">hopper</a>, or chest inventory (depending how the machine is being loaded).
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td>The <a href="Modding_Common_data_field_types.html#Item_ID" title="Modding:Common data field types">qualified or unqualified item ID</a> for the required item.
</td></tr>
<tr>
<td><samp>RequiredCount</samp>
</td>
<td><i>(Optional)</i> The required stack size for the item matching <samp>ItemId</samp>. Default 1.
</td></tr>
<tr>
<td><samp>InvalidCountMessage</samp>
</td>
<td><i>(Optional)</i> If set, overrides the machine's main <samp>InvalidCountMessage</samp> field.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>AllowFairyDust</samp>
</td>
<td><i>(Optional)</i> Whether the player can add <a href="Fairy_Dust.html" title="Fairy Dust">fairy dust</a> to speed up the machine. Default true.
</td></tr>
<tr>
<td><samp>ReadyTimeModifiers</samp>
</td>
<td><i>(Optional)</i> <a href="Modding_Migrate_to_Stardew_Valley_1.html#Quantity_modifiers" title="Modding:Migrate to Stardew Valley 1.6">Quantity modifiers</a> applied to the produced item's processing time. The modifier conditions can use item-only tokens, which will check the <i>input</i> (not output) item.
</td></tr>
<tr>
<td><samp>ReadyTimeModifierMode</samp>
</td>
<td><i>(Optional)</i> A <a href="Modding_Migrate_to_Stardew_Valley_1.html#Quantity_modifiers" title="Modding:Migrate to Stardew Valley 1.6">quantity modifier mode</a> which indicates what to do if multiple modifiers apply at the same time. Default <samp>Stack</samp>.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Behavior_tweaks">Behavior tweaks</span></h3>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>OnlyCompleteOvernight</samp>
</td>
<td><i>(Optional)</i> Whether the machine should only produce output overnight. If enabled and it finishes processing during the day, it'll pause until its next day update. Default false.
</td></tr>
<tr>
<td><samp>PreventTimePass</samp>
</td>
<td><i>(Optional)</i> A list of cases when the machine should be paused, so the timer on any item being produced doesn't decrement. Possible values:
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Outside</samp><br><samp>Inside</samp>
</td>
<td>Pause when placed in an outside or inside location. For example, <a href="Bee_House.html" title="Bee House">bee houses</a> don't work inside.
</td></tr>
<tr>
<td><samp>Spring</samp><br><samp>Summer</samp><br><samp>Fall</samp><br><samp>Winter</samp>
</td>
<td>Pause in the given season. For example, <a href="Bee_House.html" title="Bee House">bee houses</a> don't work in winter.
</td></tr>

<tr>
<td><samp>Sun</samp><br><samp>Rain</samp>
</td>
<td>Pause on days with the given weather.
</td></tr>
<tr>
<td><samp>Always</samp>
</td>
<td>Always pause the machine. This is used in specialized cases where the timer is handled by <a href="#Advanced_logic">advanced machine logic</a>.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>AllowLoadWhenFull</samp>
</td>
<td><i>(Optional)</i> Whether the player can drop a new item into the machine before it's done processing the last one (like the <a href="Crystalarium.html" title="Crystalarium">crystalarium</a>). The previous item will be lost. Default false.
</td></tr>
<tr>
<td><samp>ClearContentsOvernightCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="Modding_Game_state_queries.html" title="Modding:Game state queries">game state query</a> which indicates whether the machine should be emptied overnight, so any current output will be lost. Defaults to always false.
</td></tr></tbody></table>
<h3 class="in-block"><span id="Audio_&amp;_visuals"></span><span class="mw-headline" id="Audio_.26_visuals">Audio &amp; visuals</span></h3>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>LoadEffects</samp><br><samp>WorkingEffects</samp>
</td>
<td><i>(Optional)</i> The cosmetic effects shown when an item is loaded into the machine (for <samp>LoadEffects</samp>), or while it's processing the item (for <samp>WorkingEffects</samp>, based on the <samp>WorkingEffectChance</samp> probability). Both default to none. These consist of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="Modding_Game_state_queries.html" title="Modding:Game state queries">game state query</a> which indicates whether this effect should be played. For item queries, you can check the input item (<samp>Input&lt;/samp) or output item (<samp>Target</samp>). Defaults to always true.
</samp></td></tr>
<tr>
<td><samp>Sounds</samp>
</td>
<td><i>(Optional)</i> The audio to play. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="Modding_Audio.html" title="Modding:Audio">audio cue ID</a> to play.
</td></tr>
<tr>
<td><samp>Delay</samp>
</td>
<td><i>(Optional)</i> The number of milliseconds until the sound should play. Default 0.
</td></tr></tbody></table>
<p>Defaults to no sound.
</p>
</td></tr>
<tr>
<td><samp>ShakeDuration</samp>
</td>
<td><i>(Optional)</i> A duration in milliseconds during which the machine sprite should shake. Default none.
</td></tr>
<tr>
<td><samp>Frames</samp>
</td>
<td><i>(Optional)</i> The animation to apply to the machine sprite, specified as a list of offsets relative to the base sprite index. Default none.
</td></tr>
<tr>
<td><samp>Interval</samp>
</td>
<td><i>(Optional)</i> The number of milliseconds for which each frame in <samp>Frames</samp> is kept on-screen. Default 100.
</td></tr>
<tr>
<td><samp>TemporarySprites</samp>
</td>
<td><i>(Optional)</i> The temporary animated sprites to show. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="Modding_Common_data_field_types.html#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this rule within the current machine (it doesn't need to be unique between machines).
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture (under the game's <samp>Content</samp> folder) for the animated sprite.
</td></tr>
<tr>
<td><samp>SourceRect</samp>
</td>
<td>The pixel area for the first animated frame within the <samp>Texture</samp>, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="Modding_Game_state_queries.html" title="Modding:Game state queries">game state query</a> which indicates whether to add this temporary sprite.
</td></tr>
<tr>
<td><samp>PositionOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset applied to the sprite, relative to the top-left corner of the machine's collision box, specified as an object with <samp>X</samp> and <samp>Y</samp> fields. Defaults to (0, 0).
</td></tr>
<tr>
<td><samp>Color</samp>
</td>
<td><i>(Optional)</i> A tint color to apply to the sprite. See <a href="Modding_Common_data_field_types.html#Color" title="Modding:Common data field types">color format</a>. Default <samp>White</samp> (no tint).
</td></tr>
<tr>
<td><samp>AlphaFade</samp><br><samp>Loops</samp><br><samp>Rotation</samp><br><samp>RotationChange</samp><br><samp>ScaleChange</samp><br><samp>SortOffset</samp>
</td>
<td><i>(Optional)</i> See equivalent fields in the <a href="Modding_Event_data.html" title="Modding:Event data"><samp>temporaryAnimatedSprite</samp> event command</a>. Default 0.
</td></tr>
<tr>
<td><samp>Frames</samp><br><samp>Scale</samp>
</td>
<td><i>(Optional)</i> See equivalent fields in the <a href="Modding_Event_data.html" title="Modding:Event data"><samp>temporaryAnimatedSprite</samp> event command</a>. Default 1.
</td></tr>
<tr>
<td><samp>Interval</samp>
</td>
<td><i>(Optional)</i> See equivalent fields in the <a href="Modding_Event_data.html" title="Modding:Event data"><samp>temporaryAnimatedSprite</samp> event command</a>. Default 100.
</td></tr>
<tr>
<td><samp>Flicker</samp><br><samp>Flip</samp>
</td>
<td><i>(Optional)</i> See equivalent fields in the <a href="Modding_Event_data.html" title="Modding:Event data"><samp>temporaryAnimatedSprite</samp> event command</a>. Default false.
</td></tr></tbody></table>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>WorkingEffectChance</samp>
</td>
<td><i>(Optional)</i> The percentage chance to apply <samp>WorkingEffects</samp> each time the day starts or the in-game clock changes, as a value between 0 (never) and 1 (always). Default 0.33.
</td></tr>
<tr>
<td><samp>LightWhileWorking</samp>
</td>
<td><i>(Optional)</i> The light emitted by the machine while it's processing an item. Default none.
<p>This consists of a list of models with these fields: 
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Radius</samp>
</td>
<td><i>(Optional)</i> The size of the area covered by the light effect, as a multiplier of the default radius (like <samp>1.5</samp> for an area 50% wider than the default). Default 1.
</td></tr>
<tr>
<td><samp>Color</samp>
</td>
<td><i>(Optional)</i> A tint color to apply to the light. See <a href="Modding_Common_data_field_types.html#Color" title="Modding:Common data field types">color format</a>. Default <samp>White</samp> (no tint).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>WobbleWhileWorking</samp>
</td>
<td><i>(Optional)</i> Whether the machine sprite should bulge in &amp; out while it's processing an item. Default false.
</td></tr>
<tr>
<td><samp>ShowNextIndexWhileWorking</samp><br><samp>ShowNextIndexWhenReady</samp>
</td>
<td><i>(Optional)</i> Whether to show the next sprite in the machine's spritesheet while it's processing an item (<samp>ShowNextIndexWhileWorking</samp>) or ready (<samp>ShowNextIndexWhenReady</samp>). Default false.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Player_interaction_messages">Player interaction messages</span></h3>
<p>These only apply when the player interacts with a chest directly, instead of using a <a href="Hopper.html" title="Hopper">hopper</a> or mod like <a rel="nofollow" class="external text" href="../external.html?link=https://www.nexusmods.com/stardewvalley/mods/1063">Automate</a>.
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>InvalidItemMessage</samp>
</td>
<td><i>(Optional)</i> A <a href="Modding_Tokenizable_strings.html" title="Modding:Tokenizable strings">tokenizable string</a> for the message shown in a toaster notification if the player tries to input an item that isn't accepted by the machine.
</td></tr>
<tr>
<td><samp>InvalidItemMessageCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="Modding_Game_state_queries.html" title="Modding:Game state queries">game state query</a> which indicates whether <samp>InvalidItemMessage</samp> should be shown. This can use item-related queries like <samp>ITEM_TYPE</samp>. Defaults to always true.
</td></tr>
<tr>
<td><samp>InvalidCountMessage</samp>
</td>
<td><i>(Optional)</i> A <a href="Modding_Tokenizable_strings.html" title="Modding:Tokenizable strings">tokenizable string</a> for the message shown in a toaster notification if the input inventory doesn't contain this item, unless overridden by <samp>InvalidCountMessage</samp> under <samp>OutputRules</samp>.
<p>This can use extra custom tokens:
</p>
<ul><li><samp>[ItemCount]</samp>: the number of remaining items needed. For example, if you're holding three and need five, <samp>[ItemCount]</samp> will be replaced with <samp>2</samp>.</li></ul>
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Advanced_logic">Advanced logic</span></h3>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>InteractMethod</samp>
</td>
<td><i>(Optional)</i> A C# method invoked when the player interacts with the machine when it doesn't have output ready to harvest.
<p>This must be specified in the form <samp><code title="required field 'full type name'">&lt;full type name&gt;</code>: <code title="required field 'method name'">&lt;method name&gt;</code></samp> (like <samp>StardewValley.Object, Stardew Valley: SomeInteractMethod</samp>). The method must be static and match the game's <samp>MachineInteractDelegate</samp> method signature:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">/// &lt;summary&gt;The method signature for a custom &lt;see cref="MachineData.InteractMethod"/&gt; method.&lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="machine"&gt;The machine instance for which to produce output.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="location"&gt;The location containing the machine.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="player"&gt;The player using the machine.&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;Returns whether the interaction was handled.&lt;/returns&gt;</span>
<span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">InteractWithMachine</span><span class="p">(</span><span class="n">Object</span> <span class="n">machine</span><span class="p">,</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Farmer</span> <span class="n">player</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>HasInput</samp><br><samp>HasOutput</samp>
</td>
<td><i>(Optional)</i> Whether to force adding the <samp>machine_input</samp> or <samp>machine_output</samp> <a href="Modding_Items.html#Context_tags" title="Modding:Items">context tags</a> respectively. This isn't needed for most machines, since they'll be set based on the <samp>OutputRules</samp> field. Default false.
</td></tr>
<tr>
<td><samp>IsIncubator</samp>
</td>
<td><i>(Optional)</i> Whether this machine acts as an incubator when placed in a building, so players can incubate eggs in it. Default false.
<p>This is used by the <a href="Incubator.html" title="Incubator">incubator</a> and <a href="Ostrich_Incubator.html" title="Ostrich Incubator">ostrich incubator</a>. The game logic assumes there's only one such machine in each building, so this generally shouldn't be used by custom machines that can be built in a vanilla <a href="Barn.html" title="Barn">barn</a> or <a href="Coop.html" title="Coop">coop</a>.
</p>
</td></tr>
<tr>
<td><samp>StatsToIncrementWhenLoaded</samp><br><samp>StatsToIncrementWhenHarvested</samp>
</td>
<td><i>(Optional)</i> The game stat counters to increment when an item is placed in the machine (<samp>StatsToIncrementWhenLoaded</samp>) or when the processed output is collected (<samp>StatsToIncrementWhenHarvested</samp>). Default none. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="Modding_Common_data_field_types.html#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry within the current list.
</td></tr>
<tr>
<td><samp>StatName</samp>
</td>
<td>The name of the stat counter field in <samp>Game1.stats</samp>. Stat names are case-insensitive.
</td></tr>
<tr>
<td><samp>RequiredItemId</samp>
</td>
<td><i>(Optional)</i> If set, only increment the stat if the main input item has this qualified or unqualified item ID.
</td></tr>
<tr>
<td><samp>RequiredTags</samp>
</td>
<td><i>(Optional)</i> If set, only increment the stat if the main input item has <i>all</i> of these <a href="Modding_Context_tags.html" class="mw-redirect" title="Modding:Context tags">context tags</a>. You can negate a tag with <samp>!</samp> (like <code>"RequiredTags": [ "bone_item", "!fossil_item" ]</code> for bone items that aren't fossils).
</td></tr></tbody></table>
<p>This can be used to increment both built-in stats (like <samp>GeodesCracked</samp> for the <a href="Geode_Crusher.html" title="Geode Crusher">geode crusher</a>) and custom stats. Using a <a href="Modding_Common_data_field_types.html#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> is strongly recommended for custom stats to avoid conflicts.
</p>
</td></tr>
<tr>
<td><samp>ExperienceGainOnHarvest</samp>
</td>
<td><i>(Optional)</i> Experience points to grant on harvesting from this machine. For example, set to <code>"Farming 7 Fishing 5"</code> to grant 7 Farming and 5 Fishing xp.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="Modding_Common_data_field_types.html#Custom_fields" title="Modding:Common data field types">custom fields</a> for this entry.
</td></tr></tbody></table>
</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(3)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span id="For_C#_mods"></span><span class="mw-headline" id="For_C.23_mods">For C# mods</span></h2><section class="mf-section-3 collapsible-block" id="mf-section-3">
<h3 class="in-block"><span class="mw-headline" id="Interacting_with_machines">Interacting with machines</span></h3>
<p>Stardew Valley 1.6 adds two <samp>Object</samp> fields for reference:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>lastOutputRuleId</samp>
</td>
<td>If this is a machine, the output rule ID for the rule being processed by the machine (if any).
</td></tr>
<tr>
<td><samp>lastInputItem</samp>
</td>
<td>If this is a machine, the item that was dropped into the machine to start the current output (if any).
</td></tr></tbody></table>
<p>And a few methods for processing items:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>IsMachineWorking()</samp>
</td>
<td>Get whether the machine is currently processing an item.
</td></tr>
<tr>
<td><samp>ShouldTimePassForMachine(location)</samp>
</td>
<td>Get whether the machine should be updated in the given location. For example, this will return false for <a href="Solar_Panel.html" title="Solar Panel">solar panels</a> placed indoors, or outdoors on a cloudy day.
</td></tr>
<tr>
<td><samp>GetMachineData()</samp>
</td>
<td>Get the underlying machine data from <samp>Data/Machines</samp>.
</td></tr>
<tr>
<td><samp>PlaceInMachine(…)</samp>
</td>
<td>Try to place an item in the machine using the rules from <samp>Data/Machines</samp>. This returns a boolean which indicates whether the machine was successfully started.
</td></tr>
<tr>
<td><samp>OutputMachine(…)</samp>
</td>
<td>Try to set the machine output given the input item and an optional output rule to apply. Most code should call <samp>PlaceInMachine</samp> instead.
</td></tr></tbody></table>
<p>A lot of the generic machine logic is also handled by a new <samp>MachineDataUtility</samp> class, which lets C# mods interact with machine data more directly. For example, you can check which output a machine would produce without actually updating the machine.
</p>




</section></div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="mediawiki/indexe25e.html?title=Modding:Machines&amp;oldid=171823">https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Machines&amp;oldid=171823</a>"</div>
</div>
			<div class="post-content" id="page-secondary-actions">
			
			</div>
		</main>
		<footer class="mw-footer minerva-footer">
		<div class="last-modified-bar">
	<div class="post-content last-modified-bar__content">
		<span class="last-modified-bar__icon mw-ui-icon mw-ui-icon-mw-ui-icon-small mw-ui-icon-wikimedia-history-base20 "></span>
		<a class="last-modified-bar__text modified-enhancement" href="Special_History/Modding_Machines.html"
				data-user-name="Selph"
				data-user-gender="unknown"
				data-timestamp="1716964687">
				<span>Last edited on 29 May 2024, at 06:38</span>
		</a>
		<span class="mw-ui-icon mw-ui-icon-small mw-ui-icon-mf-expand-gray mf-mw-ui-icon-rotate-anti-clockwise indicator"></span>
	</div>
</div>

		<div class="post-content footer-content">
			
			<h2>Stardew Valley Wiki</h2>
			<div class="license">Content is available under <a class="external" rel="nofollow" href="../creativecommons.org/licenses/by-nc-sa/3.0/index.html">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</div>
			<ul class="footer-info hlist hlist-separated">
				<li id="footer-info-lastmod"> This page was last edited on 29 May 2024, at 06:38.</li><li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="../creativecommons.org/licenses/by-nc-sa/3.0/index.html">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</li>
			</ul>
			<ul class="footer-places hlist hlist-separated">
				<li id="footer-places-privacy"><a href="Stardew_Valley_Wiki_Privacy_policy.html" title="Stardew Valley Wiki:Privacy policy">Privacy policy</a></li><li id="footer-places-about"><a href="Stardew_Valley_Wiki_About.html" title="Stardew Valley Wiki:About">About Stardew Valley Wiki</a></li><li id="footer-places-disclaimer"><a href="Stardew_Valley_Wiki_General_disclaimer.html" title="Stardew Valley Wiki:General disclaimer">Disclaimers</a></li><li id="footer-places-desktop-toggle"><a id="mw-mf-display-toggle" href="mediawiki/indexcd24.html?title=Modding:Machines&amp;mobileaction=toggle_view_desktop">Desktop</a></li>
			</ul>
		</div>
		</footer>
	</div>
</div>
<div class="mw-notification-area" data-mw="interface"></div>
<!-- v:8.3.0 -->

<script src="../external.html?link=https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.040","walltime":"0.043","ppvisitednodes":{"value":208,"limit":1000000},"postexpandincludesize":{"value":408,"limit":2097152},"templateargumentsize":{"value":120,"limit":2097152},"expansiondepth":{"value":4,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":3822,"limit":5000000},"timingprofile":["100.00%    4.629      1 -total"," 49.17%    2.276      4 Template:T"," 30.35%    1.405      1 Template:Nexus_mod"]},"cachereport":{"timestamp":"20240607115628","ttl":86400,"transientcontent":false}}});});</script>
<script>(window.NORLQ=window.NORLQ||[]).push(function(){var ns,i,p,img;ns=document.getElementsByTagName('noscript');for(i=0;i<ns.length;i++){p=ns[i].nextSibling;if(p&&p.className&&p.className.indexOf('lazy-image-placeholder')>-1){img=document.createElement('img');img.setAttribute('src',p.getAttribute('data-src'));img.setAttribute('width',p.getAttribute('data-width'));img.setAttribute('height',p.getAttribute('data-height'));img.setAttribute('alt',p.getAttribute('data-alt'));p.parentNode.replaceChild(img,p);}}});</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":58});});</script>		</body>
		

</html>
		






