<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">


<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>View source for Modding:Item queries - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!0,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"0a905c927b9ecf60e299227a","wgCSPNonce":!1,"wgCanonicalNamespace":"Modding","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":570,"wgPageName":"Modding:Item_queries","wgTitle":"Item queries","wgCurRevisionId":170884,"wgRevisionId":0,"wgArticleId":14620,"wgIsArticle":!1,"wgIsRedirect":!1,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Modding:Item_queries","wgRelevantArticleId":14620,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgMFMode":"stable","wgMFAmc":!1,"wgMFAmcOutreachActive":!1,
"wgMFAmcOutreachUserEligible":!1,"wgMFLazyLoadImages":!0,"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,"watchlist":!1,"tagline":!1},"wgMFIsPageContentModelEditable":!0,"wgCargoMapClusteringMinimum":80,"wgCargoMonthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"wgCargoMonthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgCargoWeekDays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"wgCargoWeekDaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"wgMinervaPermissions":{"watch":!0,"talk":!1},"wgMinervaFeatures":{"beta":!1,"donate":!0,"mobileOptionsLink":!0,"categories":!1,"pageIssues":!0,"talkAtTop":!1,"historyInPageActions":!1,"overflowSubmenu":!1,"tabsOnSpecials":!1,"personalMenu":!1,"mainMenuExpanded":!1,"simplifiedTalk":!0},"wgMinervaDownloadNamespaces":[0]};RLSTATE={
"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","mediawiki.ui.input":"ready","mediawiki.ui.checkbox":"ready","skins.minerva.base.styles":"ready","skins.minerva.content.styles":"ready","skins.minerva.content.styles.images":"ready","mediawiki.hlist":"ready","mediawiki.ui.icon":"ready","mediawiki.ui.button":"ready","skins.minerva.icons.wikimedia":"ready","skins.minerva.mainMenu.icons":"ready","skins.minerva.mainMenu.styles":"ready","mobile.init.styles":"ready","mobile.messageBox.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","skins.minerva.options","skins.minerva.scripts","mobile.init"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="loadb780.css?lang=en&amp;modules=mediawiki.hlist%7Cmediawiki.ui.button%2Ccheckbox%2Cicon%2Cinput%7Cmobile.init.styles%7Cmobile.messageBox.styles%7Cskins.minerva.base.styles%7Cskins.minerva.content.styles%7Cskins.minerva.content.styles.images%7Cskins.minerva.icons.wikimedia%7Cskins.minerva.mainMenu.icons%2Cstyles&amp;only=styles&amp;skin=minerva"/>
<script async="" src="loadc82b.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=minerva&amp;target=mobile"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load1154.css?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=minerva"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="description" content="You do not have permission to edit this page, for the following reason:"/>
<meta name="theme-color" content="#eaecf0"/>
<meta name="viewport" content="initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0, width=device-width"/>
<link rel="manifest" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/api.php?action=webapp-manifest"/>
<link rel="shortcut icon" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="../../external.html?link=http://stardewvalleywiki.com/mediawiki/api.php?action=rsd"/>
<link rel="license" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/"/>
<meta property="og:title" content="View source for Modding:Item queries - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://stardewvalleywiki.com/Modding:Item_queries"/>
<meta property="og:description" content="← Index"/>
<meta property="og:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="View source for Modding:Item queries - Stardew Valley Wiki"/>
<meta property="twitter:description" content="← Index"/>
<meta property="twitter:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"View source for Modding:Item queries - Stardew Valley Wiki","headline":"View source for Modding:Item queries - Stardew Valley Wiki","mainEntityOfPage":"View source for Modding:Item queries","identifier":"https:\/\/stardewvalleywiki.com\/Modding:Item_queries","url":"https:\/\/stardewvalleywiki.com\/Modding:Item_queries","description":"\u2190 Index","dateModified":"2024-05-16T00:40:09Z","datePublished":"2024-05-16T00:40:09Z","image":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-570 ns-subject page-Modding_Item_queries rootpage-Modding_Item_queries stable skin-minerva action-edit skin-vector-legacy">
<div id="mw-mf-viewport">
	<div id="mw-mf-page-center">
		<a class="mw-mf-page-center__mask" href="#"></a>
		<header class="header-container header-chrome">
			<form class="header" action="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php" method="get">
				<nav class="navigation-drawer toggle-list view-border-box">
					<input type="checkbox" id="main-menu-input" class="toggle-list__checkbox" role="button" aria-labelledby="mw-mf-main-menu-button">
					<label for="main-menu-input" id="mw-mf-main-menu-button"
						class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-menu-base20 mw-ui-icon-flush-left toggle-list__toggle"
						title="Open main menu" data-event-name="ui.mainmenu">Open main menu</label>
					<div id="mw-mf-page-left" class="menu toggle-list__list view-border-box">
	<ul id="p-navigation">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-home" data-event-name="menu.home"><span>Home</span></a>
			</li>
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Special:Random#/random" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-die " data-event-name="menu.random"><span>Random</span></a>
			</li>
	</ul>
	<ul id="p-personal">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Modding%3AItem+queries&amp;returntoquery=action%3Dedit" class="menu__item--login mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-logIn " data-event-name="menu.login"><span>Log in</span></a>
			</li>
	</ul>
	<ul id="pt-preferences">
			<li class="jsonly">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:MobileOptions&amp;returnto=Modding%3AItem+queries" class="menu__item--settings mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-settings " data-event-name="menu.settings"><span>Settings</span></a>
			</li>
	</ul>
	<ul class="hlist">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:About" class="" data-event-name=""><span>About Stardew Valley Wiki</span></a>
			</li>
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:General_disclaimer" class="" data-event-name=""><span>Disclaimers</span></a>
			</li>
	</ul>
</div>

					<label class="main-menu-mask" for="main-menu-input"></label>
				</nav>
				<div class="branding-box">
					<a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki">
						<span>Stardew Valley Wiki</span>
						
					</a>
				</div>
				<div class="search-box">
					<input class="search mw-ui-background-icon-search skin-minerva-search-trigger" type="search" name="search" id="searchInput"
						autocomplete="off" placeholder="Search Stardew Valley Wiki" aria-label="Search Stardew Valley Wiki"
						value="">
				</div>
				<nav class="minerva-user-navigation" aria-label="User navigation">
					<div><button id="searchIcon" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-search-base20 skin-minerva-search-trigger" type="submit">Search</button></div>
					
				</nav>
			</form>
		</header>
		<main id="content" class="mw-body">
			<div class="banner-container">
			<div id="siteNotice"></div>
			</div>
			
			<div class="pre-content heading-holder">
				<div class="page-heading">
					<h1 id="section_0">View source for Modding:Item queries</h1>
					<div class="tagline"></div>
				</div>
				
				
				
				<div class="minerva__subtitle">← <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">Modding:Item queries</a></div>
			</div>
			
			<div id="bodyContent" class="content"><div id="mw-content-text"><script>function mfTempOpenSection(id){var block=document.getElementById("mf-section-"+id);block.className+=" open-block";block.previousSibling.className+=" open-block";}</script><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in the group: <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Stardew_Valley_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Stardew Valley Wiki:Users (page does not exist)">Users</a>.
</p>
</div><hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" class="mw-editfont-monospace mw-ui-input" lang="en" dir="ltr" name="wpTextbox1">← [[Modding:Index|Index]]

This page documents '''item queries''', a built-in way to create one or more items dynamically, instead of specifying a single item ID.

==Overview==
===Valid fields===
These are used in various places like [[#Custom machines|machine data]] and [[#Custom shops|shop data]]. These can only be used if the field's docs specifically mention that it allows item queries.

===Query format===
An item query consists of a string containing a query name with zero or more [[#Argument format|arguments]]. See the [[#Available queries|list of queries below]].

'''⚠''' Item queries are partly case-sensitive. While some values are case-insensitive, this isn't consistent. Using the exact capitalization is recommended to avoid issues.

===Argument format===
Item queries can take space-delimited arguments. For example, &lt;code>RANDOM_ITEMS (F) 1376 1390&lt;/code> has three arguments: &lt;code>(F)&lt;/code>, &lt;code>1376&lt;/code>, and &lt;code>1390&lt;/code>.

If you have spaces within an argument, you can surround it with quotes to keep it together. For example, &lt;code>LOST_BOOK_OR_ITEM "RANDOM_ITEMS (O)"&lt;/code> passes &lt;code>RANDOM_ITEMS (O)&lt;/code> as one argument. You can escape inner quotes with backslashes if needed.

Remember that quotes and backslashes inside JSON strings need to be escaped too. For example, &lt;code>"ItemId": "LOST_BOOK_OR_ITEM \"RANDOM_ITEMS (O)\""&lt;/code> will send &lt;code>LOST_BOOK_OR_ITEM "RANDOM_ITEMS (O)"&lt;/code> to the game code. Alternatively, you can use single-quotes for the JSON string instead, like &lt;code>"ItemId": 'LOST_BOOK_OR_ITEM "RANDOM_ITEMS (O)"'&lt;/code>.

==Available queries==
===General use===
{| class="wikitable"
|-
! query
! effect
|-
| &lt;samp>ALL_ITEMS {{o|type ID}} {{o|flags}}&lt;/samp>
| Every item provided by the [[#Custom items|item data definitions]]. If {{o|type ID}} is set to an item type identifier (like &lt;samp>(O)&lt;/samp> for object), only returns items from the matching item data definition.

The {{o|flags}} specify options to apply. If specified, they must be at the end of the argument list (with or without {{o|type ID}}). The flags can be any combination of:
{| class="wikitable"
|-
! flag
! effect
|-
| &lt;samp>@isRandomSale&lt;/samp>
| Don't return items marked 'exclude from random sale' in &lt;samp>Data/Furniture&lt;/samp> or &lt;samp>Data/Objects&lt;/samp>.
|-
| &lt;samp>@requirePrice&lt;/samp>
| Don't return items with a sell-to-player price below {{price|1}}.
|}

For example:
* &lt;code>ALL_ITEMS&lt;/code> will return every item in the game.
* &lt;code>ALL_ITEMS @isRandomSale&lt;/code> will return every item in the game that's not excluded from random sale.
* &lt;code>ALL_ITEMS (F) @isRandomSale&lt;/code> will return every furniture item in the game that's not excluded from random sale.
|-
| &lt;samp>FLAVORED_ITEM {{t|type}} {{t|ingredient ID}} {{o|ingredient flavor ID}}&lt;/samp>
| A flavored item like Apple Wine. The {{t|type}} can be one of [[Wine|&lt;samp>Wine&lt;/samp>]], [[Jellies and Pickles|&lt;samp>Jelly&lt;/samp>]], [[Jellies and Pickles|&lt;samp>Pickle&lt;/samp>]], [[Juice|&lt;samp>Juice&lt;/samp>]], [[Roe|&lt;samp>Roe&lt;/samp>]], [[Aged Roe|&lt;samp>AgedRoe&lt;/samp>]], [[Honey|&lt;samp>Honey&lt;/samp>]], [[Bait|&lt;samp>Bait&lt;/samp>]], [[Dried Fruit|&lt;samp>DriedFruit&lt;/samp>]], [[Dried Mushrooms|&lt;samp>DriedMushroom&lt;/samp>]], or [[Smoked Fish|&lt;samp>SmokedFish&lt;/samp>]]. The {{t|ingredient ID}} is the qualified or unqualified item ID which provides the flavor (like Apple in Apple Wine). For &lt;samp>Honey&lt;/samp>, you can set the {{t|flavor ID}} to &lt;samp>-1&lt;/samp> for Wild Honey.

For aged roe only, the {{o|ingredient flavor ID}} is the flavor of the {{t|ingredient ID}}. For example, &lt;samp>FLAVORED_ITEM AgedRoe (O)812 128&lt;/samp> creates Aged Pufferfish Roe (812 is [[roe]] and 128 is [[pufferfish]]).
|-
| &lt;samp>RANDOM_ITEMS {{t|type definition ID}} {{o|min ID}} {{o|max ID}} {{o|flags}}&lt;/samp>
| All items from the given [[#Item types|type definition ID]] in randomized order, optionally filtered to those with a numeric ID in the given {{o|min ID}} and {{o|max ID}} range (inclusive).

The {{o|flags}} specify options to apply. If specified, they must be at the end of the argument list (with or without {{o|min ID}} and/or {{o|max ID}}). The flags can be any combination of:

The flags can be any combination of:
{| class="wikitable"
|-
! flag
! effect
|-
| &lt;samp>@isRandomSale&lt;/samp>
| Don't return items marked 'exclude from random sale' in &lt;samp>Data/Furniture&lt;/samp> or &lt;samp>Data/Objects&lt;/samp>.
|-
| &lt;samp>@requirePrice&lt;/samp>
| Don't return items with a sell-to-player price below {{price|1}}.
|}

For example, you can sell a random [[wallpaper]] for {{price|200}} in &lt;samp>Data/Shops&lt;/samp>:
&lt;syntaxhighlight lang="js">
{
    "ItemId": "RANDOM_ITEMS (WP)",
    "MaxItems": 1,
    "Price": 200
}
&lt;/syntaxhighlight>

Or a random [[House Plant|house plant]]:
&lt;syntaxhighlight lang="js">
{
    "ItemId": "RANDOM_ITEMS (F) 1376 1390",
    "MaxItems": 1
}
&lt;/syntaxhighlight>

Or a random [[#Custom items|custom item]] added by a mod by its item ID prefix:
&lt;syntaxhighlight lang="js">
{
    "ItemId": "RANDOM_ITEMS (O)",
    "MaxItems": 1,
    "PerItemCondition": "ITEM_ID_PREFIX Target AuthorName_ModName_"
}
&lt;/syntaxhighlight>

Or 10 random objects with any category except &lt;samp>-13&lt;/samp> or &lt;samp>-14&lt;/samp>:
&lt;syntaxhighlight lang="js">
{
    "ItemId": "RANDOM_ITEMS (O)",
    "MaxItems": 10,
    "PerItemCondition": "ITEM_CATEGORY, !ITEM_CATEGORY Target -13 -14"
}
&lt;/syntaxhighlight>
|}

===Specific items===
{| class="wikitable"
|-
! query
! effect
|-
| &lt;samp>DISH_OF_THE_DAY&lt;/samp>
| The [[The Stardrop Saloon#Rotating Stock|Saloon's dish of the day]].
|-
| &lt;samp>LOST_BOOK_OR_ITEM {{o|alternate query}}&lt;/samp>
| A [[Lost Books|lost book]] if the player hasn't found them all yet, else the result of the {{o|alternate query}} if specified, else nothing.

For example, &lt;code>LOST_BOOK_OR_ITEM (O)770&lt;/code> returns [[Mixed Seeds|mixed seeds]] if the player found every book already.
|-
| &lt;samp>RANDOM_BASE_SEASON_ITEM&lt;/samp>
| A random seasonal vanilla item which can be found by searching garbage cans, breaking containers in the mines, etc.
|-
| &lt;samp>SECRET_NOTE_OR_ITEM {{o|alternate query}}&lt;/samp>
| A [[Secret Notes|secret note]] (or [[Journal Scraps|journal scrap]] on the island) if the player hasn't found them all yet, else the result of the {{o|alternate query}} if specified, else nothing.

For example, &lt;code>SECRET_NOTE_OR_ITEM (O)390&lt;/code> returns [[clay]] if the player found every secret note already.
|-
| &lt;samp>SHOP_TOWN_KEY&lt;/samp>
| The special [[Key To The Town|town key]] item. This is only valid in shops.
|}

===Specialized===
{| class="wikitable"
|-
! query
! effect
|-
| &lt;samp>ITEMS_SOLD_BY_PLAYER {{t|shop location}}&lt;/samp>
| Random items the player has recently sold to the {{t|shop location}}, which can be one of &lt;samp>SeedShop&lt;/samp> (Pierre's store) or &lt;samp>FishShop&lt;/samp> (Willy's fish shop).
|-
| &lt;samp>LOCATION_FISH {{t|location}} {{t|bobber tile}} {{t|depth}}&lt;/samp>
| A random item that can be found by fishing in the given location. The {{t|location}} should be the internal name of the location, {{t|bobber tile}} is the position of the fishing rod's bobber in the water (in the form &lt;samp>{{t|x}} {{t|y}}&lt;/samp>), and {{t|depth}} is the bobber's distance from the nearest shore measured in tiles (where 0 is directly adjacent to the shore).

'''Careful:''' since the target location might use &lt;samp>LOCATION_FISH&lt;/samp> queries in its list, it's easy to cause a circular reference by mistake (e.g. location A gets fish from B, which gets fish from A). If this happens, the game will log an error and return no item.
|-
| &lt;samp>MOVIE_CONCESSIONS_FOR_GUEST {{o|NPC name}}&lt;/samp>
| Get the [[Movie Theater#Concessions|movie concessions]] shown when watching a movie with the given {{o|NPC name}}. If omitted, the NPC defaults to the one currently invited to watch a movie (or Abigail if none).
|-
| &lt;samp>RANDOM_ARTIFACT_FOR_DIG_SPOT&lt;/samp>
| A random item which is defined in &lt;samp>Data/Objects&lt;/samp> with the &lt;samp>Arch&lt;/samp> (artifact) type, and whose spawn rules in the &lt;samp>Miscellaneous&lt;/samp> field match the current location and whose random probability passes. This is mainly used by [[Artifact Spot|artifact spots]].
|-
| &lt;samp>TOOL_UPGRADES {{o|tool ID}}&lt;/samp>
| The tool upgrades listed in &lt;samp>Data/Shops&lt;/samp> whose conditions match the player's inventory (i.e. the same rules as [[Blacksmith|Clint's tool upgrade shop]]). If {{o|tool ID}} is specified, only upgrades which consume that tool ID are shown.
|}

==Item spawn fields==
''Item spawn fields'' are a common set of fields to use item queries in data assets like [[#Custom machines|machines]] and [[#Custom shops|shops]]. These are only available for data assets which specifically mention they support item spawn fields in their docs.

{| class="wikitable"
|-
! field
! effect
|-
| &lt;samp>ID&lt;/samp>
| The [[Modding:Common data field types#Unique string ID|unique string ID]] for this entry (not the item itself) within the current list.

This is semi-optional — if omitted, it'll be auto-generated from the &lt;samp>ItemId&lt;/samp>, &lt;samp>RandomItemId&lt;/samp>, and &lt;samp>IsRecipe&lt;/samp> fields. However multiple entries with the same ID may cause unintended behavior (e.g. shop items reducing each others' stock limits), so it's often a good idea to set a globally unique ID instead.
|-
| &lt;samp>ItemId&lt;/samp>
| One of:
* the [[#Custom items|qualified or unqualified item ID]] (like &lt;samp>(O)128&lt;/samp> for a [[pufferfish]]);
* or an [[#Item queries|item query]] to dynamically choose one or more items.
|-
| &lt;samp>RandomItemId&lt;/samp>
| ''(Optional)'' A list of item IDs to randomly choose from, using the same format as &lt;samp>ItemId&lt;/samp> (including item queries). If set, &lt;samp>ItemId&lt;/samp> is optional and ignored. Each entry in the list has an equal probability of being chosen. For example:
&lt;syntaxhighlight lang="js">
// wood, stone, or pizza
"RandomItemId": [ "(O)388", "(O)390", "(O)206" ]
&lt;/syntaxhighlight>
|-
| &lt;samp>Condition&lt;/samp>
| ''(Optional)'' A [[Modding:Game state queries|game state query]] which indicates whether this entry should be applied. Defaults to always true.

'''Note:''' not supported for weapon projectiles.
|-
| &lt;samp>PerItemCondition&lt;/samp>
| ''(Optional)'' A [[Modding:Game state queries|game state query]] which indicates whether an item produced from the other fields should be returned. Defaults to always true.

For example, this can be used to filter queries like &lt;samp>RANDOM_ITEMS&lt;/samp>:
&lt;syntaxhighlight lang="js">
// random mineral
"ItemId": "RANDOM_ITEMS (O)",
"PerItemCondition": "ITEM_CATEGORY Target -12"
&lt;/syntaxhighlight>
|-
| &lt;samp>MaxItems&lt;/samp>
| ''(Optional)'' If this entry produces multiple separate item stacks, the maximum number to return. (This does ''not'' affect the size of each stack; see &lt;samp>MinStack&lt;/samp> and &lt;samp>MaxStack&lt;/samp> for that.) Default unlimited.
|-
| &lt;samp>IsRecipe&lt;/samp>
| ''(Optional)'' Whether to get the crafting/cooking recipe for the item, instead of the item itself. Default false.
|-
| &lt;samp>Quality&lt;/samp>
| ''(Optional)'' The quality of the item to find. One of &lt;samp>0&lt;/samp> (normal), &lt;samp>1&lt;/samp> (silver), &lt;samp>2&lt;/samp> (gold), or &lt;samp>4&lt;/samp> (iridium). Invalid values will snap to the closest valid one (e.g. &lt;samp>7&lt;/samp> will become iridium). Default -1, which keeps the value set by the item query (usually 0).
|-
| &lt;samp>MinStack&lt;/samp>
| ''(Optional)'' The item's minimum and default stack size. Default -1, which keeps the value set by the item query (usually 1).
|-
| &lt;samp>MaxStack&lt;/samp>
| ''(Optional)'' If set to a value higher than &lt;samp>MinStack&lt;/samp>, the stack is set to a random value between them (inclusively). Default -1.
|-
|&lt;samp>ObjectInternalName&lt;/samp>
|''(Optional)'' For objects only, the internal name to use. Defaults to the item's name in &lt;samp>Data/Objects&lt;/samp>.
|-
| &lt;samp>ObjectDisplayName&lt;/samp>
| ''(Optional)'' For objects only, a [[Modding:Tokenizable strings|tokenizable string]] for the item's display name. Defaults to the item's display name in &lt;samp>Data/Objects&lt;/samp>. This can optionally contain &lt;code>%DISPLAY_NAME&lt;/code> (the item's default display name) and &lt;code>%PRESERVED_DISPLAY_NAME&lt;/code> (the preserved item's display name if applicable, ''e.g.'' if set via &lt;samp>PreserveId&lt;/samp> in [[#Custom machines|machine data]]).

'''Careful:''' text in this field will be saved permanently in the object's info and won't be updated when the player changes language or the content pack changes. That includes Content Patcher translations (like &lt;code>&lt;nowiki>%DISPLAY_NAME {{i18n: wine}}&lt;/nowiki>&lt;/code>), which will save the translated text for the current language. Instead, add the text to a strings asset like &lt;samp>Strings/Objects&lt;/samp> and then use the [[Modding:Tokenizable strings|&lt;samp>[LocalizedText]&lt;/samp> token]].
{{collapse|For example, here's how you'd create flavored oils with Content Patcher:|content=
&lt;ol>
&lt;li>Add the display name to [[Modding:Translations|your &lt;samp>i18n/default.json&lt;/samp> file]] (with &lt;samp>{0}&lt;/samp> where you want the flavor name):
&lt;syntaxhighlight lang="json">
{
    "flavored-oil": "{0} Oil"
}
&lt;/syntaxhighlight>&lt;/li>
&lt;li>Add the text to a strings asset visible to the game:
{{#tag:syntaxhighlight|&lt;nowiki>
{
    "Format": "&lt;/nowiki>{{Content Patcher version}}&lt;nowiki>",
    "Changes": [
        {
            "Action": "EditData",
            "Target": "Strings/Objects",
            "Entries": {
                "Example.ModId_Oil": "{{i18n: flavored-oil}}"
            }
        }
}&lt;/nowiki>|lang=javascript}}&lt;/li>
&lt;li>Use the [[Modding:Tokenizable strings|&lt;samp>[LocalizedText]&lt;/samp> token]] to get your translation, and pass in the flavor as an argument:
&lt;syntaxhighlight lang="json">
"ObjectDisplayName": "[LocalizedText Strings/Objects:Example.ModId_Oil %PRESERVED_DISPLAY_NAME]",
&lt;/syntaxhighlight>
&lt;/ol>

Now when the player changes language, the object will automatically get the new translation from &lt;samp>Strings/Object&lt;/samp>.
}}
|-
| &lt;samp>ToolUpgradeLevel&lt;/samp>
| ''(Optional)'' For tools only, the initial upgrade level for the tool when created (like [[Axes|Copper vs Gold Axe]], or [[Training Rod]] vs [[Iridium Rod]]). Default -1, which keeps the value set by the item query (usually 0).
|-
| &lt;samp>QualityModifiers&lt;/samp>&lt;br />&lt;samp>StackModifiers&lt;/samp>
| ''(Optional)'' [[#Quantity modifiers|Quantity modifiers]] applied to the &lt;samp>Quality&lt;/samp> or &lt;samp>Stack&lt;/samp> value. Default none.

The quality modifiers operate on the numeric quality values (''i.e.'' &lt;samp>0&lt;/samp> = normal, &lt;samp>1&lt;/samp> = silver, &lt;samp>2&lt;/samp> = gold, and &lt;samp>4&lt;/samp> = iridium). For example, silver × 2 is gold.
|-
| &lt;samp>QualityModifierMode&lt;/samp>&lt;br />&lt;samp>StackModifierMode&lt;/samp>
| ''(Optional)'' [[#Quantity modifiers|Quantity modifier modes]] which indicate what to do if multiple modifiers in the &lt;samp>QualityModifiers&lt;/samp> or &lt;samp>StackModifiers&lt;/samp> field apply at the same time. Default &lt;samp>Stack&lt;/samp>.
|-
| &lt;samp>ModData&lt;/samp>
| ''(Optional)'' The [[Modding:Common data field types#Mod data|mod data fields]] to add to created items. Default none.

For example:
&lt;syntaxhighlight lang="js">
"ModData": {
    "Example.ModId_FieldName": "some custom data"
}
&lt;/syntaxhighlight>
|}

==For C# mod authors==
===Use queries in custom data assets===
You can use the &lt;samp>ItemQueryResolver&lt;/samp> class to parse item queries.

For example, let's say a custom data model uses [[#Item spawn fields|item spawn fields]] to choose which gifts are added to the starting gift box:
&lt;syntaxhighlight lang="c#">
public class InitialGiftsModel
{
    public List&lt;GenericSpawnItemData> Items = new();
}
&lt;/syntaxhighlight>

You can spawn items from it like this:
&lt;syntaxhighlight lang="c#">
ItemQueryContext itemQueryContext = new();
foreach (GenericSpawnItemData entry in model.Items)
{
    Item item = ItemQueryResolver.TryResolveRandomItem(entry, itemQueryContext, logError: (query, message) => this.Monitor.Log($"Failed parsing item query '{query}': {message}", LogLevel.Warn));
    // or TryResolve to get all items
}
&lt;/syntaxhighlight>

You can also use &lt;samp>GenericSpawnItemDataWithCondition&lt;/samp> to combine it with [[Modding:Game state queries|game state queries]]:
&lt;syntaxhighlight lang="c#">
ItemQueryContext itemQueryContext = new();
foreach (GenericSpawnItemDataWithCondition entry in model.Items)
{
    if (!GameStateQuery.CheckConditions(entry.Condition))
        continue;

    Item item = ItemQueryResolver.TryResolveRandomItem(entry, itemQueryContext, logError: (query, message) => this.Monitor.Log($"Failed parsing item query '{query}': {message}", LogLevel.Warn));
}
&lt;/syntaxhighlight>

===Add custom item queries===
You can define new item queries &lt;code>ItemQueryResolver.Register("Example.ModId_QueryName", handleQueryMethod)&lt;/code>. To avoid conflicts, custom query names should apply the [[Modding:Common data field types#Unique string ID|unique string ID]] conventions.

[[Category:Modding]]
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Templates used on this page:
</p></div><ul>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:Collapse" title="Template:Collapse">Template:Collapse</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:Collapse&amp;action=edit" title="Template:Collapse">view source</a>) </li><li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:Content_Patcher_version" title="Template:Content Patcher version">Template:Content Patcher version</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:Content_Patcher_version&amp;action=edit" title="Template:Content Patcher version">view source</a>) </li><li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:O" title="Template:O">Template:O</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:O&amp;action=edit" title="Template:O">view source</a>) </li><li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:Price" title="Template:Price">Template:Price</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:Price&amp;action=edit" title="Template:Price">view source</a>) </li><li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:T" title="Template:T">Template:T</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:T&amp;action=edit" title="Template:T">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">Modding:Item queries</a>.</p>
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries">https://stardewvalleywiki.com/Modding:Item_queries</a>"</div>
</div>
			<div class="post-content" id="page-secondary-actions">
			
			</div>
		</main>
		<footer class="mw-footer minerva-footer">
		
		<div class="post-content footer-content">
			
			<h2>Stardew Valley Wiki</h2>
			<div class="license">Content is available under <a class="external" rel="nofollow" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</div>
			<ul class="footer-info hlist hlist-separated">
				
			</ul>
			<ul class="footer-places hlist hlist-separated">
				<li id="footer-places-privacy"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:Privacy_policy" title="Stardew Valley Wiki:Privacy policy">Privacy policy</a></li><li id="footer-places-about"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:About" title="Stardew Valley Wiki:About">About Stardew Valley Wiki</a></li><li id="footer-places-disclaimer"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:General_disclaimer" title="Stardew Valley Wiki:General disclaimer">Disclaimers</a></li><li id="footer-places-desktop-toggle"><a id="mw-mf-display-toggle" href="../../external.html?link=http://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Item_queries&amp;action=edit&amp;mobileaction=toggle_view_desktop">Desktop</a></li>
			</ul>
		</div>
		</footer>
	</div>
</div>
<div class="mw-notification-area" data-mw="interface"></div>
<!-- v:8.3.0 -->

<script src="../../external.html?link=https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(window.NORLQ=window.NORLQ||[]).push(function(){var ns,i,p,img;ns=document.getElementsByTagName('noscript');for(i=0;i<ns.length;i++){p=ns[i].nextSibling;if(p&&p.className&&p.className.indexOf('lazy-image-placeholder')>-1){img=document.createElement('img');img.setAttribute('src',p.getAttribute('data-src'));img.setAttribute('width',p.getAttribute('data-width'));img.setAttribute('height',p.getAttribute('data-height'));img.setAttribute('alt',p.getAttribute('data-alt'));p.parentNode.replaceChild(img,p);}}});</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":127});});</script>		</body>
		

</html>

