
<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from stardewvalleywiki.com/mediawiki/index.php?diff=148068 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 11 Apr 2024 07:06:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Difference between revisions of "Modding:Migrate to Stardew Valley 1.6" - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"3c8f93193789087b74b5b44b","wgCSPNonce":!1,"wgCanonicalNamespace":"Modding","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":570,"wgPageName":"Modding:Migrate_to_Stardew_Valley_1.6","wgTitle":"Migrate to Stardew Valley 1.6","wgCurRevisionId":165377,"wgRevisionId":148068,"wgArticleId":13596,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Modding"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Modding:Migrate_to_Stardew_Valley_1.6","wgRelevantArticleId":13596,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],
"wgRestrictionMove":[],"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,"watchlist":!1,"tagline":!1},"wgCargoMapClusteringMinimum":80,"wgCargoMonthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"wgCargoMonthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgCargoWeekDays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"wgCargoWeekDaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"wgDiffOldId":148067,"wgDiffNewId":148068,"wgSiteNoticeId":"1.0"};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","mediawiki.interface.helpers.styles":"ready","mediawiki.diff.styles":"ready","ext.pygments":"ready","skins.vector.styles.legacy":"ready","jquery.tablesorter.styles":"ready","jquery.makeCollapsible.styles":"ready","mediawiki.toc.styles":"ready",
"ext.dismissableSiteNotice.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","mediawiki.page.ready","jquery.tablesorter","jquery.makeCollapsible","mediawiki.toc","skins.vector.legacy.html","ext.dismissableSiteNotice"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="loadcf6b.css?lang=en&amp;modules=ext.dismissableSiteNotice.styles%7Cext.pygments%7Cjquery.makeCollapsible.styles%7Cjquery.tablesorter.styles%7Cmediawiki.diff.styles%7Cmediawiki.interface.helpers.styles%7Cmediawiki.toc.styles%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector"/>
<script async="" src="load52c0.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load2f5e.css?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="description" content="←Index"/>
<link rel="shortcut icon" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="../../external.html?link=http://stardewvalleywiki.com/mediawiki/api.php?action=rsd"/>
<link rel="license" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Stardew Valley Wiki Atom feed" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<meta property="og:title" content="Difference between revisions of &quot;Modding:Migrate to Stardew Valley 1.6&quot; - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.6"/>
<meta property="og:description" content="←Index"/>
<meta property="og:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="article:modified_time" content="2023-05-06T17:07:31Z"/>
<meta property="article:published_time" content="2023-05-06T17:07:31Z"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="Difference between revisions of &quot;Modding:Migrate to Stardew Valley 1.6&quot; - Stardew Valley Wiki"/>
<meta property="twitter:description" content="←Index"/>
<meta property="twitter:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"Difference between revisions of \"Modding:Migrate to Stardew Valley 1.6\" - Stardew Valley Wiki","headline":"Difference between revisions of \"Modding:Migrate to Stardew Valley 1.6\" - Stardew Valley Wiki","mainEntityOfPage":"Difference between revisions of \"Modding:Migrate to Stardew Valley 1.6\"","identifier":"https:\/\/stardewvalleywiki.com\/Modding:Migrate_to_Stardew_Valley_1.6","url":"https:\/\/stardewvalleywiki.com\/Modding:Migrate_to_Stardew_Valley_1.6","description":"\u2190Index","dateModified":"2023-05-06T17:07:31Z","datePublished":"2023-05-06T17:07:31Z","image":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-570 ns-subject page-Modding_Migrate_to_Stardew_Valley_1_6 rootpage-Modding_Migrate_to_Stardew_Valley_1_6 skin-vector action-view minerva--history-page-action-enabled skin-vector-legacy">
<div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice" class="mw-body-content"><div id="mw-dismissablenotice-anonplace"></div><script>(function(){var node=document.getElementById("mw-dismissablenotice-anonplace");if(node){node.outerHTML="\u003Cdiv class=\"mw-dismissable-notice\"\u003E\u003Cdiv class=\"mw-dismissable-notice-close\"\u003E[\u003Ca tabindex=\"0\" role=\"button\"\u003Edismiss\u003C/a\u003E]\u003C/div\u003E\u003Cdiv class=\"mw-dismissable-notice-body\"\u003E\u003Cdiv id=\"localNotice\" lang=\"en\" dir=\"ltr\"\u003E\u003Cp\u003E\u003Cb\u003ENew editors: Please read \u003Ca href=\"/Help:Editing\" title=\"Help:Editing\"\u003EHelp:Editing\u003C/a\u003E before diving in!\u003C/b\u003E\n\u003Cbr /\u003E\u003Cb\u003EChanges made without adding a \"History\" section will be removed. Thank you for your understanding.\u003C/b\u003E\n\u003C/p\u003E\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E";}}());</script></div>
	<div class="mw-indicators mw-body-content">
	</div>
	<h1 id="firstHeading" class="firstHeading" lang="en">Difference between revisions of "Modding:Migrate to Stardew Valley 1.6"</h1>
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From Stardew Valley Wiki</div>
		<div id="contentSub"></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="diff diff-contentalign-left diff-editfont-monospace" data-mw="interface">
				<col class="diff-marker" />
				<col class="diff-content" />
				<col class="diff-marker" />
				<col class="diff-content" />
				<tr class="diff-title" lang="en">
				<td colspan="2" class="diff-otitle"><div id="mw-diff-otitle1"><strong><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;oldid=148067" title="Modding:Migrate to Stardew Valley 1.6">Revision as of 17:02, 6 May 2023</a> <span class="mw-diff-edit">(<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=edit&amp;oldid=148067" title="Modding:Migrate to Stardew Valley 1.6">view source</a>)</span></strong></div><div id="mw-diff-otitle2"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=User:Atravita&amp;action=edit&amp;redlink=1" class="new mw-userlink" title="User:Atravita (page does not exist)"><bdi>Atravita</bdi></a> <span class="mw-usertoollinks">(<a href="../../external.html?link=https://stardewvalleywiki.com/User_talk:Atravita" class="mw-usertoollinks-talk" title="User talk:Atravita">talk</a> | <a href="../../external.html?link=https://stardewvalleywiki.com/Special:Contributions/Atravita" class="mw-usertoollinks-contribs" title="Special:Contributions/Atravita">contribs</a>)</span></div><div id="mw-diff-otitle3"></div><div id="mw-diff-otitle5"></div><div id="mw-diff-otitle4"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;diff=prev&amp;oldid=148067" title="Modding:Migrate to Stardew Valley 1.6" id="differences-prevlink">← Older edit</a></div></td>
				<td colspan="2" class="diff-ntitle"><div id="mw-diff-ntitle1"><strong><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;oldid=148068" title="Modding:Migrate to Stardew Valley 1.6">Revision as of 17:07, 6 May 2023</a> <span class="mw-diff-edit">(<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=edit&amp;oldid=148068" title="Modding:Migrate to Stardew Valley 1.6">view source</a>)</span> </strong></div><div id="mw-diff-ntitle2"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=User:Atravita&amp;action=edit&amp;redlink=1" class="new mw-userlink" title="User:Atravita (page does not exist)"><bdi>Atravita</bdi></a> <span class="mw-usertoollinks">(<a href="../../external.html?link=https://stardewvalleywiki.com/User_talk:Atravita" class="mw-usertoollinks-talk" title="User talk:Atravita">talk</a> | <a href="../../external.html?link=https://stardewvalleywiki.com/Special:Contributions/Atravita" class="mw-usertoollinks-contribs" title="Special:Contributions/Atravita">contribs</a>)</span> </div><div id="mw-diff-ntitle3"></div><div id="mw-diff-ntitle5"></div><div id="mw-diff-ntitle4"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;diff=next&amp;oldid=148068" title="Modding:Migrate to Stardew Valley 1.6" id="differences-nextlink">Newer edit →</a></div></td>
				</tr><tr><td colspan="2" class="diff-lineno" id="mw-diff-left-l7928" >Line 7,928:</td>
<td colspan="2" class="diff-lineno">Line 7,928:</td></tr>
<tr><td class='diff-marker'> </td><td class='diff-context'><div>| ✘ will remove changes</div></td><td class='diff-marker'> </td><td class='diff-context'><div>| ✘ will remove changes</div></td></tr>
<tr><td class='diff-marker'> </td><td class='diff-context'><div>| ✓ mostly unaffected</div></td><td class='diff-marker'> </td><td class='diff-context'><div>| ✓ mostly unaffected</div></td></tr>
<tr><td colspan="2"> </td><td class='diff-marker'>+</td><td class='diff-addedline'><div><ins class="diffchange">|-</ins></div></td></tr>
<tr><td colspan="2"> </td><td class='diff-marker'>+</td><td class='diff-addedline'><div><ins class="diffchange">| &lt;samp&gt;Data/FarmAnimals&lt;/samp&gt;</ins></div></td></tr>
<tr><td colspan="2"> </td><td class='diff-marker'>+</td><td class='diff-addedline'><div><ins class="diffchange">| [[#Custom farm animals|completely overhauled]]</ins></div></td></tr>
<tr><td colspan="2"> </td><td class='diff-marker'>+</td><td class='diff-addedline'><div><ins class="diffchange">| '''✘ broken'''</ins></div></td></tr>
<tr><td colspan="2"> </td><td class='diff-marker'>+</td><td class='diff-addedline'><div><ins class="diffchange">| </ins></div></td></tr>
<tr><td class='diff-marker'> </td><td class='diff-context'><div>|-</div></td><td class='diff-marker'> </td><td class='diff-context'><div>|-</div></td></tr>
<tr><td class='diff-marker'> </td><td class='diff-context'><div>| &lt;samp&gt;Data/Festivals/spring13&lt;/samp&gt;&lt;br /&gt;&lt;samp&gt;Data/Festivals/spring24&lt;/samp&gt;&lt;br /&gt;&lt;samp&gt;Data/Festivals/summer11&lt;/samp&gt;&lt;br /&gt;&lt;samp&gt;Data/Festivals/summer28&lt;/samp&gt;&lt;br /&gt;&lt;samp&gt;Data/Festivals/winter8&lt;/samp&gt;</div></td><td class='diff-marker'> </td><td class='diff-context'><div>| &lt;samp&gt;Data/Festivals/spring13&lt;/samp&gt;&lt;br /&gt;&lt;samp&gt;Data/Festivals/spring24&lt;/samp&gt;&lt;br /&gt;&lt;samp&gt;Data/Festivals/summer11&lt;/samp&gt;&lt;br /&gt;&lt;samp&gt;Data/Festivals/summer28&lt;/samp&gt;&lt;br /&gt;&lt;samp&gt;Data/Festivals/winter8&lt;/samp&gt;</div></td></tr>
</table><hr class='diff-hr' id='mw-oldid' />
		<h2 class='diff-currentversion-title'>Revision as of 17:07, 6 May 2023</h2>
<div class="mw-parser-output"><p>←<a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Index" title="Modding:Index">Index</a>
</p>
<div style="border: 1px solid orange; border-left: 1em solid orange; padding: 0.5em 1em; border-radius: 5px;">
<p><b>This page is for mod authors. Players: see <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mod_compatibility" title="Modding:Mod compatibility">Modding:Mod compatibility</a> instead.</b>
</p>
</div>
<div style="border: 1px solid gray; border-left: 1em solid gray; padding: 0.5em 1em; border-radius: 5px;"><div>The following describes the upcoming Stardew Valley 1.6.0, and may change before release.</div>
</div>
<p>This page explains how to update your mods for compatibility with the next major game version (tentatively <a href="../../external.html?link=https://stardewvalleywiki.com/Version_History#1.6.0" title="Version History">Stardew Valley 1.6.0</a>), and documents some of the changes and new functionality. See also <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_SMAPI_4.0" title="Modding:Migrate to SMAPI 4.0"><i>Migrate to SMAPI 4.0</i></a>.
</p><p><b>This describes an unreleased alpha version of the game. Things <i>will</i> change before it's released!</b>
</p>
<style data-mw-deduplicate="TemplateStyles:r145264">.mw-parser-output .toclimit-2 .toclevel-1 ul,.mw-parser-output .toclimit-3 .toclevel-2 ul,.mw-parser-output .toclimit-4 .toclevel-3 ul,.mw-parser-output .toclimit-5 .toclevel-4 ul,.mw-parser-output .toclimit-6 .toclevel-5 ul,.mw-parser-output .toclimit-7 .toclevel-6 ul{display:none}</style><div class="toclimit-3"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#FAQs"><span class="tocnumber">1</span> <span class="toctext">FAQs</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#What.27s_changing.3F"><span class="tocnumber">1.1</span> <span class="toctext">What's changing?</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Is_this_the_modapocalypse.3F"><span class="tocnumber">1.2</span> <span class="toctext">Is this the modapocalypse?</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#How_to_update_your_mod"><span class="tocnumber">1.3</span> <span class="toctext">How to update your mod</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#What.27s_new_architecturally.3F"><span class="tocnumber">2</span> <span class="toctext">What's new architecturally?</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#.NET_6"><span class="tocnumber">2.1</span> <span class="toctext">.NET 6</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#What.27s_new_for_items"><span class="tocnumber">3</span> <span class="toctext">What's new for items</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Custom_items"><span class="tocnumber">3.1</span> <span class="toctext">Custom items</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Overview"><span class="tocnumber">3.1.1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Item_references"><span class="tocnumber">3.1.2</span> <span class="toctext">Item references</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Item_types"><span class="tocnumber">3.1.3</span> <span class="toctext">Item types</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Define_a_custom_item"><span class="tocnumber">3.1.4</span> <span class="toctext">Define a custom item</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Error_items"><span class="tocnumber">3.1.5</span> <span class="toctext">Error items</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#For_C.23_mods"><span class="tocnumber">3.1.6</span> <span class="toctext">For C# mods</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#Custom_crops"><span class="tocnumber">3.2</span> <span class="toctext">Custom crops</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Custom_fences"><span class="tocnumber">3.3</span> <span class="toctext">Custom fences</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Custom_floors_.28craftable.29_.26_paths"><span class="tocnumber">3.4</span> <span class="toctext">Custom floors (craftable) &amp; paths</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Custom_machines"><span class="tocnumber">3.5</span> <span class="toctext">Custom machines</span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Item_processing_rules"><span class="tocnumber">3.5.1</span> <span class="toctext">Item processing rules</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Behavior_tweaks"><span class="tocnumber">3.5.2</span> <span class="toctext">Behavior tweaks</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Audio_.26_visuals"><span class="tocnumber">3.5.3</span> <span class="toctext">Audio &amp; visuals</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Player_interaction_messages"><span class="tocnumber">3.5.4</span> <span class="toctext">Player interaction messages</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#Advanced_logic"><span class="tocnumber">3.5.5</span> <span class="toctext">Advanced logic</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#Interacting_with_machines_in_C.23"><span class="tocnumber">3.5.6</span> <span class="toctext">Interacting with machines in C#</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-25"><a href="#Custom_melee_weapons"><span class="tocnumber">3.6</span> <span class="toctext">Custom melee weapons</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#Basic_weapon_info"><span class="tocnumber">3.6.1</span> <span class="toctext">Basic weapon info</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#Appearance"><span class="tocnumber">3.6.2</span> <span class="toctext">Appearance</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#Stats"><span class="tocnumber">3.6.3</span> <span class="toctext">Stats</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Game_logic"><span class="tocnumber">3.6.4</span> <span class="toctext">Game logic</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#Advanced"><span class="tocnumber">3.6.5</span> <span class="toctext">Advanced</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31"><a href="#Custom_movie_concessions"><span class="tocnumber">3.7</span> <span class="toctext">Custom movie concessions</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Custom_museum_donations_.26_rewards"><span class="tocnumber">3.8</span> <span class="toctext">Custom museum donations &amp; rewards</span></a>
<ul>
<li class="toclevel-3 tocsection-33"><a href="#Format"><span class="tocnumber">3.8.1</span> <span class="toctext">Format</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="#Achievements"><span class="tocnumber">3.8.2</span> <span class="toctext">Achievements</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-35"><a href="#Custom_fruit_trees"><span class="tocnumber">3.9</span> <span class="toctext">Custom fruit trees</span></a>
<ul>
<li class="toclevel-3 tocsection-36"><a href="#Data_format"><span class="tocnumber">3.9.1</span> <span class="toctext">Data format</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="#Fruit_items"><span class="tocnumber">3.9.2</span> <span class="toctext">Fruit items</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#Spawning_wild_trees"><span class="tocnumber">3.9.3</span> <span class="toctext">Spawning wild trees</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-39"><a href="#Custom_tools"><span class="tocnumber">3.10</span> <span class="toctext">Custom tools</span></a>
<ul>
<li class="toclevel-3 tocsection-40"><a href="#Basic_tool_data"><span class="tocnumber">3.10.1</span> <span class="toctext">Basic tool data</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#Appearance_2"><span class="tocnumber">3.10.2</span> <span class="toctext">Appearance</span></a></li>
<li class="toclevel-3 tocsection-42"><a href="#Upgrades"><span class="tocnumber">3.10.3</span> <span class="toctext">Upgrades</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="#Game_logic_2"><span class="tocnumber">3.10.4</span> <span class="toctext">Game logic</span></a></li>
<li class="toclevel-3 tocsection-44"><a href="#Extensibility"><span class="tocnumber">3.10.5</span> <span class="toctext">Extensibility</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-45"><a href="#Custom_wild_trees"><span class="tocnumber">3.11</span> <span class="toctext">Custom wild trees</span></a>
<ul>
<li class="toclevel-3 tocsection-46"><a href="#Data_format_2"><span class="tocnumber">3.11.1</span> <span class="toctext">Data format</span></a></li>
<li class="toclevel-3 tocsection-47"><a href="#Spawning_wild_trees_2"><span class="tocnumber">3.11.2</span> <span class="toctext">Spawning wild trees</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-48"><a href="#Default_recipes"><span class="tocnumber">3.12</span> <span class="toctext">Default recipes</span></a></li>
<li class="toclevel-2 tocsection-49"><a href="#Hats_on_aquarium_fish"><span class="tocnumber">3.13</span> <span class="toctext">Hats on aquarium fish</span></a></li>
<li class="toclevel-2 tocsection-50"><a href="#New_context_tags"><span class="tocnumber">3.14</span> <span class="toctext">New context tags</span></a></li>
<li class="toclevel-2 tocsection-51"><a href="#Inventory_class"><span class="tocnumber">3.15</span> <span class="toctext">Inventory class</span></a></li>
<li class="toclevel-2 tocsection-52"><a href="#ItemContextTagManager_class"><span class="tocnumber">3.16</span> <span class="toctext">ItemContextTagManager class</span></a></li>
<li class="toclevel-2 tocsection-53"><a href="#Other_item_changes"><span class="tocnumber">3.17</span> <span class="toctext">Other item changes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-54"><a href="#What.27s_new_for_locations_.26_weather"><span class="tocnumber">4</span> <span class="toctext">What's new for locations &amp; weather</span></a>
<ul>
<li class="toclevel-2 tocsection-55"><a href="#Custom_locations"><span class="tocnumber">4.1</span> <span class="toctext">Custom locations</span></a></li>
<li class="toclevel-2 tocsection-56"><a href="#Custom_location_contexts"><span class="tocnumber">4.2</span> <span class="toctext">Custom location contexts</span></a>
<ul>
<li class="toclevel-3 tocsection-57"><a href="#Vanilla_contexts"><span class="tocnumber">4.2.1</span> <span class="toctext">Vanilla contexts</span></a></li>
<li class="toclevel-3 tocsection-58"><a href="#Format_2"><span class="tocnumber">4.2.2</span> <span class="toctext">Format</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-59"><a href="#Custom_garbage_cans"><span class="tocnumber">4.3</span> <span class="toctext">Custom garbage cans</span></a>
<ul>
<li class="toclevel-3 tocsection-60"><a href="#Format_3"><span class="tocnumber">4.3.1</span> <span class="toctext">Format</span></a></li>
<li class="toclevel-3 tocsection-61"><a href="#Example_new_garbage_can"><span class="tocnumber">4.3.2</span> <span class="toctext">Example new garbage can</span></a></li>
<li class="toclevel-3 tocsection-62"><a href="#Example_change_for_existing_garbage_can"><span class="tocnumber">4.3.3</span> <span class="toctext">Example change for existing garbage can</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-63"><a href="#Custom_map_actions"><span class="tocnumber">4.4</span> <span class="toctext">Custom map actions</span></a></li>
<li class="toclevel-2 tocsection-64"><a href="#Custom_map_layers"><span class="tocnumber">4.5</span> <span class="toctext">Custom map layers</span></a></li>
<li class="toclevel-2 tocsection-65"><a href="#Custom_minecarts"><span class="tocnumber">4.6</span> <span class="toctext">Custom minecarts</span></a>
<ul>
<li class="toclevel-3 tocsection-66"><a href="#Example"><span class="tocnumber">4.6.1</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-67"><a href="#Custom_passive_festivals"><span class="tocnumber">4.7</span> <span class="toctext">Custom passive festivals</span></a>
<ul>
<li class="toclevel-3 tocsection-68"><a href="#Data_format_3"><span class="tocnumber">4.7.1</span> <span class="toctext">Data format</span></a></li>
<li class="toclevel-3 tocsection-69"><a href="#NPC_schedules"><span class="tocnumber">4.7.2</span> <span class="toctext">NPC schedules</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-70"><a href="#Custom_planting_restrictions"><span class="tocnumber">4.8</span> <span class="toctext">Custom planting restrictions</span></a></li>
<li class="toclevel-2 tocsection-71"><a href="#Custom_weather"><span class="tocnumber">4.9</span> <span class="toctext">Custom weather</span></a></li>
<li class="toclevel-2 tocsection-72"><a href="#Custom_world_maps"><span class="tocnumber">4.10</span> <span class="toctext">Custom world maps</span></a>
<ul>
<li class="toclevel-3 tocsection-73"><a href="#Concepts"><span class="tocnumber">4.10.1</span> <span class="toctext">Concepts</span></a></li>
<li class="toclevel-3 tocsection-74"><a href="#Format_4"><span class="tocnumber">4.10.2</span> <span class="toctext">Format</span></a></li>
<li class="toclevel-3 tocsection-75"><a href="#Example_2"><span class="tocnumber">4.10.3</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-3 tocsection-76"><a href="#Real-time_positioning"><span class="tocnumber">4.10.4</span> <span class="toctext">Real-time positioning</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-77"><a href="#New_map_properties"><span class="tocnumber">4.11</span> <span class="toctext">New map properties</span></a>
<ul>
<li class="toclevel-3 tocsection-78"><a href="#Warps_.26_map_positions"><span class="tocnumber">4.11.1</span> <span class="toctext">Warps &amp; map positions</span></a></li>
<li class="toclevel-3 tocsection-79"><a href="#Audio"><span class="tocnumber">4.11.2</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-3 tocsection-80"><a href="#Crops"><span class="tocnumber">4.11.3</span> <span class="toctext">Crops</span></a></li>
<li class="toclevel-3 tocsection-81"><a href="#Building_construction"><span class="tocnumber">4.11.4</span> <span class="toctext">Building construction</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-82"><a href="#Other_map_property_changes"><span class="tocnumber">4.12</span> <span class="toctext">Other map property changes</span></a></li>
<li class="toclevel-2 tocsection-83"><a href="#Tile_property_changes"><span class="tocnumber">4.13</span> <span class="toctext">Tile property changes</span></a></li>
<li class="toclevel-2 tocsection-84"><a href="#Other_location.2Fmap_changes"><span class="tocnumber">4.14</span> <span class="toctext">Other location/map changes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-85"><a href="#What.27s_new_for_buildings"><span class="tocnumber">5</span> <span class="toctext">What's new for buildings</span></a>
<ul>
<li class="toclevel-2 tocsection-86"><a href="#Custom_buildings"><span class="tocnumber">5.1</span> <span class="toctext">Custom buildings</span></a>
<ul>
<li class="toclevel-3 tocsection-87"><a href="#Required_fields"><span class="tocnumber">5.1.1</span> <span class="toctext">Required fields</span></a></li>
<li class="toclevel-3 tocsection-88"><a href="#Construction"><span class="tocnumber">5.1.2</span> <span class="toctext">Construction</span></a></li>
<li class="toclevel-3 tocsection-89"><a href="#Upgrades_2"><span class="tocnumber">5.1.3</span> <span class="toctext">Upgrades</span></a></li>
<li class="toclevel-3 tocsection-90"><a href="#Exterior_behavior"><span class="tocnumber">5.1.4</span> <span class="toctext">Exterior behavior</span></a></li>
<li class="toclevel-3 tocsection-91"><a href="#Exterior_appearance"><span class="tocnumber">5.1.5</span> <span class="toctext">Exterior appearance</span></a></li>
<li class="toclevel-3 tocsection-92"><a href="#Interior"><span class="tocnumber">5.1.6</span> <span class="toctext">Interior</span></a></li>
<li class="toclevel-3 tocsection-93"><a href="#Item_processing"><span class="tocnumber">5.1.7</span> <span class="toctext">Item processing</span></a></li>
<li class="toclevel-3 tocsection-94"><a href="#Tile_interactions"><span class="tocnumber">5.1.8</span> <span class="toctext">Tile interactions</span></a></li>
<li class="toclevel-3 tocsection-95"><a href="#Advanced_2"><span class="tocnumber">5.1.9</span> <span class="toctext">Advanced</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-96"><a href="#Build_anywhere"><span class="tocnumber">5.2</span> <span class="toctext">Build anywhere</span></a></li>
<li class="toclevel-2 tocsection-97"><a href="#Other_building_changes"><span class="tocnumber">5.3</span> <span class="toctext">Other building changes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-98"><a href="#What.27s_new_for_NPCs"><span class="tocnumber">6</span> <span class="toctext">What's new for NPCs</span></a>
<ul>
<li class="toclevel-2 tocsection-99"><a href="#Custom_NPCs"><span class="tocnumber">6.1</span> <span class="toctext">Custom NPCs</span></a></li>
<li class="toclevel-2 tocsection-100"><a href="#Custom_farm_animals"><span class="tocnumber">6.2</span> <span class="toctext">Custom farm animals</span></a>
<ul>
<li class="toclevel-3 tocsection-101"><a href="#Main_info"><span class="tocnumber">6.2.1</span> <span class="toctext">Main info</span></a></li>
<li class="toclevel-3 tocsection-102"><a href="#Animal_shop"><span class="tocnumber">6.2.2</span> <span class="toctext">Animal shop</span></a></li>
<li class="toclevel-3 tocsection-103"><a href="#Hatching"><span class="tocnumber">6.2.3</span> <span class="toctext">Hatching</span></a></li>
<li class="toclevel-3 tocsection-104"><a href="#Growth"><span class="tocnumber">6.2.4</span> <span class="toctext">Growth</span></a></li>
<li class="toclevel-3 tocsection-105"><a href="#Produce"><span class="tocnumber">6.2.5</span> <span class="toctext">Produce</span></a></li>
<li class="toclevel-3 tocsection-106"><a href="#Audio_.26_sprite"><span class="tocnumber">6.2.6</span> <span class="toctext">Audio &amp; sprite</span></a></li>
<li class="toclevel-3 tocsection-107"><a href="#Player_profession_effects"><span class="tocnumber">6.2.7</span> <span class="toctext">Player profession effects</span></a></li>
<li class="toclevel-3 tocsection-108"><a href="#Behavior"><span class="tocnumber">6.2.8</span> <span class="toctext">Behavior</span></a></li>
<li class="toclevel-3 tocsection-109"><a href="#Other"><span class="tocnumber">6.2.9</span> <span class="toctext">Other</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-110"><a href="#Custom_pets"><span class="tocnumber">6.3</span> <span class="toctext">Custom pets</span></a>
<ul>
<li class="toclevel-3 tocsection-111"><a href="#Format_5"><span class="tocnumber">6.3.1</span> <span class="toctext">Format</span></a></li>
<li class="toclevel-3 tocsection-112"><a href="#Pet_bowl"><span class="tocnumber">6.3.2</span> <span class="toctext">Pet bowl</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-113"><a href="#Custom_monster_eradication_goals"><span class="tocnumber">6.4</span> <span class="toctext">Custom monster eradication goals</span></a></li>
<li class="toclevel-2 tocsection-114"><a href="#Custom_phone_calls"><span class="tocnumber">6.5</span> <span class="toctext">Custom phone calls</span></a>
<ul>
<li class="toclevel-3 tocsection-115"><a href="#Incoming_calls"><span class="tocnumber">6.5.1</span> <span class="toctext">Incoming calls</span></a></li>
<li class="toclevel-3 tocsection-116"><a href="#Custom_handlers_in_C.23"><span class="tocnumber">6.5.2</span> <span class="toctext">Custom handlers in C#</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-117"><a href="#Custom_shops"><span class="tocnumber">6.6</span> <span class="toctext">Custom shops</span></a>
<ul>
<li class="toclevel-3 tocsection-118"><a href="#Format_6"><span class="tocnumber">6.6.1</span> <span class="toctext">Format</span></a></li>
<li class="toclevel-3 tocsection-119"><a href="#Open_a_custom_shop"><span class="tocnumber">6.6.2</span> <span class="toctext">Open a custom shop</span></a></li>
<li class="toclevel-3 tocsection-120"><a href="#Examples"><span class="tocnumber">6.6.3</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-3 tocsection-121"><a href="#Vanilla_shop_IDs"><span class="tocnumber">6.6.4</span> <span class="toctext">Vanilla shop IDs</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-122"><a href="#Dialogue_changes"><span class="tocnumber">6.7</span> <span class="toctext">Dialogue changes</span></a></li>
<li class="toclevel-2 tocsection-123"><a href="#Schedule_changes"><span class="tocnumber">6.8</span> <span class="toctext">Schedule changes</span></a></li>
<li class="toclevel-2 tocsection-124"><a href="#Other_NPC_changes"><span class="tocnumber">6.9</span> <span class="toctext">Other NPC changes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-125"><a href="#What.27s_new_for_everything_else"><span class="tocnumber">7</span> <span class="toctext">What's new for everything else</span></a>
<ul>
<li class="toclevel-2 tocsection-126"><a href="#Buff_overhaul"><span class="tocnumber">7.1</span> <span class="toctext">Buff overhaul</span></a></li>
<li class="toclevel-2 tocsection-127"><a href="#Custom_audio"><span class="tocnumber">7.2</span> <span class="toctext">Custom audio</span></a>
<ul>
<li class="toclevel-3 tocsection-128"><a href="#Format_7"><span class="tocnumber">7.2.1</span> <span class="toctext">Format</span></a></li>
<li class="toclevel-3 tocsection-129"><a href="#Example_3"><span class="tocnumber">7.2.2</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-3 tocsection-130"><a href="#Other_changes"><span class="tocnumber">7.2.3</span> <span class="toctext">Other changes</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-131"><a href="#Custom_data_fields"><span class="tocnumber">7.3</span> <span class="toctext">Custom data fields</span></a></li>
<li class="toclevel-2 tocsection-132"><a href="#Custom_giant_crops"><span class="tocnumber">7.4</span> <span class="toctext">Custom giant crops</span></a></li>
<li class="toclevel-2 tocsection-133"><a href="#Custom_wedding_event"><span class="tocnumber">7.5</span> <span class="toctext">Custom wedding event</span></a></li>
<li class="toclevel-2 tocsection-134"><a href="#Game_state_queries"><span class="tocnumber">7.6</span> <span class="toctext">Game state queries</span></a>
<ul>
<li class="toclevel-3 tocsection-135"><a href="#Conditions"><span class="tocnumber">7.6.1</span> <span class="toctext">Conditions</span></a></li>
<li class="toclevel-3 tocsection-136"><a href="#Target_location"><span class="tocnumber">7.6.2</span> <span class="toctext">Target location</span></a></li>
<li class="toclevel-3 tocsection-137"><a href="#Target_player"><span class="tocnumber">7.6.3</span> <span class="toctext">Target player</span></a></li>
<li class="toclevel-3 tocsection-138"><a href="#Using_queries_elsewhere"><span class="tocnumber">7.6.4</span> <span class="toctext">Using queries elsewhere</span></a></li>
<li class="toclevel-3 tocsection-139"><a href="#Extensibility_2"><span class="tocnumber">7.6.5</span> <span class="toctext">Extensibility</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-140"><a href="#Item_queries"><span class="tocnumber">7.7</span> <span class="toctext">Item queries</span></a>
<ul>
<li class="toclevel-3 tocsection-141"><a href="#Available_queries"><span class="tocnumber">7.7.1</span> <span class="toctext">Available queries</span></a></li>
<li class="toclevel-3 tocsection-142"><a href="#Item_spawn_fields"><span class="tocnumber">7.7.2</span> <span class="toctext">Item spawn fields</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-143"><a href="#More_modData_fields"><span class="tocnumber">7.8</span> <span class="toctext">More modData fields</span></a></li>
<li class="toclevel-2 tocsection-144"><a href="#Quantity_modifiers"><span class="tocnumber">7.9</span> <span class="toctext">Quantity modifiers</span></a>
<ul>
<li class="toclevel-3 tocsection-145"><a href="#Modifier_format"><span class="tocnumber">7.9.1</span> <span class="toctext">Modifier format</span></a></li>
<li class="toclevel-3 tocsection-146"><a href="#Modifier_mode"><span class="tocnumber">7.9.2</span> <span class="toctext">Modifier mode</span></a></li>
<li class="toclevel-3 tocsection-147"><a href="#Examples_2"><span class="tocnumber">7.9.3</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-148"><a href="#Tokenizable_string_format"><span class="tocnumber">7.10</span> <span class="toctext">Tokenizable string format</span></a>
<ul>
<li class="toclevel-3 tocsection-149"><a href="#Literal_text"><span class="tocnumber">7.10.1</span> <span class="toctext">Literal text</span></a></li>
<li class="toclevel-3 tocsection-150"><a href="#Tokens"><span class="tocnumber">7.10.2</span> <span class="toctext">Tokens</span></a></li>
<li class="toclevel-3 tocsection-151"><a href="#Extensibility_3"><span class="tocnumber">7.10.3</span> <span class="toctext">Extensibility</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-152"><a href="#Dialogue_changes_2"><span class="tocnumber">7.11</span> <span class="toctext">Dialogue changes</span></a></li>
<li class="toclevel-2 tocsection-153"><a href="#Event_changes"><span class="tocnumber">7.12</span> <span class="toctext">Event changes</span></a></li>
<li class="toclevel-2 tocsection-154"><a href="#Mail_changes"><span class="tocnumber">7.13</span> <span class="toctext">Mail changes</span></a></li>
<li class="toclevel-2 tocsection-155"><a href="#New_C.23_utility_methods"><span class="tocnumber">7.14</span> <span class="toctext">New C# utility methods</span></a>
<ul>
<li class="toclevel-3 tocsection-156"><a href="#Argument_handling"><span class="tocnumber">7.14.1</span> <span class="toctext">Argument handling</span></a></li>
<li class="toclevel-3 tocsection-157"><a href="#Game_paths"><span class="tocnumber">7.14.2</span> <span class="toctext">Game paths</span></a></li>
<li class="toclevel-3 tocsection-158"><a href="#Randomization"><span class="tocnumber">7.14.3</span> <span class="toctext">Randomization</span></a></li>
<li class="toclevel-3 tocsection-159"><a href="#Other_2"><span class="tocnumber">7.14.4</span> <span class="toctext">Other</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-160"><a href="#Static_delegate_builder"><span class="tocnumber">7.15</span> <span class="toctext">Static delegate builder</span></a></li>
<li class="toclevel-2 tocsection-161"><a href="#Game_logging_changes"><span class="tocnumber">7.16</span> <span class="toctext">Game logging changes</span></a></li>
<li class="toclevel-2 tocsection-162"><a href="#Other_changes_2"><span class="tocnumber">7.17</span> <span class="toctext">Other changes</span></a>
<ul>
<li class="toclevel-3 tocsection-163"><a href="#Audio_2"><span class="tocnumber">7.17.1</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-3 tocsection-164"><a href="#Debug_commands"><span class="tocnumber">7.17.2</span> <span class="toctext">Debug commands</span></a></li>
<li class="toclevel-3 tocsection-165"><a href="#Location_logic"><span class="tocnumber">7.17.3</span> <span class="toctext">Location logic</span></a></li>
<li class="toclevel-3 tocsection-166"><a href="#Menus_.26_UI"><span class="tocnumber">7.17.4</span> <span class="toctext">Menus &amp; UI</span></a></li>
<li class="toclevel-3 tocsection-167"><a href="#Net_fields"><span class="tocnumber">7.17.5</span> <span class="toctext">Net fields</span></a></li>
<li class="toclevel-3 tocsection-168"><a href="#Quests"><span class="tocnumber">7.17.6</span> <span class="toctext">Quests</span></a></li>
<li class="toclevel-3 tocsection-169"><a href="#Seasons"><span class="tocnumber">7.17.7</span> <span class="toctext">Seasons</span></a></li>
<li class="toclevel-3 tocsection-170"><a href="#Time"><span class="tocnumber">7.17.8</span> <span class="toctext">Time</span></a></li>
<li class="toclevel-3 tocsection-171"><a href="#Other_3"><span class="tocnumber">7.17.9</span> <span class="toctext">Other</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-172"><a href="#Breaking_changes_for_C.23_mods"><span class="tocnumber">8</span> <span class="toctext">Breaking changes for C# mods</span></a>
<ul>
<li class="toclevel-2 tocsection-173"><a href="#.NET_6_2"><span class="tocnumber">8.1</span> <span class="toctext">.NET 6</span></a></li>
<li class="toclevel-2 tocsection-174"><a href="#Item_ID_changes"><span class="tocnumber">8.2</span> <span class="toctext">Item ID changes</span></a></li>
<li class="toclevel-2 tocsection-175"><a href="#Other_ID_changes"><span class="tocnumber">8.3</span> <span class="toctext">Other ID changes</span></a></li>
<li class="toclevel-2 tocsection-176"><a href="#Building_and_animal_changes"><span class="tocnumber">8.4</span> <span class="toctext">Building and animal changes</span></a></li>
<li class="toclevel-2 tocsection-177"><a href="#Player_changes"><span class="tocnumber">8.5</span> <span class="toctext">Player changes</span></a></li>
<li class="toclevel-2 tocsection-178"><a href="#Collision_changes"><span class="tocnumber">8.6</span> <span class="toctext">Collision changes</span></a></li>
<li class="toclevel-2 tocsection-179"><a href="#Map_.26_tile_property_changes"><span class="tocnumber">8.7</span> <span class="toctext">Map &amp; tile property changes</span></a></li>
<li class="toclevel-2 tocsection-180"><a href="#Other_removed.2Fchanged_methods"><span class="tocnumber">8.8</span> <span class="toctext">Other removed/changed methods</span></a></li>
<li class="toclevel-2 tocsection-181"><a href="#Check_for_obsolete_code"><span class="tocnumber">8.9</span> <span class="toctext">Check for obsolete code</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-182"><a href="#Breaking_changes_for_content_packs"><span class="tocnumber">9</span> <span class="toctext">Breaking changes for content packs</span></a>
<ul>
<li class="toclevel-2 tocsection-183"><a href="#Standardized_data_fields"><span class="tocnumber">9.1</span> <span class="toctext">Standardized data fields</span></a></li>
<li class="toclevel-2 tocsection-184"><a href="#Standardized_ID_fields"><span class="tocnumber">9.2</span> <span class="toctext">Standardized ID fields</span></a></li>
<li class="toclevel-2 tocsection-185"><a href="#Event_ID_changes"><span class="tocnumber">9.3</span> <span class="toctext">Event ID changes</span></a></li>
<li class="toclevel-2 tocsection-186"><a href="#Monster_eradication_goal_flag_changes"><span class="tocnumber">9.4</span> <span class="toctext">Monster eradication goal flag changes</span></a></li>
<li class="toclevel-2 tocsection-187"><a href="#XNB_impact"><span class="tocnumber">9.5</span> <span class="toctext">XNB impact</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-188"><a href="#Vanilla_release_notes"><span class="tocnumber">10</span> <span class="toctext">Vanilla release notes</span></a></li>
<li class="toclevel-1 tocsection-189"><a href="#See_also"><span class="tocnumber">11</span> <span class="toctext">See also</span></a></li>
</ul>
</div>
</div>
<h2><span class="mw-headline" id="FAQs">FAQs</span></h2>
<h3><span id="What's_changing?"></span><span class="mw-headline" id="What.27s_changing.3F">What's changing?</span></h3>
<p>Stardew Valley 1.6 makes fundamental changes to the game code to make it more extensible for mods.
</p>
<h3><span id="Is_this_the_modapocalypse?"></span><span class="mw-headline" id="Is_this_the_modapocalypse.3F">Is this the modapocalypse?</span></h3>
<p>Maybe. The update includes major changes to fundamental parts of the game, and SMAPI and Content Patcher can't feasibly rewrite every older mod for compatibility with some of the changes. This will break many existing mods until they're updated for the changes. However, per discussion between the game developers and modding community, we've agreed that this short-term pain is more than offset by the huge long-term improvements to modding.
</p>
<h3><span class="mw-headline" id="How_to_update_your_mod">How to update your mod</span></h3>
<ol><li>Update your mod code and assets for the changes listed below (particularly <a href="#Breaking_changes_for_C.23_mods"><i>Breaking changes for C# mods</i></a> and <a href="#Breaking_changes_for_content_packs"><i>Breaking changes for content packs</i></a>).</li>
<li>If SMAPI still says your mod is incompatible, check the <samp>TRACE</samp> messages in the log file for the reason why.<br />If the logs say "<i>marked 'assume broken' in SMAPI's internal compatibility list</i>", you can increase the <samp>Version</samp> in your content pack's <samp>manifest.json</samp> file to bypass it.</li>
<li>Test the mod in-game and make any other changes needed.</li></ol>
<h2><span id="What's_new_architecturally?"></span><span class="mw-headline" id="What.27s_new_architecturally.3F">What's new architecturally?</span></h2>
<h3><span class="mw-headline" id=".NET_6">.NET 6</span></h3>
<dl><dd><i>See also: <a href="#.NET_6_2">.NET 6</a> under breaking changes.</i></dd></dl>
<p>For C# mod authors, Stardew Valley 1.6 updates from .NET 5 to .NET 6. See <a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-6"><i>What's new in .NET 6</i></a> and <a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-10"><i>What's new in C# 10</i></a> for more info, but some highlights include...
</p>
<ul><li>improved performance;</li>
<li><a rel="nofollow" class="external text" href="../../external.html?link=https://devblogs.microsoft.com/dotnet/update-on-net-hot-reload-progress-and-visual-studio-2022-highlights/">improved hot reload</a>;</li>
<li><a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-6#new-linq-apis">new LINQ methods</a>;</li>
<li><a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/record">record structs</a>;</li>
<li>and support for ARM64 on macOS.</li></ul>
<h2><span id="What's_new_for_items"></span><span class="mw-headline" id="What.27s_new_for_items">What's new for items</span></h2>
<h3><span class="mw-headline" id="Custom_items">Custom items</span></h3>
<h4><span class="mw-headline" id="Overview">Overview</span></h4>
<p>Stardew Valley 1.6 makes three major changes to how items work in the game:
</p>
<ol><li>Each item now has a string ID (<samp>ItemId</samp>) and a globally unique string ID (<samp>QualifiedItemId</samp>). The <samp>QualifiedItemId</samp> is auto-generated by prefixing the <samp>ItemId</samp> with the item type identifier.<p>For legacy reasons, the <samp>ItemId</samp> for vanilla items may not be globally unique. For example, Pufferfish (object 128) and Mushroom Box (bigcraftable 128) both have <samp>ItemId: 128</samp>. They can be distinguished by their <samp>QualifiedItemId</samp>, which are <samp>(O)128</samp> and <samp>(BC)128</samp> respectively.</p></li>
<li>Each item type now has an <i>item data definition</i> in the game code which tells the game how to handle it. <a href="#For_C.23_mods">C# mods can add or edit definitions</a>. Each definition has a unique prefix which is used in the qualified item IDs. The vanilla types are bigcraftables (<samp>(BC)</samp>), boots (<samp>(B)</samp>), farmhouse flooring (<samp>(FL)</samp>), furniture (<samp>(F)</samp>), hats (<samp>(H)</samp>), objects (<samp>(O)</samp>), pants (<samp>(P)</samp>), shirts (<samp>(S)</samp>), tools (<samp>(T)</samp>), wallpaper (<samp>(WP)</samp>), and weapons (<samp>(W)</samp>).</li>
<li>Custom items can now provide their own item texture, specified in a new field in the item data assets (see below). The item's <samp>ParentSheetIndex</samp> field is the index within that texture.</li></ol>
<p>In other words, the four important fields for items are:
</p>
<table class="wikitable">

<tbody><tr>
<th>name
</th>
<th>type
</th>
<th>description
</th></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td><samp>string</samp>
</td>
<td>An item key which should be globally unique, but may not be for existing vanilla items. For example, <samp>128</samp> (vanilla item) or <samp>Example.ModId_Watermelon</samp> (custom item). This should only have alphanumeric, underscore, and dot characters so it's safe to use in delimited fields, file names, etc. By convention this should include your mod ID or author name, like <samp>ExampleAuthor.ModId_ItemName</samp>.<p class="mw-empty-elt"></p>
</td></tr>
<tr>
<td><samp>QualifiedItemId</samp>
</td>
<td><samp>string</samp>
</td>
<td>A globally unique item key, like <samp>(O)128</samp> for a vanilla item or <samp>(O)Example.ModId_Watermelon</samp> for a custom one. This is auto-generated from the <samp>TypeDefinitionId</samp> and <samp>ItemId</samp> fields.
</td></tr>
<tr>
<td><samp>ParentSheetIndex</samp>
</td>
<td><samp>int</samp>
</td>
<td>The item's sprite index within its spritesheet.
</td></tr>
<tr>
<td><samp>TypeDefinitionId</samp>
</td>
<td><samp>string</samp>
</td>
<td>The ID for the data definition which defines the item, like <samp>(O)</samp> for an object. You can use <samp>ItemRegistry.type_*</samp> constants with this field:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">TypeDefinitionId</span> <span class="p">==</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">type_object</span><span class="p">)</span>
   <span class="p">...</span>
</pre></div>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Item_references">Item references</span></h4>
<p>Item references throughout the game code now use the <samp>ItemId</samp> instead of the <samp>ParentSheetIndex</samp>. Since the <samp>ItemId</samp> is identical to the index for existing vanilla items, most data assets are unaffected by this change. For example, here's from <samp>Data/NPCGiftTastes</samp> with one custom item:
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Universal_Like&quot;</span><span class="err">:</span> <span class="s2">&quot;-2 -7 -26 -75 -80 72 395 613 634 635 636 637 638 724 459 Example.ModID_watermelon&quot;</span>
</pre></div>
<p>Unless otherwise noted, unqualified item IDs will produce <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">objects</a>. Some assets let you override that by specifying a <samp>QualifiedItemId</samp> value instead. For example, you can add <code>(O)128</code> to the gift taste list to explicitly add for an object. Here's a partial list of data assets and their supported item ID formats:
</p>
<table class="wikitable">

<tbody><tr>
<th>data asset
</th>
<th>item ID format
</th></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Recipe_data" title="Modding:Recipe data"><samp>Data/CraftingRecipes</samp><br /><samp>Data/CookingRecipes</samp></a>
</td>
<td>&#32;
<ul><li>Ingredients: both supported.</li>
<li>Output: set field 2 to the unqualified item ID, and field 3 to one of <samp>true</samp> (bigcraftable) or <samp>false</samp> (object) or an item type identifier like <samp>BC</samp>.</li></ul>
</td></tr>
<tr>
<td><a href="#Custom_fruit_trees"><samp>Data/fruitTrees</samp></a>
</td>
<td>&#32;
<ul><li>Fruit: both supported.</li>
<li>Sapling: unqualified only.</li></ul>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Gift_taste_data" title="Modding:Gift taste data"><samp>Data/NPCGiftTastes</samp></a>
</td>
<td>Both supported, but only <samp>(O)</samp> items can be gifted.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Item_types">Item types</span></h4>
<p>These are the item types for which custom items can added/edited:
</p>
<table class="wikitable">

<tbody><tr>
<th>item type
</th>
<th>type identifier
</th>
<th>data asset
</th></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">big craftables</a>
</td>
<td><samp>(BC)</samp>
</td>
<td><samp>Data/BigCraftablesInformation</samp><br /><small>Each item can set a custom texture name in field 11, and sprite index in field 10. The default texture is <samp>TileSheets/Craftables</samp>.</small>
</td></tr>
<tr>
<td>boots
</td>
<td><samp>(B)</samp>
</td>
<td><samp>Data/Boots</samp><br /><small>Each item can set a custom texture name in fields 9 (item) and 7 (shoe color), and sprite index in fields 8 (item) and 5 (shoe color). The default textures are <samp>Maps/springobjects</samp> (item) and <samp>Characters/Farmer/shoeColors</samp> (shoe color).</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Crop_data" title="Modding:Crop data">crops</a>
</td>
<td><small><i>not technically an item type</i></small>
</td>
<td><samp>Data/Crops</samp><br /><small>Each crop can set a custom texture name in field 9, and sprite index in field 2. The default texture is <samp>TileSheets/crops</samp>.</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fish_data" title="Modding:Fish data">fish (in fish tanks)</a>
</td>
<td><small><i>not technically an item type</i></small>
</td>
<td><samp>Data/AquariumFish</samp><br /><small>Each fish can set a custom aquarium texture name in field 6, and sprite index in field 0. The default texture is <samp>LooseSprites/AquariumFish</samp>.</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">furniture</a>
</td>
<td><samp>(F)</samp>
</td>
<td><samp>Data/Furniture</samp><br /><small>Each item can set a custom texture name in field 9, and sprite index in field 8. The default texture is <samp>TileSheets/furniture</samp>.</small>
</td></tr>
<tr>
<td>fruit trees
</td>
<td><small><i>not technically an item type</i></small>
</td>
<td><samp>Data/FruitTrees</samp><br /><small>Each fruit tree can set a custom texture name in field 4, and sprite index in field 0. The default texture is <samp>TileSheets/fruitTrees</samp>.</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">hats</a>
</td>
<td><samp>(H)</samp>
</td>
<td><samp>Data/Hats</samp><br /><small>Each item can set a custom texture name in field 7, and sprite index in field 6. The default texture is <samp>Characters/Farmer/hats</samp>.</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">objects</a>
</td>
<td><samp>(O)</samp>
</td>
<td><samp>Data/ObjectInformation</samp><br /><small>Each item can set a custom texture name in field 10, and sprite index in field 9. The default texture is <samp>Maps/springobjects</samp>.</small>
</td></tr>
<tr>
<td>pants &amp; shirts
</td>
<td><samp>(P)</samp> and <samp>(S)</samp>
</td>
<td><samp>Data/ClothingInformation</samp><br /><small>Each item can set a custom texture name in field 10, and sprite index in fields 3 (male) and 4 (female). If field 4 is <samp>-1</samp>, it'll use the same value as the male index. The default texture is <samp>Characters/Farmer/pants</samp> and <samp>Characters/Farmer/shirts</samp>.</small>
<p><small>Shirt textures must be exactly 256 pixels wide, divided into two halves: the left half for the shirt sprites, and the right half for any dye masks. The remaining space can be left blank if needed.</small>
</p>
<pre>      sprites       dye masks
   /-----------\  /-----------\
┌────────────────────────────────┐
│ ┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐ │
│ │ 0 ││ 1 ││ 2 ││ a ││ b ││ c │ │
│ └───┘└───┘└───┘└───┘└───┘└───┘ │
│ ┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐ │
│ │ 3 ││ 4 ││ 5 ││ d ││ e ││ f │ │
│ └───┘└───┘└───┘└───┘└───┘└───┘ │
└────────────────────────────────┘
</pre>
</td></tr>
<tr>
<td><a href="#Custom_tools">tools</a>
</td>
<td><samp>(T)</samp>
</td>
<td><samp>Data/Tools</samp><br /><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The vanilla tools use the <samp>TileSheets/Tools</samp> texture.</small>
</td></tr>
<tr>
<td>Wallpaper &amp; floorpaper
</td>
<td><samp>(WP)</samp> and <samp>(FL)</samp>
</td>
<td><samp>Data/AdditionalWallpaperFlooring</samp><br /><small>See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.5.5#In_the_furniture_catalogue" title="Modding:Migrate to Stardew Valley 1.5.5">format docs</a>.</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">weapons</a>
</td>
<td><samp>(W)</samp>
</td>
<td><samp>Data/Weapons</samp><br /><small>Each item can set a custom texture name in field 16, and sprite index in field 15. The default texture is <samp>TileSheets/weapons</samp>.</small>
</td></tr></tbody></table>
<p>When resolving an unqualified item ID like <samp>128</samp>, the game will get the first item type for which it exists in this order: object, big craftable, furniture, weapon, boots, hat, pants, shirt, tool, wallpaper, and floorpaper.
</p>
<h4><span class="mw-headline" id="Define_a_custom_item">Define a custom item</span></h4>
<p>You can define custom items for most vanilla item types using only <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Content" title="Modding:Modder Guide/APIs/Content">SMAPI's content API</a>.
</p><p>For example, this content pack adds a new Pufferchick item with a custom image, custom gift tastes, and a custom crop that produces it. Note that item references in other data assets like <samp>Data/Crops</samp> and <samp>Data/NPCGiftTastes</samp> use the item ID.
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// add item</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/ObjectInformation&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.ModId_Pufferchick&quot;</span><span class="o">:</span> <span class="s2">&quot;Pufferchick/1200/100/Seeds -74/Pufferchick/An example object.////0/Mods\\Example.ModId\\Objects&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// add gift tastes</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/NPCGiftTastes&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TextOperations&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;Operation&quot;</span><span class="o">:</span> <span class="s2">&quot;Append&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;Entries&quot;</span><span class="p">,</span> <span class="s2">&quot;Universal_Love&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;Value&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Pufferchick&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Delimiter&quot;</span><span class="o">:</span> <span class="s2">&quot; &quot;</span> <span class="c1">// if there are already values, add a space between them and the new one</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>

        <span class="c1">// add crop (Pufferchick is both seed and produce, like coffee beans)</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/Crops&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.ModId_Pufferchick&quot;</span><span class="o">:</span> <span class="s2">&quot;1 1 1 1 1/spring summer fall/0/Example.ModId_Pufferchick/-1/0/false/false/false/Mods\\Example.ModId\\Crops&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// add item + crop images</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;Load&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Mods/Example.ModId/Crops, Mods/Example.ModId/Objects&quot;</span><span class="p">,</span>
            <span class="s2">&quot;FromFile&quot;</span><span class="o">:</span> <span class="s2">&quot;assets/{{TargetWithoutPath}}.png&quot;</span> <span class="c1">// assets/Crops.png, assets/Objects.png</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>Most item data assets work just like <samp>Data/ObjectInformation</samp>. See also specific info for <a href="#Custom_fruit_trees">custom fruit trees</a>, <a href="#Custom_tools">custom tools</a>, and <a href="#Custom_melee_weapon_data">melee weapons</a>.
</p>
<h4><span class="mw-headline" id="Error_items">Error items</span></h4>
<p>In-game items with no underlying data (e.g. because you removed the mod which adds them) would previously cause issues like invisible items, errors, and crashes. This was partly mitigated by the bundled Error Handler mod.
</p><p>Stardew Valley 1.6 adds comprehensive handling for such items. They'll be shown with a <samp>🛇</samp> sprite in inventory UIs and in-game, the name Error Item, and a description which indicates the missing item ID for troubleshooting.
</p>
<h4><span id="For_C#_mods"></span><span class="mw-headline" id="For_C.23_mods">For C# mods</span></h4>
<dl style="margin-left: 2em;">

<dt>Compare items</dt>
<dd>
Since <samp>Item.QualifiedItemId</samp> is globally unique, it can be used to simplify comparing items. For example:

<table class="wikitable">

<tbody><tr>
<th>old code
</th>
<th>new code
</th></tr>

<tr>
<td><samp>item.ParentSheetIndex == 128</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)128"</samp>
</td></tr>
<tr>
<td><samp>IsNormalObjectAtParentSheetIndex(item, 128)</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)128"</samp>
</td></tr>
<tr>
<td><samp>!item.bigCraftable &amp;&amp; item.ParentSheetIndex == 128</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)128"</samp>
</td></tr>
<tr>
<td><samp>item is Boots &amp;&amp; item.ParentSheetIndex == 505</samp>
</td>
<td><samp>item.QualifiedItemId == "(B)505"</samp>
</td></tr></tbody></table>
<p>You can also use <samp>ItemRegistry.QualifyItemId</samp> to convert any item ID into a qualified one (if it's valid), and <samp>ItemRegistry.HasItemId</samp> to check if an item has a qualified or unqualified item ID.
</p><p>Note that flavored item don't have their own ID. For example, Blueberry Wine and Wine are both <samp>(O)348</samp>. This affects flavored jellies, juices, pickles, and wines. In those cases you should still compare their separate fields like <samp>preservedParentSheetIndex</samp> (which actually contains the preserved item's <samp>ItemId</samp>, not its <samp>ParentSheetIndex</samp>).
</p>
</dd>

<dt>Construct items</dt>
<dd>Creating items works just like before, except that you now specify the item's <samp>ItemId</samp> (<i>not</i> <samp>QualifiedItemId</samp>) instead of its <samp>ParentSheetIndex</samp>. For example:

<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="s">&quot;128&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>                      <span class="c1">// vanilla item</span>
<span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="s">&quot;Example.ModId_Watermelon&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// custom item</span>
</pre></div>
<p>You can use a new utility method to construct items from their <samp>QualifiedItemId</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Item</span> <span class="n">item</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&quot;(B)505&quot;</span><span class="p">);</span> <span class="c1">// Rubber Boots</span>
</pre></div>
</dd>

<dt>Define custom item types</dt>
<dd>You can implement <samp>IItemDataDefinition</samp> for your own item type, add it to the <samp>ItemDataDefinition.ItemTypes</samp> field, and call <samp>ItemRegistry.ResetCache</samp> to register it. This provides all the logic needed by the game to handle the item type: where to get item data, how to draw them, etc.

<b>This is extremely specialized</b>, and multiplayer compatibility is unknown. Most mods should add custom items within the existing types instead.</dd>

<dt>New <samp>Is*</samp> methods</dt>
<dd>1.6 adds some <samp>StardewValley.Object</samp> methods to handle custom items in a generic way (and to let mods patch the logic):
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>object.IsBar()</samp>
</td>
<td>Whether the item is a <a href="../../external.html?link=https://stardewvalleywiki.com/Copper_Bar" title="Copper Bar">copper bar</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Iron_Bar" title="Iron Bar">iron bar</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Gold_Bar" title="Gold Bar">gold bar</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Iridium_Bar" title="Iridium Bar">iridium bar</a>, or <a href="../../external.html?link=https://stardewvalleywiki.com/Radioactive_Bar" title="Radioactive Bar">radioactive bar</a>.
</td></tr>
<tr>
<td><samp>object.IsBreakableStone()</samp>
</td>
<td>Whether the item is a stone debris item which can be broken by a pickaxe.
</td></tr>
<tr>
<td><samp>object.IsFence()</samp>
</td>
<td>Whether the item is a <a href="../../external.html?link=https://stardewvalleywiki.com/Crafting#Fences" title="Crafting">fence</a>.
</td></tr>
<tr>
<td><samp>object.IsFruitTreeSapling()</samp>
</td>
<td>Whether the item is a <a href="../../external.html?link=https://stardewvalleywiki.com/Fruit_Trees" title="Fruit Trees">fruit tree</a> sapling. This checks the <samp>Data\fruitTrees</samp> keys, so it works with custom fruit trees too.
</td></tr>
<tr>
<td><samp>object.IsHeldOverHead()</samp>
</td>
<td>Whether the player is shown holding up the item when it's selected in their toolbar. Default true (except for furniture).
</td></tr>
<tr>
<td><samp>object.IsIncubator()</samp>
</td>
<td>Whether the item can incubate <a href="../../external.html?link=https://stardewvalleywiki.com/Animals" title="Animals">farm animal</a> eggs when placed in a building.
</td></tr>
<tr>
<td><samp>object.IsTapper()</samp>
</td>
<td>Whether the item is a <a href="../../external.html?link=https://stardewvalleywiki.com/Tapper" title="Tapper">tapper</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Heavy_Tapper" title="Heavy Tapper">heavy tapper</a>.
</td></tr>
<tr>
<td><samp>object.IsTeaSapling()</samp>
</td>
<td>Whether the item is a <a href="../../external.html?link=https://stardewvalleywiki.com/Tea_Sapling" title="Tea Sapling">tea sapling</a>.
</td></tr>
<tr>
<td><samp>object.IsTwig()</samp>
</td>
<td>Whethere the item is a twig debris item.
</td></tr>
<tr>
<td><samp>object.IsWeeds()</samp>
</td>
<td>Whether the item is a weed debris item.
</td></tr></tbody></table>
</dd>

<dt>Work with item metadata</dt>
<dd>
1.6 adds an <samp>ItemRegistry</samp> API for working with the new item system:

<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ItemRegistry.Create</samp>
</td>
<td>Create an item from its item ID (qualified or unqualified). If the ID doesn't match a real item, the optional <samp>allowNull</samp> parameter indicates whether to return null or an Error Item. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Item</span> <span class="n">item</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&quot;(B)505&quot;</span><span class="p">);</span> <span class="c1">// Rubber Boots</span>
</pre></div>
<p>You can also get a specific value type instead of <samp>Item</samp> if needed. This will throw a descriptive exception if the type isn't compatible (e.g. you try to convert furniture to boots).
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Boots</span> <span class="n">item</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Create</span><span class="p">&lt;</span><span class="n">Boots</span><span class="p">&gt;(</span><span class="s">&quot;(B)505&quot;</span><span class="p">);</span> <span class="c1">// Rubber Boots</span>
</pre></div>
</td></tr>
<tr>
<td><samp>ItemRegistry.Exists</samp>
</td>
<td>Get whether a qualified or unqualified item ID matches an existing item. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">pufferfishExist</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Exists</span><span class="p">(</span><span class="s">&quot;(O)128&quot;</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>ItemRegistry.IsQualifiedId</samp>
</td>
<td>Get whether the given item ID is qualified with the type prefix (like <samp>(O)128</samp> instead of <samp>128</samp>).
</td></tr>
<tr>
<td><samp>ItemRegistry.QualifyItemId</samp>
</td>
<td>Get the unique qualified item ID given an unqualified or qualified one. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">qualifiedId</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">QualifyItemId</span><span class="p">(</span><span class="s">&quot;128&quot;</span><span class="p">);</span> <span class="c1">// returns (O)128</span>
</pre></div>
</td></tr>
<tr>
<td><samp>ItemRegistry.GetMetadata</samp>
</td>
<td>This lets you get high-level info about an item:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// get info about Rubber Boots</span>
<span class="n">ItemMetadata</span> <span class="n">info</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">GetMetadata</span><span class="p">(</span><span class="s">&quot;(B)505&quot;</span><span class="p">);</span>

<span class="c1">// get item ID info</span>
<span class="err">$</span><span class="s">&quot;The item has unqualified ID {info.LocalId}, qualified ID {info.QualifiedId}, and is defined by the {info.TypeIdentifier} item data definition.&quot;</span><span class="p">;</span>

<span class="c1">// does the item exist in the data files?</span>
<span class="kt">bool</span> <span class="n">exists</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="n">Exists</span><span class="p">();</span>
</pre></div>
<p>And get common parsed item data:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// get parsed info</span>
<span class="n">ParsedItemData</span> <span class="n">data</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="n">GetParsedData</span><span class="p">();</span>
<span class="err">$</span><span class="s">&quot;The internal name is {data.InternalName}, translated name {data.DisplayName}, description {data.Description}, etc.&quot;</span><span class="p">;</span>

<span class="c1">// draw an item sprite</span>
<span class="n">Texture2D</span> <span class="n">texture</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">GetTexture</span><span class="p">();</span>
<span class="n">Rectangle</span> <span class="n">sourceRect</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">GetSourceRect</span><span class="p">();</span>
<span class="n">spriteBatch</span><span class="p">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">texture</span><span class="p">,</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">Zero</span><span class="p">,</span> <span class="n">sourceRect</span><span class="p">,</span> <span class="n">Color</span><span class="p">.</span><span class="n">White</span><span class="p">);</span>
</pre></div>
<p>And create an item:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Item</span> <span class="n">item</span> <span class="p">=</span> <span class="n">metadata</span><span class="p">.</span><span class="n">CreateItem</span><span class="p">();</span>
</pre></div>
<p>And get the type definition (note that this is very specialized, and you should usually use <samp>ItemRegistry</samp> instead to benefit from its caching and optimizations):
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">IItemDataDefinition</span> <span class="n">typeDefinition</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="n">GetTypeDefinition</span><span class="p">();</span>
</pre></div>
</td></tr>
<tr>
<td><samp>ItemRegistry.ResolveMetadata</samp>
</td>
<td>Equivalent to <samp>ItemRegistry.GetMetadata</samp>, except that it'll return null if the item doesn't exist.
</td></tr>
<tr>
<td><samp>ItemRegistry.GetData</samp>
</td>
<td>Get the parsed data about an item, or <samp>null</samp> if the item doesn't exist. This is a shortcut for <code>ItemRegistry.ResolveMetadata(id)?.GetParsedData()</code>; see the previous method for info on the parsed data.
</td></tr>
<tr>
<td><samp>ItemRegistry.GetDataOrErrorItem</samp>
</td>
<td>Equivalent to <samp>ItemRegistry.GetData</samp>, except that it'll return info for an Error Item if the item doesn't exist (e.g. for drawing in inventory).
</td></tr>
<tr>
<td><samp>ItemRegistry.GetErrorItemName</samp>
</td>
<td>Get a translated <i>Error Item</i> label.
</td></tr></tbody></table>
</dd>
</dl>
<h3><span class="mw-headline" id="Custom_crops">Custom crops</span></h3>
<p><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Crop_data" title="Modding:Crop data">Crops</a> are still stored in <samp>Data/Crops</samp>, but that asset has been overhauled in Stardew Valley 1.6. The slash-delimited entries are now models to simplify edits and enable new features.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is the unqualified <a href="#Custom_items">item ID</a> for the seed item.</li>
<li>The value is model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<th colspan="2">Growth
</th></tr>
<tr>
<td><samp>Seasons</samp>
</td>
<td>The seasons in which this crop can grow (any combination of <samp>spring</samp>, <samp>summer</samp>, <samp>fall</samp>, and <samp>winter</samp>).
</td></tr>
<tr>
<td><samp>DaysInPhase</samp>
</td>
<td>The number of days in each visual step of growth before the crop is harvestable. Each step corresponds to a sprite in the crop's row (see <samp>SpriteIndex</samp>).
<p>For example, a crop with <code>"DaysInPhase": [ 1, 1, 1, 1 ]</code> will grow from seed to harvestable in 4 days, moving to the next sprite in the row each day.
</p>
</td></tr>
<tr>
<td><samp>RegrowDays</samp>
</td>
<td><i>(Optional)</i> The number of days before the crop regrows after harvesting, or -1 if it can't regrow. The crop will keep the full-grown sprite (i.e. the last phase in <samp>DaysInPhase</samp>) during this time. Default -1.
</td></tr>
<tr>
<td><samp>IsRaised</samp>
</td>
<td><i>(Optional)</i> Whether this is a raised crop on a trellis that can't be walked through. Default false.
</td></tr>
<tr>
<th colspan="2">Harvest
</th></tr>
<tr>
<td><samp>HarvestItemId</samp>
</td>
<td>The item ID produced when this crop is harvested.
</td></tr>
<tr>
<td><samp>HarvestMethod</samp>
</td>
<td><i>(Optional)</i> How the crop can be harvested. This can be <samp>Grab</samp> (crop is harvested by hand) or <samp>Scythe</samp> (harvested with a <a href="../../external.html?link=https://stardewvalleywiki.com/Scythe" title="Scythe">scythe</a>). Default <samp>Grab</samp>.
</td></tr>
<tr>
<td><samp>HarvestMinStack</samp><br /><samp>HarvestMaxStack</samp>
</td>
<td><i>(Optional)</i> The minimum and maximum number of <samp>HarvestItemId</samp> to produce (before <samp>HarvestMaxIncreasePerFarmingLevel</samp> and <samp>ExtraHarvestChance</samp> are applied). A value within this range (inclusive) will be randomly chosen each time the crop is harvested. The minimum defaults to 1, and the maximum defaults to the minimum.
</td></tr>
<tr>
<td><samp>HarvestMaxIncreasePerFarmingLevel</samp>
</td>
<td><i>(Optional)</i> The number of extra harvests to produce per farming level. This is rounded down to the nearest integer and added to <samp>HarvestMaxStack</samp>. Defaults to 0.
<p>For example, a value of 0.2 is equivalent to +1 max at level 5 and +2 at level 10.
</p>
</td></tr>
<tr>
<td><samp>ExtraHarvestChance</samp>
</td>
<td><i>(Optional)</i> The probability that harvesting the crop will produce extra harvest items, as a value between 0 (never) and 0.9 (nearly always). This is repeatedly rolled until it fails, then the number of successful rolls is added to the produced count. For example, <a href="../../external.html?link=https://stardewvalleywiki.com/Tomato" title="Tomato">tomatoes</a> use 0.05. Default 0.
</td></tr>
<tr>
<th colspan="2">Appearance
</th></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture (under the game's <samp>Content</samp> folder) containing the crop sprite. For example, the vanilla crops use <samp>TileSheets\crops</samp>.
</td></tr>
<tr>
<td><samp>SpriteIndex</samp>
</td>
<td><i>(Optional)</i> The index of this crop in the <samp>Texture</samp>, one crop per row, where 0 is the top row. Default 0.
</td></tr>
<tr>
<td><samp>TintColors</samp>
</td>
<td><i>(Optional)</i> The colors with which to tint the sprite when drawn (e.g. for colored flowers). A random color from the list will be chosen for each crop. Each value can be a <a rel="nofollow" class="external text" href="../../external.html?link=https://docs.monogame.net/api/Microsoft.Xna.Framework.Color.html#properties"><samp>Color</samp> field name</a> (like <samp>ForestGreen</samp>), RGB hex code (like <samp>#AABBCC</samp>), or RGBA hex code (<samp>#AABBCCDD</samp>). Default none.
</td></tr>
<tr>
<th colspan="2">Advanced
</th></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<p>For example, this adds a custom cucumber crop (assuming you've already added <a href="#Custom_items">custom items</a> for cucumber seeds and cucumber):
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/Crops&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.Id_CucumberSeeds&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Seasons&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;summer&quot;</span> <span class="p">],</span>
                    <span class="s2">&quot;DaysInPhase&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">],</span> <span class="c1">// grows in 7 days with four growing sprites</span>
                    <span class="s2">&quot;HarvestItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.Id_Cucumber&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Texture&quot;</span><span class="o">:</span> <span class="s2">&quot;{{InternalAssetKey: assets/crops.png}}&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;SpriteIndex&quot;</span><span class="o">:</span> <span class="mi">0</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Custom_fences">Custom fences</span></h3>
<p>You can now add or customize <a href="../../external.html?link=https://stardewvalleywiki.com/Crafting#Fences" title="Crafting">fences</a> by editing the <samp>Data/Fences</samp> asset.
</p><p>This consists of a string → model lookup, where the key is the <a href="#Custom_items">unqualified item ID</a> of the fence object, and the value is a model with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Health</samp>
</td>
<td>The health points for a fence when it's first placed, which affects how quickly it degrades. A fence loses <sup>1</sup>/<sub>1440</sub> points per in-game minute (roughly 0.04 points per hour or 0.5 points for a 12-hour day).
<p>Repairing a fence sets its max health to <i>2 × (base_health + repair_health_adjustment)</i>, where <samp>base_health</samp> is this field's value and <samp>repair_health_adjustment</samp> is a random value between <samp>RepairHealthAdjustmentMinimum</samp> and <samp>RepairHealthAdjustmentMaximum</samp>.
</p>
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture (under the game's <samp>Content</samp> folder) when the fence is placed. Use <samp>\</samp> (or <samp>\\</samp> in JSON) to separate name segments if needed. For example, the vanilla fences use individual tilesheets like <samp>LooseSprites\Fence1</samp> (wood fence).
</td></tr>
<tr>
<td><samp>RemovalToolIds</samp><br /><samp>RemovalToolTypes</samp>
</td>
<td>A list of tool IDs (matching the keys in <samp>Data\ToolData</samp>) or C# full type names which can be used to break the fence.
<p>For example, this will let the player break the fence with an iridium axe and any pickaxe:
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;RemovalToolIds&quot;</span><span class="err">:</span> <span class="p">[</span><span class="s2">&quot;IridiumAxe&quot;</span><span class="p">]</span><span class="err">,</span>
<span class="s2">&quot;RemovalToolTypes&quot;</span><span class="err">:</span> <span class="p">[</span><span class="s2">&quot;StardewValley.Tools.Pickaxe&quot;</span><span class="p">]</span>
</pre></div>
<p>A tool must match <samp>RemovalToolIds</samp> <i>or</i> <samp>RemovalToolTypes</samp> to be a valid removal tool. If both lists are null or empty, all tools can remove the fence.
</p>
</td></tr>
<tr>
<td><samp>PlacementSound</samp>
</td>
<td>The <a href="#Custom_audio">audio cue ID</a> played when the fence is placed or repaired (e.g. <samp>axe</samp> used by <a href="../../external.html?link=https://stardewvalleywiki.com/Wood_Fence" title="Wood Fence">Wood Fence</a>).
</td></tr>
<tr>
<td><samp>RemovalSound</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">audio cue ID</a> played when the fence is broken or picked up by the player. Defaults to the same sound as <samp>PlacementSound</samp>.
</td></tr>
<tr>
<td><samp>RemovalDebrisType</samp>
</td>
<td><i>(Optional)</i> The type of cosmetic debris particles to 'splash' from the tile when the fence is broken with a tool. The defined values are 0 (copper), 2 (iron), 4 (coal), 6 (gold), 8 (coins), 10 (iridium), 12 (wood), 14 (stone), 32 (big stone), and 34 (big wood). Default 14 (stone).
</td></tr>
<tr>
<td><samp>RepairHealthAdjustmentMinimum</samp><br /><samp>RepairHealthAdjustmentMaximum</samp>
</td>
<td><i>(Optional)</i> A random amount added to the <samp>Health</samp> when a fence is repaired by a player. See the <samp>Health</samp> field description. Both default to 0.
</td></tr>
<tr>
<td><samp>HeldObjectDrawOffset</samp>
</td>
<td><i>(Optional)</i> When an item like a <a href="../../external.html?link=https://stardewvalleywiki.com/Torch" title="Torch">torch</a> is placed on the fence, the pixel offset to apply to its draw position. Specified as a string in the form <samp>"<code title="required field &#39;x&#39;">&lt;x&gt;</code>, <code title="required field &#39;y&#39;">&lt;y&gt;</code>"</samp>. Defaults to <samp>"0, -20"</samp> if omitted.
</td></tr>
<tr>
<td><samp>LeftEndHeldObjectDrawX</samp><br /><samp>RightEndHeldObjectDrawX</samp>
</td>
<td><i>(Optional)</i> The X pixel offset to apply when the fence is oriented horizontally, with only one connected fence on the right (for <samp>LeftEndHeldObjectDrawX</samp>) or left (for <samp>RightEndHeldObjectDrawX</samp>). This fully replaces the X value specified by <samp>HeldObjectDrawOffset</samp> when it's applied. Default 0.
</td></tr></tbody></table>
<h3><span id="Custom_floors_(craftable)_&amp;_paths"></span><span class="mw-headline" id="Custom_floors_.28craftable.29_.26_paths">Custom floors (craftable) &amp; paths</span></h3>
<p>You can now add or customize <a href="../../external.html?link=https://stardewvalleywiki.com/Crafting#Decor" title="Crafting">craftable floors &amp; paths</a> by editing the <samp>Data/FloorsAndPaths</samp> asset.
</p><p>This consists of a string → model lookup, where the key matches the <samp>ID</samp> field and the value is a model with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>A key which uniquely identifies this floor/path. The ID should only contain alphanumeric/underscore/dot characters. For vanilla floors &amp; paths, this matches the spritesheet index in the <samp>TerrainFeatures/Flooring</samp> spritesheet; for custom floors &amp; paths, this should be prefixed with your mod ID like <samp>Example.ModId_FloorName</samp>.
</td></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td>The unqualified <a href="#Custom_items">item ID</a> for the corresponding object-type item.
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture (under the game's <samp>Content</samp> folder) when the flooring is applied or the path is placed. Use <samp>\</samp> (or <samp>\\</samp> in JSON) to separate name segments if needed. For example, the vanilla tilesheet is <samp>TerrainFeatures\Flooring</samp>.
</td></tr>
<tr>
<td><samp>Corner</samp>
</td>
<td>The top-left pixel position for the sprite within the <samp>Texture</samp> spritesheet, specified as a model with <samp>X</samp> and <samp>Y</samp> fields.
</td></tr>
<tr>
<td><samp>PlacementSound</samp>
</td>
<td>The <a href="#Custom_audio">audio cue ID</a> played when the item is applied/placed (e.g. <samp>axchop</samp> used by <a href="../../external.html?link=https://stardewvalleywiki.com/Wood_Floor" title="Wood Floor">Wood Floor</a>).
</td></tr>
<tr>
<td><samp>FootstepSound</samp>
</td>
<td>The <a href="#Custom_audio">audio cue ID</a> played when the player steps on the tile (e.g. <samp>woodyStep</samp> used by <a href="../../external.html?link=https://stardewvalleywiki.com/Wood_Floor" title="Wood Floor">Wood Floor</a>).
</td></tr>
<tr>
<td><samp>WinterTexture</samp><br /><samp>Corner</samp>
</td>
<td><i>(Optional)</i> Equivalent to <samp>Texture</samp> and <samp>Corner</samp>, but applied if the current location is in winter.
</td></tr>
<tr>
<td><samp>RemovalSound</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">audio cue ID</a> played when the item is unapplied or picked up. Defaults to the same sound as <samp>PlacementSound</samp>.
</td></tr>
<tr>
<td><samp>RemovalDebrisType</samp>
</td>
<td><i>(Optional)</i> The type of cosmetic debris particles to 'splash' from the tile when the item is unapplied or picked up. The defined values are 0 (copper), 2 (iron), 4 (coal), 6 (gold), 8 (coins), 10 (iridium), 12 (wood), 14 (stone), 32 (big stone), and 34 (big wood). Default 14 (stone).
</td></tr>
<tr>
<td><samp>DrawContouredShadow</samp>
</td>
<td><i>(Optional)</i> Whether the shadow under the placed/applied item follows the contour of the sprite pixels, instead of just drawing a box around the tile. Default false.
</td></tr>
<tr>
<td><samp>ConnectType</samp>
</td>
<td><i>(Optional)</i> When drawing the flooring across multiple tiles, how the flooring sprite for each tile is selected. Defaults to <samp>Default</samp>.
<p>The possible values are:
</p>
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>usage
</th></tr>
<tr>
<td><samp>Default</samp>
</td>
<td>For normal floors, intended to cover large square areas. This uses some logic to draw inner corners.
</td></tr>
<tr>
<td><samp>Path</samp>
</td>
<td>For floors intended to be drawn as narrow paths. These are drawn without any consideration for inner corners.
</td></tr>
<tr>
<td><samp>CornerDecorated</samp>
</td>
<td>For floors that have a decorative corner. Use <samp>CornerSize</samp> to change the size of this corner.
</td></tr>
<tr>
<td><samp>Random</samp>
</td>
<td>For floors that don't connect. When placed, one of the tiles is randomly selected.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>CornerSize</samp>
</td>
<td><i>(Optional)</i> The pixel size of the decorative border when the <samp>ConnectType</samp> field is set to <samp>CornerDecorated</samp> or <samp>Default</samp>.
</td></tr>
<tr>
<td><samp>FarmSpeedBuff</samp>
</td>
<td><i>(Optional)</i> The speed boost applied to the player, on the <a href="../../external.html?link=https://stardewvalleywiki.com/Farm" class="mw-redirect" title="Farm">farm</a> only, when they're walking on paths of this type. Negative values are ignored. Default 0.1.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Custom_machines">Custom machines</span></h3>
<p>You can now add/edit machine logic by editing the <samp>Data/Machines</samp> asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is the <a href="#Custom_items"><b>qualified</b> item ID</a> for the item which acts as a machine (like <samp>(BC)127</samp> for <a href="../../external.html?link=https://stardewvalleywiki.com/The_Cave" title="The Cave">mushroom boxes</a>).</li>
<li>The value is a model with the fields listed below.</li></ul>
<h4><span class="mw-headline" id="Item_processing_rules">Item processing rules</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>OutputRules</samp>
</td>
<td>The output produced by this machine. If multiple output rules can be produced, the first available one is selected. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A key which uniquely identifies this rule for the current machine (it doesn't need to be unique between machines). The ID should only contain alphanumeric/underscore/dot characters. For custom rules, this should be prefixed with your mod ID like <samp>Example.ModId_RuleId</samp>.
</td></tr>
<tr>
<td><samp>Triggers</samp>
</td>
<td>When to apply this output rule. This can list any number of triggers; the output will apply if any of them match.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Trigger</samp>
</td>
<td><i>(Optional)</i> When this output rule applies. Defaults to <samp>ItemPlacedInMachine</samp>. The possible values are...
<ul><li><samp>ItemPlacedInMachine</samp>: apply this rule when an item is placed into the machine. This is the most common machine behavior.</li>
<li><samp>OutputCollected</samp>: apply this rule when the machine's previous output is collected. An output-collected rule won't require or consume the input items, and the input item will be the previous output. For example, this is used to reload the <a href="../../external.html?link=https://stardewvalleywiki.com/Crystalarium" title="Crystalarium">crystalarium</a>.</li>
<li><samp>MachinePutDown</samp>: apply this rule when the machine is put down. For example, this is used to start the <a href="../../external.html?link=https://stardewvalleywiki.com/Worm_Bin" title="Worm Bin">worm bin</a>.</li>
<li><samp>DayUpdate</samp>: apply this rule when a new day starts, if it isn't already processing output. For example, this is used for the <a href="../../external.html?link=https://stardewvalleywiki.com/Soda_Machine" title="Soda Machine">soda machine</a>.</li></ul>
</td></tr>
<tr>
<td><samp>RequiredItemId</samp>
</td>
<td><i>(Optional)</i> The qualified or unqualified item ID for the item to match, if the trigger is <samp>ItemPlacedInMachine</samp> or <samp>OutputCollected</samp>. Defaults to allowing any item ID.
</td></tr>
<tr>
<td><samp>RequiredTags</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Context_tags" class="mw-redirect" title="Modding:Context tags">context tags</a> to match against input items, if the trigger is <samp>ItemPlacedInMachine</samp> or <samp>OutputCollected</samp>. An item must have all of the listed tags to select this rule. You can negate a tag with <samp>!</samp> (like <code>"RequiredTags": [ "bone_item", "!fossil_item" ]</code> for bone items that aren't fossils).
</td></tr>
<tr>
<td><samp>RequiredCount</samp>
</td>
<td><i>(Optional)</i> The required stack size for the input item, if the trigger is <samp>ItemPlacedInMachine</samp> or <samp>OutputCollected</samp>. Default 1.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this trigger should be checked. Item-only tokens are valid for this check if the trigger is <samp>ItemPlacedInMachine</samp> or <samp>OutputCollected</samp>. Defaults to always true.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>OutputItem</samp>
</td>
<td>The items produced by this machine. If multiple output entries match, one will be selected randomly unless you specify <samp>UseFirstValidOutput</samp>. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported by machine output.
<p>Notes:
</p>
<ul>
<li>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.</li>
<li>The <samp>ItemId</samp> and <samp>RandomItemId</samp> can optionally contain special tokens, which will be replaced before the item ID is parsed. For example, you can use <code>FLAVORED_ITEM Wine DROP_IN_ID</code> to create a wine for whatever item was placed in the machine.
<table class="wikitable">

<tbody><tr>
<th>token
</th>
<th>replaced with
</th></tr>
<tr>
<td><samp>DROP_IN_ID</samp>
</td>
<td>The qualified item ID for the item placed in the machine.
</td></tr>
<tr>
<td><samp>DROP_IN_PRESERVE</samp>
</td>
<td>If the item placed into the machine is a flavored item like Apple Juice or Tuna Roe, the <i>unqualified</i> item ID for the flavor item (e.g. the apple in Apple Wine). Otherwise <samp>0</samp>.
</td></tr>
<tr>
<td><samp>NEARBY_FLOWER_ID</samp>
</td>
<td>The item ID for a flower within 5 tiles of the machine, or <samp>-1</samp> if no flower is found. For example, <a href="../../external.html?link=https://stardewvalleywiki.com/Bee_House" title="Bee House">bee houses</a> produce <code>FLAVORED_ITEM Honey NEARBY_FLOWER_ID</code>.
</td></tr></tbody></table>
</li>
<li>Item conditions in the <samp>Condition</samp> field will check the <i>input</i> (not output) item.</li>
</ul>
</td></tr>
<tr>
<td><samp>PreserveType</samp>
</td>
<td><i>(Optional)</i> The produced item's preserved item type, if applicable. This sets the equivalent flag on the output item. The valid values are <samp>Jelly</samp>, <samp>Juice</samp>, <samp>Pickle</samp>, <samp>Roe</samp> or <samp>AgedRoe</samp>, and <samp>Wine</samp>. Defaults to none.
</td></tr>
<tr>
<td><samp>PreserveId</samp>
</td>
<td><i>(Optional)</i> The produced item's preserved unqualified item ID, if applicable. For example, <a href="../../external.html?link=https://stardewvalleywiki.com/Wine" title="Wine">blueberry wine</a> has its preserved item ID set to the <a href="../../external.html?link=https://stardewvalleywiki.com/Blueberry" title="Blueberry">blueberry</a> ID. This can be set to <samp>DROP_IN</samp> to use the input item's ID. Default none.
</td></tr>
<tr>
<td><samp>Name</samp>
</td>
<td><i>(Optional)</i> The internal name (not translated display name) to set for the output item, with <samp>{0}</samp> replaced with the input item's internal name. This is used to prevent flavored items from stacking (<i>e.g.</i> apple <a href="../../external.html?link=https://stardewvalleywiki.com/Wine" title="Wine">wine</a> and blueberry wine). If omitted, the output item's normal internal name is used.
</td></tr>
<tr>
<td><samp>CopyColor</samp>
</td>
<td><i>(Optional)</i> Whether to inherit the color of the input item if it was a <samp>ColoredObject</samp>. This mainly affects <a href="../../external.html?link=https://stardewvalleywiki.com/Roe" title="Roe">roe</a>. Default false.
</td></tr>
<tr>
<td><samp>CopyPrice</samp>
</td>
<td><i>(Optional)</i> Whether to inherit the quality of the input item (before <samp>PriceModifiers</samp> are applied). This is ignored if the input or output aren't both object (<samp>(O)</samp>)-type.
</td></tr>
<tr>
<td><samp>CopyQuality</samp>
</td>
<td><i>(Optional)</i> Whether to inherit the quality of the input item (before <samp>QualityModifiers</samp> are applied).
</td></tr>
<tr>
<td><samp>PriceModifiers</samp><br /><samp>PriceModifiers</samp>
</td>
<td><i>(Optional)</i> <a href="#Quantity_modifiers">Quantity modifiers</a> applied to the output item's price. Default none.
</td></tr>
<tr>
<td><samp>IncrementMachineParentSheetIndex</samp>
</td>
<td><i>(Optional)</i> Whether to increment the machine's spritesheet index by one while it's processing this output. This stacks with the <samp>ShowNextIndexWhenLoaded</samp> field (<i>i.e.</i> setting both to true will increment the index by two). Default false.
</td></tr>
<tr>
<td><samp>OutputMethod</samp>
</td>
<td><i>(Optional, specialized)</i> A C# method which decides which item to produce. If set, the <samp>ItemId</samp> field is optional and ignored.
<p>This must be specified in the form <samp><code title="required field &#39;full type name&#39;">&lt;full type name&gt;</code>.<code title="required field &#39;method name&#39;">&lt;method name&gt;</code></samp> (like <samp>StardewValley.Object.OutputSolarPanel</samp>). The method must be static and match the game's <samp>MachineOutputDelegate</samp> method signature:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">/// &lt;summary&gt;Get the output item to produce.&lt;/summary&gt;</span>
<span class="c1">/// &lt;param name=&quot;machine&quot;&gt;The machine instance for which to produce output.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name=&quot;location&quot;&gt;The location containing the machine.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name=&quot;player&quot;&gt;The player using the machine.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name=&quot;inputItem&quot;&gt;The item being dropped into the machine, if applicable.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name=&quot;probe&quot;&gt;Whether the machine is only checking whether the input is valid. If so, the input/machine shouldn&#39;t be changed and no animations/sounds should play.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name=&quot;outputData&quot;&gt;The item output data from &lt;c&gt;Data/Machines&lt;/c&gt; for which output is being created, if applicable.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name=&quot;overrideMinutesUntilReady&quot;&gt;The in-game minutes until the item will be ready to collect, if set. This overrides the equivalent fields in the machine data if set.&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;Returns the item to produce, or &lt;c&gt;null&lt;/c&gt; if none should be produced.&lt;/returns&gt;</span>
<span class="k">public</span> <span class="k">static</span> <span class="n">Item</span> <span class="nf">GetOutput</span><span class="p">(</span><span class="n">Object</span> <span class="n">machine</span><span class="p">,</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Farmer</span> <span class="n">player</span><span class="p">,</span> <span class="n">Item</span> <span class="n">inputItem</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">probe</span><span class="p">,</span> <span class="n">MachineItemOutput</span> <span class="n">outputData</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int?</span> <span class="n">overrideMinutesUntilReady</span><span class="p">);</span>
</pre></div>
<p>If this method returns null, the machine won't output anything.
</p>
</td></tr>
<tr>
<td><samp>CustomData</samp>
</td>
<td>Machine-specific data provided to the machine logic, if applicable.
<p>For example, the cask uses this to set the aging rate for each item:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;OutputItem&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;OutputMethod&quot;</span><span class="o">:</span> <span class="s2">&quot;StardewValley.Objects.Cask.OutputCask&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CustomData&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;AgingMultiplier&quot;</span><span class="o">:</span> <span class="mi">4</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>UseFirstValidOutput</samp>
</td>
<td><i>(Optional)</i> If multiple <samp>OutputItem</samp> entries match, whether to use the first match instead of choosing one randomly. Default false.
</td></tr>
<tr>
<td><samp>MinutesUntilReady</samp><br /><samp>DaysUntilReady</samp>
</td>
<td><i>(Optional)</i> The number of in-game minutes or days until the output is ready to collect. If both days and minutes are specified, days are used. If none are specified, the item will be ready instantly.
</td></tr>
<tr>
<td><samp>InvalidCountMessage</samp>
</td>
<td><i>(Optional)</i> If set, overrides the machine's main <samp>InvalidCountMessage</samp> field.
</td></tr>
<tr>
<td><samp>RecalculateOnCollect</samp>
</td>
<td><i>(Optional)</i> Whether to regenerate the output right before the player collects it, similar to <a href="../../external.html?link=https://stardewvalleywiki.com/Bee_House" title="Bee House">bee houses</a>. If the new item is null, the original output is returned instead.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>AdditionalConsumedItems</samp>
</td>
<td><i>(Optional)</i> A list of extra items required before <samp>OutputRules</samp> will be checked. If specified, every listed item must be present in the player, <a href="../../external.html?link=https://stardewvalleywiki.com/Hopper" title="Hopper">hopper</a>, or chest inventory (depending how the machine is being loaded).
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td>The <a href="#Custom_items">qualified or unqualified item ID</a> for the required item.
</td></tr>
<tr>
<td><samp>RequiredCount</samp>
</td>
<td><i>(Optional)</i> The required stack size for the item matching <samp>ItemId</samp>. Default 1.
</td></tr>
<tr>
<td><samp>InvalidCountMessage</samp>
</td>
<td><i>(Optional)</i> If set, overrides the machine's main <samp>InvalidCountMessage</samp> field.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>AllowFairyDust</samp>
</td>
<td><i>(Optional)</i> Whether the player can add <a href="../../external.html?link=https://stardewvalleywiki.com/Fairy_Dust" title="Fairy Dust">fairy dust</a> to speed up the machine. Default true.
</td></tr>
<tr>
<td><samp>ReadyTimeModifiers</samp>
</td>
<td><i>(Optional)</i> <a href="#Quantity_modifiers">Quantity modifiers</a> applied to the produced item's processing time. The modifier conditions can use item-only tokens, which will check the <i>input</i> (not output) item.
</td></tr>
<tr>
<td><samp>ReadyTimeModifierMode</samp>
</td>
<td><i>(Optional)</i> A <a href="#Quantity_modifiers">quantity modifier mode</a> which indicates what to do if multiple modifiers apply at the same time. Default <samp>Stack</samp>.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Behavior_tweaks">Behavior tweaks</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>PreventTimePass</samp>
</td>
<td><i>(Optional)</i> A list of cases when the machine should be paused, so the timer on any item being produced doesn't decrement. Possible values:
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Outside</samp><br /><samp>Inside</samp>
</td>
<td>Pause when placed in an outside or inside location. For example, <a href="../../external.html?link=https://stardewvalleywiki.com/Bee_House" title="Bee House">bee houses</a> don't work inside.
</td></tr>
<tr>
<td><samp>Spring</samp><br /><samp>Summer</samp><br /><samp>Fall</samp><br /><samp>Winter</samp>
</td>
<td>Pause in the given season. For example, <a href="../../external.html?link=https://stardewvalleywiki.com/Bee_House" title="Bee House">bee houses</a> don't work in winter.
</td></tr>

<tr>
<td><samp>Sun</samp><br /><samp>Rain</samp>
</td>
<td>Pause on days with the given weather.
</td></tr>
<tr>
<td><samp>Always</samp>
</td>
<td>Always pause the machine. This is used in specialized cases where the timer is handled by <a href="#Advanced_logic">advanced machine logic</a>.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>AllowLoadWhenFull</samp>
</td>
<td><i>(Optional)</i> Whether the player can drop a new item into the machine before it's done processing the last one (like the <a href="../../external.html?link=https://stardewvalleywiki.com/Crystalarium" title="Crystalarium">crystalarium</a>). The previous item will be lost. Default false.
</td></tr>
<tr>
<td><samp>ClearContentsOvernightCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether the machine should be emptied overnight, so any current output will be lost. Defaults to always false.
</td></tr></tbody></table>
<h4><span id="Audio_&amp;_visuals"></span><span class="mw-headline" id="Audio_.26_visuals">Audio &amp; visuals</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>LoadEffects</samp><br /><samp>WorkingEffects</samp>
</td>
<td><i>(Optional)</i> The cosmetic effects shown when an item is loaded into the machine (for <samp>LoadEffects</samp>), or while it's processing the item (for <samp>WorkingEffects</samp>, based on the <samp>WorkingEffectChance</samp> probability). Both default to none. These consist of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>RequiredItemId</samp>
</td>
<td><i>(Optional)</i> If set, only apply this effect if the main input item has this qualified or unqualified item ID.
</td></tr>
<tr>
<td><samp>RequiredTags</samp>
</td>
<td><i>(Optional)</i> If set, only apply this effect if the main input item has <i>all</i> of these <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Context_tags" class="mw-redirect" title="Modding:Context tags">context tags</a>. You can negate a tag with <samp>!</samp> (like <code>"RequiredTags": [ "bone_item", "!fossil_item" ]</code> for bone items that aren't fossils).
</td></tr>
<tr>
<td><samp>Sound</samp>
</td>
<td><i>(Optional)</i> An <a href="#Custom_audio">audio cue ID</a> to play. Defaults to no sound.
</td></tr>
<tr>
<td><samp>DelayedSounds</samp>
</td>
<td><i>(Optional)</i> The audio to play after a short delay. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Sound</samp>
</td>
<td>The <a href="#Custom_audio">audio cue ID</a> to play.
</td></tr>
<tr>
<td><samp>Delay</samp>
</td>
<td>The number of milliseconds until the sound should play.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>ShakeDuration</samp>
</td>
<td><i>(Optional)</i> A duration in milliseconds during which the machine sprite should shake. Default none.
</td></tr>
<tr>
<td><samp>Frames</samp>
</td>
<td><i>(Optional)</i> The animation to apply to the machine sprite, specified as a list of offsets relative to the base sprite index. Default none.
</td></tr>
<tr>
<td><samp>Interval</samp>
</td>
<td><i>(Optional)</i> The number of milliseconds for which each frame in <samp>Frames</samp> is kept on-screen. Default 100.
</td></tr>
<tr>
<td><samp>TemporarySprites</samp>
</td>
<td><i>(Optional)</i> The temporary animated sprites to show. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture (under the game's <samp>Content</samp> folder) for the animated sprite.
</td></tr>
<tr>
<td><samp>SourceRect</samp>
</td>
<td>The pixel area for the first animated frame within the <samp>Texture</samp>, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields.
</td></tr>
<tr>
<td><samp>PositionOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset applied to the sprite, relative to the top-left corner of the machine's collision box, specified as an object with <samp>X</samp> and <samp>Y</samp> fields. Defaults to (0, 0).
</td></tr>
<tr>
<td><samp>Color</samp>
</td>
<td><i>(Optional)</i> A tint color to apply to the sprite. This can be a <a rel="nofollow" class="external text" href="../../external.html?link=https://docs.monogame.net/api/Microsoft.Xna.Framework.Color.html#properties"><samp>Color</samp> field name</a> (like <samp>ForestGreen</samp>), RGB hex code (like <samp>#AABBCC</samp>), or RGBA hex code (<samp>#AABBCCDD</samp>). Default <samp>White</samp> (no tint).
</td></tr>
<tr>
<td><samp>AlphaFade</samp><br /><samp>Loops</samp><br /><samp>Rotation</samp><br /><samp>RotationChange</samp><br /><samp>ScaleChange</samp><br /><samp>SortOffset</samp>
</td>
<td><i>(Optional)</i> See equivalent fields in the <a href="#Other_changes"><samp>temporaryAnimatedSprite</samp> event command</a>. Default 0.
</td></tr>
<tr>
<td><samp>Frames</samp><br /><samp>Scale</samp>
</td>
<td><i>(Optional)</i> See equivalent fields in the <a href="#Other_changes"><samp>temporaryAnimatedSprite</samp> event command</a>. Default 1.
</td></tr>
<tr>
<td><samp>Interval</samp>
</td>
<td><i>(Optional)</i> See equivalent fields in the <a href="#Other_changes"><samp>temporaryAnimatedSprite</samp> event command</a>. Default 100.
</td></tr>
<tr>
<td><samp>Flicker</samp><br /><samp>Flip</samp>
</td>
<td><i>(Optional)</i> See equivalent fields in the <a href="#Other_changes"><samp>temporaryAnimatedSprite</samp> event command</a>. Default false.
</td></tr></tbody></table>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>WorkingEffectChance</samp>
</td>
<td><i>(Optional)</i> The percentage chance to apply <samp>WorkingEffects</samp> each time the day starts or the in-game clock changes, as a value between 0 (never) and 1 (always). Default 0.33.
</td></tr>
<tr>
<td><samp>LightWhileWorking</samp>
</td>
<td><i>(Optional)</i> The light emitted by the machine while it's processing an item. Default none.
<p>This consists of a list of models with these fields: 
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Radius</samp>
</td>
<td><i>(Optional)</i> The size of the area covered by the light effect, as a multiplier of the default radius (like <samp>1.5</samp> for an area 50% wider than the default). Default 1.
</td></tr>
<tr>
<td><samp>Color</samp>
</td>
<td><i>(Optional)</i> A tint color to apply to the light. This can be a <a rel="nofollow" class="external text" href="../../external.html?link=https://docs.monogame.net/api/Microsoft.Xna.Framework.Color.html#properties"><samp>Color</samp> field name</a> (like <samp>ForestGreen</samp>), RGB hex code (like <samp>#AABBCC</samp>), or RGBA hex code (<samp>#AABBCCDD</samp>). Default <samp>White</samp> (no tint).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>WobbleWhileWorking</samp>
</td>
<td><i>(Optional)</i> Whether the machine sprite should bulge in &amp; out while it's processing an item. Default false.
</td></tr>
<tr>
<td><samp>ShowNextIndexWhileWorking</samp><br /><samp>ShowNextIndexWhenReady</samp>
</td>
<td><i>(Optional)</i> Whether to show the next sprite in the machine's spritesheet while it's processing an item (<samp>ShowNextIndexWhileWorking</samp>) or ready (<samp>ShowNextIndexWhenReady</samp>). Default false.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Player_interaction_messages">Player interaction messages</span></h4>
<p>These only apply when the player interacts with a chest directly, instead of using a <a href="../../external.html?link=https://stardewvalleywiki.com/Hopper" title="Hopper">hopper</a> or mod like <a rel="nofollow" class="external text" href="../../external.html?link=https://www.nexusmods.com/stardewvalley/mods/1063">Automate</a>.
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>InvalidItemMessage</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for the message shown in a toaster notification if the player tries to input an item that isn't accepted by the machine.
</td></tr>
<tr>
<td><samp>InvalidItemMessageCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether <samp>InvalidItemMessage</samp> should be shown. This can use item-related queries like <samp>ITEM_TYPE</samp>. Defaults to always true.
</td></tr>
<tr>
<td><samp>InvalidCountMessage</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for the message shown in a toaster notification if the input inventory doesn't contain this item, unless overridden by <samp>InvalidCountMessage</samp> under <samp>OutputRules</samp>.
<p>This can use extra custom tokens:
</p>
<ul><li><samp>[ItemCount]</samp>: the number of remaining items needed. For example, if you're holding three and need five, <samp>[ItemCount]</samp> will be replaced with <samp>2</samp>.</li></ul>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Advanced_logic">Advanced logic</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>InteractMethod</samp>
</td>
<td><i>(Optional)</i> A C# method invoked when the player interacts with the machine when it doesn't have output ready to harvest.
<p>This must be specified in the form <samp><code title="required field &#39;full type name&#39;">&lt;full type name&gt;</code>.<code title="required field &#39;method name&#39;">&lt;method name&gt;</code></samp> (like <samp>StardewValley.Object.SomeInteractMethod</samp>). The method must be static and match the game's <samp>MachineInteractDelegate</samp> method signature:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">/// &lt;summary&gt;The method signature for a custom &lt;see cref=&quot;MachineData.InteractMethod&quot;/&gt; method.&lt;/summary&gt;</span>
<span class="c1">/// &lt;param name=&quot;machine&quot;&gt;The machine instance for which to produce output.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name=&quot;location&quot;&gt;The location containing the machine.&lt;/param&gt;</span>
<span class="c1">/// &lt;param name=&quot;player&quot;&gt;The player using the machine.&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;Returns whether the interaction was handled.&lt;/returns&gt;</span>
<span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">InteractWithMachine</span><span class="p">(</span><span class="n">Object</span> <span class="n">machine</span><span class="p">,</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Farmer</span> <span class="n">player</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>HasInput</samp><br /><samp>HasOutput</samp>
</td>
<td><i>(Optional)</i> Whether to force adding the <samp>machine_input</samp> or <samp>machine_output</samp> <a href="#New_context_tags">context tags</a> respectively. This isn't needed for most machines, since they'll be set based on the <samp>OutputRules</samp> field. Default false.
</td></tr>
<tr>
<td><samp>IsIncubator</samp>
</td>
<td><i>(Optional)</i> Whether this machine acts as an incubator when placed in a building, so players can incubate eggs in it. Default false.
<p>This is used by the <a href="../../external.html?link=https://stardewvalleywiki.com/Incubator" title="Incubator">incubator</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Ostrich_Incubator" title="Ostrich Incubator">ostrich incubator</a>. The game logic assumes there's only one such machine in each building, so this generally shouldn't be used by custom machines that can be built in a vanilla <a href="../../external.html?link=https://stardewvalleywiki.com/Barn" title="Barn">barn</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Coop" title="Coop">coop</a>.
</p>
</td></tr>
<tr>
<td><samp>StatsToIncrementWhenLoaded</samp><br /><samp>StatsToIncrementWhenHarvested</samp>
</td>
<td><i>(Optional)</i> The game stat counters to increment when an item is placed in the machine (<samp>StatsToIncrementWhenLoaded</samp>) or when the processed output is collected (<samp>StatsToIncrementWhenHarvested</samp>). Default none. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>StatName</samp>
</td>
<td>The name of the stat counter field on <samp>Game1.stats</samp>.
</td></tr>
<tr>
<td><samp>RequiredItemId</samp>
</td>
<td><i>(Optional)</i> If set, only increment the stat if the main input item has this qualified or unqualified item ID.
</td></tr>
<tr>
<td><samp>RequiredTags</samp>
</td>
<td><i>(Optional)</i> If set, only increment the stat if the main input item has <i>all</i> of these <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Context_tags" class="mw-redirect" title="Modding:Context tags">context tags</a>. You can negate a tag with <samp>!</samp> (like <code>"RequiredTags": [ "bone_item", "!fossil_item" ]</code> for bone items that aren't fossils).
</td></tr></tbody></table>
<p>It's fine to use this with custom machines, but you can only increment built-in stats so it won't be applicable for most custom machines. For example, the vanilla game increments <samp>PiecesOfTrashRecycled</samp> for the <a href="../../external.html?link=https://stardewvalleywiki.com/Recycling_Machine" title="Recycling Machine">recycling machine</a> and <samp>GeodesCracked</samp> for the <a href="../../external.html?link=https://stardewvalleywiki.com/Geode_Crusher" title="Geode Crusher">geode crusher</a>.
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4><span id="Interacting_with_machines_in_C#"></span><span class="mw-headline" id="Interacting_with_machines_in_C.23">Interacting with machines in C#</span></h4>
<p>Stardew Valley 1.6 adds two <samp>Object</samp> fields for reference:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>lastOutputRuleId</samp>
</td>
<td>If this is a machine, the output rule ID for the rule being processed by the machine (if any).
</td></tr>
<tr>
<td><samp>lastInputItem</samp>
</td>
<td>If this is a machine, the item that was dropped into the machine to start the current output (if any).
</td></tr></tbody></table>
<p>And a few methods for processing items:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>IsMachineWorking()</samp>
</td>
<td>Get whether the machine is currently processing an item.
</td></tr>
<tr>
<td><samp>ShouldTimePassForMachine(location)</samp>
</td>
<td>Get whether the machine should be updated in the given location. For example, this will return false for <a href="../../external.html?link=https://stardewvalleywiki.com/Solar_Panel" title="Solar Panel">solar panels</a> placed indoors, or outdoors on a cloudy day.
</td></tr>
<tr>
<td><samp>GetMachineData()</samp>
</td>
<td>Get the underlying machine data from <samp>Data/Machines</samp>.
</td></tr>
<tr>
<td><samp>PlaceInMachine(…)</samp>
</td>
<td>Try to place an item in the machine using the rules from <samp>Data/Machines</samp>. This returns a boolean which indicates whether the machine was successfully started.
</td></tr>
<tr>
<td><samp>OutputMachine(…)</samp>
</td>
<td>Try to set the machine output given the input item and an optional output rule to apply. Most code should call <samp>PlaceInMachine</samp> instead.
</td></tr></tbody></table>
<p>A lot of the generic machine logic is also handled by a new <samp>MachineDataUtility</samp> class, which lets C# mods interact with machine data more directly. For example, you can check which output a machine would produce without actually updating the machine.
</p>
<h3><span class="mw-headline" id="Custom_melee_weapons">Custom melee weapons</span></h3>
<p><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Weapons" title="Modding:Items">Melee weapons</a> are still stored in <samp>Data/Weapons</samp>, but that asset has been overhauled in Stardew Valley 1.6. The slash-delimited entries are now models to simplify edits and enable new features (like the new <samp>Projectiles</samp> feature).
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is the unqualified <a href="#Custom_items">item ID</a> for the weapon.</li>
<li>The value is model with the fields listed below.</li></ul>
<h4><span class="mw-headline" id="Basic_weapon_info">Basic weapon info</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Name</samp>
</td>
<td>The internal weapon name.
</td></tr>
<tr>
<td><samp>DisplayName</samp><br /><samp>Description</samp>
</td>
<td>A <a href="#Tokenizable_string_format">tokenizable string</a> for the translated display name &amp; description.
</td></tr>
<tr>
<td><samp>Type</samp>
</td>
<td>The weapon type. One of <samp>0</samp> (stabbing sword), <samp>1</samp> (dagger), <samp>2</samp> (club or hammer), or <samp>3</samp> (slashing sword).
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Appearance">Appearance</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the spritesheet containing the weapon's sprite.
</td></tr>
<tr>
<td><samp>SpriteIndex</samp>
</td>
<td>The index within the <samp>Texture</samp> for the weapon sprite, where 0 is the top-left sprite.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Stats">Stats</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>MinDamage</samp><br /><samp>MaxDamage</samp>
</td>
<td>The minimum and maximum based damage caused when hitting a monster with this weapon.
</td></tr>
<tr>
<td><samp>Knockback</samp>
</td>
<td><i>(Optional)</i> How far the target is pushed when hit, as a multiplier relative to a base weapon like the <a href="../../external.html?link=https://stardewvalleywiki.com/Rusty_Sword" title="Rusty Sword">Rusty Sword</a> (e.g. <samp>1.5</samp> for 150% of Rusty Sword's weight). Default 1.
</td></tr>
<tr>
<td><samp>Speed</samp>
</td>
<td><i>(Optional)</i> How fast the player can swing the weapon. Each point of speed is worth 40ms of swing time relative to 0. This stacks with the <a href="../../external.html?link=https://stardewvalleywiki.com/Speed" title="Speed">player's weapon speed</a>. Default 0.
</td></tr>
<tr>
<td><samp>Precision</samp>
</td>
<td><i>(Optional)</i> Reduces the chance that a strike will miss. Default 0.
</td></tr>
<tr>
<td><samp>Defense</samp>
</td>
<td><i>(Optional)</i> Reduces damage received by the player. Default 0.
</td></tr>
<tr>
<td><samp>AreaOfEffect</samp>
</td>
<td><i>(Optional)</i> Slightly increases the area of effect. Default 0.
</td></tr>
<tr>
<td><samp>CritChance</samp>
</td>
<td><i>(Optional)</i> The chance of a critical hit, as a decimal value between 0 (never) and 1 (always). Default 0.02.
</td></tr>
<tr>
<td><samp>CritMultiplier</samp>
</td>
<td><i>(Optional)</i> A multiplier applied to the base damage for a critical hit. This can be a decimal value. Default 3.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Game_logic">Game logic</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>CanBeLostOnDeath</samp>
</td>
<td>Whether the player can <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild#Item_Recovery_Service" title="Adventurer&#39;s Guild">lose this tool when they die</a>. Default true.
</td></tr>
<tr>
<td><samp>MineBaseLevel</samp><br /><samp>MineMinLevel</samp>
</td>
<td><i>(Optional)</i> The base and minimum mine level, which affect <a href="#Mine_container_drops">mine container drops</a>. Both default to -1, which disables automatic mine drops.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Advanced">Advanced</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Projectiles</samp>
</td>
<td><i>(Optional)</i> The projectiles fired when the weapon is used, which continue along their path until they hit a monster and cause damage. A separate projectile is fired for each entry in this list.
<p>This consists of a list of models with these fields (one projectile will fire for each entry in the list):
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A unique identifier for the projectile within the current weapon's data. The ID should only contain alphanumeric/underscore/dot characters. For custom projectiles, this should be prefixed with your mod ID like Example.ModId_ProjectileId.
</td></tr>
<tr>
<td><samp>Damage</samp>
</td>
<td><i>(Optional)</i> The amount of damage caused when the projectile hits a monster. Default 10.
</td></tr>
<tr>
<td><samp>Explodes</samp>
</td>
<td><i>(Optional)</i> Whether the projectile explodes when it collides with something. Default false.
</td></tr>
<tr>
<td><samp>Bounces</samp>
</td>
<td><i>(Optional)</i> The number of times the projectile can bounce off walls before being destroyed. Default 0.
</td></tr>
<tr>
<td><samp>MaxDistance</samp>
</td>
<td><i>(Optional)</i> The maximum tile distance the projectile can travel. Default 4.
</td></tr>
<tr>
<td><samp>Velocity</samp>
</td>
<td><i>(Optional)</i> The speed at which the projectile moves. Default 10.
</td></tr>
<tr>
<td><samp>RotationVelocity</samp>
</td>
<td><i>(Optional)</i> The rotation velocity. Default 32.
</td></tr>
<tr>
<td><samp>TailLength</samp>
</td>
<td><i>(Optional)</i> The length of the tail which trails behind the main projectile. Default 1.
</td></tr>
<tr>
<td><samp>FireSound</samp><br /><samp>BounceSound</samp><br /><samp>CollisionSound</samp>
</td>
<td><i>(Optional)</i> The sound played when the projectile is fired, bounces off a wall, or collides with something. All three default to none.
</td></tr>
<tr>
<td><samp>MinAngleOffset</samp><br /><samp>MaxAngleOffset</samp>
</td>
<td><i>(Optional)</i> A random offset applied to the direction of the project each time it's fired. Both fields default to 0, in which case it's always shot at the 90° angle matching the player's facing direction.
</td></tr>
<tr>
<td><samp>SpriteIndex</samp>
</td>
<td><i>(Optional)</i> The sprite index in the <samp>TileSheets/Projectiles</samp> asset to draw for this projectile. Defaults to 11 (a glowing-yellow-ball sprite).
</td></tr>
<tr>
<td><samp>Item</samp>
</td>
<td><i>(Optional)</i> The item to shoot. If set, this overrides <samp>SpriteIndex</samp>.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported for ammo items.
<p>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr></tbody></table>
</td></tr></tbody></table>
<p>Note that these are magic projectiles fired when the weapon is used, they're not aimed directly like <a href="../../external.html?link=https://stardewvalleywiki.com/Slingshot" title="Slingshot">slingshot</a> projectiles.
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Custom_movie_concessions">Custom movie concessions</span></h3>
<p>You could already <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Movie_theater_data#Concession_data" title="Modding:Movie theater data">add/edit concessions</a> sold in the <a href="../../external.html?link=https://stardewvalleywiki.com/Movie_Theater" title="Movie Theater">movie theater</a>, but conflicts were likely since each concession had an incrementing numeric ID which matched its position in the vanilla tilesheet.
</p><p>Stardew Valley 1.6 addresses that with two changes:
</p>
<ul>
<li>The <samp>Id</samp> field is now a string, so you can use a globally unique ID like <samp>ExampleAuthor.ModId_ItemName</samp>.</li>
<li>You can now use a different texture with two new required fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture containing the concession's sprite.
</td></tr>
<tr>
<td><samp>SpriteIndex</samp>
</td>
<td>The index within the <samp>Texture</samp> for the concession sprite, where 0 is the top-left sprite.
</td></tr></tbody></table>
</li>
</ul>
<p>For example, this content pack adds a new 'Pufferchick Pop' concession with a custom image:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/Concessions&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.ModId_PufferchickPop&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_PufferchickPop&quot;</span><span class="p">,</span> <span class="c1">// must specify ID again when creating a new entry</span>
                    <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;PufferchickPop&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;DisplayName&quot;</span><span class="o">:</span> <span class="s2">&quot;Pufferchick Pop&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Description&quot;</span><span class="o">:</span> <span class="s2">&quot;A cute cake pop shaped like a pufferchick.&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Price&quot;</span><span class="o">:</span> <span class="mi">25</span><span class="p">,</span>
                    <span class="s2">&quot;Texture&quot;</span><span class="o">:</span> <span class="s2">&quot;{{InternalAssetKey: assets/pufferchick-pop.png}}&quot;</span> <span class="c1">// an image in your content pack</span>
                    <span class="s2">&quot;SpriteIndex&quot;</span><span class="o">:</span> <span class="mi">0</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3><span id="Custom_museum_donations_&amp;_rewards"></span><span class="mw-headline" id="Custom_museum_donations_.26_rewards">Custom museum donations &amp; rewards</span></h3>
<p>You can now add/edit the items which the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a> accepts in donation and gives back in rewards through the new <samp>Data/MuseumRewards</samp> data asset.
</p>
<h4><span class="mw-headline" id="Format">Format</span></h4>
<p>The data asset consists of a string → model lookup, where...
</p>
<ul><li>The key is a unique identifier for the reward group. The ID should only contain alphanumeric/underscore/dot characters. For custom reward entries, this should be prefixed with your mod ID like <samp>Example.ModId_RewardName</samp>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>TargetContextTags</samp>
</td>
<td>The items that must be donated to complete this reward group. The player must fulfill every entry in the list to unlock the reward. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Tag</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Context_tags" class="mw-redirect" title="Modding:Context tags">context tag</a> for the items to require.
</td></tr>
<tr>
<td><samp>Count</samp>
</td>
<td>The minimum number of items matching the context tags that must be donated.
</td></tr></tbody></table>
<p>For example, an entry with the tag <samp>forage_item</samp> and count 2 will require donating any two forage items.
</p><p>Special case: an entry with the exact values <code>Tag: "", Count: -1</code> passes if the museum is complete (i.e. the player has donated the max number of items).
</p>
</td></tr>
<tr>
<td><samp>FlagOnCompletion</samp>
</td>
<td><i>(Optional if <samp>RewardItemIsSpecial</samp> is true)</i> Whether to add the <samp>ID</samp> value to the player's received mail. This is used to track whether the player has collected the reward, and should almost always be true. If this is omitted and <samp>RewardItemIsSpecial</samp> is false, the player will be able collect the reward infinite times. Default false.
<p>After the reward is collected, you can check this value using the <samp>HasFlag</samp> condition in <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a>.
</p>
</td></tr>
<tr>
<td><samp>RewardEventSeenFlag</samp>
</td>
<td><i>(Optional)</i> The ID to add to the player's event-seen list when the reward is collected. (You must still specify <samp>FlagOnCompletion</samp> or <samp>RewardItemIsSpecial</samp> either way.)
<p>After the reward is collected, you can check this value using the <samp>HasSeenEvent</samp> condition in <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a>.
</p>
</td></tr>
<tr>
<td><samp>RewardItemId</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_items">qualified item ID</a> for the item given to the player when they donate all required items for this group. There's no reward item if omitted.
</td></tr>
<tr>
<td><samp>RewardItemCount</samp>
</td>
<td><i>(Optional)</i> The stack size for the <samp>RewardItemId</samp> (if the item supports stacking). Default 1.
</td></tr>
<tr>
<td><samp>RewardItemIsSpecial</samp>
</td>
<td><i>(Optional)</i> Whether to mark the <samp>RewardItemId</samp> as a special permanent item, which can't be destroyed/dropped and can only be collected once. Default false.
</td></tr>
<tr>
<td><samp>RewardItemIsRecipe</samp>
</td>
<td><i>(Optional)</i> Whether to give the player a cooking/crafting recipe which produces the <samp>RewardItemId</samp>, instead of the item itself. Ignored if the item type can't be cooked/crafted (i.e. non-object-type items). Default false.
</td></tr>
<tr>
<td><samp>RewardMail</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail ID</a> to add to the player's mailbox tomorrow.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<p><br />
For example, this content pack adds two rewards, one in form of a mail, the other a machine&#160;:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;1.28.0&quot;</span><span class="p">,</span>
	<span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
		<span class="p">{</span>
			<span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
			<span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/MuseumRewards&quot;</span><span class="p">,</span>
			<span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
			<span class="c1">//Send a mail when a specific item is donated</span>
				<span class="s2">&quot;Example.ModId_ShinyArtifact&quot;</span><span class="o">:</span> <span class="p">{</span>
					<span class="s2">&quot;TargetContextTags&quot;</span><span class="o">:</span> <span class="p">[</span>
						<span class="p">{</span>
							<span class="s2">&quot;Tag&quot;</span><span class="o">:</span> <span class="s2">&quot;id_example.modid_shinyartifact&quot;</span><span class="p">,</span><span class="c1">//The unique context tag identifying the item</span>
							<span class="s2">&quot;Count&quot;</span><span class="o">:</span> <span class="mi">1</span>
						<span class="p">},</span>
					<span class="p">],</span>
					<span class="s2">&quot;FlagOnCompletion&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
					<span class="s2">&quot;RewardMail&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_ShinyArtifact&quot;</span>
				<span class="p">},</span>
			<span class="c1">//Gives a machine as reward when 18 minerals are donated.</span>
				<span class="s2">&quot;Example.ModId_18MineralItems&quot;</span><span class="o">:</span> <span class="p">{</span>
					<span class="s2">&quot;TargetContextTags&quot;</span><span class="o">:</span> <span class="p">[</span>
						<span class="p">{</span>
							<span class="s2">&quot;Tag&quot;</span><span class="o">:</span> <span class="s2">&quot;item_type_minerals&quot;</span><span class="p">,</span>
							<span class="s2">&quot;Count&quot;</span><span class="o">:</span> <span class="mi">18</span>
						<span class="p">},</span>
					<span class="p">],</span>
					<span class="s2">&quot;RewardItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(BC)Example.ModId_SuperMachine&quot;</span><span class="p">,</span>
					<span class="s2">&quot;RewardItemCount&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
					<span class="s2">&quot;FlagOnCompletion&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
					
				<span class="p">},</span>
			<span class="p">},</span>
		<span class="p">}</span>
	<span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>The mail entry would then be added to <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail data</a> using the same key. See <a href="#Custom_items">Custom Items</a> and <a href="#Custom_machines">Custom Machines</a> to add the items themselves.
</p>
<h4><span class="mw-headline" id="Achievements">Achievements</span></h4>
<p>The <i>A Complete Collection</i> <a href="../../external.html?link=https://stardewvalleywiki.com/Achievements" title="Achievements">achievement</a> is automatically adjusted to require any custom donations added too. This is based on the number of donated items though, so removing custom donations later may incorrectly mark the museum complete (since you may have donated enough items to meet the total required).
</p>
<h3><span class="mw-headline" id="Custom_fruit_trees">Custom fruit trees</span></h3>
<h4><span class="mw-headline" id="Data_format">Data format</span></h4>
<p>You can now add custom <a href="../../external.html?link=https://stardewvalleywiki.com/Fruit_Trees" title="Fruit Trees">fruit trees</a> by editing the revamped <samp>Data/fruitTrees</samp> asset. This consists of a string → model lookup, where...
</p>
<ul><li>The key is the <a href="#Custom_items">unqualified item ID</a> for the sapling item in <samp>Data/ObjectInformation</samp>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="#Tokenizable_string_format">tokenizable string</a> for the tree's display name. This should return a display name without 'tree' (like <samp>Cherry</samp> for a cherry tree). This is used in UI messages like "<i>Your &lt;display name&gt; tree wasn't able to grow last night</i>".
</td></tr>
<tr>
<td><samp>Seasons</samp>
</td>
<td>The seasons in which the fruit tree bears fruit. This consists of an array of season names (any combination of <samp>spring</samp>, <samp>summer</samp>, <samp>fall</samp>, or <samp>winter</samp>).
<p><b>Note:</b> the previous '<samp>island</samp>' season value is no longer valid. Using <samp>summer</samp> is equivalent to how it worked before (since we now have <a href="#Custom_location_contexts">per-location seasons</a>).
</p>
</td></tr>
<tr>
<td><samp>Fruit</samp>
</td>
<td>The fruit items to add to the tree each day while the tree is in-season. The first matching fruit (if any) is selected each day.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported for fruit items.
<p>Notes:
</p>
<ul><li>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.</li>
<li>Season conditions are ignored in non-seasonal locations like the <a href="../../external.html?link=https://stardewvalleywiki.com/Greenhouse" title="Greenhouse">greenhouse</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a>.</li></ul>
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td><i>(Optional)</i> If set, the group only applies if the tree's location is in this season. This is ignored in non-seasonal locations like the <a href="../../external.html?link=https://stardewvalleywiki.com/Greenhouse" title="Greenhouse">greenhouse</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a>.
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that this entry is selected, as a value between 0 (never drops) and 1 (always drops). Default 1 (100% chance).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture under the game's <samp>Content</samp> folder. Use <samp>\</samp> (or <samp>\\</samp> in JSON) to separate name segments if needed. For example, vanilla fruit trees use <samp>TileSheets\fruitTrees</samp>.
</td></tr>
<tr>
<td><samp>TextureSpriteRow</samp>
</td>
<td>The tree's row index in the <samp>Texture</samp> spritesheet (e.g. 0 for the first tree, 1 for the second tree, etc).
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<p>For example, this content pack adds a custom fruit tree, including <a href="#Custom_items">custom items</a> for the sapling and fruit:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// add fruit + sapling items</span>
        <span class="c1">// note: sapling must have an edibility under 0 (usually -300) to be plantable</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/ObjectInformation&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.ModId_Pufferfruit&quot;</span><span class="o">:</span> <span class="s2">&quot;Pufferfruit/1200/100/Basic -6/Pufferfruit/An example fruit item.////1/Mods\\Example.ModId\\Objects&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Example.ModId_Puffersapling&quot;</span><span class="o">:</span> <span class="s2">&quot;Puffersapling/1200/-300/Basic -74/Puffersapling/An example tree sapling.////2/Mods\\Example.ModId\\Objects&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// add fruit tree</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/FruitTrees&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.ModId_Puffersapling&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;DisplayName&quot;</span><span class="o">:</span> <span class="s2">&quot;[DataString Data\ObjectInformation Example.ModId_Pufferfruit 4]&quot;</span><span class="p">,</span> <span class="c1">// field 4 (display name) for our fruit item</span>
                    <span class="s2">&quot;Seasons&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;spring&quot;</span> <span class="p">],</span>
                    <span class="s2">&quot;Fruit&quot;</span><span class="o">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Pufferfruit&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Pufferfruit&quot;</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;Texture&quot;</span><span class="o">:</span> <span class="s2">&quot;Mods\\Example.ModId\\FruitTrees&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;TextureSpriteRow&quot;</span><span class="o">:</span> <span class="mi">0</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// add images</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;Load&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Mods/Example.ModId/FruitTrees, Mods/Example.ModId/Objects&quot;</span><span class="p">,</span>
            <span class="s2">&quot;FromFile&quot;</span><span class="o">:</span> <span class="s2">&quot;assets/{{TargetWithoutPath}}.png&quot;</span> <span class="c1">// assets/FruitTrees.png, assets/Objects.png</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>The fruit trees can then be added to the game by giving the player a sapling item in the usual ways (e.g. from <a href="#Custom_shops">a shop</a>).
</p>
<h4><span class="mw-headline" id="Fruit_items">Fruit items</span></h4>
<p>For C# mods, the <samp>fruitsOnTree</samp> field (number of fruit on the tree) has been replaced by <samp>fruit</samp> (list of fruit items).
</p>
<h4><span class="mw-headline" id="Spawning_wild_trees">Spawning wild trees</span></h4>
<p>Custom trees can be added to the game in two ways:
</p>
<ul><li>Spawn them on <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map tiles</a> when the location is created, using the new <samp>SpawnTree: fruit <code title="required field &#39;tree ID&#39;">&lt;tree ID&gt;</code></samp> tile property. This must be added on the <samp>Paths</samp> layer, which must also have tile index 34 from the <samp>paths</samp> tilesheet.</li>
<li>Or give the player a seed item in the usual ways (e.g. from <a href="#Custom_shops">a shop</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail letter</a>, etc).</li></ul>
<h3><span class="mw-headline" id="Custom_tools">Custom tools</span></h3>
<p>You can now create/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Tools" title="Tools">tools</a> by editing the new <samp>Data/Tools</samp> asset. This consists of a string → model lookup, where...
</p>
<ul><li>The key is the unqualified <a href="#Custom_items">item ID</a>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<h4><span class="mw-headline" id="Basic_tool_data">Basic tool data</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td><samp>ClassName</samp>
</td>
<td>The name of the C# class to construct within the <code>StardewValley.Tools</code> namespace. The class must be a subclass of <samp>StardewValley.Tool</samp>, and have a constructor with no arguments. For example, given a value of <samp>Axe</samp>, the game will create <code>StardewValley.Tools.Axe</code> instances.
<p>The main values are:
</p>
<ul><li>main tools (<samp>Axe</samp>, <samp>FishingRod</samp>, <samp>Hoe</samp>, <samp>MeleeWeapon</samp>, <samp>MilkPail</samp>, <samp>Pan</samp>, <samp>Pickaxe</samp>, <samp>Shears</samp>, <samp>Wand</samp>, and <samp>WateringCan</samp>);</li>
<li>a special <samp>GenericTool</samp> type which applies the <samp>Data/Tools</samp> data and only has generic logic, so C# mods can patch in their own logic;</li>
<li>and two tools cut from the game which may not work correctly (<samp>Lantern</samp> and <samp>Raft</samp>).</li></ul>
</td></tr>
<tr>
<td><samp>Name</samp>
</td>
<td>The internal name to set for the tool item.
</td></tr>
<tr>
<td><samp>DisplayName</samp><br /><samp>Description</samp>
</td>
<td>A <a href="#Tokenizable_string_format">tokenizable string</a> for the tool's in-game display name and description.
</td></tr>
<tr>
<td><samp>AttachmentSlots</samp>
</td>
<td><i>(Optional)</i> The number of attachment slots to enable on the tool. Note that only <samp>FishingRod</samp> tools have the code to render and use attachment slots. Default <samp>-1</samp>, which keeps the default value set by the tool class.
</td></tr>
<tr>
<td><samp>SalePrice</samp>
</td>
<td><i>(Optional)</i> The default price when the item is sold to the player in a shop. Defaults to <samp>-1</samp>, in which case you should set the price manually in shops.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Appearance_2">Appearance</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture containing the tool's sprite.
</td></tr>
<tr>
<td><samp>SpriteIndex</samp>
</td>
<td>The tool's sprite index within the <samp>Texture</samp>, where 0 is the top row.
</td></tr>
<tr>
<td><samp>MenuSpriteIndex</samp>
</td>
<td><i>(Optional)</i> The sprite index within the <samp>Texture</samp> for the item icon. Defaults to <samp>SpriteIndex</samp>.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Upgrades">Upgrades</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td><samp>UpgradeLevel</samp>
</td>
<td><i>(Optional)</i> The tool upgrade level. Default <samp>-1</samp>, which keeps the default value set by the tool class.
</td></tr>
<tr>
<td><samp>ApplyUpgradeLevelToDisplayName</samp>
</td>
<td><i>(Optional)</i> Whether to adjust the <samp>DisplayName</samp> for the usual upgrade levels. For example, the display name for a level one Axe changes to 'Copper Axe'. Default false.
<p>The display name format in English is:
</p>
<table class="wikitable">

<tbody><tr>
<th>upgrade level
</th>
<th>display name format
</th></tr>
<tr>
<td>1
</td>
<td>Copper <code title="required field &#39;display name&#39;">&lt;display name&gt;</code>
</td></tr>
<tr>
<td>2
</td>
<td>Steel <code title="required field &#39;display name&#39;">&lt;display name&gt;</code>
</td></tr>
<tr>
<td>3
</td>
<td>Gold <code title="required field &#39;display name&#39;">&lt;display name&gt;</code>
</td></tr>
<tr>
<td>4
</td>
<td>Iridium <code title="required field &#39;display name&#39;">&lt;display name&gt;</code>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>ConventionalUpgradeFrom</samp>
</td>
<td><i>(Optional)</i> If set, prepends an upgrade for the given tool ID to the <samp>UpgradeFrom</samp> field. This applies these rules (based on the <samp>UpgradeLevel</samp> field, not the upgrade level of the specified tool ID):
<table class="wikitable">

<tbody><tr>
<th>upgrade level
</th>
<th>price
</th>
<th>items needed
</th></tr>
<tr>
<td>1
</td>
<td><span style="display: none;">data-sort-value="2000"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, /mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />2,000g</span>
</td>
<td><style data-mw-deduplicate="TemplateStyles:r120955">.mw-parser-output .nametemplate{margin:2px 5px 1px 2px;display:block;white-space:nowrap}.mw-parser-output .nametemplateinline{margin:2px 0 1px 2px;display:inline;white-space:nowrap}.mw-parser-output .nametemplate img,.mw-parser-output .nametemplateinline img{max-width:none}</style><span class="nametemplate"><img alt="Copper Bar.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/f/f1/Copper_Bar.png/24px-Copper_Bar.png" decoding="async" width="24" height="24" srcset="/mediawiki/images/thumb/f/f1/Copper_Bar.png/36px-Copper_Bar.png 1.5x, /mediawiki/images/f/f1/Copper_Bar.png 2x" /> <a href="../../external.html?link=https://stardewvalleywiki.com/Copper_Bar" title="Copper Bar">Copper Bar</a>&#160;(5)</span>
</td></tr>
<tr>
<td>2
</td>
<td><span style="display: none;">data-sort-value="5000"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, /mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />5,000g</span>
</td>
<td><link rel="mw-deduplicated-inline-style" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/mw-data:TemplateStyles:r120955"/><span class="nametemplate"><img alt="Iron Bar.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/6/6c/Iron_Bar.png/24px-Iron_Bar.png" decoding="async" width="24" height="24" srcset="/mediawiki/images/thumb/6/6c/Iron_Bar.png/36px-Iron_Bar.png 1.5x, /mediawiki/images/6/6c/Iron_Bar.png 2x" /> <a href="../../external.html?link=https://stardewvalleywiki.com/Iron_Bar" title="Iron Bar">Iron Bar</a>&#160;(5)</span>
</td></tr>
<tr>
<td>3
</td>
<td><span style="display: none;">data-sort-value="10000"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, /mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />10,000g</span>
</td>
<td><link rel="mw-deduplicated-inline-style" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/mw-data:TemplateStyles:r120955"/><span class="nametemplate"><img alt="Gold Bar.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/4/4e/Gold_Bar.png/24px-Gold_Bar.png" decoding="async" width="24" height="24" srcset="/mediawiki/images/thumb/4/4e/Gold_Bar.png/36px-Gold_Bar.png 1.5x, /mediawiki/images/4/4e/Gold_Bar.png 2x" /> <a href="../../external.html?link=https://stardewvalleywiki.com/Gold_Bar" title="Gold Bar">Gold Bar</a>&#160;(5)</span>
</td></tr>
<tr>
<td>4
</td>
<td><span style="display: none;">data-sort-value="25000"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, /mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />25,000g</span>
</td>
<td><link rel="mw-deduplicated-inline-style" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/mw-data:TemplateStyles:r120955"/><span class="nametemplate"><img alt="Iridium Bar.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/c/c4/Iridium_Bar.png/24px-Iridium_Bar.png" decoding="async" width="24" height="24" srcset="/mediawiki/images/thumb/c/c4/Iridium_Bar.png/36px-Iridium_Bar.png 1.5x, /mediawiki/images/c/c4/Iridium_Bar.png 2x" /> <a href="../../external.html?link=https://stardewvalleywiki.com/Iridium_Bar" title="Iridium Bar">Iridium Bar</a>&#160;(5)</span>
</td></tr></tbody></table>
<p>For example, Iridium Axe specifies this value:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;ConventionalUpgradeFrom&quot;</span><span class="o">:</span> <span class="s2">&quot;(T)GoldAxe&quot;</span>
</pre></div>
</td></tr>
<tr>
<td><samp>UpgradeFrom</samp>
</td>
<td><i>(Optional)</i> The requirements to buy this tool from Clint's <a href="../../external.html?link=https://stardewvalleywiki.com/Blacksmith#Upgrade_Tools" title="Blacksmith">blacksmith tool upgrade shop</a>. If you specify multiple entries, the first one which matches will be applied.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td><samp>Price</samp>
</td>
<td><i>(Optional)</i> The gold price to buy the upgrade. Defaults to 0.
</td></tr>
<tr>
<td><samp>RequireToolId</samp>
</td>
<td><i>(Optional)</i> If set, the <a href="#Custom_items">qualified or unqualified item ID</a> for the tool that must be in the player's inventory for the upgrade to appear. The tool will be destroyed when the upgrade is purchased.
</td></tr>
<tr>
<td><samp>TradeItemId</samp>
</td>
<td><i>(Optional)</i> If set, the <a href="#Custom_items">qualified or unqualified item ID</a> for an extra item that must be traded to upgrade the tool. (For example, many vanilla tools need metal bars.)
</td></tr>
<tr>
<td><samp>TradeItemAmount</samp>
</td>
<td><i>(Optional)</i> The number of <samp>TradeItemId</samp> required. Defaults to 1.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this upgrade is available. Defaults to always true.
</td></tr></tbody></table>
<p>For example, these are equivalent to the Steel Axe's upgrade settings:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;UpgradeFrom&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;RequireToolId&quot;</span><span class="o">:</span> <span class="s2">&quot;(T)CopperAxe&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Price&quot;</span><span class="o">:</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="s2">&quot;TradeItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(O)335&quot;</span><span class="p">,</span> <span class="c1">// Iron Bar</span>
        <span class="s2">&quot;TradeItemAmount&quot;</span><span class="o">:</span> <span class="mi">5</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
<p>If you want the tool to always be available, you can just omit the conditions. For example:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;UpgradeFrom&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;Price&quot;</span><span class="o">:</span> <span class="mi">5000</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
<p>Note that Clint needs a few days to smith the new tool. If you want to sell the tool directly, <a href="#Custom_shops">add it to a regular shop</a> instead.
</p>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Game_logic_2">Game logic</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td><samp>CanBeLostOnDeath</samp>
</td>
<td>Whether the player can <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild#Item_Recovery_Service" title="Adventurer&#39;s Guild">lose this tool when they die</a>. Default false.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Extensibility">Extensibility</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td><samp>ModData</samp>
</td>
<td><i>(Optional)</i> The mod data values to set when the tool is created, accessible in C# code via the <samp>tool.modData</samp> dictionary. For example:
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;ModData&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;PowerLevel&quot;</span><span class="o">:</span> <span class="mi">9000</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>SetProperties</samp>
</td>
<td><i>(Optional)</i> Set the value of arbitrary properties on the tool class. For example, this would disable the tool animation and require no stamina:
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;SetProperties&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;InstantUse&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;IsEfficient&quot;</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Custom_wild_trees">Custom wild trees</span></h3>
<h4><span class="mw-headline" id="Data_format_2">Data format</span></h4>
<p>You can now create/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Trees" title="Trees">wild trees</a> by editing the <samp>Data/WildTrees</samp> asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The asset key is the unique tree type identifier. The vanilla tree IDs are <samp>1</samp> (oak), <samp>2</samp> (maple), <samp>3</samp> (pine), <samp>6</samp> (palm), <samp>7</samp> (mushroom), and <samp>8</samp> (mahogany). For custom trees, this should be prefixed with your mod ID like <samp>Example.ModId_TreeType</samp>. This should only contain alphanumeric/underscore/dot characters.</li>
<li>The asset value is a model with thee fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Textures</samp>
</td>
<td>The texture to use as the tree's spritesheet in-game. If multiple textures are listed, the first matching one is used.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the tree's spritesheet.
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td><i>(Optional)</i> If set, the specific season when this texture should apply. For more complex conditions, see <samp>Condition</samp>.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this texture should be applied for a tree. Defaults to always enabled.
<p>This is checked when the tree is created, a new day starts, or its texture is reloaded by a mod. More frequent conditions (like time of day) won't work as expected unless a mod manually triggers a tree update.
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>SeedItemId</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_items">qualified item ID</a> for the seed item. If omitted, the tree can't be planted and <samp>SeedChance</samp> will be ignored.
</td></tr>
<tr>
<td><samp>SeedPlantable</samp>
</td>
<td><i>(Optional)</i> Whether the seed can be planted by the player. If this is false, it can only be spawned automatically via map properties. Default true.
</td></tr>
<tr>
<td><samp>GrowthChance</samp>
</td>
<td><i>(Optional)</i> The probability each day that the tree will grow to the next stage without <a href="../../external.html?link=https://stardewvalleywiki.com/Tree_Fertilizer" title="Tree Fertilizer">tree fertilizer</a>, as a value from 0 (will never grow) to 1 (will grow every day). Defaults to 0.2 (20% chance).
</td></tr>
<tr>
<td><samp>FertilizedGrowthChance</samp>
</td>
<td><i>(Optional)</i> Equivalent to <samp>GrowthChance</samp>, but with <a href="../../external.html?link=https://stardewvalleywiki.com/Tree_Fertilizer" title="Tree Fertilizer">tree fertilizer</a>. Defaults to 1 (100% chance).
</td></tr>
<tr>
<td><samp>SeedChance</samp>
</td>
<td><i>(Optional)</i> The probability each day that the tree will produce a seed that will drop when the tree is shaken, as a value from 0 (never) to 1 (always). Default 0.05 (5% chance).
</td></tr>
<tr>
<td><samp>SeedOnChopChance</samp>
</td>
<td><i>(Optional)</i> The probability that a seed will drop when the player chops down the tree, as a value from 0 (never) to 1 (always). Default 0.75 (75% chance).
</td></tr>
<tr>
<td><samp>DropWoodOnChop</samp>
</td>
<td><i>(Optional)</i> Whether to drop <a href="../../external.html?link=https://stardewvalleywiki.com/Wood" title="Wood">wood</a> when the player chops down the tree. Default true.
</td></tr>
<tr>
<td><samp>DropHardwoodOnLumberChop</samp>
</td>
<td><i>(Optional)</i> Whether to drop <a href="../../external.html?link=https://stardewvalleywiki.com/Hardwood" title="Hardwood">hardwood</a> when the player chops down the tree, if they have the <a href="../../external.html?link=https://stardewvalleywiki.com/Skills#Foraging" title="Skills">Lumberjack profession</a>. Default true.
</td></tr>
<tr>
<td><samp>IsLeafy</samp>
</td>
<td><i>(Optional)</i> Whether shaking or chopping the tree causes cosmetic leaves to drop from tree and produces a leaf rustle sound. When a leaf drops, the game will use one of the four leaf sprites in the tree's spritesheet in the slot left of the stump sprite. Default true.
</td></tr>
<tr>
<td><samp>IsLeafyInWinter</samp>
</td>
<td><i>(Optional)</i> Whether <samp>IsLeafy</samp> also applies in winter. Default false.
</td></tr>
<tr>
<td><samp>GrowsInWinter</samp>
</td>
<td><i>(Optional)</i> Whether the tree can grow in winter (subject to <samp>GrowthChance</samp> or <samp>FertilizedGrowthChance</samp>). Default false.
</td></tr>
<tr>
<td><samp>IsStumpDuringWinter</samp>
</td>
<td><i>(Optional)</i> Whether the tree is reduced to a stump in winter and regrows in spring, like the vanilla <a href="../../external.html?link=https://stardewvalleywiki.com/Trees#Mushroom_Tree" title="Trees">mushroom tree</a>. Default false.
</td></tr>
<tr>
<td><samp>AllowWoodpeckers</samp>
</td>
<td><i>(Optional)</i> Whether woodpeckers can spawn on the tree. Default true.
</td></tr>
<tr>
<td><samp>UseAlternateSpriteWhenNotShaken</samp><br /><samp>UseAlternateSpriteWhenSeedReady</samp>
</td>
<td><i>(Optional)</i> Whether to render a different tree sprite when the player hasn't shaken it on that day (<samp>UseAlternateSpriteWhenNotShaken</samp>) or it has a seed ready (<samp>UseAlternateSpriteWhenSeedReady</samp>). If either field is true, the tree spritesheet must be double-width with the alternate textures on the right. If both are true, the same alternate sprites are used for both. Default false.
</td></tr>
<tr>
<td><samp>DebrisColor</samp>
</td>
<td><i>(Optional)</i> The color of the cosmetic wood chips when chopping the tree. This can be...
<ul><li>a <a rel="nofollow" class="external text" href="../../external.html?link=https://docs.monogame.net/api/Microsoft.Xna.Framework.Color.html#properties"><samp>Color</samp> field name</a> (like <samp>ForestGreen</samp>);</li>
<li>an RGB hex code (like <samp>#AABBCC</samp>) or RGBA hex code (<samp>#AABBCCDD</samp>);</li>
<li>or one of <samp>12</samp> (brown/woody), <samp>100001</samp> (white), <samp>100001</samp> (light green),  <samp>100002</samp> (light blue), <samp>100003</samp> (red), <samp>100004</samp> (yellow), <samp>100005</samp> (black), <samp>100006</samp> (gray), or <samp>100007</samp> (charcoal / dim gray).</li></ul>
<p>Defaults to <samp>12</samp> (brown/woody).
</p>
</td></tr>
<tr>
<td><samp>SeedDropItems</samp>
</td>
<td><i>(Optional)</i> When a seed is dropped subject to <samp>SeedChance</samp>, the item to drop instead of the item specified by <samp>SeedItemId</samp>. If this is empty or none match, the <samp>SeedItemId</samp> will be dropped instead.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported for chop drops.
<p>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td><i>(Optional)</i> If set, the item only applies if the tree's location is in this season.
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that the item will drop, as a value between 0 (never drops) and 1 (always drops). Default 1 (100% chance).
</td></tr>
<tr>
<td><samp>ContinueOnDrop</samp>
</td>
<td><i>(Optional)</i> If this item is dropped, whether to continue as if it hadn't been dropped for the remaining drop candidates. Default false.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>ChopItems</samp>
</td>
<td><i>(Optional)</i> The additional items to drop when the tree is chopped down. All matching items are dropped.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported for chop drops.
<p>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td><i>(Optional)</i> If set, the item only applies if the tree's location is in this season.
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that the item will drop, as a value between 0 (never drops) and 1 (always drops). Default 1 (100% chance).
</td></tr>
<tr>
<td><samp>MinSize</samp><br /><samp>MaxSize</samp>
</td>
<td><i>(Optional)</i> The minimum and/or maximum growth stage for the tree at which this item is produced. The possible values are <samp>Seed</samp>, <samp>Sprout</samp>, <samp>Sapling</samp>, <samp>Bush</samp>, and <samp>Tree</samp>. Both default to no limit.
</td></tr>
<tr>
<td><samp>ForStump</samp>
</td>
<td><i>(Optional)</i> Whether the item is only produced if the tree is a stump (<samp>true</samp>), not a stump (<samp>false</samp>), or both (<samp>null</samp>). Defaults to <samp>false</samp> (non-stumps only).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>ShakeItems</samp>
</td>
<td>The items produced by shaking the tree when it's fully grown. This only applies the first time the tree is shaken each day. All matching items are dropped.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported for shake items.
<p>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td><i>(Optional)</i> If set, the item only applies if the tree's location is in this season.
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that this entry is selected, as a value between 0 (never drops) and 1 (always drops). Default 1 (100% chance).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>TapItems</samp>
</td>
<td>The items produced by <a href="../../external.html?link=https://stardewvalleywiki.com/Tapper" title="Tapper">tapping</a> the tree. If multiple items can be produced, the first available one is selected.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported for tapper items.
<p>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td><i>(Optional)</i> If set, the item only applies if the tree's location is in this season.
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that this entry is selected, as a value between 0 (never drops) and 1 (always drops). Default 1 (100% chance).
</td></tr>
<tr>
<td><samp>DaysUntilReady</samp>
</td>
<td>The number of days before the tapper is ready to empty.
</td></tr>
<tr>
<td><samp>PreviousItemId</samp>
</td>
<td><i>(Optional)</i> If set, the item only applies if the previous item produced by the tapper matches the given <a href="#Custom_items">unqualified item ID</a>.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Spawning_wild_trees_2">Spawning wild trees</span></h4>
<p>Custom trees can be added to the game in two ways:
</p>
<ul><li>Spawn them on <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map tiles</a> when the location is created, using the new <samp>SpawnTree: wild <code title="required field &#39;tree ID&#39;">&lt;tree ID&gt;</code></samp> tile property. This must be added on the <samp>Paths</samp> layer, which must also have tile index 34 from the <samp>paths</samp> tilesheet.</li>
<li>Or give the player a seed item in the usual ways (e.g. from <a href="#Custom_shops">a shop</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail letter</a>, etc).</li></ul>
<h3><span class="mw-headline" id="Default_recipes">Default recipes</span></h3>
<p>You can now have <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Recipe_data" title="Modding:Recipe data">crafting and cooking recipes</a> that are learned automatically by setting the condition field to <samp>default</samp>. Any missing default recipes will be learned on day start.
</p><p>For example, here's the chest entry from <samp>Data/CraftingRecipes</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Chest&quot;</span><span class="o">:</span> <span class="s2">&quot;388 50/Home/130/true/default/Chest&quot;</span>
</pre></div>
<h3><span class="mw-headline" id="Hats_on_aquarium_fish">Hats on aquarium fish</span></h3>
<p>Custom <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fish_data" title="Modding:Fish data">fish in aquariums</a> can now wear <a href="../../external.html?link=https://stardewvalleywiki.com/Hats" title="Hats">hats</a>, just like vanilla <a href="../../external.html?link=https://stardewvalleywiki.com/Sea_Urchin" title="Sea Urchin">sea urchins</a>. This can be enabled by specifying a new field in <samp>Data/AquariumFish</samp>:
</p>
<table class="wikitable">

<tbody><tr>
<th>index
</th>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td>7
</td>
<td>hat position
</td>
<td>The pixel position of the hat on the sprite, specified as an object with <samp>X</samp> and <samp>Y</samp> values.
<p><b>Note:</b> currently this is only used to check if the fish can wear a hat, and has no effect on its position.
</p>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="New_context_tags">New context tags</span></h3>
<p>1.6 adds several new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">item context tags</a>:
</p>
<table class="wikitable">

<tbody><tr>
<th>context tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>campfire_item</samp>
</td>
<td>Marks the item as a <a href="../../external.html?link=https://stardewvalleywiki.com/Campfire" title="Campfire">campfire</a>. If the item also has the <samp>torch_item</samp> context tag, when it's placed in the world and turned on...
<ul><li>campfire flames are drawn over it;</li>
<li>if the item is <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Big_craftables" title="Modding:Items">big craftable</a>, light is emitted from its center instead of the top.</li></ul>
</td></tr>
<tr>
<td><samp>fish_legendary</samp>
</td>
<td>Marks the fish as a <a href="../../external.html?link=https://stardewvalleywiki.com/Fish#Legendary_Fish" title="Fish">legendary fish</a>. For example: it can't be caught again, shows an alternate sprite in the fishing minigame and a 'caught legendary fish' message after catching it, can't be added to a <a href="../../external.html?link=https://stardewvalleywiki.com/Fish_Pond" title="Fish Pond">fish pond</a>, etc.
</td></tr>
<tr>
<td><samp>fish_legendary_family</samp>
</td>
<td>Marks the fish as part of the <a href="../../external.html?link=https://stardewvalleywiki.com/Quests#Extended_Family" title="Quests">legendary fish family</a> for the fishing minigame. For example: requires <a href="../../external.html?link=https://stardewvalleywiki.com/Magic_Bait" title="Magic Bait">magic bait</a>, can't catch two at once, smaller bobber bar, 5× XP gain, etc.
</td></tr>
<tr>
<td><samp>geode</samp>
</td>
<td>Marks the item as a <a href="../../external.html?link=https://stardewvalleywiki.com/Geode" title="Geode">geode</a> item, which can be broken open at <a href="../../external.html?link=https://stardewvalleywiki.com/Blacksmith" title="Blacksmith">Clint's blacksmith shop</a> or using a <a href="../../external.html?link=https://stardewvalleywiki.com/Geode_Crusher" title="Geode Crusher">geode crusher</a>.
</td></tr>
<tr>
<td><samp>geode_crusher_ignored</samp>
</td>
<td>If the item also has <samp>geode</samp>, prevents breaking it open in a geode crusher.
</td></tr>
<tr>
<td><samp>item_type_<code title="required field &#39;type&#39;">&lt;type&gt;</code></samp>
</td>
<td>For an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Objects" title="Modding:Items">object-type item</a>, the type value from the 'type and category' field. (Non-object items always have the exact tag <samp>item_type_</samp> with nothing after the last underscore.) This is automatic and shouldn't be set manually. The tag is checked in a few places (<i>e.g.</i> the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a> to check if an item is an artifact or mineral), but most of the game won't be affected.
</td></tr>
<tr>
<td><samp>museum_donatable</samp><br /><samp>not_museum_donatable</samp>
</td>
<td>Set whether the item can be donated to the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a>, overriding the vanilla logic.
</td></tr>
<tr>
<td><samp>not_placeable</samp><br /><samp>placeable</samp>
</td>
<td>Sets whether the item can be placed on the ground.
</td></tr>
<tr>
<td><samp>not_plantable_context_<code title="required field &#39;context ID&#39;">&lt;context ID&gt;</code></samp><br /><samp>not_plantable_location_<code title="required field &#39;location name&#39;">&lt;location name&gt;</code></samp><br /><samp>plantable_context_<code title="required field &#39;context ID&#39;">&lt;context ID&gt;</code></samp><br /><samp>plantable_greenhouse</samp><br /><samp>plantable_location_<code title="required field &#39;location name&#39;">&lt;location name&gt;</code></samp>
</td>
<td>See <a href="#Custom_planting_restrictions"><i>custom planting restrictions</i></a>.
</td></tr>
<tr>
<td><samp>paddy_crop</samp>
</td>
<td>Marks the item as a paddy <a href="../../external.html?link=https://stardewvalleywiki.com/Crops" title="Crops">crop</a> like <a href="../../external.html?link=https://stardewvalleywiki.com/Unmilled_Rice" title="Unmilled Rice">rice</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Taro_Root" title="Taro Root">taro</a>. This enables paddy-related logic like needing to be planted near water.
</td></tr>
<tr>
<td><samp>prevent_loss_on_death</samp>
</td>
<td>Indicates the item can't be <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild#Item_Recovery_Service" title="Adventurer&#39;s Guild">lost when the player dies</a>.
</td></tr>
<tr>
<td><samp>sign_item</samp>
</td>
<td>Marks the item as a <a href="../../external.html?link=https://stardewvalleywiki.com/Crafting#Signs" title="Crafting">sign</a>, which lets player display items on it or place it on a <a href="../../external.html?link=https://stardewvalleywiki.com/Fish_Pond" title="Fish Pond">fish pond</a> to show the fish count.
</td></tr>
<tr>
<td><samp>torch_item</samp>
</td>
<td>Marks the item as a <a href="../../external.html?link=https://stardewvalleywiki.com/Torch" title="Torch">torch</a>, which lets the player turn it on/off to emit light.
<p>See also <samp>campfire_item</samp>.
</p>
</td></tr></tbody></table>
<p>Contexts which affect <a href="#Custom_machines">machine processing</a>:
</p>
<table class="wikitable">

<tbody><tr>
<th>context tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>crystalarium_banned</samp>
</td>
<td>When applied to a gem or mineral item, prevents players from placing it in a <a href="../../external.html?link=https://stardewvalleywiki.com/Crystalarium" title="Crystalarium">crystalarium</a>.
</td></tr>
<tr>
<td><samp>keg_juice</samp><br /><samp>keg_wine</samp>
</td>
<td>Allows processing the item in a <a href="../../external.html?link=https://stardewvalleywiki.com/Keg" title="Keg">keg</a> to produce a juice or wine variant.
</td></tr>
<tr>
<td><samp>preserves_jelly</samp><br /><samp>preserves_pickle</samp>
</td>
<td>Allows processing the item in a <a href="../../external.html?link=https://stardewvalleywiki.com/Preserves_Jar" title="Preserves Jar">preserves jar</a> to produce a jelly or pickled variant.
</td></tr>
<tr>
<td><samp>seedmaker_banned</samp>
</td>
<td>When applied to a seed item, prevents players from placing it in a <a href="../../external.html?link=https://stardewvalleywiki.com/Seed_Maker" title="Seed Maker">seed maker</a>.
</td></tr>
<tr>
<td><samp>tapper_item</samp>
</td>
<td>Marks the item as a <a href="../../external.html?link=https://stardewvalleywiki.com/Tapper" title="Tapper">tapper</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Heavy_Tapper" title="Heavy Tapper">heavy tapper</a>.
</td></tr>
<tr>
<td><samp>tapper_multiplier_<code title="required field &#39;multiplier&#39;">&lt;multiplier&gt;</code></samp>
</td>
<td>The multiplier applied to the tapper production speed. For example, <samp>2</samp> will make items take half their base time (<i>i.e.</i> each item will finish in <sup>base time</sup>/<sub>speed multiplier</sub>). Defaults to 1 if omitted.
</td></tr></tbody></table>
<p>And informational tags which are added automatically, and have no effect on the game logic:
</p>
<table class="wikitable">

<tbody><tr>
<th>context tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>id_<code title="required field &#39;item id&#39;">&lt;item id&gt;</code></samp>
</td>
<td>The <a href="#Custom_items">qualified item ID</a>, like <samp>id_(o)128</samp>. This is added automatically and can be used to match or exclude an item by ID using context tags. Any spaces in the ID are replaced with underscores, and single quotes are removed.
</td></tr>
<tr>
<td><samp>is_machine</samp>
</td>
<td>Indicates the item has <a href="#Custom_machines">machine logic</a>. This is added automatically based on <samp>Data/Machines</samp> and is informational only (it has no effect on the game logic).
</td></tr>
<tr>
<td><samp>machine_input</samp><br /><samp>machine_output</samp>
</td>
<td>Whether the item is a machine which accepts items from the player (<samp>machine_input</samp>) and/or which produces items for the player to collect (<samp>machine_output</samp>). If the <a href="#Custom_machines">machine data</a> sets the <samp>ConversionMethod</samp> field, both tags are added since there's no way to know what the method does.
<p>These are added automatically based on <samp>Data/Machines</samp> and have no effect on the game logic. The <samp>is_machine</samp> tag is always added if these are.
</p>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Inventory_class">Inventory class</span></h3>
<p>For C# mods, 1.6 adds a new <samp>Inventory</samp> class to manage a list of items. This is used for the <samp>Farmer.items</samp> and <samp>Chest.items</samp> fields. It implements <samp>IList&lt;Item&gt;</samp>, so most existing code should still work fine.
</p><p>This has three main benefits:
</p>
<ul>
<li>It has methods to simplify many common operations. For example:
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><code>HasAny()</code>
</td>
<td>Get whether the inventory contains any items (ignoring empty slots).
</td></tr>
<tr>
<td><code>CountItemStacks()</code>
</td>
<td>Get the number of item stacks in the inventory (ignoring empty slots).
</td></tr>
<tr>
<td><code>ContainsId(id)</code>
</td>
<td>Get whether the inventory contains any item with the given qualified or unqualified item ID.
</td></tr>
<tr>
<td><code>ContainsId(id, minCount)</code>
</td>
<td>Get whether the inventory contains items with the given qualified or unqualified item ID, and their combined stack size is at least <samp>minCount</samp>.
</td></tr>
<tr>
<td><code>CountId(id)</code>
</td>
<td>Get the combined stack size of all items with the given qualified or unqualified item ID.
</td></tr>
<tr>
<td><code>GetById(id)</code>
</td>
<td>Get a list of items in the inventory with the given qualified or unqualified item ID.
</td></tr>
<tr>
<td><code>ReduceId(id, count)</code>
</td>
<td>Remove the given number of items matching the given qualified or unqualified item ID. This reduces the stack size for matching items until a total of <samp>count</samp> have been removed, and clears any slots which reach a stack size of zero.
</td></tr></tbody></table></li>
<li>Many common operations have been unified, so previously player-only methods can now be used with chests too.</li>
<li>It has an internal index by item ID, so operations like <code>items.ContainsId("(O)128")</code> are much more efficient since they no longer iterate the list.</li>
</ul>
<p>This replaces some previous methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>game class
</th>
<th>old code
</th>
<th>migration
</th></tr>
<tr>
<td rowspan="6"><samp>Farmer</samp>
</td>
<td><code>getItemCount(id)</code><br /><code>GetTallyOfObject(id)</code><br /><code>GetTallyOfObject(id, isBigCraftable)</code>
</td>
<td>Use <code>items.CountId(id)</code>.
</td></tr>
<tr>
<td><code>hasItemInInventory(id, count)</code><br /><code>hasItemInInventoryNamed(name)</code><br /><code>hasItemWithNameThatContains(name)</code>
</td>
<td>Use <code>items.ContainsId(id, count)</code>.
</td></tr>
<tr>
<td><code>hasItemInList(list, id, count)</code>
</td>
<td>Use <code>list.ContainsId(id, count)</code>.
</td></tr>
<tr>
<td><code>areAllItemsNull()</code>
</td>
<td>Use <code>!items.HasAny()</code>.
</td></tr>
<tr>
<td><code>numberOfItemsInInventory()</code>
</td>
<td>Use <code>items.CountItemStacks()</code> to count all items, or <code>Items.Count(p =&gt; p is Object)</code> to match this method's actual behavior.
</td></tr>
<tr>
<td><code>consumeObject(id, count)</code><br /><code>removeItemsFromInventory(id, count)</code>
</td>
<td>Use <code>items.ReduceId(id, count)</code>.
</td></tr>
<tr>
<td rowspan="2"><samp>Object</samp>
</td>
<td><code>ConsumeInventoryItem(player, id, count)</code>
</td>
<td>This was somewhat specialized and shouldn't be called by mod code, but the equivalent would be <code>(obj.autoLoadChest?.items&#160;?? player.items).ReduceId(id, count)</code>.
</td></tr>
<tr>
<td><code>GetTallyOfObject(player, id)</code>
</td>
<td>This was somewhat specialized and shouldn't be called by mod code, but the equivalent would be <code>(obj.autoLoadChest?.items&#160;?? player.items).CountId(id)</code>.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="ItemContextTagManager_class">ItemContextTagManager class</span></h3>
<p>For C# mods, 1.6 adds a new <samp>ItemContextTagManager</samp> class which simplifies working with <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">item context tags</a> and reduces repeated code.
</p><p>This provides a few utility methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><code>GetBaseContextTags(id)</code>
</td>
<td>Get the base context tags for an item from the <samp>Data/ObjectContextTags</samp> asset. This doesn't include dynamic context tags added by the instance, which you can get via <code>item.GetContextTags()</code>.
</td></tr>
<tr>
<td><code>DoesTagQueryMatch(query, tags)</code>
</td>
<td>Get whether a context tag query matches the given tags. For example, <code>ItemContextTagManager.DoesTagQueryMatch("bone_item, !fossil_item", item.GetContextTags())</code> returns true if the item is a bone item but not a fossil (like the <a href="../../external.html?link=https://stardewvalleywiki.com/Bone_Flute" title="Bone Flute">Bone Flute</a>).
</td></tr>
<tr>
<td><code>DoAllTagsMatch(requiredTags, actualTags)</code><br /><code>DoAnyTagsMatch(requiredTags, actualTags)</code>
</td>
<td>Get whether every (<samp>DoAllTagsMatch</samp>) or at least one (<samp>DoAnyTagsMatch&lt;/samp) required tag matches the actual item tags. This supports negated required tags like <samp>"!fossil_item"</samp> too.
</samp></td></tr>
<tr>
<td><code>DoesTagMatch(requiredTag, actualTags)</code>
</td>
<td>Get whether a single tag matches the actual item tags. This supports negated required tags like <samp>"!fossil_item"</samp> too.
</td></tr>
<tr>
<td><code>SanitizeContextTag(tag)</code>
</td>
<td><i>(Specialized)</i> Replace characters that may appear in item names so they're valid in context tags. For example, <code>SanitizeContextTag("Sam's Boombox")</code> returns <samp>sams_boombox</samp>.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Other_item_changes">Other item changes</span></h3>
<ul><li>Added <samp>Game1.cropData</samp> to read crop info without constantly reloading the <samp>Data/Crops</samp> asset.</li>
<li>Added per-object display names (<i>e.g.</i> for custom flavored items). See the <samp>ObjectDisplayName</samp> <a href="#Item_spawn_fields">item spawn field</a>, or <samp>object.displayNameFormat</samp> in C#.</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island#Gem_Birds" title="Ginger Island">Item pedestals</a> are now normal item, so you can spawn them using a mod like CJB Item Spawner to display items.</li>
<li>Added optional <samp>Condition</samp> <a href="#Game_state_queries">game state query</a> field to <samp>Data/SpecialOrders</samp>.</li>
<li>Every object placed in the world now has a <samp>CurrentLocation</samp> property set to the location which contains it.</li>
<li>Item data changes:
<ul><li>The display name field now exists in English too for <samp>Data/Boots</samp>, <samp>Data/Bundles</samp>, <samp>Data/CookingRecipes</samp>, <samp>Data/CraftingRecipes</samp>, <samp>Data/Fish</samp>, and <samp>Data/Furniture</samp>.</li>
<li>The randomly spawned <a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm#Stone" title="The Farm">stones</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm#Wood" title="The Farm">twigs</a>, and <a href="../../external.html?link=https://stardewvalleywiki.com/Weeds" title="Weeds">weeds</a> have been formalized into <i>litter</i>. They all now have object type <samp>Litter</samp>, <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Categories" title="Modding:Items">category</a> -999 (<samp>Game1.litterCategory</samp>), a relevant display name/description (like <i>Gold Stone/Break apart to obtain gold ore</i> instead of <i>Stone/...</i>), a price of 0 (not sellable), and edibility of -300 (inedible). In C# code, you can use the new item methods like <samp>item.IsWeeds()</samp> to detect them. This also adds all mine ore nodes to <samp>Data/ObjectInformation</samp>, so the game no longer creates invalid items to show their sprite. (Doing so in 1.6 will now show an Error Item sprite instead.)</li>
<li>For C# mods, <a href="../../external.html?link=https://stardewvalleywiki.com/Honey" title="Honey">honey</a> items now have their <samp>preserve</samp> field set to <samp>Honey</samp> (instead of null) and now have the <samp>honey_item</samp> context tag.</li></ul></li>
<li>Crop changes:
<ul><li>Paddy crops now recheck for nearby water each day, so they'll update if you add/remove a building with water or change the map layout.</li>
<li>In <samp>Data/Crops</samp>, each harvest option is now self-contained. For example, you can set <samp>HarvestMinStack</samp> without <samp>ExtraHarvestChance</samp>.</li>
<li>Removed most crop fields which only mirror the data (like <samp>harvestMethod</samp> or <samp>seasonsToGrowIn</samp>). Mods can get the info through <samp>crop.GetData()</samp> instead.</li>
<li>Partly de-hardcoded fertilizer logic. Almost all fertilizer logic is now centralized into a new patchable set of <samp>HoeDirt</samp> methods (see list below). The only fertilizer logic that's still embedded elsewhere is the interaction errors in <samp>Utility.tryToPlaceItem</samp>.</li></ul></li></ul>
<ul>
<li>Other item logic: <ul>
<li><samp>Data/Bundles</samp> is now loaded later, so content packs can edit it reliably.</li>
<li>The <samp>Object.performObjectDropInAction</samp> method now applies the <samp>probe</samp> argument much more consistently. This only affects method calls with <samp>probe: true</samp>.</li>
<li>The <samp>obj.IsScarecrow()</samp> and <samp>GetScarecrowRadius()</samp> methods now work for non-bigcraftable objects too.</li>
<li>Setting an object's tile position through <samp>obj.TileLocation</samp> now recalculcates its collision box automatically. (Setting it through the <samp>tileLocation</samp> net field directly won't though.)</li>
<li>Added new fields &amp; methods for C# mods:

<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>field/method
</th>
<th>effect
</th></tr>
<tr>
<td rowspan="2"><samp>Crop</samp>
</td>
<td><samp>GetHarvestMethod()</samp>
</td>
<td>Get the method used to harvest the crop (one of <samp>HarvestMethod.Grab</samp> or <samp>HarvestMethod.Scythe</samp>).
</td></tr>
<tr>
<td><samp>IsInSeason(location)</samp>
</td>
<td>Whether the crop can grow in the location's current season (or true if crops ignore seasons in the location, like the <a href="../../external.html?link=https://stardewvalleywiki.com/Greenhouse" title="Greenhouse">greenhouse</a>).
</td></tr>
<tr>
<td rowspan="7"><samp>HoeDirt</samp>
</td>
<td><samp>HasFertilizer()</samp>
</td>
<td>Get whether the dirt has any fertilizer applied.
</td></tr>
<tr>
<td><samp>CanApplyFertilizer(itemId)</samp>
</td>
<td>Get whether a player can apply the given fertilizer to this dirt.
</td></tr>
<tr>
<td><samp>CheckApplyFertilizerRules(itemId)</samp>
</td>
<td>Get whether a player can apply the given fertilizer to this dirt, and the reason they can't if applicable.
</td></tr>
<tr>
<td><samp>GetFertilizerSpeedBoost()</samp>
</td>
<td>Get the crop growth speed boost from fertilizers applied to this dirt.
</td></tr>
<tr>
<td><samp>GetFertilizerWaterRetentionChance()</samp>
</td>
<td>Get the water retention chance from fertilizers applied to this dirt, as a value between 0 (no change) and 1 (100% chance of staying watered).
</td></tr>
<tr>
<td><samp>GetFertilizerQualityBoostLevel()</samp>
</td>
<td>Get the quality boost level from fertilizers applied to this dirt, which influences the chance of producing a higher-quality crop.
</td></tr>
<tr>
<td><samp>GetFertilizerSourceRect()</samp>
</td>
<td>Get the pixel area within the dirt spritesheet to draw for any fertilizer applied to this dirt.
<p>(This method existed before, but no longer requires the fertilizer ID argument.)
</p>
</td></tr>
<tr>
<td rowspan="3"><samp>Item</samp>
</td>
<td><samp>IsRecipe</samp><br /><samp>Quality</samp><br /><samp>Stack</samp><br /><samp>sellToStorePrice(…)</samp>
</td>
<td>Equivalent to the previous <samp>Object</samp> fields/methods, to simplify common code and avoid needing to special-case <samp>Object</samp> items.
</td></tr>
<tr>
<td><samp>CanBeLostOnDeath()</samp>
</td>
<td>Get whether this item can be lost when the player dies, so it can be recovered from the <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild#Item_Recovery_Service" title="Adventurer&#39;s Guild">item recovery service</a>.
</td></tr>
<tr>
<td><samp>HasTypeId(id)</samp><br /><samp>HasTypeObject()</samp><br /><samp>HasTypeBigCraftable()</samp>
</td>
<td>Get whether the item has the given <a href="#Custom_items">type definition ID</a>. These are null-safe and double as a null check:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">HasTypeId</span><span class="p">(</span><span class="n">ItemRegistry</span><span class="p">.</span><span class="n">type_object</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// item is non-null and has type (O)</span>
<span class="p">}</span>
</pre></div>
<p><samp>HasTypeObject()</samp> and <samp>HasTypeBigCraftable()</samp> are shortcuts for passing <samp>ItemRegistry.type_object</samp> and <samp>ItemRegistry.type_bigCraftable</samp> respectively.
</p>
</td></tr>
<tr>
<td><samp>FishingRod</samp>
</td>
<td><samp>CanUseBait()</samp><br /><samp>CanUseTackle()</samp><br /><samp>GetBait()</samp><br /><samp>GetTackle()</samp><br /><samp>HasMagicBait()</samp><br /><samp>HasCuriosityLure()</samp>
</td>
<td>Simplifies working with the fishing rod's <a href="../../external.html?link=https://stardewvalleywiki.com/Bait" title="Bait">bait</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Tackle" title="Tackle">tackle</a>.
</td></tr>
<tr>
<td rowspan="2"><samp>FruitTree</samp>
</td>
<td><samp>GetQuality()</samp>
</td>
<td>Get the quality of fruit currently being produced by the fruit tree.
</td></tr>
<tr>
<td><samp>TryAddFruit()</samp>
</td>
<td>Add a fruit item to the tree based on <a href="#Custom_fruit_trees">its data</a>.
</td></tr>
<tr>
<td><samp>IndoorPot</samp>
</td>
<td><samp>Water()</samp>
</td>
<td>Simplifies watering dirt in the <a href="../../external.html?link=https://stardewvalleywiki.com/Garden_Pot" title="Garden Pot">garden pot</a>.
</td></tr>
<tr>
<td><samp>Object</samp>
</td>
<td><samp>GetBoundingBox()</samp><br /><samp>GetBoundingBoxAt(x, y)</samp>
</td>
<td>Get the pixel collision area for the item placed in the world. These replace the former <samp>getBoundingBox(position)</samp> method.
</td></tr>
<tr>
<td><samp>Tool</samp>
</td>
<td><samp>isScythe()</samp>
</td>
<td>Equivalent to the previous <samp>MeleeWeapon</samp> method, to simplify common code and avoid needing to special-case <samp>MeleeWeapon</samp> items.
</td></tr>
<tr>
<td><samp>Tree</samp>
</td>
<td><samp>CheckForNewTexture()</samp>
</td>
<td>Reset the tree's texture if it would change based on <a href="#Custom_wild_trees">its data</a>.
</td></tr></tbody></table>
</li>
<li>Fixed furniture drawn over sitting players if it has no front texture.</li>
<li>Removed <samp>crop.InferSeedIndex()</samp>. This was used to support old crops, which are now fixed by a save migration instead.</li>
<li>Modularized <samp>Object.CheckForAction</samp> to simplify mod patches.</li>
</ul>
</li>
</ul>
<h2><span id="What's_new_for_locations_&amp;_weather"></span><span class="mw-headline" id="What.27s_new_for_locations_.26_weather">What's new for locations &amp; weather</span></h2>
<h3><span class="mw-headline" id="Custom_locations">Custom locations</span></h3>
<p>You can now add/edit locations by editing the revamped <samp>Data/Locations</samp> asset.
</p><p>The asset consists of a model with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr valign="top">
<td><samp>CreateLocations</samp>
</td>
<td>The location instances to create when the save is loaded.
<p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a unique identifier for this location, which will be used as the location's <samp>Name</samp> (not <samp>DisplayName</samp>) field. The ID should only contain alphanumeric/underscore/dot characters. For custom locations, this should be prefixed with your mod ID like <samp>Example.ModId_LocationName</samp>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>MapPath</samp>
</td>
<td>The asset name for the map to use for this location.
</td></tr>
<tr>
<td><samp>AlwaysActive</samp>
</td>
<td><i>(Optional)</i> Whether this location is always synchronized to farmhands in multiplayer, even if they're not in the location. Any location which allows building cabins <b>must</b> have this enabled to avoid breaking game logic.
</td></tr>
<tr>
<td><samp>Type</samp>
</td>
<td><i>(Optional)</i> The full name of the C# location class to create. This must be one of the vanilla types to avoid a crash when saving. There are too many to list here, but the most useful types are likely <samp>StardewValley.GameLocation</samp> (default value) and <samp>StardewValley.Locations.DecoratableLocation</samp>.
</td></tr></tbody></table>
</td></tr>
<tr valign="top">
<td><samp>DefaultArtifactSpots</samp>
</td>
<td>The items that can be found when digging artifact spots in any location. See <samp>ArtifactSpots</samp> under <samp>Locations</samp> for info.
</td></tr>
<tr valign="top">
<td><samp>DefaultFish</samp>
</td>
<td>The items that can be found by fishing in any location. See <samp>Fish</samp> under <samp>Locations</samp> for info.
</td></tr>
<tr valign="top">
<td><samp>Locations</samp>
</td>
<td>The gameplay data for locations in the game (regardless of whether they were created using the <samp>CreateLocations</samp> field or some other way).
<p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is the internal name of the location to change. (The farm will use <samp>Farm_<code title="required field &#39;type key&#39;">&lt;type key&gt;</code></samp> for a vanilla farm type, or <samp>Farm_<code title="required field &#39;type ID&#39;">&lt;type ID&gt;</code></samp> for a custom farm type, or <samp>Farm_Standard</samp> if no type-specific entry was found.)</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td><i>(Optional but strongly recommended)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for the translated location name. This is used anytime the location name is shown in-game for base game logic or mods.
</td></tr>
<tr>
<td><samp>DefaultArrivalTile</samp>
</td>
<td><i>(Optional but strongly recommended)</i> The default tile position where the player should be placed when they arrive in the location, if arriving from a warp that didn't specify a tile position. Default none, which usually places the player at (0, 0).
</td></tr>
<tr>
<td><samp>ExcludeFromNpcPathfinding</samp>
</td>
<td><i>(Optional)</i> Whether NPCs should ignore this location when pathfinding between locations. Default false.
</td></tr>
<tr>
<td><samp>ArtifactSpots</samp>
</td>
<td><i>(Optional)</i> The items that can be found when digging <a href="../../external.html?link=https://stardewvalleywiki.com/Artifact_Spot" title="Artifact Spot">artifact spots</a> in this location.
<p>The game combines this with <samp>DefaultArtifactSpots</samp>, then applies them in the order set by their <samp>Precedence</samp> field. (Artifact spot drops can also be listed in <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Objects" title="Modding:Items"><samp>Data/ObjectInformation</samp></a>'s 'miscellaneous' field; those are applied by the <samp>RANDOM_ARTIFACT_FOR_DIG_SPOT</samp> entry in <samp>DefaultArtifactSpots</samp>.)
</p><p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported by artifact spot drops.
<p>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that the item will be dropped if the other fields match, as a decimal value between 0 (never) and 1 (always). Default 1.
</td></tr>
<tr>
<td><samp>ApplyGenerousEnchantment</samp>
</td>
<td><i>(Optional)</i> Whether to apply the 'Generous' <a href="../../external.html?link=https://stardewvalleywiki.com/Forge#Enchantments" title="Forge">enchantment</a>, which adds a 50% chance of the item dropping twice. If the enchantment is applied, the item's fields are rerolled for the second drop (e.g. a new random value between <samp>MinStack</samp> and <samp>MaxStack</samp> is selected). Default true.
</td></tr>
<tr>
<td><samp>OneDebrisPerDrop</samp>
</td>
<td><i>(Optional)</i> Whether to split the dropped item stack into multiple floating debris that each have a stack size of one. For example, if the dropped item has a stack size of 3, this will spawn three separate item stacks. Default true.
</td></tr>
<tr>
<td><samp>ContinueOnDrop</samp>
</td>
<td><i>(Optional)</i> Whether to continue checking for more items to drop when this item is dropped. Default false.
</td></tr>
<tr>
<td><samp>Precedence</samp>
</td>
<td><i>(Optional)</i> The order in which this entry should be checked, where lower values are checked first. This can be a negative value. Forage with the same precedence are checked in the order listed. Default 0.
<p>For consistency, vanilla artifact drops mostly use these values:
</p>
<ul><li><samp>-1000</samp>: location items which should override the global priority items (e.g. fossils on Ginger Island);</li>
<li><samp>-100</samp>: global priority items (e.g. Qi Beans);</li>
<li><samp>0</samp>: normal items;</li>
<li><samp>100</samp>: global fallback items (e.g. clay).</li></ul>
</td></tr></tbody></table>
<p>For example, a location with this field will drop 2-4 pufferfish with a 50% chance on summer days:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;ArtifactSpots&quot;</span><span class="o">:</span> <span class="p">[</span>
     <span class="p">{</span>
          <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;LOCATION_SEASON Here summer&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(O)128&quot;</span><span class="p">,</span>
          <span class="s2">&quot;MinStack&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="s2">&quot;MaxStack&quot;</span><span class="o">:</span> <span class="mi">4</span>
     <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</td></tr>
<tr>
<td><samp>FishAreas</samp>
</td>
<td><i>(Optional)</i> The distinct <a href="../../external.html?link=https://stardewvalleywiki.com/Fishing" title="Fishing">fishing</a> areas within the location. These can be referenced by fish via <samp>FishAreaId</samp>, and determine which fish are collected by <a href="../../external.html?link=https://stardewvalleywiki.com/Crab_Pot" title="Crab Pot">crab pots</a>.
<p>This consists of a string → model lookup, where the key is the fish area ID and the value consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Position</samp>
</td>
<td><i>(Optional)</i> The tile position and size covered by this fishing area, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. This area will apply for crab pots placed within it, or when the fishing rod bobber lands within it. Default null (anywhere).
<p>Areas with a <samp>Position</samp> value have priority over those without.
</p>
</td></tr>
<tr>
<td><samp>CrabPotFishTypes</samp>
</td>
<td><i>(Optional)</i> A list of fish types that can be caught by crab pots within the area. This is matched against field index 4 in <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fish_data" title="Modding:Fish data"><samp>Data/Fish</samp></a> for 'trap' (i.e. crab pot) fish. The vanilla types are <samp>freshwater</samp> and <samp>ocean</samp>. If omitted, defaults to <samp>freshwater</samp>.
</td></tr>
<tr>
<td><samp>CrabPotJunkChance</samp>
</td>
<td><i>(Optional)</i> The chance that crab pots within the area will find junk instead of a fish each time they produce a harvest. This is ignored if the player has the <a href="../../external.html?link=https://stardewvalleywiki.com/Fishing#Fishing_Skill" title="Fishing">Mariner</a> profession. Default <samp>0.2</samp> (20%).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Fish</samp>
</td>
<td><i>(Optional)</i> The fish that can be caught in the location.
<p>Notes:
</p>
<ul><li>Unlike other item spawn lists, the game doesn't check fish in the order listed. Instead it first sorts them by their <samp>Priority</samp> field, and then randomly shuffles fish with the same priority.</li>
<li>The produced item ID is saved to recreate the fish later. Any item info that's not based on the item ID is ignored (like stack size, quality, flavored variants like Blueberry Wine vs Wine, and the is-recipe flag).</li></ul>
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported by forage items.
<p>This must return an <samp>Object</samp> item (or subclass of <samp>Object</samp>). If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that the fish will spawn if selected, as a decimal value between 0 (never) and 1 (always). Default 1.
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td><i>(Optional)</i> If set, the specific season when the fish can be caught. This is much more efficient than using <samp>Condition</samp>, but only supports a single season. Defaults to <samp>null</samp> (all seasons).
</td></tr>
<tr>
<td><samp>FishAreaId</samp>
</td>
<td><i>(Optional)</i> If set, the fish area in which the fish can be caught (as an area ID defined under <samp>FishAreas</samp>). Defaults to <samp>null</samp> (all zones).
</td></tr>
<tr>
<td><samp>BobberPosition</samp>
</td>
<td><i>(Optional)</i> If set, the tile area within the location where the fishing rod's bobber must land to catch the fish. Default <samp>null</samp> (anywhere).
</td></tr>
<tr>
<td><samp>PlayerPosition</samp>
</td>
<td><i>(Optional)</i> If set, the tile area within the location where the player must be standing to catch the fish. Default <samp>null</samp> (anywhere).
</td></tr>
<tr>
<td><samp>MinFishingLevel</samp>
</td>
<td><i>(Optional)</i> The minimum fishing level needed for the fish to appear. Default 0.
</td></tr>
<tr>
<td><samp>ApplyDailyLuck</samp>
</td>
<td><i>(Optional)</i> Whether to add the player's <a href="../../external.html?link=https://stardewvalleywiki.com/Luck" title="Luck">daily luck</a> to the spawn chance. This affects both the <samp>Chance</samp> field and the <samp>Data\Fish</samp> chance, if applicable. Default false.
</td></tr>
<tr>
<td><samp>CuriosityLureBuff</samp>
</td>
<td><i>(Optional)</i> The value to add to the spawn chance when the player has the <a href="../../external.html?link=https://stardewvalleywiki.com/Curiosity_Lure" title="Curiosity Lure">Curiosity Lure</a> equipped, if set to 0 or higher. This affects both the <samp>Chance</samp> field and the <samp>Data\Fish</samp> chance, if applicable. Default -1, which keeps the default behavior (i.e. no effect on the <samp>Chance</samp> field and a scaled boost to the <samp>Data\Fish</samp> chance).
</td></tr>
<tr>
<td><samp>CatchLimit</samp>
</td>
<td><i>(Optional)</i> The maximum number of this fish which can be caught by each player. This limit is permanent (i.e. once it's reached, that fish will never appear again). For example, legendary fish set this to one. Default -1 (no limit).
</td></tr>
<tr>
<td><samp>RequireMagicBait</samp>
</td>
<td><i>(Optional)</i> Whether the player must fish with Magic Bait for this fish to spawn. Default false.
</td></tr>
<tr>
<td><samp>MinDistanceFromShore</samp>
</td>
<td><i>(Optional)</i> The minimum distance from the nearest shore (measured in tiles) at which the fish can be caught, where zero is water directly adjacent to shore.
</td></tr>
<tr>
<td><samp>MaxDistanceFromShore</samp>
</td>
<td><i>(Optional)</i> The maximum distance from the nearest shore (measured in tiles) at which the fish can be caught, where zero is water directly adjacent to shore. Default -1 (no limit).
</td></tr>
<tr>
<td><samp>Precedence</samp>
</td>
<td><i>(Optional)</i> The order in which this entry should be checked, where lower values are checked first. This can be a negative value. Fish with the same precedence are shuffled randomly. Default 0.
<p>For consistency, vanilla fish mostly use values in these ranges:
</p>
<ul><li><samp>-1100</samp> to <samp>-1000</samp>: global priority items (e.g. Qi Beans);</li>
<li><samp>-200</samp> to <samp>-100</samp>: unique location items (e.g. legendary fish or secret items);</li>
<li><samp>-50</samp> to <samp>-1</samp>: normal high-priority items;</li>
<li><samp>0</samp>: normal items;</li>
<li><samp>1</samp> to <samp>100</samp>: normal low-priority items;</li>
<li><samp>1000+</samp>: global fallback items (e.g. trash).</li></ul>
</td></tr>
<tr>
<td><samp>IgnoreFishDataRequirements</samp>
</td>
<td><i>(Optional)</i> Whether to ignore spawn requirements listed in <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fish_data" title="Modding:Fish data"><samp>Data/Fish</samp></a>, if applicable.
<p>The <samp>Data/Fish</samp> requirements are ignored regardless of this field for non-object (<samp>(O)</samp>)-type items, or objects whose ID isn't listed in <samp>Data/Fish</samp>.
</p>
</td></tr>
<tr>
<td><samp>SetFlagOnCatch</samp>
</td>
<td><i>(Optional)</i> The mail flag to set for the current player when this fish is successfully caught. Default none.
</td></tr>
<tr>
<td><samp>ChanceModifiers</samp>
</td>
<td><i>(Optional)</i> <a href="#Quantity_modifiers">Quantity modifiers</a> applied to the <samp>Chance</samp> value. Default none.
</td></tr>
<tr>
<td><samp>ChanceModifierMode</samp>
</td>
<td><i>(Optional)</i> <a href="#Quantity_modifiers">quantity modifier modes</a> which indicate what to do if multiple modifiers in the <samp>ChanceModifiers</samp> field apply at the same time. Default <samp>Stack</samp>.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Forage</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Forage" class="mw-redirect" title="Forage">forage</a> that can spawn in the location.
<p>Notes:
</p>
<ul><li>Unlike other item spawn lists, these entries aren't checked sequentially. Instead, the game...
<ol><li>adds every forage entry whose <samp>Condition</samp> and <samp>Season</samp> match to a spawn pool;</li>
<li>chooses a random number of spawn <i>opportunities</i> (between 1 and 4);</li>
<li>for each spawn opportunity, chooses a random tile position and forage to spawn. If the spawn fails (e.g. the tile is water/occupied or the forage's <samp>Chance</samp> doesn't pass), the game will make nine other attempts with a re-randomized tile &amp; forage before skipping this spawn opportunity.</li></ol></li>
<li>The stack size is ignored.</li></ul>
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported by forage items.
<p>This must return an <samp>Object</samp> (<samp>(O)</samp>)-type item. If it uses an <a href="#Item_queries">item query</a> that returns multiple items, one will be selected at random. If it returns null or a non-<samp>Object</samp> item, the spawn attempt will be skipped (with a logged warning if the item type is invalid).
</p>
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that the item will spawn if selected, as a decimal value between 0 (never) and 1 (always). Default 1.
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td><i>(Optional)</i> The specific season when the forage should apply. This is more efficient than using <samp>Condition</samp>, but only supports a single season. Defaults to <samp>null</samp> (all seasons).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Custom_location_contexts">Custom location contexts</span></h3>
<h4><span class="mw-headline" id="Vanilla_contexts">Vanilla contexts</span></h4>
<ul><li>The game previously had two hardcoded location context enums: <samp>Default</samp> (for the valley) and <samp>Island</samp> (for <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a>). These have been replaced with data models which define the location context settings, loaded from the <samp>Data/LocationContexts</samp> asset.</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/The_Desert" title="The Desert">The desert</a> is now part of a new <samp>Desert</samp> context (instead of <samp>Default</samp>). Some of the previously hardcoded desert logic (like always sunny weather) is now just part of the context data in <samp>Data/LocationContexts</samp>.</li></ul>
<h4><span class="mw-headline" id="Format_2">Format</span></h4>
<p>Custom contexts can be created by editing the new <samp>Data/LocationContexts</samp> asset, and setting the context name in the location's <samp>LocationContext</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map property</a>.
</p><p>The data asset consists of a string → model lookup, where the key matches the <samp>Name</samp> field and the value is a model with these fields:
</p>
<dl style="margin-left: 2em;">
<dt>Required fields:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Name</samp>
</td>
<td>The unique ID for the location context. This should only contain alphanumeric/underscore/dot characters. For custom contexts, this should be prefixed with your mod ID like <samp>Example.ModId_ContextName</samp>.
</td></tr></tbody></table>
</dd>

<dt>Player actions:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DefaultValidPlantableLocations</samp>
</td>
<td><i>(Optional)</i> The internal names of the locations where crops can be planted and grown by default (see also <a href="#Custom_planting_restrictions">custom planting restrictions</a>).
</td></tr>
<tr>
<td><samp>AllowRainTotem</samp>
</td>
<td><i>(Optional)</i> Whether a <a href="../../external.html?link=https://stardewvalleywiki.com/Rain_Totem" title="Rain Totem">Rain Totem</a> can be used to force rain in this context tomorrow.
</td></tr>
<tr>
<td><samp>MaxPassOutCost</samp>
</td>
<td><i>(Optional)</i> When the player passes out (due to <a href="../../external.html?link=https://stardewvalleywiki.com/Energy" title="Energy">exhaustion</a> or at 2am) in this context, the maximum amount of <a href="../../external.html?link=https://stardewvalleywiki.com/Gold" title="Gold">gold</a> lost. If omitted or set to <samp>-1</samp>, uses the same value as the <samp>Default</samp> context (<span style="display: none;">data-sort-value="1000"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, /mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />1,000g</span> by default).
</td></tr>
<tr>
<td><samp>PassOutMail</samp>
</td>
<td><i>(Optional)</i> When the player passes out (due to <a href="../../external.html?link=https://stardewvalleywiki.com/Energy" title="Energy">exhaustion</a> or at 2am) in this context, the possible <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">letter IDs</a> to add to their mailbox (if they haven't received it before). If multiple letters are valid, one will be chosen randomly (unless one specifies <samp>SkipRandomSelection</samp>).
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Mail</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">letter ID</a> to add.
<p>The game will look for an existing letter ID in <samp>Data/mail</samp> in this order (where <code title="required field &#39;billed&#39;">&lt;billed&gt;</code> is <samp>Billed</samp> if they lost <a href="../../external.html?link=https://stardewvalleywiki.com/Gold" title="Gold">gold</a> or <samp>NotBilled</samp> otherwise, and <code title="required field &#39;gender&#39;">&lt;gender&gt;</code> is <samp>Female</samp> or <samp>Male</samp>):
</p>
<ul><li><samp><code title="required field &#39;letter id&#39;">&lt;letter id&gt;</code>_<code title="required field &#39;billed&#39;">&lt;billed&gt;</code>_<code title="required field &#39;gender&#39;">&lt;gender&gt;</code></samp></li>
<li><samp><code title="required field &#39;letter id&#39;">&lt;letter id&gt;</code>_<code title="required field &#39;billed&#39;">&lt;billed&gt;</code></samp></li>
<li><samp><code title="required field &#39;letter id&#39;">&lt;letter id&gt;</code></samp></li></ul>
<p>If no match is found in <samp>Data/mail</samp>, the game will send <samp>passedOut2</samp> instead.
</p><p>If the mail ID starts with <samp>passedOut</samp>, <samp>{0}</samp> in the letter text will be replaced with the gold amount lost, and it won't appear in the <a href="../../external.html?link=https://stardewvalleywiki.com/Collections" title="Collections">collections</a> page.
</p>
</td></tr>
<tr>
<td><samp>MaxPassOutCost</samp>
</td>
<td><i>(Optional)</i> The maximum amount of <a href="../../external.html?link=https://stardewvalleywiki.com/Gold" title="Gold">gold</a> lost. This is applied after the context's <samp>MaxPassOutCost</samp> (i.e. the context's value is used to calculate the random amount, then this field caps the result). Defaults to unlimited.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this entry is active. Defaults to always true.
</td></tr>
<tr>
<td><samp>SkipRandomSelection</samp>
</td>
<td><i>(Optional)</i> If true, send this mail if the <samp>Condition</samp> matches instead of choosing a random valid mail. Default false.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>PassOutLocations</samp>
</td>
<td><i>(Optional)</i> When the player passes out (due to <a href="../../external.html?link=https://stardewvalleywiki.com/Energy" title="Energy">exhaustion</a> or at 2am) in this context <i>and</i> they started the day in a different location context, the locations where they'll wake up. (If the player started the day in the same context, they'll wake up in the last bed they slept in instead.)
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Location</samp>
</td>
<td>The internal location name.
</td></tr>
<tr>
<td><samp>Position</samp>
</td>
<td>The <i>default</i> tile position within the location, specified as an object with <samp>X</samp> and <samp>Y</samp> fields. If the location has any bed furniture, they'll be placed in the first bed found instead.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this entry is active. Defaults to always applied.
</td></tr></tbody></table>
<p>If no locations are specified or none match, the player will wake up in their bed at home.
</p>
</td></tr>
<tr>
<td><samp>ReviveLocations</samp>
</td>
<td><i>(Optional)</i> If the player just got knocked out in combat, the location names where they'll wake up.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Location</samp>
</td>
<td>The internal location name.
</td></tr>
<tr>
<td><samp>Position</samp>
</td>
<td>The tile position within the location, specified as an object with <samp>X</samp> and <samp>Y</samp> fields.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this entry is active. Defaults to always applied.
</td></tr></tbody></table>
<p>If the selected location has a standard <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event</a> with the exact key <samp>PlayerKilled</samp> (with no <samp>/</samp> or preconditions in the key), that event will play when the player wakes up and the game will apply the lost items or <a href="../../external.html?link=https://stardewvalleywiki.com/Gold" title="Gold">gold</a> logic. The game won't track this event, so it'll repeat each time the player is revived. If there's no such event, the player will wake up without an event, and no items or gold will be lost.
</p><p>If no locations are specified or none match, the player will wake up at <a href="../../external.html?link=https://stardewvalleywiki.com/Harvey%27s_Clinic" title="Harvey&#39;s Clinic">Harvey's clinic</a>.
</p>
</td></tr></tbody></table>
</dd>

<dt>Season:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>SeasonOverride</samp>
</td>
<td><i>(Optional)</i> The season which is always active for locations within this context (one of <samp>spring</samp>, <samp>summer</samp>, <samp>fall</samp>, or <samp>winter</samp>). For example, setting <samp>summer</samp> will make it always <a href="../../external.html?link=https://stardewvalleywiki.com/Summer" title="Summer">summer</a> there regardless of the calendar season. If not set, the calendar season applies.
</td></tr></tbody></table>
</dd>

<dt>Weather:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>WeatherConditions</samp>
</td>
<td><i>(Optional)</i> The weather logic to apply for locations in this context (ignored if <samp>CopyWeatherFromLocation</samp> is set). Defaults to always sunny. If multiple are specified, the first matching weather is applied.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Weather</samp>
</td>
<td>The <a href="#Custom_weather">weather ID</a> to set.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether to apply the weather. Defaults to always applied.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>CopyWeatherFromLocation</samp>
</td>
<td><i>(Optional)</i> The <samp>Name</samp> (i.e. unique ID) of the location context from which to inherit weather.
</td></tr></tbody></table>
<p>If a <a href="#Custom_passive_festivals">passive festival</a> is active in any location within this context, the weather is sunny for the entire context regardless of these fields.
</p>
</dd>

<dt>Music:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DefaultMusic</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">cue ID</a> for the music to play when the player is in the location, unless overridden by a <samp>Music</samp> map property. Despite the name, this has a higher priority than the seasonal music fields below. Ignored if omitted.
</td></tr>
<tr>
<td><samp>DefaultMusicCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which returns whether the <samp>DefaultMusic</samp> field should be applied (if more specific music isn't playing). Defaults to always true.
</td></tr>
<tr>
<td><samp>DefaultMusicDelayOneScreen</samp>
</td>
<td><i>(Optional)</i> When the player warps and the music changes, whether to silence the music and play the ambience (if any) until the next warp (similar to the default valley locations). Default false.
</td></tr>
<tr>
<td><samp>SpringMusic</samp><br /><samp>SummerMusic</samp><br /><samp>FallMusic</samp><br /><samp>WinterMusic</samp>
</td>
<td><i>(Optional)</i> A list of <a href="#Custom_audio">cue IDs</a> to play before noon in this location unless it's raining, there's a <samp>Music</samp> map property, or the context has a <samp>DefaultMusic</samp> value. If multiple values are specified, the game will play one per day in sequence.
</td></tr>
<tr>
<td><samp>DayAmbience</samp><br /><samp>NightAmbience</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">cue ID</a> for the background ambience to play when there's no music active, depending on the <a href="../../external.html?link=https://stardewvalleywiki.com/Day_Cycle" title="Day Cycle">time of day</a>. Both default to none.
</td></tr>
<tr>
<td><samp>PlayRandomAmbientSounds</samp>
</td>
<td><i>(Optional)</i> Whether to play random outdoor ambience sounds depending on factors like the season and time of day (e.g. birds, crickets, and mysterious groan sounds in the rain). This is unrelated to the <samp>DayAmbience</samp> and <samp>NightAmbience</samp> fields. Default true.
</td></tr></tbody></table>
</dd>

<dt>Advanced:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
</dd>
</dl>
<h3><span class="mw-headline" id="Custom_garbage_cans">Custom garbage cans</span></h3>
<h4><span class="mw-headline" id="Format_3">Format</span></h4>
<p>You can now add or edit <a href="../../external.html?link=https://stardewvalleywiki.com/Garbage_Can" title="Garbage Can">garbage cans</a> on any map by editing the new <samp>Data/GarbageCans</samp> asset (see examples below).
</p><p>The asset consists of a data model with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DefaultBaseChance</samp>
</td>
<td>The probability that an item will be found when searching garbage cans, as a value between 0 (never) and 1 (always). If the probability check fails, only items that set <samp>IgnoreBaseChance</samp> can spawn. This can be overridden by the per-garbage-can <samp>BaseChance</samp> field. Default 0.2.
</td></tr>
<tr>
<td><samp>BeforeAll</samp><br /><samp>AfterAll</samp>
</td>
<td>The items to prepend (<samp>BeforeAll</samp>) or append (<samp>AfterAll</samp>) to the <samp>GarbageCans</samp> → <samp>Items</samp> field for all garbage cans. These work exactly like the items in that field (e.g. subject to the garbage can's base chance).
</td></tr>
<tr>
<td><samp>GarbageCans</samp>
</td>
<td>The data for individual garbage cans. This consists of a string → model lookup with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>entry key</i>
</td>
<td>A key which uniquely identifies this garbage can. The key should only contain alphanumeric/underscore/dot characters. For custom garbage cans, this should be prefixed with your mod ID like <samp>Example.ModId_GarbageCanId</samp>.
</td></tr>
<tr>
<td><samp>BaseChance</samp>
</td>
<td><i>(Optional)</i> If set, overrides the root <samp>DefaultBaseChance</samp> field for this garbage can. Defaults to <samp>DefaultBaseChance</samp>.
</td></tr>
<tr>
<td><samp>Items</samp>
</td>
<td><i>(Optional)</i> The items to try spawning when the player searches the garbage can. The first matching item in <samp>BeforeAll</samp> + <samp>Items</samp> + <samp>AfterAll</samp> will be spawned, and any further items will be ignored. Defaults to none.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported by garbage cans.
<p>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>IgnoreBaseChance</samp>
</td>
<td><i>(Optional)</i> Whether this item can spawn even if the <samp>BaseChance</samp> probability check didn't pass. Default false.
</td></tr>
<tr>
<td><samp>IsMegaSuccess</samp>
</td>
<td><i>(Optional)</i> Whether to treat this item as a 'mega success' if it's selected, which plays a special <samp>crit</samp> sound and bigger animation. Default false.
</td></tr>
<tr>
<td><samp>IsDoubleMegaSuccess</samp>
</td>
<td><i>(Optional)</i> Whether to treat this item as an 'double mega success' if it's selected, which plays an explosion sound and dramatic animation. Default false.
</td></tr>
<tr>
<td><samp>AddToInventoryDirectly</samp>
</td>
<td><i>(Optional)</i> Whether to add the item to the player's inventory directly, opening an item grab menu if they don't have room in their inventory. If false, the item will be dropped on the ground next to the garbage can instead. Default false.
</td></tr>
<tr>
<td><samp>CreateMultipleDebris</samp>
</td>
<td><i>(Optional)</i> Whether to split the spawned item into multiple stacks which each have a stack size of one. This has no effect if <samp>AddToInventoryDirectly</samp> is enabled. Default false.
</td></tr></tbody></table>
</td></tr></tbody></table>
<p>If the garbage can being searched doesn't have its own entry under <samp>GarbageCans</samp>, the game will just use the <samp>BeforeAll</samp> and <samp>AfterAll</samp> fields.
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Example_new_garbage_can">Example new garbage can</span></h4>
<p>You can add garbage cans using only <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Content" title="Modding:Modder Guide/APIs/Content">SMAPI's content API</a>. For example, this content pack adds a new garbage can entry with the ID <samp>Example.ModId_Carpenter</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/GarbageCans&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TargetField&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;GarbageCans&quot;</span> <span class="p">],</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.ModId_Carpenter&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Items&quot;</span><span class="o">:</span> <span class="p">[</span>
                        <span class="c1">// 25% chance of pufferfish</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;ID&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Pufferfish&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;RANDOM 0.25&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(O)128&quot;</span>
                        <span class="p">},</span>

                        <span class="c1">// else guaranteed random House Plant item</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;ID&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_RandomHousePlant&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ItemID&quot;</span><span class="o">:</span> <span class="s2">&quot;RANDOM_ITEMS (F) @has_id_in_base_range 1376 1390&quot;</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>Then you'd place an <code>Action: Garbage Example.ModId_Carpenter</code> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map tile property</a> to mark a tile as a garbage can using this data.
</p>
<h4><span class="mw-headline" id="Example_change_for_existing_garbage_can">Example change for existing garbage can</span></h4>
<p>You can edit an existing garbage cans using only <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Content" title="Modding:Modder Guide/APIs/Content">SMAPI's content API</a>. For example, this content pack adds pufferfish to the Saloon garbage can, and moves it above the dish of the day.
</p><p>Note that this uses <samp>TargetField</samp> to 'move into' the item list for the saloon, and then treat those items as the entry list being edited. Specifying an ID which isn't in the list will add a new entry, just like when editing a regular list asset.
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/GarbageCans&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TargetField&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;GarbageCans&quot;</span><span class="p">,</span> <span class="s2">&quot;Saloon&quot;</span><span class="p">,</span> <span class="s2">&quot;Items&quot;</span> <span class="p">],</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="c1">// 25% chance of pufferfish</span>
                <span class="p">{</span>
                    <span class="s2">&quot;ID&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Pufferfish&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;RANDOM 0.25&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(O)128&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;MoveEntries&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s2">&quot;ID&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Pufferfish&quot;</span><span class="p">,</span> <span class="s2">&quot;BeforeId&quot;</span><span class="o">:</span> <span class="s2">&quot;Base_DishOfTheDay&quot;</span> <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Custom_map_actions">Custom map actions</span></h3>
<p>C# mods can now handle custom <samp>Action</samp> &amp; <samp>TouchAction</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map properties</a> by calling <samp>GameLocation.RegisterTileAction</samp> &amp; <samp>RegisterTouchAction</samp>, and passing a callback which receives the location, map property arguments, player who activated it, and tile position.
</p><p>For example, let's say you want a locked gate which needs a custom key item. You can add a regular <code>TouchAction Example.ModId_UnlockGate</code> map property (e.g. by adding it directly in the map file, or using <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a>'s <samp>EditMap</samp>, or using the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Content" title="Modding:Modder Guide/APIs/Content">content API</a>). Then you can just handle the logic from your C# mod:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">internal</span> <span class="k">class</span> <span class="nc">ModEntry</span> <span class="p">:</span> <span class="n">Mod</span>
<span class="p">{</span>
    <span class="c1">/// &lt;inheritdoc /&gt;</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Entry</span><span class="p">(</span><span class="n">IModHelper</span> <span class="n">helper</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">GameLocation</span><span class="p">.</span><span class="n">RegisterTouchAction</span><span class="p">(</span><span class="s">&quot;Example.ModId_UnlockGate&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">HandleUnlockGate</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">HandleUnlockGate</span><span class="p">(</span><span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">,</span> <span class="n">Farmer</span> <span class="n">player</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">tile</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">const</span> <span class="kt">string</span> <span class="n">mailFlag</span> <span class="p">=</span> <span class="s">&quot;Example.ModId_GateUnlocked&quot;</span><span class="p">;</span>
        <span class="k">const</span> <span class="kt">string</span> <span class="n">keyId</span> <span class="p">=</span> <span class="s">&quot;Example.ModId_GateKey&quot;</span><span class="p">;</span>

        <span class="c1">// unlock gate if locked</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">mailFlag</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">hasItemInInventory</span><span class="p">(</span><span class="n">keyId</span><span class="p">,</span> <span class="m">1</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">Game1</span><span class="p">.</span><span class="n">activeClickableMenu</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DialogueBox</span><span class="p">(</span><span class="s">&quot;This gate is locked. I wonder where the key is?&quot;</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">player</span><span class="p">.</span><span class="n">removeFirstOfThisItemFromInventory</span><span class="p">(</span><span class="n">keyId</span><span class="p">);</span>
            <span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">mailFlag</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// apply open-gate map edit</span>
        <span class="n">IAssetDataForMap</span> <span class="n">mapHelper</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">GetPatchHelper</span><span class="p">(</span><span class="n">location</span><span class="p">.</span><span class="n">map</span><span class="p">).</span><span class="n">AsMap</span><span class="p">();</span>
        <span class="n">mapHelper</span><span class="p">.</span><span class="n">PatchMap</span><span class="p">(</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Map</span><span class="p">&gt;(</span><span class="s">&quot;assets/unlocked-gate.tmx&quot;</span><span class="p">),</span>
            <span class="n">targetArea</span><span class="p">:</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">tile</span><span class="p">.</span><span class="n">X</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">tile</span><span class="p">.</span><span class="n">Y</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Custom_map_layers">Custom map layers</span></h3>
<p>You can now add any number of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map layers</a> by suffixing a vanilla layer name (i.e. <samp>Back</samp>, <samp>Buildings</samp>, <samp>Front</samp>, or <samp>AlwaysFront</samp>) with an offset. For example, <samp>Back-1</samp> will be drawn before/under <samp>Back</samp>, and <samp>Back2</samp> will be drawn after/over it. You can increment the number to add more layers.
</p><p>This only affects layer rendering. Tile properties must still be set on the original layers.
</p>
<h3><span class="mw-headline" id="Custom_minecarts">Custom minecarts</span></h3>
<p>You can now add/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Minecart" title="Minecart">minecart</a> destinations by editing the <samp>Data\Minecarts</samp> data asset, which consists of a data model with two relevant fields (listed below).
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>MinecartsUnlocked</samp>
</td>
<td>A <a href="#Game_state_queries">game state query</a> which indicates whether minecarts in general are unlocked. You usually shouldn't change this value, unless you're changing the overall game progression (e.g. adding an alternative way to unlock minecart access).
</td></tr>
<tr>
<td><samp>Destinations</samp>
</td>
<td>The destinations which the player can travel to from any minecart. This consists of a string → model lookup, where the key is a unique destination ID (only containing alphanumeric/underscore/dot characters, with custom entries prefixed with your mod ID like <samp>Example.ModId_DestinationId</samp>), and the value is a model with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Location</samp>
</td>
<td>The <a href="#Custom_locations">location ID</a> for the destination.
</td></tr>
<tr>
<td><samp>Tile</samp>
</td>
<td>The destination tile position within the location, specified as a model with <samp>X</samp> and <samp>Y</samp> fields.
</td></tr>
<tr>
<td><samp>Direction</samp>
</td>
<td>The direction the player should face after arrival (one of <samp>down</samp>, <samp>left</samp>, <samp>right</samp>, or <samp>up</samp>).
</td></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="#Tokenizable_string_format">tokenizable string</a> for the destination name shown in the minecart menu. You can use the location's display name with the <samp>LocationName</samp> token (like <code>[LocationName Desert]</code> for the <a href="../../external.html?link=https://stardewvalleywiki.com/Desert" class="mw-redirect" title="Desert">desert</a>).
</td></tr>
<tr>
<td><samp>Network</samp>
</td>
<td><i>(Optional)</i> An arbitrary ID which groups the destination (along with any others having the same ID) into a separate network. Destinations in a network are only visible if the destination list is opened for that network via the <samp>MinecartTransport <code title="optional field &#39;network name&#39;">[network name]</code></samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">action property</a>. If omitted, the minecart is part of the implicit default network.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this minecart destination is available. Defaults to always available.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Example">Example</span></h4>
<p>This <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> content pack adds the <a href="../../external.html?link=https://stardewvalleywiki.com/Railroad" title="Railroad">Railroad</a> as a minecart destination, complete with a map edit adding a decorative minecart. It is available after the <a href="../../external.html?link=https://stardewvalleywiki.com/Random_Events" title="Random Events">Earthquake</a> has occured and minecarts have been unlocked.
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// add minecart destination</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/Minecarts&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TargetField&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Destinations&quot;</span> <span class="p">],</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Railroad&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Location&quot;</span><span class="o">:</span> <span class="s2">&quot;Railroad&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Tile&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;X&quot;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="o">:</span> <span class="mi">39</span> <span class="p">},</span>
                    <span class="s2">&quot;Direction&quot;</span><span class="o">:</span> <span class="s2">&quot;down&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;DisplayName&quot;</span><span class="o">:</span> <span class="s2">&quot;[LocationName Railroad]&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;When&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;HasFlag&quot;</span><span class="o">:</span> <span class="s2">&quot;ccBoilerRoom&quot;</span><span class="p">,</span>
                <span class="s2">&quot;query: {{DaysPlayed}} &gt;= 32&quot;</span><span class="o">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// add decorative minecart</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditMap&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Maps/Railroad&quot;</span><span class="p">,</span>
            <span class="s2">&quot;FromFile&quot;</span><span class="o">:</span> <span class="s2">&quot;assets/Custom_Railroad_Minecart.tmx&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ToArea&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;X&quot;</span><span class="o">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span> <span class="s2">&quot;Width&quot;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;Height&quot;</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Custom_passive_festivals">Custom passive festivals</span></h3>
<p>You can now add or modify passive festivals by editing the <samp>Data/PassiveFestivals</samp> asset.
</p><p>(A <i>passive festival</i> is a <a href="../../external.html?link=https://stardewvalleywiki.com/Festivals" title="Festivals">festival</a> like the <a href="../../external.html?link=https://stardewvalleywiki.com/Night_Market" title="Night Market">Night Market</a>. They replace a location for a period of time, the player can enter/leave them anytime, and time continues passing while at the festival.)
</p>
<h4><span class="mw-headline" id="Data_format_3">Data format</span></h4>
<p>The <samp>Data/PassiveFestivals</samp> asset consists of a string → model lookup, where the key is the unique festival ID, and the value is a model with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>A key which uniquely identifies this festival. For custom festivals, the ID should only contain alphanumeric/underscore/dot characters, and should ideally be prefixed with your mod ID like <samp>Example.ModId_FestivalName</samp>.
</td></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="#Tokenizable_string_format">tokenizable string</a> for the display name shown on the <a href="../../external.html?link=https://stardewvalleywiki.com/Calendar" title="Calendar">calendar</a>.
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Season" class="mw-redirect" title="Season">season</a> when the festival becomes active.
</td></tr>
<tr>
<td><samp>StartDay</samp><br /><samp>EndDay</samp>
</td>
<td>The days of month when the festival becomes active.
</td></tr>
<tr>
<td><samp>StartTime</samp>
</td>
<td>The time of day when the festival opens each day.
</td></tr>
<tr>
<td><samp>StartMessage</samp>
</td>
<td>A <a href="#Tokenizable_string_format">tokenizable string</a> for the in-game <a href="../../external.html?link=https://en.wikipedia.org/wiki/Pop-up_notification" class="extiw" title="wikipedia:Pop-up notification">toast notification</a> shown when the festival begins each day.
</td></tr>
<tr>
<td><samp>MapReplacements</samp>
</td>
<td>The locations to swap for the duration of the festival. Despite the field name, this swaps <b>locations</b> (e.g. as added by <samp>CustomLocations</samp> using <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a>), and not the location's map asset.
<p>This is specified as a string → string lookup, where the key is the original location to replace and the value is the new location. Both use the internal location name, as shown by the <a rel="nofollow" class="external text" href="../../external.html?link=https://www.nexusmods.com/stardewvalley/mods/679">Debug Mode</a> mod. For example, this swaps the <samp>Beach</samp> location with <samp>BeachNightMarket</samp> during the <a href="../../external.html?link=https://stardewvalleywiki.com/Night_Market" title="Night Market">Night Market</a>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;MapReplacements&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;Beach&quot;</span><span class="o">:</span> <span class="s2">&quot;BeachNightMarket&quot;</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether the festival is enabled (subject to the other fields like <samp>StartDay</samp> and <samp>EndDay</samp>). Defaults to always enabled.
</td></tr>
<tr>
<td><samp>ShowOnCalendar</samp>
</td>
<td><i>(Optional)</i> Whether the festival appears on the <a href="../../external.html?link=https://stardewvalleywiki.com/Calendar" title="Calendar">calendar</a>, using the same iridium-star icon as the <a href="../../external.html?link=https://stardewvalleywiki.com/Calendar#Winter" title="Calendar">Night Market</a>. Default true.
</td></tr>
<tr>
<td><samp>DailySetupMethod</samp><br /><samp>CleanupMethod</samp>
</td>
<td><i>(Optional)</i> A C# method which applies custom logic when the day starts (<samp>DailySetupMethod</samp>) and/or overnight after the last day of the festival (<samp>CleanupMethod</samp>).
<p>These must be specified in the form <samp><code title="required field &#39;full type name&#39;">&lt;full type name&gt;</code>.<code title="required field &#39;method name&#39;">&lt;method name&gt;</code></samp>. The methods must be static, take zero arguments, and return void.
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="NPC_schedules">NPC schedules</span></h4>
<p>When a passive festival is active, NPCs will check for <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Schedule_data" title="Modding:Schedule data">a schedule entry</a> in this order:
</p>
<table class="wikitable">

<tbody><tr>
<th>syntax
</th>
<th>summary
</th></tr>
<tr>
<td><samp><code title="required field &#39;festival ID&#39;">&lt;festival ID&gt;</code>_<code title="required field &#39;festival day&#39;">&lt;festival day&gt;</code></samp>
</td>
<td>Applies on the given date. The <code title="required field &#39;festival day&#39;">&lt;festival day&gt;</code> is relative, so <samp>1</samp> matches the festival <samp>StartDay</samp>.<br /><small>Example: <samp>NightMarket_3</samp> or <samp>marriage_NightMarket_3</samp></small>
</td></tr>
<tr>
<td><samp><code title="required field &#39;festival ID&#39;">&lt;festival ID&gt;</code></samp>
</td>
<td>Applies if there's no date-specific entry.<br /><small>Example: <samp>NightMarket</samp> or <samp>marriage_NightMarket</samp></small>
</td></tr></tbody></table>
<p>If the NPC is married to a player, they'll add a <samp>marriage_</samp> prefix to the keys (like <samp>marriage_<code title="required field &#39;festival ID&#39;">&lt;festival ID&gt;</code>_<code title="required field &#39;festival day&#39;">&lt;festival day&gt;</code></samp>) and ignore any entry without the prefix.
</p>
<h3><span class="mw-headline" id="Custom_planting_restrictions">Custom planting restrictions</span></h3>
<p>You can now add <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">context tags</a> to a <a href="../../external.html?link=https://stardewvalleywiki.com/Crops" title="Crops">crop seed</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Fruit_Trees" title="Fruit Trees">fruit tree sapling</a>, or <a href="../../external.html?link=https://stardewvalleywiki.com/Trees" title="Trees">wild tree seed</a> to restrict where it can be planted. This is based on these tags:
</p>
<table class="wikitable">

<tbody><tr>
<th>tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>plantable_greenhouse</samp>
</td>
<td>Can always be planted in a <a href="../../external.html?link=https://stardewvalleywiki.com/Greenhouse" title="Greenhouse">greenhouse</a> (<i>i.e.,</i> locations with <samp>IsGreenhouse</samp>), regardless of any other context tag.
</td></tr>
<tr>
<td><samp>plantable_location_<code title="required field &#39;location name&#39;">&lt;location name&gt;</code></samp><br /><samp>not_plantable_location_<code title="required field &#39;location name&#39;">&lt;location name&gt;</code></samp>
</td>
<td>Must or must not be planted in one of these locations. This must be the internal location name (as shown by <a rel="nofollow" class="external text" href="../../external.html?link=https://www.nexusmods.com/stardewvalley/mods/679">Debug Mode</a>), lowercase and with any spaces replaced with underscores.
</td></tr>
<tr>
<td><samp>plantable_context_<code title="required field &#39;context ID&#39;">&lt;context ID&gt;</code></samp><br /><samp>not_plantable_context_<code title="required field &#39;context ID&#39;">&lt;context ID&gt;</code></samp>
</td>
<td>Must or must not be planted in one of these <a href="#Custom_location_contexts">location contexts</a>. The context ID must be lowercase, with any spaces replaced with underscores.
</td></tr></tbody></table>
<p>When multiple tags are specified, they're applied in this precedence order:
</p>
<table class="wikitable">

<tbody><tr>
<th>precedence
</th>
<th>rule
</th>
<th>result
</th></tr>
<tr>
<td>1
</td>
<td><samp>plantable_greenhouse</samp> matches
</td>
<td>plantable
</td></tr>
<tr>
<td>2
</td>
<td><samp>plantable_location_*</samp> matches
</td>
<td>plantable
</td></tr>
<tr>
<td>2
</td>
<td><samp>not_plantable_location_*</samp> matches<br /><i>or</i> <samp>not_plantable_context_*</samp> matches
</td>
<td>not plantable
</td></tr>
<tr>
<td>3
</td>
<td><samp>plantable_context_*</samp> or <samp>plantable_location_*</samp> specified but didn't match<br /><small>(<samp>not_*</samp> doesn't affect this rule)
</small></td>
<td>not plantable
</td></tr>
<tr>
<td>4
</td>
<td>current location listed in the context's <samp>DefaultValidPlantableLocations</samp> field
</td>
<td>plantable
</td></tr>
<tr>
<td>5
</td>
<td colspan="2"><i>defaults to normal planting logic</i>
</td></tr></tbody></table>
<p>For example:
</p>
<table class="wikitable">

<tbody><tr>
<th>tags
</th>
<th>effect
</th>
<th>plantable
</th>
<th>reason
</th></tr>
<tr>
<td rowspan="4"><i>none</i>
</td>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm" title="The Farm">Farm</a>
</td>
<td>☑ plantable
</td>
<td rowspan="4">default behavior
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Greenhouse" title="Greenhouse">Greenhouse</a>
</td>
<td>☑ plantable
</td></tr>
<tr>
<td>location listed in its context's <samp>DefaultValidPlantableLocations</samp>
</td>
<td>☑ plantable
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Bus_Stop" title="Bus Stop">Bus Stop</a>
</td>
<td>☐
</td></tr>
<tr>
<td rowspan="2"><samp>plantable_greenhouse, not_plantable_context_default</samp>
</td>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm" title="The Farm">Farm</a>
</td>
<td>☐
</td>
<td>matches <samp>not_plantable_context_default</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Greenhouse" title="Greenhouse">Greenhouse</a>
</td>
<td>☑ plantable
</td>
<td>overridden by <samp>plantable_greenhouse</samp>
</td></tr>
<tr>
<td rowspan="3"><samp>plantable_location_islandwest</samp>
</td>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Island West</a>
</td>
<td>☑ plantable
</td>
<td>matches <samp>plantable_location_islandwest</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Island South</a>
</td>
<td>☐
</td>
<td rowspan="2">doesn't match <samp>plantable_location_islandwest</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm" title="The Farm">Farm</a>
</td>
<td>☐
</td></tr>
<tr>
<td rowspan="3"><samp>plantable_context_island</samp>
</td>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Island West</a>
</td>
<td>☑ plantable
</td>
<td rowspan="2">matches <samp>plantable_context_island</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Island South</a>
</td>
<td>☑ plantable
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm" title="The Farm">Farm</a>
</td>
<td>☐
</td>
<td>doesn't match <samp>plantable_context_island</samp>
</td></tr>
<tr>
<td rowspan="3"><samp>not_plantable_context_island</samp>
</td>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Island West</a>
</td>
<td>☐
</td>
<td rowspan="2">matches <samp>not_plantable_context_island</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Island South</a>
</td>
<td>☐
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm" title="The Farm">Farm</a>
</td>
<td>☑ plantable
</td>
<td>default behavior
</td></tr>
<tr>
<td rowspan="3"><samp>plantable_location_town, plantable_location_mountain</samp>
</td>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Pelican_Town" title="Pelican Town">Town</a>
</td>
<td>☑ plantable
</td>
<td>matches <samp>plantable_location_town</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/The_Mountain" title="The Mountain">Mountain</a>
</td>
<td>☑ plantable
</td>
<td>matches <samp>plantable_location_mountain</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm" title="The Farm">Farm</a>
</td>
<td>☐
</td>
<td>doesn't match any <samp>plantable_location_*</samp> tags
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Custom_weather">Custom weather</span></h3>
<p>You can now change the weather algorithm by editing <a href="#Custom_location_contexts">location context data</a>, and (with a C# mod) implement custom weathers.
</p><p>Fields like <samp>Game1.weather</samp> and <samp>Game1.weatherForTomorrow</samp> are now strings to support custom mod weather IDs. The change for vanilla weather has no effect on Content Patcher packs, since the new weather IDs match the ones Content Patcher was using before (i.e. <samp>Sun</samp>, <samp>Rain</samp>, <samp>Snow</samp>, <samp>Storm</samp>, and <samp>Wind</samp>). C# mods may also see a <samp>Festival</samp> weather, while Content Patcher packs will see <samp>Sun</samp> for it. The constants like <samp>Game1.weather_sunny</samp> have the new string values (with new constants like <samp>Game1.legacy_weather_sunny</samp> for the legacy values).
</p><p>The base game will treat an invalid weather as sunny. C# mods can implement custom weather effects using <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Events" title="Modding:Modder Guide/APIs/Events">normal SMAPI events</a> like <samp>UpdateTicked</samp>, or by <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Harmony" title="Modding:Modder Guide/APIs/Harmony">patching</a> methods like <samp>Game1.ApplyWeatherForNewDay</samp> and <samp>Game1.populateDebrisWeatherArray</samp>.
</p>
<h3><span class="mw-headline" id="Custom_world_maps">Custom world maps</span></h3>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a href="../../external.html?link=https://stardewvalleywiki.com/File:Modding_map_area.png" class="image"><img alt="" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/4/47/Modding_map_area.png/300px-Modding_map_area.png" decoding="async" width="300" height="177" class="thumbimage" srcset="/mediawiki/images/thumb/4/47/Modding_map_area.png/450px-Modding_map_area.png 1.5x, /mediawiki/images/thumb/4/47/Modding_map_area.png/600px-Modding_map_area.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="../../external.html?link=https://stardewvalleywiki.com/File:Modding_map_area.png" class="internal" title="Enlarge"></a></div>The default world map. The entire map is the Valley region, and the highlighted portion is an area with its own texture, tooltip/name, and player marker positioning.</div></div></div>
<p>You can now change the world map by editing the <samp>Data/WorldMap</samp> asset. You can add custom maps for certain locations, apply texture overlays, add/edit tooltips, set player marker positioning, etc. The default map for the valley is fully defined in <samp>Data/WorldMap</samp>.
</p>
<h4><span class="mw-headline" id="Concepts">Concepts</span></h4>
<p>The game divides the world map into three main concepts (see example at right):
</p>
<ul><li>A <b>region</b> is a large-scale part of the world containing everything shown on the map. For example, the default world map is the Valley region.</li>
<li>A <b>map area</b> is a subset of the world map which optionally add tooltips, scroll text, texture overlays, and player marker positioning info.</li>
<li>A <b>map area position</b> matches in-game locations and tile coordinates to the drawn world map. The game uses this to automatically position player markers at a relative position on the world map (e.g. so you can watch other players move across the location on the map).</li></ul>
<h4><span class="mw-headline" id="Format_4">Format</span></h4>
<p>The <samp>Data/WorldMap</samp> data asset consists of a string → model lookup, where...
</p>
<ul><li>The key is a unique identifier for the region. This should only contain alphanumeric/underscore/dot characters. For custom regions, this should be prefixed with your mod ID like <samp>Example.ModId_RegionName</samp>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>BaseTexture</samp>
</td>
<td><i>(Optional)</i> The base texture to draw for the map, if any. The first matching texture is applied. If map areas provide their own texture too, they're drawn on top of this base texture.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A unique identifier for the texture entry. This should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_TextureName</samp>.
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture to draw.
</td></tr>
<tr>
<td><samp>SourceRect</samp>
</td>
<td><i>(Optional)</i> The pixel area within the <samp>Texture</samp> to draw, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. Defaults to the entire texture image.
</td></tr>
<tr>
<td><samp>MapPixelArea</samp>
</td>
<td><i>(Optional)</i> The pixel area within the map which is covered by this area, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. If omitted, draws the entire <samp>SourceRect</samp> area starting from the top-left corner of the map.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this texture should be selected. Defaults to always selected.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>MapAreas</samp>
</td>
<td>The areas to draw on top of the <samp>BaseTexture</samp>. These can provide tooltips, scroll text, texture overlays, and player marker positioning info.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A unique identifier for the map area. This should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_MapAreaName</samp>.
</td></tr>
<tr>
<td><samp>PixelArea</samp>
</td>
<td>The pixel area within the map which is covered by this area. This is used to set the default player marker position, and is the default value for pixel areas in other fields below.
</td></tr>
<tr>
<td><samp>ScrollText</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for the scroll text (shown at the bottom of the map when the player is in this area). Defaults to none.
</td></tr>
<tr>
<td><samp>Textures</samp>
</td>
<td><i>(Optional)</i> The image overlays to apply to the map. All matching textures are applied.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A unique identifier for the texture entry within the area. This should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_TextureName</samp>.
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture to draw.
<p>If set to the exact string <samp>MOD_FARM</samp>, the game will apply the texture for the current farm type (regardless of whether it's a vanilla or mod farm type). This should usually be used with <code>"MapPixelArea": "0 43 131 61"</code> (the farm area on the default map).
</p>
</td></tr>
<tr>
<td><samp>SourceRect</samp>
</td>
<td><i>(Optional)</i> The pixel area within the <samp>Texture</samp> to draw, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. Defaults to the entire texture image.
</td></tr>
<tr>
<td><samp>MapPixelArea</samp>
</td>
<td><i>(Optional)</i> The pixel area within the map which is covered by this area, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. If omitted, defaults to the map area's <samp>PixelArea</samp>.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this texture should be selected. Defaults to always selected.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Tooltips</samp>
</td>
<td><i>(Optional)</i> The tooltips to show when hovering over parts of this area on the world map.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A unique identifier for the tooltip within the area. This should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_TooltipName</samp>.
</td></tr>
<tr>
<td><samp>Text</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for the text to show in a tooltip.
</td></tr>
<tr>
<td><samp>PixelArea</samp>
</td>
<td><i>(Optional)</i> The pixel area within the map which can be hovered to show this tooltip. Defaults to the area's <samp>PixelArea</samp>.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this tooltip should be available. Defaults to always available.
</td></tr>
<tr>
<td><samp>KnownCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether the area is known by the player, so the <samp>Text</samp> is shown as-is. If this is false, the tooltip text is replaced with <samp>???</samp>. Defaults to always known.
</td></tr>
<tr>
<td><samp>LeftNeighbor</samp><br /><samp>RightNeighbor</samp><br /><samp>UpNeighbor</samp><br /><samp>DownNeighbor</samp>
</td>
<td><i>(Optional)</i> When navigating the world map with a controller, the tooltip to snap to when the player moves the cursor while it's on this tooltip.
<p>This must specify the area and tooltip formatted like <samp>areaId/tooltipId</samp> (not case-sensitive). If there are multiple possible neighbors, they can be specified in comma-delimited form; the first valid one will be used.
</p><p>For example, this will snap to the community center when the user moves the cursor to the right:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;RightNeighbor&quot;</span><span class="o">:</span> <span class="s2">&quot;Town/CommunityCenter&quot;</span>
</pre></div>
<p>A blank value will be ignored, but the game will log a warning if you specify neighbor IDs and none of them match. To silently ignore them instead (e.g. for a conditional location), you can add 'ignore' as an option:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;RightNeighbor&quot;</span><span class="o">:</span> <span class="s2">&quot;Town/SomeOptionalLocation, ignore&quot;</span>
</pre></div>
<p>See also the <samp>MapNeighborIdAliases</samp> field in the region data.
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>WorldPositions</samp>
</td>
<td><i>(Optional)</i> The in-world locations and tile coordinates to match to this map area. The game uses this to automatically position player markers at a relative position on the world map (e.g. so you can watch other players move across the location on the map).
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A unique identifier for this entry within the area. This should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_PositionName</samp>.
</td></tr>
<tr>
<td><samp>LocationContext</samp>
</td>
<td><i>(Optional)</i> The location context in which this world position applies. The vanilla contexts are <samp>Default</samp> (valley) and <samp>Island</samp> (<a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a>).
</td></tr>
<tr>
<td><samp>LocationName</samp>
</td>
<td><i>(Optional)</i> The location name to which this world position applies. Any location within <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">the mines</a> and the <a href="../../external.html?link=https://stardewvalleywiki.com/Skull_Cavern" title="Skull Cavern">Skull Cavern</a> will be <samp>Mines</samp> and <samp>SkullCave</samp> respectively, and festivals use the map asset name (like <samp>Town-EggFestival</samp>).
</td></tr>
<tr>
<td><samp>LocationNames</samp>
</td>
<td><i>(Optional)</i> Equivalent to <samp>LocationName</samp>, but you can specify multiple locations as an array.
</td></tr>
<tr>
<td><samp>TileArea</samp><br /><samp>MapPixelArea</samp>
</td>
<td><i>(Optional)</i> The tile area within the in-game location (<samp>TileArea</samp>) and the equivalent pixel area on the world map (<samp>MapPixelArea</samp>). These are used to calculate the position of a character or player within the map view, given their real position in-game. For example, if the player is in the top-right corner of the tile area in-game, they'll be shown in the top-right corner of the drawn area on the world map.
<p>Both are specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. <samp>TileArea</samp> defaults to the entire location, and <samp>MapPixelArea</samp> defaults to the map area's <samp>PixelArea</samp>.
</p>
</td></tr>
<tr>
<td><samp>ScrollText</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for the scroll text shown at the bottom of the map when the player is within this position. Defaults to the map area's <samp>ScrollText</samp>, if any.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this entry should be applied. Defaults to always applied.
</td></tr>
<tr>
<td><samp>ExtendedTileArea</samp>
</td>
<td><i>(Optional, specialized)</i> The tile area within the in-game location to which this position applies, including tiles that are outside the <samp>TileArea</samp>. The <samp>ExtendedTileArea</samp> must fully contain <samp>TileArea</samp>, since the latter won't be checked for the initial detection anymore.
<p>For example, let's say we have this <samp>ExtendedTileArea</samp> (the larger box) and <samp>TileArea</samp> (the smaller box inside it), and the player is at position X:
</p>
<pre>┌────────────────────┐
│    ┌────────┐      │
│ X  │        │      │
│    │        │      │
│    └────────┘      │
└────────────────────┘
</pre>
<p>In this case, the entry would be selected (since the player is inside the <samp>ExtendedTileArea</samp>), and their coordinates would be shifted into the nearest <samp>TileArea</samp> position:
</p>
<pre>┌────────────────────┐
│    ┌────────┐      │
│    │X       │      │
│    │        │      │
│    └────────┘      │
└────────────────────┘
</pre>
<p>This is used for complex locations that use multiple tile areas to match a drawn map with a different layout. This can be omitted in most cases.
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>MapNeighborIdAliases</samp>
</td>
<td><i>(Optional)</i> A set of aliases that can be used in tooltip fields like <samp>LeftNeighbor</samp> instead of the specific values they represent. Aliases can't be recursive.
<p>For example, this lets you use <samp>Beach/FishShop</samp> in neighbor fields instead of specifying the specific tooltip IDs each time:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;MapNeighborIdAliases&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;Beach/FishShop&quot;</span><span class="o">:</span> <span class="s2">&quot;Beach/FishShop_DefaultHours, Beach/FishShop_ExtendedHours&quot;</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Example_2">Example</span></h4>
<p>This <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> content pack adds a new world map for <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a>. If the player unlocked the <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island#Beach_Resort" title="Ginger Island">beach resort</a>, it applies the beach resort texture.
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// add world map edits</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/WorldMap&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;GingerIsland&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;BaseTexture&quot;</span><span class="o">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Default&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;Texture&quot;</span><span class="o">:</span> <span class="s2">&quot;{{InternalAssetKey: assets/ginger-island.png}}&quot;</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;MapAreas&quot;</span><span class="o">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;IslandSouth&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;PixelArea&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;X&quot;</span><span class="o">:</span> <span class="mi">105</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="o">:</span> <span class="mi">105</span><span class="p">,</span> <span class="s2">&quot;Width&quot;</span><span class="o">:</span> <span class="mi">231</span><span class="p">,</span> <span class="s2">&quot;Height&quot;</span><span class="o">:</span> <span class="mi">240</span> <span class="p">},</span>
                            <span class="s2">&quot;ScrollText&quot;</span><span class="o">:</span> <span class="s2">&quot;Dock&quot;</span><span class="p">,</span> <span class="c1">// example only, should usually be translated</span>

                            <span class="s2">&quot;Tooltips&quot;</span><span class="o">:</span> <span class="p">[</span>
                                <span class="p">{</span>
                                    <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Resort&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;Text&quot;</span><span class="o">:</span> <span class="s2">&quot;Dock&quot;</span> <span class="c1">// example only, should usually be translated</span>
                                <span class="p">}</span>
                            <span class="p">],</span>

                            <span class="s2">&quot;Textures&quot;</span><span class="o">:</span> <span class="p">[</span>
                                <span class="p">{</span>
                                    <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Resort&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;Texture&quot;</span><span class="o">:</span> <span class="s2">&quot;{{InternalAssetKey: assets/resort.png}}&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;PLAYER_HAS_FLAG Any Island_Resort&quot;</span>
                                <span class="p">}</span>
                            <span class="p">]</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h4><span class="mw-headline" id="Real-time_positioning">Real-time positioning</span></h4>
<p>In Stardew Valley 1.6, the world map now shows players' actual positions within the world in real-time (instead of showing them at a fixed point for each location like 1.5.4). In multiplayer, you'll see other players' position in real-time too.
</p><p>For custom locations, this usually happens automatically based on your <samp>PixelArea</samp> and <samp>LocationName</samp> fields in <samp>Data/WorldMap</samp>. For complex locations whose tile layout doesn't match the drawn map, you can specify pixel + tile areas in the <samp>WorldLocations</samp> field to allow real-time positions.
</p><p>⚠ Current limitations:
</p>
<ul><li>The <a href="../../external.html?link=https://stardewvalleywiki.com/Cindersap_Forest" title="Cindersap Forest">forest</a> (outside), <a href="../../external.html?link=https://stardewvalleywiki.com/Pelican_Town" title="Pelican Town">town</a> (outside), and <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a> (all) temporarily have a fixed marker position like in 1.5.4. Their locations' layouts are very different from the drawn map, so they'll be migrated during the 1.6 late alpha.</li>
<li>Building interiors temporarily show a fixed marker position on the farm, like in 1.5.4. Dynamically mapping those to the building's exterior position will be added during the late alpha.</li></ul>
<h3><span class="mw-headline" id="New_map_properties">New map properties</span></h3>
<p>1.6 adds several new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map properties</a>.
</p>
<h4><span id="Warps_&amp;_map_positions"></span><span class="mw-headline" id="Warps_.26_map_positions">Warps &amp; map positions</span></h4>
<table class="wikitable">

<tbody><tr>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>DefaultWarpLocation <code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code></samp><br /><i>(valid in any location)</i>
</td>
<td>The default arrival tile, used when a player or NPC is added to the location without a target tile (e.g. using <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Console_commands" title="Modding:Console commands">debug commands</a> like <samp>debug warp</samp> or <samp>debug eventbyid</samp>).
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Audio">Audio</span></h4>
<table class="wikitable">

<tbody><tr>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>MusicContext <code title="required field &#39;context&#39;">&lt;context&gt;</code></samp><br /><i>(valid in any location)</i>
</td>
<td>The music context for this location. The recommended values are <samp>Default</samp> or <samp>SubLocation</samp>.
<p>Setting <samp>SubLocation</samp> has two effects:
</p>
<ul><li><samp>SubLocation</samp> has a lower priority than <samp>Default</samp>. In split-screen mode, that means if player A is at a location with a <samp>Default</samp> music context, and player B is a location with a <samp>SubLocation</samp> context, the game will choose player A's music.</li>
<li>When the player leaves a location with <samp>SubLocation</samp> music, the music will be stopped unless the new location has the same music and music context set.</li></ul>
</td></tr>
<tr>
<td><samp>MusicIgnoreInRain T²</samp><br /><i>(valid in any outdoor location)</i>
</td>
<td>If set, the <samp>Music</samp> property is ignored when it's raining in this location.
</td></tr>
<tr>
<td><samp>MusicIgnoreInSpring T²</samp><br /><samp>MusicIgnoreInSummer T²</samp><br /><samp>MusicIgnoreInFall T²</samp><br /><samp>MusicIgnoreInWinter T²</samp><br /><i>(valid in any outdoor location)</i>
</td>
<td>If set, the <samp>Music</samp> property is ignored in the given season.
</td></tr>
<tr>
<td><samp>MusicIgnoreInFallDebris T²<br /><i>(valid in any outdoor location)</i>
</samp></td>
<td>If set, the <samp>Music</samp> property is ignored in fall during windy weather.
</td></tr>
<tr>
<td><samp>MusicIsTownTheme T²</samp><br /><i>(valid in any location)</i>
</td>
<td>If set, uses the same behavior as <a href="../../external.html?link=https://stardewvalleywiki.com/Pelican_Town" title="Pelican Town">Pelican Town</a>'s music: it will start playing after the day music has finished, and will continue playing while the player travels through indoor areas, but will stop when entering another outdoor area that isn't marked with the same <samp>Music</samp> and <samp>MusicIsTownTheme</samp> properties.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Crops">Crops</span></h4>
<table class="wikitable">

<tbody><tr>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>AllowGiantCrops T</samp>
</td>
<td>If set with any non-blank value, <a href="../../external.html?link=https://stardewvalleywiki.com/Crops#Giant_Crops" title="Crops">giant crops</a> can grow in this location. (To plant the crop itself, you'll need <a href="#Custom_planting_restrictions">custom planting restrictions</a> or the <a href="#Custom_location_contexts"><samp>DefaultValidPlantableLocations</samp> context field</a>.)
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Building_construction">Building construction</span></h4>
<table class="wikitable">

<tbody><tr>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>CanBuildHere T</samp><br /><i>(valid in any outdoor location)</i>
</td>
<td>Whether to allow constructing buildings in this location. The game will adjust automatically to account for it (e.g. Robin will let you choose where to build). See <a href="#Build_anywhere"><i>build anywhere</i> in what's new</a>.
</td></tr>
<tr>
<td><samp>BuildConditions <code title="required field &#39;query&#39;">&lt;query&gt;</code></samp><br /><i>(valid in any outdoor location)</i>
</td>
<td>If <samp>CanBuildHere</samp> is set, an optional <a href="#Game_state_queries">game state query</a> which indicates whether building is allowed currently.
</td></tr>
<tr>
<td><samp>LooserBuildRestrictions T</samp><br /><i>(valid in any outdoor location)</i>
</td>
<td>If set, tiles don't need to be marked <samp>Buildable T</samp> or <samp>Diggable T</samp> in their properties. Tiles can be blocked with <samp>Buildable F</samp> instead. The other restrictions still apply.
</td></tr>
<tr>
<td><samp>ValidBuildRect <code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code> <code title="required field &#39;width&#39;">&lt;width&gt;</code> <code title="required field &#39;height&#39;">&lt;height&gt;</code></samp><br /><i>(valid in any outdoor location)</i>
</td>
<td>The tile area within the map where buildings may be placed. If omitted, buildings may be placed in any open space in the map.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Other_map_property_changes">Other map property changes</span></h3>
<ul><li>The <samp>NPCWarp</samp> and <samp>Warp</samp> properties are now fault-tolerant. They'll automatically ignore extra spaces, log an informative warning if parsing still fails, and continue with the next warp if possible.</li>
<li>The <samp>Stumps</samp> map property now works in all locations.</li>
<li>Removed many unused map/tile properties like <samp>Arch</samp>, <samp>Debris</samp>, <samp>Fish</samp>, and <samp>asdf</samp>.</li></ul>
<h3><span class="mw-headline" id="Tile_property_changes">Tile property changes</span></h3>
<ul>
<li>You can now override a tile index property by setting it as a tile property.</li>
<li>Added new <samp>Action</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">tile properties</a>:
<table class="wikitable">

<tbody><tr>
<th>layer
</th>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BuildingSilo</samp>
</td>
<td>If a building covers this tile, enables <a href="../../external.html?link=https://stardewvalleywiki.com/Silo" title="Silo">silo</a> interactions on this tile subject to the building's <samp>HayCapacity</samp> field in <samp>Data/Buildings</samp>.
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BuildingToggleAnimalDoor</samp>
</td>
<td>If a building covers this tile, opens or closes its animal door.
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Forge</samp>
</td>
<td>Opens the <a href="../../external.html?link=https://stardewvalleywiki.com/Forge" title="Forge">Forge</a> menu.
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action None</samp>
</td>
<td>Does nothing. This is used to mark the tile interactive if the click will be handled separately.
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ObeliskWarp <code title="required field &#39;location name&#39;">&lt;location name&gt;</code> <code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code> <code title="optional field &#39;whether to dismount&#39;">[whether to dismount]</code></samp>
</td>
<td>Warps the player to the specified location name and position with the <a href="../../external.html?link=https://stardewvalleywiki.com/Warp_Totem" title="Warp Totem">Obelisk</a> animation/sound effects.
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action OpenShop <code title="required field &#39;shop id&#39;">&lt;shop id&gt;</code> <code title="optional field &#39;from direction&#39;">[from direction]</code> <code title="optional field &#39;open time&#39;">[open time]</code> <code title="optional field &#39;close time&#39;">[close time]</code> <code title="optional field &#39;owner tile area&#39;">[owner tile area]</code></samp>
</td>
<td>Open the <a href="#Custom_shops">shop</a> with the given <code title="required field &#39;shop id&#39;">&lt;shop id&gt;</code>. All arguments besides the ID are optional:
<ul><li><code title="optional field &#39;from direction&#39;">[from direction]</code>: if specified, the player must be standing in this direction relative to the shop (one of <samp>down</samp>, <samp>up</samp>, <samp>left</samp>, <samp>right</samp>, or <samp>none</samp>). Setting this to <samp>none</samp> disables the requirement. The default for most vanilla shops is <samp>down</samp>.</li>
<li><code title="optional field &#39;open time&#39;">[open time]</code> and <code title="optional field &#39;close time&#39;">[close time]</code>: the start &amp; end times in 26-hour format when the shop is available. Interacting with the tile outside those times does nothing.</li>
<li><code title="optional field &#39;owner tile area&#39;">[owner tile area]</code>: if specified, the tile area which must contain one of the shop owners for the shop to be available. For a custom shop, these are defined by its <samp>ValidNPCs</samp> field. This can be specified in two forms: <samp><code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code></samp> for a single tile, or <samp><code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code> <code title="required field &#39;width&#39;">&lt;width&gt;</code> <code title="required field &#39;height&#39;">&lt;height&gt;</code></samp> for a multi-tile area.</li></ul>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action PlayEvent <code title="required field &#39;event id&#39;">&lt;event id&gt;</code> <code title="optional field &#39;check preconditions&#39;">[check preconditions]</code> <code title="optional field &#39;skip if seen&#39;">[skip if seen]</code></samp>
</td>
<td>Immediately start an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event</a>, subject to the conditions:
<ul><li><code title="optional field &#39;check preconditions&#39;">[check preconditions]</code>: whether to ignore the action if the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Event_preconditions" title="Modding:Event data">event's preconditions</a> don't match (one of <samp>true</samp> or <samp>false</samp>). Default true.</li>
<li><code title="optional field &#39;skip if seen&#39;">[skip if seen]</code>: whether to ignore the action if the player has already seen the given event. Default true.</li></ul>
<p>If the event is skipped, the action is silently ignored.
</p><p>For example, <code>Action PlayEvent 60367 false false</code> will replay the bus arrival event from the start of the game.
</p>
</td></tr></tbody></table>
</li>
<li>Added new <samp>TouchAction</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">tile properties</a>:
<table class="wikitable">

<tbody><tr>
<th>layer
</th>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction PlayEvent <code title="required field &#39;event id&#39;">&lt;event id&gt;</code> <code title="optional field &#39;check preconditions&#39;">[check preconditions]</code> <code title="optional field &#39;skip if seen&#39;">[skip if seen]</code> <code title="optional field &#39;fallback action&#39;">[fallback action]</code></samp>
</td>
<td>Equivalent to <samp>Action PlayEvent</samp>. If the event is skipped, you can optionally specify another action to call instead after the other parameters, like <code>TouchAction PlayEvent 60367 true true TouchAction PlayEvent 520702 false false</code> to play another event instead.
</td></tr></tbody></table></li>
<li>Removed <samp>TouchAction Bus</samp>, which wasn't used by the game.</li>
<li>Dropped support for non-string map &amp; tile properties. Properties set to <samp>bool</samp>, <samp>int</samp>, or <samp>float</samp> will be converted to <samp>string</samp> when the game loads them.</li>
<li>The <samp>NoSpawn</samp> tile property now allows <samp>false</samp> as a value (e.g. to disable a <samp>NoSpawn</samp> tile index property).</li>
<li>The <samp>Treasure</samp> tile property has a new <samp>Treasure Item <code title="required field &#39;item ID&#39;">&lt;item ID&gt;</code></samp> format which accepts a <a href="#Custom_items">qualified or unqualified item ID</a>.
</li></ul>
<h3><span id="Other_location/map_changes"></span><span class="mw-headline" id="Other_location.2Fmap_changes">Other location/map changes</span></h3>
<ul><li>Farm data:
<ul><li>Added <samp>SpawnMonstersByDefault</samp> field to <samp>Data/AdditionalFarms</samp> to set the default value of the 'spawn monsters at night' <a href="../../external.html?link=https://stardewvalleywiki.com/Options#Advanced_Game_Options" title="Options">advanced save option</a>.</li></ul></li>
<li>General location data:
<ul><li>All locations can now have animals. The <samp>IAnimalLocation</samp> is now obsolete and implemented by <samp>GameLocation</samp>.</li>
<li>Added new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fish_data" title="Modding:Fish data">fishing areas</a> to simplify compatibility between fish &amp; map mods (specifically for hilltop farm, wilderness farm, town, and desert).</li>
<li>Added validation for <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map properties and tile properties</a>. If the format is invalid, the game will now log a detailed error and skip it.</li>
<li>Added a descriptive error when a required location or layer isn't found. Mods can use <samp>map.RequireLayer</samp> and <samp>Game1.RequireLocation</samp> to get a location with similar error-checking.</li>
<li>Game logic which checks tile indexes is now more fault-tolerant, so it won't crash if an expected tile was edited.</li>
<li>Finished migrating <samp>DecoratableLocation</samp> flooring/wallpaper areas to string IDs (started in Stardew Valley 1.5.5).</li></ul></li>
<li>Location context data:
<ul><li>Building interiors now inherit their parent's location context by default.</li>
<li>Added <samp>Game1.locationContextData</samp> to cache the data from <samp>Data/LocationContexts</samp>.</li>
<li>Added constants for the vanilla context IDs like <samp>LocationContexts.IslandId</samp>.</li>
<li>Added validation for required location context IDs (and <samp>LocationContexts.Require(id)</samp> for mod logic).</li>
<li>Removed the <samp>Name</samp> field in <samp>Data/LocationContexts</samp>, which duplicated the ID.</li></ul></li></ul>
<ul>
<li>Added methods to simplify common operations:
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td rowspan="7"><samp>Building</samp>
</td>
<td><samp>GetParentLocation</samp>
</td>
<td>Get the location which contains this building.
</td></tr>
<tr>
<td><samp>IsInCurrentLocation</samp>
</td>
<td>Get whether the building is in the same location as the current player.
</td></tr>
<tr>
<td><samp>HasIndoors</samp>
</td>
<td>Get whether the building has an interior location.
</td></tr>
<tr>
<td><samp>GetIndoors</samp>
</td>
<td>Get the location within this building, if applicable.
</td></tr>
<tr>
<td><samp>HasIndoorsName</samp>
</td>
<td>Get whether the building has an interior location and its unique name matches the given value (like <code>building.HasIndoorsName("FarmHouse")</code>).
</td></tr>
<tr>
<td><samp>GetIndoorsName</samp>
</td>
<td>Get the unique name of the location within this building, if applicable.
</td></tr>
<tr>
<td>...
</td>
<td><i>see also <a href="#Other_building_changes">other building changes</a> for non-location methods.</i>
</td></tr>
<tr>
<td rowspan="7"><samp>Cabin</samp><br /><samp>FarmHouse</samp>
</td>
<td><samp>GetCellar</samp>
</td>
<td>Get the <a href="../../external.html?link=https://stardewvalleywiki.com/Cellar" class="mw-redirect" title="Cellar">cellar</a> location linked to this cabin, if any.
</td></tr>
<tr>
<td><samp>CanAssignFarmhand</samp><br /><samp>AssignFarmhand</samp>
</td>
<td><i>(Cabin only)</i> Check whether the cabin is available to assign to a farmhand, or perform the assignment.
</td></tr>
<tr>
<td><samp>HasOwner</samp>
</td>
<td>Get whether the home has an assigned player, regardless of whether they've finished creating their character.
</td></tr>
<tr>
<td><samp>OwnerId</samp>
</td>
<td>Get the unique ID of the player who owns this home, if any.
</td></tr>
<tr>
<td><samp>IsOwnedByCurrentPlayer</samp>
</td>
<td>Get whether the cabin belongs to the current player.
</td></tr>
<tr>
<td><samp>IsOwnerActivated</samp>
</td>
<td>Get whether the home has an assigned player and they've finished creating their character.
</td></tr>
<tr>
<td><samp>HasNpcSpouse</samp>
</td>
<td>Get whether the player who owns this home is married to any NPC (when used like <samp>HasNpcSpouse()</samp>) or a specific NPC (like <samp>HasNpcSpouse(name)</samp>). This also replaces <samp>shouldShowSpouseRoom()</samp>.
</td></tr>
<tr>
<td rowspan="2"><samp>Farm</samp>
</td>
<td><samp>GetStarterFarmhouseLocation</samp>
</td>
<td>Get the default tile position for the farmhouse. (See also <samp>farm.GetMainFarmHouseEntry()</samp>.)
</td></tr>
<tr>
<td><samp>GetStarterPetBowlLocation</samp>
</td>
<td>Get the default tile position for the pet bowl.
</td></tr>
<tr>
<td rowspan="14"><samp>GameLocation</samp>
</td>
<td><samp>AddDefaultBuildings</samp>
</td>
<td>Can be overridden to add custom buildings when the location is created and/or loaded. These can either be re-added whenever they're missing (like the vanilla farmhouse), or only built once on save creation (like the vanilla pre-built cabins).
<p>This replaces the former <samp>farm.AddModularShippingBin()</samp> method.
</p>
</td></tr>
<tr>
<td><samp>GetWeather</samp><br /><samp>IsDebrisWeatherHere</samp><br /><samp>IsLightningHere</samp><br /><samp>IsRainingHere</samp><br /><samp>IsSnowingHere</samp>
</td>
<td>Get the current weather in this location's context, regardless of whether the player is indoors and sheltered from it.
</td></tr>
<tr>
<td><samp>InIslandContext</samp><br /><samp>InValleyContext</samp>
</td>
<td>Get whether this location is within the <samp>Island</samp> or <samp>Default</samp> location context respectively.
</td></tr>
<tr>
<td><samp>GetLocationContextId</samp>
</td>
<td>Get the ID of the location context in <samp>Data/LocationContexts</samp> which contains this building.
</td></tr>
<tr>
<td><samp>GetContainingBuilding</samp>
</td>
<td>Get the building instance which contains this location (like the cabin for a cabin interior), if applicable.
</td></tr>
<tr>
<td><samp>GetParentLocation</samp>
</td>
<td>Get the parent location which contains this one (like the farm for a cabin interior), or <samp>null</samp> if it has no parent.
</td></tr>
<tr>
<td><samp>GetRootLocation</samp>
</td>
<td>Get the parent location which contains this one (like the farm for a cabin interior), or the location itself if it has no parent.
</td></tr>
<tr>
<td><samp>GetInstancedBuildingInteriors</samp>
</td>
<td>Get all building interiors within this location which are instanced to the building (i.e. not in <samp>Game1.locations</samp> separately).
</td></tr>
<tr>
<td><samp>GetMapPropertySplitBySpaces</samp><br /><samp>GetTilePropertySplitBySpaces</samp>
</td>
<td>Get the value of a map/tile property and split it into individual words. If the map/tile property isn't defined, returns an empty array.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">GetMapPropertySplitBySpaces</span><span class="p">(</span><span class="s">&quot;ScreenshotRegion&quot;</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>HasMapPropertyWithValue</samp>
</td>
<td>Get whether a map property is defined and has a non-empty value.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">canUseCasks</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">HasMapPropertyWithValue</span><span class="p">(</span><span class="s">&quot;CanCaskHere&quot;</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGetMapProperty</samp>
</td>
<td>Get a map property value as a string, if it's defined.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">TryGetMapProperty</span><span class="p">(</span><span class="s">&quot;Warps&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">warps</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGetMapPropertyAs</samp>
</td>
<td>Get a map property and parse it into into a <samp>Point</samp>, <samp>Rectangle</samp>, or <samp>Vector2</samp> value.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(!</span><span class="k">this</span><span class="p">.</span><span class="n">TryGetMapPropertyAs</span><span class="p">(</span><span class="s">&quot;MailboxLocation&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">Point</span> <span class="n">position</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Point</span><span class="p">(</span><span class="m">68</span><span class="p">,</span> <span class="m">16</span><span class="p">);</span> <span class="c1">// default value</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>removeObjectsAndSpawned</samp>
</td>
<td>Remove all objects, bushes, resource clumps, and terrain features within a tile area.
</td></tr>
<tr>
<td><samp>OnBuildingConstructed</samp><br /><samp>OnBuildingMoved</samp><br /><samp>OnBuildingDemolished</samp>
</td>
<td>These methods are called for all players when any player constructs, moves, or demolishes a building.
</td></tr>
<tr>
<td rowspan="3"><samp>LibraryMuseum</samp>
</td>
<td><samp>HasDonatedArtifacts()</samp>
</td>
<td>Get whether any items have been donated to the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a>.
</td></tr>
<tr>
<td><samp>HasDonatedArtifactAt(tile)</samp>
</td>
<td>Get whether any donated item is currently placed at the given tile position within the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a>.
</td></tr>
<tr>
<td><samp>HasDonatedArtifact(itemId)</samp>
</td>
<td>Get whether an artifact with the given qualified or unqualified item ID has been donated to the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a>.
</td></tr>
<tr>
<td rowspan="2"><samp>MineShaft</samp>
</td>
<td><samp>GetLevelName</samp>
</td>
<td>Get the location name for a generated <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">mine</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Skull_Cavern" title="Skull Cavern">Skull Cavern</a> level.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">locationName</span> <span class="p">=</span> <span class="n">MineShaft</span><span class="p">.</span><span class="n">GetLevelName</span><span class="p">(</span><span class="m">10</span><span class="p">);</span> <span class="c1">// returns &quot;UndergroundMine10&quot;</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">warpFarmer</span><span class="p">(</span><span class="n">locationName</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>IsGeneratedLevel</samp>
</td>
<td>Get whether a location or location name is a generated <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">mine</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Skull_Cavern" title="Skull Cavern">Skull Cavern</a> level.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">locationName</span> <span class="p">=</span> <span class="s">&quot;UndergroundMine10&quot;</span><span class="p">;</span>
<span class="kt">bool</span> <span class="n">isMine</span> <span class="p">=</span> <span class="n">MineShaft</span><span class="p">.</span><span class="n">IsGeneratedLevel</span><span class="p">(</span><span class="n">locationName</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">level</span><span class="p">);</span> <span class="c1">// returns true, 10</span>
</pre></div>
</td></tr>
<tr>
<td><samp>VolcanoDungeon</samp>
</td>
<td><samp>GetLevelName</samp><br /><samp>IsGeneratedLevel</samp>
</td>
<td>Equivalent to the matching <samp>MineShaft</samp> methods, but for the <a href="../../external.html?link=https://stardewvalleywiki.com/Volcano_Dungeon" title="Volcano Dungeon">Volcano Dungeon</a>.
</td></tr></tbody></table>
</li>
</ul>
<ul><li><samp>MineShaft.tryToAddMonster</samp> now returns whether a monster was added.</li>
<li>Fixed <samp>location.refurbishMapPortion</samp> copying <samp>Back</samp> source properties to the <samp>Building</samp> target layer.</li></ul>
<h2><span id="What's_new_for_buildings"></span><span class="mw-headline" id="What.27s_new_for_buildings">What's new for buildings</span></h2>
<h3><span class="mw-headline" id="Custom_buildings">Custom buildings</span></h3>
<p>You can now add custom buildings by editing the <samp>Data/Buildings</samp> asset. This consists of a string → model lookup, where...
</p>
<ul><li>The key is a unique building ID. The ID should only contain alphanumeric/underscore/dot characters, and should ideally be prefixed with your mod ID like <samp>Example.ModId_BuildingName</samp>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<h4><span class="mw-headline" id="Required_fields">Required fields</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Name</samp><br /><samp>Description</samp>
</td>
<td>A <a href="#Tokenizable_string_format">tokenizable string</a> for the display name and description (e.g. shown in the construction menu).
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture under the game's Content folder.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Construction">Construction</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Builder</samp>
</td>
<td><i>(Optional)</i> The NPC from whom you can request construction. The vanilla values are <a href="../../external.html?link=https://stardewvalleywiki.com/Carpenter%27s_Shop" title="Carpenter&#39;s Shop"><samp>Robin</samp></a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Wizard%27s_Tower#Buildings" title="Wizard&#39;s Tower"><samp>Wizard</samp></a>, but you can specify a different name if a C# mod opens a construction menu for them. Defaults to <samp>Robin</samp>. If omitted, it won't appear in any menu.
</td></tr>
<tr>
<td><samp>BuildCost</samp>
</td>
<td><i>(Optional)</i> The gold cost to construct the building. Defaults to <span style="display: none;">data-sort-value="0"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, /mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />0g</span>.
</td></tr>
<tr>
<td><samp>BuildMaterials</samp>
</td>
<td><i>(Optional)</i> The materials you must provide to start construction, as a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td><i>(Optional)</i> A key which uniquely identifies this entry within the current list. The ID should only contain alphanumeric/underscore/dot characters. Defaults to the <samp>ItemId</samp> if not specified.
</td></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td>The required item ID (qualified or unqualified).
</td></tr>
<tr>
<td><samp>Amount</samp>
</td>
<td>The number of the item required.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>BuildDays</samp>
</td>
<td><i>(Optional)</i> The number of days needed to complete construction (e.g. <samp>1</samp> for a building completed the next day). If set to 0, construction finishes instantly. Defaults to 0.
</td></tr>
<tr>
<td><samp>BuildCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether the building should be available in the construction menu. Defaults to always available.
</td></tr>
<tr>
<td><samp>AdditionalPlacementTiles</samp>
</td>
<td><i>(Optional)</i> The extra tiles to treat as part of the building when placing it through the construction menu. For example, the farmhouse uses this to make sure the stairs are clear. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>TileArea</samp>
</td>
<td>The tile area relative to the top-left corner of the building, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields.
</td></tr>
<tr>
<td><samp>OnlyNeedsToBePassable</samp>
</td>
<td><i>(Optional)</i> Whether this area allows tiles that would normally not be buildable, so long as they are passable. For example, this is used to ensure that an entrance is accessible. Default false.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>IndoorItems</samp>
</td>
<td><i>(Optional)</i> The items to place in the building interior when it's constructed or upgraded. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A key which uniquely identifies this entry within the current list. The ID should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_EntryId</samp>.
</td></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td>The <a href="#Custom_items">qualified item ID</a> for the item to place.
</td></tr>
<tr>
<td><samp>Tile</samp>
</td>
<td>The tile position at which to place the item, specified as an object with <samp>X</samp> and <samp>Y</samp> fields.
</td></tr>
<tr>
<td><samp>Indestructible</samp>
</td>
<td><i>(Optional)</i> Whether to prevent the player from destroying, picking up, or moving the item. Default false.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>MagicalConstruction</samp>
</td>
<td><i>(Optional)</i> Whether the building is magical. This changes the carpenter menu to a mystic theme while this building's blueprint is selected, and completes the construction instantly when placed.
</td></tr>
<tr>
<td><samp>AddMailOnBuild</samp>
</td>
<td><i>(Optional)</i> A list of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">letter IDs</a> to send to all players when the building is constructed for the first time.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Upgrades_2">Upgrades</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>BuildingToUpgrade</samp>
</td>
<td><i>(Optional)</i> The ID of the building for which this is an upgrade, or omit to allow constructing it as a new building. For example, the <a href="../../external.html?link=https://stardewvalleywiki.com/Coop" title="Coop">Big Coop</a> sets this to <samp>"Coop"</samp>. Any numbers of buildings can be an upgrade for the same building, in which case the player can choose one upgrade path.
</td></tr>
<tr>
<td><samp>IndoorItemMoves</samp>
</td>
<td><i>(Optional)</i> When applied as an upgrade to an existing building, the placed items in its interior to move when transitioning to the new map. This is a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A key which uniquely identifies this entry within the current list. The ID should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_EntryId</samp>.
</td></tr>
<tr>
<td><samp>Source</samp>
</td>
<td>The tile position on which any item will be moved.
</td></tr>
<tr>
<td><samp>Destination</samp>
</td>
<td>The tile position to which to move the item.
</td></tr>
<tr>
<td><samp>Size</samp>
</td>
<td><i>(Optional)</i> The tile size of the area to move, specified as a model with <samp>X</samp> and <samp>Y</samp> fields. Defaults to a 1×1 area. If this is multiple tiles, the <samp>Source</samp> and <samp>Destination</samp> specify the top-left coordinate of the area.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>UpgradeSignTile</samp>
</td>
<td><i>(Optional)</i> The tile position relative to the top-left corner of the building where the upgrade sign will be placed when Robin is building an upgrade, in the form <samp>"<code title="required field &#39;x&#39;">&lt;x&gt;</code>, <code title="required field &#39;y&#39;">&lt;y&gt;</code>"</samp>. Defaults to approximately <samp>"5, 1"</samp> if the building interior type is <samp>Shed</samp>, else <samp>"0, 0"</samp>.
</td></tr>
<tr>
<td><samp>UpgradeSignHeight</samp>
</td>
<td><i>(Optional)</i> The pixel height of the upgrade sign when Robin is building an upgrade. Defaults to 0.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Exterior_behavior">Exterior behavior</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Size</samp>
</td>
<td><i>(Optional)</i> The building's width and height when constructed, measured in tiles. Defaults to a 1 x 1 area.
</td></tr>
<tr>
<td><samp>CollisionMap</samp>
</td>
<td><i>(Optional)</i> An ASCII text block which indicates which of the building's tiles the players can walk onto, where each character can be <samp>X</samp> (blocked) or <samp>O</samp> (passable). Defaults to all tiles blocked.
<p>For example, a <a href="../../external.html?link=https://stardewvalleywiki.com/Stable" title="Stable">stable</a> covers a 2x4 tile area with the front two tiles passable:
</p>
<pre>XXXX
XOOX</pre>
<p>When the collision map is parsed, leading/trailing whitespace is trimmed (both for the entire map and for each line). In JSON, you can specify it in two forms:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// single line with \n line breaks</span>
<span class="s2">&quot;CollisionMap&quot;</span><span class="o">:</span> <span class="s2">&quot;XXXX\nXOOX&quot;</span>

<span class="c1">// multi-line with optional indentation</span>
<span class="s2">&quot;CollisionMap&quot;</span><span class="o">:</span> <span class="s2">&quot;</span>
<span class="s2">    XXXX</span>
<span class="s2">    XOOX</span>
<span class="s2">&quot;</span>
</pre></div>
</td></tr>
<tr>
<td><samp>HumanDoor</samp>
</td>
<td><i>(Optional)</i> The position of the door that can be clicked to warp into the building interior. This is measured in tiles relative to the top-left corner tile. Defaults to disabled.
</td></tr>
<tr>
<td><samp>AnimalDoor</samp>
</td>
<td><i>(Optional)</i> The position and size of the door that animals use to enter/exit the building, if the building interior is an animal location, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. This is measured in tiles relative to the top-left corner tile. Defaults to disabled.
</td></tr>
<tr>
<td><samp>AnimalDoorOpenDuration</samp><br /><samp>AnimalDoorCloseDuration</samp>
</td>
<td><i>(Optional)</i> The duration of the open/close animation for the animal door, measured in milliseconds. If omitted, the door switches to the open/closed state instantly.
</td></tr>
<tr>
<td><samp>AnimalDoorOpenSound</samp><br /><samp>AnimalDoorCloseSound</samp>
</td>
<td><i>(Optional)</i> The sound which is played once each time the animal door is opened/closed. Disabled by default.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Exterior_appearance">Exterior appearance</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>SourceRect</samp>
</td>
<td><i>(Optional)</i> The building's pixel area within the <samp>Texture</samp>, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. Defaults to the entire texture.
</td></tr>
<tr>
<td><samp>Skins</samp>
</td>
<td><i>(Optional)</i> The appearances which can be selected from Robin's menu (like stone/plank/log <a href="../../external.html?link=https://stardewvalleywiki.com/Cabin" title="Cabin">cabins</a>), in addition to the default appearance based on <samp>Texture</samp>. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A key which uniquely identifies the skin. The ID should only contain alphanumeric/underscore/dot characters. For custom skins, it should be prefixed with your mod ID like <samp>Example.ModId_SkinName</samp>.
</td></tr>
<tr>
<td><samp>Name</samp><br /><samp>Description</samp>
</td>
<td><a href="#Tokenizable_string_format">Tokenizable strings</a> for the skin's display name and description.
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture under the game's Content folder.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this skin should be available to apply. This doesn't change buildings which already have it applied. Defaults to always true.
</td></tr>
<tr>
<td><samp>BuildDays</samp><br /><samp>BuildCost</samp><br /><samp>BuildMaterials</samp>
</td>
<td><i>(Optional)</i> If set, overrides the equivalent field in the building data.
</td></tr>
<tr>
<td><samp>ShowAsSeparateConstructionEntry</samp>
</td>
<td><i>(Optional)</i> Whether this skin should be shown as a separate building option in the construction menu (like cabins). Default false.
</td></tr>
<tr>
<td><samp>Metadata</samp>
</td>
<td><i>(Optional)</i> Equivalent to the <samp>Metadata</samp> field on the building. Properties defined in this field are added to the building's metadata when this skin is active, overwriting the previous property with the same name if applicable. Default none.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>FadeWhenBehind</samp>
</td>
<td><i>(Optional)</i> Whether the building should become semi-transparent when the player is behind it. Default true.
</td></tr>
<tr>
<td><samp>DrawOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset applied to the building sprite's placement in the world. Default 0.
</td></tr>
<tr>
<td><samp>SeasonOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset to apply each season. This is applied to the <samp>SourceRect</samp> position by multiplying the offset by 0 (spring), 1 (summer), 2 (fall), or 3 (winter). Default 0, so all seasons use the same source rect.
</td></tr>
<tr>
<td><samp>SortTileOffset</samp>
</td>
<td><i>(Optional)</i> A Y tile offset applied when figuring out render layering. For example, a value of <samp>2.5</samp> will treat the building as if it was 2.5 tiles further up the screen for the purposes of layering. Default 0.
</td></tr>
<tr>
<td><samp>DrawLayers</samp>
</td>
<td><i>(Optional)</i> A list of textures to draw over or behind the building, with support for conditions and animations. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A key which uniquely identifies this entry within the current list. The ID should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_DrawLayerId</samp>.
</td></tr>
<tr>
<td><samp>SourceRect</samp>
</td>
<td>The pixel area within the <samp>texture</samp> to draw, formatted like <samp>"<code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code> <code title="required field &#39;width&#39;">&lt;width&gt;</code> <code title="required field &#39;height&#39;">&lt;height&gt;</code>"</samp>. If the overlay is animated via <samp>FrameCount</samp>, this is the area of the first frame.
</td></tr>
<tr>
<td><samp>DrawPosition</samp>
</td>
<td>The tile position at which to draw the top-left corner of the texture, relative to the building's top-left corner tile.
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td><i>(Optional)</i> The asset name of the texture to draw. Defaults to the building's default <samp>Texture</samp> field.
</td></tr>
<tr>
<td><samp>DrawInBackground</samp>
</td>
<td><i>(Optional)</i> Whether to draw the texture behind the building sprite (i.e. underlay) instead of over it.
</td></tr>
<tr>
<td><samp>SortTileOffset</samp>
</td>
<td><i>(Optional)</i> A Y tile offset applied when figuring out render layering. For example, a value of <samp>2.5</samp> will treat the texture as if it was 2.5 tiles further up the screen for the purposes of layering. Default 0.
</td></tr>
<tr>
<td><samp>OnlyDrawIfChestHasContents</samp>
</td>
<td><i>(Optional)</i> The ID of a chest defined in the <samp>Chests</samp> field which must contain items. If it's empty, this overlay won't be rendered. Default none.
</td></tr>
<tr>
<td><samp>FrameCount</samp><br /><samp>FramesPerRow</samp><br /><samp>FrameDuration</samp>
</td>
<td><i>(Optional)</i> If <samp>FrameCount</samp> is more than one, the building overlay will be animated automatically. For each frame, the <samp>SourceRect</samp> will be offset by its <samp>Width</samp> to the right up to <samp>FramesPerRow - 1</samp> times, and then down by its <samp>Height</samp>. Each frame will be rendered on-screen for <samp>FrameDuration</samp> milliseconds before switching to the next frame.
<p>For example, if you set <samp>FrameCount</samp> to 6 and <samp>FramesPerRow</samp> to 3, the building will expect the frames to be laid out like this in the spritesheet (where frame 1 matches <samp>SourceRect</samp>):
</p>
<pre>┌───┬───┬───┐
│ 1 │ 2 │ 3 │
├───┼───┼───┤
│ 4 │ 5 │ 6 │
└───┴───┴───┘
</pre>
</td></tr>
<tr>
<td><samp>AnimalDoorOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset applied to the draw layer when the animal door is open. While the door is opening, the percentage open is applied to the offset (e.g. 50% open = 50% offset).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>DrawShadow</samp>
</td>
<td><i>(Optional)</i> Whether to draw an automatic shadow along the bottom edge of the building's sprite. Default true.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Interior">Interior</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>IndoorMap</samp>
</td>
<td><i>(Optional)</i> The name of the map asset under <samp>Maps</samp> to load for the building interior. For example, <samp>"Shed"</samp> will load the <a href="../../external.html?link=https://stardewvalleywiki.com/Shed" title="Shed">shed</a>'s <samp>Maps/Shed</samp> map.
</td></tr>
<tr>
<td><samp>IndoorMapType</samp>
</td>
<td><i>(Optional)</i> The full name of the C# location class which will manage the building's interior location. This must be one of the vanilla types to avoid a crash when saving. There are too many to list here, but the most useful types are likely...
<ul><li><samp>StardewValley.AnimalHouse</samp>;</li>
<li><samp>StardewValley.Locations.Cabin</samp>;</li>
<li><samp>StardewValley.Locations.Cellar</samp>;</li>
<li><samp>StardewValley.Locations.DecoratableLocation</samp>;</li>
<li><samp>StardewValley.Locations.FarmCave</samp>;</li>
<li><samp>StardewValley.Locations.FarmHouse</samp>;</li>
<li><samp>StardewValley.Shed</samp>;</li>
<li>and <samp>StardewValley.SlimeHutch</samp>.</li></ul>
<p>Defaults to the generic <samp>StardewValley.GameLocation</samp> class.
</p>
</td></tr>
<tr>
<td><samp>NonInstancedIndoorLocation</samp>
</td>
<td><i>(Optional)</i> The name of the existing global location to treat as the building's interior, like <samp>FarmHouse</samp> and <samp>Greenhouse</samp> for their buildings.
<p>Each location can only be used by one building. If the location is already in use (e.g. because the player has two of this building), each subsequent building will use the <samp>IndoorMap</samp> and <samp>IndoorMapType</samp> instead. For example, the first greenhouse will use the global <samp>Greenhouse</samp> location, and any subsequent greenhouse will use a separate instanced location.
</p>
</td></tr>
<tr>
<td><samp>MaxOccupants</samp>
</td>
<td><i>(Optional)</i> The maximum number of animals who can live in this building.
</td></tr>
<tr>
<td><samp>AllowAnimalPregnancy</samp>
</td>
<td><i>(Optional)</i> Whether animals can get pregnant and produce offspring in this building. Default false.
</td></tr>
<tr>
<td><samp>ValidOccupantTypes</samp>
</td>
<td><i>(Optional)</i> A list of building IDs whose animals to allow in this building too. For example, <code>[ "Barn", "Coop" ]</code> will allow <a href="../../external.html?link=https://stardewvalleywiki.com/Barn" title="Barn">barn</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Coop" title="Coop">coop</a> animals in this building. Default none.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Item_processing">Item processing</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>HayCapacity</samp>
</td>
<td><i>(Optional)</i> The amount of hay that can be stored in this building. If built on the <a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm" title="The Farm">farm</a>, this works just like <a href="../../external.html?link=https://stardewvalleywiki.com/Silo" title="Silo">silos</a> and contributes to the farm's available hay.
</td></tr>
<tr>
<td><samp>ItemConversions</samp>
</td>
<td><i>(Optional)</i> The item processing rules which take input items and convert them into output items using the inventories defined by <samp>Chests</samp>. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A key which uniquely identifies this rule within the current list. The ID should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_RuleId</samp>.
</td></tr>
<tr>
<td><samp>RequiredTags</samp>
</td>
<td>A list of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">context tags</a> to match against an input item. An item must have <i>all</i> of these tags to be accepted.
</td></tr>
<tr>
<td><samp>SourceChest</samp>
</td>
<td>The ID of the inventory defined in <samp>Chests</samp> from which to take input items.
</td></tr>
<tr>
<td><samp>DestinationChest</samp>
</td>
<td>The ID of the inventory defined in <samp>Chests</samp> in which to store output items.
</td></tr>
<tr>
<td><samp>ProducedItems</samp>
</td>
<td>The output items produced when an input item is converted. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported by machine output.
<p>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that the item will be produced, as a value between 0 (never drops) and 1 (always drops). Default 1 (100% chance).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>RequiredCount</samp>
</td>
<td><i>(Optional)</i> The number of the input item to consume. Default 1.
</td></tr>
<tr>
<td><samp>MaxDailyConversions</samp>
</td>
<td><i>(Optional)</i> The maximum number of the input item which can be processed each day. Each conversion rule has its own separate maximum (e.g. if you have two rules each with a max of 1, then you can convert one of each daily). Set to -1 to allow unlimited conversions. Default 1.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Chests</samp>
</td>
<td><i>(Optional)</i> The input/output inventories that can be accessed from a tile on the building exterior. The allowed items are defined by the separate <samp>ItemConversions</samp> field. This is a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A key which uniquely identifies this chest within the current list. The ID should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_ActionId</samp>.
<p>This is referenced from the <samp>ItemConversions</samp> field.
</p>
</td></tr>
<tr>
<td><samp>Type</samp>
</td>
<td>The inventory type. This must be one of:
<ul><li><samp>Chest</samp>: show a normal chest UI on click.</li>
<li><samp>Collect</samp>: provides items for the player to collect. Clicking the tile will do nothing (if empty), grab the item directly (if it only contains one item), else show a grab-only inventory UI.</li>
<li><samp>Load</samp>: lets the player add items for the building to process.</li></ul>
</td></tr>
<tr>
<td><samp>Sound</samp>
</td>
<td><i>(Optional)</i> The sound to play once when the player clicks the chest.
</td></tr>
<tr>
<td><samp>InvalidItemMessage</samp><br /><samp>InvalidCountMessage</samp><br /><samp>ChestFullMessage</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> to show when the player tries to add an item to the chest when...
<ul><li>it isn't a supported item;</li>
<li>it's supported but they don't have enough in their inventory;</li>
<li>the chest has no more room to accept it.</li></ul>
<p>If omitted, the player interaction is ignored with no message shown.
</p>
</td></tr>
<tr>
<td><samp>InvalidItemMessageCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether <samp>InvalidItemMessage</samp> should be shown. This can use item-related queries like <samp>ITEM_TYPE</samp>. Defaults to always true.
</td></tr>
<tr>
<td><samp>DisplayTile</samp>
</td>
<td><i>(Optional)</i> The chest's position on the building exterior, measured in tiles from the top-left corner of the building, specified in the form <samp>"<code title="required field &#39;x&#39;">&lt;x&gt;</code>, <code title="required field &#39;y&#39;">&lt;y&gt;</code>"</samp>. This affects the position of the 'item ready to collect' bubble. If omitted, the bubble is disabled.
</td></tr>
<tr>
<td><samp>DisplayHeight</samp>
</td>
<td><i>(Optional)</i> If <samp>DisplayTile</samp> is set, the chest's tile height like <samp>1.5</samp>.
</td></tr></tbody></table>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Tile_interactions">Tile interactions</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ActionTiles</samp>
</td>
<td><i>(Optional)</i> A list of tiles which the player can click to trigger an <samp>Action</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map tile property</a>. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A key which uniquely identifies this entry within the current list. The ID should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_ActionId</samp>.
</td></tr>
<tr>
<td><samp>Tile</samp>
</td>
<td>The tile position, relative to the building's top-left corner tile.
</td></tr>
<tr>
<td><samp>Action</samp>
</td>
<td>The <a href="#Tokenizable_string_format">tokenizable string</a> for the action to perform, excluding the <samp>Action</samp> prefix. For example, <samp>"Dialogue Hi there @!"</samp> to show a messagebox like "<i>Hi there &lt;player name&gt;!</i>". The tokenizable string is expected before the action is raised. See the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps#Tile_properties_2" title="Modding:Maps">list of tile properties</a> for useful <samp>Action</samp> values.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>DefaultAction</samp>
</td>
<td><i>(Optional)</i> The default tile action if the clicked tile isn't in <samp>ActionTiles</samp>. Default none.
</td></tr>
<tr>
<td><samp>TileProperties</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map tile properties</a> to set. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A key which uniquely identifies this entry within the current list. The ID should only contain alphanumeric/underscore/dot characters. For custom entries, this should be prefixed with your mod ID like <samp>Example.ModId_EntryId</samp>.
</td></tr>
<tr>
<td><samp>Name</samp>
</td>
<td>The tile property name to set.
</td></tr>
<tr>
<td><samp>Value</samp>
</td>
<td><i>(Optional)</i> The tile property value to set, or omit to set a null value.
</td></tr>
<tr>
<td><samp>Layer</samp>
</td>
<td>The name of the map layer whose tiles to change.
</td></tr>
<tr>
<td><samp>TileArea</samp>
</td>
<td>The tiles to which to add the property, relative to the top-left corner of the building's collision box. This is specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>AdditionalTilePropertyRadius</samp>
</td>
<td><i>(Optional)</i> When checking whether the player clicked on a <samp>TileProperties</samp> tile, an added distance around the building at which tile locations may be placed. Default 0, so only tile properties within the normal building bounds will work.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Advanced_2">Advanced</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Metadata</samp>
</td>
<td><i>(Optional)</i> A list of custom properties applied to the building, which can optionally be overridden per-skin in the <samp>Skins</samp> field. Default none.
<p>The base game recognizes these properties:
</p>
<table class="wikitable">

<tbody><tr>
<th>property
</th>
<th>description
</th></tr>
<tr>
<td><samp>ChimneyPosition: <code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code></samp>
</td>
<td><i>(Optional)</i> The pixel position at which to place a chimney on the building exterior, relative to the top-left corner of the sprite. This will apply the same logic as the farmhouse chimney (e.g. producing smoke if there's a lit fireplace inside the building).
</td></tr>
<tr>
<td><samp>ChimneyPosition<code title="optional field &#39;upgrade level&#39;">[upgrade level]</code>: <code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code></samp>
</td>
<td><i>(Optional, for farmhouses/cabins only)</i> Override <samp>ChimneyPosition</samp> for the given upgrade level, starting from 0 for the initial farmhouse/cabin. If there's no override for the current upgrade level, the highest override for a lower upgrade level is used (if any). For example, <samp>ChimneyPosition3</samp> would be used for the third house upgrade (and the fourth if there's no <samp>ChimneyPosition4</samp>).
</td></tr></tbody></table>
<p>This can also contain arbitrary custom properties, which C# mods can read using <samp>building.GetMetadata(key)</samp>.
</p>
</td></tr>
<tr>
<td><samp>BuildingType</samp>
</td>
<td><i>(Optional)</i> The full name of the C# type to instantiate for the building instance. Defaults to a generic <samp>Building</samp> instance.
<p><b>⚠ Caution:</b> this is meant to support vanilla building types like <samp>StardewValley.Shed</samp>. Setting this to a non-vanilla type will cause a crash when it's written to the save file, and may cause crashes in multiplayer. If you need custom behavior, consider handling it in C# based on the building type instead of creating a custom subclass; otherwise you'll need a framework mod like <a rel="nofollow" class="external text" href="../../external.html?link=https://www.nexusmods.com/stardewvalley/mods/1348">SpaceCore</a> to handle serialization and multiplayer sync.
</p>
</td></tr>
<tr>
<td><samp>ModData</samp>
</td>
<td><i>(Optional)</i> A string → string lookup of arbitrary <samp>modData</samp> values to attach to the building when it's constructed.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Build_anywhere">Build anywhere</span></h3>
<p>Buildings and animals are no longer hardcoded to the <a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm" title="The Farm">farm</a> location (except <a href="../../external.html?link=https://stardewvalleywiki.com/Cabin" title="Cabin">cabins</a> and the <a href="../../external.html?link=https://stardewvalleywiki.com/Farmhouse" title="Farmhouse">farmhouse</a> which still are). You can allow building construction for any location using the <a href="#Map.2Ftile_property_changes">new <samp>CanBuildHere</samp> and related map properties</a>. The game will adjust accordingly (e.g. Robin will let you choose where to construct the building).
</p>
<h3><span class="mw-headline" id="Other_building_changes">Other building changes</span></h3>
<dl><dd><i>See also: <a href="#Other_location.2Fmap_changes">other location changes</a> for location-related building changes.</i></dd></dl>
<ul><li>Building display names &amp; descriptions are now in <samp>Strings/Buildings</samp> for reuse.</li>
<li>Removed <samp>Data/Blueprints</samp>. This has been replaced by <samp>Data/Buildings</samp> (building data) and <samp>Strings/Buildings</samp> (display names &amp; descriptions).</li></ul>
<ul>
<li>Added methods to simplify common operations:
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td rowspan="5"><samp>Building</samp>
</td>
<td><samp>CreateInstanceFromId</samp>
</td>
<td>Create a building instance from its type ID in <samp>Data/Buildings</samp>. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Building</span> <span class="n">shippingBin</span> <span class="p">=</span> <span class="n">Building</span><span class="p">.</span><span class="n">CreateInstanceFromId</span><span class="p">(</span><span class="s">&quot;Shipping Bin&quot;</span><span class="p">,</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">Zero</span><span class="p">);</span> <span class="c1">// creates an instance of StardewValley.Buildings.ShippingBin</span>
</pre></div>
</td></tr>
<tr>
<td><samp>GetMetadata</samp>
</td>
<td>Get a value from <a href="#Custom_buildings">the <samp>Metadata</samp> field in <samp>Data/Buildings</samp></a> for this building.
</td></tr>
<tr>
<td><samp>ReloadBuildingData</samp>
</td>
<td>Apply the latest data in <samp>Data/Buildings</samp> to this building.
</td></tr>
<tr>
<td><samp>FinishConstruction</samp>
</td>
<td>If the building is being constructed or upgrade, instantly finish doing so.
</td></tr>
<tr>
<td><samp>UpdateTransparency</samp>
</td>
<td>Update the building transparency on tick for the local player's position.
<p>This method mainly exists to let mods override/patch the transparency logic.
</p>
</td></tr></tbody></table>
</li>
</ul>
<ul><li>Added building <samp>id</samp> field, which uniquely identifies each building in the world.</li></ul>
<h2><span id="What's_new_for_NPCs"></span><span class="mw-headline" id="What.27s_new_for_NPCs">What's new for NPCs</span></h2>
<h3><span class="mw-headline" id="Custom_NPCs">Custom NPCs</span></h3>
<p><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:NPC_data" title="Modding:NPC data">Custom NPC data</a> has been overhauled in 1.6. The new <samp>Data/Characters</samp> asset (which replaces <samp>Data/NPCDispositions</samp>) uses a data model format that's easier to edit and understand, and has a lot of fields to customize previously-hardcoded data.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is the unique internal NPC name.</li>
<li>The value is a model with the following fields.</li></ul>
<dl style="margin-left: 2em;">
<dt>Basic info:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="#Tokenizable_string_format">tokenizable string</a> for the NPC's display name.
</td></tr>
<tr>
<td><samp>Language</samp>
</td>
<td><i>(Optional)</i> The language spoken by the NPC. One of <samp>Default</samp> (the default language understood by the player) or <samp>Dwarvish</samp> (which the player can only understand after finding the <a href="../../external.html?link=https://stardewvalleywiki.com/Dwarvish_Translation_Guide" title="Dwarvish Translation Guide">Dwarvish translation guide</a>). Default <samp>Default</samp>.
</td></tr>
<tr>
<td><samp>Gender</samp>
</td>
<td><i>(Optional)</i> The NPC's gender identity. One of <samp>Female</samp>, <samp>Male</samp>, or <samp>Undefined</samp>. Default <samp>Undefined</samp>.
</td></tr>
<tr>
<td><samp>Age</samp>
</td>
<td><i>(Optional)</i> The general age of the NPC. One of <samp>Child</samp>, <samp>Teen</samp>, or <samp>Adult</samp>. Default <samp>Adult</samp>.
<p>This affects generated dialogue lines (e.g. a child might say "stupid" and an adult might say "depressing"), generic dialogue (e.g. a child might respond to dumpster diving with "<i>Eww... What are you doing?</i>" and a teen would say "<i>Um... Why are you digging in the trash?</i>"), and the gift they choose as <a href="../../external.html?link=https://stardewvalleywiki.com/Feast_of_the_Winter_Star" title="Feast of the Winter Star">Feast of the Winter Star</a> gift-giver. Children are also excluded from item delivery quests.
</p>
</td></tr>
<tr>
<td><samp>Manner</samp>
</td>
<td><i>(Optional)</i> A measure of the character's general politeness, which affects some generic dialogue lines. One of <samp>Neutral</samp>, <samp>Polite</samp>, or <samp>Rude</samp>. Default <samp>Neutral</samp>.
</td></tr>
<tr>
<td><samp>SocialAnxiety</samp>
</td>
<td><i>(Optional)</i> A measure of the character's comfort with social situations, which affects some generic dialogue lines. One of <samp>Neutral</samp>, <samp>Outgoing</samp>, or <samp>Shy</samp>. Default <samp>Neutral</samp>.
</td></tr>
<tr>
<td><samp>Optimism</samp>
</td>
<td><i>(Optional)</i> A measure of the character's overall optimism. One of <samp>Neutral</samp>, <samp>Negative</samp>, or <samp>Positive</samp>. Default <samp>Neutral</samp>.
</td></tr>
<tr>
<td><samp>BirthSeason</samp>
</td>
<td><i>(Optional if non-social)</i> The season name (case-sensitive) for the NPC's birthday. One of <samp>spring</samp>, <samp>summer</samp>, <samp>fall</samp>, or <samp>winter</samp>. Default none.
</td></tr>
<tr>
<td><samp>BirthDay</samp>
</td>
<td><i>(Optional if non-social)</i> The day number for the NPC's birthday. Default 0.
</td></tr>
<tr>
<td><samp>HomeRegion</samp>
</td>
<td><i>(Optional)</i> The region of the world in which the NPC lives (one of <samp>Desert</samp>, <samp>Town</samp>, or <samp>Other</samp>). For example, only <samp>Town</samp> NPCs are counted for the introductions <a href="../../external.html?link=https://stardewvalleywiki.com/Quests#List_of_Story_Quests" title="Quests">quest</a>, can be selected as a secret santa for the <a href="../../external.html?link=https://stardewvalleywiki.com/Feast_of_the_Winter_Star" title="Feast of the Winter Star">Feast of the Winter Star</a>, or get a friendship boost from the <a href="../../external.html?link=https://stardewvalleywiki.com/Luau" title="Luau">Luau</a>. Default <samp>Other</samp>.
</td></tr></tbody></table>
</dd>

<dt>Social features:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>CanBeRomanced</samp>
</td>
<td><i>(Optional)</i> Whether the NPC can be dated and romanced. This enables romance features for this NPC (like a 'single' label in the social menu, bouquet gifting, and marriage). Default false.
</td></tr>
<tr>
<td><samp>LoveInterest</samp>
</td>
<td><i>(Optional)</i> Unused.
</td></tr>
<tr>
<td><samp>Calendar</samp>
</td>
<td><i>(Optional)</i> Determines when the NPC's birthday is shown in the <a href="../../external.html?link=https://stardewvalleywiki.com/Calendar" title="Calendar">calendar</a>. Possible values:
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>HiddenAlways</samp>
</td>
<td>They never appear in the calendar.
</td></tr>
<tr>
<td><samp>HiddenUntilMet</samp>
</td>
<td>Until the player meets them, they don't appear in the calendar.
</td></tr>
<tr>
<td><samp>AlwaysShown</samp>
</td>
<td>They always appear in the calendar.
</td></tr></tbody></table>
<p>Defaults to <samp>AlwaysShown</samp>.
</p>
</td></tr>
<tr>
<td><samp>SocialTab</samp>
</td>
<td><i>(Optional)</i> Determines how the NPC is shown on the <a href="../../external.html?link=https://stardewvalleywiki.com/Friendship" title="Friendship">social tab</a> when unlocked. Possible values:
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>HiddenAlways</samp>
</td>
<td>They never appear in the social tab.
</td></tr>
<tr>
<td><samp>HiddenUntilMet</samp>
</td>
<td>Until the player meets them, they don't appear on the social tab.
</td></tr>
<tr>
<td><samp>UnknownUntilMet</samp>
</td>
<td>Until the player meets them, their name on the social tab is replaced with "???".
</td></tr>
<tr>
<td><samp>AlwaysShown</samp>
</td>
<td>They always appear in the social tab (including their name).
</td></tr></tbody></table>
<p>Defaults to <samp>UnknownUntilMet</samp>.
</p>
</td></tr>
<tr>
<td><samp>SocializeConditions</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether to enable social features (like birthdays, gift giving, <a href="../../external.html?link=https://stardewvalleywiki.com/Friendship" title="Friendship">friendship</a>, and an entry in the social tab). Default true.
</td></tr>
<tr>
<td><samp>CanVisitIslandCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether the NPC can visit the <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a> resort once it's unlocked. The NPC must be social (per <samp>SocializeConditions</samp>) to visit the island, regardless of this value. Default true.
</td></tr>
<tr>
<td><samp>ExcludeFromIntroductionsQuest</samp>
</td>
<td><i>(Optional)</i> Whether this NPC will be ignored for the <a href="../../external.html?link=https://stardewvalleywiki.com/Quests#List_of_Story_Quests" title="Quests"><i>introductions</i> quest</a>. Default false.
</td></tr>
<tr>
<td><samp>ExcludeFromPerfectionScore</samp>
</td>
<td><i>(Optional)</i> Whether to exclude this NPC when checking whether the player has max friendships with every NPC for the perfection score. Default false.
</td></tr>
<tr>
<td><samp>EndSlideShow</samp>
</td>
<td><i>(Optional)</i> How the NPC appears in the end-game perfection slide show. Possible values:
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Hidden</samp>
</td>
<td>The NPC doesn't appear in the slide show.
</td></tr>
<tr>
<td><samp>MainGroup</samp>
</td>
<td>The NPC is added to the main group of NPCs which walk across the screen.
</td></tr>
<tr>
<td><samp>TrailingGroup</samp>
</td>
<td>The NPC is added to the trailing group of NPCs which follow the main group.
</td></tr></tbody></table>
<p>Defaults to <samp>MainGroup</samp>.
</p>
</td></tr>
<tr>
<td><samp>FriendsAndFamily</samp>
</td>
<td><i>(Optional)</i> The NPC's closest friends and family, as a dictionary where the key is the other NPC's internal name and the value is an optional tokenizable string for the name to use in dialogue text (like 'mom'). Default none.
<p>This affects generic dialogue for revealing likes and dislikes to family members, and may affect <samp>inlaw_&lt;NPC&gt;</samp> dialogues. This isn't necessarily comprehensive.
</p>
</td></tr></tbody></table>
</dd>

<dt>Spawn rules:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>UnlockConditions</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether the NPC should be added to the world, checked when loading a save and when ending each day. This only affects whether the NPC is added when missing; returning false won't remove an NPC that's already been added. Defaults to true.
</td></tr>
<tr>
<td><samp>SpawnIfMissing</samp>
</td>
<td><i>(Optional)</i> Whether to add this NPC to the world if they're missing (if the <samp>UnlockConditions</samp> match and <samp>HomeLocation</samp> is valid). Default true.
</td></tr>
<tr>
<td><samp>HomeLocation</samp>
</td>
<td><i>(Optional)</i> The internal name for the home location where this NPC spawns and returns each day. Default none.
</td></tr>
<tr>
<td><samp>HomeTile</samp>
</td>
<td><i>(Optional)</i> The tile position within the home location where this NPC spawns and returns each day. Specified as a model with <samp>X</samp> and <samp>Y</samp> fields. Defaults to <samp>(0, 0)</samp>.
</td></tr>
<tr>
<td><samp>HomeDirection</samp>
</td>
<td><i>(Optional)</i> The default direction the NPC faces when they start each day. The possible values are <samp>down</samp>, <samp>left</samp>, <samp>right</samp>, and <samp>up</samp>. Defaults to <samp>up</samp>.
</td></tr></tbody></table>
</dd>

<dt>Appearance &amp; sprite:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>TextureName</samp>
</td>
<td><i>(Optional)</i> The <b>last segment</b> of the NPC's portrait and sprite asset names. For example, set to <samp>Abigail</samp> to use <samp>Portraits/Abigail</samp> and <samp>Characters/Abigail</samp> respectively. Defaults to the internal NPC name.
</td></tr>
<tr>
<td><samp>Size</samp>
</td>
<td><i>(Optional)</i> The pixel size of the individual sprites in their overworld sprite spritesheet. Specified as a model with <samp>X</samp> and <samp>Y</samp> fields. Defaults to <samp>(16, 32)</samp>.
<p><b>Note:</b> sizes bigger than 16×32 will cause issues like broken spawning, pathfinding, misalignment in the <a href="../../external.html?link=https://stardewvalleywiki.com/Perfection" title="Perfection">perfection</a> end-game slide show, etc.
</p>
</td></tr>
<tr>
<td><samp>Breather</samp>
</td>
<td><i>(Optional)</i> Whether the chest on the NPC's overworld sprite puffs in and out as they breathe. Default true.
</td></tr></tbody></table>
</dd>

<dt><a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">Hidden gift log emote</a>:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>HiddenProfileEmoteSound</samp>
</td>
<td><i>(Optional)</i> For the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">hidden gift log emote</a>, the <a href="#Custom_audio">cue ID</a> for the sound played when clicking the sprite. Defaults to <samp>drumkit6</samp>.
</td></tr>
<tr>
<td><samp>HiddenProfileEmoteDuration</samp>
</td>
<td><i>(Optional)</i> For the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">hidden gift log emote</a>, how long the animation plays measured in milliseconds. Defaults to 4000 (4 seconds).
</td></tr>
<tr>
<td><samp>HiddenProfileEmoteStartFrame</samp>
</td>
<td><i>(Optional)</i> For the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">hidden gift log emote</a>, the index within the NPC's overworld sprite spritesheet at which the animation starts. If omitted for a vanilla NPC, the game plays a default animation specific to that NPC; if omitted for a custom NPC, the game just shows them walking while facing down.
</td></tr>
<tr>
<td><samp>HiddenProfileEmoteFrameCount</samp>
</td>
<td><i>(Optional)</i> For the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">hidden gift log emote</a>, the number of frames in the animation. The first frame corresponds to <samp>HiddenProfileEmoteStartFrame</samp>, and each subsequent frame will use the next sprite in the spritesheet. Default 1.
<p>This has no effect if <samp>HiddenProfileEmoteStartFrame</samp> isn't set.
</p>
</td></tr>
<tr>
<td><samp>HiddenProfileEmoteFrameDuration</samp>
</td>
<td><i>(Optional)</i> For the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">hidden gift log emote</a>, how long each animation frame is shown on-screen before switching to the next one, measured in milliseconds. Default 200.
<p>This has no effect if <samp>HiddenProfileEmoteStartFrame</samp> isn't set.
</p>
</td></tr></tbody></table>
</dd>

<dt>Advanced:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>FestivalVanillaActorIndex</samp>
</td>
<td><i>(Optional, Specialized)</i> The NPC's index in the <samp>Maps/characterSheet</samp> tilesheet, if applicable. This is used for placing vanilla NPCs in festivals from the map; custom NPCs should use the <samp>&lt;layer&gt;_additionalCharacters</samp> field in the festival data instead.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
</dd>
</dl>
<h3><span class="mw-headline" id="Custom_farm_animals">Custom farm animals</span></h3>
<p>You can now create and customize <a href="../../external.html?link=https://stardewvalleywiki.com/Animals" title="Animals">farm animals</a> by editing the revamped <samp>Data/FarmAnimals</samp> asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a unique farm animal ID. This should only contain alphanumeric/underscore/dot characters, and custom entries should be prefixed with your mod ID like <samp>Example.ModId_AnimalId</samp>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<h4><span class="mw-headline" id="Main_info">Main info</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="#Tokenizable_string_format">tokenizable string</a> for the animal type's display name.
</td></tr>
<tr>
<td><samp>House</samp>
</td>
<td>The <a href="#Custom_buildings">building ID</a> for the main building type that houses this animal. The animal will also be placeable in buildings whose <samp>ValidOccupantTypes</samp> field contains this value.
</td></tr>
<tr>
<td><samp>Gender</samp>
</td>
<td><i>(Optional)</i> The possible genders for the animal type. Currently this only affects the text shown after purchasing the animal, like "<i>Great! I'll send little &lt;name&gt; to [his/her] new home right away</i>". Default <samp>Female</samp>.
<p>The possible values are:
</p>
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Male</samp><br /><samp>Female</samp>
</td>
<td>Farm animals of this type are always male or always female.
</td></tr>
<tr>
<td><samp>MaleOrFemale</samp>
</td>
<td>The gender of each animal is randomized based on its internal unique ID.
</td></tr></tbody></table>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Animal_shop">Animal shop</span></h4>
<p>These fields affect how this farm animal type is shown in <a href="../../external.html?link=https://stardewvalleywiki.com/Marnie%27s_Ranch" title="Marnie&#39;s Ranch">Marnie's animal shop</a>. Animals are automatically listed if they have a valid <samp>PurchasePrice</samp> value.
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>PurchasePrice</samp>
</td>
<td><i>(Optional if not purchaseable)</i> Half the cost to purchase the animal (the actual price is double this value), or a negative value to disable purchasing this animal type. Default -1.
</td></tr>
<tr>
<td><samp>ShopTexture</samp>
</td>
<td><i>(Optional if not purchaseable)</i> The asset name for the icon texture to show in shops. Defaults to <samp>LooseSprites/Cursors</samp> or <samp>LooseSprites/Cursors2</samp> based on the animal's position within the loaded data (but using the default isn't recommended if it's purchaseable).
</td></tr>
<tr>
<td><samp>ShopSourceRect</samp>
</td>
<td><i>(Optional if not purchaseable)</i> The pixel area within the <samp>ShopTexture</samp> to draw, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. This should be 32 pixels wide and 16 high. Ignored if <samp>ShopTexture</samp> isn't set.
</td></tr>
<tr>
<td><samp>RequiredBuilding</samp>
</td>
<td><i>(Optional)</i> The building that needs to be built on the farm for this animal to be available to purchase. Buildings that are upgraded from this building are valid too. Default none.
</td></tr>
<tr>
<td><samp>UnlockCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether the farm animal is available in the shop menu. Default always unlocked.
</td></tr>
<tr>
<td><samp>ShopDisplayName</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for the display name shown in the shop menu. Defaults to the <samp>DisplayName</samp> field.
</td></tr>
<tr>
<td><samp>ShopDescription</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for the tooltip description shown in the shop menu. Defaults to none.
</td></tr>
<tr>
<td><samp>ShopMissingBuildingDescription</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> which overrides <samp>ShopDescription</samp> if the <samp>RequiredBuilding</samp> isn't built. Defaults to none.
</td></tr>
<tr>
<td><samp>AlternatePurchaseTypes</samp>
</td>
<td><i>(Optional)</i> The possible variants for this farm animal (e.g. chickens can be Brown Chicken, Blue Chicken, or White Chicken). This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>AnimalIDs</samp>
</td>
<td>A list of animal IDs to spawn instead of the main <samp>ID</samp> field. If multiple are listed, one is chosen at random on purchase.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this variant entry is available. Default always enabled.
</td></tr></tbody></table>
<p>If multiple are listed, the first available variant is returned. Default none.
</p>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Hatching">Hatching</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>EggItemIds</samp>
</td>
<td><i>(Optional)</i> A list of the <a href="#Custom_items">object IDs</a> that can be placed in the <a href="../../external.html?link=https://stardewvalleywiki.com/Incubator" title="Incubator">incubator</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Ostrich_Incubator" title="Ostrich Incubator">ostrich incubator</a> to hatch this animal. If the animal's <samp>House</samp> field doesn't match the current building, the entry will be ignored. Default none.
</td></tr>
<tr>
<td><samp>IncubationTime</samp>
</td>
<td><i>(Optional)</i> How long eggs incubate before they hatch. Default 9000 minutes.
</td></tr>
<tr>
<td><samp>IncubatorParentSheetOffset</samp>
</td>
<td><i>(Optional)</i> An offset applied to the incubator's sprite index when it's holding an egg. Default 1.
<p>The vanilla values are:
</p>
<table class="wikitable">

<tbody><tr>
<th>offset
</th>
<th><a href="../../external.html?link=https://stardewvalleywiki.com/Incubator" title="Incubator">incubator</a>
</th>
<th><a href="../../external.html?link=https://stardewvalleywiki.com/Ostrich_Incubator" title="Ostrich Incubator">ostrich incubator</a>
</th></tr>
<tr>
<td>0
</td>
<td>empty incubator
</td>
<td>empty incubator
</td></tr>
<tr>
<td>1
</td>
<td>small white egg
</td>
<td>large brown egg
</td></tr>
<tr>
<td>2
</td>
<td>small brown egg
</td>
<td><i>invalid</i> (will show <a href="../../external.html?link=https://stardewvalleywiki.com/Junimo_Chest" title="Junimo Chest">Junimo chest</a> sprite)
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>BirthText</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for the message shown when entering the building after the egg hatched. Defaults to the text "<samp>???</samp>".
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Growth">Growth</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DaysToMature</samp>
</td>
<td><i>(Optional)</i> The number of days until a freshly purchased/born animal becomes an adult and begins producing items. Default 1.
</td></tr>
<tr>
<td><samp>CanGetPregnant</samp>
</td>
<td><i>(Optional)</i> Whether an animal can <a href="../../external.html?link=https://stardewvalleywiki.com/Animals#Animal_Births" title="Animals">produce a child</a> (regardless of gender). Default false.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Produce">Produce</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ProduceItemIds</samp><br /><samp>DeluxeProduceItemIds</samp>
</td>
<td><i>(Optional)</i> The items produced by the animal when it's an adult. The <samp>DeluxeProduceItemIds</samp> field only applies if the <samp>Deluxe*</samp> fields match. Both default to none.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td>The <a href="#Custom_items"><i>unqualified</i> object ID</a> of the item to produce.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this item can be produced now. Defaults to always true.
</td></tr>
<tr>
<td><samp>MinimumFriendship</samp>
</td>
<td><i>(Optional)</i> The minimum friendship points with the animal needed to produce this item. Default 0.
</td></tr></tbody></table>
<p>If multiple items can be produced, one is chosen at random (with deluxe items taking priority if applicable).
</p>
</td></tr>
<tr>
<td><samp>DaysToProduce</samp>
</td>
<td><i>(Optional)</i> The number of days between item productions. For example, setting <samp>1</samp> will produce an item every other day. Default 1.
</td></tr>
<tr>
<td><samp>ProduceOnMature</samp>
</td>
<td><i>(Optional)</i> Whether an item is produced on the day the animal becomes an adult. Default false.
</td></tr>
<tr>
<td><samp>FriendshipForFasterProduce</samp>
</td>
<td><i>(Optional)</i> The minimum friendship points needed to reduce the <samp>DaysToProduce</samp> by one. Defaults to no reduction based on friendship.
</td></tr>
<tr>
<td><samp>DeluxeProduceMinimumFriendship</samp>
</td>
<td><i>(Optional)</i> The minimum friendship points needed to produce the <samp>DeluxeProduceItemId</samp>. Default 200.
</td></tr>
<tr>
<td><samp>DeluxeProduceCareDivisor</samp><br /><samp>DeluxeProduceLuckMultiplier</samp>
</td>
<td><i>(Optional)</i> <a href="#Quantity_modifiers">Quantity modifiers</a> which change the probability of producing the <samp>DeluxeProduceItemId</samp>, based on this formula:
<pre>if happiness &gt; 200:
   happiness_modifier = happiness * 1.5
else if happiness &gt; 100:
   happiness_modifier = 0
else
   happiness_modifier = happiness - 100

((friendship + happiness_modifier) / DeluxeProduceCareDivisor) + (daily_luck * DeluxeProduceLuckMultiplier)
</pre>
<p>Specifically:
</p>
<ul><li><samp>DeluxeProduceCareDivisor</samp> reduces the bonus from friendship and happiness, so a lower value <i>increases</i> the probability of producing the deluxe item. Default 1200.</li>
<li><samp>DeluxeProduceLuckMultiplier</samp> increases the effect of <a href="../../external.html?link=https://stardewvalleywiki.com/Luck" title="Luck">daily luck</a>. Default 0.</li></ul>
<p>For example, given a friendship of 102 and happiness of 150, the probability with the default field values will be <code>((102 + 0) / 1200) + (daily_luck * 0) = (102 / 1200) = 0.085</code> or 8.5%.
</p><p>See <a href="../../external.html?link=https://stardewvalleywiki.com/Animals#Produce" title="Animals">Animals#Produce</a> for more info on the calculation.
</p>
</td></tr>
<tr>
<td><samp>HarvestType</samp>
</td>
<td><i>(Optional)</i> How produced items are collected from the animal. The valid values are:
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DropOvernight</samp>
</td>
<td>The item is placed on the ground in the animal's home building overnight.
</td></tr>
<tr>
<td><samp>HarvestWithTool</samp>
</td>
<td>The item is collected from the animal directly based on the <samp>HarvestTool</samp> field.
</td></tr></tbody></table>
<p>Default <samp>DropOvernight</samp>.
</p>
</td></tr>
<tr>
<td><samp>HarvestTool</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_items">tool ID</a> with which produced items can be collected from the animal, if the <samp>HarvestType</samp> is set to <samp>HarvestWithTool</samp>. The values recognized by the vanilla tools are <samp>MilkPail</samp> and <samp>Shears</samp>. Default none.
</td></tr></tbody></table>
<h4><span id="Audio_&amp;_sprite"></span><span class="mw-headline" id="Audio_.26_sprite">Audio &amp; sprite</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Sound</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">audio cue ID</a> for the sound produced by the animal (e.g. when pet). Default none.
</td></tr>
<tr>
<td><samp>BabySound</samp>
</td>
<td><i>(Optional)</i> Overrides <samp>Sound</samp> field when the animal is a baby. Has no effect if <samp>Sound</samp> isn't specified. Default none.
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td><i>(Optional)</i> The asset name for the animal's spritesheet. Defaults to <samp>Animals/<code title="required field &#39;ID&#39;">&lt;ID&gt;</code></samp> (like <samp>Animals/Goat</samp> for a <a href="../../external.html?link=https://stardewvalleywiki.com/Goat" title="Goat">goat</a>).
</td></tr>
<tr>
<td><samp>HarvestedTexture</samp>
</td>
<td><i>(Optional)</i> Overrides <samp>Texture</samp> if the animal doesn't currently have an item ready to collect (like the <a href="../../external.html?link=https://stardewvalleywiki.com/Sheep" title="Sheep">sheep</a>'s sheared sprite). Default none.
</td></tr>
<tr>
<td><samp>BabyTexture</samp>
</td>
<td><i>(Optional)</i> Overrides <samp>Texture</samp> and <samp>HarvestedTexture</samp> when the animal is a baby. Default none.
</td></tr>
<tr>
<td><samp>UseFlippedRightForLeft</samp>
</td>
<td><i>(Optional)</i> When the animal is facing left, whether to use a flipped version of their right-facing sprite. Default false.
</td></tr>
<tr>
<td><samp>SpriteWidth</samp><br /><samp>SpriteHeight</samp>
</td>
<td><i>(Optional)</i> The pixel height &amp; width of the animal's sprite (before the in-game pixel zoom). Both default to 16.
</td></tr>
<tr>
<td><samp>EmoteOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset to apply to emotes from the farm animal, specified as an object with <samp>X</samp> and <samp>Y</samp>. Default zero.
</td></tr>
<tr>
<td><samp>Skins</samp>
</td>
<td><i>(Optional)</i> A list of alternate appearances. If specified, a skin is chosen at random when the animal is purchased. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>A key which uniquely identifies the skin for this animal type. The ID should only contain alphanumeric/underscore/dot characters. For custom skins, this should be prefixed with your mod ID like <samp>Example.ModId_SkinName</samp>.
</td></tr>
<tr>
<td><samp>Weight</samp>
</td>
<td><i>(Optional)</i> A multiplier for the probability to choose this skin when an animal is purchased. For example, <samp>2.0</samp> will double the chance this skin is selected relative to the other skins. Default <samp>1.0</samp>.
</td></tr>
<tr>
<td><samp>Texture</samp><br /><samp>HarvestedTexture</samp><br /><samp>BabyTexture</samp>
</td>
<td><i>(Optional)</i> Overrides the equivalent main field when this skin is selected. Defaults to the main field's value.
</td></tr></tbody></table>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Player_profession_effects">Player profession effects</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ProfessionForFasterProduce</samp>
</td>
<td><i>(Optional)</i> The internal ID of a <a href="../../external.html?link=https://stardewvalleywiki.com/Skills" title="Skills">profession</a> which reduces the <samp>DaysToProduce</samp> by one. Default none.
</td></tr>
<tr>
<td><samp>ProfessionForHappinessBoost</samp>
</td>
<td><i>(Optional)</i> The internal ID of a <a href="../../external.html?link=https://stardewvalleywiki.com/Skills" title="Skills">profession</a> which makes it easier to befriend this animal. Default none.
</td></tr>
<tr>
<td><samp>ProfessionForQualityBoost</samp>
</td>
<td><i>(Optional)</i> The internal ID of a <a href="../../external.html?link=https://stardewvalleywiki.com/Skills" title="Skills">profession</a> which increases the chance of higher-quality produce. Default none.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Behavior">Behavior</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>CanSwim</samp>
</td>
<td><i>(Optional)</i> Whether animals on the farm can swim in water once they've been pet. Default false.
</td></tr>
<tr>
<td><samp>BabiesFollowAdults</samp>
</td>
<td><i>(Optional)</i> Whether baby animals can follow nearby adults. Default false.
</td></tr>
<tr>
<td><samp>GrassEatAmount</samp>
</td>
<td><i>(Optional)</i> The amount of grass eaten by this animal each day. Default 2.
</td></tr>
<tr>
<td><samp>HappinessDrain</samp>
</td>
<td><i>(Optional)</i> An amount which affects the daily reduction in happiness if the animal wasn't pet, or didn't have a heater in winter. Default none.
</td></tr>
<tr>
<td><samp>Price</samp>
</td>
<td><i>(Optional)</i> The price when <a href="../../external.html?link=https://stardewvalleywiki.com/Animals#Selling_Animals" title="Animals">the player sells the animal</a>, before the friendship boost. Default 0.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Other">Other</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ShowInSummitCredits</samp>
</td>
<td><i>(Optional)</i> Whether to show the farm animal in the credit scene on <a href="../../external.html?link=https://stardewvalleywiki.com/The_Summit" title="The Summit">the summit</a> after the player achieves <a href="../../external.html?link=https://stardewvalleywiki.com/Perfection" title="Perfection">perfection</a>. Default false.
</td></tr>
<tr>
<td><samp>StatToIncrementOnProduce</samp>
</td>
<td><i>(Optional)</i> The game stat counters to increment when the animal produces an item. Default none. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>StatName</samp>
</td>
<td>The name of the stat counter field on <samp>Game1.stats</samp>.
</td></tr>
<tr>
<td><samp>RequiredTags</samp>
</td>
<td><i>(Optional)</i> A comma-delimited list of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">context tags</a> required on the main input item. The stat is only incremented if the item has <i>all</i> of these. You can negate a tag with <samp>!</samp> (like <code>bone_item,!fossil_item</code> for bone items that aren't fossils). Defaults to always enabled.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>UpDownPetHitboxTileSize</samp><br /><samp>LeftRightPetHitboxTileSize</samp>
</td>
<td><i>(Optional)</i> The animal sprite's <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#Tiles" title="Modding:Modder Guide/Game Fundamentals">tile</a> size in the world when the player is clicking to pet them, specified in the form <samp><code title="required field &#39;width&#39;">&lt;width&gt;</code>, <code title="required field &#39;height&#39;">&lt;height&gt;</code></samp>. The <samp>UpDownPetHitboxTileSize</samp> applies when the animal is facing up or down, and <samp>LeftRightPetHitboxTileSize</samp> applies when facing left or right. The values can be fractional (<i>e.g.</i> cows have a width of 1.75). Both default to a 1×1 tile.
</td></tr>
<tr>
<td><samp>BabyUpDownPetHitboxTileSize</samp><br /><samp>BabyLeftRightPetHitboxTileSize</samp>
</td>
<td><i>(Optional)</i> Overrides <samp>UpDownPetHitboxTileSize</samp> and <samp>LeftRightPetHitboxTileSize</samp> respectively before the animal is an adult. Both default to 1×1 tile.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Custom_pets">Custom pets</span></h3>
<h4><span class="mw-headline" id="Format_5">Format</span></h4>
<p>You can now create and customize <a href="../../external.html?link=https://stardewvalleywiki.com/Animals#Cat_or_Dog" title="Animals">pets</a> &amp; pet breeds by editing the new <samp>Data/Pets</samp> asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a unique identifier for the pet (not the pet breed). The vanilla IDs are <samp>Cat</samp> and <samp>Dog</samp>. For custom pets, this should be prefixed with your mod ID like <samp>Example.ModId_PetName</samp>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>BarkSound</samp>
</td>
<td>The <a href="#Custom_audio">cue ID</a> for the pet's occasional 'bark' sound.
</td></tr>
<tr>
<td><samp>ContentSound</samp>
</td>
<td>The <a href="#Custom_audio">cue ID</a> for the sound which the pet makes when you pet it.
</td></tr>
<tr>
<td><samp>Behaviors</samp>
</td>
<td>The pet's possible actions and behaviors, defined as the states in a state machine. Essentially the pet will be in one state at any given time, which also determines which state they can transition to next. For example, a cat can transition from <samp>Walk</samp> to <samp>BeginSitDown</samp>, but it can't skip instantly from <samp>Walk</samp> to <samp>SitDownLick</samp>.
<p>This consists of a list of models with these fields:
</p>
<dl>
<dt>Required fields:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Name</samp>
</td>
<td>A unique name for the state. This only needs to be unique within the pet type (e.g. <samp>Cat</samp> and <samp>Dog</samp> can have different behaviors with the same name).
</td></tr></tbody></table>
</dd>

<dt>Direction:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Direction</samp>
</td>
<td><i>(Optional)</i> The specific direction to face at the start of this state (one of <samp>left</samp>, <samp>right</samp>, <samp>up</samp>, or <samp>down</samp>), unless overridden by <samp>RandomizeDirection</samp>.
</td></tr>
<tr>
<td><samp>RandomizeDirection</samp>
</td>
<td><i>(Optional)</i> Whether to point the pet in a random direction at the start of this state (overriding the <samp>Direction</samp> if specified). Default false.
</td></tr>
<tr>
<td><samp>IsSideBehavior</samp>
</td>
<td><i>(Optional)</i> Whether to constrain the pet's facing direction to left and right while the state is active. Default false.
</td></tr></tbody></table>
</dd>

<dt>Movement:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>WalkInDirection</samp>
</td>
<td><i>(Optional)</i> Whether to walk in the pet's facing direction. Default false.
</td></tr>
<tr>
<td><samp>MoveSpeed</samp>
</td>
<td><i>(Optional)</i> Overrides the pet's <samp>MoveSpeed</samp> field while this state is active. Default -1 (which uses the pet's <samp>MoveSpeed</samp> value).
</td></tr></tbody></table>
</dd>

<dt>Audio:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>SoundOnStart</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">audio cue ID</a> for the sound to play when the state starts. If set to <samp>BARK</samp>, the pet's <samp>BarkSound</samp> (or breed's <samp>BarkOverride</samp>) field is used. Defaults to none.
</td></tr>
<tr>
<td><samp>SoundRange</samp><br /><samp>SoundRangeFromBorder</samp>
</td>
<td><i>(Optional)</i> When set, the <samp>SoundOnStart</samp> is only audible if the pet is within this many tiles away from the player (<samp>SoundRange</samp>) or past the border of the screen (<samp>SoundRangeFromBorder</samp>). Default -1 (no distance check).
</td></tr>
<tr>
<td><samp>SoundIsVoice</samp>
</td>
<td><i>(Optional)</i> Whether to mute the <samp>SoundOnStart</samp> when the 'mute animal sounds' option is set. Default false.
</td></tr></tbody></table>
</dd>

<dt>Behavior transitions:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>AnimationEndBehaviorChanges</samp><br /><samp>TimeoutBehaviorChanges</samp><br /><samp>PlayerNearbyBehaviorChanges</samp><br /><samp>RandomBehaviorChanges</samp><br /><samp>JumpLandBehaviorChanges</samp>
</td>
<td><i>(Optional)</i> A list of possible behavior transitions to start when the criteria are achieved. If multiple transitions are listed, a random one will be selected. If omitted, it won't affect behavior transitions.
<p>These are triggered when this behavior's animation finishes (<samp>AnimationEndBehaviorChanges</samp>), when the set duration ends (<samp>TimeoutBehaviorChanges</samp>), when the player is within 2 tiles of the pet (<samp>PlayerNearbyBehaviorChanges</samp>), randomly at the start of each frame based on the <samp>RandomBehaviorChangeChance</samp> field (<samp>RandomBehaviorChanges</samp>), and when the pet finishes a jump (<samp>JumpLandBehaviorChanges</samp>).
</p><p>These consist of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Behavior</samp><br /><samp>LeftBehavior</samp><br /><samp>RightBehavior</samp><br /><samp>UpBehavior</samp><br /><samp>DownBehavior</samp>
</td>
<td>The name of the behavior to start. The pet will check for a behavior field matching its current facing direction first, then try the <samp>Behavior</samp>. If none are specified, the current behavior will continue unchanged.
</td></tr>
<tr>
<td><samp>OutsideOnly</samp>
</td>
<td><i>(Optional)</i> Whether the transition can only happen if the pet is outside. Default false.
</td></tr>
<tr>
<td><samp>Weight</samp>
</td>
<td><i>(Optional)</i> The option's weight when randomly choosing a behavior, relative to other behaviors in the list (e.g. <samp>2</samp> is twice as likely as <samp>1</samp>). Default 1.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Duration</samp><br /><samp>MinimumDuration</samp><br /><samp>MaximumDuration</samp>
</td>
<td><i>(Optional)</i> The millisecond duration until the pet transitions to a behavior in the <samp>TimeoutBehaviorChanges</samp> field, if set. You must specify either a specific duration, or an inclusive minimum-to-maximum range in which the game will choose a random duration. If omitted, the behavior won't have a duration limit.
</td></tr>
<tr>
<td><samp>RandomBehaviorChangeChance</samp>
</td>
<td><i>(Optional)</i> The random probability at the start of each frame that the pet will transition to a behavior in the <samp>RandomBehaviorChanges</samp> field, if set. Specified as a value between 0 (never) and 1 (always). Default 0.
</td></tr></tbody></table>
</dd>

<dt>Animation and per-frame sounds:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Animation</samp>
</td>
<td><i>(Optional)</i> The animation frames to play while this state is active. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Frame</samp>
</td>
<td>The frame index in the animation. This should be an incremental number starting at 0.
</td></tr>
<tr>
<td><samp>Duration</samp>
</td>
<td>The millisecond duration for which the frame should be kept on-screen before continuing to the next frame.
</td></tr>
<tr>
<td><samp>HitGround</samp>
</td>
<td><i>(Optional)</i> Whether to play the footstep sound for the tile under the pet when the frame starts. Default false.
</td></tr>
<tr>
<td><samp>Jump</samp>
</td>
<td><i>(Optional)</i> Whether the pet should perform a small hop when the frame starts, including a 'dwop' sound. Default false.
</td></tr>
<tr>
<td><samp>Sound</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">audio cue ID</a> for the sound to play when the animation starts or loops. If set to <samp>BARK</samp>, the pet's <samp>BarkSound</samp> (or breed's <samp>BarkOverride</samp>) field is used. Defaults to none.
</td></tr>
<tr>
<td><samp>SoundRange</samp><br /><samp>SoundRangeFromBorder</samp><br /><samp>SoundIsVoice</samp>
</td>
<td>See description for the equivalent behavior fields, but applies to the frame's <samp>Sound</samp> field instead.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Shake</samp>
</td>
<td><i>(Optional)</i> The millisecond duration for which to shake the pet when the state starts. Default 0.
</td></tr>
<tr>
<td><samp>LoopMode</samp>
</td>
<td><i>(Optional)</i> What to do when the last animation frame is reached while the behavior is still active. The possible values are <samp>Hold</samp> (keep the last frame visible until the animation ends), <samp>Loop</samp> (restart from the first frame), or <samp>None</samp> (equivalent to <samp>Loop</samp>). Default <samp>None</samp>.
</td></tr>
<tr>
<td><samp>AnimationMinimumLoops</samp><br /><samp>AnimationMaximumLoops</samp>
</td>
<td><i>(Optional)</i> The minimum and maximum number of times to play the animation. Both must be specified to have any effect. The game will choose an inclusive random value between them. Both default to -1 (don't repeat animation).
</td></tr></tbody></table>
</dd>
</dl>
</td></tr>
<tr>
<td><samp>Breeds</samp>
</td>
<td>The cosmetic breeds which can be selected in the character customization menu when creating a save. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>The unique ID for the breed within the pet type.
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the breed spritesheet for the pet's in-game sprite. This should be 128 pixels wide, and 256 (cat) or 288 (dog) pixels high.
</td></tr>
<tr>
<td><samp>IconTexture</samp>
</td>
<td>The asset name for the breed icon texture, shown on the character customization screen and in-game menu. This should be a 16x16 pixel icon.
</td></tr>
<tr>
<td><samp>IconSourceRect</samp>
</td>
<td>The icon's pixel area within the <samp>IconTexture</samp>, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields.
</td></tr>
<tr>
<td><samp>BarkOverride</samp>
</td>
<td><i>(Optional)</i> Override the pet's <samp>BarkSound</samp> field for this breed, if set.
</td></tr>
<tr>
<td><samp>VoicePitch</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://en.wikipedia.org/wiki/Pitch_(music)" class="extiw" title="wikipedia:Pitch (music)">pitch</a> applied to the pet's bark sound, measured as a decimal value relative to 1. Defaults to 1.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>MoveSpeed</samp>
</td>
<td><i>(Optional)</i> How quickly the pet can move. Default 2.
</td></tr>
<tr>
<td><samp>SleepOnBedChance</samp><br /><samp>SleepNearBedChance</samp><br /><samp>SleepOnRugChance</samp>
</td>
<td><i>(Optional)</i> The percentage chances for the locations where the pet will sleep each night, as a decimal value between 0 (never) and 1 (always). Each value is checked in the order listed at left until a match is found. If none of them match, the pet will choose a random empty spot in the farmhouse; if none was found, it'll sleep next to its pet bowl outside.
</td></tr>
<tr>
<td><samp>EmoteOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset for the emote drawn above the pet sprite, specified as an object with <samp>X</samp> and <samp>Y</samp> fields. For example, this affects the heart emote shown after petting it. Default none.
</td></tr>
<tr>
<td><samp>RepeatContentSoundAfter</samp>
</td>
<td><i>(Optional)</i> The number of milliseconds until the <samp>ContentSound</samp> is repeated once. This is used by the dog, who pants twice when pet. Defaults to -1 (disabled).
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Pet_bowl">Pet bowl</span></h4>
<p>The pet bowl is now a building which can be constructed or moved. Each pet is assigned to an available pet bowl.
</p><p>For C# mods, each pet now has a <samp>guid</samp> field populated with a unique ID, and each pet bowl has a <samp>petGuid</samp> field which tracks its owner (see the <samp>PetBowl::HasPet()</samp> and <samp>PetBowl::FindPet()</samp> methods).
</p>
<h3><span class="mw-headline" id="Custom_monster_eradication_goals">Custom monster eradication goals</span></h3>
<dl><dd><i>See also: <a href="#Monster_eradication_goal_flag_changes">Monster eradication goal flag changes</a>.</i></dd></dl>
<p>You can now add/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild" title="Adventurer&#39;s Guild">Adventurer's Guild</a> monster eradication goals by editing the new <samp>Data/MonsterSlayerQuests</samp> data asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a unique ID for the monster eradication goal. This ID should only contain alphanumeric/underscore/dot characters, and custom goal IDs should ideally be prefixed with your mod ID like <samp>Example.ModId_GoalName</samp>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="#Tokenizable_string_format">tokenizable string</a> for the goal's display name, shown on the board in the Adventurer's Guild.
</td></tr>
<tr>
<td><samp>Targets</samp>
</td>
<td>A list of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Monster_data#Monster_IDs" title="Modding:Monster data">monster IDs</a> that are counted towards the <samp>Count</samp>.
</td></tr>
<tr>
<td><samp>Count</samp>
</td>
<td>The total number of monsters (matching the <samp>Targets</samp>) which must be defeated to complete this goal.
</td></tr>
<tr>
<td><samp>RewardItemId</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_items">qualified ID</a> for the item that can be collected from <a href="../../external.html?link=https://stardewvalleywiki.com/Gil" title="Gil">Gil</a> when this goal is completed. Default none.
</td></tr>
<tr>
<td><samp>RewardItemPrice</samp>
</td>
<td><i>(Optional)</i> The price of the <samp>RewardItemId</samp> in <a href="../../external.html?link=https://stardewvalleywiki.com/Marlon" title="Marlon">Marlon</a>'s shop after the goal is completed, or -1 to disable buying it from Marlon. Default -1.
</td></tr>
<tr>
<td><samp>RewardDialogue</samp><br /><samp>RewardDialogueFlag</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for custom <a href="../../external.html?link=https://stardewvalleywiki.com/Gil" title="Gil">Gil</a> dialogue shown when talking to him after completing the goal, and an optional <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail flag</a> to set when the player has seen the dialogue. Both default to none.
<p>If there are reward items, they're shown after this dialogue.
</p><p>If <samp>RewardDialogue</samp> is used without <samp>RewardDialogueFlag</samp>, then this dialogue will be shown each time the reward menu is opened after completing the goal, until the player collects the reward items. If the <samp>RewardItems</samp> isn't set, this can safely be omitted since the goal will be marked collected immediately.
</p><p>This doesn't send a letter; see <samp>RewardMail</samp> or <samp>RewardMailAll</samp> for that.
</p>
</td></tr>
<tr>
<td><samp>RewardFlag</samp><br /><samp>RewardFlagAll</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail flag ID</a> to set for the current player (<samp>RewardFlag</samp>) or all players (<samp>RewardFlagAll</samp>) when talking to <a href="../../external.html?link=https://stardewvalleywiki.com/Gil" title="Gil">Gil</a> after completing the goal. Default none.
<p>Note that <samp>RewardFlag</samp> is usually not needed, since the game will also set a <samp>Gil_<code title="required field &#39;goal ID&#39;">&lt;goal ID&gt;</code></samp> flag regardless.
</p><p>This doesn't send a letter; see <samp>RewardMail</samp> or <samp>RewardMailAll</samp> for that.
</p>
</td></tr>
<tr>
<td><samp>RewardMail</samp><br /><samp>RewardMailAll</samp>
</td>
<td><i>(Optional)</i> The mail letter ID to add to the mailbox tomorrow for the current player (<samp>RewardMail</samp>) or all players (<samp>RewardMailAll</samp>). Default none.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Custom_phone_calls">Custom phone calls</span></h3>
<p>Mods can now extend the <a href="../../external.html?link=https://stardewvalleywiki.com/Telephone" title="Telephone">telephone</a> with custom calls (both incoming calls, and phone numbers which the player can call).
</p>
<h4><span class="mw-headline" id="Incoming_calls">Incoming calls</span></h4>
<p>You can add or customize incoming calls by editing the <samp>Data/IncomingPhoneCalls</samp> asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a unique call ID. This should only contain alphanumeric/underscore/dot characters, and custom entries should be prefixed with your mod ID like <samp>Example.ModId_CallId</samp>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Dialogue</samp>
</td>
<td>The dialogue text to show when the player answers the phone. This can use the full <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">dialogue format</a> (including questions and different dialogue based on the selected answer).
</td></tr>
<tr>
<td><samp>FromNpc</samp>
</td>
<td><i>(Optional)</i> The internal name of the NPC making the call. If specified, that NPC's name and portrait will be shown.
</td></tr>
<tr>
<td><samp>FromPortrait</samp>
</td>
<td><i>(Optional)</i> The asset name for the portrait spritesheet to display (like <samp>Portraits/Abigail</samp>). If <samp>FromNpc</samp> is specified too, this overrides the portrait from that NPC. If both <samp>FromNpc</samp> and <samp>FromDisplayName</samp> are null, this portrait will be shown with the display name "???".
</td></tr>
<tr>
<td><samp>FromDisplayName</samp>
</td>
<td><i>(Optional)</i> A <a href="#Tokenizable_string_format">tokenizable string</a> for the calling NPC's display name. If <samp>FromNpc</samp> is specified too, this overrides the display name from that NPC.
</td></tr>
<tr>
<td><samp>MaxCalls</samp>
</td>
<td><i>(Optional)</i> The maximum number of times a player can receive this phone call, or &lt;c&gt;-1 for no limit. Default 1.
</td></tr>
<tr>
<td><samp>TriggerCondition</samp><br /><samp>RingCondition</samp>
</td>
<td><i>(Optional)</i> If set, a game state query which indicates whether to trigger this phone call (<samp>TriggerCondition</samp>) or whether the phone rings when this call is received (<samp>RingCondition</samp>).
<p>Whether a player receives this call depends on both fields: <samp>TriggerCondition</samp> is checked on the main player before sending the call to all players, then <samp>RingCondition</samp> is checked on each player to determine whether the phone rings for them.
</p>
</td></tr>
<tr>
<td><samp>IgnoreBaseChance</samp>
</td>
<td><i>(Optional)</i> Whether to ignore the 1% base chance when checking whether to trigger an incoming call. If true, the game will check if this call can be received regardless of the base chance. Default false.
</td></tr>
<tr>
<td><samp>SimpleDialogueSplitBy</samp>
</td>
<td><i>(Optional, specialized)</i> If set, marks the call as having a simple dialogue string without an NPC name and portrait, with lines split into multiple boxes by this substring. For example, <code>"SimpleDialogueSplitBy": "#"</code> will split <code>Box A#Box B#Box C</code> into three consecutive dialogue boxes.
<p>You should omit this in most cases, and use the regular dialogue format in <samp>Dialogue</samp> to split lines if needed. This is mainly intended to support some older vanilla phone calls.
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4><span id="Custom_handlers_in_C#"></span><span class="mw-headline" id="Custom_handlers_in_C.23">Custom handlers in C#</span></h4>
<p>C# mods can implement <samp>StardewValley.PhoneCalls.IPhoneHandler</samp> and add it to <samp>Phone.PhoneHandlers</samp> for full control over both incoming and outgoing calls:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">/// &lt;summary&gt;The mod entry point.&lt;/summary&gt;</span>
<span class="k">internal</span> <span class="k">class</span> <span class="nc">ModEntry</span> <span class="p">:</span> <span class="n">Mod</span>
<span class="p">{</span>
    <span class="c1">/// &lt;inheritdoc /&gt;</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Entry</span><span class="p">(</span><span class="n">IModHelper</span> <span class="n">helper</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Phone</span><span class="p">.</span><span class="n">PhoneHandlers</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">CustomPhoneHandler</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">/// &lt;summary&gt;A custom phone handler.&lt;/summary&gt;</span>
<span class="k">internal</span> <span class="k">class</span> <span class="nc">CustomPhoneHandler</span> <span class="p">:</span> <span class="n">IPhoneHandler</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
<p>See <samp>StardewValley.PhoneCalls.DefaultPhoneHandler</samp> in the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Get_Started#decompile" title="Modding:Modder Guide/Get Started">decompiled game code</a> for an example implementation.
</p>
<h3><span class="mw-headline" id="Custom_shops">Custom shops</span></h3>
<h4><span class="mw-headline" id="Format_6">Format</span></h4>
<p>You can now create and edit shops via the new <samp>Data/Shops</samp> asset. This consists of a string → model lookup, where the key is a unique ID for the shop (using a globally unique ID which includes your mod ID like <samp>ExampleMod.Id_ShopName</samp> for custom shops), and the value is a model with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Items</samp>
</td>
<td>The items to add to the shop inventory. This consists of a list of values with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported by shop items.
<p>Notes:
</p>
<ul><li>If set to an <a href="#Item_queries">item query</a> which returns multiple items, all of them will be added to the shop.</li>
<li>The <samp>MinStack</samp> and <samp>MaxStack</samp> fields apply to the item after it's purchased, and have no effect on the price or <samp>Stock</samp> limit.</li>
<li>If the player found <a href="../../external.html?link=https://stardewvalleywiki.com/Pierre%27s_Missing_Stocklist" title="Pierre&#39;s Missing Stocklist">Pierre's Missing Stocklist</a>, season conditions in the <samp>Condition</samp> field are ignored in <a href="../../external.html?link=https://stardewvalleywiki.com/Pierre%27s_General_Store" title="Pierre&#39;s General Store">Pierre's General Store</a>.</li></ul>
</td></tr>
<tr>
<td><samp>Price</samp>
</td>
<td><i>(Optional)</i> The gold price to purchase the item from the shop. Defaults to the item's normal price, or zero if <samp>TradeItemId</samp> is specified.
</td></tr>
<tr>
<td><samp>TradeItemId</samp><br /><samp>TradeItemAmount</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_items">qualified or unqualified item ID</a> and amount which must be traded to purchase this item. Defaults to no item and 1 respectively.
<p>If both <samp>Price</samp> and <samp>TradeItemId</samp> are specified, the player will have to provide both to get the item.
</p>
</td></tr>
<tr>
<td><samp>ApplyDifficultyModifier</samp>
</td>
<td><i>(Optional)</i> Whether to multiply the price by the difficulty modifier, which reduces the price for higher <a href="../../external.html?link=https://stardewvalleywiki.com/Options" title="Options">profit margins</a>. This can be <samp>true</samp> (always apply it), <samp>false</samp> (never apply it), or <samp>null</samp> (apply for certain items like saplings). This is applied before any quantity modifiers. Default <samp>null</samp>.
</td></tr>
<tr>
<td><samp>IgnoreShopPriceModifiers</samp>
</td>
<td><i>(Optional)</i> Whether to ignore the shop's <samp>PriceModifiers</samp> field for this item. This has no effect on the item's equivalent field. Default false.
</td></tr>
<tr>
<td><samp>AvailableStockModifiers</samp><br /><samp>PriceModifiers</samp>
</td>
<td><i>(Optional)</i> <a href="#Quantity_modifiers">Quantity modifiers</a> applied to the <samp>AvailableStock</samp> or <samp>Price</samp> values.
<p>Notes:
</p>
<ul><li>The price modifiers stack with the <samp>PriceModifiers</samp> field on the shop (unless <samp>IgnoreStorePriceModifiers</samp> is true).</li></ul>
</td></tr>
<tr>
<td><samp>AvailableStockModifierMode</samp><br /><samp>PriceModifierMode</samp>
</td>
<td><i>(Optional)</i> <a href="#Quantity_modifiers">quantity modifier modes</a> which indicate what to do if multiple modifiers in the <samp>AvailableStockModifiers</samp> or <samp>PriceModifiers</samp> field apply at the same time. Default <samp>Stack</samp>.
</td></tr>
<tr>
<td><samp>AvoidRepeat</samp>
</td>
<td><i>(Optional)</i> Whether to avoid adding this item to the shop if it would duplicate one that was already added. If the item ID is randomized, this will choose a value that hasn't already been added to the shop if possible. Default false.
</td></tr>
<tr>
<td><samp>AvailableStock</samp>
</td>
<td><i>(Optional)</i> The maximum number of the item which can be purchased in one day. Default unlimited.
</td></tr>
<tr>
<td><samp>AvailableStockLimit</samp>
</td>
<td><i>(Optional)</i> If <samp>Stock</samp> is set, how the limit is applied in multiplayer. This has no effect on recipes.
<p>The possible values are:
</p>
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Global</samp>
</td>
<td>The limit is shared by every player in the world. For example, if the <samp>Stock</samp> was <samp>1</samp> and a player bought it, no other players could buy one.
</td></tr>
<tr>
<td><samp>Player</samp>
</td>
<td>The limit applies to each player separately. For example, if the <samp>Stock</samp> was <samp>1</samp>, each player could buy one.
</td></tr>
<tr>
<td><samp>None</samp>
</td>
<td>The limit applies to the current instance of the shop menu. If you exit and reopen the menu, the item will reappear with the same stock. This is mainly used for items that are added conditionally.
</td></tr></tbody></table>
<p>Default <samp>Global</samp>.
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>SalableItemTags</samp>
</td>
<td><i>(Optional)</i> A list of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">context tags</a> for items which the player can sell to to this shop. Default none.
</td></tr>
<tr>
<td><samp>Owners</samp>
</td>
<td><i>(Optional)</i> The portrait and dialogue to show in the shop menu UI.
<p>When the <a href="#Map.2Ftile_property_changes"><samp>Action OpenShop</samp> tile property</a> specifies <code title="optional field &#39;owner tile area&#39;">[owner tile area]</code>, the first NPC within the tile area which matches an owner entry is used; if no NPCs match, the shop isn't opened. If <samp>Owners</samp> is omitted, the shop is opened regardless of whether an NPC is present, and no portrait or dialogue is shown.
</p><p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Name</samp>
</td>
<td>One of...
<ul><li>the internal name for the NPC who must be in range to use this entry;</li>
<li><samp>AnyOrNone</samp> to use this entry regardless of whether any NPC is within the shop area;</li>
<li><samp>Any</samp> to use this entry if <i>any</i> NPC is within the shop area;</li>
<li><samp>None</samp> to use this entry if <i>no</i> NPC is within the shop area.</li></ul>
</td></tr>
<tr>
<td><samp>Id</samp>
</td>
<td><i>(Optional)</i> An ID for this entry within the shop. This only needs to be unique within the current shop's owner list. Defaults to the <samp>Name</samp> value.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this owner entry is available. If omitted, it's always available.
</td></tr>
<tr>
<td><samp>Portrait</samp>
</td>
<td><i>(Optional)</i> One of...
<ul><li>the internal name of the NPC whose portrait to show;</li>
<li>the asset name of the portrait spritesheet to display.</li></ul>
<p>If omitted, defaults to the portrait for the NPC matching the <samp>Name</samp> field (if any). If set to a value which doesn't match an NPC or texture asset name, the portrait is disabled.
</p>
</td></tr>
<tr>
<td><samp>Dialogues</samp>
</td>
<td><i>(Optional)</i> A list of possible dialogues if this entry is selected. Each day one dialogue will be randomly chosen to show in the shop UI. Each dialogue consists of a model with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>An ID for this dialogue. This only needs to be unique within the current dialogue list. For a custom entry, you should use a unique ID which includes your mod ID like &lt;samo&gt;ExampleMod.Id_DialogueName.
</td></tr>
<tr>
<td><samp>Dialogue</samp>
</td>
<td>The dialogue text to show, as a <a href="#Tokenizable_string_format">tokenizable string</a>. The resulting text is parsed using the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">dialogue format</a>.
</td></tr>
<tr>
<td><samp>RandomDialogue</samp>
</td>
<td><i>(Optional)</i> A list of dialogue texts to randomly choose from, using the same format as <samp>Dialogue</samp>. If set, <samp>Dialogue</samp> is optional and ignored. Each entry in the list has an equal probability of being chosen, and the choice is persisted for the current day. For example:
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;RandomDialogue&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">&quot;[LocalizedText Strings\StringsFromCSFiles:ShopMenu.cs.11469]&quot;</span><span class="p">,</span>
    <span class="s2">&quot;[LocalizedText Strings\StringsFromCSFiles:ShopMenu.cs.11470]&quot;</span><span class="p">,</span>
    <span class="s2">&quot;[LocalizedText Strings\StringsFromCSFiles:ShopMenu.cs.11471]&quot;</span>
<span class="p">]</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether the dialogue should be available. If omitted, the dialogue is always available.
</td></tr></tbody></table>
<p>This can be set to an empty list (<code>"Dialogues": []</code>) to disable the dialogue text entirely. If omitted, defaults to a generic "<i>Have a look at my wares</i>" text.
</p>
</td></tr>
<tr>
<td><samp>RandomizeDialogueOnOpen</samp>
</td>
<td><i>(Optional)</i> If <samp>Dialogues</samp> has multiple matching entries, whether to re-randomize which one is selected each time the shop is opened (<samp>true</samp>) or once per day (<samp>false</samp>).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Currency</samp>
</td>
<td><i>(Optional)</i> The currency in which all items in the shop should be priced. The valid values are 0 (money), 1 (star tokens), 2 (Qi coins), and 4 (Qi gems). Default 0. For item trading, see <samp>TradeItemId</samp> for each item.
</td></tr>
<tr>
<td><samp>StackSizeVisibility</samp>
</td>
<td><i>(Optional)</i> How to draw stack size numbers in the shop list by default. If omitted, the default shop logic is applied (usually equivalent to <samp>Show</samp>).
<p>The possible values are:
</p>
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Hide</samp>
</td>
<td>Always hide the stack size.
</td></tr>
<tr>
<td><samp>Show</samp>
</td>
<td>Always draw the stack size.
</td></tr>
<tr>
<td><samp>ShowIfMultiple</samp>
</td>
<td>Draw the stack size if it's more than one.
</td></tr></tbody></table>
<p>This is ignored in some special cases (e.g. recipes can't have a stack size).
</p>
</td></tr>
<tr>
<td><samp>OpenSound</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">audio cue ID</a> to play when the shop menu is opened. Defaults to <samp>dwop</samp>.
</td></tr>
<tr>
<td><samp>PurchaseSound</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">audio cue ID</a> to play when an item is purchased normally. Defaults to <samp>purchaseClick</samp>.
</td></tr>
<tr>
<td><samp>purchaseRepeatSound</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">audio cue ID</a> to play when accumulating a stack to purchase (e.g. by holding right-click on PC). Defaults to <samp>purchaseRepeat</samp>.
</td></tr>
<tr>
<td><samp>PriceModifiers</samp>
</td>
<td><i>(Optional)</i> <a href="#Quantity_modifiers">Quantity modifiers</a> applied to the sell price for items in this shop. See also <samp>PriceModifiers</samp> under <samp>Items</samp>.
</td></tr>
<tr>
<td><samp>PriceModifierMode</samp>
</td>
<td><i>(Optional)</i> A <a href="#Quantity_modifiers">quantity modifier mode</a> which indicates what to do if multiple modifiers in the <samp>PriceModifiers</samp> field apply at the same time. This only affects that specific field, it won't affect price modifiers under <samp>Items</samp>. Default <samp>Stack</samp>.
</td></tr>
<tr>
<td><samp>VisualTheme</samp>
</td>
<td><i>(Optional)</i> The visual theme to apply to the shop UI, or omit to use the default theme. The first matching theme is applied. All fields are optional and will fallback to the default theme.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this theme should be applied. Defaults to always true.
</td></tr>
<tr>
<td><samp>WindowBorderTexture</samp><br /><samp>WindowBorderSourceRect</samp>
</td>
<td><i>(Optional)</i> The texture asset name, and the pixel area within it, for the shop window border. Defaults to <samp>LooseSprites\Cursors</samp> at (384, 373) with size 18×18.
</td></tr>
<tr>
<td><samp>PortraitBackgroundTexture</samp><br /><samp>PortraitBackgroundSourceRect</samp>
</td>
<td><i>(Optional)</i> The texture asset name, and the pixel area within it, for the NPC portrait background. Defaults to <samp>LooseSprites\Cursors</samp> at (603, 414) with size 74×74.
</td></tr>
<tr>
<td><samp>DialogueBackgroundTexture</samp><br /><samp>DialogueBackgroundSourceRect</samp>
</td>
<td><i>(Optional)</i> The texture asset name, and the pixel area within it, for the NPC dialogue background. Defaults to <samp>Maps\MenuTiles</samp> at (0, 256) with size 60×60.
</td></tr>
<tr>
<td><samp>DialogueColor</samp><br /><samp>DialogueShadowColor</samp>
</td>
<td><i>(Optional)</i> The sprite text color for the dialogue text. This can be a <a rel="nofollow" class="external text" href="../../external.html?link=https://docs.monogame.net/api/Microsoft.Xna.Framework.Color.html#properties"><samp>Color</samp> field name</a> (like <samp>ForestGreen</samp>), RGB hex code (like <samp>#AABBCC</samp>), or RGBA hex code (<samp>#AABBCCDD</samp>). Defaults to the game's standard text color.
</td></tr>
<tr>
<td><samp>ItemRowBackgroundTexture</samp><br /><samp>ItemRowBackgroundSourceRect</samp>
</td>
<td><i>(Optional)</i> The texture asset name, and the pixel area within it, for the item row background in the shop inventory. Defaults to <samp>LooseSprites\Cursors</samp> at (384, 396) with size 15×15.
</td></tr>
<tr>
<td><samp>ItemRowBackgroundHoverColor</samp>
</td>
<td><i>(Optional)</i> The color tint to apply to the item row background in the shop inventory when the cursor is hovering over it, or <samp>White</samp> for no tint. This can be a <a rel="nofollow" class="external text" href="../../external.html?link=https://docs.monogame.net/api/Microsoft.Xna.Framework.Color.html"><samp>Color</samp> field name</a> (like <samp>ForestGreen</samp>), RGB hex code (like <samp>#AABBCC</samp>), or RGBA hex code (<samp>#AABBCCDD</samp>). Defaults to <samp>Wheat</samp>.
</td></tr>
<tr>
<td><samp>ItemRowTextColor</samp>
</td>
<td><i>(Optional)</i> The sprite text color for the item text. This can be a <a rel="nofollow" class="external text" href="../../external.html?link=https://docs.monogame.net/api/Microsoft.Xna.Framework.Color.html#properties"><samp>Color</samp> field name</a> (like <samp>ForestGreen</samp>), RGB hex code (like <samp>#AABBCC</samp>), or RGBA hex code (<samp>#AABBCCDD</samp>). Defaults to the game's standard text color.
</td></tr>
<tr>
<td><samp>ItemIconBackgroundTexture</samp><br /><samp>ItemIconBackgroundSourceRect</samp>
</td>
<td><i>(Optional)</i> The texture asset name, and the pixel area within it, for the background behind the item icons. Defaults to <samp>LooseSprites\Cursors</samp> at (296, 363) with size 18×18.
</td></tr>
<tr>
<td><samp>ScrollUpTexture</samp><br /><samp>ScrollUpSourceRect</samp>
</td>
<td><i>(Optional)</i> The texture asset name, and the pixel area within it, for the up arrow icon above the scrollbar. Defaults to <samp>LooseSprites\Cursors</samp> at (421, 459) with size 11×12.
</td></tr>
<tr>
<td><samp>ScrollDownTexture</samp><br /><samp>ScrollDownSourceRect</samp>
</td>
<td><i>(Optional)</i> The texture asset name, and the pixel area within it, for the down arrow icon beneath the scrollbar. Defaults to <samp>LooseSprites\Cursors</samp> at (421, 472) with size 11×12.
</td></tr>
<tr>
<td><samp>ScrollBarFrontTexture</samp><br /><samp>ScrollBarFrontSourceRect</samp>
</td>
<td><i>(Optional)</i> The texture asset name, and the pixel area within it, for the sliding scrollbar foreground. Defaults to <samp>LooseSprites\Cursors</samp> at (435, 463) with size 6×10.
</td></tr>
<tr>
<td><samp>ScrollBarBackTexture</samp><br /><samp>ScrollBarBackSourceRect</samp>
</td>
<td><i>(Optional)</i> The texture asset name, and the pixel area within it, for the scrollbar background. Defaults to <samp>LooseSprites\Cursors</samp> at (403, 383) with size 6×6.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Open_a_custom_shop">Open a custom shop</span></h4>
<p>You can place an <a href="#Map.2Ftile_property_changes"><samp>Action OpenShop</samp> tile property</a> on the map, which will open the given shop ID when the player clicks it.
</p><p>In C# code, you can get the inventory for a custom shop using <code>Utility.GetShopStock("shop id here")</code>, open a shop menu using <code>Utility.OpenShopMenu("shop id", …)</code>, and add temporary items to an open menu using <code>shopMenu.AddForSale(…)</code>. The ID of the opened shop is stored in the shop menu's <samp>storeContext</samp> field.
</p>
<h4><span class="mw-headline" id="Examples">Examples</span></h4>
<p>You can add or replace entire shops. For example, this content pack adds a shop that sells ice cream in summer, and pufferfish all year:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/Shops&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.ModId_CustomShop&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Owners&quot;</span><span class="o">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;Any&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;Dialogues&quot;</span><span class="o">:</span> <span class="p">[</span>
                                <span class="c1">// dialogue on sunny summer days</span>
                                <span class="p">{</span>
                                    <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_SunnySummer&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;SEASON Summer, WEATHER Here Sun&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;Dialogue&quot;</span><span class="o">:</span> <span class="s2">&quot;Ice-cream is perfect for a day like this.&quot;</span>
                                <span class="p">},</span>

                                <span class="c1">// dialogue any other time</span>
                                <span class="p">{</span>
                                    <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Default&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;Dialogue&quot;</span><span class="o">:</span> <span class="s2">&quot;Welcome to the only place in town for pufferfish!&quot;</span>
                                <span class="p">}</span>
                            <span class="p">]</span>
                        <span class="p">}</span>
                    <span class="p">],</span>

                    <span class="s2">&quot;Items&quot;</span><span class="o">:</span> <span class="p">[</span>
                        <span class="c1">// ice-cream in summer, default price</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_IceCream&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;Condition&quot;</span><span class="o">:</span> <span class="s2">&quot;SEASON Summer&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(O)233&quot;</span>
                        <span class="p">},</span>

                        <span class="c1">// pufferfish for 1000g, limited to one per day per player</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_PufferFish&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(O)128&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;Price&quot;</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
                            <span class="s2">&quot;AvailableStock&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="s2">&quot;AvailableStockLimit&quot;</span><span class="o">:</span> <span class="s2">&quot;Player&quot;</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>You can also add, replace, edit, or reorder items in a specific shop by targeting the shop's <samp>Items</samp> field. For example, this removes Trout Soup (item #219) and adds Pufferfish above bait (item #685):
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/Shops&quot;</span><span class="p">,</span>
            <span class="s2">&quot;TargetField&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;FishShop&quot;</span><span class="p">,</span> <span class="s2">&quot;Items&quot;</span> <span class="p">],</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;(O)219&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
                <span class="s2">&quot;Example.ModId_Pufferfish&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Pufferfish&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(O)128&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Price&quot;</span><span class="o">:</span> <span class="mi">2000</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;MoveEntries&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Pufferfish&quot;</span><span class="p">,</span> <span class="s2">&quot;BeforeId&quot;</span><span class="o">:</span> <span class="s2">&quot;(O)685&quot;</span> <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h4><span class="mw-headline" id="Vanilla_shop_IDs">Vanilla shop IDs</span></h4>
<p>Vanilla shops are now defined in <samp>Data/Shops</samp> too (except a few special cases like <a href="../../external.html?link=https://stardewvalleywiki.com/Category:Dressers" title="Category:Dressers">dressers</a> and home renovations), using these shop IDs:
</p>
<table class="wikitable sortable">

<tbody><tr>
<th>shop
</th>
<th>ID
</th></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Abandoned_House" title="Abandoned House">Abandoned house shop</a>
</td>
<td><samp>HatMouse</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild" title="Adventurer&#39;s Guild">Adventurer's Guild</a>
</td>
<td><samp>AdventureShop</samp> (regular shop)<br /><samp>AdventureGuildRecovery</samp> (item recovery service)
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Casino" title="Casino">Casino</a>
</td>
<td><samp>Casino</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Blacksmith" title="Blacksmith">Clint's blacksmith shop</a>
</td>
<td><samp>Blacksmith</samp> (regular shop)<br /><samp>ClintUpgrade</samp> (tool upgrades)
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Desert_Trader" title="Desert Trader">Desert trader</a>
</td>
<td><samp>DesertTrade</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Dwarf#Shop" title="Dwarf">Dwarf's shop</a>
</td>
<td><samp>Dwarf</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Harvey%27s_Clinic" title="Harvey&#39;s Clinic">Harvey's clinic</a>
</td>
<td><samp>Hospital</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Ice_Cream_Stand" title="Ice Cream Stand">Ice-cream stand</a>
</td>
<td><samp>IceCreamStand</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Island_Trader" title="Island Trader">Island trader</a>
</td>
<td><samp>IslandTrade</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Joja_Mart" class="mw-redirect" title="Joja Mart">Joja Mart</a>
</td>
<td><samp>Joja</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Krobus" title="Krobus">Krobus' shop</a>
</td>
<td><samp>ShadowShop</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Marnie%27s_Ranch" title="Marnie&#39;s Ranch">Marnie's ranch</a>
</td>
<td><samp>AnimalShop</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Pierre%27s_General_Store" title="Pierre&#39;s General Store">Pierre's general store</a>
</td>
<td><samp>SeedShop</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Carpenter%27s_Shop" title="Carpenter&#39;s Shop">Robin's carpenter shop</a>
</td>
<td><samp>Carpenter</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Saloon" class="mw-redirect" title="Saloon">Stardrop Saloon</a>
</td>
<td><samp>Saloon</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Oasis" title="Oasis">Sandy's Oasis shop</a>
</td>
<td><samp>Sandy</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Traveling_Cart" title="Traveling Cart">Traveling cart</a>
</td>
<td><samp>Traveler</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Fish_Shop" title="Fish Shop">Willy's fish shop</a>
</td>
<td><samp>FishShop</samp>
</td></tr></tbody></table>
<p>Festival shops are also defined in <samp>Data/Shops</samp> now, though they can still be defined in the pre-1.6 way for backwards compatibility.
</p>
<table class="wikitable sortable">

<tbody><tr>
<th>festival shop
</th>
<th>ID
</th></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Dance_of_the_Moonlight_Jellies" title="Dance of the Moonlight Jellies">Dance of the Moonlight Jellies</a>
</td>
<td><samp>Festival_DanceOfTheMoonlightJellies_Pierre</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Egg_Festival" title="Egg Festival">Egg Festival</a>
</td>
<td><samp>Festival_EggFestival_Pierre</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Festival_of_Ice" title="Festival of Ice">Festival of Ice</a>
</td>
<td><samp>Festival_FestivalOfIce_TravelingMerchant</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Feast_of_the_Winter_Star" title="Feast of the Winter Star">Feast of the Winter Star</a>
</td>
<td><samp>Festival_FeastOfTheWinterStar_Pierre</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Flower_Dance" title="Flower Dance">Flower Dance</a>
</td>
<td><samp>Festival_FlowerDance_Pierre</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Luau" title="Luau">Luau</a>
</td>
<td><samp>Festival_Luau_Pierre</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Night_Market" title="Night Market">Night Market</a> (decoration boat)
</td>
<td><samp>Festival_NightMarket_DecorationBoat</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Night_Market" title="Night Market">Night Market</a> (magic boat)
</td>
<td><samp>Festival_NightMarket_MagicBoat_Day1</samp><br /><samp>Festival_NightMarket_MagicBoat_Day2</samp><br /><samp>Festival_NightMarket_MagicBoat_Day3</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Spirit%27s_Eve" title="Spirit&#39;s Eve">Spirit's Eve</a>
</td>
<td><samp>Festival_SpiritsEve_Pierre</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Fair" title="Stardew Valley Fair">Stardew Valley Fair</a>
</td>
<td><samp>Festival_StardewValleyFair_StarTokens</samp>
</td></tr></tbody></table>
<p>And two special 'shops':
</p>
<table class="wikitable sortable">

<tbody><tr>
<th>item
</th>
<th>ID
</th></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Catalogue" title="Catalogue">Catalogue</a>
</td>
<td><samp>Catalogue</samp>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Furniture_Catalogue" title="Furniture Catalogue">Furniture Catalogue</a>
</td>
<td><samp>Furniture Catalogue</samp>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Dialogue_changes">Dialogue changes</span></h3>
<ul>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Item_Spawn_Cheat" title="Secrets">Item spawn codes</a> can now spawn any item type by using the <a href="#Custom_items">qualified item ID</a>, like <code>[(F)1664]</code> for a <a href="../../external.html?link=https://stardewvalleywiki.com/Mystic_Rug" title="Mystic Rug">Mystic Rug</a>.</li>
<li>For C# mods, <samp>Dialogue</samp> now tracks the translation key used to build it (when applicable). For example, you can detect when the player is rejected at the <a href="../../external.html?link=https://stardewvalleywiki.com/Flower_Dance" title="Flower Dance">Flower Dance</a> (derived from <a rel="nofollow" class="external text" href="../../external.html?link=https://github.com/spacechase0/StardewValleyMods">Three-Heart Dance Partner</a>):
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">private</span> <span class="k">void</span> <span class="nf">OnMenuChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">MenuChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">bool</span> <span class="n">isDanceRejection</span> <span class="p">=</span>
        <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">?.</span><span class="n">currentEvent</span><span class="p">?.</span><span class="n">FestivalName</span> <span class="p">==</span> <span class="s">&quot;Flower Dance&quot;</span>
        <span class="p">&amp;&amp;</span> <span class="n">e</span><span class="p">.</span><span class="n">NewMenu</span> <span class="k">is</span> <span class="n">DialogueBox</span> <span class="n">dialogueBox</span>
        <span class="p">&amp;&amp;</span> <span class="n">dialogueBox</span><span class="p">.</span><span class="n">characterDialogue</span> <span class="k">is</span> <span class="p">{}</span> <span class="n">dialogue</span>
        <span class="p">&amp;&amp;</span> <span class="n">dialogue</span><span class="p">.</span><span class="n">TranslationKey</span> <span class="p">==</span> <span class="err">$</span><span class="s">&quot;Characters\\Dialogue\\{dialogue.speaker?.Name}:danceRejection&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>For C# mods that create <samp>Dialogue</samp> instances directly, there's a few ways to do it now:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// from a translation key</span>
<span class="kt">var</span> <span class="n">dialogue</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dialogue</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="s">&quot;Strings\\StringsFromCSFiles:Utility.cs.5360&quot;</span><span class="p">);</span>

<span class="c1">// from custom text (with or without a translation key)</span>
<span class="kt">var</span> <span class="n">dialogue</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dialogue</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s">&quot;Some arbitrary text to show as-is&quot;</span><span class="p">);</span>

<span class="c1">// from a translation with tokens</span>
<span class="kt">var</span> <span class="n">dialogue</span> <span class="p">=</span> <span class="n">Dialogue</span><span class="p">.</span><span class="n">FromTranslation</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="s">&quot;Data\\ExtraDialogue:PurchasedItem_2_QualityLow_Willy&quot;</span><span class="p">,</span> <span class="n">whatToCallPlayer</span><span class="p">,</span> <span class="n">particle</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">DisplayName</span><span class="p">);</span>
</pre></div>
<p>You can also easily add fallback logic using <samp>Dialogue.TryGetDialogue</samp> or <samp>npc.TryGetDialogue</samp>. For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Dialogue</span> <span class="n">dialogue</span> <span class="p">=</span>
    <span class="n">npc</span><span class="p">.</span><span class="n">TryGetDialogue</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;rejection_{itemId}_{locationName}_{x}_{y}&quot;</span><span class="p">)</span>
    <span class="p">??</span> <span class="n">npc</span><span class="p">.</span><span class="n">TryGetDialogue</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;rejection_{itemId}_{locationName}&quot;</span><span class="p">)</span>
    <span class="p">??</span> <span class="n">npc</span><span class="p">.</span><span class="n">TryGetDialogue</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;rejection_{itemId}&quot;</span><span class="p">)</span>
    <span class="p">??</span> <span class="k">new</span> <span class="n">Dialogue</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="s">&quot;Strings\\StringsFromCSFiles:NPC.cs.3971&quot;</span><span class="p">);</span>
</pre></div>
</li>
<li>The 'reveal taste' dialogue command now uses the format <samp>%revealtaste:<code title="required field &#39;npc name&#39;">&lt;npc name&gt;</code>:<code title="required field &#39;item ID&#39;">&lt;item ID&gt;</code></samp> to support item IDs. (The previous <samp>%revealtaste<code title="required field &#39;npc name&#39;">&lt;npc name&gt;</code><code title="required field &#39;item index&#39;">&lt;item index&gt;</code></samp> format still works to support old content packs, but the item index can only be a number.)</li>
<li>Fixed NPCs only using a <code>{day name}{hearts}_{year}</code> dialogue if they also have a <code>{day name}{hearts}</code> one.</li>
<li>Fixed NPCs only using the <code>MovieInvitation</code> dialogue key in English.</li>
</ul>
<h3><span class="mw-headline" id="Schedule_changes">Schedule changes</span></h3>
<ul><li>Added an <samp>NPC.ScheduleKey</samp> field which always matches their loaded schedule.</li>
<li>Removed an unintended schedule fallback to a <samp>{season}_spring_{hearts}</samp> key. It'll skip to the <samp>spring</samp> default instead.</li>
<li>Schedules are now fault-tolerant:
<ul><li>Fixed crash if a selected schedule can't be parsed. The NPC now logs an error and continues with the next fallback instead.</li>
<li>Fixed crash if certain hardcoded schedules aren't present (like Penny's <samp>marriageJob</samp> or Pam's <samp>bus</samp>).</li></ul></li>
<li>For C# mods, removed the <samp>dayOfMonth</samp> parameter in <samp>NPC.getSchedule()</samp>. This was misleading since it used <samp>Game1.dayOfMonth</samp> in all but one line regardless.</li></ul>
<h3><span class="mw-headline" id="Other_NPC_changes">Other NPC changes</span></h3>
<ul>
<li>Added <samp>Game1.characterData</samp> and <samp>Game1.farmAnimalData</samp> to read NPC/animal info without constantly reloading the <samp>Data/Characters</samp> or <samp>Data/FarmAnimals</samp> asset.</li>
<li>All translated NPC names are now in <samp>Strings/NPCNames</samp>.
</li><li>Added new fields &amp; methods for C# mods:

<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>field/method
</th>
<th>effect
</th></tr>
<tr>
<td rowspan="2"><samp>AdventureGuild</samp>
</td>
<td><samp>IsComplete(data)</samp>
</td>
<td>Get whether an <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild" title="Adventurer&#39;s Guild">Adventurer's Guild</a> monster eradication goal has been completed, regardless of whether the player collected its rewards yet.
</td></tr>
<tr>
<td><samp>HasCollectedReward(player, id)</samp>
</td>
<td>Get whether a given player has completed an <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild" title="Adventurer&#39;s Guild">Adventurer's Guild</a> monster eradication goal and collected its rewards. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">isPhoneUnlocked</span> <span class="p">=</span> <span class="n">AdventureGuild</span><span class="p">.</span><span class="n">HasCollectedReward</span><span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">,</span> <span class="s">&quot;Gil_FlameSpirits&quot;</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>AnimalHouse</samp>
</td>
<td><samp>adoptAnimal(animal)</samp>
</td>
<td>Add an animal to this location and set the location as the animal's home.
</td></tr>
<tr>
<td><samp>Character</samp>
</td>
<td><samp>GetGender()</samp>
</td>
<td>Get the character's gender as one of the numeric constants (<samp>NPC.female</samp>, <samp>NPC.male</samp>, or <samp>NPC.undefined</samp>). This returns the specific gender for players, villager NPCs, and children; other NPCs (like monsters) return <samp>NPC.undefined</samp>.
</td></tr>
<tr>
<td rowspan="6"><samp>FarmAnimal</samp>
</td>
<td><samp>isAdult()</samp>
</td>
<td>Get whether the farm animal is fully grown (opposite of <samp>isBaby()</samp>).
</td></tr>
<tr>
<td><samp>CanGetProduceWithTool(tool)</samp>
</td>
<td>Get whether the farm animal's produce can be collected with a given tool (e.g. milk pail for a cow).
</td></tr>
<tr>
<td><samp>CanLiveIn</samp>
</td>
<td>Get whether the animal can be added to a building.
</td></tr>
<tr>
<td><samp>GetHarvestType</samp>
</td>
<td>Get whether the animal's produce is dropped or collected with a tool.
</td></tr>
<tr>
<td><samp>growFully()</samp>
</td>
<td>Instantly age the animal to adulthood if it's still a baby.
</td></tr>
<tr>
<td><samp>ReloadTextureIfNeeded(bool forceReload)</samp>
</td>
<td>Update the animal sprite based on the current state + data.
</td></tr>
<tr>
<td rowspan="3"><samp>NPC</samp>
</td>
<td><samp>GetData()</samp><br /><samp>NPC.GetData(name)</samp>
</td>
<td>Get the underlying data from <samp>Data/Characters</samp> for this NPC, if any.
</td></tr>
<tr>
<td><samp>NPC.GetDisplayName(name)</samp>
</td>
<td>Get the translated display name in the current language for an NPC by their internal name.
</td></tr>
<tr>
<td><samp>NPC.hasDarkSkin()</samp>
</td>
<td>Whether this character has dark skin for the purposes of child genetics.
</td></tr>
<tr>
<td><samp>ShopMenu</samp>
</td>
<td><samp>ShopId</samp>
</td>
<td>A key which identifies the current shop. This may be the unique shop ID in <samp>Data/Shops</samp> for a standard shop, <samp>Dresser</samp> or <samp>FishTank</samp> for furniture, etc. This is guaranteed to be set to a relevant shop ID.
<p>This replaces the former <samp>shopContext</samp> field, and will usually have the same value in cases where that was set to a unique shop ID.
</p>
</td></tr>
<tr>
<td><samp>Utility</samp>
</td>
<td><samp>getAllVillagers</samp>
</td>
<td>Get all villager NPCs (excluding horses, pets, monsters, player children, etc). This works just like <samp>getAllCharacters</samp> with an added filter.
</td></tr></tbody></table>
</li>
<li>Removed most <samp>FarmAnimal</samp> fields/properties which just mirror the underlying data.</li>
<li>Fixed child NPCs ignoring relative titles like "mom" in <samp>Data/NPCDispositions</samp> (now <samp>Data/Characters</samp>) for reveal-gift-taste dialogues.</li>
<li>Fixed custom NPCs ignoring dialogue when they use a subclass of <samp>NPC</samp>.</li>
</ul>
<h2><span id="What's_new_for_everything_else"></span><span class="mw-headline" id="What.27s_new_for_everything_else">What's new for everything else</span></h2>
<h3><span class="mw-headline" id="Buff_overhaul">Buff overhaul</span></h3>
<p>1.6 rewrites buffs to work more consistently and be more extensible:
</p>
<ul><li>Buff logic is unified into <samp>Game1.player.buffs</samp>, which is the single source of truth for buff data. This replaces the previous <samp>player.added*</samp> and <samp>player.appliedBuffs</samp> fields, <samp>BuffsDisplay</samp> logic, enchantment stat bonuses, and boots/ring attribute changes on (un)equip.</li>
<li>This also removes limitations on buff types (e.g. buffs can add weapon bonuses and weapons can add attribute buffs) and buffable equipment (e.g. equipped tools can have buffs too).</li>
<li>Buff effects are now fully recalculated when they change, to fix a range of longstanding bugs like attribute drift and double-debuffs. Just like before, the buffs are managed locally; only the buff IDs and aggregate attribute effects are synced.</li></ul>
<p><b>For C# mods:</b>
</p>
<ul><li>Each buff now has a unique string ID. You can apply a new buff with the same ID to replace it (so you no longer need to manually find and remove previous instances of the buff).</li>
<li>You can add standard buff effects to any equipment by overriding <samp>Item.AddEquipmentEffects</samp>, or add custom behaviour/buffs by overriding <samp>Item.onEquip</samp> and <samp>Item.onUnequip</samp>.</li>
<li>You can add custom food or drink buffs by overriding <samp>Item.GetFoodOrDrinkBuffs()</samp>.</li>
<li>The <samp>Buff</samp> constructor now supports a custom icon texture, sprite index, display name, description, and millisecond duration to fully support custom buffs.</li>
<li>You can change how buff attributes are displayed (or add new attributes) by extending the <samp>BuffsDisplay.displayAttributes</samp> list.</li></ul>
<p>For example, here's how to add a custom buff which adds +3 speed:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Buff</span> <span class="n">buff</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Buff</span><span class="p">(</span>
    <span class="n">buff_id</span><span class="p">:</span> <span class="s">&quot;Example.ModId/ZoomZoom&quot;</span><span class="p">,</span>
    <span class="n">display_name</span><span class="p">:</span> <span class="s">&quot;Zoom Zoom&quot;</span><span class="p">,</span> <span class="c1">// can optionally specify description text too</span>
    <span class="n">icon_texture</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Texture2D</span><span class="p">&gt;(</span><span class="s">&quot;assets/zoom.png&quot;</span><span class="p">),</span>
    <span class="n">icon_sheet_index</span><span class="p">:</span> <span class="m">0</span><span class="p">,</span>
    <span class="n">duration</span><span class="p">:</span> <span class="m">30</span><span class="n">_000</span><span class="p">,</span> <span class="c1">// 30 seconds</span>
    <span class="n">buff_effects</span><span class="p">:</span> <span class="k">new</span> <span class="n">BuffEffects</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">speed</span> <span class="p">=</span> <span class="p">{</span> <span class="m">10</span> <span class="p">}</span> <span class="c1">// shortcut for buff.speed.Value = 10</span>
    <span class="p">}</span>
<span class="p">);</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">applyBuff</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
</pre></div>
<p>You can also implement your own custom effects in code by checking if the buff is active, like <code>Game1.player.hasBuff("Example.ModId/ZoomZoom")</code>.
</p>
<h3><span class="mw-headline" id="Custom_audio">Custom audio</span></h3>
<p>You can now add or edit <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Audio" title="Modding:Audio">music tracks or sound effects</a> (called <i>cues</i>) by editing the <samp>Data/AudioChanges</samp> asset. New cues are added to the game's soundbank, so they can be used anywhere normal audio can be used (e.g. the <samp>Music</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map property</a>).
</p>
<h4><span class="mw-headline" id="Format_7">Format</span></h4>
<p>The <samp>Data/AudioChanges</samp> asset consists of a string → model lookup, where the key matches the <samp>ID</samp>, and the value is a model with the fields below.
</p><p>Entries in this asset describe an <b>override</b> applied to the soundbank. The override is applied permanently for the current game session, even if the asset is edited to remove it. Overriding a cue will reset all values to the ones specified.
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>A unique cue ID, used when playing the sound in-game. The ID should only contain alphanumeric/underscore/dot characters. For custom audio cues, this should be prefixed with your mod ID like <samp>Example.ModId_AudioName</samp>.
</td></tr>
<tr>
<td><samp>FilePaths</samp>
</td>
<td>A list of file paths (not asset names) from which to load the audio. These can be absolute paths or relative to the game's <samp>Content</samp> folder. Each file can be <samp>.ogg</samp> or <samp>.wav</samp>. If you list multiple paths, a random one will be chosen each time it's played.
</td></tr>
<tr>
<td><samp>Category</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Audio#Category_list" title="Modding:Audio">audio category</a>, which determines which volume slider in the game options applies. This should be one of <samp>Default</samp>, <samp>Music</samp>, <samp>Sound</samp>, <samp>Ambient</samp>, or <samp>Footsteps</samp> (see <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Audio#Category_list" title="Modding:Audio">a description of each category</a>). Defaults to <samp>Default</samp>.
</td></tr>
<tr>
<td><samp>StreamedVorbis</samp>
</td>
<td>Whether the audio should be streamed from disk when it's played, instead of being loaded into memory ahead of time. This is only possible for <a href="../../external.html?link=https://en.wikipedia.org/wiki/Vorbis" class="extiw" title="wikipedia:Vorbis">Ogg Vorbis</a> (<samp>.ogg</samp>) files, which otherwise will be decompressed in-memory on load. Default false.
<p>This is a tradeoff between memory usage and performance, so you should consider which value is best for each audio cue:
</p>
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>true</samp>
</td>
<td>Reduces memory usage when the audio cue isn't active, but increases performance impact when it's played. Playing the audio multiple times will multiply the memory and performance impact while they're active, since each play will stream a new instance. Recommended for longer audio cues (like music or ambient noise), or cues that are rarely used in a specific scenario (e.g. a sound that only plays once in an event).
</td></tr>
<tr>
<td><samp>false</samp>
</td>
<td>Increases memory usage (since it's fully loaded into memory), but reduces performance impact when it's played. It can be played any number of times without affecting memory or performance (it'll just play the cached audio). Recommended for sound effects, or short audio cues that are played occasionally.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Looped</samp>
</td>
<td>Whether the audio cue loops continuously until stopped. Default false.
</td></tr>
<tr>
<td><samp>UseReverb</samp>
</td>
<td>Whether to apply a <a href="../../external.html?link=https://en.wikipedia.org/wiki/Reverberation" class="extiw" title="wikipedia:Reverberation">reverb</a> effect to the audio. Default false.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Example_3">Example</span></h4>
<p>This content pack adds a new music cue to the game, and plays it when the player enters the bus stop:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// add music cue</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/AudioChanges&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.ModId_Music&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;ID&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Music&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Category&quot;</span><span class="o">:</span> <span class="s2">&quot;Music&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;FilePaths&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;{{AbsoluteFilePath: assets/music.ogg}}&quot;</span> <span class="p">],</span>
                    <span class="s2">&quot;StreamedVorbis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="s2">&quot;Looped&quot;</span><span class="o">:</span> <span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// add to bus stop</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditMap&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Maps/BusStop&quot;</span><span class="p">,</span>
            <span class="s2">&quot;MapProperties&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Music&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.ModId_Music&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h4><span class="mw-headline" id="Other_changes">Other changes</span></h4>
<ul><li>The game no longer crashes when playing audio which doesn't exist. It now logs an error and returns a default quiet click sound instead. (If you use <code>try..catch</code> to check if an audio cue exists, you should check <code>Game1.soundbank.Exists(name)</code> instead.)</li></ul>
<h3><span class="mw-headline" id="Custom_data_fields">Custom data fields</span></h3>
<p>Many data assets now have a <samp>CustomFields</samp> field. This is ignored by the game, but lets mods add their own data (e.g. to enable mod framework features).
</p><p>For example, a content pack can <a href="#Custom_crops">add a crop</a> with custom fields:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/Crops&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.Id_CucumberSeeds&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Seasons&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;summer&quot;</span> <span class="p">],</span>
                    <span class="s2">&quot;DaysInPhase&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">],</span>
                    <span class="s2">&quot;HarvestItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;Example.Id_Cucumber&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Texture&quot;</span><span class="o">:</span> <span class="s2">&quot;{{InternalAssetKey: assets/crops.png}}&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;SpriteIndex&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

                    <span class="s2">&quot;CustomFields&quot;</span><span class="o">:</span> <span class="p">{</span>
                        <span class="s2">&quot;Example.FrameworkMod/WetTexture&quot;</span><span class="o">:</span> <span class="s2">&quot;{{InternalAssetKey: assets/crops-wet.png}}&quot;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>And then a C# mod could handle the custom field if it's set:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">IsRainingHere</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">CropData</span> <span class="n">data</span> <span class="p">=</span> <span class="n">crop</span><span class="p">.</span><span class="n">GetData</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">data</span><span class="p">.</span><span class="n">CustomFields</span><span class="p">.</span><span class="n">TryGet</span><span class="p">(</span><span class="s">&quot;Example.FrameworkMod/WetTexture&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">textureName</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="c1">// do magic</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>See <samp>CustomFields</samp> in the docs for each asset type to see if it's supported. Besides the sections listed on this page, custom fields were also added to <samp>Data/AdditionalFarms</samp>, <samp>Data/AdditionalLanguages</samp>, <samp>Data/Movies</samp>, and <samp>Data/SpecialOrders</samp>.
</p>
<h3><span class="mw-headline" id="Custom_giant_crops">Custom giant crops</span></h3>
<p>You can now add/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Crops#Giant_Crops" title="Crops">giant crops</a> by editing the <samp>Data/GiantCrops</samp> data asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a unique identifier for the giant crop. The ID should only contain alphanumeric/underscore/dot characters. For custom giant crops, this should be prefixed with your mod ID like <samp>Example.ModId_GiantCropName</samp>.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>FromItemId</samp>
</td>
<td>The <a href="#Custom_items">item ID</a> (qualified or unqualified) for the harvest ID of the regular crop which can turn into this giant crop. For example, <samp>(O)254</samp> is <a href="../../external.html?link=https://stardewvalleywiki.com/Melon" title="Melon">melon</a>.
<p>Any number of giant crops can use the same <samp>FromItemId</samp> value. The first giant crop whose other fields match (if any) will spawn.
</p>
</td></tr>
<tr>
<td><samp>HarvestItems</samp>
</td>
<td>The items which can be dropped when you break the giant crop. If multiple items match, they'll all be dropped.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="#Item_spawn_fields">item spawn fields</a> for the generic item fields supported for harvest items.
<p>If set to an <a href="#Item_queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that this entry is selected, as a value between 0 (never drops) and 1 (always drops). Default 1 (100% chance).
</td></tr>
<tr>
<td><samp>ForShavingEnchantment</samp>
</td>
<td><i>(Optional)</i> Whether this item is only dropped for <a href="../../external.html?link=https://stardewvalleywiki.com/Enchantments#Tool_enchantments" class="mw-redirect" title="Enchantments">Shaving enchantment</a> drops (<samp>true</samp>), only when the giant crop is broken (<samp>false</samp>), or both (<samp>null</samp>). Default both.
</td></tr>
<tr>
<td><samp>ScaledMinStackWhenShaving</samp><br /><samp>ScaledMaxStackWhenShaving</samp>
</td>
<td><i>(Optional)</i> If set, the min/max stack size when this item is dropped due to the <a href="../../external.html?link=https://stardewvalleywiki.com/Forge#Enchantments" title="Forge">shaving enchantment</a>, scaled to the tool's power level.
<p>This value is multiplied by the health deducted by the tool hit which triggered the enchantment. For example, an iridium axe which reduced the giant crop's health by 3 points will produce three times this value per hit.
</p><p>If both fields are set, the stack size is randomized between them. If only one is set, it's applied as a limit after the generic fields. If neither is set, the generic <samp>MinStack</samp>/<samp>MaxStack</samp> fields are applied as usual without scaling.
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture containing the giant crop's sprite.
</td></tr>
<tr>
<td><samp>TexturePosition</samp>
</td>
<td><i>(Optional)</i> The top-left pixel position of the sprite within the <samp>Texture</samp>, specified as a model with <samp>X</samp> and <samp>Y</samp> fields. Defaults to (0, 0).
</td></tr>
<tr>
<td><samp>TileSize</samp>
</td>
<td><i>(Optional)</i> The area in tiles occupied by the giant crop, specified as a model with <samp>X</samp> and <samp>Y</samp> fields. This affects both its sprite size (which should be 16 pixels per tile) and the grid of crops needed for it to grow. Note that giant crops are drawn with an extra tile's height. Defaults to (3, 3).
</td></tr>
<tr>
<td><samp>Health</samp>
</td>
<td><i>(Optional)</i> The health points that must be depleted to break the giant crop. The number of points depleted per <a href="../../external.html?link=https://stardewvalleywiki.com/Axe" class="mw-redirect" title="Axe">axe</a> chop depends on the axe power level. Default 3.
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The percentage chance that a given grid of crops will grow into the giant crop each night, as a value between 0 (never) and 1 (always). Default 0.01 (1%).
<p>Note that the chance is checked for each giant crop that applies. If three giant crops each have a 1% chance of spawning for the same crop, then there's a 3% chance that one of them will spawn.
</p>
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this giant crop is available to spawn. Defaults to always true.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Custom_wedding_event">Custom wedding event</span></h3>
<p>The <a href="../../external.html?link=https://stardewvalleywiki.com/Marriage#The_Wedding" title="Marriage">wedding</a> event can now be changed by editing the <samp>Data\Weddings</samp> data asset, which consists of a data model with two relevant fields (listed below).
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>EventScript</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event scripts</a> which play the wedding. The game will use the script for the spouse NPC/player if it exists, otherwise it'll use the default script.
<p>This consists of a string → string dictionary, where...
</p>
<ul><li>The key is an NPC internal name (like <samp>Abigail</samp>), unique player ID, or <samp>default</samp> for the default script (which handles marrying either an NPC or player);</li>
<li>The value is a <a href="#Tokenizable_string_format">tokenizable strings</a> for the event script to play.</li></ul>
<p>The event scripts also have access to three extra tokens:
</p>
<table class="wikitable">

<tbody><tr>
<th>token
</th>
<th>effect
</th></tr>
<tr>
<td><samp>[SetupContextualWeddingAttendees]</samp>
</td>
<td>The concatenated <samp>Setup</samp> values for each of the <samp>Attendees</samp> present in the wedding.
</td></tr>
<tr>
<td><samp>[ContextualWeddingCelebrations]</samp>
</td>
<td>The concatenated <samp>Celebration</samp> values for each of the <samp>Attendees</samp> present in the wedding.
</td></tr>
<tr>
<td><samp>[SpouseActor]</samp>
</td>
<td>The actor ID for the NPC or other player being married (like <samp>Abigail</samp> for an NPC or <samp>farmer2</samp> for a player). This can be used in event commands like <code>faceDirection [SpouseActor] 1</code>.
<p>(You can also use <samp>spouse</samp> as an actor ID, but that will only work when marrying an NPC.)
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Attendees</samp>
</td>
<td>The other NPCs which should attend the wedding (unless they're the spouse). This consists of a string → model lookup, where the key is the internal NPC name, and the value is a model with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>The internal NPC name.
</td></tr>
<tr>
<td><samp>Setup</samp>
</td>
<td>The NPC's tile position and facing direction when they attend. This is equivalent to field index 2 in the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Basic_format" title="Modding:Event data">event basic data</a>.
</td></tr>
<tr>
<td><samp>Celebration</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event script</a> to run during the celebration, like <samp>faceDirection Pierre 3 true</samp> which makes Pierre turn to face left. This can contain any number of script commands.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether the NPC should attend. Defaults to true.
</td></tr></tbody></table>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Game_state_queries">Game state queries</span></h3>
<p>A <i>game state query</i> is a vanilla way to specify conditions for some content like <a href="#Custom_shops">shop data</a>, inspired by <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a>'s conditions. A query consists of a comma-delimited list of conditions in the form <code title="required field &#39;type&#39;">&lt;type&gt;</code> <code title="optional field &#39;arguments&#39;">[arguments]</code>, where <code title="required field &#39;type&#39;">&lt;type&gt;</code> is case-sensitive. The type can be prefixed with <code>!</code> to negate it. The query is true if it's null/blank, or if every listed condition exists and is true. For example, <code>!SEASON Spring, WEATHER Here Sun</code> is true on sunny non-<a href="../../external.html?link=https://stardewvalleywiki.com/Spring" title="Spring">spring</a> days.
</p><p><b>⚠</b> Game state queries are partly case-sensitive. While some values are case-insensitive (e.g. both <code>SEASON Spring</code> and <code>SEASON spring</code> will work), this isn't consistent. Using the exact capitalization is recommended to avoid issues.
</p>
<h4><span class="mw-headline" id="Conditions">Conditions</span></h4>
<dl>
<dt>Date &amp; time</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>Condition
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DAY_OF_MONTH <code title="required field &#39;day&#39;">&lt;day&gt;</code>+</samp>
</td>
<td>The day of month. This can be an integer between 1 and 28, or <samp>even</samp>/<samp>odd</samp> to match on any even/odd day. You can specify multiple values to match any of them.
</td></tr>
<tr>
<td><samp>DAY_OF_WEEK <code title="required field &#39;day&#39;">&lt;day&gt;</code>+</samp>
</td>
<td>The day of week. This can be an integer between 0 (Sunday) and 6 (Saturday), three-letter English name (like <samp>Fri</samp>), or full English name (like <samp>Friday</samp>). You can specify multiple values to match any of them (like <samp>DAY_OF_WEEK Monday Tuesday</samp> for Monday <i>or</i> Tuesday).
</td></tr>
<tr>
<td><samp>DAYS_PLAYED <code title="required field &#39;count&#39;">&lt;count&gt;</code></samp>
</td>
<td>Whether at least <code title="required field &#39;count&#39;">&lt;count&gt;</code> days have been played in the current save (including the current one). This always increments in sync with the date in the base game, but when mods change the in-game date, they may or may not update this value.
</td></tr>
<tr>
<td><samp>IS_FESTIVAL_DAY <code title="optional field &#39;day offset&#39;">[day offset]</code></samp>
</td>
<td>Whether there's a festival today, with an optional <code title="optional field &#39;day offset&#39;">[day offset]</code> (e.g. 1 for tomorrow).
</td></tr>
<tr>
<td><samp>IS_PASSIVE_FESTIVAL_OPEN <code title="required field &#39;id&#39;">&lt;id&gt;</code></samp>
</td>
<td>Whether a <a href="#Custom_passive_festivals">passive festival</a> with the given ID is active today, and the current time is within its opening hours.
</td></tr>
<tr>
<td><samp>IS_PASSIVE_FESTIVAL_TODAY <code title="required field &#39;id&#39;">&lt;id&gt;</code></samp>
</td>
<td>Whether a <a href="#Custom_passive_festivals">passive festival</a> with the given ID is active today.
</td></tr>
<tr>
<td><samp>SEASON <code title="required field &#39;season&#39;">&lt;season&gt;</code>+</samp>
</td>
<td>The season (one of <samp>spring</samp>, <samp>summer</samp>, <samp>fall</samp>, or <samp>winter</samp>). You can specify multiple values to match any of them (like <samp>SEASON spring summer</samp> for spring <i>or</i> summer).
</td></tr>
<tr>
<td><samp>SEASON_DAY [<code title="required field &#39;season&#39;">&lt;season&gt;</code> <code title="required field &#39;day&#39;">&lt;day&gt;</code>]+</samp>
</td>
<td>The season (in the same format as <samp>SEASON</samp>) and day (an integer between 1 and 28). You can specify multiple values to match any of them (like <samp>SEASON_DAY fall 15 winter 20</samp> for fall 15 <i>or</i> winter 20).
</td></tr>
<tr>
<td><samp>TIME <code title="required field &#39;min&#39;">&lt;min&gt;</code> <code title="required field &#39;max&#39;">&lt;max&gt;</code></samp>
</td>
<td>Whether the current time is between <code title="required field &#39;min&#39;">&lt;min&gt;</code> and <code title="required field &#39;max&#39;">&lt;max&gt;</code> inclusively, specified in <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#Time_format" title="Modding:Modder Guide/Game Fundamentals">26-hour time</a>. Each value can be set to 0 or less to ignore it (<i>e.g.</i> <samp>TIME 900 -1</samp> for 9am or later).
</td></tr>
<tr>
<td><samp>YEAR <code title="required field &#39;min year&#39;">&lt;min year&gt;</code></samp>
</td>
<td>Whether the year is equal <b>or more than</b> the given value. For example, <code>YEAR 2</code> is true in year 2 and all later years.
</td></tr></tbody></table>
</dd>

<dt>World</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>Condition
</th>
<th>effect
</th></tr>
<tr>
<td><samp>CAN_BUILD_CABIN</samp>
</td>
<td>Whether players can build more <a href="../../external.html?link=https://stardewvalleywiki.com/Cabin" title="Cabin">cabins</a> (i.e. they haven't reached the maximum number of player slots yet).
</td></tr>
<tr>
<td><samp>CAN_BUILD_FOR_CABINS <code title="required field &#39;building ID&#39;">&lt;building ID&gt;</code></samp>
</td>
<td>Whether there are fewer of the given building constructed than there are cabins.
</td></tr>
<tr>
<td><samp>FARM_CAVE <code title="required field &#39;type&#39;">&lt;type&gt;</code></samp>
</td>
<td>The current <a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm#The_Cave" title="The Farm">farm cave</a> (one of <samp>Bats</samp>, <samp>Mushrooms</samp>, or <samp>None</samp>).
</td></tr>
<tr>
<td><samp>FARM_NAME <code title="required field &#39;name&#39;">&lt;name&gt;</code></samp>
</td>
<td>The name of the farm.
</td></tr>
<tr>
<td><samp>FARM_TYPE <code title="required field &#39;type&#39;">&lt;type&gt;</code></samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Farm_Maps" title="Farm Maps">farm type</a>. The <code title="required field &#39;type&#39;">&lt;type&gt;</code> can be one of...
<ul><li>a numeric ID for a vanilla farm type: <samp>1</samp> (standard), <samp>2</samp> (riverland), <samp>3</samp> (forest), <samp>4</samp> (hilltop), <samp>4</samp> (combat), <samp>5</samp> (four corners), or <samp>6</samp> (beach);</li>
<li>a readable key for a vanilla farm type: <samp>Standard</samp>, <samp>Beach</samp>, <samp>Forest</samp>, <samp>FourCorners</samp>, <samp>Hilltop</samp>, <samp>Riverland</samp>, or <samp>Wilderness</samp>;</li>
<li>or the ID for a custom farm type.</li></ul>
</td></tr>
<tr>
<td><samp>FOUND_ALL_LOST_BOOKS</samp>
</td>
<td>Whether all the <a href="../../external.html?link=https://stardewvalleywiki.com/Lost_Books" title="Lost Books">Lost Books</a> for the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a> have been found.
</td></tr>
<tr>
<td><samp>IS_COMMUNITY_CENTER_COMPLETE</samp>
</td>
<td>Whether the <a href="../../external.html?link=https://stardewvalleywiki.com/Community_Center" title="Community Center">community center</a> has been repaired.
</td></tr>
<tr>
<td><samp>IS_CUSTOM_FARM_TYPE</samp>
</td>
<td>Whether the <a href="../../external.html?link=https://stardewvalleywiki.com/Farm_Maps" title="Farm Maps">farm type</a> is a custom one created by a mod. (This returns false for mods which edit/replace a vanilla farm type.)
</td></tr>
<tr>
<td><samp>IS_HOST</samp>
</td>
<td>Whether the current player is the main/host player.
</td></tr>
<tr>
<td><samp>IS_ISLAND_NORTH_BRIDGE_FIXED</samp>
</td>
<td>Whether the <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island#Island_North" title="Ginger Island">North Ginger Island</a> bridge to the dig site has been repaired.
</td></tr>
<tr>
<td><samp>IS_JOJA_MART_COMPLETE</samp>
</td>
<td>Whether the <a href="../../external.html?link=https://stardewvalleywiki.com/Joja_Warehouse" title="Joja Warehouse">Joja warehouse</a> has been built.
</td></tr>
<tr>
<td><samp>IS_MULTIPLAYER</samp>
</td>
<td>Whether the game is currently in multiplayer mode (regardless of whether there's multiple players connected).
</td></tr>
<tr>
<td><samp>IS_VISITING_ISLAND <code title="required field &#39;name&#39;">&lt;name&gt;</code></samp>
</td>
<td>Whether the named NPC is visiting <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a> today.
</td></tr>
<tr>
<td><samp>LOCATION_ACCESSIBLE <code title="required field &#39;name&#39;">&lt;name&gt;</code></samp>
</td>
<td>Whether the given location is accessible (one of <samp>CommunityCenter</samp>, <samp>JojaMart</samp>, or <samp>Railroad</samp>). Returns true for any other name, regardless of whether it's accessible.
</td></tr>
<tr>
<td><samp>LOCATION_CONTEXT <code title="required field &#39;location&#39;">&lt;location&gt;</code></samp>
</td>
<td>The location context name for the <a href="#Target_location">given location</a>.
</td></tr>
<tr>
<td><samp>LOCATION_IS_MINES <code title="required field &#39;location&#39;">&lt;location&gt;</code></samp><br /><samp>LOCATION_IS_SKULL_CAVE <code title="required field &#39;location&#39;">&lt;location&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_location">given location</a> is in <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">the mines</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Skull_Cavern" title="Skull Cavern">Skull Cavern</a>.
</td></tr>
<tr>
<td><samp>LOCATION_SEASON <code title="required field &#39;location&#39;">&lt;location&gt;</code> [<code title="required field &#39;season&#39;">&lt;season&gt;</code>]+</samp>
</td>
<td>Whether the <a href="#Target_location">given location</a> is in one of the given seasons (which can be <samp>spring</samp>, <samp>summer</samp>, <samp>fall</samp>, or <samp>winter</samp>). This accounts for the <samp>SeasonOverride</samp> field in the <a href="#Custom_location_contexts">location's context data</a>.
<p>For example, this is valid in spring <i>or</i> summer: <code>LOCATION_SEASON Here spring summer</code>.
</p>
</td></tr>
<tr>
<td><samp>MUSEUM_DONATIONS <code title="required field &#39;min count&#39;">&lt;min count&gt;</code> <code title="optional field &#39;object type&#39;">[object type]</code>+</samp>
</td>
<td>Whether at least <code title="required field &#39;min count&#39;">&lt;min count&gt;</code> items have been donated (by any player) to the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a>. This can optionally be filtered by the object type field, like <samp>MUSEUM_DONATIONS 40 Arch Minerals</samp> to require at least 40 artifacts and minerals combined.
</td></tr>
<tr>
<td><samp>WEATHER <code title="required field &#39;location&#39;">&lt;location&gt;</code> <code title="required field &#39;weather&#39;">&lt;weather&gt;</code></samp>
</td>
<td>The weather ID in the <a href="#Target_location">given location</a>. The weather can be one of <samp>Festival</samp>, <samp>Rain</samp>, <samp>Snow</samp>, <samp>Storm</samp>, <samp>Sun</samp>, <samp>Wind</samp>, or a <a href="#Custom_weather">custom weather ID</a>.
</td></tr>
<tr>
<td><samp>WORLD_STATE_FIELD <code title="required field &#39;name&#39;">&lt;name&gt;</code> <code title="required field &#39;value&#39;">&lt;value&gt;</code></samp>
</td>
<td>Whether a property on <samp>Game1.netWorldState</samp> has the given value. Some useful values not covered by their own query:
<table class="wikitable">

<tbody><tr>
<th>name
</th>
<th>effect
</th></tr>
<tr>
<td><samp>GoldenCoconutCracked</samp>
</td>
<td>Whether the player has cracked open any <a href="../../external.html?link=https://stardewvalleywiki.com/Golden_Coconut" title="Golden Coconut">Golden Coconuts</a> (<samp>true</samp> or <samp>false</samp>).
</td></tr>
<tr>
<td><samp>GoldenWalnutsFound</samp><br /><samp>GoldenWalnuts</samp>
</td>
<td>The total number of <a href="../../external.html?link=https://stardewvalleywiki.com/Golden_Walnut" title="Golden Walnut">Golden Walnuts</a> found or held by any player. To check how many one player currently holds, see the <samp>PLAYER_HAS_ITEM</samp> query.
</td></tr>
<tr>
<td><samp>IsGoblinRemoved</samp>
</td>
<td>Whether the <a href="../../external.html?link=https://stardewvalleywiki.com/Henchman" title="Henchman">Henchman</a> has been removed, so the player can access <a href="../../external.html?link=https://stardewvalleywiki.com/Witch%27s_Hut" title="Witch&#39;s Hut">Witch's Hut</a> (<samp>true</samp> or <samp>false</samp>).
</td></tr>
<tr>
<td><samp>IsSubmarineLocked</samp>
</td>
<td>Whether the <a href="../../external.html?link=https://stardewvalleywiki.com/Night_Market" title="Night Market">Night Market</a> submarine is currently in use by a player (<samp>true</samp> or <samp>false</samp>).
</td></tr>
<tr>
<td><samp>LostBooksFound</samp>
</td>
<td>The total number of <a href="../../external.html?link=https://stardewvalleywiki.com/Lost_Book" class="mw-redirect" title="Lost Book">Lost Books</a> found or held by any player.
</td></tr>
<tr>
<td><samp>MinesDifficulty</samp><br /><samp>SkullCavesDifficulty</samp>
</td>
<td>The current <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines#Shrine_of_Challenge" title="The Mines">Shrine of Challenge</a> difficulty level for the <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">mine</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Skull_Cavern" title="Skull Cavern">Skull Cavern</a> (a numeric value, where <samp>0</samp> is the default level when the shrine is deactivated).
</td></tr>
<tr>
<td><samp>MiniShippingBinsObtained</samp>
</td>
<td>The number of times the player has obtained a <a href="../../external.html?link=https://stardewvalleywiki.com/Mini-Shipping_Bin" title="Mini-Shipping Bin">Mini-Shipping Bin</a>.
</td></tr>
<tr>
<td><samp>ParrotPlatformsUnlocked</samp>
</td>
<td>Whether the player has unlocked <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a> parrot platforms, regardless of whether they've completed them (<samp>true</samp> or <samp>false</samp>).
</td></tr>
<tr>
<td><samp>ServerPrivacy</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Multiplayer" title="Multiplayer">multiplayer</a> connection privacy mode (<samp>InviteOnly</samp> or <samp>FriendsOnly</samp>).
</td></tr>
<tr>
<td><samp>ShuffleMineChests</samp>
</td>
<td>The value of the 'mine rewards' <a href="../../external.html?link=https://stardewvalleywiki.com/Options" title="Options">game option</a> (<samp>Default</samp> or <samp>Remixed</samp>).
</td></tr>
<tr>
<td><samp>WeatherForTomorrow</samp>
</td>
<td>The weather ID for tomorrow in the main valley area.
</td></tr>
<tr>
<td><samp>VisitsUntilY1Guarantee</samp>
</td>
<td>The number of times the <a href="../../external.html?link=https://stardewvalleywiki.com/Traveling_Cart" title="Traveling Cart">Traveling Cart</a> will visit before <a href="../../external.html?link=https://stardewvalleywiki.com/Red_Cabbage" title="Red Cabbage">Red Cabbage</a> is guaranteed to drop.
</td></tr></tbody></table>
<p>For example, the <a href="../../external.html?link=https://stardewvalleywiki.com/Traveling_Cart" title="Traveling Cart">Traveling Cart</a> shop uses a <code>WORLD_STATE_FIELD VisitsUntilY1Guarantee 0</code> condition to check if it should guarantee a <a href="../../external.html?link=https://stardewvalleywiki.com/Red_Cabbage" title="Red Cabbage">Red Cabbage</a> item.
</p>
</td></tr>
<tr>
<td><samp>WORLD_STATE_ID <code title="required field &#39;id&#39;">&lt;id&gt;</code></samp>
</td>
<td>Whether any world state flag with the given <code title="required field &#39;id&#39;">&lt;id&gt;</code> is set.
</td></tr></tbody></table>
</dd>

<dt>Player info &amp; progress</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>Condition
</th>
<th>effect
</th></tr>
<tr>
<td><samp>MINE_LOWEST_LEVEL_REACHED <code title="required field &#39;level&#39;">&lt;level&gt;</code></samp>
</td>
<td>Whether any player has reached at least level <code title="required field &#39;level&#39;">&lt;level&gt;</code> in <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">the mines</a>.
</td></tr>
<tr>
<td><samp>PLAYER_COMBAT_LEVEL <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;level&#39;">&lt;level&gt;</code></samp><br /><samp>PLAYER_FARMING_LEVEL <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;level&#39;">&lt;level&gt;</code></samp><br /><samp>PLAYER_FISHING_LEVEL <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;level&#39;">&lt;level&gt;</code></samp><br /><samp>PLAYER_FORAGING_LEVEL <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;level&#39;">&lt;level&gt;</code></samp><br /><samp>PLAYER_LUCK_LEVEL <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;level&#39;">&lt;level&gt;</code></samp><br /><samp>PLAYER_MINING_LEVEL <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;level&#39;">&lt;level&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have a <a href="../../external.html?link=https://stardewvalleywiki.com/Skills" title="Skills">skill level</a> of at least <code title="required field &#39;level&#39;">&lt;level&gt;</code>, including the effects of buffs which raise them.
</td></tr>
<tr>
<td><samp>PLAYER_CURRENT_MONEY <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;amount&#39;">&lt;amount&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have at least <code title="required field &#39;amount&#39;">&lt;amount&gt;</code> gold.
</td></tr>
<tr>
<td><samp>PLAYER_FARMHOUSE_UPGRADE <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;level&#39;">&lt;level&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have upgraded their <a href="../../external.html?link=https://stardewvalleywiki.com/Farmhouse" title="Farmhouse">farmhouse</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Cabin" title="Cabin">cabin</a> to at least the given level (see <a rel="nofollow" class="external text" href="../../external.html?link=https://github.com/Pathoschild/StardewMods/blob/develop/ContentPatcher/docs/author-guide/tokens.md#FarmhouseUpgrade">possible levels</a>).
</td></tr>
<tr>
<td><samp>PLAYER_GENDER <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;gender&#39;">&lt;gender&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> are <samp>Male</samp> or <samp>Female</samp>.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_ACHIEVEMENT <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;achievement id&#39;">&lt;achievement id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have unlocked a specific achievement ID. The valid IDs are listed in <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Achievement_data" title="Modding:Achievement data"><samp>Data/Achievements</samp></a>, plus a few Steam achievement IDs that aren't listed.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_ALL_ACHIEVEMENTS <code title="required field &#39;player&#39;">&lt;player&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have unlocked every achievement listed in <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Achievement_data" title="Modding:Achievement data"><samp>Data/Achievements</samp></a>. This doesn't count the extra Steam achievement IDs that aren't listed in that file.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_CAUGHT_FISH <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;id&#39;">&lt;id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have caught at least one fish with the given ID.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_CONVERSATION_TOPIC <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;id&#39;">&lt;id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue#Conversation_topics" title="Modding:Dialogue">conversation topic</a> with the ID <code title="required field &#39;id&#39;">&lt;id&gt;</code> active.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_CRAFTING_RECIPE <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;recipe name&#39;">&lt;recipe name&gt;</code></samp><br /><samp>PLAYER_HAS_COOKING_RECIPE <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;recipe name&#39;">&lt;recipe name&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> know the crafting/cooking recipe identified by its internal name (spaces allowed). For example, <code>PLAYER_HAS_CRAFTING_RECIPE CURRENT Field Snack</code>.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_DIALOGUE_ANSWER <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;id&#39;">&lt;id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have chosen the given dialogue answer in a previous dialogue.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_FLAG <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;id&#39;">&lt;id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have the given <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail flag</a> set (with spaces allowed in the <code title="required field &#39;id&#39;">&lt;id&gt;</code>).
</td></tr>
<tr>
<td><samp>PLAYER_HAS_ITEM <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;item&#39;">&lt;item&gt;</code> <code title="optional field &#39;count&#39;">[count]</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have at least one of a normal item (not bigcraftable, furniture, etc) in their inventory. The <code title="required field &#39;item&#39;">&lt;item&gt;</code> can be <samp>858</samp> (Qi Gems), <samp>73</samp> (Walnuts), or the <a href="#Custom_items">qualified or unqualified item ID</a>.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_PROFESSION <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;profession id&#39;">&lt;profession id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have the given <a href="../../external.html?link=https://stardewvalleywiki.com/Skills" title="Skills">profession</a> ID.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_READ_LETTER <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;id&#39;">&lt;id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have read a letter, where <code title="required field &#39;id&#39;">&lt;id&gt;</code> is the internal mail ID (spaces allowed). For example, <code>PLAYER_HAS_READ_LETTER Any Visited_Island</code>.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_SECRET_NOTE <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;id&#39;">&lt;id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have read a secret note, where <code title="required field &#39;id&#39;">&lt;id&gt;</code> is the secret note's integer ID.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_SEEN_EVENT <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;id&#39;">&lt;id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have seen the event with given <code title="required field &#39;id&#39;">&lt;id&gt;</code>.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_TOWN_KEY <code title="required field &#39;player&#39;">&lt;player&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have the <a href="../../external.html?link=https://stardewvalleywiki.com/Key_To_The_Town" title="Key To The Town">town key</a>.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_TRASH_CAN_LEVEL <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;level&#39;">&lt;level&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have the given <a href="../../external.html?link=https://stardewvalleywiki.com/Trash_Cans" title="Trash Cans">trash can upgrade level</a>. The specified level must match exactly (e.g. if the player has level 2, <code>PLAYER_HAS_TRASH_CAN_LEVEL Current 1</code> won't match). The <code title="required field &#39;level&#39;">&lt;level&gt;</code> can be <samp>0</samp> (base), <samp>1</samp> (copper), <samp>2</samp> (steel), <samp>3</samp> (gold), or <samp>4</samp> (iridium).
</td></tr>
<tr>
<td><samp>PLAYER_LOCATION_CONTEXT <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;location context&#39;">&lt;location context&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> are in the given <a href="#Custom_location_contexts">location context</a>.
</td></tr>
<tr>
<td><samp>PLAYER_LOCATION_NAME <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;location name&#39;">&lt;location name&gt;</code></samp><br /><samp>PLAYER_LOCATION_UNIQUE_NAME <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;location name&#39;">&lt;location name&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> are in the given location, using the name or unique instanced name (you can see both names in-game using the <a rel="nofollow" class="external text" href="../../external.html?link=https://www.nexusmods.com/stardewvalley/mods/679">Debug Mode</a> mod). The <code title="required field &#39;location name&#39;">&lt;location name&gt;</code> value doesn't recognize <a href="#Target_location">target location keywords</a> like <samp>Here</samp>.
</td></tr>
<tr>
<td><samp>PLAYER_MOD_DATA <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;key&#39;">&lt;key&gt;</code> <code title="required field &#39;value&#39;">&lt;value&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have a <samp>player.modData</samp> entry added by a mod with the given <code title="required field &#39;key&#39;">&lt;key&gt;</code> and <code title="required field &#39;value&#39;">&lt;value&gt;</code>.
</td></tr>
<tr>
<td><samp>PLAYER_MONEY_EARNED <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;amount&#39;">&lt;amount&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have earned at least <code title="required field &#39;amount&#39;">&lt;amount&gt;</code> gold.
</td></tr>
<tr>
<td><samp>PLAYER_SHIPPED_BASIC_ITEM <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;item ID&#39;">&lt;item ID&gt;</code> <code title="optional field &#39;min count&#39;">[min count]</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have shipped the given item at least <code title="optional field &#39;min count&#39;">[min count]</code> times (or once if the min isn't specified). This only works for the items tracked by the game for shipping stats (shown in the <a href="../../external.html?link=https://stardewvalleywiki.com/Shipping#Collection" title="Shipping">shipping collections menu</a>).
</td></tr>
<tr>
<td><samp>PLAYER_SPECIAL_ORDER_ACTIVE <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;order id&#39;">&lt;order id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have the given <a href="../../external.html?link=https://stardewvalleywiki.com/Special_Orders" class="mw-redirect" title="Special Orders">special order</a> active.
</td></tr>
<tr>
<td><samp>PLAYER_SPECIAL_ORDER_RULE_ACTIVE <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;rule id&#39;">&lt;rule id&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have a special rule active for a <a href="../../external.html?link=https://stardewvalleywiki.com/Special_Orders" class="mw-redirect" title="Special Orders">special order</a>. Some vanilla rules are...
<table class="wikitable">

<tbody><tr>
<th>rule ID
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DROP_QI_BEANS</samp>
</td>
<td>The player can find <a href="../../external.html?link=https://stardewvalleywiki.com/Qi_Beans" class="mw-redirect" title="Qi Beans">Qi Beans</a> for the <i>Qi's Crop</i> order.
</td></tr>
<tr>
<td><samp>LEGENDARY_FAMILY</samp>
</td>
<td>The player catch the new legendary fish for the <i>Extended Family</i> order.
</td></tr>
<tr>
<td><samp>MINE_HARD</samp><br /><samp>SC_HARD</samp>
</td>
<td>Raises the difficulty level of the mines or <a href="../../external.html?link=https://stardewvalleywiki.com/Skull_Cavern" title="Skull Cavern">Skull Cavern</a>.
</td></tr>
<tr>
<td><samp>SC_NO_FOOD</samp>
</td>
<td>The player can't eat food in the <a href="../../external.html?link=https://stardewvalleywiki.com/Skull_Cavern" title="Skull Cavern">Skull Cavern</a>.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>PLAYER_STAT <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;stat name&#39;">&lt;stat name&gt;</code> <code title="required field &#39;min value&#39;">&lt;min value&gt;</code></samp>
</td>
<td>Whether a stat counter for the <a href="#Target_player">specified player(s)</a> has at least the given value. The available stat names are...
<ul><li><samp>averageBedtime</samp>;</li>
<li><samp>beachFarmSpawns</samp>;</li>
<li><samp>beveragesMade</samp>;</li>
<li><samp>boatRidesToIsland</samp>;</li>
<li><samp>bouldersCracked</samp>;</li>
<li><samp>caveCarrotsFound</samp>;</li>
<li><samp>cheeseMade</samp>;</li>
<li><samp>chickenEggsLayed</samp>;</li>
<li><samp>childrenTurnedToDoves</samp>;</li>
<li><samp>coalFound</samp>;</li>
<li><samp>coinsFound</samp>;</li>
<li><samp>copperFound</samp>;</li>
<li><samp>cowMilkProduced</samp>;</li>
<li><samp>cropsShipped</samp>;</li>
<li><samp>daysPlayed</samp>;</li>
<li><samp>diamondsFound</samp>;</li>
<li><samp>dirtHoed</samp>;</li>
<li><samp>duckEggsLayed</samp>;</li>
<li><samp>exMemoriesWiped</samp>;</li>
<li><samp>fishCaught</samp>;</li>
<li><samp>geodesCracked</samp>;</li>
<li><samp>giftsGiven</samp>;</li>
<li><samp>goatCheeseMade</samp>;</li>
<li><samp>goatMilkProduced</samp>;</li>
<li><samp>goldFound</samp>;</li>
<li><samp>goodFriends</samp>;</li>
<li><samp>hardModeMonstersKilled</samp>;</li>
<li><samp>individualMoneyEarned</samp>;</li>
<li><samp>iridiumFound</samp>;</li>
<li><samp>ironFound</samp>;</li>
<li><samp>itemsCooked</samp>;</li>
<li><samp>itemsCrafted</samp>;</li>
<li><samp>itemsForaged</samp>;</li>
<li><samp>itemsShipped</samp>;</li>
<li><samp>monstersKilled</samp>;</li>
<li><samp>mysticStonesCrushed</samp>;</li>
<li><samp>notesFound</samp>;</li>
<li><samp>otherPreciousGemsFound</samp>;</li>
<li><samp>piecesOfTrashRecycled</samp>;</li>
<li><samp>preservesMade</samp>;</li>
<li><samp>prismaticShardsFound</samp>;</li>
<li><samp>questsCompleted</samp>;</li>
<li><samp>rabbitWoolProduced</samp>;</li>
<li><samp>rocksCrushed</samp>;</li>
<li><samp>seedsSown</samp>;</li>
<li><samp>sheepWoolProduced</samp>;</li>
<li><samp>slimesKilled</samp>;</li>
<li><samp>starLevelCropsShipped</samp>;</li>
<li><samp>stepsTaken</samp>;</li>
<li><samp>sticksChopped</samp>;</li>
<li><samp>stoneGathered</samp>;</li>
<li><samp>stumpsChopped</samp>;</li>
<li><samp>timesEnchanted</samp>;</li>
<li><samp>timesFished</samp>;</li>
<li><samp>timesUnconscious</samp>;</li>
<li><samp>totalMoneyGifted</samp>;</li>
<li><samp>trashCansChecked</samp>;</li>
<li><samp>trufflesFound</samp>;</li>
<li><samp>walnutsFound</samp>;</li>
<li><samp>weedsEliminated</samp>.</li></ul>
</td></tr></tbody></table>
</dd>

<dt>Player relationships</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>Condition
</th>
<th>effect
</th></tr>
<tr>
<td><samp>PLAYER_HAS_CHILDREN <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;count&#39;">&lt;count&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have least <code title="required field &#39;count&#39;">&lt;count&gt;</code> children.
</td></tr>
<tr>
<td><samp>PLAYER_HAS_PET <code title="required field &#39;player&#39;">&lt;player&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have a <a href="../../external.html?link=https://stardewvalleywiki.com/Animals#Cat_or_Dog" title="Animals">pet</a>.
</td></tr>
<tr>
<td><samp>PLAYER_HEARTS <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;npc&#39;">&lt;npc&gt;</code> <code title="required field &#39;heart level&#39;">&lt;heart level&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have a friend with at least <code title="required field &#39;heart level&#39;">&lt;heart level&gt;</code> hearts of <a href="../../external.html?link=https://stardewvalleywiki.com/Friendship" title="Friendship">friendship</a>. The <code title="required field &#39;npc&#39;">&lt;npc&gt;</code> can be an NPC's internal name, <samp>Any</samp> (check every NPC), or <samp>AnyDateable</samp> (check every romanceable NPC).
</td></tr>
<tr>
<td><samp>PLAYER_HAS_MET <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;npc&#39;">&lt;npc&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have talked to an NPC at least once. The <code title="required field &#39;npc&#39;">&lt;npc&gt;</code> is an NPC's internal name.
</td></tr>
<tr>
<td><samp>PLAYER_IS_DATING <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;npc&#39;">&lt;npc&gt;</code></samp><br /><samp>PLAYER_IS_ENGAGED <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;target&#39;">&lt;target&gt;</code></samp><br /><samp>PLAYER_IS_MARRIED <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;target&#39;">&lt;target&gt;</code></samp><br /><samp>PLAYER_IS_DIVORCED <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;npc&#39;">&lt;npc&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have this relationship status with an NPC. The player is dating after giving the NPC a <a href="../../external.html?link=https://stardewvalleywiki.com/Bouquet" title="Bouquet">bouquet</a>, and engaged after giving a <a href="../../external.html?link=https://stardewvalleywiki.com/Mermaid%27s_Pendant" title="Mermaid&#39;s Pendant">Mermaid's Pendant</a> but before the marriage. The <code title="required field &#39;npc&#39;">&lt;npc&gt;</code> can be an NPC's internal name, or <samp>Any</samp> (check every romanceable NPC).
</td></tr>
<tr>
<td><samp>PLAYER_IS_ROOMMATE <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;target&#39;">&lt;target&gt;</code></samp>
</td>
<td>Whether the <a href="#Target_player">specified player(s)</a> have a roommate. The <code title="required field &#39;target&#39;">&lt;target&gt;</code> can be an NPC's internal name, <samp>Any</samp> (with any NPC), or <samp>Player</samp> (always false).
</td></tr>
<tr>
<td><samp>PLAYER_PREFERRED_PET <code title="required field &#39;player&#39;">&lt;player&gt;</code> <code title="required field &#39;pet&#39;">&lt;pet&gt;</code></samp>
</td>
<td>Whether the preferred pet for the <a href="#Target_player">specified player(s)</a> is <samp>Cat</samp> or <samp>Dog</samp>.
</td></tr></tbody></table>
</dd>

<dt>Randomization</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>Condition
</th>
<th>effect
</th></tr>
<tr>
<td><samp>RANDOM <code title="required field &#39;chance&#39;">&lt;chance&gt;</code> <code title="optional field &#39;@addDailyLuck&#39;">[@addDailyLuck]</code></samp>
</td>
<td>A random probability check which is re-rolled each time it's called. For example, <code>RANDOM 0.4</code> is true 40% of the time.
<p>If the exact text <samp>@addDailyLuck</samp> is specified, the current player's <a href="../../external.html?link=https://stardewvalleywiki.com/Daily_Luck" class="mw-redirect" title="Daily Luck">daily luck</a> is added to the probability.
</p>
</td></tr>
<tr>
<td><samp>SYNCED_CHOICE <code title="required field &#39;interval&#39;">&lt;interval&gt;</code> <code title="required field &#39;key&#39;">&lt;key&gt;</code> <code title="required field &#39;min&#39;">&lt;min&gt;</code> <code title="required field &#39;max&#39;">&lt;max&gt;</code> <code title="required field &#39;choices&#39;">&lt;choices&gt;</code>+</samp>
</td>
<td>Choose a random integer between <code title="required field &#39;min&#39;">&lt;min&gt;</code> and <code title="required field &#39;max&#39;">&lt;max&gt;</code> inclusively, and check whether it matches one of the <code title="required field &#39;choices&#39;">&lt;choices&gt;</code>. The result will be identical for all queries with the same <code title="required field &#39;key&#39;">&lt;key&gt;</code> value during the given <code title="required field &#39;interval&#39;">&lt;interval&gt;</code> (one of <samp>tick</samp>, <samp>day</samp>, <samp>season</samp>, or <samp>year</samp>), including between players in multiplayer mode.
<p>For example, <samp>SYNCED_CHOICE day example_key 1 5 1 2</samp> chooses a random value between 1 and 5, and checks if it's either 1 or 2.
</p><p>This is mainly useful in cases where you need to pick between a number of discrete cases. For regular probability checks, see <samp>SYNCED_RANDOM</samp> instead.
</p>
</td></tr>
<tr>
<td><samp>SYNCED_RANDOM <code title="required field &#39;interval&#39;">&lt;interval&gt;</code> <code title="required field &#39;key&#39;">&lt;key&gt;</code> <code title="required field &#39;chance&#39;">&lt;chance&gt;</code> <code title="optional field &#39;@addDailyLuck&#39;">[@addDailyLuck]</code></samp>
</td>
<td>A random probability check. The result will be identical for all queries with the same <code title="required field &#39;key&#39;">&lt;key&gt;</code> value during the given <code title="required field &#39;interval&#39;">&lt;interval&gt;</code> (one of <samp>tick</samp>, <samp>day</samp>, <samp>season</samp>, or <samp>year</samp>), including between players in multiplayer mode.
<p>For example, <samp>SYNCED_RANDOM day cart_rare_seed 0.4</samp> has a 40% chance to be true the first time it's called that day, and will always be the same value if called again with the same key on the same day.
</p><p>If the exact text <samp>@addDailyLuck</samp> is specified, the current player's <a href="../../external.html?link=https://stardewvalleywiki.com/Daily_Luck" class="mw-redirect" title="Daily Luck">daily luck</a> is added to the probability.
</p>
</td></tr>
<tr>
<td><samp>SYNCED_SUMMER_RAIN_RANDOM <code title="required field &#39;base chance&#39;">&lt;base chance&gt;</code> <code title="required field &#39;day multiplier&#39;">&lt;day multiplier&gt;</code></samp>
</td>
<td>A specialized variant of <samp>SYNCED_DAY_RANDOM</samp> used to calculate the chance of rain in summer, which increases with the day number.
</td></tr></tbody></table>
</dd>

<dt>For items only</dt>
<dd>
These are used with queries that check an item. For vanilla content, these are only supported for <a href="#Custom_machines">custom machine</a> conditions. For custom queries, C# mods can specify the <samp>target_item</samp> parameter when calling <samp>GameStateQuery.CheckConditions</samp>. In any other context, they'll always return false.
<table class="wikitable">

<tbody><tr>
<th>Condition
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ITEM_HAS_TAG <code title="required field &#39;tags&#39;">&lt;tags&gt;</code></samp>
</td>
<td>Whether the item has all of the given space-delimited tags. For example, <code>ITEM_HAS_TAG bone_item marine_item</code> will only match items with both tags.
</td></tr>
<tr>
<td><samp>ITEM_ID <code title="required field &#39;item ID&#39;">&lt;item ID&gt;</code></samp>
</td>
<td>Whether the item has the given <a href="#Custom_items">qualified or unqualified item ID</a>.
</td></tr>
<tr>
<td><samp>ITEM_QUALITY <code title="required field &#39;quality&#39;">&lt;quality&gt;</code></samp>
</td>
<td>Whether the item's quality is <code title="required field &#39;quality&#39;">&lt;quality&gt;</code> or higher. The possible values for <code title="required field &#39;quality&#39;">&lt;quality&gt;</code> are <samp>0</samp> (normal), <samp>1</samp> (silver), <samp>2</samp> (gold), or <samp>4</samp> (iridium).
</td></tr>
<tr>
<td><samp>ITEM_STACK <code title="required field &#39;count&#39;">&lt;count&gt;</code></samp>
</td>
<td>Whether the item stack contains at least <code title="required field &#39;count&#39;">&lt;count&gt;</code> items. Note that this only applies to the target item, it doesn't include other stacks in the inventory.
</td></tr>
<tr>
<td><samp>ITEM_TYPE <code title="required field &#39;type&#39;">&lt;type&gt;</code></samp>
</td>
<td>Whether the <a href="#Custom_items">item's type definition ID</a> matches the given value. For example, <samp>ITEM_TYPE (BC)</samp> matches bigcraftables.
</td></tr></tbody></table>
</dd>

<dt>Immutable</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>Condition
</th>
<th>effect
</th></tr>
<tr>
<td><samp>TRUE</samp>
</td>
<td>A condition which always matches.
</td></tr>
<tr>
<td><samp>FALSE</samp>
</td>
<td>A condition which never matches.
</td></tr></tbody></table>
</dd>
</dl>
<h4><span class="mw-headline" id="Target_location">Target location</span></h4>
<p>Some conditions have a <code title="required field &#39;location&#39;">&lt;location&gt;</code> argument. This can be one of...
</p>
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>result
</th></tr>
<tr>
<td><samp>Here</samp>
</td>
<td>The location containing the current player (regardless of the <a href="#Target_player">target player</a>).
</td></tr>
<tr>
<td><samp>Target</samp>
</td>
<td>The location containing the in-game entity being edited (e.g. the machine for <samp>Data/Machines</samp> or fruit tree for <samp>Data/FruitTrees</samp>).
<p>If the asset being edited isn't tied to a location, this is the location of the <a href="#Target_player">target player</a> (if set), else equivalent to <samp>Here</samp>.
</p>
</td></tr>
<tr>
<td><i>any other</i>
</td>
<td>The <a href="#Custom_locations">location ID</a> (i.e. internal name) for the location to check.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Target_player">Target player</span></h4>
<p>Some conditions have a <code title="required field &#39;player&#39;">&lt;player&gt;</code> argument. This can be one of...
</p>
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>result
</th></tr>
<tr>
<td><samp>Any</samp>
</td>
<td>At least one player must match the condition, regardless of whether they're online.
</td></tr>
<tr>
<td><samp>All</samp>
</td>
<td>Every player must match the condition, regardless of whether they're online.
</td></tr>
<tr>
<td><samp>Current</samp>
</td>
<td>The local player.
</td></tr>
<tr>
<td><samp>Host</samp>
</td>
<td>The main player.
</td></tr>
<tr>
<td><samp>Target</samp>
</td>
<td>This value depends on the context:
<table class="wikitable">

<tbody><tr>
<th>context
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Data/LocationContexts</samp>
</td>
<td>For the <samp>PassOutLocations</samp> field only, the player whose pass-out location to get.
</td></tr>
<tr>
<td><samp>Data/MiscGameData</samp>
</td>
<td>For the <samp>WeddingContextualAttendees</samp> field only, the attendee player (if the attendee is a player).
</td></tr>
<tr>
<td><samp>Data/WildTrees</samp>
</td>
<td>For the <samp>AdditionalChopDrops</samp> field only, the last player who chopped the tree.
</td></tr>
<tr>
<td><i>custom queries</i>
</td>
<td>C# mods may specify a <samp>target_farmer</samp> parameter when calling <samp>GameStateQuery.CheckConditions</samp>.
</td></tr>
<tr>
<td><i>any other</i>
</td>
<td>Equivalent to <samp>Current</samp>.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><i>any other</i>
</td>
<td>The unique multiplayer ID for the player to check.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Using_queries_elsewhere">Using queries elsewhere</span></h4>
<p>C# code can use the <samp>GameStateQuery</samp> class to work with queries, like <code>GameStateQuery.CheckConditions(query)</code>.
</p><p>You can also use game state queries in <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event preconditions</a> using the new <samp>G</samp> condition flag, like <code>some_event_id/G !SEASON Spring, WEATHER Here Sun</code>.
</p>
<h4><span class="mw-headline" id="Extensibility_2">Extensibility</span></h4>
<p>C# mods can define custom conditions by calling <code>GameStateQuery.RegisterQueryType("condition name", (string[] fields) =&gt; ...)</code>. To avoid conflicts, prefixing custom condition names with your mod ID (like <samp>Example.ModId_SomeCondition</samp>) is strongly recommended.
</p>
<h3><span class="mw-headline" id="Item_queries">Item queries</span></h3>
<p><i>Item queries</i> choose one or more items dynamically, instead of specifying a single item ID. These are used in various places like <a href="#Custom_machines">machine data</a> and <a href="#Custom_shops">shop data</a>.
</p>
<h4><span class="mw-headline" id="Available_queries">Available queries</span></h4>
<p>The supported item queries are:
</p>
<table class="wikitable">

<tbody><tr>
<th>query
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ALL_ITEMS <code title="optional field &#39;type ID&#39;">[type ID]</code></samp>
</td>
<td>Every item provided by the <a href="#Custom_items">item data definitions</a>. If <code title="optional field &#39;type ID&#39;">[type ID]</code> is set to an item type identifier (like <samp>(O)</samp> for object), only returns items from the matching item data definition.
</td></tr>
<tr>
<td><samp>DISH_OF_THE_DAY</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/The_Stardrop_Saloon#Rotating_Stock" title="The Stardrop Saloon">Saloon's dish of the day</a>.
</td></tr>
<tr>
<td><samp>FLAVORED_ITEM <code title="required field &#39;type&#39;">&lt;type&gt;</code> <code title="required field &#39;ingredient ID&#39;">&lt;ingredient ID&gt;</code> <code title="optional field &#39;ingredient flavor ID&#39;">[ingredient flavor ID]</code></samp>
</td>
<td>A flavored item like Apple Wine. The <code title="required field &#39;type&#39;">&lt;type&gt;</code> can be one of <a href="../../external.html?link=https://stardewvalleywiki.com/Aged_Roe" title="Aged Roe"><samp>AgedRoe</samp></a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Honey" title="Honey"><samp>Honey</samp></a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Jellies_and_Pickles" title="Jellies and Pickles"><samp>Jelly</samp></a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Juice" title="Juice"><samp>Juice</samp></a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Jellies_and_Pickles" title="Jellies and Pickles"><samp>Pickle</samp></a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Roe" title="Roe"><samp>Roe</samp></a>, or <a href="../../external.html?link=https://stardewvalleywiki.com/Wine" title="Wine"><samp>Wine</samp></a>. The <code title="required field &#39;ingredient ID&#39;">&lt;ingredient ID&gt;</code> is the qualified or unqualified item ID which provides the flavor (like Apple in Apple Wine). For <samp>Honey</samp>, you can set the <code title="required field &#39;flavor ID&#39;">&lt;flavor ID&gt;</code> to <samp>-1</samp> for Wild Honey.
<p>For aged roe only, the <code title="optional field &#39;ingredient flavor ID&#39;">[ingredient flavor ID]</code> is the flavor of the <code title="required field &#39;ingredient ID&#39;">&lt;ingredient ID&gt;</code>. For example, <samp>FLAVORED_ITEM AgedRoe (O)812 128</samp> creates Aged Pufferfish Roe (812 is <a href="../../external.html?link=https://stardewvalleywiki.com/Roe" title="Roe">roe</a> and 128 is <a href="../../external.html?link=https://stardewvalleywiki.com/Pufferfish" title="Pufferfish">pufferfish</a>).
</p>
</td></tr>
<tr>
<td><samp>ITEMS_SOLD_BY_PLAYER <code title="required field &#39;shop location&#39;">&lt;shop location&gt;</code></samp>
</td>
<td>Random items the player has recently sold to the <code title="required field &#39;shop location&#39;">&lt;shop location&gt;</code>, which can be one of <samp>SeedShop</samp> (Pierre's store) or <samp>FishShop</samp> (Willy's fish shop).
</td></tr>
<tr>
<td><samp>LOCATION_FISH <code title="required field &#39;location&#39;">&lt;location&gt;</code> <code title="required field &#39;bobber tile&#39;">&lt;bobber tile&gt;</code> <code title="required field &#39;depth&#39;">&lt;depth&gt;</code></samp>
</td>
<td>A random item that can be found by fishing in the given location. The <code title="required field &#39;location&#39;">&lt;location&gt;</code> should be the internal name of the location, <code title="required field &#39;bobber tile&#39;">&lt;bobber tile&gt;</code> is the position of the fishing rod's bobber in the water (in the form <samp><code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code></samp>), and <code title="required field &#39;depth&#39;">&lt;depth&gt;</code> is the bobber's distance from the nearest shore measured in tiles (where 0 is directly adjacent to the shore).
<p><b>Careful:</b> since the target location might use <samp>LOCATION_FISH</samp> queries in its list, it's easy to cause a circular reference by mistake (e.g. location A gets fish from B, which gets fish from A). If this happens, the game will log an error and return no item.
</p>
</td></tr>
<tr>
<td><samp>LOST_BOOK_OR_ITEM <code title="optional field &#39;alternate query&#39;">[alternate query]</code></samp>
</td>
<td>Returns a <a href="../../external.html?link=https://stardewvalleywiki.com/Lost_Books" title="Lost Books">lost book</a> if the player hasn't found them all yet, else the result of the <code title="optional field &#39;alternate query&#39;">[alternate query]</code> if specified, else nothing.
<p>For example, <code>LOST_BOOK_OR_ITEM (O)770</code> returns <a href="../../external.html?link=https://stardewvalleywiki.com/Mixed_Seeds" title="Mixed Seeds">mixed seeds</a> if the player found every book already.
</p>
</td></tr>
<tr>
<td><samp>RANDOM_ARTIFACT_FOR_DIG_SPOT</samp>
</td>
<td>A random item which is defined in <samp>Data/ObjectInformation</samp> with the <samp>Arch</samp> (artifact) type, and whose spawn rules (field 6) match the current location and whose random probability passes. This is mainly used by <a href="../../external.html?link=https://stardewvalleywiki.com/Artifact_Spot" title="Artifact Spot">artifact spots</a>.
</td></tr>
<tr>
<td><samp>RANDOM_BASE_SEASON_ITEM</samp>
</td>
<td>A random seasonal vanilla item which can be found by searching garbage cans, breaking containers in the mines, etc.
</td></tr>
<tr>
<td><samp>RANDOM_ITEMS <code title="required field &#39;type definition ID&#39;">&lt;type definition ID&gt;</code> <code title="optional field &#39;options&#39;">[options]</code></samp>
</td>
<td>Random items from the given <a href="#Item_types">type definition ID</a>, with any combination of the following criteria and options (in any order, all optional):
<table class="wikitable">

<tbody><tr>
<th>format
</th>
<th>item criteria
</th></tr>
<tr>
<th colspan="2">search criteria
</th></tr>
<tr>
<td><samp>@has_category <code title="optional field &#39;category&#39;">[category]</code></samp>
</td>
<td>Must have one of the given <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Categories" title="Modding:Items">object categories</a> (space-delimited), or any valid category if none specified. Can be negated with <samp>@!has_category</samp>.
</td></tr>
<tr>
<td><samp>@has_id <code title="required field &#39;id&#39;">&lt;id&gt;</code>+</samp>
</td>
<td>Must have one of the given unqualified item IDs. Can be negated with <samp>@!has_id</samp>.
</td></tr>
<tr>
<td><samp>@has_id_in_base_range <code title="required field &#39;min&#39;">&lt;min&gt;</code> <code title="required field &#39;max&#39;">&lt;max&gt;</code></samp>
</td>
<td>Must have a numeric ID between the <code title="required field &#39;min&#39;">&lt;min&gt;</code> and <code title="required field &#39;max&#39;">&lt;max&gt;</code> values (inclusive). Can be negated with <samp>@!has_id_in_base_range </samp>.
</td></tr>
<tr>
<td><samp>@has_id_prefix <code title="required field &#39;prefix&#39;">&lt;prefix&gt;</code>+</samp>
</td>
<td>Must have an unqualified item ID starting with one of the given prefixes. For example, <samp>@has_id_prefix ExampleAuthor_ExampleMod_</samp> for a mod's items. Can be negated with <samp>@!has_id_prefix</samp>.
</td></tr>
<tr>
<td><samp>@has_object_type <code title="optional field &#39;type&#39;">[type]</code>+</samp>
</td>
<td>Must have one of the given object ty pes (space-delimited), or any valid type if none specified. Can be negated with <samp>@!has_object_type</samp>.
</td></tr>
<tr>
<th colspan="2">options
</th></tr>
<tr>
<td><samp>@allow_missing_price</samp>
</td>
<td>Allow items with a base sell price of 0 or lower. If omitted, those items are skipped.
</td></tr>
<tr>
<td><samp>@count <code title="required field &#39;count&#39;">&lt;count&gt;</code></samp>
</td>
<td>The number of random items to return. Default 1.
</td></tr>
<tr>
<td><samp>@require_explicit_category</samp>
</td>
<td>Whether to ignore items which don't set a category directly in <samp>Data/ObjectInformation</samp>. These are often (but not always) special items like <a href="../../external.html?link=https://stardewvalleywiki.com/Secret_Note" class="mw-redirect" title="Secret Note">Secret Note</a> or unimplemented items like Lumber.
</td></tr></tbody></table>
<p>For example, you can sell a random <a href="../../external.html?link=https://stardewvalleywiki.com/Wallpaper" title="Wallpaper">wallpaper</a> for <span style="display: none;">data-sort-value="200"&gt;</span><span class="no-wrap"><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18" srcset="/mediawiki/images/thumb/1/10/Gold.png/27px-Gold.png 1.5x, /mediawiki/images/thumb/1/10/Gold.png/36px-Gold.png 2x" />200g</span> in <samp>Data/Shops</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;RANDOM_ITEMS (WP)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Price&quot;</span><span class="o">:</span> <span class="mi">200</span>
<span class="p">}</span>
</pre></div>
<p>Or a random <a href="../../external.html?link=https://stardewvalleywiki.com/House_Plant" title="House Plant">house plant</a>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;RANDOM_ITEMS (F) @has_id_in_base_range 1376 1390&quot;</span>
<span class="p">}</span>
</pre></div>
<p>Or a random <a href="#Custom_items">custom item</a> added by a mod by its item ID prefix:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;RANDOM_ITEMS (O) @has_id_prefix AuthorName_ModName_&quot;</span>
<span class="p">}</span>
</pre></div>
<p>Or 10 random objects with any category except <samp>-13</samp> or <samp>-14</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;RANDOM_ITEMS (O) @has_category @!has_category -13 -14 @count 10&quot;</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>SECRET_NOTE_OR_ITEM <code title="optional field &#39;alternate query&#39;">[alternate query]</code></samp>
</td>
<td>Returns a <a href="../../external.html?link=https://stardewvalleywiki.com/Secret_Notes" title="Secret Notes">secret note</a> (or <a href="../../external.html?link=https://stardewvalleywiki.com/Journal_Scraps" title="Journal Scraps">journal scrap</a> on the island) if the player hasn't found them all yet, else the result of the <code title="optional field &#39;alternate query&#39;">[alternate query]</code> if specified, else nothing.
<p>For example, <code>SECRET_NOTE_OR_ITEM (O)390</code> returns <a href="../../external.html?link=https://stardewvalleywiki.com/Clay" title="Clay">clay</a> if the player found every secret note already.
</p>
</td></tr>
<tr>
<td><samp>SHOP_TOWN_KEY</samp>
</td>
<td>The special <a href="../../external.html?link=https://stardewvalleywiki.com/Key_To_The_Town" title="Key To The Town">town key</a> item. This is only valid in shops.
</td></tr>
<tr>
<td><samp>TOOL_UPGRADES <code title="optional field &#39;tool ID&#39;">[tool ID]</code></samp>
</td>
<td>The tool upgrades listed in <samp>Data/Shops</samp> whose conditions match the player's inventory (i.e. the same rules as <a href="../../external.html?link=https://stardewvalleywiki.com/Blacksmith" title="Blacksmith">Clint's tool upgrade shop</a>). If <code title="optional field &#39;tool ID&#39;">[tool ID]</code> is specified, only upgrades which consume that tool ID are shown.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Item_spawn_fields">Item spawn fields</span></h4>
<p>Several data assets (like <a href="#Custom_machines">machines</a> and <a href="#Custom_shops">shops</a>) let you configure items to create. For consistency, these all share a set of common fields (internally represented by <samp>ISpawnItemData</samp>, and <samp>GenericSpawnItemData</samp> or <samp>GenericSpawnItemDataWithCondition</samp>):
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>A unique identifier for this entry (not the item itself) within the current list. The ID should only contain alphanumeric/underscore/dot characters. For custom items, this should be prefixed with your mod ID like <samp>Example.ModId_Parsnips</samp>.
<p>This is semi-optional — if omitted, it'll be auto-generated from the <samp>ItemId</samp>, <samp>RandomItemId</samp>, and <samp>IsRecipe</samp> fields. However multiple entries with the same ID may cause unintended behavior (e.g. shop items reducing each others' stock limits), so it's often a good idea to set a globally unique ID instead.
</p>
</td></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td>One of:
<ul><li>the <a href="#Custom_items">qualified or unqualified item ID</a> (like <samp>(O)128</samp> for a <a href="../../external.html?link=https://stardewvalleywiki.com/Pufferfish" title="Pufferfish">pufferfish</a>);</li>
<li>or an <a href="#Item_queries">item query</a> to dynamically choose one or more items.</li></ul>
</td></tr>
<tr>
<td><samp>RandomItemId</samp>
</td>
<td><i>(Optional)</i> A list of item IDs to randomly choose from, using the same format as <samp>ItemId</samp> (including item queries). If set, <samp>ItemId</samp> is optional and ignored. Each entry in the list has an equal probability of being chosen. For example:
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// wood, stone, or pizza</span>
<span class="s2">&quot;RandomItemId&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;(O)388&quot;</span><span class="p">,</span> <span class="s2">&quot;(O)390&quot;</span><span class="p">,</span> <span class="s2">&quot;(O)206&quot;</span> <span class="p">]</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this entry should be applied. Defaults to always true.
<p><b>Note:</b> not supported for weapon projectiles.
</p>
</td></tr>
<tr>
<td><samp>IsRecipe</samp>
</td>
<td><i>(Optional)</i> Whether to get the crafting/cooking recipe for the item, instead of the item itself. Default false.
</td></tr>
<tr>
<td><samp>Quality</samp>
</td>
<td><i>(Optional)</i> The quality of the item to find. One of <samp>0</samp> (normal), <samp>1</samp> (silver), <samp>2</samp> (gold), or <samp>4</samp> (iridium). Invalid values will snap to the closest valid one (e.g. <samp>7</samp> will become iridium). Default -1, which keeps the value set by the item query (usually 0).
</td></tr>
<tr>
<td><samp>MinStack</samp>
</td>
<td><i>(Optional)</i> The item's minimum and default stack size. Default -1, which keeps the value set by the item query (usually 1).
</td></tr>
<tr>
<td><samp>MaxStack</samp>
</td>
<td><i>(Optional)</i> If set to a value higher than <samp>MinStack</samp>, the stack is set to a random value between them (inclusively). Default -1.
</td></tr>
<tr>
<td><samp>ObjectDisplayName</samp>
</td>
<td><i>(Optional)</i> For objects only, a <a href="#Tokenizable_string_format">tokenizable string</a> for the item's display name. Defaults to the item's display name in <samp>Data/ObjectInformation</samp>. This can optionally contain <code>%DISPLAY_NAME</code> (the item's default display name) and <code>%PRESERVED_DISPLAY_NAME</code> (the preserved item's display name if applicable, <i>e.g.</i> if set via <samp>PreserveId</samp> in <a href="#Custom_machines">machine data</a>).
<p><b>Careful:</b> text in this field will be saved permanently in the object's info and won't be updated when the player changes language or the content pack changes. That includes Content Patcher translations (like <code>%DISPLAY_NAME {{i18n: wine}}</code>), which will save the translated text for the current language. Instead, add the text to a strings asset like <samp>Strings/Objects</samp> and then use the <a href="#Tokenizable_string_format"><samp>[LocalizedText]</samp> token</a>.
</p>
<table class="mw-collapsible mw-collapsed" style="">
<tbody><tr>
<th style="text-align: left;"><b>For example, here's how you'd create flavored oils with Content Patcher:</b>&#160;
</th></tr>
<tr>
<td><ol>
<li>Add the display name to <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Translations" title="Modding:Translations">your <samp>i18n/default.json</samp> file</a> (with <samp>{0}</samp> where you want the flavor name):
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;flavored-oil&quot;</span><span class="p">:</span> <span class="s2">&quot;{0} Oil&quot;</span>
<span class="p">}</span>
</pre></div></li>
<li>Add the text to a strings asset visible to the game:
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Strings/Objects&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;Example.ModId_Oil&quot;</span><span class="o">:</span> <span class="s2">&quot;{{i18n: flavored-oil}}&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div></li>
<li>Use the <a href="#Tokenizable_string_format"><samp>[LocalizedText]</samp> token</a> to get your translation, and pass in the flavor as an argument:
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;ObjectDisplayName&quot;</span><span class="err">:</span> <span class="s2">&quot;[LocalizedText Strings/Objects:Example.ModId_Oil %PRESERVED_DISPLAY_NAME]&quot;</span><span class="err">,</span>
</pre></div>
</li></ol>
<p>Now when the player changes language, the object will automatically get the new translation from <samp>Strings/Object</samp>.
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>ToolUpgradeLevel</samp>
</td>
<td><i>(Optional)</i> For tools only, the initial upgrade level for the tool when created (like <a href="../../external.html?link=https://stardewvalleywiki.com/Axes" title="Axes">Copper vs Gold Axe</a>, or <a href="../../external.html?link=https://stardewvalleywiki.com/Training_Rod" title="Training Rod">Training Rod</a> vs <a href="../../external.html?link=https://stardewvalleywiki.com/Iridium_Rod" title="Iridium Rod">Iridium Rod</a>). Default -1, which keeps the value set by the item query (usually 0).
</td></tr>
<tr>
<td><samp>QualityModifiers</samp><br /><samp>StackModifiers</samp>
</td>
<td><i>(Optional)</i> <a href="#Quantity_modifiers">Quantity modifiers</a> applied to the <samp>Quality</samp> or <samp>Stack</samp> value. Default none.
<p>The quality modifiers operate on the numeric quality values (<i>i.e.</i> <samp>0</samp> = normal, <samp>1</samp> = silver, <samp>2</samp> = gold, and <samp>4</samp> = iridium). For example, silver × 2 is gold.
</p>
</td></tr>
<tr>
<td><samp>QualityModifierMode</samp><br /><samp>StackModifierMode</samp>
</td>
<td><i>(Optional)</i> <a href="#Quantity_modifiers">quantity modifier modes</a> which indicate what to do if multiple modifiers in the <samp>QualityModifiers</samp> or <samp>StackModifiers</samp> field apply at the same time. Default <samp>Stack</samp>.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="More_modData_fields">More <samp>modData</samp> fields</span></h3>
<p>The <samp>modData</samp> fields are dictionaries of arbitrary string values which are synchronized in multiplayer and persisted in the save file, so mods can store custom data about the instances. The game already has the field for buildings, characters (including NPCs and players), items, locations, and terrain features.
</p><p>Stardew Valley 1.6 adds a <samp>modData</samp> field for the <samp>Quest</samp> type, to support custom quest mods.
</p>
<h3><span class="mw-headline" id="Quantity_modifiers">Quantity modifiers</span></h3>
<p><i>Quantity modifiers</i> apply dynamic changes to a numeric field in a data asset like <a href="#Custom_shops"><samp>Data/Shops</samp></a> or <a href="#Custom_machines"><samp>Data/Machines</samp></a>. For example, you can multiply a shop item's price or increase a machine output's quality. You can specify any number of modifiers for the same field.
</p>
<h4><span class="mw-headline" id="Modifier_format">Modifier format</span></h4>
<p>These consist of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>An ID for this modifier. This only needs to be unique within the current modifier list. For a custom entry, you should use a unique ID which includes your mod ID like <samp>ExampleMod.Id_ModifierName</samp>.
</td></tr>
<tr>
<td><samp>Modification</samp>
</td>
<td>The type of change to apply. The possible values are <samp>Add</samp>, <samp>Subtract</samp>, <samp>Multiply</samp>, <samp>Divide</samp>, and <samp>Set</samp>.
</td></tr>
<tr>
<td><samp>Amount</samp>
</td>
<td><i>(Optional if <samp>RandomAmount</samp> specified)</i> The operand applied to the target value (e.g. the multiplier if used with <samp>Multiply</samp>).
</td></tr>
<tr>
<td><samp>RandomAmount</samp>
</td>
<td><i>(Optional)</i> A list of possible amounts to randomly choose from. If set, <samp>Amount</samp> is optional and ignored. Each entry in the list has an equal probability of being chosen, and the choice is persisted for the current day. For example:
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Amount&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mi">4</span> <span class="p">]</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="#Game_state_queries">game state query</a> which indicates whether this change should be applied. Defaults to always true.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Modifier_mode">Modifier mode</span></h4>
<p>Quality modifier fields are often accompanied by a <i>mode</i> field (like <samp>PriceModifiers</samp> and <samp>PriceModifierMode</samp>), which indicate what to do when multiple modifiers apply to the same value. Available modes:
</p>
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Stack</samp>
</td>
<td>Apply each modifier to the result of the previous one. For example, two modifiers which double a value will quadruple it.
</td></tr>
<tr>
<td><samp>Minimum</samp>
</td>
<td>Apply the modifier which results in the lowest value.
</td></tr>
<tr>
<td><samp>Maximum</samp>
</td>
<td>Apply the modifier which results in the highest value.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Examples_2">Examples</span></h4>
<p>For example, this will double the price of a shop item in <samp>Data/Shops</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;PriceModifiers&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;Modification&quot;</span><span class="o">:</span> <span class="s2">&quot;Multiply&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Amount&quot;</span><span class="o">:</span> <span class="mf">2.0</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
<p>This will set the price to a random value between 100–1000, <i>or</i> 3–5 times the item's normal sell price, whichever is higher (like the <a href="../../external.html?link=https://stardewvalleywiki.com/Traveling_Cart" title="Traveling Cart">Traveling Cart</a>):
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;PriceModifierMode&quot;</span><span class="o">:</span> <span class="s2">&quot;Maximum&quot;</span><span class="p">,</span>
<span class="s2">&quot;PriceModifiers&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;Modification&quot;</span><span class="o">:</span> <span class="s2">&quot;Set&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RandomAmount&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">900</span><span class="p">,</span> <span class="mi">1000</span> <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;Modification&quot;</span><span class="o">:</span> <span class="s2">&quot;Multiply&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RandomAmount&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
<h3><span class="mw-headline" id="Tokenizable_string_format">Tokenizable string format</span></h3>
<p>Stardew Valley 1.6 adds support for literal strings that contain tokens. These are only usable in specific fields (their docs will say 'tokenizable string' with a link to this section).
</p>
<h4><span class="mw-headline" id="Literal_text">Literal text</span></h4>
<p>Previously you often needed to load text from a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#String_keys" title="Modding:Modder Guide/Game Fundamentals">string key</a> in data assets. With this new format, you can use the literal text directly in the asset instead (including Content Patcher tokens):
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// before</span>
<span class="s2">&quot;Dialogue&quot;</span><span class="o">:</span> <span class="s2">&quot;Strings\\StringsFromCSFiles:ShopMenu.cs.11488&quot;</span><span class="p">,</span>

<span class="c1">// after: literal text supported</span>
<span class="s2">&quot;Dialogue&quot;</span><span class="o">:</span> <span class="s2">&quot;Welcome to Pierre&#39;s!&quot;</span><span class="p">,</span>

<span class="c1">// after: literal text with Content Patcher tokens</span>
<span class="s2">&quot;Dialogue&quot;</span><span class="o">:</span> <span class="s2">&quot;Welcome to Pierre&#39;s, {{PlayerName}}! {{i18n: translatable-text}}&quot;</span><span class="p">,</span>
</pre></div>
<h4><span class="mw-headline" id="Tokens">Tokens</span></h4>
<p>You can inject tokens using square brackets. For example, <code>"[LocalizedText Strings\StringsFromCSFiles:ShopMenu.cs.11488] This is raw text"</code> will show something like "<i>Welcome to Pierre's! This is raw text</i>". Token names are not case-sensitive.
</p><p>Here are the supported tokens:
</p>
<table class="wikitable">

<tbody><tr>
<th>token format
</th>
<th>output
</th></tr>
<tr>
<td><samp>[ArticleFor <code title="required field &#39;word&#39;">&lt;word&gt;</code>]</samp>
</td>
<td>The grammatical article (<i>a</i> or <i>an</i>) for the given word when playing in English, else blank. For example, <code>[ArticleFor apple] apple</code> will output <i>an apple</i>.
</td></tr>
<tr>
<td><samp>[CharacterName <code title="required field &#39;name&#39;">&lt;name&gt;</code>]</samp>
</td>
<td>The translated display name for an NPC, given their internal name.
</td></tr>
<tr>
<td><samp>[DataString <code title="required field &#39;asset name&#39;">&lt;asset name&gt;</code> <code title="required field &#39;key&#39;">&lt;key&gt;</code> <code title="required field &#39;index&#39;">&lt;index&gt;</code>]</samp>
</td>
<td>Parses the data asset identified by <code title="required field &#39;asset name&#39;">&lt;asset name&gt;</code>, finds the entry matching <code title="required field &#39;key&#39;">&lt;key&gt;</code>, splits the slash-delimited string, and returns the value with index <code title="required field &#39;index&#39;">&lt;index&gt;</code> (starting from 0).
<p>For example, <samp>[DataString Data\Blueprints Silo 8]</samp> matches the word "Silo" from this entry in <samp>Data\Blueprints</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span>  <span class="s2">&quot;Silo&quot;</span><span class="o">:</span> <span class="s2">&quot;390 100 330 10 334 5/3/3/-1/-1/-2/-1/null/Silo/Allows you to cut and store grass for feed./Buildings/none/48/128/-1/null/Farm/100/false&quot;</span>
</pre></div>
</td></tr>
<tr>
<td><samp>[DayOfMonth]</samp>
</td>
<td>The numeric day of month, like <samp>5</samp> on spring 5.
</td></tr>
<tr>
<td><samp>[EscapedText]</samp><br /><samp>[EscapedText <code title="required field &#39;text&#39;">&lt;text&gt;</code>]</samp>
</td>
<td>Marks a snippet of text as a single argument, so it can be safely passed into another token's space-delimited arguments even if it's empty or contains spaces.
<p>For example, the <samp>SpouseFarmerText</samp> expects two arguments separated by spaces. This passes an empty string for the first one, and text containing spaces for the second:
</p>
<pre>[SpouseFarmerText [EscapedText] [EscapedText spouse 28 63 2]]</pre>
</td></tr>
<tr>
<td><samp>[FarmerUniqueID]</samp>
</td>
<td>The target player's unique internal multiplayer ID
</td></tr>
<tr>
<td><samp>[FarmName]</samp>
</td>
<td>The farm name for the current save (without the injected "Farm" text).
</td></tr>
<tr>
<td><samp>[GenderedText <code title="required field &#39;male text&#39;">&lt;male text&gt;</code> <code title="required field &#39;female text&#39;">&lt;female text&gt;</code></samp>
</td>
<td>Depending on the target player's gender, show either the male text or female text. If the text contains spaces, you'll need to escape them using <samp>EscapedText</samp>.
</td></tr>
<tr>
<td><samp>[LocalizedText <code title="required field &#39;string key&#39;">&lt;string key&gt;</code>]</samp><br /><samp>[LocalizedText <code title="required field &#39;string key&#39;">&lt;string key&gt;</code> <code title="required field &#39;token values&#39;">&lt;token values&gt;</code>+]</samp>
</td>
<td>Translation text loaded from the given <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#String_keys" title="Modding:Modder Guide/Game Fundamentals">string key</a>. If the translation has placeholder tokens like <samp>{0}</samp>, you can add the values after the string key.
</td></tr>
<tr>
<td><samp>[LocationName <code title="required field &#39;location ID&#39;">&lt;location ID&gt;</code>]</samp>
</td>
<td>The translated display name for a location given its ID <a href="#Custom_locations">in <samp>Data/Locations</samp></a>.
</td></tr>
<tr>
<td><samp>[PositiveAdjective]</samp>
</td>
<td>A random adjective from the <samp>Strings\Lexicon</samp> data asset's <samp>RandomPositiveAdjective_PlaceOrEvent</samp> entry.
</td></tr>
<tr>
<td><samp>[Season]</samp>
</td>
<td>The current season name, like <i>spring</i>.
</td></tr>
<tr>
<td><samp>[SpouseFarmerText <code title="required field &#39;spouse is farmer text&#39;">&lt;spouse is farmer text&gt;</code> <code title="required field &#39;spouse is NPC text&#39;">&lt;spouse is NPC text&gt;</code></samp>
</td>
<td>Show a different text depending on whether the target player's spouse is a player or NPC. If the text contains spaces, you'll need to escape them using <samp>EscapedText</samp>.
</td></tr>
<tr>
<td><samp>[SpouseGenderedText <code title="required field &#39;male text&#39;">&lt;male text&gt;</code> <code title="required field &#39;female text&#39;">&lt;female text&gt;</code>]</samp>
</td>
<td>Equivalent to <samp>GenderedText</samp>, but based on the gender of the player's NPC or player spouse instead.
</td></tr>
<tr>
<td><samp>[SuggestedItem <code title="optional field &#39;interval&#39;">[interval]</code> <code title="optional field &#39;sync key&#39;">[sync key]</code>]</samp>
</td>
<td><b>(For shops only.)</b> The name of a random item currently available in the shop stock.
<p>The result will be identical for all queries with the same <code title="optional field &#39;sync key&#39;">[sync key]</code> during the given <code title="optional field &#39;interval&#39;">[interval]</code> (one of <samp>tick</samp>, <samp>day</samp>, <samp>season</samp>, <samp>year</samp>), including between players in multiplayer mode. If omitted, they default to <samp>day</samp> and the shop ID respectively.
</p>
</td></tr></tbody></table>
<p>When passing an input argument for tokens like <samp>ArticleFor</samp>, the input can contain its own nested tokens. For example, <code>"[ArticleFor [SuggestedItem]] [SuggestedItem]"</code> would output something like <i>an Apple</i>.
</p><p>If you're using <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a>, you can use its tokens anywhere in the string (including within square brackets); they'll be expanded before the game parses the string. For example, <code>"{{Spouse}} would love [ArticleFor [SuggestedItem]] [SuggestedItem]!"</code> would output something like "<i>Alexa would love an Apple!</i>".
</p>
<h4><span class="mw-headline" id="Extensibility_3">Extensibility</span></h4>
<p>C# mods can define custom tokens by calling <code>TokenParser.RegisterParser("tokenName", ...)</code>. To avoid conflicts, prefixing custom condition names with your mod ID (like <samp>Example.ModId_TokenName</samp>) is strongly recommended.
</p>
<h3><span class="mw-headline" id="Dialogue_changes_2">Dialogue changes</span></h3>
<ul>
<li>Added new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">dialogue</a> commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>description
</th></tr>
<tr>
<td><samp>$f <code title="required field &#39;response IDs&#39;">&lt;response IDs&gt;</code></samp>
</td>
<td>Forget any number of space-delimited <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue#Response_IDs" title="Modding:Dialogue">dialogue response IDs</a> previously answered by the player.
</td></tr>
<tr>
<td><samp>$v <code title="required field &#39;event id&#39;">&lt;event id&gt;</code> <code title="optional field &#39;check preconditions&#39;">[check preconditions]</code> <code title="optional field &#39;skip if seen&#39;">[skip if seen]</code></samp>
</td>
<td>Immediately start an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event</a> and end the current dialogue, subject to the conditions:
<ul><li><code title="optional field &#39;check preconditions&#39;">[check preconditions]</code>: whether to ignore the command if the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Event_preconditions" title="Modding:Event data">event's preconditions</a> don't match (one of <samp>true</samp> or <samp>false</samp>). Default true.</li>
<li><code title="optional field &#39;skip if seen&#39;">[skip if seen]</code>: whether to ignore the command if the player has already seen the given event. Default true.</li></ul>
<p>If the event is skipped, the dialogue continues to the next line instead.
</p><p>For example, <code>$v 60367 false false</code> will replay the bus arrival event from the start of the game.
</p>
</td></tr></tbody></table>
</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue#Response_IDs" title="Modding:Dialogue">Dialogue response IDs</a> are now strings, so mods can use a unique key like <samp>Example.ModId_ResponseName</samp> (instead of hoping no other mod uses the same number). Prefixing the mod ID is recommended to simplify troubleshooting and avoid conflicts. For best compatibility, custom IDs should only contain alphanumeric/underscore/dot characters.</li>
<li>Unknown <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">dialogue</a> commands starting with <samp>$</samp> are no longer parsed as a portrait number if they're not numeric.</li>
</ul>
<h3><span class="mw-headline" id="Event_changes"><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">Event</a> changes</span></h3>
<p><b>Major changes:</b>
</p>
<ul>
<li><p>Event IDs are now strings, so mods can use a unique key instead of hoping no other mod uses the same number. Unconditional events must have an empty precondition in their key (like <samp>"Example.ModId_EventName/"</samp>) to distinguish them from forks.</p>
<p>Prefixing the event ID with your mod ID is recommended to simplify troubleshooting and avoid conflicts. For best compatibility, custom IDs should only contain alphanumeric/underscore/dot characters.</p></li>
<li>Added validation for event preconditions &amp; commands. If a format or assumption is invalid, the game now logs a detailed error and (if applicable) skips the command, instead of crashing or silently ignoring it.</li>
<li>All event/festival commands with a direction argument now allow both case-insensitive names (like <samp>up</samp>) and numeric values.</li>
<li>You can now invert a precondition by prefixing it with <samp>!</samp>. For example, <code>!O Abigail</code> will match if the player is <i>not</i> married to Abigail.</li>
<li>C# mods can now add custom event preconditions &amp; commands using <samp>Event.RegisterCustomPrecondition</samp> and <samp>Event.RegisterCustomCommand</samp> respectively.</li>
<li>Added new event commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>description
</th></tr>
<tr>
<td><samp>addItem <code title="required field &#39;item ID&#39;">&lt;item ID&gt;</code> <code title="optional field &#39;count&#39;">[count]</code> <code title="optional field &#39;quality&#39;">[quality]</code></samp>
</td>
<td>Add an item to the player inventory (or open a grab menu if their inventory is full). The <code title="required field &#39;item ID&#39;">&lt;item ID&gt;</code> is the <a href="#Custom_items">qualified or unqualified item ID</a>, and <code title="optional field &#39;quality&#39;">[quality]</code> is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Quality" title="Modding:Items">numeric quality value</a>.
</td></tr>
<tr>
<td><samp>mailToday <code title="required field &#39;mail key&#39;">&lt;mail key&gt;</code></samp>
</td>
<td>Adds a letter to the mailbox immediately, given the <code title="required field &#39;mail key&#39;">&lt;mail key&gt;</code> in <samp>Data/Mail</samp>.
</td></tr>
<tr>
<td><samp>temporaryAnimatedSprite ...</samp>
</td>
<td>Add a temporary animated sprite to the event, using these space-delimited fields:
<table class="wikitable">

<tbody><tr>
<th>index
</th>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td>0
</td>
<td><samp>texture</samp>
</td>
<td>The asset name for texture to draw.
</td></tr>
<tr>
<td>1&#8211;4
</td>
<td><samp>rectangle</samp>
</td>
<td>The pixel area within the <samp>texture</samp> to draw, in the form <samp><code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code> <code title="required field &#39;width&#39;">&lt;width&gt;</code> <code title="required field &#39;height&#39;">&lt;height&gt;</code></samp>.
</td></tr>
<tr>
<td>5
</td>
<td><samp>interval</samp>
</td>
<td>The millisecond duration for each frame in the animation.
</td></tr>
<tr>
<td>6
</td>
<td><samp>frames</samp>
</td>
<td>The number of frames in the animation.
</td></tr>
<tr>
<td>7
</td>
<td><samp>loops</samp>
</td>
<td>The number of times to repeat the animation.
</td></tr>
<tr>
<td>8&#8211;9
</td>
<td><samp>tile</samp>
</td>
<td>The tile position at which to draw the sprite, in the form <samp><code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code></samp>.
</td></tr>
<tr>
<td>10
</td>
<td><samp>flicker</samp>
</td>
<td><b>[TODO: document what this does]</b> (one of <samp>true</samp> or <samp>false</samp>).
</td></tr>
<tr>
<td>11
</td>
<td><samp>flip</samp>
</td>
<td>Whether to flip the sprite horizontally when it's drawn (one of <samp>true</samp> or <samp>false</samp>).
</td></tr>
<tr>
<td>12
</td>
<td><samp>sort tile Y</samp>
</td>
<td>The tile Y position to use in the layer depth calculation, which affects which sprite is drawn on top if two sprites overlap.
</td></tr>
<tr>
<td>13
</td>
<td><samp>alpha fade</samp>
</td>
<td><b>[TODO: document what this does]</b>
</td></tr>
<tr>
<td>14
</td>
<td><samp>scale</samp>
</td>
<td>A multiplier applied to the sprite size (in addition to the normal 4× pixel zoom).
</td></tr>
<tr>
<td>15
</td>
<td><samp>scale change</samp>
</td>
<td><b>[TODO: document what this does]</b>
</td></tr>
<tr>
<td>16
</td>
<td><samp>rotation</samp>
</td>
<td>The rotation to apply to the sprite, measured in <a href="../../external.html?link=https://en.wikipedia.org/wiki/radians" class="extiw" title="wikipedia:radians">radians</a>.
</td></tr>
<tr>
<td>17
</td>
<td><samp>rotation change</samp>
</td>
<td><b>[TODO: document what this does]</b>
</td></tr>
<tr>
<td>18+
</td>
<td><i>flags</i>
</td>
<td>Any combination of these space-delimited flags:
<ul><li><samp>hold_last_frame</samp>: after playing the animation once, freeze the last frame as long as the sprite is shown.</li>
<li><samp>ping_pong</samp>: <b>[TODO: document what this does]</b></li>
<li><samp>motion <code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code></samp>: <b>[TODO: document what this does]</b></li>
<li><samp>acceleration <code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code></samp>: <b>[TODO: document what this does]</b></li>
<li><samp>acceleration_change <code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code></samp>: <b>[TODO: document what this does]</b></li></ul>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>warpFarmers [<code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code> <code title="required field &#39;direction&#39;">&lt;direction&gt;</code>]+ <code title="required field &#39;default offset&#39;">&lt;default offset&gt;</code> <code title="required field &#39;default x&#39;">&lt;default x&gt;</code> <code title="required field &#39;default&#39;">&lt;default&gt;</code> <code title="required field &#39;direction&#39;">&lt;direction&gt;</code></samp>
</td>
<td>Warps connected players to the given <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#Tiles" title="Modding:Modder Guide/Game Fundamentals">tile coordinates</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Directions" title="Modding:Event data">numeric directions</a>. The <code title="required field &#39;x&#39;">&lt;x&gt;</code> <code title="required field &#39;y&#39;">&lt;y&gt;</code> <code title="required field &#39;direction&#39;">&lt;direction&gt;</code> triplet is repeated for each connected player (e.g. the first triplet is for the main player, second triplet is for the first farmhand, etc). The triplets are followed by an offset direction (one of <samp>up</samp>, <samp>down</samp>, <samp>left</samp>, or <samp>right</samp>), and a final triplet which defines the default values used by any other player.
</td></tr></tbody></table>
</li>
</ul>
<p><b>Improved commands:</b>
</p>
<ul><li>Added support for arbitrary item IDs in <samp>awardFestivalPrize</samp> and <samp>itemAboveHead</samp>.</li>
<li>Added <samp>removeItem</samp> argument for an optional count, like <samp>removeItem <code title="required field &#39;item ID&#39;">&lt;item ID&gt;</code> <code title="optional field &#39;count&#39;">[count]</code></samp>.</li>
<li>Removed <samp>weddingSprite</samp> command (which was broken and unused).</li>
<li>Removed <samp>ambientLight</samp>'s four-argument form (which was unused and had confusing behavior).</li>
<li>Fixed some commands assuming a boolean argument is true if present, regardless of its value. This affects the <samp>changeToTemporaryMap</samp>, <samp>emote</samp>, <samp>extendSourceRect</samp>, <samp>faceDirection</samp>, <samp>globalFade</samp>, <samp>globalFadeToClear</samp>, <samp>positionOffset</samp>, and <samp>warp</samp> commands.</li>
<li>Fixed some commands assuming any value except the exact case-sensitive string <samp>true</samp> is false. This affects the <samp>animate</samp>, <samp>glow</samp>, <samp>hideShadow</samp>, <samp>ignoreMovementAnimation</samp>, <samp>temporaryAnimatedSprite</samp>, <samp>temporarySprite</samp>, and <samp>viewport</samp> commands.</li>
<li>Fixed some commands silently ignoring values they can't parse as the expected type. This affects the <samp>addItem</samp>, <samp>makeInvisible</samp>, and <samp>removeItem</samp> commands.</li>
<li>Fixed crash when some commands are passed <samp>farmer[number]</samp> for a player who's not available, or <samp>farmer[number]</samp> when they expect <samp>farmer</samp>.</li>
<li>Fixed some commands not taking into account custom farmer actors when checking <samp>farmer*</samp> actor IDs.</li>
<li>Fixed <samp>makeInvisible</samp> not hiding terrain features when using the default area size.</li>
<li>Fixed <samp>ignoreMovementAnimation</samp> ignoring its _ignore_ argument.</li></ul>
<p><b>Other improvements:</b>
</p>
<ul><li>Festivals now set the event ID to a value like <samp>festival_fall16</samp>, instead of <samp>-1</samp>.</li>
<li>For C# mods, the new <samp>Event.fromAssetName</samp> field indicates which data asset (if any) the event was loaded from.</li>
<li>Event script errors are now logged (in addition to being shown in the chatbox like before).</li></ul>
<h3><span class="mw-headline" id="Mail_changes"><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">Mail</a> changes</span></h3>
<ul>
<li>Improved mail commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>changes
</th></tr>
<tr>
<td><samp>%item</samp>
</td>
<td>&#32;
<ul><li>Added <samp>%item id <code title="required field &#39;item id&#39;">&lt;item id&gt;</code> <code title="optional field &#39;count&#39;">[count]</code></samp> form which accepts a <a href="#Custom_items">qualified or unqualified item ID</a>. This deprecates the <samp>bigobject</samp>, <samp>furniture</samp>, <samp>object</samp>, and <samp>tools</samp> options.</li>
<li>Added optional <code title="required field &#39;key&#39;">&lt;key&gt;</code> argument to <samp>%item cookingRecipe <code title="required field &#39;key&#39;">&lt;key&gt;</code></samp>, to learn a specific <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Recipe_data" title="Modding:Recipe data">cooking recipe</a>. The previous <samp>%item cookingRecipe</samp> form (without a key) works the same way as before.</li></ul>
</td></tr></tbody></table>
</li>
</ul>
<h3><span id="New_C#_utility_methods"></span><span class="mw-headline" id="New_C.23_utility_methods">New C# utility methods</span></h3>
<p>Stardew Valley 1.6 adds several new methods to simplify common logic.
</p>
<h4><span class="mw-headline" id="Argument_handling">Argument handling</span></h4>
<p>The new <samp>ArgUtility</samp> class handles splitting, reading, and validating <samp>string[]</samp> argument lists. The main methods are:
</p>
<table class="wikitable">

<tbody><tr>
<th><samp>ArgUtility</samp> method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>SplitBySpace</samp>
</td>
<td>Split a space-separated list of arguments into an array. This automatically ignores extra spaces, so <samp>" x &#160;y "</samp> and <samp>"x y"</samp> are equivalent. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpace</span><span class="p">(</span><span class="s">&quot;a b c&quot;</span><span class="p">);</span>
<span class="kt">string</span> <span class="n">secondField</span> <span class="p">=</span> <span class="n">fields</span><span class="p">[</span><span class="m">1</span><span class="p">];</span> <span class="c1">// &quot;b&quot;</span>
</pre></div>
</td></tr>
<tr>
<td><samp>SplitBySpaceAndGet</samp>
</td>
<td>Get the value at an index in a space-delimited string (if found), else return the default value. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">thirdField</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceAndGet</span><span class="p">(</span><span class="s">&quot;a b c&quot;</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span> <span class="c1">// &quot;c&quot;</span>
<span class="kt">string</span> <span class="n">invalidFieldA</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceAndGet</span><span class="p">(</span><span class="s">&quot;a b c&quot;</span><span class="p">,</span> <span class="m">5</span><span class="p">);</span> <span class="c1">// null</span>
<span class="kt">string</span> <span class="n">invalidFieldB</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceAndGet</span><span class="p">(</span><span class="s">&quot;a b c&quot;</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">:</span> <span class="s">&quot;boop&quot;</span><span class="p">);</span> <span class="c1">// &quot;boop&quot;</span>
</pre></div>
<p>If you want to read multiple values, it's much more efficient to use <samp>SplitBySpace</samp> and read them from the array instead.
</p>
</td></tr>
<tr>
<td><samp>Get</samp><br /><samp>GetBool</samp><br /><samp>GetFloat</samp><br /><samp>GetInt</samp>
</td>
<td>Get a parsed value from an array by its index (if found and valid), else the default value.
<p>For example, code like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="k">value</span> <span class="p">=</span> <span class="n">fields</span><span class="p">.</span><span class="n">Length</span> <span class="p">&gt;</span> <span class="m">4</span> <span class="p">&amp;&amp;</span> <span class="kt">int</span><span class="p">.</span><span class="n">TryParse</span><span class="p">(</span><span class="n">fields</span><span class="p">[</span><span class="m">4</span><span class="p">],</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">parsed</span><span class="p">)</span>
    <span class="p">?</span> <span class="n">parsed</span>
    <span class="p">:</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>
</pre></div>
<p>Can now be rewritten like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="k">value</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetInt</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="p">-</span><span class="m">1</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGet</samp><br /><samp>TryGetBool</samp><br /><samp>TryGetFloat</samp><br /><samp>TryGetInt</samp><br /><samp>TryGetPoint</samp><br /><samp>TryGetRectangle</samp><br /><samp>TryGetVector2</samp>
</td>
<td>Try to get a parsed value from an array by its index. If it's not found or can't be converted to the expected value, it sets the <samp>out string error</samp> argument so you can log an error if needed.
<p>For example, this parses a numeric value from a space-delimited string:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">&quot;10 35&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">TryGetInt</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">error</span><span class="p">))</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Parsed value: {value}&quot;</span><span class="p">);</span> <span class="c1">// &quot;Parsed value: 35&quot;</span>
<span class="k">else</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Failed parsing value: {error}&quot;</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Warn</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGetDirection</samp>
</td>
<td>Try to get a parsed <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Directions" title="Modding:Event data">direction</a> value from an array by its index. This supports case-insensitive direction names (one of <samp>down</samp>, <samp>left</samp>, <samp>right</samp>, or <samp>up</samp>) or numeric values.
</td></tr>
<tr>
<td><samp>TryGetRemainder</samp>
</td>
<td>Try to get all arguments starting from an index as a concatenated string. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">&quot;A B C D E F&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">TryGetRemainder</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">remainder</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">error</span><span class="p">))</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Remainder: {remainder}&quot;</span><span class="p">);</span> <span class="c1">// &quot;Remainder: C D E F&quot;</span>
<span class="k">else</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Failed getting remainder: {error}&quot;</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Warn</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGetOptional</samp><br /><samp>TryGetOptionalBool</samp><br /><samp>TryGetOptionalDirection</samp><br /><samp>TryGetOptionalFloat</samp><br /><samp>TryGetOptionalInt</samp><br /><samp>TryGetOptionalRemainder</samp>
</td>
<td>Equivalent to <samp>TryGet*</samp>, except that it'll return a default value if the argument is missing. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">&quot;10&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">TryGetOptionalInt</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="n">error</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">:</span> <span class="m">99</span><span class="p">))</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Parsed value: {value}&quot;</span><span class="p">);</span> <span class="c1">// &quot;Parsed value: 99&quot;</span>
<span class="k">else</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Failed parsing value: {error}&quot;</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Warn</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>HasIndex</samp>
</td>
<td>Get whether an index is within the bounds of the array. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">&quot;10 5&quot;</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">inRange</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">HasIndex</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// true (index = &#39;5&#39;)</span>
</pre></div>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Game_paths">Game paths</span></h4>
<p>The game folder paths were previously hardcoded throughout the code. These are now centralized with a few methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Program.GetLocalAppDataFolder</samp><br /><samp>Program.GetAppDataFolder</samp>
</td>
<td>Get the absolute path to the game's app data folder (which contains the <a href="../../external.html?link=https://stardewvalleywiki.com/Saves" title="Saves"><samp>Saves</samp> folder</a>) or local app data folder (which contains <samp>ErrorLogs</samp> and <samp>Screenshots</samp>). These methods are equivalent on Windows, but different on Linux/macOS.
</td></tr>
<tr>
<td><samp>Program.GetSavesFolder</samp>
</td>
<td>Get the absolute path to the game's <a href="../../external.html?link=https://stardewvalleywiki.com/Saves" title="Saves"><samp>Saves</samp> folder</a>.
</td></tr>
<tr>
<td><samp>Game1.GetScreenshotFolder</samp>
</td>
<td>Get the absolute path to the game's <samp>Screenshots</samp> folder.
</td></tr>
<tr>
<td><samp>options.GetFilePathForDefaultOptions</samp>
</td>
<td>Get the absolute path to the game's <samp>default_options</samp> file.
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Randomization">Randomization</span></h4>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Utility.CreateDaySaveRandom</samp>
</td>
<td>Creates a <samp>Random</samp> instance using the most common seed (based on the save ID and total days played).
</td></tr>
<tr>
<td><samp>Utility.CreateRandom</samp><br /><samp>Utility.CreateRandomSeed</samp>
</td>
<td>Creates a <samp>Random</samp> (or seed for a <samp>Random</samp>) by combining the given seed values, which can be any numeric type.
</td></tr>
<tr>
<td><samp>Utility.TryCreateIntervalRandom</samp>
</td>
<td>Get an RNG which produces identical results for all RNGs created with the same sync key during the given interval (one of <samp>tick</samp>, <samp>day</samp>, <samp>season</samp>, or <samp>year</samp>), including between players in multiplayer mode.
<p>For example, this will return the same number each time it's called until the in-game day changes:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="kt">int</span> <span class="nf">GetDailyRandomNumber</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Utility</span><span class="p">.</span><span class="n">TryCreateIntervalRandom</span><span class="p">(</span><span class="s">&quot;day&quot;</span><span class="p">,</span> <span class="s">&quot;example sync key&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">Random</span> <span class="n">random</span><span class="p">,</span> <span class="k">out</span> <span class="n">_</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">random</span><span class="p">.</span><span class="n">Next</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.TryGetRandom</samp>
</td>
<td>Get a random entry from a dictionary.
</td></tr>
<tr>
<td><samp>random.GetChance</samp>
</td>
<td>Perform a random probability check.
<p>This just lets you simplify code like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">()</span> <span class="p">&lt;</span> <span class="m">0.8</span><span class="p">)</span>
</pre></div>
<p>Into a more semantic form:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">GetChance</span><span class="p">(</span><span class="m">0.8</span><span class="p">))</span>
</pre></div>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Other_2">Other</span></h4>
<p>Here are some of the other new methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Utility.distanceFromScreen</samp>
</td>
<td>Get the pixel distance between a position in the world and the player's screen viewport, where 0 is within the viewport.
</td></tr>
<tr>
<td><samp>Utility.GetEnumOrDefault</samp>
</td>
<td>Get an enum value if it's valid, else get a default value. This is mainly used to validate input from data files.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">NpcGender</span> <span class="n">gender</span> <span class="p">=</span> <span class="p">(</span><span class="n">NPCGender</span><span class="p">)</span><span class="m">999999</span><span class="p">;</span>
<span class="n">gender</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">GetEnumOrDefault</span><span class="p">(</span><span class="n">gender</span><span class="p">,</span> <span class="n">Gender</span><span class="p">.</span><span class="n">Male</span><span class="p">);</span> <span class="c1">// returns Gender.Male since there&#39;s no enum constant with value 999999</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.isFestivalDay</samp><br /><samp>Utility.isPassiveFestivalDay</samp>
</td>
<td>These methods existed before 1.6, but now have versions with no arguments to check today:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">festivalToday</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">isFestivalToday</span><span class="p">();</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.TryParseDirection</samp>
</td>
<td>Parses a string into a direction value (like <samp>Game1.down</samp>), if it's valid. This supports case-insensitive direction names (one of <samp>down</samp>, <samp>left</samp>, <samp>right</samp>, or <samp>up</samp>) or <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Directions" title="Modding:Event data">numeric values</a>.
</td></tr>
<tr>
<td><samp>Utility.TryParseEnum</samp>
</td>
<td>Parses a string into an enum value if possible, case-insensitively. Unlike <a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/api/system.enum.tryparse"><samp>Enum.TryParse</samp></a>, an invalid numeric value won't be cast:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Enum</span><span class="p">.</span><span class="n">TryParse</span><span class="p">(</span><span class="s">&quot;999999&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">DayOfWeek</span> <span class="n">day</span><span class="p">);</span>        <span class="c1">// true, even though there&#39;s no matching DayOfWeek value</span>
<span class="n">Utility</span><span class="p">.</span><span class="n">TryParseEnum</span><span class="p">(</span><span class="s">&quot;999999&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">DayOfWeek</span> <span class="n">day</span><span class="p">);</span> <span class="c1">// false</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.fuzzyCompare</samp>
</td>
<td>Get whether a term is a fuzzy match for a search query. Returns the numeric match priority (where lower values are a better match), or null if the term doesn't match the query.
</td></tr>
<tr>
<td><samp>Utility.GetDeterministicHashCode</samp>
</td>
<td><i>(Specialized)</i> Get a <a rel="nofollow" class="external text" href="../../external.html?link=https://en.wikipedia.org/wiki/Hash_function">hash code</a> which is always the same for a given input (unlike <a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/api/system.object.gethashcode"><samp>string.GetHashCode()</samp></a>), even if you restart the game or play on another computer. For example, this ensures that randomized shop items are the same across all players in multiplayer and don't change when you reload the save.
</td></tr>
<tr>
<td><samp>rectangle.GetPoints</samp><br /><samp>rectangle.GetVectors</samp>
</td>
<td>Get all the integer coordinates within a given <samp>Rectangle</samp>. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">var</span> <span class="n">tileArea</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
<span class="n">Point</span><span class="p">[]</span> <span class="n">tiles</span> <span class="p">=</span> <span class="n">tileArea</span><span class="p">.</span><span class="n">GetPoints</span><span class="p">();</span> <span class="c1">// (0, 0), (1, 0), (0, 1), (1, 1)</span>
</pre></div>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Static_delegate_builder">Static delegate builder</span></h3>
<p>For C# mods, <samp>StaticDelegateBuilder</samp> is a specialized class which converts a method name into an optimized delegate which can be called by code. This is used by vanilla code to optimize methods referenced in assets like <a href="#Custom_machines"><samp>Data/Machines</samp></a>.
</p><p>For example, given a static method like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">DropInDeconstructor</span><span class="p">(</span><span class="n">Item</span> <span class="n">machine</span><span class="p">,</span> <span class="n">Item</span> <span class="n">droppedInItem</span><span class="p">,</span> <span class="n">Farmer</span> <span class="n">who</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">probe</span><span class="p">,</span> <span class="k">ref</span> <span class="n">Item</span> <span class="n">output</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">int</span> <span class="n">minutesUntilReady</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
<p>And a delegate which matches it:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="k">delegate</span> <span class="kt">bool</span> <span class="nf">MachineItemConversionDelegate</span><span class="p">(</span><span class="n">Item</span> <span class="n">machine</span><span class="p">,</span> <span class="n">Item</span> <span class="n">droppedInItem</span><span class="p">,</span> <span class="n">Farmer</span> <span class="n">who</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">probe</span><span class="p">,</span> <span class="k">ref</span> <span class="n">Item</span> <span class="n">output</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">int</span> <span class="n">minutesUntilReady</span><span class="p">);</span>
</pre></div>
<p>You can create an optimized delegate and call it like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">StaticDelegateBuilder</span><span class="p">.</span><span class="n">TryCreateDelegate</span><span class="p">(</span><span class="s">&quot;StardewValley.Object.DropInDeconstructor&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">MachineItemConversionDelegate</span> <span class="n">method</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">error</span><span class="p">))</span>
    <span class="k">return</span> <span class="nf">method</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">inputItem</span><span class="p">,</span> <span class="n">who</span><span class="p">,</span> <span class="n">probe</span><span class="p">,</span> <span class="k">ref</span> <span class="n">newHeldItem</span><span class="p">,</span> <span class="k">ref</span> <span class="n">minutesUntilMorning</span><span class="p">);</span>
<span class="k">else</span>
    <span class="n">Game1</span><span class="p">.</span><span class="n">log</span><span class="p">.</span><span class="n">Warn</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;Machine {ItemId} has invalid conversion method: {error}&quot;</span><span class="p">);</span>
</pre></div>
<p>The <samp>TryCreateDelegate</samp> method will cache created delegates, so calling it again will just return the same delegate instance.
</p>
<h3><span class="mw-headline" id="Game_logging_changes">Game logging changes</span></h3>
<p>The game now writes debug output through an internal <samp>Game1.log</samp> wrapper, instead of using <samp>Console.WriteLine</samp> directly. For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// old code</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Error playing sound: &quot;</span> <span class="p">+</span> <span class="n">ex</span><span class="p">);</span>

<span class="c1">// new code</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">log</span><span class="p">.</span><span class="n">Error</span><span class="p">(</span><span class="s">&quot;Error playing sound.&quot;</span><span class="p">,</span> <span class="n">ex</span><span class="p">);</span>
</pre></div>
<p>This has a few benefits:
</p>
<ul><li>For vanilla players, the game no longer uses time &amp; resources writing to a console that's not visible anyway.</li>
<li>For modded players, SMAPI can now...
<ul><li>distinguish between the game's debug/warn/error messages (so many warnings/errors that would previously appear as hidden <samp>TRACE</samp> messages will now be shown with the correct level);</li>
<li>apply its formatting rules to exceptions logged by the game too;</li>
<li>redirect game output much more efficiently without console interception.</li></ul></li></ul>
<h3><span class="mw-headline" id="Other_changes_2">Other changes</span></h3>
<h4><span class="mw-headline" id="Audio_2">Audio</span></h4>
<ul>
<li>Added <samp>Game1.sounds</samp>, which unifies the high-level sound effect logic (e.g. distance fading and multiplayer sync).</li>
<li>Added <samp>silence</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Audio" title="Modding:Audio">audio cue</a> for music. This is different from <samp>none</samp> in that it suppresses both town music and ambient sounds.</li>
<li>Added <samp>Game1.soundBank.Exists(cueName)</samp> method to check if an audio cue exists.</li>
<li>Added <samp>Game1.playSound</samp> overloads to get the audio cue being played.</li>
<li>Added <samp>character.playNearbySoundAll</samp> and <samp>playNearbySoundAllLocal</samp> methods to play a sound for players near the player/character.</li>
<li>Added position argument to <samp>DelayedAction.playSoundAfterDelay</samp>.</li>
<li>Removed <samp>NetAudioCueManager</samp> and <samp>Game1.locationCues</samp> (unused).</li>
<li>Unified the methods for playing normal/pitched/positional sounds (which also adds support for pitched non-synced &amp; pitched positional sounds):
<table class="wikitable">

<tbody><tr>
<th>old methods
</th>
<th>new method
</th></tr>
<tr>
<td><samp>Game1.playSound</samp><br /><samp>Game1.playSoundAt</samp><br /><samp>Game1.playSoundPitched</samp>
</td>
<td><samp>Game1.playSound</samp>
</td></tr>
<tr>
<td><samp>GameLocation.playSound</samp><br /><samp>GameLocation.playSoundAt</samp><br /><samp>GameLocation.playSoundPitched</samp>
</td>
<td><samp>GameLocation.playSound</samp>
</td></tr>
<tr>
<td><samp>GameLocation.localSound</samp><br /><samp>GameLocation.localSoundAt</samp>
</td>
<td><samp>GameLocation.localSound</samp>
</td></tr>
<tr>
<td><samp>NetAudio.Play</samp><br /><samp>NetAudio.PlayAt</samp><br /><samp>NetAudio.PlayPitched</samp>
</td>
<td><samp>NetAudio.Play</samp>
</td></tr>
<tr>
<td><samp>NetAudio.PlayLocal</samp><br /><samp>NetAudio.PlayLocalAt</samp>
</td>
<td><samp>NetAudio.PlayLocal</samp>
</td></tr></tbody></table></li>
</ul>
<h4><span class="mw-headline" id="Debug_commands">Debug commands</span></h4>
<ul>
<li>Added new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Console_commands" title="Modding:Console commands">debug commands</a>:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>description
</th></tr>
<tr>
<td><samp>bsm</samp>
</td>
<td>If the player is standing right under a building, open a menu to change the building appearance.
</td></tr>
<tr>
<td><samp>exportShops</samp>
</td>
<td>Export a summary of what's in every shop in the game, taking into account their current conditions. This is saved to a file on disk, and the file path shown in the console.
</td></tr>
<tr>
<td><samp>filterLoadMenu</samp> / <samp>flm</samp>
</td>
<td><i>Syntax: <samp>filterLoadMenu <code title="required field &#39;search text&#39;">&lt;search text&gt;</code></samp></i>
<p>Filter the current list of saves to those whose player name or farm name contains the given text.
</p>
</td></tr>
<tr>
<td><samp>forcebuild</samp>
</td>
<td>Equivalent to <samp>build</samp>, but disables all safety checks so you can build in a location that wouldn't normally allow buildings, build on top of farm animals or placed objects, etc.
</td></tr>
<tr>
<td><samp>gamequery</samp> / <samp>gq</samp>
</td>
<td><i>Syntax:</i> <samp>gq <code title="required field &#39;query&#39;">&lt;query&gt;</code></samp>
<p>Check whether the given <a href="#Game_state_queries">game state query</a> matches in the current context. For example:
</p>
<pre>gq !SEASON Spring, WEATHER Here Sun
&gt; Result: true.
</pre>
</td></tr>
<tr>
<td><samp>itemquery</samp> / <samp>iq</samp>
</td>
<td><i>Syntax:</i> <samp>iq <code title="required field &#39;query&#39;">&lt;query&gt;</code></samp>
<p>Open a shop menu with all the items matching an <a href="#Item_queries">item query</a> (all items free). For example:
</p>
<ul><li><samp>debug iq ALL_ITEMS</samp> shows all items;</li>
<li><samp>debug iq ALL_ITEMS (W)</samp> shows all weapons;</li>
<li><samp>debug iq (O)128</samp> shows a pufferfish (object 128);</li>
<li><samp>debug iq FLAVORED_ITEM Wine (O)128</samp> shows Pufferfish Wine.</li></ul>
</td></tr>
<tr>
<td><samp>legacyTimeouts</samp>
</td>
<td>Switches the multiplayer timeout behavior between legacy (timeouts are based on both ping time and last sync time like in 1.5.6) and non-legacy (timeouts are only based on ping time).
</td></tr>
<tr>
<td><samp>logSounds</samp>
</td>
<td>Log info about each sound effect played to the SMAPI console window.
</td></tr>
<tr>
<td><samp>qualifiedid</samp>
</td>
<td>Print the held item's display name and <a href="#Custom_items">qualified item ID</a>.
</td></tr>
<tr>
<td><samp>shop</samp>
</td>
<td><i>Syntax:</i> <samp>shop <code title="required field &#39;shop ID&#39;">&lt;shop ID&gt;</code> <code title="optional field &#39;owner name&#39;">[owner name]</code></samp>
<p>Open a <a href="#Custom_shops">shop defined in <samp>Data/Shops</samp></a>, regardless of whether one of the owners is nearby. Specifying <code title="optional field &#39;owner name&#39;">[owner name]</code> will use that NPC, otherwise the command will find the closest valid NPC if possible (else open with no NPC).
</p>
</td></tr>
<tr>
<td><samp>testwedding</samp>
</td>
<td>Immediately play the <a href="../../external.html?link=https://stardewvalleywiki.com/Marriage#The_Wedding" title="Marriage">wedding</a> event.
</td></tr>
<tr>
<td><samp>thishouseupgrade</samp> / <samp>thishouse</samp> / <samp>thu</samp>
</td>
<td>Equivalent to <samp>houseupgrade</samp>, but can be used to upgrade another player's house by running it from inside or just south of its exterior.
</td></tr>
<tr>
<td><samp>tokens</samp>
</td>
<td><i>Syntax:</i> <samp>tokens <code title="required field &#39;tokenized string&#39;">&lt;tokenized string&gt;</code></samp>
<p>Parses a <a href="#Tokenizable_string">tokenizable string</a> and prints its output. For example:
</p>
<pre>tokens [LocalizedText Strings\StringsFromCSFiles:MapPage.cs.11064 [EscapedText [FarmName]]]
&gt; Result: "Lon Lon Farm"
</pre>
</td></tr></tbody></table></li>
<li>Improved existing debug commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>changes
</th></tr>
<tr>
<td><samp>clearFurniture</samp>
</td>
<td>Now works outside the farmhouse too.
</td></tr>
<tr>
<td><samp>ebi</samp>
</td>
<td>Fixed event not played correctly if called from the same location as the event.
</td></tr>
<tr>
<td><samp>fish</samp>
</td>
<td>Fixed error if you're not holding a fishing rod. It now opens the fishing minigame with no tackle instead.
</td></tr>
<tr>
<td><samp>getStat</samp><br /><samp>setStat</samp>
</td>
<td>Added validation for the stat name.
</td></tr>
<tr>
<td><samp>growAnimals</samp><br /><samp>growAnimalsFarm</samp>
</td>
<td>Merged into one command that supports any location and doesn't reset the age of animals which are already adults.
</td></tr>
<tr>
<td><samp>growCrops</samp>
</td>
<td>Fixed error growing mixed seeds or giant crops.
</td></tr>
<tr>
<td><samp>junimoGoodbye</samp><br /><samp><samp>junimoStar</samp>
</samp></td>
<td>Added validation to check that you're inside the community center.
</td></tr>
<tr>
<td><samp>monster</samp>
</td>
<td>Added validation for the monster name.
</td></tr>
<tr>
<td><samp>movie</samp>
</td>
<td>Rewritten; it's now simpler, applies the normal game logic, defaults to today's movie, and avoids depending on NPC indexes in <samp>Data/NPCDispositions</samp> since those can change with custom NPCs.
<p>New usage:
</p>
<dl><dd><i><samp>debug movie <code title="optional field &#39;movie ID&#39;">[movie ID]</code> <code title="optional field &#39;invite NPC name&#39;">[invite NPC name]</code></samp></i></dd>
<dd><i><samp>debug movie current <code title="optional field &#39;invite NPC name&#39;">[invite NPC name]</code></samp></i></dd></dl>
<p>The movie ID defaults to today's movie, and the NPC name can be omitted to watch the movie without an invitee. Specifying <samp>current</samp> as the movie uses the default value.
</p>
</td></tr>
<tr>
<td><samp>playSound</samp>
</td>
<td>Added an optional pitch argument, like <samp>debug playSound barrelBreak 1200</samp>. The pitch is a value from 1 (low pitch) to 2400 (high pitch) inclusively.
</td></tr>
<tr>
<td><samp>skullGear</samp>
</td>
<td>&#32;
<ul><li>Fixed command setting 32 slots instead of 36.</li>
<li>Fixed command not adding empty inventory slots as expected by some game code.</li></ul>
</td></tr>
<tr>
<td><samp>setupFishPondFarm</samp>
</td>
<td>Fixed error if the farm already has non-fish-pond buildings constructed.
</td></tr>
<tr>
<td><samp>whereIs</samp>
</td>
<td>Now lists all matching NPCs instead of the first one.
</td></tr></tbody></table></li>
<li>Removed some debug commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>notes
</th></tr>
<tr>
<td><samp>oldMineGame</samp>
</td>
<td>The pre-1.4 <a href="../../external.html?link=https://stardewvalleywiki.com/Junimo_Kart" title="Junimo Kart">Junimo Kart</a> code was removed.
</td></tr>
<tr>
<td><samp>tool</samp>
</td>
<td>Upgraded tools are separate items now (they're no longer the base tool with an <samp>UpgradeLevel</samp> incremented). You can spawn an upgraded tool like <samp>debug fin IridiumAxe</samp> instead.
</td></tr></tbody></table></li>
<li>Added alternative names for some debug commands (new names in parentheses): <samp>bpm</samp> + <samp>bsm</samp> (<samp>paintBuilding</samp> + <samp>skinBuilding</samp>), <samp>craftingRecipe</samp> (addCraftingRecipe), <samp>db</samp> (speakTo), <samp>dialogue</samp> (addDialogue), <samp>mp</samp> (milkPail), <samp>pdb</samp> (printGemBirds), <samp>r</samp> (resetForPlayerEntry), <samp>ring</samp> (addRing), <samp>removeLargeTf</samp> (removeLargeTerrainFeature), <samp>sb</samp> (showTextAboveHead), <samp>sl</samp> + <samp>sr</samp> (<samp>shiftToolbarLeft</samp> + shiftToolbarRight), <samp>sn</samp> (secretNote), and <samp>tls</samp> (toggleLightingScale).</li>
</ul>
<h4><span class="mw-headline" id="Location_logic">Location logic</span></h4>
<ul><li>The <a href="../../external.html?link=https://stardewvalleywiki.com/Desert" class="mw-redirect" title="Desert">desert</a> no longer assumes the player arrived by bus unless their previous location was the <a href="../../external.html?link=https://stardewvalleywiki.com/Bus_Stop" title="Bus Stop">bus stop</a>.</li>
<li>The ticket price for the bus and Willy's boat can now be edited by C# mods via <samp>BusStop.TicketPrice</samp> and <samp>BoatTunnel.TicketPrice</samp> respectively.</li></ul>
<h4><span id="Menus_&amp;_UI"></span><span class="mw-headline" id="Menus_.26_UI">Menus &amp; UI</span></h4>
<ul><li>Rewrote calendar menu (<samp>Billboard</samp>) to simplify custom events &amp; event types. C# mods can now edit <samp>billboard.calendarDayData</samp> or patch <samp>billboard.GetEventsForDay</samp> to add new events.</li>
<li>The <samp>SpriteText</samp> methods now accept arbitrary <samp>Color</samp> tints instead of a few predefined color IDs.</li>
<li>Added <samp>MoneyDial.ShouldShakeMainMoneyBox</samp> field to simplify custom dials.</li>
<li>Fixed an edge case where a custom language's fonts wouldn't be loaded when switching language.</li></ul>
<h4><span class="mw-headline" id="Net_fields"><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#Net_fields" title="Modding:Modder Guide/Game Fundamentals">Net fields</a></span></h4>
<ul><li>Removed implicit conversion operators for most types (except <samp>NetBool</samp>, <samp>NetInt</samp>, and <samp>NetString</samp>).</li>
<li><samp>NetLocationRef</samp> now has a public <samp>LocationName</samp> and <samp>IsStructure</samp>, and its <samp>Update</samp> method allows forcing an update.</li></ul>
<h4><span class="mw-headline" id="Quests">Quests</span></h4>
<ul><li>Quests now have string IDs, to simplify custom quest frameworks.</li>
<li>Added validation for quest data parsing.</li>
<li>In <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Special_orders" title="Modding:Special orders"><samp>Data/SpecialOrders</samp></a>, the <samp>Duration</samp> and <samp>Repeatable</samp> fields are now strongly-typed and case-insensitive.</li></ul>
<h4><span class="mw-headline" id="Seasons">Seasons</span></h4>
<ul><li>Added a <samp>Season</samp> enum for strongly-typed, case-insensitive season checks (like <code>Game1.season == Season.Spring</code> instead of <code>Game1.currentSeason == "spring"</code>).</li>
<li>Added <samp>Game1.season</samp>, <samp>Game1.GetSeasonForLocation</samp>, <samp>Game1.WorldDate.Season</samp>, and <samp>location.GetSeason()</samp> to get the season enum.</li>
<li>Added <samp>Utility.getSeasonKey</samp> to get the key form from a season enum.</li>
<li>Renamed some members for clarity (<samp>Game1.GetSeasonForLocation</samp> → <samp>GetSeasonKeyForLocation</samp>, <samp>location.GetSeasonForLocation</samp> → <samp>GetSeasonKey</samp>, <samp>WorldDate.Season</samp> → <samp>SeasonKey</samp>).</li>
<li>Fixed <samp>location.GetSeasonKey()</samp> not applying the greenhouse logic.</li></ul>
<h4><span class="mw-headline" id="Time">Time</span></h4>
<ul><li>For C# mods, the <samp>Game1.realMilliSecondsPerGame</samp> and <samp>Game1.realMilliSecondsPerGameTenMinutes</samp> fields are no longer marked <samp>const</samp>, and the <samp>GameLocation.getExtraMillisecondsPerInGameMinuteForThisLocation()</samp> method has been replaced with a settable <samp>ExtraMillisecondsPerInGameMinute</samp> property. That lets you change the time rate used by the vanilla game code, but you should be careful doing this since it may cause unintended effects.</li></ul>
<h4><span class="mw-headline" id="Other_3">Other</span></h4>
<ul><li>Error stack traces on Linux/macOS now have line numbers.</li>
<li>All space-delimited fields now ignore extra spaces instead of crashing. This affects map/tile properties, data assets, event commands, game state queries, etc.</li>
<li>All players and NPCs now have <samp>Tile</samp> and <samp>TilePoint</samp> properties, which are their cached tile position. This obsoletes <samp>getTileLocation()</samp>, <samp>getTileLocationPoint()</samp>, <samp>getTileX()</samp>, and <samp>getTileY()</samp> (which now just call the properties).</li>
<li>All <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#Net_fields" title="Modding:Modder Guide/Game Fundamentals">net fields</a> now have <samp>Name</samp> and <samp>Owner</samp> fields, which are used to show informative error messages when there's a sync issue and validate common mistakes (e.g. a net field not added to the <samp>NetFields</samp> collection).</li>
<li>Added C# code docs in many places.</li>
<li>Added <samp>Id</samp> fields to simplify content pack edits in fish pond, movie concession, random bundle, and tailoring recipe data.</li>
<li>Added <samp>Game1.Multiplayer</samp> to get the game's low-level handler. (Most code should still use <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Multiplayer" title="Modding:Modder Guide/APIs/Multiplayer">SMAPI's multiplayer API</a> though.)</li>
<li>Added <samp>Game1.versionBuildNumber</samp> with the build number (like <samp>26039</samp>).</li>
<li>Added field-changed events to <samp>NetPosition</samp>.</li>
<li>Added <samp>LocalizedContentManager.CurrentLanguageString</samp>, which caches the language code like <samp>pt-BR</samp>).</li>
<li>The game now uses <samp>[XmlInclude]</samp> on its types more consistently. That means the default save serializer can handle more types (e.g. all monsters), and it's easier to create custom serializers.</li></ul>
<h2><span id="Breaking_changes_for_C#_mods"></span><span class="mw-headline" id="Breaking_changes_for_C.23_mods">Breaking changes for C# mods</span></h2>
<p><b>This section only describes how this update may break existing mods. See the <i>what's new</i> sections above for more info, including new functionality mods can use.</b>
</p><p>See also <a href="#Breaking_changes_for_content_packs"><i>Breaking changes for content packs</i></a>, which affect C# mods too.
</p>
<h3><span class="mw-headline" id=".NET_6_2">.NET 6</span></h3>
<dl><dd><i>See also: <a href="#.NET_6">.NET 6</a> under what's new.</i></dd></dl>
<p>Stardew Valley 1.6 updates from .NET 5 to .NET 6. SMAPI can still load .NET 5 mods fine, but you'll get a build error when compiling them. To update a C# mod:
</p>
<ol>
<li>Make sure you have <a rel="nofollow" class="external text" href="../../external.html?link=https://visualstudio.microsoft.com/vs">Visual Studio Community 2022</a> or later. (Compiling .NET 6 with earlier versions of Visual Studio isn't officially supported.)</li>
<li>In Visual Studio, click <i>Help &gt; Check For Updates</i> and install the latest version.</li>
<li>Fully exit Visual Studio.</li>
<li>Open each mod's <samp>.csproj</samp> file in a text editor, then find this line:
<div class="mw-highlight mw-highlight-lang-xml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">&lt;TargetFramework&gt;</span>net5.0<span class="nt">&lt;/TargetFramework&gt;</span>
</pre></div>
<p>And change it to this:
</p>
<div class="mw-highlight mw-highlight-lang-xml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">&lt;TargetFramework&gt;</span>net6.0<span class="nt">&lt;/TargetFramework&gt;</span>
</pre></div>
</li>
<li>Delete your solution's hidden <samp>.vs</samp> folder, and every project's <samp>bin</samp> and <samp>obj</samp> folders.</li>
<li>Reopen the solution in Visual Studio, click <i>Build &gt; Rebuild Solution</i>, and make sure it still loads into the game fine.</li>
</ol>
<h3><span class="mw-headline" id="Item_ID_changes">Item ID changes</span></h3>
<dl><dd><i>See also: <a href="#Custom_items">custom items in what's new</a>.</i></dd></dl>
<p>The <a href="#Custom_items">main <samp>Item</samp> properties have changed</a>. To migrate existing code:
</p>
<ul>
<li>Don't use <samp>ParentSheetIndex</samp> to compare items. For example, <samp>item.ParentSheetIndex == 0</samp> will match both <a href="../../external.html?link=https://stardewvalleywiki.com/Weeds" title="Weeds">weeds</a> and any custom item whose sprite is the first one in its custom spritesheet. You should compare items using <a href="#Custom_items">their new <samp>ItemId</samp> and <samp>QualifiedItemId</samp> properties</a> instead. For example, here's how to migrate various common forms:

<table class="wikitable">

<tbody><tr>
<th>old code
</th>
<th>new code
</th></tr>

<tr>
<td><samp>item.ParentSheetIndex == 848</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)848"</samp>
</td></tr>
<tr>
<td><samp>IsNormalObjectAtParentSheetIndex(item, 74)</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)74"</samp>
</td></tr>
<tr>
<td><samp>!item.bigCraftable &amp;&amp; item.ParentSheetIndex == 128</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)128"</samp>
</td></tr>
<tr>
<td><samp>item is Boots &amp;&amp; item.ParentSheetIndex == 505</samp>
</td>
<td><samp>item.QualifiedItemId == "(B)505"</samp>
</td></tr></tbody></table></li>
<li>Don't assume item sprites are in the vanilla spritesheets. For example, instead of rendering <samp>Game1.objectSpriteSheet</samp> for an object, call <code>ItemRegistry.GetMetadata(item.QualifiedItemId).GetTexture()</code> to get its texture.</li>
<li>Creating items works just like before, except that you now specify the item's <samp>ItemId</samp> (<i>not</i> <samp>QualifiedItemId</samp>) instead of its <samp>ParentSheetIndex</samp>. This is the same value for vanilla items. For example:

<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="s">&quot;634&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>                      <span class="c1">// vanilla item</span>
<span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="s">&quot;Example.ModId_Watermelon&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// custom item</span>
</pre></div>
<p>You can also use the new <samp>ItemRegistry</samp> API to construct items from their <samp>QualifiedItemId</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Item</span> <span class="n">item</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">&quot;(B)505&quot;</span><span class="p">);</span> <span class="c1">// Rubber Boots</span>
</pre></div></li>
</ul>
<h3><span class="mw-headline" id="Other_ID_changes">Other ID changes</span></h3>
<p>Many other things in the game now have unique string IDs too (including <a href="#Buff_overhaul">buffs</a>, <a href="#String_event_IDs">events</a>, and fruit trees). To migrate existing code: 
</p>
<ul><li>When referencing numeric IDs, you usually just need to convert them into a string (like <code>Game1.player.hasBuff("1590166")</code> or <code>Game1.player.eventsSeen.Contains("1590166")</code>).</li>
<li>When creating buffs, see <a href="#Buff_overhaul">buff overhaul</a> for how to create buffs now.</li></ul>
<h3><span class="mw-headline" id="Building_and_animal_changes">Building and animal changes</span></h3>
<dl><dd><i>See also: <a href="#Build_anywhere">build anywhere in what's new</a>.</i></dd></dl>
<ul><li>Since all locations now allow buildings and animals, mod code which handles <samp>BuildableGameLocation</samp> and <samp>IAnimalLocation</samp> won't detect all buildable locations. You can replace them with <samp>location.IsBuildableLocation()</samp> (or just access <samp>location.buildings</samp> directly) and <samp>location.animals.Any()</samp> instead. Mods should no longer have any reference at all to <samp>BuildableGameLocation</samp> and <samp>IAnimalLocation</samp>.</li>
<li>Since buildings can be built anywhere, you can no longer assume a building is on the farm. You can check the new <samp>building.buildingLocation</samp> field instead.</li>
<li>You should review direct references to the farm (like <code>Game1.getFarm()</code> or <code>Game1.getLocationFromName("Farm")</code>) to see if it needs to be rewritten to allow other locations.</li>
<li><code>Utility.numSilos()</code> should no longer be used to calculate available hay, since it doesn't account for custom buildings with hay storage. Use <code>Game1.getFarm().GetHayCapacity()</code> instead.</li>
<li>The <samp>Cat</samp> and <samp>Dog</samp> classes are now unused; all pets are now <samp>Pet</samp> directly.</li></ul>
<h3><span class="mw-headline" id="Player_changes">Player changes</span></h3>
<dl><dd><i>See also: <a href="#Buff_overhaul">buff overhaul in what's new</a>.</i></dd></dl>
<ul>
<li>Several <samp>Game1.player</samp> / <samp>Farmer</samp> fields changed as part of the <a href="#Buff_overhaul">buff overhaul</a>:
<table class="wikitable">

<tbody><tr>
<th>old field
</th>
<th>how to migrate
</th></tr>
<tr>
<td><samp>appliedBuffs</samp><br /><samp>appliedSpecialBuffs</samp>
</td>
<td>Use <code>Game1.player.hasBuff(id)</code> instead.
</td></tr>
<tr>
<td><samp>attack</samp><br /><samp>immunity</samp>
</td>
<td>Use <samp>Attack</samp> and <samp>Immunity</samp> instead.
</td></tr>
<tr>
<td><samp>addedCombatLevel</samp><br /><samp>addedFarmingLevel</samp><br /><samp>addedFishingLevel</samp><br /><samp>addedForagingLevel</samp><br /><samp>addedLuckLevel</samp><br /><samp>addedMiningLevel</samp><br /><samp>attackIncreaseModifier</samp><br /><samp>critChanceModifier</samp><br /><samp>critPowerModifier</samp><br /><samp>knockbackModifier</samp><br /><samp>resilience</samp><br /><samp>weaponPrecisionModifier</samp><br /><samp>weaponSpeedModifier</samp>
</td>
<td>Use equivalent properties under <samp>Game1.player.buffs</samp> instead (e.g. <samp>Game1.player.buffs.CombatLevel).
</samp></td></tr>
<tr>
<td><samp>addedSpeed</samp><br /><samp>CombatLevel</samp><br /><samp>CraftingTime</samp><br /><samp>FarmingLevel</samp><br /><samp>FishingLevel</samp><br /><samp>ForagingLevel</samp><br /><samp>LuckLevel</samp><br /><samp>MagneticRadius</samp><br /><samp>MaxStamina</samp><br /><samp>MiningLevel</samp><br /><samp>Stamina</samp>
</td>
<td>These are now readonly and can't be set directly. You can change them by <a href="#Buff_overhaul">adding a buff</a>, equipment bonus, etc instead.
</td></tr></tbody></table></li>
<li>Buffs are now recalculated automatically, and you can reset a buff by just reapplying it. See <a href="#Buff_overhaul">buff overhaul</a> for more info.</li>
<li>Buff logic has been centralized into <samp>Game1.player.buffs</samp>. This replaces a number of former fields/methods like <samp>Game1.buffsDisplay</samp>.</li>
</ul>
<h3><span class="mw-headline" id="Collision_changes">Collision changes</span></h3>
<p>The game's tile collision logic has been overhauled and merged into a simpler set of methods on <samp>GameLocation</samp> instances:
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>CanSpawnCharacterHere</samp>
</td>
<td>Get whether NPCs can be placed on the given tile (e.g. it's within the map bounds and tile is walkable), there's no placed object there, and the <samp>NoFurniture</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">tile property</a> isn't set.
</td></tr>
<tr>
<td><samp>CanItemBePlacedHere</samp>
</td>
<td>Get whether items can be placed on the given tile in non-floating form (e.g. it's within the map bounds and not blocked by a non-walkable item), and the <samp>NoFurniture</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">tile property</a> isn't set.
</td></tr>
<tr>
<td><samp>isBuildable</samp>
</td>
<td>Get whether buildings can be placed on the given tile.
</td></tr>
<tr>
<td><samp>IsTilePassable</samp>
</td>
<td>Get whether the tile can be walked on (ignoring collisions with in-game objects, NPCs, etc).
</td></tr>
<tr>
<td><samp>IsTileOccupiedBy</samp>
</td>
<td>Get whether the tile contains a player, object, NPC/monster/pet/etc, terrain feature, building, etc. You can choose which entities to check, and which ones to ignore if they don't block movement.
</td></tr>
<tr>
<td><samp>IsTileBlockedBy</samp>
</td>
<td>Equivalent to calling both <samp>IsTilePassable</samp> and <samp>IsTileOccupiedBy</samp>.
</td></tr>
<tr>
<td><samp>IsLocationSpecificOccupantOnTile</samp><br /><samp>IsLocationSpecificPlacementRestriction</samp>
</td>
<td>Generally shouldn't be used directly. Checks for location-specific collisions (e.g. ladders in <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">the mines</a> or parrot platforms on <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a>).
</td></tr></tbody></table>
<h3><span id="Map_&amp;_tile_property_changes"></span><span class="mw-headline" id="Map_.26_tile_property_changes">Map &amp; tile property changes</span></h3>
<p>When reading map or tile properties, the <samp>PropertyValue</samp> class no longer exists. You can replace it with <samp>string</samp> to get the value directly instead. For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// old code (broken)</span>
<span class="k">if</span> <span class="p">(</span><span class="n">tile</span><span class="p">.</span><span class="n">Properties</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">PropertyValue</span> <span class="n">propertyValue</span><span class="p">))</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="k">value</span> <span class="p">=</span> <span class="n">propertyValue</span><span class="p">.</span><span class="n">ToString</span><span class="p">();</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// updated</span>
<span class="k">if</span> <span class="p">(</span><span class="n">tile</span><span class="p">.</span><span class="n">Properties</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="k">value</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
<h3><span id="Other_removed/changed_methods"></span><span class="mw-headline" id="Other_removed.2Fchanged_methods">Other removed/changed methods</span></h3>
<p><i>(This section is meant as a quick reference if you have build errors; there's no need to read through it otherwise.)</i>
</p><p>These classes weren't used and no longer exist:
</p>
<ul><li><samp>BotchedNetBool</samp>;</li>
<li><samp>BotchedNetField</samp>;</li>
<li><samp>BotchedNetInt</samp>;</li>
<li><samp>BotchedNetLong</samp>;</li>
<li><samp>BuildingUpgrade</samp>;</li>
<li><samp>FurniturePlacer</samp>;</li>
<li><samp>ObjectFactory</samp> and <samp>ToolFactory</samp> (replaced by <a href="#Custom_items"><samp>ItemRegistry</samp></a>).</li></ul>
<p>These classes were renamed in 1.6:
</p>
<table class="wikitable">

<tbody><tr>
<th>old name
</th>
<th>new name
</th></tr>
<tr>
<td><samp>LocationContext</samp>
</td>
<td><samp>LocationContexts</samp>
</td></tr></tbody></table>
<p>These class members weren't used and no longer exist:
</p>
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>members
</th></tr>
<tr>
<td><samp>Axe</samp>
</td>
<td><samp>StumpStrength</samp>
</td></tr>
<tr>
<td><samp>Bush</samp>
</td>
<td><samp>alpha</samp><br /><samp>lastPlayerToHit</samp>
</td></tr>
<tr>
<td><samp>CraftingRecipe</samp>
</td>
<td><samp>itemType</samp>
</td></tr>
<tr>
<td><samp>Crop</samp>
</td>
<td><samp>daysOfUnclutteredGrowth</samp>
</td></tr>
<tr>
<td><samp>Farm</samp>
</td>
<td><samp>GetSpouseOutdoorAreaSpritesheetIndex</samp>
</td></tr>
<tr>
<td><samp>Farmer</samp>
</td>
<td><samp>hasBusTicket</samp><br /><samp>furnitureOwned</samp><br /><samp>ownsFurniture</samp>
</td></tr>
<tr>
<td><samp>Game1</samp>
</td>
<td><samp>boardingBus</samp><br /><samp>checkForNewLevelPerks</samp><br /><samp>shippingTax</samp>
</td></tr>
<tr>
<td><samp>GameLocation</samp>
</td>
<td><samp>boardBus</samp><br /><samp>getWallDecorItem</samp><br /><samp>removeDirt</samp>
</td></tr>
<tr>
<td><samp>GiantCrop</samp>
</td>
<td><samp>forSale</samp>
</td></tr>
<tr>
<td><samp>MeleeWeapon</samp>
</td>
<td><samp>attackSwordCooldownTime</samp><br /><samp>doStabbingSwordFunction</samp>
</td></tr>
<tr>
<td><samp>Object</samp>
</td>
<td><samp>attachToSprinklerAttachment</samp><br /><samp>consumeRecipe</samp><br /><samp>IsHoeDirt</samp><br /><samp>isHoeDirt</samp>
</td></tr>
<tr>
<td><samp>PathFindController</samp>
</td>
<td><samp>CheckClearance</samp><br /><samp>limit</samp>
</td></tr>
<tr>
<td><samp>PetBowl</samp>
</td>
<td><samp>FindPet</samp>
</td></tr>
<tr>
<td><samp>SaveGame</samp>
</td>
<td><samp>shippingTax</samp>
</td></tr>
<tr>
<td><samp>Spiker</samp>
</td>
<td><samp>GetSpawnPosition</samp>
</td></tr>
<tr>
<td><samp>Tool</samp>
</td>
<td><samp>batteredSwordSpriteIndex</samp><br /><samp>GetSecondaryEnchantmentCount</samp><br /><samp>nonUpgradeable</samp><br /><samp>parsnipSpriteIndex</samp><br /><samp>startOfNegativeWeaponIndex</samp>
</td></tr>
<tr>
<td><samp>Utility</samp>
</td>
<td><samp>plantCrops</samp><br /><samp>showLanternBar</samp>
</td></tr></tbody></table>
<p>These class members changed in 1.6:
</p>
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>member
</th>
<th>migration
</th></tr>
<tr>
<td><samp>GiantCrop</samp>
</td>
<td><samp>which</samp>
</td>
<td>Replaced by <samp>itemId</samp>.
</td></tr>
<tr>
<td><samp>LocationContextData</samp>
</td>
<td><samp>Name</samp>
</td>
<td>Removed; use its dictionary key in <samp>Game1.locationContextData</samp> instead.
</td></tr>
<tr>
<td rowspan="2"><samp>Utility</samp>
</td>
<td><samp>doesItemWithThisIndexExistAnywhere</samp>
</td>
<td>Replace with <samp>Utility.doesItemExistAnywhere</samp>, which takes a string item ID. For example:
<ul><li><code>Utility.doesItemWithThisIndexExistAnywhere(128)</code> &#8594; <code>Utility.doesItemExistAnywhere("(O)128")</code>;</li>
<li><code>Utility.doesItemWithThisIndexExistAnywhere(128, true)</code> &#8594; <code>Utility.doesItemExistAnywhere("(BC)128")</code>.</li></ul>
</td></tr>
<tr>
<td><samp>numObelisksOnFarm</samp>
</td>
<td>Renamed to <samp>GetObeliskTypesBuilt</samp>, which searches all locations.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Check_for_obsolete_code">Check for obsolete code</span></h3>
<p>Perform a full rebuild of your mod (in Visual Studio, click <i>Build &gt; Rebuild Solution</i>), then check the Error List pane for any warnings like "'<i>X' is obsolete</i>". Anything from the vanilla game code which is marked obsolete won't work anymore and is only kept for save migrations. Usually the warning will include an explanation of what you should use instead.
</p>
<h2><span class="mw-headline" id="Breaking_changes_for_content_packs">Breaking changes for content packs</span></h2>
<p><b>This section only describes how this update may break existing mods. See the <i>what's new</i> sections above for more info, including new functionality mods can use.</b>
</p>
<h3><span class="mw-headline" id="Standardized_data_fields">Standardized data fields</span></h3>
<p>1.6 standardizes the number of fields in data assets, and fixes inconsistencies between English and localized files. <b>This is a major breaking change for content packs, and for C# mods which edit data assets.</b>
</p><p>Three examples illustrate the standardization:
</p>
<ul>
<li><samp>Data/CookingRecipes</samp> had four fields in English, and a fifth field in other languages for the display name. The display name field is now required in English too.</li>
<li><samp>Data/BigCraftables</samp> had an optional 9th field which indicates whether it's a lamp, and a 10th field for the display name. Even if it's empty, the 9th field is now required (note the extra <samp>/</samp> before the last field):
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="err">//</span> <span class="err">before</span>
<span class="s2">&quot;151&quot;</span><span class="err">:</span> <span class="s2">&quot;Marble Brazier/500/-300/Crafting -9/Provides a moderate amount of light./true/true/0/Marble Brazier&quot;</span><span class="err">,</span> <span class="err">//</span> <span class="mi">9</span> <span class="err">fields</span>

<span class="err">//</span> <span class="err">after</span>
<span class="s2">&quot;151&quot;</span><span class="err">:</span> <span class="s2">&quot;Marble Brazier/500/-300/Crafting -9/Provides a moderate amount of light./true/true/0//Marble Brazier&quot;</span> <span class="err">//</span> <span class="mi">10</span> <span class="err">fields</span>
</pre></div></li>
<li><samp>Data/ObjectInformation</samp> had several optional fields at the end. These are now required even if empty:
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="err">//</span> <span class="err">before</span>
<span class="s2">&quot;0&quot;</span><span class="err">:</span> <span class="s2">&quot;Weeds/0/-1/Basic/Weeds/A bunch of obnoxious weeds.&quot;</span>

<span class="err">//</span> <span class="err">after</span>
<span class="s2">&quot;0&quot;</span><span class="err">:</span> <span class="s2">&quot;Weeds/0/-1/Basic/Weeds/A bunch of obnoxious weeds.///&quot;</span>
</pre></div></li>
</ul>
<p>Existing mods which add entries without the now-required fields may cause errors and crashes. XNB mods which change data are likely universally broken.
</p><p>The exception is fields which only exist for modding, like the texture + index overrides for <a href="#Custom_items">custom items</a>. These can typically be omitted.
</p>
<h3><span class="mw-headline" id="Standardized_ID_fields">Standardized ID fields</span></h3>
<p>Stardew Valley 1.6 adds an <samp>Id</samp> field to these assets. For Content Patcher content packs, these replace the previous synthetic ID:
</p>
<table class="wikitable">

<tbody><tr>
<th>asset
</th>
<th>old key
</th>
<th>new key
</th>
<th>migration steps
</th></tr>
<tr>
<td><samp>Data/ConcessionTastes</samp><br /><samp>Data/MovieReactions</samp><br /><samp>Data/RandomBundles</samp> (area)<br /><samp>Data/RandomBundles</samp> (bundle)
</td>
<td><samp>Name</samp><br /><samp>NPCName</samp><br /><samp>AreaName</samp><br /><i>none</i>
</td>
<td><samp>Id</samp>
</td>
<td>None. The <samp>Id</samp> field is set automatically to the same value (or <samp>Name</samp> for bundles), so there's no change for content packs. Omit the new field when creating a new entry.
</td></tr>
<tr>
<td><samp>Data/FishPondData</samp><br /><samp>Data/RandomBundles</samp> (bundle set)
</td>
<td><samp>RequiredTags</samp><br /><i>none</i>
</td>
<td><samp>Id</samp>
</td>
<td>Use the new <samp>Id</samp> field to target an entry, and add it when creating a new entry. Required.
</td></tr>
<tr>
<td><samp>Data/TailoringRecipes</samp>
</td>
<td><samp>FirstItemTags</samp> and <samp>SecondItemTags</samp>
</td>
<td><samp>Id</samp>
</td>
<td>Use the new <samp>Id</samp> field to target an entry, and add it when creating a new entry. Defaults to the <samp>CraftedItemIds</samp> (comma-delimited) or <samp>CraftedItemId</samp> value if omitted, but there's a high chance of conflicts so mods should always specify a unique ID.
</td></tr></tbody></table>
<p>For example, let's say you have a patch like this using Content Patcher:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/TailorRecipes&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;item_cloth|item_pufferchick&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;FirstItemTags&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;item_cloth&quot;</span> <span class="p">],</span>
                    <span class="s2">&quot;SecondItemTags&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;item_pufferchick&quot;</span> <span class="p">],</span>
                    <span class="s2">&quot;CraftedItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(S)1260&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>When updating to Stardew Valley 1.6, replace the synthetic ID (<samp>item_cloth|item_pufferchick</samp>) with a real one:
</p>
<ul><li>To edit an existing entry, unpack the asset and get its new <samp>Id</samp> value.</li>
<li>To add a custom entry, use a globally unique ID prefixed with your mod ID. This should only have alphanumeric, underscore, and dot characters so it's safe to use in delimited fields, file names, etc. The recommended format is <samp>ExampleAuthor.ModId_EntryName</samp>.</li></ul>
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Format&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Changes&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="o">:</span> <span class="s2">&quot;EditData&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Target&quot;</span><span class="o">:</span> <span class="s2">&quot;Data/TailorRecipes&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Entries&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;ExampleAuthor.ModId_RainCoatFromPufferchick&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Id&quot;</span><span class="o">:</span> <span class="s2">&quot;ExampleAuthor.ModId_RainCoatFromPufferchick&quot;</span><span class="p">,</span> <span class="c1">// need to specify ID again when creating it</span>
                    <span class="s2">&quot;FirstItemTags&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;item_cloth&quot;</span> <span class="p">],</span>
                    <span class="s2">&quot;SecondItemTags&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;item_pufferchick&quot;</span> <span class="p">],</span>
                    <span class="s2">&quot;CraftedItemId&quot;</span><span class="o">:</span> <span class="s2">&quot;(S)1260&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Event_ID_changes">Event ID changes</span></h3>
<dl><dd><i>See also: <a href="#String_event_IDs">string event IDs in what's new</a>.</i></dd></dl>
<p>Events now have unique string IDs.
</p><p>When creating an event:
</p>
<ul>
<li>New events should use a globally unique ID in the form <samp>Your.ModId_EventName</samp>. Existing events should be fine as-is, but it may be worth migrating them to avoid future conflicts.</li>
<li>Every non-fork event <b>must</b> have a precondition in its key (even if it's empty). For example, change <code>"Your.ModId_EventName": "..."</code> to <code>"Your.ModId_EventName/": "..."</code>. This is needed for the game to distinguish between events and fork scripts.

<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">&quot;Example.ModId_EventName/&quot;</span><span class="o">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="c1">// event: loaded automatically by the game</span>
<span class="s2">&quot;SomeFork&quot;</span><span class="o">:</span> <span class="s2">&quot;...&quot;</span>                  <span class="c1">// event fork: ignored unless it&#39;s loaded through an event script</span>
</pre></div></li>
</ul>
<h3><span class="mw-headline" id="Monster_eradication_goal_flag_changes">Monster eradication goal flag changes</span></h3>
<dl><dd><i>See also: <a href="#Custom_monster_eradication_goals">Custom monster eradication goals</a>.</i></dd></dl>
<p>The game now tracks <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild" title="Adventurer&#39;s Guild">Adventurer's Guild</a> monster eradication goal completion by the goal ID, instead of the produced item. You'll need to replace these mail flags if you check them:
</p>
<table class="wikitable">

<tbody><tr>
<th>old flag
</th>
<th>new flag
</th></tr>
<tr>
<td><samp>Gil_Slime Charmer Ring</samp>
</td>
<td><samp>Gil_Slimes</samp>
</td></tr>
<tr>
<td><samp>Gil_Savage Ring</samp>
</td>
<td><samp>Gil_Shadows</samp>
</td></tr>
<tr>
<td><samp>Gil_Vampire Ring</samp>
</td>
<td><samp>Gil_Bats</samp>
</td></tr>
<tr>
<td><samp>Gil_Skeleton Mask</samp>
</td>
<td><samp>Gil_Skeletons</samp>
</td></tr>
<tr>
<td><samp>Gil_Insect Head</samp>
</td>
<td><samp>Gil_Insects</samp>
</td></tr>
<tr>
<td><samp>Gil_Hard Hat</samp>
</td>
<td><samp>Gil_Duggy</samp>
</td></tr>
<tr>
<td><samp>Gil_Burglar's Ring</samp>
</td>
<td><samp>Gil_DustSpirits</samp>
</td></tr>
<tr>
<td><samp>Gil_Crabshell Ring</samp>
</td>
<td><samp>Gil_Crabs</samp>
</td></tr>
<tr>
<td><samp>Gil_Arcane Hat</samp>
</td>
<td><samp>Gil_Mummies</samp>
</td></tr>
<tr>
<td><samp>Gil_Knight's Helmet</samp>
</td>
<td><samp>Gil_Dinos</samp>
</td></tr>
<tr>
<td><samp>Gil_Napalm Ring</samp>
</td>
<td><samp>Gil_Serpents</samp>
</td></tr>
<tr>
<td><samp>Gil_Telephone</samp>
</td>
<td><samp>Gil_FlameSpirits</samp>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="XNB_impact">XNB impact</span></h3>
<p>Here's a summary of the XNB files which changed in Stardew Valley 1.6.
</p><p>This doesn't include...
</p>
<ul><li>new files (since they won't impact existing mods);</li>
<li>changes in non-English files;</li>
<li>new fields when the vanilla entries didn't change (e.g. optional <a href="#Custom_items">custom item fields</a>).</li></ul>
<p>Shorthand:
</p>
<ul><li>'broken' means removing new content or potentially important changes, or potentially causing significant display bugs. This is a broad category — the game may work fine without it or crash, depending how it uses that specific content.</li>
<li>'mostly unaffected' means mods will only be affected if they edit specific entries or fields.</li>
<li>Blank means no expected impact for the vast majority of mods.</li></ul>
<p>XNB mods are disproportionately affected since (a) they replace the entire file and (b) they're loaded through the MonoGame content pipeline which is less tolerant of format changes.
</p>
<table class="wikitable">

<tbody><tr>
<th>content file
</th>
<th>changes
</th>
<th>XNB
</th>
<th>Content Patcher
</th></tr>
<tr>
<td><samp>Buildings/houses</samp>
</td>
<td>fixed missing pixels
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Emily</samp><br /><samp>Characters/Dialogue/Lewis</samp>
</td>
<td>updated <samp>%revealtaste</samp> format (backwards-compatible)
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/MarriageDialogueEmily</samp>
</td>
<td>changed <samp>spring_Maru</samp> key to <samp>spring_Emily</samp>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/MarriageDialogueMaru</samp><br /><samp>Characters/Dialogue/Maru</samp><br /><samp>Characters/Dialogue/Robin</samp><br /><samp>Characters/Dialogue/Sam</samp> <br /> <samp>Characters/Dialogue/Linus</samp>, probably more.
</td>
<td>fixed typos
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/AquariumFish</samp>
</td>
<td><a href="#Custom_items">changed key type</a>, <a href="#Standardized_data_fields">standardized fields</a>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/BigCraftablesInformation</samp>
</td>
<td><a href="#Custom_items">changed key type</a>, <a href="#Standardized_data_fields">standardized fields</a>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/Boots</samp>
</td>
<td><a href="#Custom_items">changed key type</a>, added display name
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/Bundles</samp>
</td>
<td><a href="#Standardized_data_fields">standardized fields</a>, added display name
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/ClothingInformation</samp>
</td>
<td><a href="#Custom_items">changed key type</a>, <a href="#Standardized_data_fields">standardized fields</a>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/ConcessionTastes</samp>
</td>
<td><a href="#Custom_movie_concessions">added new required fields (<samp>Texture</samp> and <samp>SpriteIndex</samp>)</a>, added automatic <samp>ID</samp> field
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br /><small>(unless they add new concessions)</small>
</td></tr>
<tr>
<td><samp>Data/CookingRecipes</samp>
</td>
<td>added display name
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/CraftingRecipes</samp>
</td>
<td>added display name, fixed typo in Cookout Kit entry
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/Crops</samp>
</td>
<td><a href="#Custom_crops">completely overhauled</a>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/Events/FishShop</samp><br /><samp>Data/Events/IslandSouth</samp><br /><samp>Data/Events/Mountain</samp><br /><samp>Data/Events/SebastianRoom</samp><br /><samp>Data/Events/Town</samp> <br /> probably more.
</td>
<td>fixed typo
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/FarmAnimals</samp>
</td>
<td><a href="#Custom_farm_animals">completely overhauled</a>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/Festivals/spring13</samp><br /><samp>Data/Festivals/spring24</samp><br /><samp>Data/Festivals/summer11</samp><br /><samp>Data/Festivals/summer28</samp><br /><samp>Data/Festivals/winter8</samp>
</td>
<td>migrated to new <samp>warpFarmers</samp> command.
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/Fish</samp>
</td>
<td><a href="#Custom_items">changed key type</a>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/FishPondData</samp>
</td>
<td><a href="#Custom_items">changed <samp>ItemId</samp> field type</a>, added required <samp>Id</samp> field
</td>
<td><b>✘ broken</b>
</td>
<td>✘ broken if they add new entries
</td></tr>
<tr>
<td><samp>Data/fruitTrees</samp>
</td>
<td><a href="#Custom_items">changed key type</a>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/Furniture</samp>
</td>
<td><a href="#Custom_items">changed key type</a>, <a href="#Standardized_data_fields">standardized fields</a>, added display name
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/hats</samp>
</td>
<td><a href="#Custom_items">changed key type</a>, <a href="#Standardized_data_fields">standardized fields</a>, added display name
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/Locations</samp>
</td>
<td><a href="#Custom_locations">completely overhauled</a>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/mail</samp>
</td>
<td>fixed typos
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/MovieReactions</samp>
</td>
<td>added automatic <samp>ID</samp> field
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/NPCDispositions</samp>
</td>
<td><a href="#Custom_NPCs">completely overhauled to <samp>Data/Characters</samp></a>
</td>
<td>Any changes will be ignored.
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/ObjectContextTags</samp>
</td>
<td>added new entries &amp; tags
</td>
<td><b>✘ broken</b>
</td>
<td>mostly unaffected<br /><small>(for content packs using best practices like appending<br />values, or which only edit their own items)</small>
</td></tr>
<tr>
<td><samp>Data/ObjectInformation</samp>
</td>
<td><a href="#Custom_items">changed key type</a>, <a href="#Standardized_data_fields">standardized fields</a>, added &amp; adjusted <a href="#Other_item_changes">litter items</a>, fixed typos
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/Quests</samp>
</td>
<td>changed item fields to use item IDs (backwards-compatible)
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/RandomBundles</samp>
</td>
<td>optional <samp>ID</samp> field
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br /><small>(unless they add new bundlesets)</small>
</td></tr>
<tr>
<td><samp>Data/SecretNotes</samp>
</td>
<td>updated <samp>%revealtaste</samp> format (backwards-compatible)
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/SpecialOrders</samp>
</td>
<td>made <samp>Repeatable</samp> and <samp>Duration</samp> fields strongly typed.
</td>
<td>????
</td>
<td>unaffected
</td></tr>
<tr>
<td><samp>Data/TailoringRecipes</samp>
</td>
<td>changed to <a href="#Custom_items">string item IDs</a> (<b>TODO: possibly backwards-compatible?</b>), added optional <samp>ID</samp> field
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/TV/TipChannel</samp>
</td>
<td>fixed typo
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/weapons</samp>
</td>
<td><a href="#Custom_items">changed key type</a>, added display name
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Effects/BrightWhite</samp>
</td>
<td>asset deleted.
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>LooseSprites/Cursors</samp> <br /> <samp>LooseSprites/Cursors2</samp>
</td>
<td>new sprite in empty area
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/AbandonedJojaMart</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/AnimalShop</samp>
</td>
<td>added <samp>Music</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Backwoods</samp><br /><samp>Maps/Backwoods_GraveSite</samp><br /><samp>Maps/Backwoods_Staircase</samp><br /><samp>Maps/Barn</samp><br /><samp>Maps/Barn2</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Barn3</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>, added <samp>AutoFeed</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/BathHouse_Pool</samp>
</td>
<td>added <samp>Music</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Beach</samp>
</td>
<td>added <samp>Music</samp> + <samp>MusicIgnoreInRain</samp> map properties
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/BoatTunnel</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Cabin</samp><br /><samp>Maps/Cabin1</samp><br /><samp>Maps/Cabin1_marriage</samp><br /><samp>Maps/Cabin2</samp><br /><samp>Maps/Cabin2_marriage</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Caldera</samp>
</td>
<td>added <samp>Music</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Club</samp>
</td>
<td>added <samp>LocationContext</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Coop</samp><br /><samp>Maps/Coop2</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Coop3</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>, added <samp>AutoFeed</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Desert</samp>
</td>
<td>added <samp>LocationContext</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/ElliottHouse</samp>
</td>
<td>added <samp>Music</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Farm</samp><br /><samp>Maps/Farm_Combat</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>, updated farmhouse area for moveable farmhouse
</td>
<td>✘ corrupted visuals when farmhouse is moved
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Farm_Fishing</samp><br /><samp>Maps/Farm_Foraging</samp><br /><samp>Maps/Farm_FourCorners</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>, updated farmhouse area for moveable farmhouse
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Farm_Greenhouse_Dirt</samp><br /><samp>Maps/Farm_Greenhouse_Dirt_FourCorners</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Farm_Island</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>, updated farmhouse area for moveable farmhouse
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Farm_Mining</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>, updated farmhouse area for moveable farmhouse
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/FarmHouse</samp><br /><samp>Maps/FarmHouse_Bedroom_Normal</samp><br /><samp>Maps/FarmHouse_Bedroom_Open</samp><br /><samp>Maps/FarmHouse_Cellar</samp><br /><samp>Maps/FarmHouse_ChildBed_0</samp><br /><samp>Maps/FarmHouse_ChildBed_1</samp><br /><samp>Maps/FarmHouse_CornerRoom_Add</samp><br /><samp>Maps/FarmHouse_CornerRoom_Remove</samp><br /><samp>Maps/FarmHouse_SouthernRoom_Add</samp><br /><samp>Maps/FarmHouse_SouthernRoom_Remove</samp><br /><samp>Maps/FarmHouse1</samp><br /><samp>Maps/FarmHouse1_marriage</samp><br /><samp>Maps/FarmHouse2</samp><br /><samp>Maps/FarmHouse2_marriage</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Greenhouse</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Hospital</samp>
</td>
<td>added <samp>Music</samp> and <samp>MusicIgnoreInRain</samp> map properties
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/IslandFarmHouse</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/JojaMart</samp>
</td>
<td>added <samp>Music</samp> and <samp>MusicContext</samp> map properties
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/LeahHouse</samp><br /><samp>Maps/LeoTreeHouse</samp>
</td>
<td>added <samp>Music</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/MarnieBarn</samp><br /><samp>Maps/Mine</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Mountain</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/MovieTheater</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>.
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/MovieTheaterScreen</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>; changes to allow more players/NPCs at a time
</td>
<td><b>✘ broken</b>
</td>
<td>✘ broken if they edit the affected tiles
</td></tr>
<tr>
<td><samp>Maps/MovieTheaterScreen_TileSheet</samp>
</td>
<td>improved light cone; changes to allow more players/NPCs at a time.
</td>
<td>✘ broken visuals
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/paths</samp>
</td>
<td>added icon for <a href="#Custom_wild_trees">custom wild tree spawn</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Saloon</samp>
</td>
<td>added <samp>Music</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/SandyHouse</samp>
</td>
<td>added <samp>LocationContext</samp> and <samp>Music</samp> map properties
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/ScienceHouse</samp>
</td>
<td>added <samp>Music</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Shed</samp>
</td>
<td>added <samp>FloorIDs</samp> and <samp>WallIDs</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map properties</a>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/SkullCave</samp>
</td>
<td>added <samp>LocationContext</samp> map property
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/spousePatios</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Sunroom</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>, added <samp>Music</samp> and <samp>MusicIgnoreInRain</samp> properties
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Town</samp>
</td>
<td>added multiple <samp>Music*</samp> map properties, changed to <a href="#Custom_garbage_cans">new garbage can IDs</a> (backwards-compatible)
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Mines/Volcano_SetPieces_32</samp>
</td>
<td><a href="#Other_changes">changed map &amp; tile properties to string</a>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Woods</samp>
</td>
<td>added <samp>Music</samp> and <samp>MusicIgnoreInRain</samp> map properties
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Buildings</samp>
</td>
<td>added new entries for paint regions
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/StringsFromCSFiles</samp><br /><samp>Strings/StringsFromMaps</samp>
</td>
<td>fixed typos
</td>
<td>✘ will remove changes
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/UI</samp>
</td>
<td>added new translations
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr></tbody></table>
<h2><span class="mw-headline" id="Vanilla_release_notes">Vanilla release notes</span></h2>
<div style="border-radius: 3px; padding: 8px; background: #fffae6; min-height: 3em; display: flex; flex-direction: row; align-items: center; max-width: 60em;">
<div style="font-size: 3em; line-height: 1em; margin-right: 0.5rem;">⚠</div>
<div><b>This section only show changes in the 1.6 alpha builds for mod authors.</b><br />The <a rel="nofollow" class="external text" href="../../external.html?link=https://twitter.com/ConcernedApe/status/1647638975568568320">content changes ConcernedApe is working on</a> haven't been revealed yet.</div>
</div>
<p>This is a draft for the <a href="../../external.html?link=https://stardewvalleywiki.com/Version_History" title="Version History">Version History</a> section when 1.6 is released. Feel free to edit or suggest anything that was missed.
</p>
<blockquote>
<p><big><b>1.6.0</b></big><br />
Stardew Valley 1.6.0 was released to the Steam beta branch on XX XX 20XX, and released on XX XXXX 20XX.
</p>
<dl><dt>New features</dt>
<dd>
<ul><li>The world map now shows your actual position within the world in real-time (instead of showing you at a fixed point for each location). In multiplayer, you'll see other players' position in real-time too.</li>
<li>The farmhouse and pet bowl can now be moved through Robin's menu.</li>
<li>You can now use the <a href="../../external.html?link=https://stardewvalleywiki.com/Farm_Computer" title="Farm Computer">farm computer</a> anywhere to see a summary of that location, instead of only the farm.</li></ul></dd></dl>
<dl><dt>Balance changes</dt>
<dd>
<ul><li>You can no longer lose the Golden Scythe, Infinity weapons, or tools when dying.</li>
<li>Increased the <a href="../../external.html?link=https://stardewvalleywiki.com/Forge#Enchantments" title="Forge">shaving enchantment</a>'s effect on <a href="../../external.html?link=https://stardewvalleywiki.com/Crops#Giant_Crops" title="Crops">giant crops</a>.<br /><small>Each giant crop now has a 60% chance of dropping an extra six crops while the shaving enchantment is equipped, spread across the number of hits needed to break it. For example, a base axe which breaks the giant crop in three hits gets three 20% chances of dropping 2 crops.</small></li>
<li>The <a href="../../external.html?link=https://stardewvalleywiki.com/The_Cave" title="The Cave">mushroom cave</a> now provides mushrooms every second day. It was unintentionally changed to daily in Stardew Valley 1.5.</li></ul></dd></dl>
<dl><dt>Quality of life changes</dt>
<dd>
<ul><li>Shops now have a slight delay before you can buy/sell items, to help avoid double-clicks doing it accidentally.</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Marnie%27s_Ranch" title="Marnie&#39;s Ranch">Marnie's animal menu</a> now shows prices in the tooltip, in case the tooltip covers the price display.</li>
<li>Holding a <a href="../../external.html?link=https://stardewvalleywiki.com/Tea_Sapling" title="Tea Sapling">tea sapling</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Crops" title="Crops">seed</a> over a <a href="../../external.html?link=https://stardewvalleywiki.com/Garden_Pot" title="Garden Pot">garden pot</a> now shows the green/red placement tile.</li>
<li>The museum reward menu now prevents picking up a reward that won't fit in your inventory.</li>
<li>The museum reward menu now lets you exit while holding a reward. It'll be added to your inventory if possible, otherwise it'll drop at your feet.</li>
<li>If an item menu exits while you're holding an item, the item is now always retrieved. (Previously only some item menus like chests would do it.)</li>
<li>If a default farm building (like the greenhouse) is somehow removed, it'll now be rebuilt next time you load the save.</li>
<li>You can no longer pick up rugs if there's something on it.</li>
<li>Positional sounds now fade with distance when off-screen, instead of cutting off abruptly.</li>
<li>Made more sounds positional (mainly player and tool sounds).</li>
<li>Deleting a save on PC is now much faster.</li>
<li>Performance improvements.</li></ul></dd></dl>
<dl><dt>Other changes</dt>
<dd>
<ul><li>The about page now shows the build number.</li>
<li>The about page no longer hides the version if a tip message is shown.</li>
<li>The <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island#Gem_Birds" title="Ginger Island">Ginger Island shrine</a> item pedestals are now normal items. Modded players can spawn them to display items decoratively (though they're not obtainable in vanilla currently).</li></ul></dd></dl>
<dl><dt>Fixes for gameplay</dt>
<dd>
<ul><li>Fixed issues with buffs:
<ul><li>Fixed a range of bugs like attribute drift and double-debuff.</li>
<li>Fixed food/drink buffs discarded if they have a balanced total of effects (e.g. +2 attack and -2 speed).</li>
<li>Fixed negative custom buffs shown with a double-negative (e.g. "--2 speed").</li>
<li>Fixed Squid Ink Ravioli buff not remaining active if another food buff is added later (although the buff icon was still shown).</li>
<li>Fixed Squid Ink Ravioli not resetting the buff duration when you eat another one, unlike other food buffs.</li>
<li>Fixed Squid Ink Ravioli description having an extra blank line.</li>
<li>Fixed Burnt not showing the -3 Attack effect.</li>
<li>Fixed buff effects formatted inconsistently in the Japanese and Korean localizations.</li></ul></li>
<li>Fixed unable to leave the <a href="../../external.html?link=https://stardewvalleywiki.com/Festival_of_Ice" title="Festival of Ice">Festival of Ice</a> until it ends.</li>
<li>Fixed randomization being less random than intended in some cases.</li>
<li>Fixed gates popping off when closing them while the player overlaps the tile.</li>
<li>Fixed fishing crash if a treasure chest appears while the player has a large number of stacked fishing buffs.</li>
<li>Fixed issue where breaking a <a href="../../external.html?link=https://stardewvalleywiki.com/Bee_House" title="Bee House">bee house</a> containing honey would drop a generic "Honey" item, instead of the flavored honey it would produce when harvested.</li>
<li>Fixed issue where using the <a href="../../external.html?link=https://stardewvalleywiki.com/Rain_Totem" title="Rain Totem">rain totem</a> during a storm would make the next day stormy too, instead of rainy.</li>
<li>Fixed random seeds on <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a> being based on the valley's season.</li></ul></dd></dl>
<dl><dt>Fixes for visual or cosmetic issues</dt>
<dd>
<ul><li>The submerged <a href="../../external.html?link=https://stardewvalleywiki.com/Fishing" title="Fishing">fishing</a> bobber is now recolored automatically to match the water.</li>
<li>Fixed <a href="../../external.html?link=https://stardewvalleywiki.com/Quality_Fertilizer" title="Quality Fertilizer">quality fertilizer</a> showing a green tile on sprouted crops, even though it can't be placed there.</li>
<li>Fixed the <code>!</code> fish bite icon not shown when fishing in the <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Fair" title="Stardew Valley Fair">Stardew Valley Fair</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Festival_of_Ice" title="Festival of Ice">Festival of Ice</a>.</li>
<li>Fixed some in-game error messages not having an error icon.</li>
<li>Fixed issue where a female character could choose a male shirt index during character customization, but it'd be rendered as the female variant in-game. When clothing is selected through character customization, it's now always rendered in-game with the selected variant.</li>
<li>Fixed inventory &amp; crafting menus misaligned if you resize the window while they're open.</li>
<li>Fixed fruit tree leaves not rustling in winter even if they're in a non-seasonal location like the <a href="../../external.html?link=https://stardewvalleywiki.com/Greenhouse" title="Greenhouse">greenhouse</a>.</li>
<li>Fixed intro cutscene position not adjusted when the farmhouse is moved by a mod.</li>
<li>Fixed cosmetic issues with the title &amp; shipping screens for higher-resolution displays.</li>
<li>Fixed calendar tooltip when a modded festival and birthday occur on the same day.</li>
<li>Fixed beds or chests that were hidden for an event not reappearing afterwards.</li>
<li>Fixed pre-built cabins sometimes placed on top of a bush or log.</li>
<li>Fixed furniture drawn over sitting players if it has no front texture.</li>
<li>Fixed the <a href="../../external.html?link=https://stardewvalleywiki.com/Forge" title="Forge">forge</a> preview always showing soul level one for a <a href="../../external.html?link=https://stardewvalleywiki.com/Galaxy_Soul" title="Galaxy Soul">galaxy soul</a> forge.</li>
<li>Fixed some things on <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a> applying the valley's season (including <a href="../../external.html?link=https://stardewvalleywiki.com/Fiber_Seeds" title="Fiber Seeds">fiber seeds</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Seasonal_Decor" title="Seasonal Decor">seasonal decor</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Seasonal_Plant" title="Seasonal Plant">seasonal plants</a>, and <a href="../../external.html?link=https://stardewvalleywiki.com/Tub_o%27_Flowers" title="Tub o&#39; Flowers">tubs o' flowers</a>).</li></ul></dd></dl>
<dl><dt>Fixes for display text and localization</dt>
<dd>
<ul><li>Many NPCs have their own dialogue for accepting a movie invitation, but only in English. This now works in other languages too.</li>
<li>Spanish prices are now formatted like <i>15o</i> instead of <i>15g</i> to match the translated term (<i>oro</i> instead of <i>gold</i>).</li>
<li>Fixed some dialogues that were never shown in-game (a line in Maru's 14-heart event, three dialogues from Sam related to Kent, and two randomized dialogues when an NPC buys an item you sold to a shop).</li>
<li>Fixed the <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Fair" title="Stardew Valley Fair">fortune teller</a> nearly always showing the text for your combat skill, instead of your highest skill.</li>
<li>Fixed NPC name translations applied to horses/pets that share a name with that NPC.</li>
<li>Fixed Professor Snail's intro event showing his name truncated (in German) or freezing (in Russian).</li>
<li>Fixed unlocalized text shown for...
<ul><li>the building paint menu's region names (like "Roof" or "Trim");</li>
<li>NPC names in some movie theater dialogue.</li></ul></li>
<li>Fixed Lewis' letter for Feast of the Winter Star saying it starts at 10am instead of 9am.</li>
<li>Fixed issue where an NPC who bought an iridium-quality item you sold to a shop could show a low-item-quality dialogue for it.</li>
<li>Fixed various typos/errors in dialogue, events, and other display text.</li>
<li>Fixed broken dialogues about another NPC's gift tastes in French and Turkish.</li>
<li>Fixed the hats added in 1.5 translating their internal name instead of setting the display name in some languages.</li></ul></dd></dl>
<dl><dt>Fixed for multiplayer</dt>
<dd>
<ul><li>Possibly fixed frequent disconnections for some players.</li>
<li>Fixed <a href="../../external.html?link=https://stardewvalleywiki.com/Egg_Festival" title="Egg Festival">egg festival</a> requiring 12 eggs to win if there are 5+ players. It now applies the four-player requirement to any player count beyond that.</li>
<li>Fixed farmhands sometimes able to walk out of bounds at festivals.</li>
<li>Fixed various cases where values weren't correctly synced between players.</li>
<li>Fixed watered dirt edges not updated for farmhands when they change overnight.</li></ul></dd></dl>
<dl><dt>Fixes for modded players</dt>
<dd>
<ul><li>Monsters no longer <a href="../../external.html?link=https://stardewvalleywiki.com/Options#Advanced_Game_Options" title="Options">spawn at night</a> by default on custom farm types.</li>
<li>Fixed crash if an NPC dialogue can't be parsed (it now logs the error and defaults to "..." instead).</li>
<li>Fixed crash if you have a Statue of Endless Fortune, and the birthday NPC's first loved gift is a category or context tag. The statue now chooses the first valid gift taste, and falls back to a non-birthday gift if none was found.</li>
<li>Fixed crash when loading a save that contains unknown locations without SMAPI installed.</li>
<li>Fixed crash when a custom farm map has no grass spawn tile and you walk through crops or grass.</li>
<li>Fixed crash when a farmhand warps to a location which doesn't exist locally yet.</li>
<li>Fixed calendar support for multiple events on the same day (including multiple weddings, multiple birthdays, birthdays on a festival day, etc).</li>
<li>Fixed event setup not allowing more than 9 players.</li>
<li>Fixed events not exiting correctly if they crash before the first script command.</li>
<li>Fixed event errors not logged to the console.</li>
<li>Fixed potential event crash if a custom NPC name contains 'farmer'.</li>
<li>Fixed save loading very slowly if it has a broken outdoors location in some cases.</li></ul></dd></dl>
<dl><dt>Other bug fixes</dt>
<dd>
<ul><li>Fixed crash when taking a screenshot on macOS if the <samp>~/.local</samp> folder doesn't exist.</li>
<li>Fixed crash when applying building paint masks if the target building changed to a smaller sprite.</li>
<li>Fixed crash when playing audio which doesn't exist. It now logs an error and plays a default 'quiet click' sound instead.</li>
<li>Fixed crashes/errors if the data for an item, animal, tree, etc no longer exists (usually due to removing a content mod).</li>
<li>Fixed able to equip a <a href="../../external.html?link=https://stardewvalleywiki.com/Staircase" title="Staircase">staircase</a> as pants to obtain <a href="../../external.html?link=https://stardewvalleywiki.com/Trimmed_Lucky_Purple_Shorts" class="mw-redirect" title="Trimmed Lucky Purple Shorts">trimmed lucky purple shorts</a>.</li>
<li>Fixed wilderness farm spawning a stone in water.</li>
<li>Fixed hilltop farm spawning grass inside of stumps.</li>
<li>Fixed <a href="../../external.html?link=https://stardewvalleywiki.com/Trash_Bear" class="mw-redirect" title="Trash Bear">Trash Bear</a> treated as a villager (e.g. it could theoretically be picked for quests).</li>
<li>Fixed save folder collision if you set the save's name &amp; seed to the same value as an existing save.</li>
<li>Fixed being able to click the event skip button while in gamepad mode. If the player was previously viewing a letter with multiple pages, the cursor could be positioned directly above the skip button, causing the next viewed event to be skipped when the A button is pressed to progress text.</li>
<li>Fixed the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Lonely_Stone" title="Secrets">lonely stone</a> map tooltip not accessible with a gamepad.</li>
<li>Fixed the build number not set on Linux/macOS.</li></ul></dd></dl>
<dl><dt>Other changes</dt>
<dd>
<ul><li>See <a class="mw-selflink selflink">changes for mod authors</a>.</li></ul></dd></dl>
</blockquote>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a href="../../external.html?link=https://stardewvalleywiki.com/User:Pathoschild/Modding_wishlist/Completed#Done_in_Stardew_Valley_1.6" title="User:Pathoschild/Modding wishlist/Completed">Modding wishlist items done in Stardew Valley 1.6</a> lists a few specialized changes not mentioned on this page.</li></ul>
<!-- 
NewPP limit report
Cached time: 20240411053125
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 1.084 seconds
Real time usage: 1.330 seconds
Preprocessor visited node count: 11116/1000000
Post‐expand include size: 29275/2097152 bytes
Template argument size: 6863/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 133694/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  221.971      1 -total
 37.52%   83.280    334 Template:T
 10.38%   23.034      1 Template:TOC
  7.60%   16.872     59 Template:O
  6.80%   15.104      4 Template:Name
  2.14%    4.758      7 Template:Price
  1.14%    2.538      1 Template:Collapse
  0.94%    2.096     15 Template:Content_Patcher_version
  0.81%    1.808      1 Template:Version
  0.80%    1.778      1 Template:Upcoming
-->
</div></div><div class="printfooter">Retrieved from "<a dir="ltr" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;oldid=148068">https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;oldid=148068</a>"</div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="../../external.html?link=https://stardewvalleywiki.com/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="../../external.html?link=https://stardewvalleywiki.com/Category:Modding" title="Category:Modding">Modding</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-personal" class="vector-menu" aria-labelledby="p-personal-label" role="navigation" 
	 >
	<h3 id="p-personal-label">
		<span>Personal tools</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="pt-createaccount"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:CreateAccount&amp;returnto=Modding%3AMigrate+to+Stardew+Valley+1.6&amp;returntoquery=diff%3D148068" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Modding%3AMigrate+to+Stardew+Valley+1.6&amp;returntoquery=diff%3D148068" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li></ul>
		
	</div>
</nav>


		<div id="left-navigation">
			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-namespaces" class="vector-menu vector-menu-tabs vectorTabs" aria-labelledby="p-namespaces-label" role="navigation" 
	 >
	<h3 id="p-namespaces-label">
		<span>Namespaces</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="ca-nstab-modding" class="selected"><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.6">Modding</a></li><li id="ca-talk"><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li></ul>
		
	</div>
</nav>


			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-variants" class="vector-menu-empty emptyPortlet vector-menu vector-menu-dropdown vectorMenu" aria-labelledby="p-variants-label" role="navigation" 
	 >
	<input type="checkbox" class="vector-menu-checkbox vectorMenuCheckbox" aria-labelledby="p-variants-label" />
	<h3 id="p-variants-label">
		<span>Variants</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="menu vector-menu-content-list"></ul>
		
	</div>
</nav>


		</div>
		<div id="right-navigation">
			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-views" class="vector-menu vector-menu-tabs vectorTabs" aria-labelledby="p-views-label" role="navigation" 
	 >
	<h3 id="p-views-label">
		<span>Views</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="ca-view" class="collapsible selected"><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.6">Read</a></li><li id="ca-viewsource" class="collapsible"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=edit&amp;oldid=148068" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li id="ca-history" class="collapsible"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></li></ul>
		
	</div>
</nav>


			<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-cactions" class="vector-menu-empty emptyPortlet vector-menu vector-menu-dropdown vectorMenu" aria-labelledby="p-cactions-label" role="navigation" 
	 >
	<input type="checkbox" class="vector-menu-checkbox vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
	<h3 id="p-cactions-label">
		<span>More</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="menu vector-menu-content-list"></ul>
		
	</div>
</nav>


			<div id="p-search" role="search">
	<h3 >
		<label for="searchInput">Search</label>
	</h3>
	<form action="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php" id="searchform">
		<div id="simpleSearch">
			<input type="search" name="search" placeholder="Search Stardew Valley Wiki" title="Search Stardew Valley Wiki [f]" accesskey="f" id="searchInput"/>
			<input type="hidden" name="title" value="Special:Search">
			<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/>
			<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel">
	<div id="p-logo" role="banner">
		<a  title="Visit the main page" class="mw-wiki-logo" href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki"></a>
	</div>
	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-navigation" class="vector-menu vector-menu-portal portal portal-first" aria-labelledby="p-navigation-label" role="navigation" 
	 >
	<h3 id="p-navigation-label">
		<span>Navigation</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="n-mainpage-description"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="../../external.html?link=https://stardewvalleywiki.com/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-Admin-noticeboard"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:Admin_noticeboard">Admin noticeboard</a></li><li id="n-Help-Editing"><a href="../../external.html?link=https://stardewvalleywiki.com/Help:Editing">Help Editing</a></li><li id="n-randompage"><a href="../../external.html?link=https://stardewvalleywiki.com/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li></ul>
		
	</div>
</nav>


	<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-Official Links" class="vector-menu vector-menu-portal portal" aria-labelledby="p-Official Links-label" role="navigation" 
	 >
	<h3 id="p-Official Links-label">
		<span>Official Links</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="n-Official-Site"><a href="../../external.html?link=https://stardewvalley.net/" rel="nofollow">Official Site</a></li><li id="n-Official-Forums"><a href="../../external.html?link=https://forums.stardewvalley.net/" rel="nofollow">Official Forums</a></li><li id="n-Official-Merchandise"><a href="../../external.html?link=https://www.stardewvalley.net/shop/" rel="nofollow">Official Merchandise</a></li><li id="n-Discord"><a href="../../external.html?link=https://discord.com/invite/stardewvalley" rel="nofollow">Discord</a></li><li id="n-Reddit"><a href="../../external.html?link=https://www.reddit.com/r/StardewValley" rel="nofollow">Reddit</a></li></ul>
		
	</div>
</nav>

<!-- Please do not use role attribute as CSS selector, it is deprecated. -->
<nav id="p-tb" class="vector-menu vector-menu-portal portal" aria-labelledby="p-tb-label" role="navigation" 
	 >
	<h3 id="p-tb-label">
		<span>Tools</span>
	</h3>
	<!-- Please do not use the .body class, it is deprecated. -->
	<div class="body vector-menu-content">
		<!-- Please do not use the .menu class, it is deprecated. -->
		<ul class="vector-menu-content-list"><li id="t-whatlinkshere"><a href="../../external.html?link=https://stardewvalleywiki.com/Special:WhatLinksHere/Modding:Migrate_to_Stardew_Valley_1.6" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../../external.html?link=https://stardewvalleywiki.com/Special:RecentChangesLinked/Modding:Migrate_to_Stardew_Valley_1.6" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-upload"><a href="../../external.html?link=http://stardewvalleywiki.com/Special:Upload" title="Upload files [u]" accesskey="u">Upload file</a></li><li id="t-specialpages"><a href="../../external.html?link=https://stardewvalleywiki.com/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;oldid=148068" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=info" title="More information about this page">Page information</a></li><li id="t-cargopagevalueslink"><a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=pagevalues" rel="cargo-pagevalues">Page values</a></li></ul>
		
	</div>
</nav>


	
</div>

</div>

<footer id="footer" class="mw-footer" role="contentinfo" >
	<ul id="footer-info" >
		<li id="footer-info-lastmod"> This page was last edited on 6 May 2023, at 17:07.</li>
		<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</li>
	</ul>
	<ul id="footer-places" >
		<li id="footer-places-privacy"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:Privacy_policy" title="Stardew Valley Wiki:Privacy policy">Privacy policy</a></li>
		<li id="footer-places-about"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:About" title="Stardew Valley Wiki:About">About Stardew Valley Wiki</a></li>
		<li id="footer-places-disclaimer"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:General_disclaimer" title="Stardew Valley Wiki:General disclaimer">Disclaimers</a></li>
		<li id="footer-places-mobileview"><a href="../../external.html?link=http://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;diff=148068&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
	</ul>
	<ul id="footer-icons" class="noprint">
		<li id="footer-copyrightico"><a href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/resources/assets/licenses/cc-by-nc-sa.png" alt="Creative Commons Attribution-NonCommercial-ShareAlike" width="88" height="31" loading="lazy"/></a></li>
		<li id="footer-poweredbyico"><a href="../../external.html?link=https://www.mediawiki.org/"><img src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/mediawiki/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /mediawiki/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a></li>
	</ul>
	<div style="clear: both;"></div>
</footer>



<script src="../../external.html?link=https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"1.084","walltime":"1.330","ppvisitednodes":{"value":11116,"limit":1000000},"postexpandincludesize":{"value":29275,"limit":2097152},"templateargumentsize":{"value":6863,"limit":2097152},"expansiondepth":{"value":6,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":133694,"limit":5000000},"timingprofile":["100.00%  221.971      1 -total"," 37.52%   83.280    334 Template:T"," 10.38%   23.034      1 Template:TOC","  7.60%   16.872     59 Template:O","  6.80%   15.104      4 Template:Name","  2.14%    4.758      7 Template:Price","  1.14%    2.538      1 Template:Collapse","  0.94%    2.096     15 Template:Content_Patcher_version","  0.81%    1.808      1 Template:Version","  0.80%    1.778      1 Template:Upcoming"]},"cachereport":{"timestamp":"20240411053125","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":1526});});</script></body>
<!-- Mirrored from stardewvalleywiki.com/mediawiki/index.php?diff=148068 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 11 Apr 2024 07:06:49 GMT -->
</html>
