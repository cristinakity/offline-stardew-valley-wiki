<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">


<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>View source for Modding:Migrate to Stardew Valley 1.3 - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!0,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"07fc6c01b32b5a19740997ca","wgCSPNonce":!1,"wgCanonicalNamespace":"Modding","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":570,"wgPageName":"Modding:Migrate_to_Stardew_Valley_1.3","wgTitle":"Migrate to Stardew Valley 1.3","wgCurRevisionId":130208,"wgRevisionId":0,"wgArticleId":7686,"wgIsArticle":!1,"wgIsRedirect":!1,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Modding:Migrate_to_Stardew_Valley_1.3","wgRelevantArticleId":7686,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgMFMode":"stable",
"wgMFAmc":!1,"wgMFAmcOutreachActive":!1,"wgMFAmcOutreachUserEligible":!1,"wgMFLazyLoadImages":!0,"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,"watchlist":!1,"tagline":!1},"wgMFIsPageContentModelEditable":!0,"wgCargoMapClusteringMinimum":80,"wgCargoMonthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"wgCargoMonthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgCargoWeekDays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"wgCargoWeekDaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"wgMinervaPermissions":{"watch":!0,"talk":!1},"wgMinervaFeatures":{"beta":!1,"donate":!0,"mobileOptionsLink":!0,"categories":!1,"pageIssues":!0,"talkAtTop":!1,"historyInPageActions":!1,"overflowSubmenu":!1,"tabsOnSpecials":!1,"personalMenu":!1,"mainMenuExpanded":!1,"simplifiedTalk":!0},
"wgMinervaDownloadNamespaces":[0]};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","mediawiki.ui.input":"ready","mediawiki.ui.checkbox":"ready","skins.minerva.base.styles":"ready","skins.minerva.content.styles":"ready","skins.minerva.content.styles.images":"ready","mediawiki.hlist":"ready","mediawiki.ui.icon":"ready","mediawiki.ui.button":"ready","skins.minerva.icons.wikimedia":"ready","skins.minerva.mainMenu.icons":"ready","skins.minerva.mainMenu.styles":"ready","mobile.init.styles":"ready","mobile.messageBox.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","skins.minerva.options","skins.minerva.scripts","mobile.init"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="loadb780.css?lang=en&amp;modules=mediawiki.hlist%7Cmediawiki.ui.button%2Ccheckbox%2Cicon%2Cinput%7Cmobile.init.styles%7Cmobile.messageBox.styles%7Cskins.minerva.base.styles%7Cskins.minerva.content.styles%7Cskins.minerva.content.styles.images%7Cskins.minerva.icons.wikimedia%7Cskins.minerva.mainMenu.icons%2Cstyles&amp;only=styles&amp;skin=minerva"/>
<script async="" src="loadc82b.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=minerva&amp;target=mobile"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load1154.css?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=minerva"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="description" content="You do not have permission to edit this page, for the following reason:"/>
<meta name="theme-color" content="#eaecf0"/>
<meta name="viewport" content="initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0, width=device-width"/>
<link rel="manifest" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/api.php?action=webapp-manifest"/>
<link rel="shortcut icon" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="../../external.html?link=http://stardewvalleywiki.com/mediawiki/api.php?action=rsd"/>
<link rel="license" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/"/>
<meta property="og:title" content="View source for Modding:Migrate to Stardew Valley 1.3 - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.3"/>
<meta property="og:description" content="←Index"/>
<meta property="og:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="article:modified_time" content="2021-11-08T01:06:31Z"/>
<meta property="article:published_time" content="2021-11-08T01:06:31Z"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="View source for Modding:Migrate to Stardew Valley 1.3 - Stardew Valley Wiki"/>
<meta property="twitter:description" content="←Index"/>
<meta property="twitter:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"View source for Modding:Migrate to Stardew Valley 1.3 - Stardew Valley Wiki","headline":"View source for Modding:Migrate to Stardew Valley 1.3 - Stardew Valley Wiki","mainEntityOfPage":"View source for Modding:Migrate to Stardew Valley 1.3","identifier":"https:\/\/stardewvalleywiki.com\/Modding:Migrate_to_Stardew_Valley_1.3","url":"https:\/\/stardewvalleywiki.com\/Modding:Migrate_to_Stardew_Valley_1.3","description":"\u2190Index","dateModified":"2021-11-08T01:06:31Z","datePublished":"2021-11-08T01:06:31Z","image":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-570 ns-subject page-Modding_Migrate_to_Stardew_Valley_1_3 rootpage-Modding_Migrate_to_Stardew_Valley_1_3 stable skin-minerva action-edit skin-vector-legacy">
<div id="mw-mf-viewport">
	<div id="mw-mf-page-center">
		<a class="mw-mf-page-center__mask" href="#"></a>
		<header class="header-container header-chrome">
			<form class="header" action="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php" method="get">
				<nav class="navigation-drawer toggle-list view-border-box">
					<input type="checkbox" id="main-menu-input" class="toggle-list__checkbox" role="button" aria-labelledby="mw-mf-main-menu-button">
					<label for="main-menu-input" id="mw-mf-main-menu-button"
						class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-menu-base20 mw-ui-icon-flush-left toggle-list__toggle"
						title="Open main menu" data-event-name="ui.mainmenu">Open main menu</label>
					<div id="mw-mf-page-left" class="menu toggle-list__list view-border-box">
	<ul id="p-navigation">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-home" data-event-name="menu.home"><span>Home</span></a>
			</li>
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Special:Random#/random" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-die " data-event-name="menu.random"><span>Random</span></a>
			</li>
	</ul>
	<ul id="p-personal">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Modding%3AMigrate+to+Stardew+Valley+1.3&amp;returntoquery=action%3Dedit" class="menu__item--login mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-logIn " data-event-name="menu.login"><span>Log in</span></a>
			</li>
	</ul>
	<ul id="pt-preferences">
			<li class="jsonly">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:MobileOptions&amp;returnto=Modding%3AMigrate+to+Stardew+Valley+1.3" class="menu__item--settings mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-settings " data-event-name="menu.settings"><span>Settings</span></a>
			</li>
	</ul>
	<ul class="hlist">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:About" class="" data-event-name=""><span>About Stardew Valley Wiki</span></a>
			</li>
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:General_disclaimer" class="" data-event-name=""><span>Disclaimers</span></a>
			</li>
	</ul>
</div>

					<label class="main-menu-mask" for="main-menu-input"></label>
				</nav>
				<div class="branding-box">
					<a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki">
						<span>Stardew Valley Wiki</span>
						
					</a>
				</div>
				<div class="search-box">
					<input class="search mw-ui-background-icon-search skin-minerva-search-trigger" type="search" name="search" id="searchInput"
						autocomplete="off" placeholder="Search Stardew Valley Wiki" aria-label="Search Stardew Valley Wiki"
						value="">
				</div>
				<nav class="minerva-user-navigation" aria-label="User navigation">
					<div><button id="searchIcon" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-search-base20 skin-minerva-search-trigger" type="submit">Search</button></div>
					
				</nav>
			</form>
		</header>
		<main id="content" class="mw-body">
			<div class="banner-container">
			<div id="siteNotice"></div>
			</div>
			
			<div class="pre-content heading-holder">
				<div class="page-heading">
					<h1 id="section_0">View source for Modding:Migrate to Stardew Valley 1.3</h1>
					<div class="tagline"></div>
				</div>
				
				
				
				<div class="minerva__subtitle">← <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.3" title="Modding:Migrate to Stardew Valley 1.3">Modding:Migrate to Stardew Valley 1.3</a></div>
			</div>
			
			<div id="bodyContent" class="content"><div id="mw-content-text"><script>function mfTempOpenSection(id){var block=document.getElementById("mf-section-"+id);block.className+=" open-block";block.previousSibling.className+=" open-block";}</script><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in the group: <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Stardew_Valley_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Stardew Valley Wiki:Users (page does not exist)">Users</a>.
</p>
</div><hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" class="mw-editfont-monospace mw-ui-input" lang="en" dir="ltr" name="wpTextbox1">←[[Modding:Index|Index]]

{{Modder compatibility header}}
For updating Content Patcher or XNB mods, see [[Modding:Migrate XNB changes to Stardew Valley 1.3|''Migrate XNB changes to Stardew Valley 1.3'']].

This page explains how to update your SMAPI mod code for compatibility with Stardew Valley 1.3.

==Overview==
===Single player===
At a high level, here's how to update a SMAPI mod:
# Update the [https://www.nuget.org/packages/Pathoschild.Stardew.ModBuildConfig mod build NuGet package] to 2.1-beta. (You may need to enable the 'include prerelease' checkbox to see the beta.)&lt;br />''This adds support for Stardew Valley 1.3, and adds code analysis which will report common problems in Stardew Valley 1.3 as build warnings.''
# '''Restart Visual Studio''' to fully install the package.
# Rebuild your solution.
# Fix any compiler errors and warnings you see in the ''Error List'' pane in Visual Studio (or equivalent for other editors).
# See below for help with specific changes and warnings.
# Test all mod features to make sure they work.

If you need help updating your code, feel free to ask questions [[Modding:Community#Discord|on the Stardew Valley Discord]].

===Multiplayer===
The instructions for single player apply for multiplayer too. Stardew Valley 1.3 automatically synchronises most world changes to other players (see ''[[Modding:Modder Guide/Game Fundamentals#Net fields|net fields]]''), so many mods will work in multiplayer too. Some mods may need further changes, but that can only be decided case-by-case.

There are three common approaches to multiplayer compatibility:
* Let anyone install the mod. If your mod makes changes to the world, make sure it'll work fine if different players have different versions or configuration, or only some of the players have it installed.
* Only let the main player install the mod, which avoids complications from other players changing the same data. To do this, check SMAPI's &lt;code>Context.IsMainPlayer&lt;/code> in your code.
* Only enable in single-player mode. This eliminates all multiplayer and sync complications, though players may be disappointed. To do this, check SMAPI's &lt;code>Context.IsMultiplayer&lt;/code> in your code.

Common issues:
* If your mod adds custom buildings or items, the game may crash trying to sync them to other players.

==Major changes==
===⚠ Net fields===
A 'net type' is any of several new classes which Stardew Valley 1.3 uses to sync data between players, named for the &lt;code>Net&lt;/code> prefix in their name. A net type can represent a simple value like &lt;samp>NetBool&lt;/samp>, or complex values like &lt;samp>NetFieldDictionary&lt;/samp>. Many existing fields have been converted to net types (called 'net fields'), each wrapping the underlying value:
: &lt;syntaxhighlight lang="C#">
NetString str = new NetString("bar");
if (str.Value == "bar") // true
&lt;/syntaxhighlight>

Impact on mods:
* The game will regularly collect all the net fields reachable from &lt;samp>Game1.netWorldState&lt;/samp> and sync them with other players. That means that many mod changes will be synchronised automatically in multiplayer.
* Net fields can implicitly convert to their equivalent normal values (like &lt;code>bool x = new NetBool(true)&lt;/code>), but their conversion rules can be counterintuitive and error-prone. For example, &lt;code>item?.category == null &amp;&amp; item?.category != null&lt;/code> can both be true at once. '''Always avoid implicit casts to minimise bugs.'''

Suggested fix:
* With the latest mod build package installed, rebuild your project. The package will detect net field references you need to update, and show an appropriate warning. See [[#Fix common build warnings|''fix common build warnings'']] below.

===⚠ Location changes for farmhands===
In multiplayer, if the current player isn't the main player:
* '''&lt;samp>Game1.locations&lt;/samp> does not contain the actual list of locations'''. It contains a set of locations generated locally, which don't match the actual in-game locations. This also affects related functionality like &lt;samp>Utility.getAllCharacters()&lt;/samp>, which searches the in-game locations. There's no fix for this yet. You can use SMAPI's &lt;samp>helper.Multiplayer.GetActiveLocations()&lt;/samp> to get the list of locations currently being sync'd from the host, but there's currently no way to fetch all locations. That means SMAPI mods installed by a non-main player have no way to fetch all NPCs, locations, objects, etc.
* &lt;samp>Game1.currentLocation&lt;/samp> is always an active location, but may be null when the player transition between locations. Make sure any references to that field can handle it being null.

===Game1.player.friendships is obsolete===
The &lt;samp>Game1.player.friendships&lt;/samp> field is always null in Stardew Valley 1.3. Use the new &lt;samp>Game1.player.friendshipData&lt;/samp> field instead, which wraps the raw data with a more useful model and more data.

To convert old code:
{| class="wikitable"
! old field
! new equivalent
|-
| &lt;code>Game1.player.friendships[name][0]&lt;/code>
| &lt;code>Game1.player.friendshipData[name].Points&lt;/code>
|-
| &lt;code>Game1.player.friendships[name][1]&lt;/code>
| &lt;code>Game1.player.friendshipData[name].GiftsThisWeek&lt;/code>
|-
| &lt;code>Game1.player.friendships[name][2]&lt;/code>
| &lt;code>Game1.player.friendshipData[name].TalkedToToday&lt;/code> (0 → false, 1 → true)
|-
| &lt;code>Game1.player.friendships[name][3]&lt;/code>
| &lt;code>Game1.player.friendshipData[name].GiftsToday&lt;/code> (0 → false, 1 → true)

|}

===Texture constructor arguments===
Many constructors which previously accepted &lt;samp>Texture2D texture&lt;/samp> arguments now take a &lt;samp>string textureName&lt;/samp> argument instead. It's usually better to use SMAPI's content API to override textures instead. You can change the cached texture after the object is constructed (may need [[Modding:Modder Guide/APIs|reflection]]), but don't change the texture name to avoid multiplayer sync issues.

===Reserved key bindings===
Mods won't receive input sent to the chatbox, and they won't receive the toggle-chatbox key ({{key|T}} by default).

===Reflection===
If you use reflection to access private game code, double-check that the fields/properties/methods you're accessing still match. In particular, watch out for these changes:
* fields/properties changing return type;
* fields replaced by properties.

===Overlay objects===
Stardew Valley 1.3 adds an &lt;samp>overlayObjects&lt;/samp> field to &lt;samp>GameLocation&lt;/samp> instances. These have two special properties:
* They're not synced to other players, so each player has their own overlay objects. (That's used for special quest items, so other players can't take your item.)
* They're positioned on top of the normal object layer. (If there was already an object where the item is placed, the previous object will be hidden until you pick up the overlay object instead of being deleted.)

===SMAPI deprecated APIs removed===
Since nearly all SMAPI mods broke in Stardew Valley 1.2, SMAPI 2.6 also drops support for deprecated APIs:

{| class="wikitable"
|-
! since
! interfaces
! replacement
|-
| 2.3
| &lt;samp>IReflectionHelper.GetPrivateField&lt;/samp>&lt;br />&lt;samp>IReflectionHelper.GetPrivateMethod&lt;/samp>&lt;br />&lt;samp>IReflectionHelper.GetPrivateProperty&lt;/samp>
| renamed to &lt;samp>GetField&lt;/samp>, &lt;samp>GetMethod&lt;/samp>, and &lt;samp>GetProperty&lt;/samp> respectively; their return values have also been renamed (&lt;samp>IPrivateField&lt;/samp> → &lt;samp>IReflectedField&lt;/samp>, &lt;samp>IPrivateProperty&lt;/samp> → &lt;samp>IReflectedProperty&lt;/samp>, and &lt;samp>IPrivateMethod&lt;/samp> → &lt;samp>IReflectedMethod&lt;/samp>).
|-
| 2.3
| &lt;samp>IReflectionHelper.GetPrivateValue&lt;/samp>
| use &lt;samp>GetPrivateField(...).GetValue()&lt;/samp> instead.
|}

===SMAPI event changes===
Some SMAPI events were rewritten so they make sense in multiplayer. These also use a new architecture under the hood, so they provide much more useful event data (''e.g.,'' added/removed instead of just current values). The following events have breaking changes:

{| class="wikitable"
|-
! old event
! 
! new event
! migration notes
|-
| &lt;samp>LocationEvents.CurrentLocationChanged&lt;/samp>
| &amp;rarr;
| &lt;samp>PlayerEvents.Warped&lt;/samp>
| &amp;#32;
* Change &lt;samp>EventArgsCurrentLocationChanged&lt;/samp> to &lt;samp>EventArgsPlayerWarped&lt;/samp>.
|-
| &lt;samp>LocationEvents.LocationsChanged&lt;/samp>
| 
| ''(same name)''
| &amp;#32;
* Change &lt;samp>EventArgsGameLocationsChanged&lt;/samp> to &lt;samp>EventArgsLocationsChanged&lt;/samp>.
* The event is now raised when ''any'' location is added/removed (including building interiors), not just the main world locations in &lt;samp>Game1.locations&lt;/samp>. If you need to handle only main world locations, you can check &lt;code>if (Game1.locations.Contains(e.NewLocation))&lt;/code>.
* The event data previously contained the current list of locations; it now contains the locations added or removed since the last tick. If you previously used &lt;samp>e.NewLocations&lt;/samp>, you can replace it with &lt;samp>Game1.locations&lt;/samp>.
|-
| &lt;samp>LocationEvents.LocationObjectsChanged&lt;/samp>
| →
| &lt;samp>LocationEvents.ObjectsChanged&lt;/samp>
| &amp;#32;
* The event is now raised when objects are added/removed to ''any'' location (including building interiors), not just the current player's location. If you need to handle only the current player's location, you can check &lt;code>if (e.Location == Game1.player.currentLocation)&lt;/code>.
* The event data previously contained the current location's list of objects; it now contains the location, and the objects added/removed in it since the last tick. If you previously used &lt;samp>e.NewObjects&lt;/samp>, you can use &lt;samp>e.Location.netObjects.FieldDict&lt;/samp> instead.
|}

===Beneficial changes===
Stardew Valley 1.3 includes several changes which benefit modders. These aren't disruptive, but worth noting for use. Some of the most relevant are...
* Many more methods and properties are now virtual.
* &lt;samp>Game1.WorldDate&lt;/samp> is a new field which provides a more useful way to check the date. This combines the day, season, and year with useful logic like day-of-week and date comparisons. This incorporates many of the features from SMAPI's &lt;samp>SDate&lt;/samp> class.
* Many type checks now allow subclasses (like &lt;code>item.GetType() == typeof(Axe)&lt;/code> &amp;rarr; &lt;code>item is Axe&lt;/code>).
* Any &lt;samp>GameLocation&lt;/samp> can now set &lt;samp>IsGreenhouse = true&lt;/samp>, and crops will grow there all year.
* Any &lt;samp>NPC&lt;/samp> can now set &lt;samp>IsSocial&lt;/samp> to determine whether they appear in the social menu.
* Bee houses now find nearby flowers in any location, not only when placed on the farm.
* Custom map tilesheets no longer need hacks to avoid the game's seasonal logic. Tilesheets which don't start with a season name and underscore won't be seasonalised.
* Several changes to support upcoming SMAPI features and fixes.

==Fix common build warnings==
Make sure you check your Error List pane in Visual Studio (or equivalent in other IDEs) and fix any warnings. Here are some common ones:

===Mismatch between the processor architecture...===
Sample warning: "''There was a mismatch between the processor architecture of the project being built "{0}" and the processor architecture of the reference "{1}". This mismatch may cause runtime failures.''"

That warning is normal. The error is saying that your build is set to 'Any CPU', but Stardew Valley is x86-only so it'll only work in x86 anyway. You can either ignore it, or [https://msdn.microsoft.com/en-us/library/ms185328.aspx change your platform target] to x86.

===This implicitly converts...===
Sample warning: "''This implicitly converts '{0}' from Net{1} to {2}, but Net{1} has unintuitive implicit conversion rules. Consider comparing against the actual value instead to avoid bugs. See https://smapi.io/package/avoid-implicit-net-field-cast for details.''"

Your code is referencing a [[#Net fields|net field]], which can cause subtle bugs. The field you're referencing has an equivalent non-net property, like &lt;samp>monster.Health&lt;/samp> (&lt;samp>int&lt;/samp>) instead of &lt;samp>monster.health&lt;/samp> (&lt;samp>NetBool&lt;/samp>). Change your code to use the suggested property instead.

===FieldName is a Net* field...===
Sample warning: "'''{0}' is a Net{1} field; consider using the {2} property instead. See https://smapi.io/package/avoid-net-field for details.''"

Your code is referencing a [[#Net fields|net field]], which can cause subtle bugs. You should access the underlying value instead:
&lt;ul>
&lt;li>For a reference type (''i.e.,'' one that can contain &lt;samp>null&lt;/samp>), you can use the &lt;samp>.Value&lt;/samp> property (or &lt;samp>.FieldDict&lt;/samp> for a &lt;samp>NetDictionary&lt;/samp>):
&lt;syntaxhighlight lang="c#">
if (building.indoors.Value == null)
&lt;/syntaxhighlight>

Or convert the value before comparison:
&lt;syntaxhighlight lang="c#">
GameLocation indoors = building.indoors.Value;
if(indoors == null)
   // ...
&lt;/syntaxhighlight>&lt;/li>
&lt;li>For a value type (''i.e.,'' one that can't contain &lt;samp>null&lt;/samp>), check if the parent is null (if needed) and compare with &lt;samp>.Value&lt;/samp>:
&lt;syntaxhighlight lang="c#">
if (item != null &amp;&amp; item.category.Value == 0)
&lt;/syntaxhighlight>&lt;/li>
&lt;/ul>

===The FieldName field is obsolete...===
Sample warning: "''The 'Character.friendships' field is obsolete and should be replaced with 'friendshipData'. See https://smapi.io/package/avoid-obsolete-field for details.''"

You're referencing a field which should no longer be used. Use the suggested field name instead to fix it.

===An instance of analyzer ... cannot be created===
Update to the latest [https://visualstudio.microsoft.com/vs/community/ Visual Studio]; the NuGet package uses a recent feature that isn't available in older versions.

==FAQs==
===How do I test my code in multiplayer?===
You can test mods in multiplayer on the same computer, by launching two instances of the game:

# Prepare player one:
## Launch SMAPI like usual.
## From the title screen: click ''co-op'', then ''host''.
## Start a new save slot (unless you've already created one). Make sure to set 'starting cabins' to at least one (you'll need one cabin per extra player).
# Prepare player two:
## Launch SMAPI again. (This will automatically create a separate log file.)
## From the title screen: click ''co-op'', then ''join LAN game''.
## Leave the 'Enter IP...' box empty and click OK.

===Why not use implicit net field conversion?===
The migration guide suggests [[#Net fields|avoiding net field implicit conversion]]. This may be the most tedious part of the migration for many mods, and the code compiles fine without doing that, so it's tempting to just skip this step. That's not recommended. Although net field conversions will work fine in most cases, their conversion rules can cause strange bugs in unexpected places. It's better to avoid it altogether, rather than learn all the different cases where they'll cause problems. If you really want, you can [https://smapi.io/package/code-warnings disable the build warnings] and decide for yourself when to use the implicit conversion.

[[Category:Modding]]
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Templates used on this page:
</p></div><ul>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:Key" title="Template:Key">Template:Key</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:Key&amp;action=edit" title="Template:Key">view source</a>) </li><li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:Modder_compatibility_header" title="Template:Modder compatibility header">Template:Modder compatibility header</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:Modder_compatibility_header&amp;action=edit" title="Template:Modder compatibility header">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.3" title="Modding:Migrate to Stardew Valley 1.3">Modding:Migrate to Stardew Valley 1.3</a>.</p>
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.3">https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.3</a>"</div>
</div>
			<div class="post-content" id="page-secondary-actions">
			
			</div>
		</main>
		<footer class="mw-footer minerva-footer">
		
		<div class="post-content footer-content">
			
			<h2>Stardew Valley Wiki</h2>
			<div class="license">Content is available under <a class="external" rel="nofollow" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</div>
			<ul class="footer-info hlist hlist-separated">
				
			</ul>
			<ul class="footer-places hlist hlist-separated">
				<li id="footer-places-privacy"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:Privacy_policy" title="Stardew Valley Wiki:Privacy policy">Privacy policy</a></li><li id="footer-places-about"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:About" title="Stardew Valley Wiki:About">About Stardew Valley Wiki</a></li><li id="footer-places-disclaimer"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:General_disclaimer" title="Stardew Valley Wiki:General disclaimer">Disclaimers</a></li><li id="footer-places-desktop-toggle"><a id="mw-mf-display-toggle" href="../../external.html?link=http://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.3&amp;action=edit&amp;mobileaction=toggle_view_desktop">Desktop</a></li>
			</ul>
		</div>
		</footer>
	</div>
</div>
<div class="mw-notification-area" data-mw="interface"></div>
<!-- v:8.3.0 -->

<script src="../../external.html?link=https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(window.NORLQ=window.NORLQ||[]).push(function(){var ns,i,p,img;ns=document.getElementsByTagName('noscript');for(i=0;i<ns.length;i++){p=ns[i].nextSibling;if(p&&p.className&&p.className.indexOf('lazy-image-placeholder')>-1){img=document.createElement('img');img.setAttribute('src',p.getAttribute('data-src'));img.setAttribute('width',p.getAttribute('data-width'));img.setAttribute('height',p.getAttribute('data-height'));img.setAttribute('alt',p.getAttribute('data-alt'));p.parentNode.replaceChild(img,p);}}});</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":47});});</script>		</body>
		

</html>
		

