<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">


<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Modding:Migrate to Stardew Valley 1.6 - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"0a905c927b9ecf60e299227a","wgCSPNonce":!1,"wgCanonicalNamespace":"Modding","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":570,"wgPageName":"Modding:Migrate_to_Stardew_Valley_1.6","wgTitle":"Migrate to Stardew Valley 1.6","wgCurRevisionId":172219,"wgRevisionId":172219,"wgArticleId":13596,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Modding:Migrate_to_Stardew_Valley_1.6","wgRelevantArticleId":13596,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgMFMode":"stable",
"wgMFAmc":!1,"wgMFAmcOutreachActive":!1,"wgMFAmcOutreachUserEligible":!1,"wgMFLazyLoadImages":!0,"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,"watchlist":!1,"tagline":!1},"wgMFIsPageContentModelEditable":!0,"wgCargoMapClusteringMinimum":80,"wgCargoMonthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"wgCargoMonthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgCargoWeekDays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"wgCargoWeekDaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"wgMinervaPermissions":{"watch":!0,"talk":!1},"wgMinervaFeatures":{"beta":!1,"donate":!0,"mobileOptionsLink":!0,"categories":!1,"pageIssues":!0,"talkAtTop":!1,"historyInPageActions":!1,"overflowSubmenu":!1,"tabsOnSpecials":!1,"personalMenu":!1,"mainMenuExpanded":!1,"simplifiedTalk":!0},
"wgMinervaDownloadNamespaces":[0]};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.minerva.base.styles":"ready","skins.minerva.content.styles":"ready","skins.minerva.content.styles.images":"ready","mediawiki.hlist":"ready","mediawiki.ui.icon":"ready","mediawiki.ui.button":"ready","skins.minerva.icons.wikimedia":"ready","skins.minerva.mainMenu.icons":"ready","skins.minerva.mainMenu.styles":"ready","mobile.init.styles":"ready","mobile.messageBox.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","skins.minerva.options","skins.minerva.scripts","mobile.init"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="load55a2.css?lang=en&amp;modules=ext.pygments%7Cmediawiki.hlist%7Cmediawiki.ui.button%2Cicon%7Cmobile.init.styles%7Cmobile.messageBox.styles%7Cskins.minerva.base.styles%7Cskins.minerva.content.styles%7Cskins.minerva.content.styles.images%7Cskins.minerva.icons.wikimedia%7Cskins.minerva.mainMenu.icons%2Cstyles&amp;only=styles&amp;skin=minerva"/>
<script async="" src="loadc82b.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=minerva&amp;target=mobile"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load1154.css?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=minerva"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="description" content="←Index"/>
<meta name="theme-color" content="#eaecf0"/>
<meta name="viewport" content="initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0, width=device-width"/>
<link rel="manifest" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/api.php?action=webapp-manifest"/>
<link rel="shortcut icon" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="../../external.html?link=http://stardewvalleywiki.com/mediawiki/api.php?action=rsd"/>
<link rel="license" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/"/>
<meta property="og:title" content="Modding:Migrate to Stardew Valley 1.6 - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.6"/>
<meta property="og:description" content="←Index"/>
<meta property="og:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="Modding:Migrate to Stardew Valley 1.6 - Stardew Valley Wiki"/>
<meta property="twitter:description" content="←Index"/>
<meta property="twitter:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"Modding:Migrate to Stardew Valley 1.6 - Stardew Valley Wiki","headline":"Modding:Migrate to Stardew Valley 1.6 - Stardew Valley Wiki","mainEntityOfPage":"Modding:Migrate to Stardew Valley 1.6","identifier":"https:\/\/stardewvalleywiki.com\/Modding:Migrate_to_Stardew_Valley_1.6","url":"https:\/\/stardewvalleywiki.com\/Modding:Migrate_to_Stardew_Valley_1.6","description":"\u2190Index","dateModified":"2024-06-07T03:28:56Z","datePublished":"2024-06-07T03:28:56Z","image":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-570 ns-subject page-Modding_Migrate_to_Stardew_Valley_1_6 rootpage-Modding_Migrate_to_Stardew_Valley_1_6 stable skin-minerva action-view skin-vector-legacy">
<div id="mw-mf-viewport">
	<div id="mw-mf-page-center">
		<a class="mw-mf-page-center__mask" href="#"></a>
		<header class="header-container header-chrome">
			<form class="header" action="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php" method="get">
				<nav class="navigation-drawer toggle-list view-border-box">
					<input type="checkbox" id="main-menu-input" class="toggle-list__checkbox" role="button" aria-labelledby="mw-mf-main-menu-button">
					<label for="main-menu-input" id="mw-mf-main-menu-button"
						class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-menu-base20 mw-ui-icon-flush-left toggle-list__toggle"
						title="Open main menu" data-event-name="ui.mainmenu">Open main menu</label>
					<div id="mw-mf-page-left" class="menu toggle-list__list view-border-box">
	<ul id="p-navigation">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-home" data-event-name="menu.home"><span>Home</span></a>
			</li>
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Special:Random#/random" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-die " data-event-name="menu.random"><span>Random</span></a>
			</li>
	</ul>
	<ul id="p-personal">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Modding%3AMigrate+to+Stardew+Valley+1.6&amp;returntoquery=oldid%3D172219" class="menu__item--login mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-logIn " data-event-name="menu.login"><span>Log in</span></a>
			</li>
	</ul>
	<ul id="pt-preferences">
			<li class="jsonly">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:MobileOptions&amp;returnto=Modding%3AMigrate+to+Stardew+Valley+1.6" class="menu__item--settings mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-settings " data-event-name="menu.settings"><span>Settings</span></a>
			</li>
	</ul>
	<ul class="hlist">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:About" class="" data-event-name=""><span>About Stardew Valley Wiki</span></a>
			</li>
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:General_disclaimer" class="" data-event-name=""><span>Disclaimers</span></a>
			</li>
	</ul>
</div>

					<label class="main-menu-mask" for="main-menu-input"></label>
				</nav>
				<div class="branding-box">
					<a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki">
						<span>Stardew Valley Wiki</span>
						
					</a>
				</div>
				<div class="search-box">
					<input class="search mw-ui-background-icon-search skin-minerva-search-trigger" type="search" name="search" id="searchInput"
						autocomplete="off" placeholder="Search Stardew Valley Wiki" aria-label="Search Stardew Valley Wiki"
						value="">
				</div>
				<nav class="minerva-user-navigation" aria-label="User navigation">
					<div><button id="searchIcon" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-search-base20 skin-minerva-search-trigger" type="submit">Search</button></div>
					
				</nav>
			</form>
		</header>
		<main id="content" class="mw-body">
			<div class="banner-container">
			<div id="siteNotice"></div>
			</div>
			
			<div class="pre-content heading-holder">
				<div class="page-heading">
					<h1 id="section_0">Modding:Migrate to Stardew Valley 1.6</h1>
					<div class="tagline"></div>
				</div>
				<nav class="page-actions-menu">
	<ul id="page-actions" class="page-actions-menu__list">
		<li id="language-selector" class="page-actions-menu__list-item">
				<a id="" href="#" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-language-base20 mw-ui-icon-with-label-desktop language-selector disabled"
					data-mw="interface"
					data-event-name="menu.languages" role="button" title="Language">Language</a>
		</li>
		<li id="page-actions-watch" class="page-actions-menu__list-item">
				<a id="ca-watch" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Modding%3AMigrate+to+Stardew+Valley+1.6" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-star-base20 mw-ui-icon-with-label-desktop watch-this-article mw-watchlink menu__item--page-actions-watch"
					data-mw="interface"
					data-event-name="menu.watch" role="button" title="Watch">Watch</a>
		</li>
		<li id="page-actions-edit" class="page-actions-menu__list-item">
				<a id="ca-edit" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;action=edit&amp;section=0" class="edit-page menu__item--page-actions-edit mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-editLock-base20 mw-ui-icon-with-label-desktop"
					data-mw="interface"
					data-event-name="menu.edit" role="button" title="Edit the lead section of this page">Edit</a>
		</li>
	</ul>
</nav>
<!-- version 1.0.2 (change every time you update a partial) -->

				
				
				<div class="minerva__subtitle"><div class="mw-revision warningbox"><div id="mw-revision-info">Revision as of 03:28, 7 June 2024 by <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=User:BarleyZP&amp;action=edit&amp;redlink=1" class="new mw-userlink" title="User:BarleyZP (page does not exist)"><bdi>BarleyZP</bdi></a> <span class="mw-usertoollinks">(<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=User_talk:BarleyZP&amp;action=edit&amp;redlink=1" class="new mw-usertoollinks-talk" title="User talk:BarleyZP (page does not exist)">talk</a> | <a href="../../external.html?link=https://stardewvalleywiki.com/Special:Contributions/BarleyZP" class="mw-usertoollinks-contribs" title="Special:Contributions/BarleyZP">contribs</a>)</span> <span class="comment">(<span dir="auto"><span class="autocomment"><a href="#Custom_pets">→‎Custom pets</a>: </span> mark as migrated</span>)</span></div><div id="mw-revision-nav">(<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;diff=prev&amp;oldid=172219" title="Modding:Migrate to Stardew Valley 1.6">diff</a>) <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;direction=prev&amp;oldid=172219" title="Modding:Migrate to Stardew Valley 1.6">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div></div>
			</div>
			
			<div id="bodyContent" class="content"><div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><script>function mfTempOpenSection(id){var block=document.getElementById("mf-section-"+id);block.className+=" open-block";block.previousSibling.className+=" open-block";}</script><div class="mw-parser-output"><section class="mf-section-0" id="mf-section-0"><p>←<a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Index" title="Modding:Index">Index</a>
</p>
<div style="border: 1px solid orange; border-left: 1em solid orange; padding: 0.5em 1em; border-radius: 5px;">
<p><b>This page is for mod authors. Players: see <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mod_compatibility" title="Modding:Mod compatibility">Modding:Mod compatibility</a> instead.</b>
</p>
</div>
<p><br>
This page explains how to update your mods for compatibility with <a href="../../external.html?link=https://stardewvalleywiki.com/Version_History#1.6" title="Version History">Stardew Valley 1.6</a>, and documents some of the changes and new functionality. See also <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_SMAPI_4.0" title="Modding:Migrate to SMAPI 4.0"><i>Migrate to SMAPI 4.0</i></a>.
</p>
<style data-mw-deduplicate="TemplateStyles:r145264">.mw-parser-output .toclimit-2 .toclevel-1 ul,.mw-parser-output .toclimit-3 .toclevel-2 ul,.mw-parser-output .toclimit-4 .toclevel-3 ul,.mw-parser-output .toclimit-5 .toclevel-4 ul,.mw-parser-output .toclimit-6 .toclevel-5 ul,.mw-parser-output .toclimit-7 .toclevel-6 ul{display:none}</style><div class="toclimit-3"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#FAQs"><span class="tocnumber">1</span> <span class="toctext">FAQs</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#What.27s_changing.3F"><span class="tocnumber">1.1</span> <span class="toctext">What's changing?</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Is_this_the_modapocalypse.3F"><span class="tocnumber">1.2</span> <span class="toctext">Is this the modapocalypse?</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#How_to_update_your_mod"><span class="tocnumber">1.3</span> <span class="toctext">How to update your mod</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#What.27s_new_architecturally.3F"><span class="tocnumber">2</span> <span class="toctext">What's new architecturally?</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#.NET_6"><span class="tocnumber">2.1</span> <span class="toctext">.NET 6</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Trigger_actions"><span class="tocnumber">2.2</span> <span class="toctext">Trigger actions</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Hash_set_fields"><span class="tocnumber">2.3</span> <span class="toctext">Hash set fields</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#DataLoader"><span class="tocnumber">2.4</span> <span class="toctext">DataLoader</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Unique_string_IDs"><span class="tocnumber">2.5</span> <span class="toctext">Unique string IDs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#What.27s_new_for_items"><span class="tocnumber">3</span> <span class="toctext">What's new for items</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Custom_items"><span class="tocnumber">3.1</span> <span class="toctext">Custom items</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Overview"><span class="tocnumber">3.1.1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Item_references"><span class="tocnumber">3.1.2</span> <span class="toctext">Item references</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Item_types"><span class="tocnumber">3.1.3</span> <span class="toctext">Item types</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Define_a_custom_item"><span class="tocnumber">3.1.4</span> <span class="toctext">Define a custom item</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Error_items"><span class="tocnumber">3.1.5</span> <span class="toctext">Error items</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#For_C.23_mods"><span class="tocnumber">3.1.6</span> <span class="toctext">For C# mods</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#Custom_big_craftables"><span class="tocnumber">3.2</span> <span class="toctext">Custom big craftables</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Custom_crops"><span class="tocnumber">3.3</span> <span class="toctext">Custom crops</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Custom_fences"><span class="tocnumber">3.4</span> <span class="toctext">Custom fences</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Custom_floors_.28craftable.29_.26_paths"><span class="tocnumber">3.5</span> <span class="toctext">Custom floors (craftable) &amp; paths</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Custom_machines"><span class="tocnumber">3.6</span> <span class="toctext">Custom machines</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Custom_melee_weapons"><span class="tocnumber">3.7</span> <span class="toctext">Custom melee weapons</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Custom_movie_concessions"><span class="tocnumber">3.8</span> <span class="toctext">Custom movie concessions</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Custom_museum_donations_.26_rewards"><span class="tocnumber">3.9</span> <span class="toctext">Custom museum donations &amp; rewards</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Custom_fruit_trees"><span class="tocnumber">3.10</span> <span class="toctext">Custom fruit trees</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Custom_objects"><span class="tocnumber">3.11</span> <span class="toctext">Custom objects</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Custom_pants"><span class="tocnumber">3.12</span> <span class="toctext">Custom pants</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Custom_shirts"><span class="tocnumber">3.13</span> <span class="toctext">Custom shirts</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Custom_tools"><span class="tocnumber">3.14</span> <span class="toctext">Custom tools</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Custom_wild_trees"><span class="tocnumber">3.15</span> <span class="toctext">Custom wild trees</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Default_recipes"><span class="tocnumber">3.16</span> <span class="toctext">Default recipes</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Global_inventories"><span class="tocnumber">3.17</span> <span class="toctext">Global inventories</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#Hats_on_aquarium_fish"><span class="tocnumber">3.18</span> <span class="toctext">Hats on aquarium fish</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Context_tag_changes"><span class="tocnumber">3.19</span> <span class="toctext">Context tag changes</span></a>
<ul>
<li class="toclevel-3 tocsection-37"><a href="#New_context_tags"><span class="tocnumber">3.19.1</span> <span class="toctext">New context tags</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#ItemContextTagManager_class"><span class="tocnumber">3.19.2</span> <span class="toctext">ItemContextTagManager class</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#Other_context_tag_changes"><span class="tocnumber">3.19.3</span> <span class="toctext">Other context tag changes</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-40"><a href="#Inventory_class"><span class="tocnumber">3.20</span> <span class="toctext">Inventory class</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Furniture_changes"><span class="tocnumber">3.21</span> <span class="toctext">Furniture changes</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="#Other_item_changes_for_C.23_mods"><span class="tocnumber">3.22</span> <span class="toctext">Other item changes for C# mods</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="#Other_item_changes"><span class="tocnumber">3.23</span> <span class="toctext">Other item changes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-44"><a href="#What.27s_new_for_locations_.26_weather"><span class="tocnumber">4</span> <span class="toctext">What's new for locations &amp; weather</span></a>
<ul>
<li class="toclevel-2 tocsection-45"><a href="#Custom_locations"><span class="tocnumber">4.1</span> <span class="toctext">Custom locations</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="#Custom_location_contexts"><span class="tocnumber">4.2</span> <span class="toctext">Custom location contexts</span></a>
<ul>
<li class="toclevel-3 tocsection-47"><a href="#Vanilla_contexts"><span class="tocnumber">4.2.1</span> <span class="toctext">Vanilla contexts</span></a></li>
<li class="toclevel-3 tocsection-48"><a href="#Format"><span class="tocnumber">4.2.2</span> <span class="toctext">Format</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-49"><a href="#Custom_garbage_cans"><span class="tocnumber">4.3</span> <span class="toctext">Custom garbage cans</span></a>
<ul>
<li class="toclevel-3 tocsection-50"><a href="#Format_2"><span class="tocnumber">4.3.1</span> <span class="toctext">Format</span></a></li>
<li class="toclevel-3 tocsection-51"><a href="#Example_new_garbage_can"><span class="tocnumber">4.3.2</span> <span class="toctext">Example new garbage can</span></a></li>
<li class="toclevel-3 tocsection-52"><a href="#Example_change_for_existing_garbage_can"><span class="tocnumber">4.3.3</span> <span class="toctext">Example change for existing garbage can</span></a></li>
<li class="toclevel-3 tocsection-53"><a href="#Changes_for_C.23_mods"><span class="tocnumber">4.3.4</span> <span class="toctext">Changes for C# mods</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-54"><a href="#Custom_map_actions"><span class="tocnumber">4.4</span> <span class="toctext">Custom map actions</span></a></li>
<li class="toclevel-2 tocsection-55"><a href="#Custom_map_layers"><span class="tocnumber">4.5</span> <span class="toctext">Custom map layers</span></a></li>
<li class="toclevel-2 tocsection-56"><a href="#Custom_minecarts"><span class="tocnumber">4.6</span> <span class="toctext">Custom minecarts</span></a>
<ul>
<li class="toclevel-3 tocsection-57"><a href="#Open_a_minecart_menu"><span class="tocnumber">4.6.1</span> <span class="toctext">Open a minecart menu</span></a></li>
<li class="toclevel-3 tocsection-58"><a href="#Example"><span class="tocnumber">4.6.2</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-59"><a href="#Custom_passive_festivals"><span class="tocnumber">4.7</span> <span class="toctext">Custom passive festivals</span></a>
<ul>
<li class="toclevel-3 tocsection-60"><a href="#Data_format"><span class="tocnumber">4.7.1</span> <span class="toctext">Data format</span></a></li>
<li class="toclevel-3 tocsection-61"><a href="#NPC_schedules"><span class="tocnumber">4.7.2</span> <span class="toctext">NPC schedules</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-62"><a href="#Custom_weather"><span class="tocnumber">4.8</span> <span class="toctext">Custom weather</span></a></li>
<li class="toclevel-2 tocsection-63"><a href="#Custom_world_maps"><span class="tocnumber">4.9</span> <span class="toctext">Custom world maps</span></a></li>
<li class="toclevel-2 tocsection-64"><a href="#New_map_properties"><span class="tocnumber">4.10</span> <span class="toctext">New map properties</span></a>
<ul>
<li class="toclevel-3 tocsection-65"><a href="#Building_construction"><span class="tocnumber">4.10.1</span> <span class="toctext">Building construction</span></a></li>
<li class="toclevel-3 tocsection-66"><a href="#Crops"><span class="tocnumber">4.10.2</span> <span class="toctext">Crops</span></a></li>
<li class="toclevel-3 tocsection-67"><a href="#Farmhouse_interior"><span class="tocnumber">4.10.3</span> <span class="toctext">Farmhouse interior</span></a></li>
<li class="toclevel-3 tocsection-68"><a href="#Warps_.26_map_positions"><span class="tocnumber">4.10.4</span> <span class="toctext">Warps &amp; map positions</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-69"><a href="#Other_map_property_changes"><span class="tocnumber">4.11</span> <span class="toctext">Other map property changes</span></a></li>
<li class="toclevel-2 tocsection-70"><a href="#Tile_property_changes"><span class="tocnumber">4.12</span> <span class="toctext">Tile property changes</span></a></li>
<li class="toclevel-2 tocsection-71"><a href="#Other_location.2Fmap_changes"><span class="tocnumber">4.13</span> <span class="toctext">Other location/map changes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-72"><a href="#What.27s_new_for_buildings"><span class="tocnumber">5</span> <span class="toctext">What's new for buildings</span></a>
<ul>
<li class="toclevel-2 tocsection-73"><a href="#Custom_buildings"><span class="tocnumber">5.1</span> <span class="toctext">Custom buildings</span></a>
<ul>
<li class="toclevel-3 tocsection-74"><a href="#Required_fields"><span class="tocnumber">5.1.1</span> <span class="toctext">Required fields</span></a></li>
<li class="toclevel-3 tocsection-75"><a href="#Construction"><span class="tocnumber">5.1.2</span> <span class="toctext">Construction</span></a></li>
<li class="toclevel-3 tocsection-76"><a href="#Upgrades"><span class="tocnumber">5.1.3</span> <span class="toctext">Upgrades</span></a></li>
<li class="toclevel-3 tocsection-77"><a href="#Exterior_behavior"><span class="tocnumber">5.1.4</span> <span class="toctext">Exterior behavior</span></a></li>
<li class="toclevel-3 tocsection-78"><a href="#Exterior_appearance"><span class="tocnumber">5.1.5</span> <span class="toctext">Exterior appearance</span></a></li>
<li class="toclevel-3 tocsection-79"><a href="#Interior"><span class="tocnumber">5.1.6</span> <span class="toctext">Interior</span></a></li>
<li class="toclevel-3 tocsection-80"><a href="#Item_processing"><span class="tocnumber">5.1.7</span> <span class="toctext">Item processing</span></a></li>
<li class="toclevel-3 tocsection-81"><a href="#Tile_interactions"><span class="tocnumber">5.1.8</span> <span class="toctext">Tile interactions</span></a></li>
<li class="toclevel-3 tocsection-82"><a href="#Advanced"><span class="tocnumber">5.1.9</span> <span class="toctext">Advanced</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-83"><a href="#Build_anywhere"><span class="tocnumber">5.2</span> <span class="toctext">Build anywhere</span></a></li>
<li class="toclevel-2 tocsection-84"><a href="#Other_building_changes"><span class="tocnumber">5.3</span> <span class="toctext">Other building changes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-85"><a href="#What.27s_new_for_NPCs"><span class="tocnumber">6</span> <span class="toctext">What's new for NPCs</span></a>
<ul>
<li class="toclevel-2 tocsection-86"><a href="#Custom_NPCs"><span class="tocnumber">6.1</span> <span class="toctext">Custom NPCs</span></a>
<ul>
<li class="toclevel-3 tocsection-87"><a href="#Format_3"><span class="tocnumber">6.1.1</span> <span class="toctext">Format</span></a></li>
<li class="toclevel-3 tocsection-88"><a href="#Examples"><span class="tocnumber">6.1.2</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-89"><a href="#Custom_NPC_appearance"><span class="tocnumber">6.2</span> <span class="toctext">Custom NPC appearance</span></a></li>
<li class="toclevel-2 tocsection-90"><a href="#Custom_farm_animals"><span class="tocnumber">6.3</span> <span class="toctext">Custom farm animals</span></a></li>
<li class="toclevel-2 tocsection-91"><a href="#Custom_pets"><span class="tocnumber">6.4</span> <span class="toctext">Custom pets</span></a></li>
<li class="toclevel-2 tocsection-92"><a href="#Custom_monster_eradication_goals"><span class="tocnumber">6.5</span> <span class="toctext">Custom monster eradication goals</span></a></li>
<li class="toclevel-2 tocsection-93"><a href="#Custom_phone_calls"><span class="tocnumber">6.6</span> <span class="toctext">Custom phone calls</span></a>
<ul>
<li class="toclevel-3 tocsection-94"><a href="#Incoming_calls"><span class="tocnumber">6.6.1</span> <span class="toctext">Incoming calls</span></a></li>
<li class="toclevel-3 tocsection-95"><a href="#Custom_handlers_in_C.23"><span class="tocnumber">6.6.2</span> <span class="toctext">Custom handlers in C#</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-96"><a href="#Custom_shops"><span class="tocnumber">6.7</span> <span class="toctext">Custom shops</span></a></li>
<li class="toclevel-2 tocsection-97"><a href="#Dialogue_changes"><span class="tocnumber">6.8</span> <span class="toctext">Dialogue changes</span></a></li>
<li class="toclevel-2 tocsection-98"><a href="#Schedule_changes"><span class="tocnumber">6.9</span> <span class="toctext">Schedule changes</span></a></li>
<li class="toclevel-2 tocsection-99"><a href="#Other_NPC_changes"><span class="tocnumber">6.10</span> <span class="toctext">Other NPC changes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-100"><a href="#What.27s_new_for_everything_else"><span class="tocnumber">7</span> <span class="toctext">What's new for everything else</span></a>
<ul>
<li class="toclevel-2 tocsection-101"><a href="#Buff_overhaul"><span class="tocnumber">7.1</span> <span class="toctext">Buff overhaul</span></a></li>
<li class="toclevel-2 tocsection-102"><a href="#Custom_audio"><span class="tocnumber">7.2</span> <span class="toctext">Custom audio</span></a></li>
<li class="toclevel-2 tocsection-103"><a href="#Custom_buffs"><span class="tocnumber">7.3</span> <span class="toctext">Custom buffs</span></a></li>
<li class="toclevel-2 tocsection-104"><a href="#Custom_data_fields"><span class="tocnumber">7.4</span> <span class="toctext">Custom data fields</span></a></li>
<li class="toclevel-2 tocsection-105"><a href="#Custom_giant_crops"><span class="tocnumber">7.5</span> <span class="toctext">Custom giant crops</span></a></li>
<li class="toclevel-2 tocsection-106"><a href="#Custom_jukebox_tracks"><span class="tocnumber">7.6</span> <span class="toctext">Custom jukebox tracks</span></a></li>
<li class="toclevel-2 tocsection-107"><a href="#Custom_movies"><span class="tocnumber">7.7</span> <span class="toctext">Custom movies</span></a></li>
<li class="toclevel-2 tocsection-108"><a href="#Custom_wedding_event"><span class="tocnumber">7.8</span> <span class="toctext">Custom wedding event</span></a></li>
<li class="toclevel-2 tocsection-109"><a href="#Game_state_queries"><span class="tocnumber">7.9</span> <span class="toctext">Game state queries</span></a></li>
<li class="toclevel-2 tocsection-110"><a href="#Gender_changes"><span class="tocnumber">7.10</span> <span class="toctext">Gender changes</span></a></li>
<li class="toclevel-2 tocsection-111"><a href="#Item_queries"><span class="tocnumber">7.11</span> <span class="toctext">Item queries</span></a></li>
<li class="toclevel-2 tocsection-112"><a href="#Item_spawn_fields"><span class="tocnumber">7.12</span> <span class="toctext">Item spawn fields</span></a></li>
<li class="toclevel-2 tocsection-113"><a href="#Color_fields"><span class="tocnumber">7.13</span> <span class="toctext">Color fields</span></a></li>
<li class="toclevel-2 tocsection-114"><a href="#modData_field_changes"><span class="tocnumber">7.14</span> <span class="toctext">modData field changes</span></a></li>
<li class="toclevel-2 tocsection-115"><a href="#Quantity_modifiers"><span class="tocnumber">7.15</span> <span class="toctext">Quantity modifiers</span></a></li>
<li class="toclevel-2 tocsection-116"><a href="#Tokenizable_string_format"><span class="tocnumber">7.16</span> <span class="toctext">Tokenizable string format</span></a></li>
<li class="toclevel-2 tocsection-117"><a href="#Event_changes"><span class="tocnumber">7.17</span> <span class="toctext">Event changes</span></a>
<ul>
<li class="toclevel-3 tocsection-118"><a href="#High-level_changes"><span class="tocnumber">7.17.1</span> <span class="toctext">High-level changes</span></a></li>
<li class="toclevel-3 tocsection-119"><a href="#Precondition_changes"><span class="tocnumber">7.17.2</span> <span class="toctext">Precondition changes</span></a></li>
<li class="toclevel-3 tocsection-120"><a href="#Command_changes"><span class="tocnumber">7.17.3</span> <span class="toctext">Command changes</span></a></li>
<li class="toclevel-3 tocsection-121"><a href="#Festival_changes"><span class="tocnumber">7.17.4</span> <span class="toctext">Festival changes</span></a></li>
<li class="toclevel-3 tocsection-122"><a href="#Send-mail_.28x.29_precondition_deprecated"><span class="tocnumber">7.17.5</span> <span class="toctext">Send-mail (x) precondition deprecated</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-123"><a href="#Mail_changes"><span class="tocnumber">7.18</span> <span class="toctext">Mail changes</span></a></li>
<li class="toclevel-2 tocsection-124"><a href="#Stat_changes_for_C.23_mods"><span class="tocnumber">7.19</span> <span class="toctext">Stat changes for C# mods</span></a></li>
<li class="toclevel-2 tocsection-125"><a href="#New_C.23_utility_methods"><span class="tocnumber">7.20</span> <span class="toctext">New C# utility methods</span></a>
<ul>
<li class="toclevel-3 tocsection-126"><a href="#Argument_handling"><span class="tocnumber">7.20.1</span> <span class="toctext">Argument handling</span></a></li>
<li class="toclevel-3 tocsection-127"><a href="#Content_assets"><span class="tocnumber">7.20.2</span> <span class="toctext">Content assets</span></a></li>
<li class="toclevel-3 tocsection-128"><a href="#Filtering"><span class="tocnumber">7.20.3</span> <span class="toctext">Filtering</span></a></li>
<li class="toclevel-3 tocsection-129"><a href="#Game_paths"><span class="tocnumber">7.20.4</span> <span class="toctext">Game paths</span></a></li>
<li class="toclevel-3 tocsection-130"><a href="#Hash_sets"><span class="tocnumber">7.20.5</span> <span class="toctext">Hash sets</span></a></li>
<li class="toclevel-3 tocsection-131"><a href="#Iteration"><span class="tocnumber">7.20.6</span> <span class="toctext">Iteration</span></a></li>
<li class="toclevel-3 tocsection-132"><a href="#Randomization"><span class="tocnumber">7.20.7</span> <span class="toctext">Randomization</span></a></li>
<li class="toclevel-3 tocsection-133"><a href="#Other"><span class="tocnumber">7.20.8</span> <span class="toctext">Other</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-134"><a href="#Static_delegate_builder"><span class="tocnumber">7.21</span> <span class="toctext">Static delegate builder</span></a></li>
<li class="toclevel-2 tocsection-135"><a href="#Game_logging_changes"><span class="tocnumber">7.22</span> <span class="toctext">Game logging changes</span></a></li>
<li class="toclevel-2 tocsection-136"><a href="#Other_changes"><span class="tocnumber">7.23</span> <span class="toctext">Other changes</span></a>
<ul>
<li class="toclevel-3 tocsection-137"><a href="#Audio"><span class="tocnumber">7.23.1</span> <span class="toctext">Audio</span></a></li>
<li class="toclevel-3 tocsection-138"><a href="#Debug_commands"><span class="tocnumber">7.23.2</span> <span class="toctext">Debug commands</span></a></li>
<li class="toclevel-3 tocsection-139"><a href="#Location_logic"><span class="tocnumber">7.23.3</span> <span class="toctext">Location logic</span></a></li>
<li class="toclevel-3 tocsection-140"><a href="#Menus_.26_UI"><span class="tocnumber">7.23.4</span> <span class="toctext">Menus &amp; UI</span></a></li>
<li class="toclevel-3 tocsection-141"><a href="#Net_fields"><span class="tocnumber">7.23.5</span> <span class="toctext">Net fields</span></a></li>
<li class="toclevel-3 tocsection-142"><a href="#Quests"><span class="tocnumber">7.23.6</span> <span class="toctext">Quests</span></a></li>
<li class="toclevel-3 tocsection-143"><a href="#Dates_.26_seasons"><span class="tocnumber">7.23.7</span> <span class="toctext">Dates &amp; seasons</span></a></li>
<li class="toclevel-3 tocsection-144"><a href="#Time"><span class="tocnumber">7.23.8</span> <span class="toctext">Time</span></a></li>
<li class="toclevel-3 tocsection-145"><a href="#Other_2"><span class="tocnumber">7.23.9</span> <span class="toctext">Other</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-146"><a href="#Breaking_changes_for_C.23_mods"><span class="tocnumber">8</span> <span class="toctext">Breaking changes for C# mods</span></a>
<ul>
<li class="toclevel-2 tocsection-147"><a href="#.NET_6_2"><span class="tocnumber">8.1</span> <span class="toctext">.NET 6</span></a></li>
<li class="toclevel-2 tocsection-148"><a href="#Item_ID_changes"><span class="tocnumber">8.2</span> <span class="toctext">Item ID changes</span></a></li>
<li class="toclevel-2 tocsection-149"><a href="#Other_ID_changes"><span class="tocnumber">8.3</span> <span class="toctext">Other ID changes</span></a></li>
<li class="toclevel-2 tocsection-150"><a href="#Building_and_animal_changes"><span class="tocnumber">8.4</span> <span class="toctext">Building and animal changes</span></a></li>
<li class="toclevel-2 tocsection-151"><a href="#Player_changes"><span class="tocnumber">8.5</span> <span class="toctext">Player changes</span></a></li>
<li class="toclevel-2 tocsection-152"><a href="#Collision_changes"><span class="tocnumber">8.6</span> <span class="toctext">Collision changes</span></a></li>
<li class="toclevel-2 tocsection-153"><a href="#Other_breaking_API_changes"><span class="tocnumber">8.7</span> <span class="toctext">Other breaking API changes</span></a>
<ul>
<li class="toclevel-3 tocsection-154"><a href="#Removed_unused_code"><span class="tocnumber">8.7.1</span> <span class="toctext">Removed unused code</span></a></li>
<li class="toclevel-3 tocsection-155"><a href="#Renamed_classes"><span class="tocnumber">8.7.2</span> <span class="toctext">Renamed classes</span></a></li>
<li class="toclevel-3 tocsection-156"><a href="#Other_API_changes"><span class="tocnumber">8.7.3</span> <span class="toctext">Other API changes</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-157"><a href="#Check_for_obsolete_code"><span class="tocnumber">8.8</span> <span class="toctext">Check for obsolete code</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-158"><a href="#Breaking_changes_for_content_packs"><span class="tocnumber">9</span> <span class="toctext">Breaking changes for content packs</span></a>
<ul>
<li class="toclevel-2 tocsection-159"><a href="#Standardized_ID_fields"><span class="tocnumber">9.1</span> <span class="toctext">Standardized ID fields</span></a></li>
<li class="toclevel-2 tocsection-160"><a href="#Event_ID_changes"><span class="tocnumber">9.2</span> <span class="toctext">Event ID changes</span></a></li>
<li class="toclevel-2 tocsection-161"><a href="#Monster_eradication_goal_flag_changes"><span class="tocnumber">9.3</span> <span class="toctext">Monster eradication goal flag changes</span></a></li>
<li class="toclevel-2 tocsection-162"><a href="#XNB_impact"><span class="tocnumber">9.4</span> <span class="toctext">XNB impact</span></a>
<ul>
<li class="toclevel-3 tocsection-163"><a href="#Overview_2"><span class="tocnumber">9.4.1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-3 tocsection-164"><a href="#Changed_assets"><span class="tocnumber">9.4.2</span> <span class="toctext">Changed assets</span></a></li>
<li class="toclevel-3 tocsection-165"><a href="#Removed_unused_assets"><span class="tocnumber">9.4.3</span> <span class="toctext">Removed unused assets</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-166"><a href="#Vanilla_release_notes"><span class="tocnumber">10</span> <span class="toctext">Vanilla release notes</span></a></li>
<li class="toclevel-1 tocsection-167"><a href="#See_also"><span class="tocnumber">11</span> <span class="toctext">See also</span></a></li>
</ul>
</div>
</div>
</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(1)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span class="mw-headline" id="FAQs">FAQs</span></h2><section class="mf-section-1 collapsible-block" id="mf-section-1">
<h3 class="in-block"><span id="What's_changing?"></span><span class="mw-headline" id="What.27s_changing.3F">What's changing?</span></h3>
<p>Stardew Valley 1.6 makes fundamental changes to the game code to make it more extensible for mods.
</p>
<h3 class="in-block"><span id="Is_this_the_modapocalypse?"></span><span class="mw-headline" id="Is_this_the_modapocalypse.3F">Is this the modapocalypse?</span></h3>
<p>Maybe. The update includes major changes to fundamental parts of the game, and SMAPI and Content Patcher can't feasibly rewrite every older mod for compatibility with some of the changes. This will break many existing mods until they're updated for the changes. However, per discussion between the game developers and modding community, we've agreed that this short-term pain is more than offset by the huge long-term improvements to modding.
</p>
<h3 class="in-block"><span class="mw-headline" id="How_to_update_your_mod">How to update your mod</span></h3>
<p>The rest of this page may seem overwhelming, but fortunately most of it probably doesn't apply to your specific mods. Here's a suggested 'quick start' guide to update a mod for Stardew Valley 1.6.
</p>
<dl><dt>For C# mods:</dt>
<dd>
<ol><li>Update the <a rel="nofollow" class="external text" href="../../external.html?link=https://www.nuget.org/packages/Pathoschild.Stardew.ModBuildConfig">mod build config NuGet package</a> to the latest version.</li>
<li>In each <samp>.csproj</samp> project file, change <code>&lt;TargetFramework&gt;net5.0&lt;/TargetFramework&gt;</code> to <code>&lt;TargetFramework&gt;net6.0&lt;/TargetFramework&gt;</code>.<br><small>(Tip: if the second line looks like <code>&lt;Project ToolsVersion=...</code> instead of <code>&lt;Project Sdk="Microsoft.NET.Sdk"&gt;</code>, you'll need to <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.5.5" title="Modding:Migrate to Stardew Valley 1.5.5">migrate it to Stardew Valley 1.5.5</a> first.)</small></li>
<li>Rebuild the solution.</li>
<li>Fix any build errors. You can search this page for relevant info as needed.</li>
<li>Review all build warnings (particularly obsolete-code warnings), which may indicate code that broke in 1.6.</li>
<li>Increment your mod version in <samp>manifest.json</samp>.<br><small>(Some mods may be added to SMAPI's compatibility blacklist due to runtime errors. Incrementing the mod version will fix that if so.)</small></li>
<li>Test to make sure the mod works.</li>
<li>Skim through <a href="#Breaking_changes_for_C.23_mods"><i>breaking changes for C# mods</i></a> and the table of contents, and check any section that might be relevant to the mod.</li></ol></dd></dl>
<dl><dt>For <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> packs:</dt>
<dd>
<ol><li>Follow the <a rel="nofollow" class="external text" href="../../external.html?link=https://smapi.io/cp-migrate">Content Patcher migration guide</a> until your content pack has <code>"Format": "2.0.0"</code>.<br><small><b>Do not skip this step!</b> Content Patcher will assume your content pack is pre-1.6 if you don't, which can cause confusing errors if you already updated it.</small></li>
<li>Review <a href="#Breaking_changes_for_content_packs"><i>breaking changes for content packs</i></a> and update the content pack as needed.</li></ol></dd></dl>
<dl><dt>For content packs which use another framework:</dt>
<dd>See the documentation for the framework mod. Often you won't need to update the content pack if the framework mod itself was updated.</dd></dl>
</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(2)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span id="What's_new_architecturally?"></span><span class="mw-headline" id="What.27s_new_architecturally.3F">What's new architecturally?</span></h2><section class="mf-section-2 collapsible-block" id="mf-section-2">
<h3 class="in-block"><span class="mw-headline" id=".NET_6">.NET 6</span></h3>
<dl><dd><i>See also: <a href="#.NET_6_2">.NET 6</a> under breaking changes.</i></dd></dl>
<p>For C# mod authors, Stardew Valley 1.6 updates from .NET 5 to .NET 6. See <a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-6"><i>What's new in .NET 6</i></a> and <a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-10"><i>What's new in C# 10</i></a> for more info, but some highlights include...
</p>
<ul><li><a rel="nofollow" class="external text" href="../../external.html?link=https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-6/">improved performance</a>;</li>
<li><a rel="nofollow" class="external text" href="../../external.html?link=https://devblogs.microsoft.com/dotnet/update-on-net-hot-reload-progress-and-visual-studio-2022-highlights/">improved hot reload</a>;</li>
<li><a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-6#new-linq-apis">new LINQ methods</a>;</li>
<li><a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/record">record structs</a>;</li>
<li>and support for ARM64 on macOS.</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Trigger_actions">Trigger actions</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Trigger_actions" title="Modding:Trigger actions">Modding:Trigger actions</a>. This section below focuses on what's new in 1.6.</div>
<p>Trigger actions are a new feature which lets content packs perform an action when something happens, with support for a wide range of actions (like sending mail, changing friendship, starting a quest, etc).
</p><p>For example, it lets you have logic like "<i>When the player arrives in the Farm location, if Leo has moved to the valley, then send a letter and start a conversation topic</i>":
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Trigger"</span><span class="o">:</span> <span class="s2">"LocationChanged"</span><span class="p">,</span>
    <span class="s2">"Location"</span><span class="o">:</span> <span class="s2">"Farm"</span><span class="p">,</span>
    <span class="s2">"Condition"</span><span class="o">:</span> <span class="s2">"PLAYER_HAS_FLAG Host leoMoved"</span><span class="p">,</span>
    <span class="s2">"Actions"</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">"AddMail Current Abigail_LeoMoved Today"</span><span class="p">,</span>
        <span class="s2">"AddConversationTopic LeoMoved 5"</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Hash_set_fields">Hash set fields</span></h3>
<p>For C# mod authors, the game now uses <a rel="nofollow" class="external text" href="../../external.html?link=https://www.bytehide.com/blog/hashset-csharp">hash sets</a> for many list fields which expect unique values. That allows much more efficient O(1) read/write, prevents duplicate values, and simplifies common logic.
</p><p>This affects:
</p>
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>fields
</th></tr>
<tr>
<td><samp>Farmer</samp>
</td>
<td><samp>achievements</samp><br><samp>dialogueQuestionsAnswered</samp><br><samp>eventsSeen</samp><br><samp>mailForTomorrow</samp><br><samp>mailReceived</samp><br><samp>professions</samp><br><samp>secretNotesSeen</samp><br><samp>songsHeard</samp>
</td></tr>
<tr>
<td><samp>FarmerTeam</samp>
</td>
<td><samp>acceptedSpecialOrderTypes</samp><br><samp>broadcastedMail</samp><br><samp>completedSpecialOrders</samp><br><samp>collectedNutTracker</samp>
</td></tr>
<tr>
<td><samp>Game1</samp>
</td>
<td><samp>worldStateIDs</samp>
</td></tr>
<tr>
<td><samp>NetWorldState</samp>
</td>
<td><samp>ActivePassiveFestivals</samp><br><samp>CheckedGarbage</samp><br><samp>FoundBuriedNuts</samp><br><samp>IslandVisitors</samp><br><samp>LocationsWithBuildings</samp>
</td></tr></tbody></table>
<p>Usage is very similar, and many list methods like <samp>Contains</samp> work the same way with hash sets. Here are the main differences:
</p>
<ul>
<li>Hash sets aren't ordered. For example, there's no guarantee that the first value when you enumerate it was the earliest one added.</li>
<li><p>Hash sets can't be indexed. For example, you can no longer use <code>list[0]</code> to get the first value. You can still enumerate them or use LINQ methods like <samp>set.First()</samp>, but in most cases you should use the set methods like <samp>Add</samp> or <samp>Contains</samp> instead.</p>
<p>To remove multiple matching values from the set, you can use <samp>RemoveWhere</samp> instead:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// old code</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Count</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span><span class="p">--)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">"Example.ModId_"</span><span class="p">))</span>
        <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">RemoveAt</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// new code</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">RemoveWhere</span><span class="p">(</span><span class="n">id</span> <span class="p">=&gt;</span> <span class="n">id</span><span class="p">.</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">"Example.ModId_"</span><span class="p">));</span>
</pre></div>
</li>
<li>You no longer need to check before adding a value, since the hash set will ignore duplicates.</li>
<li>The <samp>Add</samp>/<samp>Remove</samp>/<samp>RemoveWhere</samp> methods return whether a value was added/removed, which lets you check at the same time. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"BackpackTip"</span><span class="p">))</span> <span class="c1">// returns true if it wasn't in the set yet</span>
    <span class="n">Game1</span><span class="p">.</span><span class="n">addMailForTomorrow</span><span class="p">(</span><span class="s">"pierreBackpack"</span><span class="p">);</span>
</pre></div>
</li>
</ul>
<h3 class="in-block"><span class="mw-headline" id="DataLoader">DataLoader</span></h3>
<p><samp>DataLoader</samp> is a new C# utility which provides strongly-typed methods to load the game's data assets.
</p><p>This solves an issue where we often needed fragile code like <code>Game1.content.Load&lt;Dictionary&lt;string, PassiveFestivalData&gt;&gt;("Data\\PassiveFestivals")</code>. With that code, it's easy to accidentally misspell the asset name, use different capitalization (which would break on Linux/macOS), or use the wrong return type. If you did, you likely wouldn't notice until the code actually executed at runtime and threw an exception.
</p><p>In Stardew Valley 1.6, you can now rewrite that code like <code>DataLoader.PassiveFestivals(Game1.content)</code>. That's simpler, you can't use the wrong asset name or type, and it's more future-proof in case the game changes them.
</p>
<h3 class="in-block"><span class="mw-headline" id="Unique_string_IDs">Unique string IDs</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">Modding:Common data field types#Unique string ID</a>. This section below focuses on what's new in 1.6.</div>
<p>Stardew Valley now uses <i>unique string IDs</i> throughout the code to identify data (like events, locations, items, NPCs, etc). For example, <code>Town</code> is the unique ID for the <a href="../../external.html?link=https://stardewvalleywiki.com/Pelican_Town" title="Pelican Town">Pelican Town</a> location; no other location can use that ID. The IDs are used for a wide range of purposes, from internal game logic to <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">content pack edits</a>.
</p><p>For mods, it's <b>strongly recommended</b> to...
</p>
<ul><li>Use namespaced IDs prefixed with your <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Manifest#Basic_fields" title="Modding:Modder Guide/APIs/Manifest">mod's unique ID</a> for all new content. For example, if your mod ID is <code>Example.PufferchickMod</code> and you're adding a pufferchick plushy, your item ID would look like <code>Example.PufferchickMod_PufferchickPlushy</code>. In a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher pack</a>, you can use <code>{{ModId}}_PufferchickPlushy</code> to insert your mod ID automatically. This eliminates ID conflicts between mods, and makes it easy (for both troubleshooters and mod code) to identify which mod added a particular content. See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">the new format docs</a> for the recommended format.</li>
<li>Only use alphanumeric (a–z, A–Z, 0–9), underscore (<code>_</code>), and dot (<code>.</code>) characters in string IDs. This is important because they're often used in places where some characters have special meaning (like file names or <a href="#Game_state_queries">game state queries</a>).</li></ul>
<p>You can optionally migrate pre-1.6 content to use unique string IDs too, without breaking existing players' saves. This is recommended to reduce mod conflicts and simplify troubleshooting going forward. Here's how to migrate for each data type:
</p>
<table class="mw-collapsible mw-collapsed" style="">
<tbody><tr>
<th style="text-align: left;"><b>migration steps for pre-1.6 content</b> 
</th></tr>
<tr>
<td> 
<table class="wikitable">

<tbody><tr>
<th>content type
</th>
<th>how to change IDs
</th></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event IDs</a><br><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">item IDs</a><br><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail IDs</a><br><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Recipe_data" title="Modding:Recipe data">recipe IDs</a><br><a href="#Custom_jukebox_tracks">song IDs for jukebox</a>
</td>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> adds a custom <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Trigger_actions" title="Modding:Trigger actions">trigger action</a> which can migrate IDs everywhere in the save data.
<p>For example, this migrates two crafting recipe IDs:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
    <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/TriggerActions"</span><span class="p">,</span>
    <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"{{ModId}}_MigrateToUniqueIds"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"Id"</span><span class="o">:</span> <span class="s2">"{{ModId}}_MigrateToUniqueIds"</span><span class="p">,</span>
            <span class="s2">"Trigger"</span><span class="o">:</span> <span class="s2">"DayStarted"</span><span class="p">,</span>
            <span class="s2">"Actions"</span><span class="o">:</span> <span class="p">[</span>
                <span class="c1">// Note: use double-quotes around an argument if it contains spaces. This example has single-quotes for</span>
                <span class="c1">// the action itself, so we don't need to escape the double-quotes inside it.</span>
                <span class="s1">'Pathoschild.ContentPatcher_MigrateIds CraftingRecipes "Puffer Plush" {{ModId}}_PufferPlush "Puffer Sofa" {{ModId}}_PufferSofa'</span>
            <span class="p">],</span>
            <span class="s2">"HostOnly"</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>See the <a rel="nofollow" class="external text" href="../../external.html?link=https://github.com/Pathoschild/StardewMods/blob/develop/ContentPatcher/docs/author-guide/trigger-actions.md">Content Patcher docs</a> for more info about using the trigger action, including restrictions and valid ID types.
</p>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Location_data" title="Modding:Location data">location IDs</a>
</td>
<td>Add the old name to the location's <samp>FormerLocationNames</samp> field in <samp>Data/Locations</samp>.
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:NPC_data" title="Modding:NPC data">NPC internal names</a>
</td>
<td>Add the old name to the NPC's <samp>FormerCharacterNames</samp> field in <samp>Data/Characters</samp>.
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Quest_data" title="Modding:Quest data">quest</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Special_orders" title="Modding:Special orders">special order</a> IDs
</td>
<td>Currently there's no safe way to migrate quest and special order IDs, since removing and readding them will reset any progress the player has made on them.
</td></tr></tbody></table>
</td></tr></tbody></table>
</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(3)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span id="What's_new_for_items"></span><span class="mw-headline" id="What.27s_new_for_items">What's new for items</span></h2><section class="mf-section-3 collapsible-block" id="mf-section-3">
<h3 class="in-block"><span class="mw-headline" id="Custom_items">Custom items</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">Modding:Items</a>. This section below focuses on what's new in 1.6.</div>
<h4 class="in-block"><span class="mw-headline" id="Overview">Overview</span></h4>
<p>Stardew Valley 1.6 makes three major changes to how items work in the game:
</p>
<ol><li>Each item now has a string ID (<samp>ItemId</samp>) and a globally unique string ID (<samp>QualifiedItemId</samp>). The <samp>QualifiedItemId</samp> is auto-generated by prefixing the <samp>ItemId</samp> with the item type identifier.<p>For legacy reasons, the <samp>ItemId</samp> for vanilla items may not be globally unique. For example, Pufferfish (object 128) and Mushroom Box (bigcraftable 128) both have <samp>ItemId: 128</samp>. They can be distinguished by their <samp>QualifiedItemId</samp>, which are <samp>(O)128</samp> and <samp>(BC)128</samp> respectively.</p></li>
<li>Each item type now has an <i>item data definition</i> in the game code which tells the game how to handle it. <a href="#For_C.23_mods">C# mods can add or edit definitions</a>. Each definition has a unique prefix which is used in the qualified item IDs. The vanilla types are bigcraftables (<samp>(BC)</samp>), boots (<samp>(B)</samp>), farmhouse flooring (<samp>(FL)</samp>), furniture (<samp>(F)</samp>), hats (<samp>(H)</samp>), objects (<samp>(O)</samp>), pants (<samp>(P)</samp>), shirts (<samp>(S)</samp>), tools (<samp>(T)</samp>), wallpaper (<samp>(WP)</samp>), and weapons (<samp>(W)</samp>).</li>
<li>Custom items can now provide their own item texture, specified in a new field in the item data assets (see below). The item's <samp>ParentSheetIndex</samp> field is the index within that texture.</li></ol>
<p>In other words, the four important fields for items are:
</p>
<table class="wikitable">

<tbody><tr>
<th>name
</th>
<th>type
</th>
<th>description
</th></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td><samp>string</samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this item which should be globally unique (but may not be for existing vanilla items for backwards compatibility). For example, <samp>128</samp> (vanilla item) or <samp>Example.ModId_Watermelon</samp> (custom item).
</td></tr>
<tr>
<td><samp>QualifiedItemId</samp>
</td>
<td><samp>string</samp>
</td>
<td>A globally unique item key, like <samp>(O)128</samp> for a vanilla item or <samp>(O)Example.ModId_Watermelon</samp> for a custom one. This is auto-generated from the <samp>TypeDefinitionId</samp> and <samp>ItemId</samp> fields.
</td></tr>
<tr>
<td><samp>ParentSheetIndex</samp>
</td>
<td><samp>int</samp>
</td>
<td>The item's sprite index within its spritesheet.
</td></tr>
<tr>
<td><samp>TypeDefinitionId</samp>
</td>
<td><samp>string</samp>
</td>
<td>The ID for the data definition which defines the item, like <samp>(O)</samp> for an object. You can use <samp>ItemRegistry.type_*</samp> constants with this field:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">TypeDefinitionId</span> <span class="p">==</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">type_object</span><span class="p">)</span>
   <span class="p">...</span>
</pre></div>
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Item_references">Item references</span></h4>
<p>Item references throughout the game code now use the <samp>ItemId</samp> instead of the <samp>ParentSheetIndex</samp>. Since the <samp>ItemId</samp> is identical to the index for existing vanilla items, most data assets are unaffected by this change. For example, here's from <samp>Data/NPCGiftTastes</samp> with one custom item:
</p>
<div class="mw-highlight mw-highlight-lang-json mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"Universal_Like"</span><span class="err">:</span> <span class="s2">"-2 -7 -26 -75 -80 72 395 613 634 635 636 637 638 724 459 Example.ModID_watermelon"</span>
</pre></div>
<p>Unless otherwise noted, unqualified item IDs will produce <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">objects</a>. Some assets let you override that by specifying a <samp>QualifiedItemId</samp> value instead. For example, you can add <code>(O)128</code> to the gift taste list to explicitly add for an object. Here's a partial list of data assets and their supported item ID formats:
</p>
<table class="wikitable">

<tbody><tr>
<th>data asset
</th>
<th>item ID format
</th></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Recipe_data" title="Modding:Recipe data"><samp>Data/CraftingRecipes</samp><br><samp>Data/CookingRecipes</samp></a>
</td>
<td> 
<ul><li>Ingredients: both supported.</li>
<li>Output: set field 2 to the unqualified item ID, and field 3 to one of <samp>true</samp> (bigcraftable) or <samp>false</samp> (object).</li></ul>
</td></tr>
<tr>
<td><a href="#Custom_fruit_trees"><samp>Data/fruitTrees</samp></a>
</td>
<td> 
<ul><li>Fruit: both supported.</li>
<li>Sapling: unqualified only.</li></ul>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Gift_taste_data" title="Modding:Gift taste data"><samp>Data/NPCGiftTastes</samp></a>
</td>
<td>Both supported, but only <samp>(O)</samp> items can be gifted.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Item_types">Item types</span></h4>
<p>These are the item types for which custom items can added/edited:
</p>
<table class="wikitable">

<tbody><tr>
<th>item type
</th>
<th>type identifier
</th>
<th>data asset
</th></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">big craftables</a>
</td>
<td><samp>(BC)</samp>
</td>
<td><samp>Data/BigCraftables</samp><br><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The default texture is <samp>TileSheets/Craftables</samp>.</small>
</td></tr>
<tr>
<td>boots
</td>
<td><samp>(B)</samp>
</td>
<td><samp>Data/Boots</samp><br><small>Each item can set a custom texture name in fields 9 (item) and 7 (shoe color), and sprite index in fields 8 (item) and 5 (shoe color). The default textures are <samp>Maps/springobjects</samp> (item) and <samp>Characters/Farmer/shoeColors</samp> (shoe color).</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Crop_data" title="Modding:Crop data">crops</a>
</td>
<td><small><i>not technically an item type</i></small>
</td>
<td><samp>Data/Crops</samp><br><small>Each crop can set a custom texture name and sprite index. The default texture is <samp>TileSheets/crops</samp>.</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fish_data" title="Modding:Fish data">fish (in fish tanks)</a>
</td>
<td><small><i>not technically an item type</i></small>
</td>
<td><samp>Data/AquariumFish</samp><br><small>Each fish can set a custom aquarium texture name in field 6, and sprite index in field 0. The default texture is <samp>LooseSprites/AquariumFish</samp>.</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">furniture</a>
</td>
<td><samp>(F)</samp>
</td>
<td><samp>Data/Furniture</samp><br><small>Each item can set a custom texture name in field 9, and sprite index in field 8. The default texture is <samp>TileSheets/furniture</samp>.</small>
</td></tr>
<tr>
<td>fruit trees
</td>
<td><small><i>not technically an item type</i></small>
</td>
<td><samp>Data/FruitTrees</samp><br><small>Each fruit tree can set a custom texture name and sprite index. The default texture is <samp>TileSheets/fruitTrees</samp>.</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">hats</a>
</td>
<td><samp>(H)</samp>
</td>
<td><samp>Data/Hats</samp><br><small>Each item can set a custom texture name in field 7, and sprite index in field 6. The default texture is <samp>Characters/Farmer/hats</samp>.</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">objects</a>
</td>
<td><samp>(O)</samp>
</td>
<td><samp>Data/Objects</samp><br><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The default texture is <samp>Maps/springobjects</samp>.</small>
</td></tr>
<tr>
<td><a href="#Custom_pants">pants</a>
</td>
<td><samp>(P)</samp>
</td>
<td><samp>Data/pantsData</samp><br><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The default texture is <samp>Characters/Farmer/pants</samp>.</small>
</td></tr>
<tr>
<td><a href="#Custom_shirts">shirts</a>
</td>
<td><samp>(S)</samp>
</td>
<td><samp>Data/shirtData</samp><br><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The default texture is <samp>Characters/Farmer/shirts</samp>.</small>
<p><small>Shirt textures must be exactly 256 pixels wide, divided into two halves: the left half for the shirt sprites, and the right half for any dye masks. The remaining space can be left blank if needed.</small>
</p>
<pre>      sprites       dye masks
   /-----------\  /-----------\
┌────────────────────────────────┐
│ ┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐ │
│ │ 0 ││ 1 ││ 2 ││ a ││ b ││ c │ │
│ └───┘└───┘└───┘└───┘└───┘└───┘ │
│ ┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐ │
│ │ 3 ││ 4 ││ 5 ││ d ││ e ││ f │ │
│ └───┘└───┘└───┘└───┘└───┘└───┘ │
└────────────────────────────────┘
</pre>
</td></tr>
<tr>
<td><a href="#Custom_tools">tools</a>
</td>
<td><samp>(T)</samp>
</td>
<td><samp>Data/Tools</samp><br><small>Each item can set a custom texture name in the <samp>Texture</samp> field, and sprite index in the <samp>SpriteIndex</samp> field. The vanilla tools use the <samp>TileSheets/Tools</samp> texture.</small>
</td></tr>
<tr>
<td>Wallpaper &amp; floorpaper
</td>
<td><samp>(WP)</samp> and <samp>(FL)</samp>
</td>
<td><samp>Data/AdditionalWallpaperFlooring</samp><br><small>See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.5.5#In_the_furniture_catalogue" title="Modding:Migrate to Stardew Valley 1.5.5">format docs</a>.</small>
</td></tr>
<tr>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">weapons</a>
</td>
<td><samp>(W)</samp>
</td>
<td><samp>Data/Weapons</samp><br><small><a href="#Custom_melee_weapons">Completely overhauled</a> into a data model.</small>
</td></tr></tbody></table>
<p>When resolving an unqualified item ID like <samp>128</samp>, the game will get the first item type for which it exists in this order: object, big craftable, furniture, weapon, boots, hat, pants, shirt, tool, wallpaper, and floorpaper.
</p>
<h4 class="in-block"><span class="mw-headline" id="Define_a_custom_item">Define a custom item</span></h4>
<p>You can define custom items for most vanilla item types using only <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Content" title="Modding:Modder Guide/APIs/Content">SMAPI's content API</a>.
</p><p>Most item data assets work just like <samp>Data/Objects</samp>. See also specific info for <a href="#Custom_fruit_trees">custom fruit trees</a>, <a href="#Custom_tools">custom tools</a>, and <a href="#Custom_melee_weapon_data">melee weapons</a>.
</p>
<h4 class="in-block"><span class="mw-headline" id="Error_items">Error items</span></h4>
<p>In-game items with no underlying data (e.g. because you removed the mod which adds them) would previously cause issues like invisible items, errors, and crashes. This was partly mitigated by the bundled Error Handler mod.
</p><p>Stardew Valley 1.6 adds comprehensive handling for such items. They'll be shown with a <samp>🛇</samp> sprite in inventory UIs and in-game, the name Error Item, and a description which indicates the missing item ID for troubleshooting.
</p>
<h4 class="in-block"><span id="For_C#_mods"></span><span class="mw-headline" id="For_C.23_mods">For C# mods</span></h4>
<p>Stardew Valley 1.6 added new ways to compare/construct items, define custom item types, and work with item metadata. Please see <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items" title="Modding:Items">Modding:Items</a> for the migrated docs.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_big_craftables">Custom big craftables</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Big_craftables" title="Modding:Items">Modding:Items#Big craftables</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now create/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Big_craftables" title="Modding:Items">big craftables</a> by editing the new <samp>Data/BigCraftables</samp> asset, which replaces the previous slash-delimited <samp>Data/BigCraftablesInformation</samp>.
</p><p>Besides the format change, this adds...
</p>
<ul><li>context tags (moved from the former <samp>Data/ObjectContextTags</samp> asset);</li>
<li><a href="#Custom_data_fields">custom fields</a> to let framework mods support additional features.</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Custom_crops">Custom crops</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Crop_data" title="Modding:Crop data">Modding:Crop data</a>. This section below focuses on what's new in 1.6.</div>
<p><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Crop_data" title="Modding:Crop data">Crops</a> are still stored in <samp>Data/Crops</samp>, but that asset has been overhauled in Stardew Valley 1.6. The slash-delimited entries are now models to simplify edits and enable new features.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_fences">Custom fences</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fences" title="Modding:Fences">Modding:Fences</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now add or customize <a href="../../external.html?link=https://stardewvalleywiki.com/Crafting#Fences" title="Crafting">fences</a> by editing the <samp>Data/Fences</samp> asset.
</p>
<h3 class="in-block"><span id="Custom_floors_(craftable)_&amp;_paths"></span><span class="mw-headline" id="Custom_floors_.28craftable.29_.26_paths">Custom floors (craftable) &amp; paths</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Floors_and_Paths" title="Modding:Floors and Paths">Modding:Floors and Paths</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now add or customize <a href="../../external.html?link=https://stardewvalleywiki.com/Crafting#Decor" title="Crafting">craftable floors &amp; paths</a> by editing the <samp>Data/FloorsAndPaths</samp> asset. See the new doc page for formatting information.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_machines">Custom machines</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Machines" title="Modding:Machines">Modding:Machines</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now add/edit machine logic by editing the <samp>Data/Machines</samp> asset. This supports the full range of vanilla functionality, including calling custom code define in C# mods.
</p><p>For C# mods, 1.6 also adds a new <samp>MachineDataUtility</samp> class and various <samp>Object</samp> to simplify working with machines in code. These are used by the game code itself to implement the base machine logic.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_melee_weapons">Custom melee weapons</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Weapons" title="Modding:Items">Modding:Items#Weapons</a>. This section below focuses on what's new in 1.6.</div>
<p><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Weapons" title="Modding:Items">Melee weapons</a> are still stored in <samp>Data/Weapons</samp>, but that asset has been overhauled in Stardew Valley 1.6. The slash-delimited entries are now models to simplify edits and enable new features (like the new <samp>Projectiles</samp> feature).
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_movie_concessions">Custom movie concessions</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Movie_theater_data" title="Modding:Movie theater data">Modding:Movie theater data</a>. This section below focuses on what's new in 1.6.</div>
<dl><dd><i>See also: <a href="#Custom_movies">custom movies</a>.</i></dd></dl>
<p>You could already <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Movie_theater_data#Concession_data" title="Modding:Movie theater data">add/edit concessions</a> sold in the <a href="../../external.html?link=https://stardewvalleywiki.com/Movie_Theater" title="Movie Theater">movie theater</a>, but conflicts were likely since each concession had an incrementing numeric ID which matched its position in the vanilla tilesheet.
</p><p>Stardew Valley 1.6 addresses that with two changes:
</p>
<ul>
<li>The <samp>Id</samp> field is now a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a>.</li>
<li>You can now use a different texture with two new required fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture containing the concession's sprite.
</td></tr>
<tr>
<td><samp>SpriteIndex</samp>
</td>
<td>The index within the <samp>Texture</samp> for the concession sprite, where 0 is the top-left sprite.
</td></tr></tbody></table>
</li>
</ul>
<h3 class="in-block"><span id="Custom_museum_donations_&amp;_rewards"></span><span class="mw-headline" id="Custom_museum_donations_.26_rewards">Custom museum donations &amp; rewards</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Museum" title="Modding:Museum">Modding:Museum</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now add/edit the items which the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a> gives back in rewards through the new <samp>Data/MuseumRewards</samp> data asset.
</p><p>The <i>A Complete Collection</i> <a href="../../external.html?link=https://stardewvalleywiki.com/Achievements" title="Achievements">achievement</a> is automatically adjusted to require any custom donations added too. This is based on the number of donated items though, so removing custom donations later may incorrectly mark the museum complete (since you may have donated enough items to meet the total required).
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_fruit_trees">Custom fruit trees</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fruit_trees" title="Modding:Fruit trees">Modding:Fruit trees</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now add custom <a href="../../external.html?link=https://stardewvalleywiki.com/Fruit_Trees" title="Fruit Trees">fruit trees</a> by editing the revamped <samp>Data/FruitTrees</samp> asset.
</p><p>For C# mods, the <samp>fruitsOnTree</samp> field (number of fruit on the tree) has been replaced by <samp>fruit</samp> (list of fruit items).
</p><p>Custom trees can be added to the game in two ways:
</p>
<ul><li>Spawn them on <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map tiles</a> when the location is created, using the new <samp>SpawnTree: fruit <code title="required field 'tree ID'">&lt;tree ID&gt;</code> <code title="optional field 'growth stage on location created'">[growth stage on location created]</code> <code title="optional field 'growth stage on day-update regrowth'">[growth stage on day-update regrowth]</code></samp> tile property. This must be added on the <samp>Paths</samp> layer, which must also have tile index 34 from the <samp>paths</samp> tilesheet.</li>
<li>Or give the player a seed item in the usual ways (e.g. from <a href="#Custom_shops">a shop</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail letter</a>, etc).</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Custom_objects">Custom objects</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Objects" title="Modding:Items">Modding:Items#Objects</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now create/edit objects (the main item type) by editing the new <samp>Data/Objects</samp> asset, which replaces the previous slash-delimited <samp>Data/objectInformation</samp>.
</p><p>Besides the format change, this adds...
</p>
<ul><li>support for custom textures;</li>
<li>revamped geode drops with support for conditions, probabilities, and item queries;</li>
<li>expanded food/drink buffs (e.g. set a custom buff ID, add a custom buff icon, etc);</li>
<li>context tags (moved from the former <samp>Data/ObjectContextTags</samp> asset);</li>
<li><a href="#Custom_data_fields">custom fields</a> to let framework mods support additional features.</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Custom_pants">Custom pants</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Pants" title="Modding:Items">Modding:Items#Pants</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now create/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Tailoring#Pants" title="Tailoring">pants</a> by editing the new <samp>Data/Pants</samp> asset, which replaces <samp>Data/clothingInformation</samp>.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_shirts">Custom shirts</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Shirts" title="Modding:Items">Modding:Items#Shirts</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now create/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Tailoring#Shirts" title="Tailoring">shirts</a> by editing the new <samp>Data/Shirts</samp> asset, which replaces <samp>Data/clothingInformation</samp>.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_tools">Custom tools</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Tools" title="Modding:Items">Modding:Items#Tools</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now create/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Tools" title="Tools">tools</a> by editing the new <samp>Data/Tools</samp> asset. Note that drawing the tool correctly in the world (ie, while the player is trying to use it) probably still needs custom code.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_wild_trees">Custom wild trees</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Wild_trees" title="Modding:Wild trees">Modding:Wild trees</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now create/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Trees" title="Trees">wild trees</a> by editing the <samp>Data/WildTrees</samp> asset.
</p><p>Custom trees can be added to the game in two ways:
</p>
<ul><li>Spawn them on <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map tiles</a> when the location is created, using the new <samp>SpawnTree: wild <code title="required field 'tree ID'">&lt;tree ID&gt;</code> <code title="optional field 'growth stage on location created'">[growth stage on location created]</code> <code title="optional field 'growth stage on day-update regrowth'">[growth stage on day-update regrowth]</code></samp> tile property. This must be added on the <samp>Paths</samp> layer, which must also have tile index 34 from the <samp>paths</samp> tilesheet.</li>
<li>Or give the player a seed item in the usual ways (e.g. from <a href="#Custom_shops">a shop</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail letter</a>, etc).</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Default_recipes">Default recipes</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Recipe_data" title="Modding:Recipe data">Modding:Recipe data</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now have <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Recipe_data" title="Modding:Recipe data">crafting and cooking recipes</a> that are learned automatically by setting the condition field to <samp>default</samp>. Any missing default recipes will be learned on day start.
</p><p>For example, here's the chest entry from <samp>Data/CraftingRecipes</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"Chest"</span><span class="o">:</span> <span class="s2">"388 50/Home/130/true/default/"</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Global_inventories">Global inventories</span></h3>
<p>C# mods can now set a <samp>chest.GlobalInventoryId</samp> field to make it share a global inventory with every other chest having the same ID. This replaces the equivalent hardcoded logic for <a href="../../external.html?link=https://stardewvalleywiki.com/Junimo_Chest" title="Junimo Chest">Junimo chests</a>, which now just default to a <samp>"JunimoChests"</samp> global inventory ID. For example, this can be used to have multiple Junimo chest networks or make other containers share inventory.
</p><p>C# mods can also use this to store items for other mod purposes, by using <samp>Game1.player.team.globalInventories</samp> or <samp>Game1.player.team.GetOrCreateGlobalInventory(id)</samp> directly.
</p>
<h3 class="in-block"><span class="mw-headline" id="Hats_on_aquarium_fish">Hats on aquarium fish</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fish_data" title="Modding:Fish data">Modding:Fish data</a>. This section below focuses on what's new in 1.6.</div>
<p>Custom <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fish_data" title="Modding:Fish data">fish in aquariums</a> can now wear <a href="../../external.html?link=https://stardewvalleywiki.com/Hats" title="Hats">hats</a>, just like vanilla <a href="../../external.html?link=https://stardewvalleywiki.com/Sea_Urchin" title="Sea Urchin">sea urchins</a>. This can be enabled by specifying a new field in <samp>Data/AquariumFish</samp>:
</p>
<table class="wikitable">

<tbody><tr>
<th>index
</th>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td>7
</td>
<td>hat position
</td>
<td>The pixel position of the hat on the sprite, specified as an object with <samp>X</samp> and <samp>Y</samp> values.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Context_tag_changes">Context tag changes</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">Modding:Items#Context tags</a>. This section below focuses on what's new in 1.6.</div>
<h4 class="in-block"><span class="mw-headline" id="New_context_tags">New context tags</span></h4>
<p>1.6 adds several new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">item context tags</a>:
</p>
<table class="wikitable">

<tbody><tr>
<th>context tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>campfire_item</samp>
</td>
<td>Marks the item as a <a href="../../external.html?link=https://stardewvalleywiki.com/Campfire" title="Campfire">campfire</a>. If the item also has the <samp>torch_item</samp> context tag, when it's placed in the world and turned on...
<ul><li>campfire flames are drawn over it;</li>
<li>if the item is <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Big_craftables" title="Modding:Items">big craftable</a>, light is emitted from its center instead of the top.</li></ul>
</td></tr>
<tr>
<td><samp>fish_pond_ignore</samp>
</td>
<td>Prevents players from adding this fish to <a href="../../external.html?link=https://stardewvalleywiki.com/Fish_Pond" title="Fish Pond">fish ponds</a>, even if it would otherwise match an entry in <samp>Data/FishPondData</samp>.
</td></tr>
<tr>
<td><samp>geode_crusher_ignored</samp>
</td>
<td>Prevents breaking this item open in a <a href="../../external.html?link=https://stardewvalleywiki.com/Geode_Crusher" title="Geode Crusher">geode crusher</a>, even if the item has geode fields in <a href="#Custom_objects"><samp>Data/Objects</samp></a>.
</td></tr>
<tr>
<td><samp>item_type_<code title="required field 'type'">&lt;type&gt;</code></samp>
</td>
<td>For an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Objects" title="Modding:Items">object-type item</a>, the type value from the 'type and category' field. (Non-object items always have the exact tag <samp>item_type_</samp> with nothing after the last underscore.) This is automatic and shouldn't be set manually. The tag is checked in a few places (<i>e.g.</i> the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a> to check if an item is an artifact or mineral), but most of the game won't be affected.
</td></tr>
<tr>
<td><samp>museum_donatable</samp><br><samp>not_museum_donatable</samp>
</td>
<td>Set whether the item can be donated to the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a>, overriding the vanilla logic.
</td></tr>
<tr>
<td><samp>not_giftable</samp>
</td>
<td>Prevents players from gifting this item to NPCs, who'll ignore the item entirely (e.g. as if you were holding a tool).
<p>This only affects gift-giving, it doesn't affect non-gift logic like quest goals or special order objectives. If the NPC also has a <samp>reject_*</samp> dialogue for the item, the dialogue takes priority.
</p>
</td></tr>
<tr>
<td><samp>not_placeable</samp><br><samp>placeable</samp>
</td>
<td>Sets whether the item can be placed on the ground.
</td></tr>
<tr>
<td><samp>prevent_loss_on_death</samp>
</td>
<td>Indicates the item can't be <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild#Item_Recovery_Service" title="Adventurer's Guild">lost when the player dies</a>.
</td></tr>
<tr>
<td><samp>sign_item</samp>
</td>
<td>Marks the item as a <a href="../../external.html?link=https://stardewvalleywiki.com/Crafting#Signs" title="Crafting">sign</a>, which lets player display items on it or place it on a <a href="../../external.html?link=https://stardewvalleywiki.com/Fish_Pond" title="Fish Pond">fish pond</a> to show the fish count.
</td></tr>
<tr>
<td><samp>torch_item</samp>
</td>
<td>Marks the item as a <a href="../../external.html?link=https://stardewvalleywiki.com/Torch" title="Torch">torch</a>, which lets the player turn it on/off to emit light.
<p>See also <samp>campfire_item</samp>.
</p>
</td></tr></tbody></table>
<p>Context tags which affect <a href="#Custom_machines">machine processing</a>:
</p>
<table class="wikitable">

<tbody><tr>
<th>context tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>crystalarium_banned</samp>
</td>
<td>When applied to a gem or mineral item, prevents players from placing it in a <a href="../../external.html?link=https://stardewvalleywiki.com/Crystalarium" title="Crystalarium">crystalarium</a>.
</td></tr>
<tr>
<td><samp>keg_juice</samp><br><samp>keg_wine</samp>
</td>
<td>Allows processing the item in a <a href="../../external.html?link=https://stardewvalleywiki.com/Keg" title="Keg">keg</a> to produce a juice or wine variant.
</td></tr>
<tr>
<td><samp>preserves_jelly</samp><br><samp>preserves_pickle</samp>
</td>
<td>Allows processing the item in a <a href="../../external.html?link=https://stardewvalleywiki.com/Preserves_Jar" title="Preserves Jar">preserves jar</a> to produce a jelly or pickled variant.
</td></tr>
<tr>
<td><samp>seedmaker_banned</samp>
</td>
<td>When applied to a seed item, prevents players from placing it in a <a href="../../external.html?link=https://stardewvalleywiki.com/Seed_Maker" title="Seed Maker">seed maker</a>.
</td></tr>
<tr>
<td><samp>tapper_item</samp>
</td>
<td>Marks the item as a <a href="../../external.html?link=https://stardewvalleywiki.com/Tapper" title="Tapper">tapper</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Heavy_Tapper" title="Heavy Tapper">heavy tapper</a>.
</td></tr>
<tr>
<td><samp>tapper_multiplier_<code title="required field 'multiplier'">&lt;multiplier&gt;</code></samp>
</td>
<td>The multiplier applied to the tapper production speed. For example, <samp>2</samp> will make items take half their base time (<i>i.e.</i> each item will finish in <sup>base time</sup>/<sub>speed multiplier</sub>). Defaults to 1 if omitted.
</td></tr></tbody></table>
<p>And informational tags which have no effect on the game logic:
</p>
<table class="wikitable">

<tbody><tr>
<th>context tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>fish_legendary</samp><br><samp>fish_legendary_family</samp>
</td>
<td>Marks the fish as a <a href="../../external.html?link=https://stardewvalleywiki.com/Fish#Legendary_Fish" title="Fish">legendary fish</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Quests#Extended_Family" title="Quests">legendary fish family</a>. These are purely informational; the legendary fish behavior is determined by data fields like <samp>CatchLimit</samp> or <samp>IsBossFish</samp> in <a href="#Custom_locations"><samp>Data/Locations</samp></a>.
</td></tr>
<tr>
<td><samp>geode</samp>
</td>
<td><i>(Added automatically)</i> Marks the item as a <a href="../../external.html?link=https://stardewvalleywiki.com/Minerals#Geodes" title="Minerals">geode</a> item, which can be broken open at <a href="../../external.html?link=https://stardewvalleywiki.com/Blacksmith" title="Blacksmith">Clint's blacksmith shop</a> or using a <a href="../../external.html?link=https://stardewvalleywiki.com/Geode_Crusher" title="Geode Crusher">geode crusher</a>. This is added automatically if the geode fields are present in <a href="#Custom_objects"><samp>Data/Objects</samp></a>.
</td></tr>
<tr>
<td><samp>id_<code title="required field 'item id'">&lt;item id&gt;</code></samp>
</td>
<td><i>(Added automatically)</i> The <a href="#Custom_items">qualified item ID</a>, like <samp>id_(o)128</samp>. This can be used to match or exclude an item by ID using context tags. Any spaces in the ID are replaced with underscores, and single quotes are removed.
</td></tr>
<tr>
<td><samp>is_machine</samp>
</td>
<td><i>(Added automatically)</i> Indicates the item has <a href="#Custom_machines">machine logic</a>. This is added automatically based on <samp>Data/Machines</samp>.
</td></tr>
<tr>
<td><samp>machine_input</samp>
</td>
<td><i>(Added automatically)</i> Whether the item is a machine which accepts items from the player. This is added automatically based on the machine's fields in <samp>Data/Machines</samp>:
<ul><li>if <samp>HasInput</samp> is true;</li>
<li><i>or</i> if any output rules have an <samp>ItemPlacedInMachine</samp> trigger.</li></ul>
</td></tr>
<tr>
<td><samp>machine_output</samp>
</td>
<td><i>(Added automatically)</i> Whether the item is a machine which produces items for the player to collect. This is added automatically based on the machine's fields in <samp>Data/Machines</samp>:
<ul><li>if <samp>HasOutput</samp> is true;</li>
<li><i>or</i> if it has any output rules.</li></ul>
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="ItemContextTagManager_class">ItemContextTagManager class</span></h4>
<p>For C# mods, 1.6 adds a new <samp>ItemContextTagManager</samp> class which simplifies working with <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">item context tags</a> and reduces repeated code.
</p><p>This provides a few utility methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><code>GetBaseContextTags(id)</code>
</td>
<td>Get the base context tags for an item based on its raw data in <samp>Data/Objects</samp> or <samp>Data/BigCraftables</samp>. This doesn't include dynamic tags added that are based on instance info (like quality), which you can get using <code>item.GetContextTags()</code>.
</td></tr>
<tr>
<td><code>DoesTagQueryMatch(query, tags)</code>
</td>
<td>Get whether a context tag query matches the given tags. For example, <code>ItemContextTagManager.DoesTagQueryMatch("bone_item, !fossil_item", item.GetContextTags())</code> returns true if the item is a bone item but not a fossil (like the <a href="../../external.html?link=https://stardewvalleywiki.com/Bone_Flute" title="Bone Flute">Bone Flute</a>).
</td></tr>
<tr>
<td><code>DoAllTagsMatch(requiredTags, actualTags)</code><br><code>DoAnyTagsMatch(requiredTags, actualTags)</code>
</td>
<td>Get whether every (<samp>DoAllTagsMatch</samp>) or at least one (<samp>DoAnyTagsMatch&lt;/samp) required tag matches the actual item tags. This supports negated required tags like <samp>"!fossil_item"</samp> too.
</samp></td></tr>
<tr>
<td><code>DoesTagMatch(requiredTag, actualTags)</code>
</td>
<td>Get whether a single tag matches the actual item tags. This supports negated required tags like <samp>"!fossil_item"</samp> too.
</td></tr>
<tr>
<td><code>SanitizeContextTag(tag)</code>
</td>
<td><i>(Specialized)</i> Replace characters that may appear in item names so they're valid in context tags. For example, <code>SanitizeContextTag("Sam's Boombox")</code> returns <samp>sams_boombox</samp>.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Other_context_tag_changes">Other context tag changes</span></h4>
<ul><li>Context tags are now case-insensitive.</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Inventory_class">Inventory class</span></h3>
<p>For C# mods, 1.6 adds a new <samp>Inventory</samp> class to manage a list of items. This is used for the <samp>Farmer.items</samp> and <samp>Chest.items</samp> fields. It implements <samp>IList&lt;Item&gt;</samp>, so most existing code should still work fine.
</p><p>This has three main benefits:
</p>
<ul>
<li>It has methods to simplify many common operations. For example:
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><code>HasAny()</code>
</td>
<td>Get whether the inventory contains any items (ignoring empty slots).
</td></tr>
<tr>
<td><code>CountItemStacks()</code>
</td>
<td>Get the number of item stacks in the inventory (ignoring empty slots).
</td></tr>
<tr>
<td><code>ContainsId(id)</code>
</td>
<td>Get whether the inventory contains any item with the given qualified or unqualified item ID.
</td></tr>
<tr>
<td><code>ContainsId(id, minCount)</code>
</td>
<td>Get whether the inventory contains items with the given qualified or unqualified item ID, and their combined stack size is at least <samp>minCount</samp>.
</td></tr>
<tr>
<td><code>CountId(id)</code>
</td>
<td>Get the combined stack size of all items with the given qualified or unqualified item ID.
</td></tr>
<tr>
<td><code>GetById(id)</code>
</td>
<td>Get a list of items in the inventory with the given qualified or unqualified item ID.
</td></tr>
<tr>
<td><code>ReduceId(id, count)</code>
</td>
<td>Remove the given number of items matching the given qualified or unqualified item ID. This reduces the stack size for matching items until a total of <samp>count</samp> have been removed, and clears any slots which reach a stack size of zero.
</td></tr></tbody></table></li>
<li>Many common operations have been unified, so previously player-only methods can now be used with chests too.</li>
<li>It has an internal index by item ID, so operations like <code>items.ContainsId("(O)128")</code> are much more efficient since they no longer iterate the list.</li>
</ul>
<p>This replaces some previous methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>game class
</th>
<th>old code
</th>
<th>migration
</th></tr>
<tr>
<td rowspan="6"><samp>Farmer</samp>
</td>
<td><code>getItemCount(id)</code><br><code>GetTallyOfObject(id)</code><br><code>GetTallyOfObject(id, isBigCraftable)</code><br><code>hasItemInInventory(id, count)</code><br><code>hasItemInList(list, id, count)</code>
</td>
<td> 
<ul><li>To check an item ID, use <code>items.CountId(id)</code> or <code>Items.ContainsId(id, count)</code>.</li>
<li>To check Golden Walnuts or Qi Gems, use the <samp>Game1.netWorldState.Value.GoldenWalnuts</samp> and <samp>Farmer.QiGems</samp> fields.</li>
<li>To check category matches or <samp>-777</samp> (seasonal wild seeds), the <samp>getItemCount</samp> and <samp>getItemCountInList</samp> still exist.</li></ul>
</td></tr>
<tr>
<td><code>hasItemInInventoryNamed(name)</code><br><code>hasItemWithNameThatContains(name)</code>
</td>
<td>In most cases, you should match items by ID instead (see the previous row).
<p>If you really need to match items by name, you can replace it like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// exact name</span>
<span class="kt">bool</span> <span class="n">hasMatch</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">Any</span><span class="p">(</span><span class="n">item</span> <span class="p">=&gt;</span> <span class="n">item</span><span class="p">?.</span><span class="n">Name</span> <span class="p">==</span> <span class="n">name</span><span class="p">);</span>

<span class="c1">// name contains</span>
<span class="kt">bool</span> <span class="n">hasMatch</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">Any</span><span class="p">(</span><span class="n">item</span> <span class="p">=&gt;</span> <span class="n">item</span><span class="p">?.</span><span class="n">Name</span><span class="p">?.</span><span class="n">Contains</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">is</span> <span class="k">true</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><code>areAllItemsNull()</code>
</td>
<td>Use <code>!items.HasAny()</code>.
</td></tr>
<tr>
<td><code>numberOfItemsInInventory()</code>
</td>
<td>Use <code>items.CountItemStacks()</code> to count all items, or <code>Items.Count(p =&gt; p is Object)</code> to match this method's actual behavior.
</td></tr>
<tr>
<td><code>consumeObject(id, count)</code>
</td>
<td>Use <code>items.ReduceId(id, count)</code>.
</td></tr>
<tr>
<td><code>removeItemsFromInventory(id, count)</code>
</td>
<td> 
<ul><li>To remove an item by ID, use <code>items.ReduceId(id, count)</code>.</li>
<li>To deduct Golden Walnuts or Qi Gems, change the <samp>Game1.netWorldState.Value.GoldenWalnuts</samp> and <samp>Farmer.QiGems</samp> fields.</li></ul>
</td></tr>
<tr>
<td rowspan="2"><samp>Object</samp>
</td>
<td><code>ConsumeInventoryItem(player, id, count)</code>
</td>
<td>This was somewhat specialized and shouldn't be called by mod code, but the equivalent would be <code>(Object.autoLoadChest ?? player.items).ReduceId(id, count)</code>. See also notes for <samp>Farmer.removeItemsFromInventory</samp>.
</td></tr>
<tr>
<td><code>GetTallyOfObject(player, id)</code>
</td>
<td>This was somewhat specialized and shouldn't be called by mod code, but the equivalent would be <code>(Object.autoLoadChest ?? player.items).CountId(id)</code>. See also notes for <samp>Farmer.getTallyOfObject</samp>.
</td></tr></tbody></table>
<p>It implements a new <samp>IInventory</samp> interface, which lets mods pass their own implementations to code which works on inventories.
</p>
<h3 class="in-block"><span class="mw-headline" id="Furniture_changes">Furniture changes</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Furniture" title="Modding:Items">Modding:Items#Furniture</a>. This section below focuses on what's new in 1.6.</div>
<ul>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Furniture" title="Modding:Items"><samp>Data/furniture</samp></a> no longer has language variants. Translations were moved into <samp>Strings/Furniture</samp>.</li>
<li>
There are a few changes in <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Furniture" title="Modding:Items"><samp>Data/furniture</samp></a>:
<ul>
<li>Field index 6 is now placement restrictions and field index 7 is now display name. The display name field is no longer omitted in English.</li>
<li>Field index 7 (display name) now allows <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable strings</a>.</li>
<li>Added new fields:

<table class="wikitable">

<tbody><tr>
<th>index
</th>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td>8
</td>
<td>sprite index
</td>
<td>The sprite index within the spritesheet texture to draw.
</td></tr>
<tr>
<td>9
</td>
<td>texture
</td>
<td><i>(Optional)</i> The asset name of the texture to draw. Defaults to <samp>TileSheets/furniture</samp>.
</td></tr>
<tr>
<td>10
</td>
<td>off limits for random sale
</td>
<td><i>(Optional)</i> Whether to prevent this furniture from appearing in randomly generated shop stocks and the furniture catalogue. Default false.
</td></tr>
<tr>
<td>11
</td>
<td>context tags
</td>
<td><i>(Optional)</i> A space-delimited list of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">context tags</a> which apply to this furniture. Default none.
</td></tr></tbody></table></li>
</ul>
</li>
</ul>
<h3 class="in-block"><span id="Other_item_changes_for_C#_mods"></span><span class="mw-headline" id="Other_item_changes_for_C.23_mods">Other item changes for C# mods</span></h3>
<ul><li>Placed object changes:
<ul><li>Every placed object now has a <samp>Location</samp> property set to the location which contains it. This removes location parameters from many object methods.</li>
<li>Setting an object's tile position through <samp>obj.TileLocation</samp> now recalculcates its collision box automatically. (Setting it through the <samp>tileLocation</samp> net field directly won't though.)</li>
<li>The <samp>obj.IsScarecrow()</samp> and <samp>GetScarecrowRadius()</samp> methods now work for non-bigcraftable objects too.</li></ul></li>
<li>Clothing changes:
<ul><li><samp>Clothes.clothesType</samp> is now an enum field.</li>
<li>Clothing is no longer gender-specific. This renames <samp>indexInTileSheetMale</samp> to <samp>indexInTileSheet</samp>, obsoletes <samp>indexInTileSheetFemale</samp>, and converts gender-variant clothing into regular items.</li>
<li>Removed unused <samp>ClothesType.ACCESSORY</samp> value.</li>
<li><samp>Farmer.pants</samp> and <samp>Farmer.shirt</samp> now store the item ID instead of the sprite index.</li>
<li>In <samp>Data/TailoringRecipes</samp>, added a <samp>CraftingIdFeminine</samp> field which overrides <samp>CraftingId</samp> for female characters.</li></ul></li>
<li>Crop changes:
<ul><li>Added <samp>Game1.cropData</samp> to read crop info without constantly reloading the <samp>Data/Crops</samp> asset.</li>
<li>Removed most crop fields which only mirror the data (like <samp>harvestMethod</samp> or <samp>seasonsToGrowIn</samp>). Mods can get the info through <samp>crop.GetData()</samp> instead.</li>
<li>Partly de-hardcoded fertilizer logic. Almost all fertilizer logic is now centralized into a new patchable set of <samp>HoeDirt</samp> methods (see list below). The only fertilizer logic that's still embedded elsewhere is the interaction errors in <samp>Utility.tryToPlaceItem</samp>.</li>
<li>HoeDirt.fertilizer.Value is now set to <samp>null</samp> when there is no fertilizer. Both qualified and unqualified IDs should be expected.</li>
<li>Removed <samp>crop.InferSeedIndex()</samp>. This was used to support old crops, which are now fixed by a save migration instead.</li></ul></li>
<li>Tool changes:
<ul><li>Fixed various logic not handling custom tool upgrade levels.</li></ul></li></ul>
<ul>
<li>Other item logic:<ul>
<li>Simplified the constructors for many item types, particularly <samp>Object</samp>.</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Honey" title="Honey">Honey</a> items now have their <samp>preserve</samp> field set to a new <samp>Honey</samp> type (instead of null).</li>
<li>The <samp>Object.performObjectDropInAction</samp> method now applies the <samp>probe</samp> argument much more consistently. This only affects method calls with <samp>probe: true</samp>.</li>
<li>The <samp>Item.salePrice()</samp> method now has option to get the price without <a href="../../external.html?link=https://stardewvalleywiki.com/Multiplayer#Profit_margins" title="Multiplayer">profit margins</a>.</li>
<li>Added new fields &amp; methods:

<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>field/method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Chest</samp>
</td>
<td><samp>GetItemsForPlayer()</samp>
</td>
<td>Shortcut for <samp>chest.GetItemsForPlayer(Game1.player.UniqueMultiplayerID)</samp>.
</td></tr>
<tr>
<td rowspan="2"><samp>Crop</samp>
</td>
<td><samp>GetHarvestMethod()</samp>
</td>
<td>Get the method used to harvest the crop (one of <samp>HarvestMethod.Grab</samp> or <samp>HarvestMethod.Scythe</samp>).
</td></tr>
<tr>
<td><samp>IsInSeason(location)</samp>
</td>
<td>Whether the crop can grow in the location's current season (or true if crops ignore seasons in the location, like the <a href="../../external.html?link=https://stardewvalleywiki.com/Greenhouse" title="Greenhouse">greenhouse</a>).
</td></tr>
<tr>
<td rowspan="8"><samp>HoeDirt</samp>
</td>
<td><samp>HasFertilizer()</samp>
</td>
<td>Get whether the dirt has any fertilizer applied.
</td></tr>
<tr>
<td><samp>CanApplyFertilizer(itemId)</samp>
</td>
<td>Get whether a player can apply the given fertilizer to this dirt.
</td></tr>
<tr>
<td><samp>CheckApplyFertilizerRules(itemId)</samp>
</td>
<td>Get whether a player can apply the given fertilizer to this dirt, and the reason they can't if applicable.
</td></tr>
<tr>
<td><samp>GetFertilizerSpeedBoost()</samp>
</td>
<td>Get the crop growth speed boost from fertilizers applied to this dirt.
</td></tr>
<tr>
<td><samp>GetFertilizerWaterRetentionChance()</samp>
</td>
<td>Get the water retention chance from fertilizers applied to this dirt, as a value between 0 (no change) and 1 (100% chance of staying watered).
</td></tr>
<tr>
<td><samp>GetFertilizerQualityBoostLevel()</samp>
</td>
<td>Get the quality boost level from fertilizers applied to this dirt, which influences the chance of producing a higher-quality crop.
</td></tr>
<tr>
<td><samp>GetFertilizerSourceRect()</samp>
</td>
<td>Get the pixel area within the dirt spritesheet to draw for any fertilizer applied to this dirt.
<p>(This method existed before, but no longer requires the fertilizer ID argument.)
</p>
</td></tr>
<tr>
<td><samp>isWatered()</samp>
</td>
<td>Get whether the dirt is currently watered.
</td></tr>
<tr>
<td rowspan="5"><samp>Item</samp>
</td>
<td><samp>IsRecipe</samp><br><samp>Quality</samp><br><samp>Stack</samp><br><samp>sellToStorePrice(…)</samp>
</td>
<td>Equivalent to the previous <samp>Object</samp> fields/methods, to simplify common code and avoid needing to special-case <samp>Object</samp> items.
</td></tr>
<tr>
<td><samp>appliesProfitMargins()</samp>
</td>
<td>Get whether this item should apply <a href="../../external.html?link=https://stardewvalleywiki.com/Multiplayer#Profit_margins" title="Multiplayer">profit margins</a> to shop prices.
</td></tr>
<tr>
<td><samp>CanBeLostOnDeath()</samp>
</td>
<td>Get whether this item can be lost when the player dies, so it can be recovered from the <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild#Item_Recovery_Service" title="Adventurer's Guild">item recovery service</a>.
</td></tr>
<tr>
<td><samp>HasTypeId(id)</samp><br><samp>HasTypeObject()</samp><br><samp>HasTypeBigCraftable()</samp>
</td>
<td>Get whether the item has the given <a href="#Custom_items">type definition ID</a>. These are null-safe and double as a null check:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">HasTypeId</span><span class="p">(</span><span class="n">ItemRegistry</span><span class="p">.</span><span class="n">type_object</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// item is non-null and has type (O)</span>
<span class="p">}</span>
</pre></div>
<p><samp>HasTypeObject()</samp> and <samp>HasTypeBigCraftable()</samp> are shortcuts for passing <samp>ItemRegistry.type_object</samp> and <samp>ItemRegistry.type_bigCraftable</samp> respectively.
</p>
</td></tr>
<tr>
<td><samp>TryGetTempData</samp><br><samp>SetTempData</samp>
</td>
<td>Get or set temporary item info that's not synchronized in multiplayer or written to the save file.
<p>For example, the game uses this to pass spawn options to the fishing minigame:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">spawn</span><span class="p">.</span><span class="n">IsBossFish</span><span class="p">)</span>
    <span class="n">fish</span><span class="p">.</span><span class="n">SetTempData</span><span class="p">(</span><span class="n">nameof</span><span class="p">(</span><span class="n">spawn</span><span class="p">.</span><span class="n">IsBossFish</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span>

<span class="p">...</span>

<span class="n">fish</span><span class="p">.</span><span class="n">TryGetTempData</span><span class="p">(</span><span class="n">nameof</span><span class="p">(</span><span class="n">SpawnFishData</span><span class="p">.</span><span class="n">IsBossFish</span><span class="p">),</span> <span class="k">out</span> <span class="kt">bool</span> <span class="n">bossFish</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>FishingRod</samp>
</td>
<td><samp>CanUseBait()</samp><br><samp>CanUseTackle()</samp><br><samp>GetBait()</samp><br><samp>GetTackle()</samp><br><samp>HasMagicBait()</samp><br><samp>HasCuriosityLure()</samp>
</td>
<td>Simplifies working with the fishing rod's <a href="../../external.html?link=https://stardewvalleywiki.com/Bait" title="Bait">bait</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Tackle" title="Tackle">tackle</a>.
</td></tr>
<tr>
<td rowspan="2"><samp>Furniture</samp>
</td>
<td><samp>SetPlacement</samp><br><samp>SetHeldObject</samp>
</td>
<td>Set the furniture's position and rotation (<samp>SetPlacement</samp>) or held object (<samp>SetHeldObject</samp>). The latter will initialize the held object's tile position to match the furniture instance.
<p>These are used by the game to initialize furniture in one go. For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// oak table holding decorative bowl</span>
<span class="n">Furniture</span> <span class="n">table</span> <span class="p">=</span> <span class="n">ItemRegistry</span>
    <span class="p">.</span><span class="n">Create</span><span class="p">&lt;</span><span class="n">Furniture</span><span class="p">&gt;(</span><span class="s">"(F)1120"</span><span class="p">)</span>
    <span class="p">.</span><span class="n">SetPlacement</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">.</span><span class="n">SetHeldObject</span><span class="p">(</span><span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Create</span><span class="p">&lt;</span><span class="n">Furniture</span><span class="p">&gt;(</span><span class="s">"(F)1364"</span><span class="p">));</span>
</pre></div>
</td></tr>
<tr>
<td><samp>IsTable()</samp>
</td>
<td>Get whether this furniture is a table.
</td></tr>
<tr>
<td rowspan="2"><samp>FruitTree</samp>
</td>
<td><samp>GetQuality()</samp>
</td>
<td>Get the quality of fruit currently being produced by the fruit tree.
</td></tr>
<tr>
<td><samp>TryAddFruit()</samp>
</td>
<td>Add a fruit item to the tree based on <a href="#Custom_fruit_trees">its data</a>.
</td></tr>
<tr>
<td><samp>IndoorPot</samp>
</td>
<td><samp>Water()</samp>
</td>
<td>Simplifies watering dirt in the <a href="../../external.html?link=https://stardewvalleywiki.com/Garden_Pot" title="Garden Pot">garden pot</a>.
</td></tr>
<tr>
<td><samp>Object</samp>
</td>
<td><samp>GetBoundingBox()</samp><br><samp>GetBoundingBoxAt(x, y)</samp>
</td>
<td>Get the pixel collision area for the item placed in the world. These replace the former <samp>getBoundingBox(position)</samp> method.
</td></tr>
<tr>
<td><samp>Tool</samp>
</td>
<td><samp>isScythe()</samp>
</td>
<td>Equivalent to the previous <samp>MeleeWeapon</samp> method, to simplify common code and avoid needing to special-case <samp>MeleeWeapon</samp> items.
</td></tr>
<tr>
<td rowspan="3"><samp>Tree</samp>
</td>
<td><samp>CheckForNewTexture()</samp>
</td>
<td>Reset the tree's texture if it would change based on <a href="#Custom_wild_trees">its data</a>.
</td></tr>
<tr>
<td><samp>GetMaxSizeHere</samp>
</td>
<td>Get the maximum size the tree can grow in its current position (e.g. accounting for nearby trees blocking growth).
</td></tr>
<tr>
<td><samp>IsGrowthBlockedByNearbyTree</samp>
</td>
<td>Get whether growth is blocked because it's too close to another fully-grown tree.
</td></tr></tbody></table>
</li>
<li>Modularized <samp>Object.CheckForAction</samp> to simplify mod patches.</li>
<li>Reworked <samp>Item.getOne()</samp> implementation to avoid common pitfalls. (This only affects mods with custom item classes, or which patch <samp>Item.getOne</samp> or <samp>Item._GetOneFrom</samp>.)</li>
<li>Fixed fruit trees forgetting the growth stage set in their constructor when they're updated overnight.</li>
</ul>
<h3 class="in-block"><span class="mw-headline" id="Other_item_changes">Other item changes</span></h3>
<ul><li>Added per-object display names (<i>e.g.</i> for custom flavored items). See the <samp>ObjectDisplayName</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries#Item_spawn_fields" title="Modding:Item queries">item spawn field</a>, or <samp>object.displayNameFormat</samp> in C#.</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island#Gem_Birds" title="Ginger Island">Item pedestals</a> are now normal item, so you can spawn them using a mod like CJB Item Spawner to display items.</li>
<li>Added optional <samp>Condition</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> field to <samp>Data/SpecialOrders</samp>.</li>
<li>Item data changes:
<ul><li>The display name field now exists in English too for <samp>Data/Boots</samp>, <samp>Data/Bundles</samp>, <samp>Data/CookingRecipes</samp>, <samp>Data/CraftingRecipes</samp>, <samp>Data/Furniture</samp>, <samp>Data/Hats</samp>, and <samp>Data/Weapons</samp>.</li>
<li>The randomly spawned <a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm#Stone" title="The Farm">stones</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm#Wood" title="The Farm">twigs</a>, and <a href="../../external.html?link=https://stardewvalleywiki.com/Weeds" title="Weeds">weeds</a> have been formalized into <i>litter</i>. They all now have object type <samp>Litter</samp>, <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Categories" title="Modding:Items">category</a> -999 (<samp>StardewValley.Object.litterCategory</samp>), a relevant display name/description (like <i>Gold Stone</i> &amp; <i>Break apart to obtain gold ore</i> instead of <i>Stone</i> &amp; <i>...</i>), a price of 0 (not sellable), and edibility of -300 (inedible). This also adds all mine ore nodes to <samp>Data/Objects</samp>, so the game no longer creates invalid items to show their sprite. (Doing so in 1.6 will now show an Error Item sprite instead.)</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Honey" title="Honey">Honey</a> items now have the <samp>honey_item</samp> context tag.</li>
<li>Shirts no longer have a dynamic numeric ID range; every valid shirt is now listed in <a href="#Custom_shirts"><samp>Data/Shirts</samp></a>.</li>
<li>You can now apply a custom buff ID when the item is eaten, via <samp>Data/Objects</samp>'s <samp>Buff</samp> field.</li>
<li>The type field in <samp>Data/Objects</samp> is no longer checked using substring matching (e.g. the game now uses <code>data.Type == "Fish"</code> instead of <code>typeAndCategory.Contains("Fish")</code>), which may impact mods which depended on that undocumented behavior.</li></ul></li>
<li>Crop changes:
<ul><li>Paddy crops now recheck for nearby water each day, so they'll update if you add/remove a building with water or change the map layout.</li>
<li>In <samp>Data/Crops</samp>, each harvest option is now self-contained. For example, you can set <samp>HarvestMinStack</samp> without <samp>ExtraHarvestChance</samp>.</li></ul></li>
<li>Fish changes:
<ul><li><samp>Data/Fish</samp> is no longer translated, so there's only one <samp>Data/Fish.xnb</samp> field. Fish display names are now taken from <samp>Data/Objects</samp>.</li>
<li>Added a new field (index 13) in <samp>Data/Fish</samp>, which sets whether the fish can be selected for the first-catch tutorial.</li></ul></li>
<li>Recipe changes in <samp>Data/CookingRecipes</samp> and <samp>Data/CraftingRecipes</samp>:
<ul><li>These assets no longer have language variants.</li>
<li>The display name now supports <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable strings</a>.</li>
<li>The display name can now be left blank to get it from the first item in the output list.</li></ul></li>
<li>Other item logic:
<ul><li>Missing recipes that should already be unlocked are now added to the player automatically on save load.</li>
<li><samp>Data/Bundles</samp> is now loaded later, so content packs can edit it reliably.</li>
<li>Chests with <samp>fridge: true</samp> are now treated as mini-fridges for the cooking menu.</li>
<li>Gift boxes can now contain multiple items.</li>
<li>Fixed furniture drawn over sitting players if it has no front texture.</li>
<li>Fixed tool being upgraded by Clint not affected by recursive item search logic.</li>
<li>Fixed <samp>tool.getOne()</samp> not copying the tool name.</li>
<li>Fixed cooking menu constantly creating hovered item if the item/recipe names don't match.</li></ul></li></ul>
<h2><span id="What's_new_for_locations_&amp;_weather"></span><span class="mw-headline" id="What.27s_new_for_locations_.26_weather">What's new for locations &amp; weather</span></h2>
<h3 class="in-block"><span class="mw-headline" id="Custom_locations">Custom locations</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Location_data" title="Modding:Location data">Modding:Location data</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now add/edit locations by editing the revamped <samp>Data/Locations</samp> asset. This makes nearly everything in the location configurable — display name, default warp arrival tile, how the location is created, artifact spots / fish / forage / weeds, music, etc.
</p><p>See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Location_data" title="Modding:Location data">Modding:Location data</a> for docs on the new data format.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_location_contexts">Custom location contexts</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Location_data" title="Modding:Location data">Modding:Location data</a> or a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<h4 class="in-block"><span class="mw-headline" id="Vanilla_contexts">Vanilla contexts</span></h4>
<ul><li>The game previously had two hardcoded location context enums: <samp>Default</samp> (for the valley) and <samp>Island</samp> (for <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a>). These have been replaced with data models which define the location context settings, loaded from the <samp>Data/LocationContexts</samp> asset.</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/The_Desert" title="The Desert">The desert</a> is now part of a new <samp>Desert</samp> context (instead of <samp>Default</samp>). Some of the previously hardcoded desert logic (like always sunny weather) is now just part of the context data in <samp>Data/LocationContexts</samp>.</li></ul>
<h4 class="in-block"><span class="mw-headline" id="Format">Format</span></h4>
<p>Custom contexts can be created by editing the new <samp>Data/LocationContexts</samp> asset, and setting the context name in the location's <samp>LocationContext</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map property</a>.
</p><p>The data asset consists of a string → model lookup, where the key matches the <samp>Name</samp> field and the value is a model with these fields:
</p>
<dl style="margin-left: 2em;">
<dt>Required fields:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Name</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for the location context.
</td></tr></tbody></table>
</dd>

<dt>Player actions:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>AllowRainTotem</samp>
</td>
<td><i>(Optional)</i> Whether a <a href="../../external.html?link=https://stardewvalleywiki.com/Rain_Totem" title="Rain Totem">rain totem</a> can be used to force rain in this context tomorrow. If false, using a rain totem here will show a "<i>this item can't be used here</i>" message instead.
</td></tr>
<tr>
<td><samp>RainTotemAffectsContext</samp>
</td>
<td><i>(Optional)</i> If set, using a rain totem here will change the weather in the given context ID. For example, rain totems in the desert change weather in the valley.
</td></tr>
<tr>
<td><samp>MaxPassOutCost</samp>
</td>
<td><i>(Optional)</i> When the player passes out (due to <a href="../../external.html?link=https://stardewvalleywiki.com/Energy" title="Energy">exhaustion</a> or at 2am) in this context, the maximum amount of <a href="../../external.html?link=https://stardewvalleywiki.com/Gold" title="Gold">gold</a> lost. If omitted or set to <samp>-1</samp>, uses the same value as the <samp>Default</samp> context (<span style="display: none;">data-sort-value="1000"&gt;</span><span class="no-wrap"><noscript><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18"></noscript><span class="lazy-image-placeholder" style="width: 18px;height: 18px;" data-src="/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" data-alt="Gold.png" data-width="18" data-height="18"> </span>1,000g</span> by default).
</td></tr>
<tr>
<td><samp>PassOutMail</samp>
</td>
<td><i>(Optional)</i> When the player passes out (due to <a href="../../external.html?link=https://stardewvalleywiki.com/Energy" title="Energy">exhaustion</a> or at 2am) in this context, the possible <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">letter IDs</a> to add to their mailbox (if they haven't received it before). If multiple letters are valid, one will be chosen randomly (unless one specifies <samp>SkipRandomSelection</samp>).
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry in the list.
</td></tr>
<tr>
<td><samp>Mail</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">letter ID</a> to add.
<p>The game will look for an existing letter ID in <samp>Data/mail</samp> in this order (where <code title="required field 'billed'">&lt;billed&gt;</code> is <samp>Billed</samp> if they lost <a href="../../external.html?link=https://stardewvalleywiki.com/Gold" title="Gold">gold</a> or <samp>NotBilled</samp> otherwise, and <code title="required field 'gender'">&lt;gender&gt;</code> is <samp>Female</samp> or <samp>Male</samp>):
</p>
<ul><li><samp><code title="required field 'letter id'">&lt;letter id&gt;</code>_<code title="required field 'billed'">&lt;billed&gt;</code>_<code title="required field 'gender'">&lt;gender&gt;</code></samp></li>
<li><samp><code title="required field 'letter id'">&lt;letter id&gt;</code>_<code title="required field 'billed'">&lt;billed&gt;</code></samp></li>
<li><samp><code title="required field 'letter id'">&lt;letter id&gt;</code></samp></li></ul>
<p>If no match is found in <samp>Data/mail</samp>, the game will send <samp>passedOut2</samp> instead.
</p><p>If the mail ID starts with <samp>passedOut</samp>, <samp>{0}</samp> in the letter text will be replaced with the gold amount lost, and it won't appear in the <a href="../../external.html?link=https://stardewvalleywiki.com/Collections" title="Collections">collections</a> page.
</p>
</td></tr>
<tr>
<td><samp>MaxPassOutCost</samp>
</td>
<td><i>(Optional)</i> The maximum amount of <a href="../../external.html?link=https://stardewvalleywiki.com/Gold" title="Gold">gold</a> lost. This is applied after the context's <samp>MaxPassOutCost</samp> (i.e. the context's value is used to calculate the random amount, then this field caps the result). Defaults to unlimited.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this entry is active. Defaults to always true.
</td></tr>
<tr>
<td><samp>SkipRandomSelection</samp>
</td>
<td><i>(Optional)</i> If true, send this mail if the <samp>Condition</samp> matches instead of choosing a random valid mail. Default false.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>PassOutLocations</samp>
</td>
<td><i>(Optional)</i> When the player passes out (due to <a href="../../external.html?link=https://stardewvalleywiki.com/Energy" title="Energy">exhaustion</a> or at 2am) in this context <i>and</i> they started the day in a different location context, the locations where they'll wake up. (If the player started the day in the same context, they'll wake up in the last bed they slept in instead.)
<p>If the selected location doesn't contain a bed and doesn't have the <a href="#New_map_properties"><samp>AllowWakeUpWithoutBed</samp> map property</a>, the player will wake up in the farmhouse instead.
</p><p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry in the list.
</td></tr>
<tr>
<td><samp>Location</samp>
</td>
<td>The internal location name.
</td></tr>
<tr>
<td><samp>Position</samp>
</td>
<td>The <i>default</i> tile position within the location, specified as an object with <samp>X</samp> and <samp>Y</samp> fields. If the location has any bed furniture, they'll be placed in the first bed found instead.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this entry is active. Defaults to always applied.
</td></tr></tbody></table>
<p>If no locations are specified or none match, the player will wake up in their bed at home.
</p>
</td></tr>
<tr>
<td><samp>ReviveLocations</samp>
</td>
<td><i>(Optional)</i> If the player just got knocked out in combat, the location names where they'll wake up.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry in the list.
</td></tr>
<tr>
<td><samp>Location</samp>
</td>
<td>The internal location name.
</td></tr>
<tr>
<td><samp>Position</samp>
</td>
<td>The tile position within the location, specified as an object with <samp>X</samp> and <samp>Y</samp> fields.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this entry is active. Defaults to always applied.
</td></tr></tbody></table>
<p>If the selected location has a standard <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event</a> with the exact key <samp>PlayerKilled</samp> (with no <samp>/</samp> or preconditions in the key), that event will play when the player wakes up and the game will apply the lost items or <a href="../../external.html?link=https://stardewvalleywiki.com/Gold" title="Gold">gold</a> logic. The game won't track this event, so it'll repeat each time the player is revived. If there's no such event, the player will wake up without an event, and no items or gold will be lost.
</p><p>If no locations are specified or none match, the player will wake up at <a href="../../external.html?link=https://stardewvalleywiki.com/Harvey%27s_Clinic" title="Harvey's Clinic">Harvey's clinic</a>.
</p>
</td></tr></tbody></table>
</dd>

<dt>Season:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>SeasonOverride</samp>
</td>
<td><i>(Optional)</i> The season which is always active for locations within this context (one of <samp>spring</samp>, <samp>summer</samp>, <samp>fall</samp>, or <samp>winter</samp>). For example, setting <samp>summer</samp> will make it always <a href="../../external.html?link=https://stardewvalleywiki.com/Summer" title="Summer">summer</a> there regardless of the calendar season. If not set, the calendar season applies.
</td></tr></tbody></table>
</dd>

<dt>Weather:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>WeatherConditions</samp>
</td>
<td><i>(Optional)</i> The weather logic to apply for locations in this context (ignored if <samp>CopyWeatherFromLocation</samp> is set). Defaults to always sunny. If multiple are specified, the first matching weather is applied.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry in the list.
</td></tr>
<tr>
<td><samp>Weather</samp>
</td>
<td>The <a href="#Custom_weather">weather ID</a> to set.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether to apply the weather. Defaults to always applied.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>CopyWeatherFromLocation</samp>
</td>
<td><i>(Optional)</i> The <samp>Name</samp> (i.e. unique ID) of the location context from which to inherit weather.
</td></tr></tbody></table>
<p>If a <a href="#Custom_passive_festivals">passive festival</a> is active in any location within this context, the weather is sunny for the entire context regardless of these fields.
</p>
</dd>

<dt>Music:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DefaultMusic</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">cue ID</a> for the music to play when the player is in the location, unless overridden by a <samp>Music</samp> map property. Despite the name, this has a higher priority than the seasonal music fields below. Ignored if omitted.
</td></tr>
<tr>
<td><samp>DefaultMusicCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which returns whether the <samp>DefaultMusic</samp> field should be applied (if more specific music isn't playing). Defaults to always true.
</td></tr>
<tr>
<td><samp>DefaultMusicDelayOneScreen</samp>
</td>
<td><i>(Optional)</i> When the player warps and the music changes, whether to silence the music and play the ambience (if any) until the next warp (similar to the default valley locations). Default false.
</td></tr>
<tr>
<td><samp>Music</samp>
</td>
<td><i>(Optional)</i> A list of <a href="#Custom_audio">cue IDs</a> to play before noon in this location unless it's raining, there's a <samp>Music</samp> map property, or the context has a <samp>DefaultMusic</samp> value. If multiple values are specified, the game will play one per day in sequence.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> which identifies this entry within the list. Defaults to the <samp>Track</samp> value.
</td></tr>
<tr>
<td><samp>Track</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.6#Custom_audio" title="Modding:Migrate to Stardew Valley 1.6">audio track ID</a> to play.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this entry applies. Default true.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>DayAmbience</samp><br><samp>NightAmbience</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_audio">cue ID</a> for the background ambience to play when there's no music active, depending on the <a href="../../external.html?link=https://stardewvalleywiki.com/Day_Cycle" title="Day Cycle">time of day</a>. Both default to none.
</td></tr>
<tr>
<td><samp>PlayRandomAmbientSounds</samp>
</td>
<td><i>(Optional)</i> Whether to play random outdoor ambience sounds depending on factors like the season and time of day (e.g. birds, crickets, and mysterious groan sounds in the rain). This is unrelated to the <samp>DayAmbience</samp> and <samp>NightAmbience</samp> fields. Default true.
</td></tr></tbody></table>
</dd>

<dt>Advanced:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
</dd>
</dl>
<h3 class="in-block"><span class="mw-headline" id="Custom_garbage_cans">Custom garbage cans</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<h4 class="in-block"><span class="mw-headline" id="Format_2">Format</span></h4>
<p>You can now add or edit <a href="../../external.html?link=https://stardewvalleywiki.com/Garbage_Can" title="Garbage Can">garbage cans</a> on any map by editing the new <samp>Data/GarbageCans</samp> asset (see examples below).
</p><p>The asset consists of a data model with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DefaultBaseChance</samp>
</td>
<td>The probability that an item will be found when searching garbage cans, as a value between 0 (never) and 1 (always). If the probability check fails, only items that set <samp>IgnoreBaseChance</samp> can spawn. This can be overridden by the per-garbage-can <samp>BaseChance</samp> field. Default 0.2.
</td></tr>
<tr>
<td><samp>BeforeAll</samp><br><samp>AfterAll</samp>
</td>
<td>The items to prepend (<samp>BeforeAll</samp>) or append (<samp>AfterAll</samp>) to the <samp>GarbageCans</samp> → <samp>Items</samp> field for all garbage cans. These work exactly like the items in that field (e.g. subject to the garbage can's base chance).
</td></tr>
<tr>
<td><samp>GarbageCans</samp>
</td>
<td>The data for individual garbage cans. This consists of a string → model lookup with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>entry key</i>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this garbage can.
</td></tr>
<tr>
<td><samp>BaseChance</samp>
</td>
<td><i>(Optional)</i> If set, overrides the root <samp>DefaultBaseChance</samp> field for this garbage can. Defaults to <samp>DefaultBaseChance</samp>.
</td></tr>
<tr>
<td><samp>Items</samp>
</td>
<td><i>(Optional)</i> The items to try spawning when the player searches the garbage can. The first matching item in <samp>BeforeAll</samp> + <samp>Items</samp> + <samp>AfterAll</samp> will be spawned, and any further items will be ignored. Defaults to none.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries#Item_spawn_fields" title="Modding:Item queries">item spawn fields</a> for the generic item fields supported by garbage cans.
<p>If set to an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>IgnoreBaseChance</samp>
</td>
<td><i>(Optional)</i> Whether this item can spawn even if the <samp>BaseChance</samp> probability check didn't pass. Default false.
</td></tr>
<tr>
<td><samp>IsMegaSuccess</samp>
</td>
<td><i>(Optional)</i> Whether to treat this item as a 'mega success' if it's selected, which plays a special <samp>crit</samp> sound and bigger animation. Default false.
</td></tr>
<tr>
<td><samp>IsDoubleMegaSuccess</samp>
</td>
<td><i>(Optional)</i> Whether to treat this item as an 'double mega success' if it's selected, which plays an explosion sound and dramatic animation. Default false.
</td></tr>
<tr>
<td><samp>AddToInventoryDirectly</samp>
</td>
<td><i>(Optional)</i> Whether to add the item to the player's inventory directly, opening an item grab menu if they don't have room in their inventory. If false, the item will be dropped on the ground next to the garbage can instead. Default false.
</td></tr>
<tr>
<td><samp>CreateMultipleDebris</samp>
</td>
<td><i>(Optional)</i> Whether to split the spawned item into multiple stacks which each have a stack size of one. This has no effect if <samp>AddToInventoryDirectly</samp> is enabled. Default false.
</td></tr></tbody></table>
</td></tr></tbody></table>
<p>If the garbage can being searched doesn't have its own entry under <samp>GarbageCans</samp>, the game will just use the <samp>BeforeAll</samp> and <samp>AfterAll</samp> fields.
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Example_new_garbage_can">Example new garbage can</span></h4>
<p>You can add garbage cans using only <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Content" title="Modding:Modder Guide/APIs/Content">SMAPI's content API</a>. For example, this content pack adds a new garbage can entry with the ID <samp>Example.ModId_Carpenter</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/GarbageCans"</span><span class="p">,</span>
            <span class="s2">"TargetField"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"GarbageCans"</span> <span class="p">],</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"{{ModId}}_Carpenter"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"Items"</span><span class="o">:</span> <span class="p">[</span>
                        <span class="c1">// 25% chance of pufferfish</span>
                        <span class="p">{</span>
                            <span class="s2">"ID"</span><span class="o">:</span> <span class="s2">"{{ModId}}_Pufferfish"</span><span class="p">,</span>
                            <span class="s2">"Condition"</span><span class="o">:</span> <span class="s2">"RANDOM 0.25"</span><span class="p">,</span>
                            <span class="s2">"ItemId"</span><span class="o">:</span> <span class="s2">"(O)128"</span>
                        <span class="p">},</span>

                        <span class="c1">// else guaranteed random House Plant item</span>
                        <span class="p">{</span>
                            <span class="s2">"ID"</span><span class="o">:</span> <span class="s2">"{{ModId}}_RandomHousePlant"</span><span class="p">,</span>
                            <span class="s2">"ItemID"</span><span class="o">:</span> <span class="s2">"RANDOM_ITEMS (F) 1376 1390"</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>Then you'd place an <code>Action: Garbage Example.ModId_Carpenter</code> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map tile property</a> to mark a tile as a garbage can using this data.
</p>
<h4 class="in-block"><span class="mw-headline" id="Example_change_for_existing_garbage_can">Example change for existing garbage can</span></h4>
<p>You can edit an existing garbage cans using only <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Content" title="Modding:Modder Guide/APIs/Content">SMAPI's content API</a>. For example, this content pack adds pufferfish to the Saloon garbage can, and moves it above the dish of the day.
</p><p>Note that this uses <samp>TargetField</samp> to 'move into' the item list for the saloon, and then treat those items as the entry list being edited. Specifying an ID which isn't in the list will add a new entry, just like when editing a regular list asset.
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/GarbageCans"</span><span class="p">,</span>
            <span class="s2">"TargetField"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"GarbageCans"</span><span class="p">,</span> <span class="s2">"Saloon"</span><span class="p">,</span> <span class="s2">"Items"</span> <span class="p">],</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="c1">// 25% chance of pufferfish</span>
                
                <span class="s2">"{{ModId}}_Pufferfish"</span><span class="o">:</span><span class="p">{</span>
                    <span class="s2">"ID"</span><span class="o">:</span> <span class="s2">"{{ModId}}_Pufferfish"</span><span class="p">,</span>
                    <span class="s2">"Condition"</span><span class="o">:</span> <span class="s2">"RANDOM 0.25"</span><span class="p">,</span>
                    <span class="s2">"ItemId"</span><span class="o">:</span> <span class="s2">"(O)128"</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">"MoveEntries"</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s2">"ID"</span><span class="o">:</span> <span class="s2">"{{ModId}}_Pufferfish"</span><span class="p">,</span> <span class="s2">"BeforeId"</span><span class="o">:</span> <span class="s2">"Base_DishOfTheDay"</span> <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h4 class="in-block"><span id="Changes_for_C#_mods"></span><span class="mw-headline" id="Changes_for_C.23_mods">Changes for C# mods</span></h4>
<p>Previously garbage cans were tracked by <samp>Town.garbageChecked</samp>, an array of boolean fields. That approach doesn't work in Stardew Valley 1.6, since we're no longer limited to a specific set of garbage cans in the town map. This has been replaced by <samp>Game1.netWorldState.Value.CheckedGarbage</samp>, which is a hash set of garbage can IDs.
</p><p>To migrate code:
</p>
<table class="wikitable">

<tbody><tr>
<th>action
</th>
<th>code in 1.5.6
</th>
<th>code in 1.6
</th></tr>
<tr>
<td>check if a garbage can was searched
</td>
<td><div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="nx">Town</span> <span class="nx">town</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Town</span><span class="p">)</span><span class="nx">Game1</span><span class="p">.</span><span class="nx">getLocationFromName</span><span class="p">(</span><span class="s2">"Town"</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">town</span><span class="p">.</span><span class="nx">garbageChecked</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
   <span class="p">...</span>
</pre></div>
</td>
<td><div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">Game1</span><span class="p">.</span><span class="nx">netWorldState</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nx">CheckedGarbage</span><span class="p">.</span><span class="nx">Contains</span><span class="p">(</span><span class="s2">"Saloon"</span><span class="p">))</span>
   <span class="p">...</span>
</pre></div>
</td></tr>
<tr>
<td>mark a garbage can searched
</td>
<td><div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="nx">Town</span> <span class="nx">town</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Town</span><span class="p">)</span><span class="nx">Game1</span><span class="p">.</span><span class="nx">getLocationFromName</span><span class="p">(</span><span class="s2">"Town"</span><span class="p">);</span>
<span class="nx">town</span><span class="p">.</span><span class="nx">garbageChecked</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></div>
</td>
<td><div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="nx">Game1</span><span class="p">.</span><span class="nx">netWorldState</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nx">CheckedGarbage</span><span class="p">.</span><span class="nx">Add</span><span class="p">(</span><span class="s2">"Saloon"</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
<p>To migrate former vanilla trash can IDs:
</p>
<table class="wikitable">

<tbody><tr>
<th>position
</th>
<th>ID in 1.5.6
</th>
<th>ID in 1.6
</th></tr>
<tr>
<td>Near <a href="../../external.html?link=https://stardewvalleywiki.com/Jodi" title="Jodi">Jodi</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Kent" title="Kent">Kent</a>'s house
</td>
<td><code>0</code>
</td>
<td><code>JodiAndKent</code>
</td></tr>
<tr>
<td>Near <a href="../../external.html?link=https://stardewvalleywiki.com/Emily" title="Emily">Emily</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Haley" title="Haley">Haley</a>'s house
</td>
<td><code>1</code>
</td>
<td><code>EmilyAndHaley</code>
</td></tr>
<tr>
<td>Near <a href="../../external.html?link=https://stardewvalleywiki.com/Lewis" title="Lewis">Lewis</a>' house
</td>
<td><code>2</code>
</td>
<td><code>Mayor</code>
</td></tr>
<tr>
<td>Near <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">Museum</a>
</td>
<td><code>3</code>
</td>
<td><code>Museum</code>
</td></tr>
<tr>
<td>Near <a href="../../external.html?link=https://stardewvalleywiki.com/Blacksmith" title="Blacksmith">Clint's blacksmith</a>
</td>
<td><code>4</code>
</td>
<td><code>Blacksmith</code>
</td></tr>
<tr>
<td>Near <a href="../../external.html?link=https://stardewvalleywiki.com/The_Stardrop_Saloon" title="The Stardrop Saloon">the Saloon</a>
</td>
<td><code>5</code>
</td>
<td><code>Saloon</code>
</td></tr>
<tr>
<td>Near <a href="../../external.html?link=https://stardewvalleywiki.com/Evelyn" title="Evelyn">Evelyn</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/George" title="George">George</a>'s house
</td>
<td><code>6</code>
</td>
<td><code>Evelyn</code>
</td></tr>
<tr>
<td>Near <a href="../../external.html?link=https://stardewvalleywiki.com/JojaMart" title="JojaMart">JojaMart</a>
</td>
<td><code>7</code>
</td>
<td><code>JojaMart</code>
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Custom_map_actions">Custom map actions</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">Modding:Maps</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>C# mods can now handle custom <samp>Action</samp> &amp; <samp>TouchAction</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map properties</a> by calling <samp>GameLocation.RegisterTileAction</samp> &amp; <samp>RegisterTouchAction</samp>, and passing a callback which receives the location, map property arguments, player who activated it, and tile position.
</p><p>For example, let's say you want a locked gate which needs a custom key item. You can add a regular <code>TouchAction Example.ModId_UnlockGate</code> map property (e.g. by adding it directly in the map file, or using <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a>'s <samp>EditMap</samp>, or using the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Content" title="Modding:Modder Guide/APIs/Content">content API</a>). Then you can just handle the logic from your C# mod:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">internal</span> <span class="k">class</span> <span class="nc">ModEntry</span> <span class="p">:</span> <span class="n">Mod</span>
<span class="p">{</span>
    <span class="c1">/// &lt;inheritdoc /&gt;</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Entry</span><span class="p">(</span><span class="n">IModHelper</span> <span class="n">helper</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">GameLocation</span><span class="p">.</span><span class="n">RegisterTouchAction</span><span class="p">(</span><span class="s">"Example.ModId_UnlockGate"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">HandleUnlockGate</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">HandleUnlockGate</span><span class="p">(</span><span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">,</span> <span class="n">Farmer</span> <span class="n">player</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">tile</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">const</span> <span class="kt">string</span> <span class="n">mailFlag</span> <span class="p">=</span> <span class="s">"Example.ModId_GateUnlocked"</span><span class="p">;</span>
        <span class="k">const</span> <span class="kt">string</span> <span class="n">keyId</span> <span class="p">=</span> <span class="s">"Example.ModId_GateKey"</span><span class="p">;</span>

        <span class="c1">// unlock gate if locked</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">mailFlag</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">ContainsId</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">Game1</span><span class="p">.</span><span class="n">activeClickableMenu</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DialogueBox</span><span class="p">(</span><span class="s">"This gate is locked. I wonder where the key is?"</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">player</span><span class="p">.</span><span class="n">removeFirstOfThisItemFromInventory</span><span class="p">(</span><span class="n">keyId</span><span class="p">);</span>
            <span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">mailFlag</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// apply open-gate map edit</span>
        <span class="c1">// NOTE: this is a quick example which changes the location's current map. If another mod reloads the map</span>
        <span class="c1">// (e.g. a content pack editing it), the change will be lost. For persistent changes, you should use the</span>
        <span class="c1">// AssetRequested event to apply the change when the map is reloaded.</span>
        <span class="n">IAssetDataForMap</span> <span class="n">mapHelper</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">GameContent</span><span class="p">.</span><span class="n">GetPatchHelper</span><span class="p">(</span><span class="n">location</span><span class="p">.</span><span class="n">map</span><span class="p">).</span><span class="n">AsMap</span><span class="p">();</span>
        <span class="n">mapHelper</span><span class="p">.</span><span class="n">PatchMap</span><span class="p">(</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Map</span><span class="p">&gt;(</span><span class="s">"assets/unlocked-gate.tmx"</span><span class="p">),</span>
            <span class="n">targetArea</span><span class="p">:</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">tile</span><span class="p">.</span><span class="n">X</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">tile</span><span class="p">.</span><span class="n">Y</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>As another example, let's say you want the gate to unlock when the player presses the action key. You can add a regular <code>Action Example.ModId_UnlockGate</code> map property (e.g. by adding it directly in the map file, or using <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a>'s <samp>EditMap</samp>, or using the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Content" title="Modding:Modder Guide/APIs/Content">content API</a>). Then you can just handle the logic from your C# mod:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">internal</span> <span class="k">class</span> <span class="nc">ModEntry</span> <span class="p">:</span> <span class="n">Mod</span>
<span class="p">{</span>
    <span class="c1">/// &lt;inheritdoc /&gt;</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Entry</span><span class="p">(</span><span class="n">IModHelper</span> <span class="n">helper</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">GameLocation</span><span class="p">.</span><span class="n">RegisterTileAction</span><span class="p">(</span><span class="s">"Example.ModId_UnlockGate"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">HandleUnlockGate</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kt">bool</span> <span class="nf">HandleUnlockGate</span><span class="p">(</span><span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">,</span> <span class="n">Farmer</span> <span class="n">player</span><span class="p">,</span> <span class="n">Microsoft</span><span class="p">.</span><span class="n">Xna</span><span class="p">.</span><span class="n">Framework</span><span class="p">.</span><span class="n">Point</span> <span class="n">point</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">const</span> <span class="kt">string</span> <span class="n">mailFlag</span> <span class="p">=</span> <span class="s">"Example.ModId_GateUnlocked"</span><span class="p">;</span>
        <span class="k">const</span> <span class="kt">string</span> <span class="n">keyId</span> <span class="p">=</span> <span class="s">"Example.ModId_GateKey"</span><span class="p">;</span>

        <span class="c1">// unlock gate if locked</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">mailFlag</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(!</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="n">ContainsId</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">Game1</span><span class="p">.</span><span class="n">activeClickableMenu</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DialogueBox</span><span class="p">(</span><span class="s">"This gate is locked. I wonder where the key is?"</span><span class="p">);</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">player</span><span class="p">.</span><span class="n">removeFirstOfThisItemFromInventory</span><span class="p">(</span><span class="n">keyId</span><span class="p">);</span>
            <span class="n">player</span><span class="p">.</span><span class="n">mailReceived</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">mailFlag</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// apply open-gate map edit</span>
        <span class="c1">// NOTE: this is a quick example which changes the location's current map. If another mod reloads the map</span>
        <span class="c1">// (e.g. a content pack editing it), the change will be lost. For persistent changes, you should use the</span>
        <span class="c1">// AssetRequested event to apply the change when the map is reloaded.</span>
        <span class="n">IAssetDataForMap</span> <span class="n">mapHelper</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">GameContent</span><span class="p">.</span><span class="n">GetPatchHelper</span><span class="p">(</span><span class="n">location</span><span class="p">.</span><span class="n">map</span><span class="p">).</span><span class="n">AsMap</span><span class="p">();</span>
        <span class="n">mapHelper</span><span class="p">.</span><span class="n">PatchMap</span><span class="p">(</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Map</span><span class="p">&gt;(</span><span class="s">"assets/unlocked-gate.tmx"</span><span class="p">),</span>
            <span class="n">targetArea</span><span class="p">:</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">point</span><span class="p">.</span><span class="n">X</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">point</span><span class="p">.</span><span class="n">Y</span> <span class="p">-</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Custom_map_layers">Custom map layers</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">Modding:Maps</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>You can now add any number of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map layers</a> by suffixing a vanilla layer name (i.e. <samp>Back</samp>, <samp>Buildings</samp>, <samp>Front</samp>, or <samp>AlwaysFront</samp>) with an offset. For example, <samp>Back-1</samp> will be drawn before/under <samp>Back</samp>, and <samp>Back2</samp> will be drawn after/over it. You can increment the number to add more layers.
</p><p>This only affects layer rendering. Tile properties must still be set on the original layers.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_minecarts">Custom minecarts</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>You can now extend <a href="../../external.html?link=https://stardewvalleywiki.com/Minecart" title="Minecart">minecarts</a> by editing the <samp>Data\Minecarts</samp> data asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for the minecart network. When you interact with a minecart, the destinations listed for its network are shown.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Destinations</samp>
</td>
<td>The destinations which the player can travel to from minecarts in this network. This consists of a list of model with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this destination within the network.
</td></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the destination name shown in the minecart menu. You can use the location's display name with the <samp>LocationName</samp> token (like <code>[LocationName Desert]</code> for the <a href="../../external.html?link=https://stardewvalleywiki.com/Desert" class="mw-redirect" title="Desert">desert</a>).
</td></tr>
<tr>
<td><samp>TargetLocation</samp>
</td>
<td>The <a href="#Custom_locations">location ID</a> for the destination.
</td></tr>
<tr>
<td><samp>TargetTile</samp>
</td>
<td>The destination tile position within the location, specified as a model with <samp>X</samp> and <samp>Y</samp> fields.
</td></tr>
<tr>
<td><samp>TargetDirection</samp>
</td>
<td>The direction the player should face after arrival (one of <samp>down</samp>, <samp>left</samp>, <samp>right</samp>, or <samp>up</samp>).
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this minecart destination is available. Defaults to always available.
</td></tr>
<tr>
<td><samp>Price</samp>
</td>
<td><i>(Optional)</i> The gold price that must be paid each time to use this destination. Default none.
</td></tr>
<tr>
<td><samp>BuyTicketMessage</samp>
</td>
<td><i>(Optional)</i> If the destination costs money to use, a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the purchase confirmation message shown. If present, <code>{0}</code> is replaced with the purchase price. Defaults to the network's <samp>BuyTicketMessage</samp> field.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>UnlockCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this minecart network is unlocked. Default always enabled.
</td></tr>
<tr>
<td><samp>LockedMessage</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the message shown when interacting with a minecart when the <samp>UnlockCondition</samp> false. Defaults to an "<i>Out of order</i>" translation.
</td></tr>
<tr>
<td><samp>ChooseDestinationMessage</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the message shown when listing destinations to choose from. Defaults to a "<i>Choose destination:</i>" translation.
</td></tr>
<tr>
<td><samp>BuyTicketMessage</samp>
</td>
<td><i>(Optional)</i> When a destination costs money to use, a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the purchase confirmation message shown. If present, <code>{0}</code> is replaced with the purchase price. Defaults to a "<i>Buy a ticket for {0}g?</i>" translation.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Open_a_minecart_menu">Open a minecart menu</span></h4>
<p>You can use an <samp>Action: MinecartTransport <code title="optional field 'network ID'">[network ID]</code> <code title="optional field 'exclude destination ID'">[exclude destination ID]</code></samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map property</a> to open the minecart menu. When the player interacts with the tile, it'll open the menu for the <code title="optional field 'network ID'">[network ID]</code> network (default <samp>Default</samp>). if <code title="optional field 'exclude destination ID'">[exclude destination ID]</code> is specified, the matching destination will be hidden from the list (usually because you're at that minecart). For example, the <a href="../../external.html?link=https://stardewvalleywiki.com/Bus_Stop" title="Bus Stop">bus stop</a> minecart uses <code>Action: MinecartTransport Default Bus</code>.
</p><p>From a C# mod, you can call <code>Game1.currentLocation.ShowMineCartMenu(networkId, excludeDestinationId)</code> which works the same way (except that <samp>networkId</samp> is required).
</p>
<h4 class="in-block"><span class="mw-headline" id="Example">Example</span></h4>
<p>This <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> content pack adds the <a href="../../external.html?link=https://stardewvalleywiki.com/Railroad" title="Railroad">Railroad</a> as a minecart destination, complete with a map edit adding a decorative minecart. It is available after the <a href="../../external.html?link=https://stardewvalleywiki.com/Random_Events" title="Random Events">Earthquake</a> has occurred and minecarts have been unlocked.
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// add minecart destination</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/Minecarts"</span><span class="p">,</span>
            <span class="s2">"TargetField"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"Default"</span><span class="p">,</span> <span class="s2">"Destinations"</span> <span class="p">],</span> <span class="c1">// for the "Default" network, edit the "Destinations" field</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"Railroad"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"Id"</span><span class="o">:</span> <span class="s2">"Railroad"</span><span class="p">,</span>
                    <span class="s2">"DisplayName"</span><span class="o">:</span> <span class="s2">"[LocationName Railroad]"</span><span class="p">,</span>
                    <span class="s2">"Condition"</span><span class="o">:</span> <span class="s2">"LOCATION_ACCESSIBLE Railroad"</span><span class="p">,</span>

                    <span class="s2">"TargetLocation"</span><span class="o">:</span> <span class="s2">"Railroad"</span><span class="p">,</span>
                    <span class="s2">"TargetTile"</span><span class="o">:</span> <span class="p">{</span> <span class="s2">"X"</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s2">"Y"</span><span class="o">:</span> <span class="mi">39</span> <span class="p">},</span>
                    <span class="s2">"TargetDirection"</span><span class="o">:</span> <span class="s2">"down"</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// add decorative minecart</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditMap"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Maps/Railroad"</span><span class="p">,</span>
            <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/Custom_Railroad_Minecart.tmx"</span><span class="p">,</span>
            <span class="s2">"ToArea"</span><span class="o">:</span> <span class="p">{</span> <span class="s2">"X"</span><span class="o">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s2">"Y"</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span> <span class="s2">"Width"</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">"Height"</span><span class="o">:</span> <span class="mi">5</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Custom_passive_festivals">Custom passive festivals</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Festival_data" title="Modding:Festival data">Modding:Festival data</a> or a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>You can now add or modify passive festivals by editing the <samp>Data/PassiveFestivals</samp> asset.
</p><p>(A <i>passive festival</i> is a <a href="../../external.html?link=https://stardewvalleywiki.com/Festivals" title="Festivals">festival</a> like the <a href="../../external.html?link=https://stardewvalleywiki.com/Night_Market" title="Night Market">Night Market</a>. They replace a location for a period of time, the player can enter/leave them anytime, and time continues passing while at the festival.)
</p>
<h4 class="in-block"><span class="mw-headline" id="Data_format">Data format</span></h4>
<p>The <samp>Data/PassiveFestivals</samp> asset consists of a string → model lookup, where...
</p>
<ul><li>The key is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for the festival.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the display name shown on the <a href="../../external.html?link=https://stardewvalleywiki.com/Calendar" title="Calendar">calendar</a>.
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Season" class="mw-redirect" title="Season">season</a> when the festival becomes active.
</td></tr>
<tr>
<td><samp>StartDay</samp><br><samp>EndDay</samp>
</td>
<td>The days of month when the festival becomes active.
</td></tr>
<tr>
<td><samp>StartTime</samp>
</td>
<td>The time of day when the festival opens each day.
</td></tr>
<tr>
<td><samp>StartMessage</samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the in-game <a href="../../external.html?link=https://en.wikipedia.org/wiki/Pop-up_notification" class="extiw" title="wikipedia:Pop-up notification">toast notification</a> shown when the festival begins each day.
</td></tr>
<tr>
<td><samp>MapReplacements</samp>
</td>
<td>The locations to swap for the duration of the festival. Despite the field name, this swaps <b>locations</b> (e.g. as added by <samp>CustomLocations</samp> using <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a>), and not the location's map asset.
<p>This is specified as a string → string lookup, where the key is the original location to replace and the value is the new location. Both use the internal location name, as shown by the <a rel="nofollow" class="external text" href="../../external.html?link=https://www.nexusmods.com/stardewvalley/mods/679">Debug Mode</a> mod. For example, this swaps the <samp>Beach</samp> location with <samp>BeachNightMarket</samp> during the <a href="../../external.html?link=https://stardewvalleywiki.com/Night_Market" title="Night Market">Night Market</a>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"MapReplacements"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"Beach"</span><span class="o">:</span> <span class="s2">"BeachNightMarket"</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether the festival is enabled (subject to the other fields like <samp>StartDay</samp> and <samp>EndDay</samp>). Defaults to always enabled.
</td></tr>
<tr>
<td><samp>ShowOnCalendar</samp>
</td>
<td><i>(Optional)</i> Whether the festival appears on the <a href="../../external.html?link=https://stardewvalleywiki.com/Calendar" title="Calendar">calendar</a>, using the same iridium-star icon as the <a href="../../external.html?link=https://stardewvalleywiki.com/Calendar#Winter" title="Calendar">Night Market</a>. Default true.
</td></tr>
<tr>
<td><samp>DailySetupMethod</samp><br><samp>CleanupMethod</samp>
</td>
<td><i>(Optional)</i> A C# method which applies custom logic when the day starts (<samp>DailySetupMethod</samp>) and/or overnight after the last day of the festival (<samp>CleanupMethod</samp>).
<p>These must be specified in the form <samp><code title="required field 'full type name'">&lt;full type name&gt;</code>: <code title="required field 'method name'">&lt;method name&gt;</code></samp> (like <samp>ExampleMod.Namespace.Type, ExampleMod: MethodName</samp>). The methods must be static, take zero arguments, and return void.
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="NPC_schedules">NPC schedules</span></h4>
<p>When a passive festival is active, NPCs will check for <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Schedule_data" title="Modding:Schedule data">a schedule entry</a> in this order:
</p>
<table class="wikitable">

<tbody><tr>
<th>syntax
</th>
<th>summary
</th></tr>
<tr>
<td><samp><code title="required field 'festival ID'">&lt;festival ID&gt;</code>_<code title="required field 'festival day'">&lt;festival day&gt;</code></samp>
</td>
<td>Applies on the given date. The <code title="required field 'festival day'">&lt;festival day&gt;</code> is relative, so <samp>1</samp> matches the festival <samp>StartDay</samp>.<br><small>Example: <samp>NightMarket_3</samp> or <samp>marriage_NightMarket_3</samp></small>
</td></tr>
<tr>
<td><samp><code title="required field 'festival ID'">&lt;festival ID&gt;</code></samp>
</td>
<td>Applies if there's no date-specific entry.<br><small>Example: <samp>NightMarket</samp> or <samp>marriage_NightMarket</samp></small>
</td></tr></tbody></table>
<p>If the NPC is married to a player, they'll add a <samp>marriage_</samp> prefix to the keys (like <samp>marriage_<code title="required field 'festival ID'">&lt;festival ID&gt;</code>_<code title="required field 'festival day'">&lt;festival day&gt;</code></samp>) and ignore any entry without the prefix.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_weather">Custom weather</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Weather_data" title="Modding:Weather data">Modding:Weather data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>You can now change the weather algorithm by editing <a href="#Custom_location_contexts">location context data</a>, and (with a C# mod) implement custom weathers.
</p><p>Fields like <samp>Game1.weather</samp> and <samp>Game1.weatherForTomorrow</samp> are now strings to support custom mod weather IDs. The change for vanilla weather has no effect on Content Patcher packs, since the new weather IDs match the ones Content Patcher was using before (i.e. <samp>Sun</samp>, <samp>Rain</samp>, <samp>Snow</samp>, <samp>Storm</samp>, and <samp>Wind</samp>). C# mods may also see a <samp>Festival</samp> weather, while Content Patcher packs will see <samp>Sun</samp> for it. The constants like <samp>Game1.weather_sunny</samp> have the new string values (with new constants like <samp>Game1.legacy_weather_sunny</samp> for the legacy values).
</p><p>The base game will treat an invalid weather as sunny. C# mods can implement custom weather effects using <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Events" title="Modding:Modder Guide/APIs/Events">normal SMAPI events</a> like <samp>UpdateTicked</samp>, or by <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Harmony" title="Modding:Modder Guide/APIs/Harmony">patching</a> methods like <samp>Game1.ApplyWeatherForNewDay</samp> and <samp>Game1.populateDebrisWeatherArray</samp>.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_world_maps">Custom world maps</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:World_map" title="Modding:World map">Modding:World map</a>. This section below focuses on what's new in 1.6.</div>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a href="../../external.html?link=https://stardewvalleywiki.com/File:Modding_map_area.png" class="image"><noscript><img alt="" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/4/47/Modding_map_area.png/300px-Modding_map_area.png" decoding="async" width="300" height="177" class="thumbimage"></noscript><span class="lazy-image-placeholder" style="width: 300px;height: 177px;" data-src="/mediawiki/images/thumb/4/47/Modding_map_area.png/300px-Modding_map_area.png" data-alt="" data-width="300" data-height="177" data-class="thumbimage"> </span></a>  <div class="thumbcaption"><div class="magnify"><a href="../../external.html?link=https://stardewvalleywiki.com/File:Modding_map_area.png" class="internal" title="Enlarge"></a></div>The default world map, with the farm map area highlighted.</div></div></div>
<p>You can now change the world map shown in the game menu by editing the <samp>Data/WorldMap</samp> asset. This lets you...
</p>
<ul><li>add custom maps for certain locations;</li>
<li>apply texture overlays;</li>
<li>add/edit tooltips;</li>
<li>set real-time player marker positioning;</li>
<li>etc.</li></ul>
<p>The game's default map is fully defined in <samp>Data/WorldMap</samp>, including all the display text and conditional changes.
</p>
<h3 class="in-block"><span class="mw-headline" id="New_map_properties">New map properties</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">Modding:Maps</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>1.6 adds several new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map properties</a>.
</p>
<h4 class="in-block"><span class="mw-headline" id="Building_construction">Building construction</span></h4>
<table class="wikitable">

<tbody><tr>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>CanBuildHere T</samp><br><i>(valid in any outdoor location)</i>
</td>
<td>Whether to allow constructing buildings in this location. The game will adjust automatically to account for it (e.g. Robin will let you choose where to build). See <a href="#Build_anywhere"><i>build anywhere</i> in what's new</a>.
</td></tr>
<tr>
<td><samp>BuildConditions <code title="required field 'query'">&lt;query&gt;</code></samp><br><i>(valid in any outdoor location)</i>
</td>
<td>If <samp>CanBuildHere</samp> is set, an optional <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether building is allowed currently.
</td></tr>
<tr>
<td><samp>LooserBuildRestrictions T</samp><br><i>(valid in any outdoor location)</i>
</td>
<td>If set, tiles don't need to be marked <samp>Buildable T</samp> or <samp>Diggable T</samp> in their properties. Tiles can be blocked with <samp>Buildable F</samp> instead. The other restrictions still apply.
</td></tr>
<tr>
<td><samp>ValidBuildRect <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code> <code title="required field 'width'">&lt;width&gt;</code> <code title="required field 'height'">&lt;height&gt;</code></samp><br><i>(valid in any outdoor location)</i>
</td>
<td>The tile area within the map where buildings may be placed. If omitted, buildings may be placed in any open space in the map.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Crops">Crops</span></h4>
<table class="wikitable">

<tbody><tr>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>AllowGiantCrops T</samp>
</td>
<td>If set with any non-blank value, <a href="../../external.html?link=https://stardewvalleywiki.com/Crops#Giant_Crops" title="Crops">giant crops</a> can grow in this location (if crops are also allowed per the <a href="#Custom_crops">crop data</a> or <a href="#Custom_location_contexts"><samp>PlantableLocations</samp> context field</a>).
</td></tr>
<tr>
<td><samp>DirtDecayChance <code title="required field 'chance'">&lt;chance&gt;</code></samp>
</td>
<td>The probability that each dirt tile will disappear overnight if it doesn't contain a crop, as a value between 0 (never) and 1 (always). Defaults to 0 (greenhouses), 0.1 (farms), and 1 (anywhere else).
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Farmhouse_interior">Farmhouse interior</span></h4>
<table class="wikitable">

<tbody><tr>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>FarmHouseStarterGift [<code title="required field 'id'">&lt;id&gt;</code> <code title="optional field 'count'">[count]</code>]+</samp>
</td>
<td>The items that should appear in the initial gift box placed in the farmhouse when the save is created. This consists of one or more pairs of item ID (which can be qualified or unqualified) and count. The count is optional on the last entry.
<p>For example, this will add 10 pufferfish (object 128) and a blobfish mask (hat 56):
</p>
<pre>FarmHouseStarterGift (O)128 10 (H)56 1</pre>
<p>If omitted, the default items (usually a 15 parsnip seeds) are added instead.
</p>
</td></tr></tbody></table>
<h4 class="in-block"><span id="Warps_&amp;_map_positions"></span><span class="mw-headline" id="Warps_.26_map_positions">Warps &amp; map positions</span></h4>
<table class="wikitable">

<tbody><tr>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>AllowWakeUpWithoutBed <code title="required field 'allow'">&lt;allow&gt;</code></samp>
</td>
<td>Whether the player can wake up in this location without a bed, similar to the island farmhouse. This is typically used with <samp>PassOutLocations</samp> in <a href="#Custom_location_contexts"><samp>Data/LocationContexts</samp></a>.
</td></tr>
<tr>
<td><samp>DefaultWarpLocation <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp><br><i>(valid in any location)</i>
</td>
<td>The default arrival tile, used when a player or NPC is added to the location without a target tile (e.g. using <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Console_commands" title="Modding:Console commands">debug commands</a> like <samp>debug warp</samp> or <samp>debug eventbyid</samp>).
</td></tr>
<tr>
<td><samp>PetBowlLocation <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp><br><i>(valid in the farm)</i>
</td>
<td>The default position of the pet bowl
</td></tr>
<tr>
<td><samp>SpouseRoomPosition <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp><br><i>(valid in farmhouse)</i>
</td>
<td>The top-left position at which to place the <a href="../../external.html?link=https://stardewvalleywiki.com/Marriage#Spouse_Rooms" title="Marriage">spouse room</a>.
</td></tr>
<tr>
<td><samp>TravelingCartPosition <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp><br><i>(valid in the forest)</i>
</td>
<td>The top-left position at which to place the <a href="../../external.html?link=https://stardewvalleywiki.com/Traveling_Cart" title="Traveling Cart">Traveling Cart</a>. This is the top-left corner of the collision box, so the roof will extend two tiles above this tile.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Other_map_property_changes">Other map property changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">Modding:Maps</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<table class="wikitable">

<tbody><tr>
<th>map property
</th>
<th>changes
</th></tr>
<tr>
<td><samp>Arch</samp><br><samp>asdf</samp><br><samp>Debris</samp><br><samp>Fish</samp>
</td>
<td>Removed (these were unused).
</td></tr>
<tr>
<td><samp>FarmHouseFlooring</samp><br><samp>FarmHouseFurniture</samp><br><samp>FarmHouseStarterSeedsPosition</samp><br><samp>FarmHouseWallpaper</samp>
</td>
<td>These now work independently. For example, you can now use <samp>FarmHouseFlooring</samp> without needing to set <samp>FarmHouseFurniture</samp> too.
</td></tr>
<tr>
<td><samp>Music</samp>
</td>
<td>Deprecated; use the music fields in <a href="#Custom_locations"><samp>Data/Locations</samp></a> instead. This property is only applied if the location has no music in <samp>Data/Locations</samp>. This was removed from all vanilla maps.
</td></tr>
<tr>
<td><samp>NPCWarp</samp><br><samp>Warp</samp>
</td>
<td>Now fault-tolerant. They'll automatically ignore extra spaces, log an informative warning if parsing still fails, and continue with the next warp if possible.
</td></tr>
<tr>
<td><samp>Stumps</samp>
</td>
<td>Now works in all locations.
</td></tr>
<tr>
<td><samp>UniquePortrait</samp><br><samp>UniqueSprite</samp>
</td>
<td>Deprecated; use <a href="#Custom_NPC_appearance">custom NPC appearances</a> instead. These properties will override NPC appearances. This was removed from all vanilla maps.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Tile_property_changes">Tile property changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">Modding:Maps</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<ul>
<li>You can now override a tile index property by setting it as a tile property.</li>
<li>Added new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">tile properties</a>:
<table class="wikitable">
<tbody><tr>
<th>layer
</th>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>Paths</samp>
</td>
<td><samp>SpawnTree <code title="required field 'category'">&lt;category&gt;</code> <code title="required field 'ID'">&lt;ID&gt;</code> <code title="required field 'Growth stage'">&lt;Growth stage&gt;</code> <code title="required field 'Regrowth stage'">&lt;Regrowth stage&gt;</code></samp>
</td>
<td>Spawns a tree when the map is created. <code title="required field 'category'">&lt;category&gt;</code> may be either <samp>wild</samp> or <samp>fruit</samp>. <samp>wild</samp> will spawn a <a href="../../external.html?link=https://stardewvalleywiki.com/Trees" title="Trees">wild tree</a>, while <samp>fruit</samp> will spawn a <a href="../../external.html?link=https://stardewvalleywiki.com/Fruit_Trees" title="Fruit Trees">fruit tree</a>.
</td></tr></tbody></table>
</li>
<li>Added new <samp>Action</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">tile properties</a>:
<table class="wikitable">

<tbody><tr>
<th>layer
</th>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BuildingSilo</samp>
</td>
<td>If a building covers this tile, enables <a href="../../external.html?link=https://stardewvalleywiki.com/Silo" title="Silo">silo</a> interactions on this tile subject to the building's <samp>HayCapacity</samp> field in <samp>Data/Buildings</samp>.
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action BuildingToggleAnimalDoor</samp>
</td>
<td>If a building covers this tile, opens or closes its animal door.
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Dialogue</samp>
</td>
<td> 
<ul><li>The message can now be a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a>.</li>
<li>Fixed the cursor not changing to the inspection icon when hovering on an <samp>Action Dialogue</samp> tile.</li></ul>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action Forge</samp>
</td>
<td>Opens the <a href="../../external.html?link=https://stardewvalleywiki.com/Forge" title="Forge">Forge</a> menu.
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action None</samp>
</td>
<td>Does nothing. This is used to mark the tile interactive if the click will be handled separately.
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action ObeliskWarp <code title="required field 'location name'">&lt;location name&gt;</code> <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code> <code title="optional field 'whether to dismount'">[whether to dismount]</code></samp>
</td>
<td>Warps the player to the specified location name and position with the <a href="../../external.html?link=https://stardewvalleywiki.com/Warp_Totem" title="Warp Totem">Obelisk</a> animation/sound effects.
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action OpenShop <code title="required field 'shop id'">&lt;shop id&gt;</code> <code title="optional field 'from direction'">[from direction]</code> <code title="optional field 'open time'">[open time]</code> <code title="optional field 'close time'">[close time]</code> <code title="optional field 'owner tile area'">[owner tile area]</code></samp>
</td>
<td>Open the <a href="#Custom_shops">shop</a> with the given <code title="required field 'shop id'">&lt;shop id&gt;</code>. All arguments besides the ID are optional:
<ul><li><code title="optional field 'from direction'">[from direction]</code>: if specified, the player must be standing in this direction relative to the shop (one of <samp>down</samp>, <samp>up</samp>, <samp>left</samp>, <samp>right</samp>, or <samp>none</samp>). Setting this to <samp>none</samp> disables the requirement. The default for most vanilla shops is <samp>down</samp>.</li>
<li><code title="optional field 'open time'">[open time]</code> and <code title="optional field 'close time'">[close time]</code>: the start &amp; end times in 26-hour format when the shop is available. Interacting with the tile outside those times does nothing.</li>
<li><code title="optional field 'owner tile area'">[owner tile area]</code>: if specified, the tile area which must contain one of the shop owners for the shop to be available. For a custom shop, these are defined by its <samp>Owners</samp> field. This can be specified in two forms: <samp><code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp> for a single tile, or <samp><code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code> <code title="required field 'width'">&lt;width&gt;</code> <code title="required field 'height'">&lt;height&gt;</code></samp> for a multi-tile area.</li></ul>
</td></tr>
<tr>
<td><samp>Buildings</samp>
</td>
<td><samp>Action PlayEvent <code title="required field 'event id'">&lt;event id&gt;</code> <code title="optional field 'check preconditions'">[check preconditions]</code> <code title="optional field 'skip if seen'">[skip if seen]</code> <code title="optional field 'fallback action'">[fallback action]</code></samp>
</td>
<td>Immediately start an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event</a>, subject to the conditions:
<ul><li><code title="optional field 'check preconditions'">[check preconditions]</code>: whether to ignore the action if the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Event_preconditions" title="Modding:Event data">event's preconditions</a> don't match (one of <samp>true</samp> or <samp>false</samp>). Default true.</li>
<li><code title="optional field 'skip if seen'">[skip if seen]</code>: whether to ignore the action if the player has already seen the given event. Default true.</li></ul>
<p>If the event doesn't start for any reason (including the preceding conditions):
</p>
<ul><li>If <code title="optional field 'fallback action'">[fallback action]</code> is specified, it'll be run as an action. This can be any <samp>Action</samp> tile property (without the "Action " prefix), like <code>Action PlayEvent 60367 true true PlayEvent 520702 false false</code> to play a different event.</li>
<li>Otherwise the action is silently ignored.</li></ul>
<p>For example, <code>Action PlayEvent 60367 false false</code> will replay the bus arrival event from the start of the game.
</p>
</td></tr></tbody></table>
</li>
<li>Added new <samp>TouchAction</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">tile properties</a>:
<table class="wikitable">

<tbody><tr>
<th>layer
</th>
<th>property
</th>
<th>explanation
</th></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction PlayEvent <code title="required field 'event id'">&lt;event id&gt;</code> <code title="optional field 'check preconditions'">[check preconditions]</code> <code title="optional field 'skip if seen'">[skip if seen]</code> <code title="optional field 'fallback action'">[fallback action]</code></samp>
</td>
<td>Equivalent to <samp>Action PlayEvent</samp>, but activated on touch. Note that <code title="optional field 'fallback action'">[fallback action]</code> is an <samp>Action</samp> tile property, <i>not</i> a <samp>TouchAction</samp> tile property.
</td></tr></tbody></table></li>
<li>Changed existing tile properties:
<table class="wikitable">

<tbody><tr>
<th>layer
</th>
<th>property
</th>
<th>reason
</th></tr>
<tr>
<td rowspan="4"><samp>Back</samp>
</td>
<td><samp>NoSpawn</samp>
</td>
<td>Added <samp>NoSpawn false</samp> form, which disables any previous <samp>NoSpawn</samp> property on the tile. For example, this can be used to enable spawning on a tile which has a <samp>NoSpawn</samp> tile index property.
</td></tr>
<tr>
<td><samp>TouchAction Bus</samp>
</td>
<td>Removed. This wasn't used by the game or mods.
</td></tr>
<tr>
<td><samp>TouchAction Emote</samp>
</td>
<td>Fixed error if the specified NPC isn't found.
</td></tr>
<tr>
<td><samp>Treasure</samp>
</td>
<td>Added <samp>Treasure Item <code title="required field 'item ID'">&lt;item ID&gt;</code></samp> form which accepts a <a href="#Custom_items">qualified or unqualified item ID</a>.
</td></tr>
<tr>
<td rowspan="2"><samp>Buildings</samp>
</td>
<td><samp>Action ItemChest</samp><br><samp>Action Minecart</samp><br><samp>Action RemoveChest</samp>
</td>
<td>Removed. These weren't used by the game or mods.
</td></tr>
<tr>
<td><samp>Action Kitchen</samp>
</td>
<td>Now works in any location (including those without a fridge).
</td></tr></tbody></table>
</li>
</ul>
<h3 class="in-block"><span id="Other_location/map_changes"></span><span class="mw-headline" id="Other_location.2Fmap_changes">Other location/map changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">Modding:Maps</a> and other pages as needed. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<ul><li>Farm data:
<ul><li>Added <samp>SpawnMonstersByDefault</samp> field to <samp>Data/AdditionalFarms</samp> to set the default value of the 'spawn monsters at night' <a href="../../external.html?link=https://stardewvalleywiki.com/Options#Advanced_Game_Options" title="Options">advanced save option</a>.</li>
<li>Fixed crash on new-save screen if the farm type's tooltip has no description.</li></ul></li>
<li>General location data:
<ul><li>All locations can now have animals. The <samp>IAnimalLocation</samp> is now obsolete and implemented by <samp>GameLocation</samp>.</li>
<li>Added new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Fish_data" title="Modding:Fish data">fishing areas</a> to simplify compatibility between fish &amp; map mods (specifically for hilltop farm, wilderness farm, town, and desert).</li>
<li>Added a descriptive error when a required location or layer isn't found. Mods can use <samp>map.RequireLayer</samp> and <samp>Game1.RequireLocation</samp> to get a location with similar error-checking.</li>
<li>Added <samp>WarpPathfindingCache</samp> for C# mods, which modularizes the NPC warp route logic. You can edit its <samp>IgnoreLocationNames</samp>, <samp>OverrideTargetNames</samp>, and <samp>GenderRestrictions</samp> fields if needed for custom locations.</li>
<li>Game logic which checks tile indexes is now more fault-tolerant, so it won't crash if an expected tile was edited.</li>
<li>Finished migrating <samp>DecoratableLocation</samp> flooring/wallpaper areas to string IDs (started in Stardew Valley 1.5.5).</li></ul></li>
<li>General map changes:
<ul><li>Added validation for <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map properties and tile properties</a>. If the format is invalid, the game will now log a detailed error and skip it.</li>
<li>Removed unused <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps#Paths_layer" title="Modding:Maps">path tiles</a> in <samp>Maps/paths</samp> and all map files.</li></ul></li>
<li>Location context data:
<ul><li>Building interiors now inherit their parent's location context by default.</li>
<li>Added <samp>Game1.locationContextData</samp> to cache the data from <samp>Data/LocationContexts</samp>.</li>
<li>Added constants for the vanilla context IDs like <samp>LocationContexts.IslandId</samp>.</li>
<li>Added validation for required location context IDs (and <samp>LocationContexts.Require(id)</samp> for mod logic).</li>
<li>Removed the <samp>Name</samp> field in <samp>Data/LocationContexts</samp>, which duplicated the ID.</li></ul></li></ul>
<ul>
<li>Added methods to simplify common operations:
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td rowspan="7"><samp>Building</samp>
</td>
<td><samp>GetParentLocation</samp>
</td>
<td>Get the location which contains this building.
</td></tr>
<tr>
<td><samp>IsInCurrentLocation</samp>
</td>
<td>Get whether the building is in the same location as the current player.
</td></tr>
<tr>
<td><samp>HasIndoors</samp>
</td>
<td>Get whether the building has an interior location.
</td></tr>
<tr>
<td><samp>GetIndoors</samp>
</td>
<td>Get the location within this building, if applicable.
</td></tr>
<tr>
<td><samp>HasIndoorsName</samp>
</td>
<td>Get whether the building has an interior location and its unique name matches the given value (like <code>building.HasIndoorsName("FarmHouse")</code>).
</td></tr>
<tr>
<td><samp>GetIndoorsName</samp>
</td>
<td>Get the unique name of the location within this building, if applicable.
</td></tr>
<tr>
<td>...
</td>
<td><i>see also <a href="#Other_building_changes">other building changes</a> for non-location methods.</i>
</td></tr>
<tr>
<td rowspan="7"><samp>Cabin</samp><br><samp>FarmHouse</samp>
</td>
<td><samp>GetCellar</samp>
</td>
<td>Get the <a href="../../external.html?link=https://stardewvalleywiki.com/Cellar" class="mw-redirect" title="Cellar">cellar</a> location linked to this cabin, if any.
</td></tr>
<tr>
<td><samp>CanAssignFarmhand</samp><br><samp>AssignFarmhand</samp>
</td>
<td><i>(Cabin only)</i> Check whether the cabin is available to assign to a farmhand, or perform the assignment.
</td></tr>
<tr>
<td><samp>HasOwner</samp>
</td>
<td>Get whether the home has an assigned player, regardless of whether they've finished creating their character.
</td></tr>
<tr>
<td><samp>OwnerId</samp>
</td>
<td>Get the unique ID of the player who owns this home, if any.
</td></tr>
<tr>
<td><samp>IsOwnedByCurrentPlayer</samp>
</td>
<td>Get whether the cabin belongs to the current player.
</td></tr>
<tr>
<td><samp>IsOwnerActivated</samp>
</td>
<td>Get whether the home has an assigned player and they've finished creating their character.
</td></tr>
<tr>
<td><samp>HasNpcSpouse</samp>
</td>
<td>Get whether the player who owns this home is married to any NPC (when used like <samp>HasNpcSpouse()</samp>) or a specific NPC (like <samp>HasNpcSpouse(name)</samp>). This also replaces <samp>shouldShowSpouseRoom()</samp>.
</td></tr>
<tr>
<td rowspan="2"><samp>Farm</samp>
</td>
<td><samp>GetStarterFarmhouseLocation</samp>
</td>
<td>Get the default tile position for the farmhouse. (See also <samp>farm.GetMainFarmHouseEntry()</samp>.)
</td></tr>
<tr>
<td><samp>GetStarterPetBowlLocation</samp>
</td>
<td>Get the default tile position for the pet bowl.
</td></tr>
<tr>
<td rowspan="19"><samp>GameLocation</samp>
</td>
<td><samp>AddDefaultBuildings</samp>
</td>
<td>Can be overridden to add custom buildings when the location is created and/or loaded. These can either be re-added whenever they're missing (like the vanilla farmhouse), or only built once on save creation (like the vanilla pre-built cabins).
<p>This replaces the former <samp>farm.AddModularShippingBin()</samp> method.
</p>
</td></tr>
<tr>
<td><samp>GetFridge</samp><br><samp>GetFridgePosition</samp>
</td>
<td>Get the fridge's chest or tile position, if the location has one.
</td></tr>
<tr>
<td><samp>GetSeason</samp><br><samp>GetSeasonIndex</samp><br><samp>GetSeasonKey</samp>
</td>
<td>Get the local season that applies within the location as an enum, number (like <samp>0</samp> for spring), or string (like <samp>spring</samp>) respectively. For example, it's always summer on <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a>.
</td></tr>
<tr>
<td><samp>GetWeather</samp><br><samp>IsDebrisWeatherHere</samp><br><samp>IsLightningHere</samp><br><samp>IsRainingHere</samp><br><samp>IsSnowingHere</samp>
</td>
<td>Get the current weather in this location's context, regardless of whether the player is indoors and sheltered from it.
</td></tr>
<tr>
<td><samp>InDesertContext</samp><br><samp>InIslandContext</samp><br><samp>InValleyContext</samp>
</td>
<td>Get whether this location is within the <samp>Island</samp> or <samp>Default</samp> location context respectively.
</td></tr>
<tr>
<td><samp>IsActiveLocation</samp>
</td>
<td>Get whether this location is actively synced to the current player (see <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#Farmhand_shadow_world" title="Modding:Modder Guide/Game Fundamentals">farmhand shadow world</a>).
</td></tr>
<tr>
<td><samp>IsTemporary</samp>
</td>
<td>Get whether this is a temporary location for a festival or minigame. This is cached based on the location name (e.g. locations starting with <samp>Temp</samp> or some other specific names).
</td></tr>
<tr>
<td><samp>GetLocationContextId</samp>
</td>
<td>Get the ID of the location context in <samp>Data/LocationContexts</samp> which contains this building.
</td></tr>
<tr>
<td><samp>GetContainingBuilding</samp>
</td>
<td>Get the building instance which contains this location (like the cabin for a cabin interior), if applicable.
</td></tr>
<tr>
<td><samp>GetParentLocation</samp>
</td>
<td>Get the parent location which contains this one (like the farm for a cabin interior), or <samp>null</samp> if it has no parent.
</td></tr>
<tr>
<td><samp>GetRootLocation</samp>
</td>
<td>Get the parent location which contains this one (like the farm for a cabin interior), or the location itself if it has no parent.
</td></tr>
<tr>
<td><samp>GetInstancedBuildingInteriors</samp>
</td>
<td>Get all building interiors within this location which are instanced to the building (i.e. not in <samp>Game1.locations</samp> separately).
</td></tr>
<tr>
<td><samp>GetMapPropertySplitBySpaces</samp><br><samp>GetTilePropertySplitBySpaces</samp>
</td>
<td>Get the value of a map/tile property and split it into individual words. If the map/tile property isn't defined, returns an empty array.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">GetMapPropertySplitBySpaces</span><span class="p">(</span><span class="s">"ScreenshotRegion"</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>HasMapPropertyWithValue</samp>
</td>
<td>Get whether a map property is defined and has a non-empty value.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">canUseCasks</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">HasMapPropertyWithValue</span><span class="p">(</span><span class="s">"CanCaskHere"</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>StoreHayInAnySilo</samp>
</td>
<td>Add hay to any silo with free space (preferring silos in the current location, then the farm, then anywhere).
</td></tr>
<tr>
<td><samp>TryGetMapProperty</samp>
</td>
<td>Get a map property value as a string, if it's defined.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">TryGetMapProperty</span><span class="p">(</span><span class="s">"Warps"</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">warps</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGetMapPropertyAs</samp>
</td>
<td>Get a map property and parse it into into a <samp>bool</samp>, <samp>double</samp>, <samp>Point</samp>, <samp>Rectangle</samp>, or <samp>Vector2</samp> value.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(!</span><span class="k">this</span><span class="p">.</span><span class="n">TryGetMapPropertyAs</span><span class="p">(</span><span class="s">"MailboxLocation"</span><span class="p">,</span> <span class="k">out</span> <span class="n">Point</span> <span class="n">position</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Point</span><span class="p">(</span><span class="m">68</span><span class="p">,</span> <span class="m">16</span><span class="p">);</span> <span class="c1">// default value</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>removeObjectsAndSpawned</samp>
</td>
<td>Remove all objects, bushes, resource clumps, and terrain features within a tile area.
</td></tr>
<tr>
<td><samp>OnBuildingConstructed</samp><br><samp>OnBuildingMoved</samp><br><samp>OnBuildingDemolished</samp>
</td>
<td>These methods are called for all players when any player constructs, moves, or demolishes a building.
</td></tr>
<tr>
<td rowspan="3"><samp>LibraryMuseum</samp>
</td>
<td><samp>HasDonatedArtifacts()</samp>
</td>
<td>Get whether any items have been donated to the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a>.
</td></tr>
<tr>
<td><samp>HasDonatedArtifactAt(tile)</samp>
</td>
<td>Get whether any donated item is currently placed at the given tile position within the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a>.
</td></tr>
<tr>
<td><samp>HasDonatedArtifact(itemId)</samp>
</td>
<td>Get whether an artifact with the given qualified or unqualified item ID has been donated to the <a href="../../external.html?link=https://stardewvalleywiki.com/Museum" title="Museum">museum</a>.
</td></tr>
<tr>
<td rowspan="2"><samp>MineShaft</samp>
</td>
<td><samp>GetLevelName</samp>
</td>
<td>Get the location name for a generated <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">mine</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Skull_Cavern" title="Skull Cavern">Skull Cavern</a> level.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">locationName</span> <span class="p">=</span> <span class="n">MineShaft</span><span class="p">.</span><span class="n">GetLevelName</span><span class="p">(</span><span class="m">10</span><span class="p">);</span> <span class="c1">// returns "UndergroundMine10"</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">warpFarmer</span><span class="p">(</span><span class="n">locationName</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>IsGeneratedLevel</samp>
</td>
<td>Get whether a location or location name is a generated <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">mine</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Skull_Cavern" title="Skull Cavern">Skull Cavern</a> level.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">locationName</span> <span class="p">=</span> <span class="s">"UndergroundMine10"</span><span class="p">;</span>
<span class="kt">bool</span> <span class="n">isMine</span> <span class="p">=</span> <span class="n">MineShaft</span><span class="p">.</span><span class="n">IsGeneratedLevel</span><span class="p">(</span><span class="n">locationName</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">level</span><span class="p">);</span> <span class="c1">// returns true, 10</span>
</pre></div>
</td></tr>
<tr>
<td><samp>VolcanoDungeon</samp>
</td>
<td><samp>GetLevelName</samp><br><samp>IsGeneratedLevel</samp>
</td>
<td>Equivalent to the matching <samp>MineShaft</samp> methods, but for the <a href="../../external.html?link=https://stardewvalleywiki.com/Volcano_Dungeon" title="Volcano Dungeon">Volcano Dungeon</a>.
</td></tr></tbody></table>
</li>
</ul>
<ul><li>Added map/tile property <samp>TryAdd</samp>/<samp>TryGetValue</samp> extensions in <samp>StardewValley.Extensions</samp> for string property values. For example, this lets you do <samp>map.Properties.TryGetValue(key, out string value)</samp>.</li>
<li><samp>MineShaft.tryToAddMonster</samp> now returns whether a monster was added.</li>
<li><samp>Game1.GetNumberBuildingsConstructed</samp> and <samp>location.getNumberBuildingsConstructed</samp> now have overloads to count all building types and/or specify whether to count under-construction buildings.</li>
<li>Fixed <samp>location.refurbishMapPortion</samp> copying <samp>Back</samp> source properties to the <samp>Building</samp> target layer.</li>
<li>Fixed door warps in custom indoor locations not consistently detected by the game.</li></ul>
<h2><span id="What's_new_for_buildings"></span><span class="mw-headline" id="What.27s_new_for_buildings">What's new for buildings</span></h2>
<h3 class="in-block"><span class="mw-headline" id="Custom_buildings">Custom buildings</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Blueprint_data" title="Modding:Blueprint data">Modding:Blueprint data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>You can now add custom buildings by editing the <samp>Data/Buildings</samp> asset. This consists of a string → model lookup, where...
</p>
<ul><li>The key is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for the building type.</li>
<li>The value is a model with the fields listed below.</li></ul>
<h4 class="in-block"><span class="mw-headline" id="Required_fields">Required fields</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Name</samp><br><samp>Description</samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the display name and description (e.g. shown in the construction menu).
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture under the game's Content folder.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Construction">Construction</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Builder</samp>
</td>
<td><i>(Optional)</i> The NPC from whom you can request construction. The vanilla values are <a href="../../external.html?link=https://stardewvalleywiki.com/Carpenter%27s_Shop" title="Carpenter's Shop"><samp>Robin</samp></a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Wizard%27s_Tower#Buildings" title="Wizard's Tower"><samp>Wizard</samp></a>, but you can specify a different name if a C# mod opens a construction menu for them. Defaults to <samp>Robin</samp>. If omitted, it won't appear in any menu.
</td></tr>
<tr>
<td><samp>BuildCost</samp>
</td>
<td><i>(Optional)</i> The gold cost to construct the building. Defaults to <span style="display: none;">data-sort-value="0"&gt;</span><span class="no-wrap"><noscript><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18"></noscript><span class="lazy-image-placeholder" style="width: 18px;height: 18px;" data-src="/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" data-alt="Gold.png" data-width="18" data-height="18"> </span>0g</span>.
</td></tr>
<tr>
<td><samp>BuildMaterials</samp>
</td>
<td><i>(Optional)</i> The materials you must provide to start construction, as a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry within the current list. Defaults to the <samp>ItemId</samp> if not specified.
</td></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td>The required item ID (qualified or unqualified).
</td></tr>
<tr>
<td><samp>Amount</samp>
</td>
<td>The number of the item required.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>BuildDays</samp>
</td>
<td><i>(Optional)</i> The number of days needed to complete construction (e.g. <samp>1</samp> for a building completed the next day). If set to 0, construction finishes instantly. Defaults to 0.
</td></tr>
<tr>
<td><samp>BuildCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether the building should be available in the construction menu. Defaults to always available.
</td></tr>
<tr>
<td><samp>BuildMenuDrawOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset to apply to the building sprite when drawn in the construction menu. Default none.
</td></tr>
<tr>
<td><samp>AdditionalPlacementTiles</samp>
</td>
<td><i>(Optional)</i> The extra tiles to treat as part of the building when placing it through the construction menu. For example, the farmhouse uses this to make sure the stairs are clear. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>TileArea</samp>
</td>
<td>The tile area relative to the top-left corner of the building, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields.
</td></tr>
<tr>
<td><samp>OnlyNeedsToBePassable</samp>
</td>
<td><i>(Optional)</i> Whether this area allows tiles that would normally not be buildable, so long as they are passable. For example, this is used to ensure that an entrance is accessible. Default false.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>IndoorItems</samp>
</td>
<td><i>(Optional)</i> The items to place in the building interior when it's constructed or upgraded. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry within the current list.
</td></tr>
<tr>
<td><samp>ItemId</samp>
</td>
<td>The <a href="#Custom_items">qualified item ID</a> for the item to place.
</td></tr>
<tr>
<td><samp>Tile</samp>
</td>
<td>The tile position at which to place the item, specified as an object with <samp>X</samp> and <samp>Y</samp> fields.
</td></tr>
<tr>
<td><samp>Indestructible</samp>
</td>
<td><i>(Optional)</i> Whether to prevent the player from destroying, picking up, or moving the item. Default false.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>MagicalConstruction</samp>
</td>
<td><i>(Optional)</i> Whether the building is magical. This changes the carpenter menu to a mystic theme while this building's blueprint is selected, and completes the construction instantly when placed.
</td></tr>
<tr>
<td><samp>AddMailOnBuild</samp>
</td>
<td><i>(Optional)</i> A list of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">letter IDs</a> to send to all players when the building is constructed for the first time.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Upgrades">Upgrades</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>BuildingToUpgrade</samp>
</td>
<td><i>(Optional)</i> The ID of the building for which this is an upgrade, or omit to allow constructing it as a new building. For example, the <a href="../../external.html?link=https://stardewvalleywiki.com/Coop" title="Coop">Big Coop</a> sets this to <samp>"Coop"</samp>. Any numbers of buildings can be an upgrade for the same building, in which case the player can choose one upgrade path.
</td></tr>
<tr>
<td><samp>IndoorItemMoves</samp>
</td>
<td><i>(Optional)</i> When applied as an upgrade to an existing building, the placed items in its interior to move when transitioning to the new map. This is a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry within the current list.
</td></tr>
<tr>
<td><samp>Source</samp>
</td>
<td>The tile position on which any item will be moved.
</td></tr>
<tr>
<td><samp>Destination</samp>
</td>
<td>The tile position to which to move the item.
</td></tr>
<tr>
<td><samp>Size</samp>
</td>
<td><i>(Optional)</i> The tile size of the area to move, specified as a model with <samp>X</samp> and <samp>Y</samp> fields. Defaults to a 1×1 area. If this is multiple tiles, the <samp>Source</samp> and <samp>Destination</samp> specify the top-left coordinate of the area.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>UpgradeSignTile</samp>
</td>
<td><i>(Optional)</i> The tile position relative to the top-left corner of the building where the upgrade sign will be placed when Robin is building an upgrade, in the form <samp>"<code title="required field 'x'">&lt;x&gt;</code>, <code title="required field 'y'">&lt;y&gt;</code>"</samp>. Defaults to approximately <samp>"5, 1"</samp> if the building interior type is <samp>Shed</samp>, else <samp>"0, 0"</samp>.
</td></tr>
<tr>
<td><samp>UpgradeSignHeight</samp>
</td>
<td><i>(Optional)</i> The pixel height of the upgrade sign when Robin is building an upgrade. Defaults to 0.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Exterior_behavior">Exterior behavior</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Size</samp>
</td>
<td><i>(Optional)</i> The building's width and height when constructed, measured in tiles. Defaults to a 1 x 1 area.
</td></tr>
<tr>
<td><samp>CollisionMap</samp>
</td>
<td><i>(Optional)</i> An ASCII text block which indicates which of the building's tiles the players can walk onto, where each character can be <samp>X</samp> (blocked) or <samp>O</samp> (passable). Defaults to all tiles blocked.
<p>For example, a <a href="../../external.html?link=https://stardewvalleywiki.com/Stable" title="Stable">stable</a> covers a 2x4 tile area with the front two tiles passable:
</p>
<pre>XXXX
XOOX</pre>
<p>When the collision map is parsed, leading/trailing whitespace is trimmed (both for the entire map and for each line). In JSON, you can specify it in two forms:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// single line with \n line breaks</span>
<span class="s2">"CollisionMap"</span><span class="o">:</span> <span class="s2">"XXXX\nXOOX"</span>

<span class="c1">// multi-line with optional indentation</span>
<span class="s2">"CollisionMap"</span><span class="o">:</span> <span class="s2">"</span>
<span class="s2">    XXXX</span>
<span class="s2">    XOOX</span>
<span class="s2">"</span>
</pre></div>
</td></tr>
<tr>
<td><samp>HumanDoor</samp>
</td>
<td><i>(Optional)</i> The position of the door that can be clicked to warp into the building interior. This is measured in tiles relative to the top-left corner tile. Defaults to disabled.
</td></tr>
<tr>
<td><samp>AnimalDoor</samp>
</td>
<td><i>(Optional)</i> The position and size of the door that animals use to enter/exit the building, if the building interior is an animal location, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. This is measured in tiles relative to the top-left corner tile. Defaults to disabled.
</td></tr>
<tr>
<td><samp>AnimalDoorOpenDuration</samp><br><samp>AnimalDoorCloseDuration</samp>
</td>
<td><i>(Optional)</i> The duration of the open/close animation for the animal door, measured in milliseconds. If omitted, the door switches to the open/closed state instantly.
</td></tr>
<tr>
<td><samp>AnimalDoorOpenSound</samp><br><samp>AnimalDoorCloseSound</samp>
</td>
<td><i>(Optional)</i> The sound which is played once each time the animal door is opened/closed. Disabled by default.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Exterior_appearance">Exterior appearance</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>SourceRect</samp>
</td>
<td><i>(Optional)</i> The building's pixel area within the <samp>Texture</samp>, specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. Defaults to the entire texture.
</td></tr>
<tr>
<td><samp>Skins</samp>
</td>
<td><i>(Optional)</i> The appearances which can be selected from Robin's menu (like stone/plank/log <a href="../../external.html?link=https://stardewvalleywiki.com/Cabin" title="Cabin">cabins</a>), in addition to the default appearance based on <samp>Texture</samp>. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for the skin.
</td></tr>
<tr>
<td><samp>Name</samp><br><samp>Description</samp>
</td>
<td><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">Tokenizable strings</a> for the skin's display name and description.
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture under the game's Content folder.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this skin should be available to apply. This doesn't change buildings which already have it applied. Defaults to always true.
</td></tr>
<tr>
<td><samp>BuildDays</samp><br><samp>BuildCost</samp><br><samp>BuildMaterials</samp>
</td>
<td><i>(Optional)</i> If set, overrides the equivalent field in the building data.
</td></tr>
<tr>
<td><samp>ShowAsSeparateConstructionEntry</samp>
</td>
<td><i>(Optional)</i> Whether this skin should be shown as a separate building option in the construction menu (like cabins). Default false.
</td></tr>
<tr>
<td><samp>Metadata</samp>
</td>
<td><i>(Optional)</i> Equivalent to the <samp>Metadata</samp> field on the building. Properties defined in this field are added to the building's metadata when this skin is active, overwriting the previous property with the same name if applicable. Default none.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>FadeWhenBehind</samp>
</td>
<td><i>(Optional)</i> Whether the building should become semi-transparent when the player is behind it. Default true.
</td></tr>
<tr>
<td><samp>DrawOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset applied to the building sprite's placement in the world. Default 0.
</td></tr>
<tr>
<td><samp>SeasonOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset to apply each season. This is applied to the <samp>SourceRect</samp> position by multiplying the offset by 0 (spring), 1 (summer), 2 (fall), or 3 (winter). Default 0, so all seasons use the same source rect.
</td></tr>
<tr>
<td><samp>SortTileOffset</samp>
</td>
<td><i>(Optional)</i> A Y tile offset applied when figuring out render layering. For example, a value of <samp>2.5</samp> will treat the building as if it was 2.5 tiles further up the screen for the purposes of layering. Default 0.
</td></tr>
<tr>
<td><samp>DrawLayers</samp>
</td>
<td><i>(Optional)</i> A list of textures to draw over or behind the building, with support for conditions and animations. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry within the current list.
</td></tr>
<tr>
<td><samp>SourceRect</samp>
</td>
<td>The pixel area within the <samp>texture</samp> to draw, formatted like <samp>"<code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code> <code title="required field 'width'">&lt;width&gt;</code> <code title="required field 'height'">&lt;height&gt;</code>"</samp>. If the overlay is animated via <samp>FrameCount</samp>, this is the area of the first frame.
</td></tr>
<tr>
<td><samp>DrawPosition</samp>
</td>
<td>The tile position at which to draw the top-left corner of the texture, relative to the building's top-left corner tile.
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td><i>(Optional)</i> The asset name of the texture to draw. Defaults to the building's default <samp>Texture</samp> field.
</td></tr>
<tr>
<td><samp>DrawInBackground</samp>
</td>
<td><i>(Optional)</i> Whether to draw the texture behind the building sprite (i.e. underlay) instead of over it.
</td></tr>
<tr>
<td><samp>SortTileOffset</samp>
</td>
<td><i>(Optional)</i> A Y tile offset applied when figuring out render layering. For example, a value of <samp>2.5</samp> will treat the texture as if it was 2.5 tiles further up the screen for the purposes of layering. Default 0.
</td></tr>
<tr>
<td><samp>OnlyDrawIfChestHasContents</samp>
</td>
<td><i>(Optional)</i> The ID of a chest defined in the <samp>Chests</samp> field which must contain items. If it's empty, this overlay won't be rendered. Default none.
</td></tr>
<tr>
<td><samp>FrameCount</samp><br><samp>FramesPerRow</samp><br><samp>FrameDuration</samp>
</td>
<td><i>(Optional)</i> If <samp>FrameCount</samp> is more than one, the building overlay will be animated automatically. For each frame, the <samp>SourceRect</samp> will be offset by its <samp>Width</samp> to the right up to <samp>FramesPerRow - 1</samp> times, and then down by its <samp>Height</samp>. Each frame will be rendered on-screen for <samp>FrameDuration</samp> milliseconds before switching to the next frame.
<p>For example, if you set <samp>FrameCount</samp> to 6 and <samp>FramesPerRow</samp> to 3, the building will expect the frames to be laid out like this in the spritesheet (where frame 1 matches <samp>SourceRect</samp>):
</p>
<pre>┌───┬───┬───┐
│ 1 │ 2 │ 3 │
├───┼───┼───┤
│ 4 │ 5 │ 6 │
└───┴───┴───┘
</pre>
</td></tr>
<tr>
<td><samp>AnimalDoorOffset</samp>
</td>
<td><i>(Optional)</i> A pixel offset applied to the draw layer when the animal door is open. While the door is opening, the percentage open is applied to the offset (e.g. 50% open = 50% offset).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>DrawShadow</samp>
</td>
<td><i>(Optional)</i> Whether to draw an automatic shadow along the bottom edge of the building's sprite. Default true.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Interior">Interior</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>IndoorMap</samp>
</td>
<td><i>(Optional)</i> The name of the map asset under <samp>Maps</samp> to load for the building interior. For example, <samp>"Shed"</samp> will load the <a href="../../external.html?link=https://stardewvalleywiki.com/Shed" title="Shed">shed</a>'s <samp>Maps/Shed</samp> map.
</td></tr>
<tr>
<td><samp>IndoorMapType</samp>
</td>
<td><i>(Optional)</i> The full name of the C# location class which will manage the building's interior location. This must be one of the vanilla types to avoid a crash when saving. There are too many to list here, but the most useful types are likely...
<ul><li><samp>StardewValley.AnimalHouse</samp>;</li>
<li><samp>StardewValley.Locations.Cabin</samp>;</li>
<li><samp>StardewValley.Locations.Cellar</samp>;</li>
<li><samp>StardewValley.Locations.DecoratableLocation</samp>;</li>
<li><samp>StardewValley.Locations.FarmCave</samp>;</li>
<li><samp>StardewValley.Locations.FarmHouse</samp>;</li>
<li><samp>StardewValley.Shed</samp>;</li>
<li>and <samp>StardewValley.SlimeHutch</samp>.</li></ul>
<p>Defaults to the generic <samp>StardewValley.GameLocation</samp> class.
</p>
</td></tr>
<tr>
<td><samp>NonInstancedIndoorLocation</samp>
</td>
<td><i>(Optional)</i> The name of the existing global location to treat as the building's interior, like <samp>FarmHouse</samp> and <samp>Greenhouse</samp> for their buildings.
<p>Each location can only be used by one building. If the location is already in use (e.g. because the player has two of this building), each subsequent building will use the <samp>IndoorMap</samp> and <samp>IndoorMapType</samp> instead. For example, the first greenhouse will use the global <samp>Greenhouse</samp> location, and any subsequent greenhouse will use a separate instanced location.
</p>
</td></tr>
<tr>
<td><samp>MaxOccupants</samp>
</td>
<td><i>(Optional)</i> The maximum number of animals who can live in this building.
</td></tr>
<tr>
<td><samp>AllowAnimalPregnancy</samp>
</td>
<td><i>(Optional)</i> Whether animals can get pregnant and produce offspring in this building. Default false.
</td></tr>
<tr>
<td><samp>ValidOccupantTypes</samp>
</td>
<td><i>(Optional)</i> A list of building IDs whose animals to allow in this building too. For example, <code>[ "Barn", "Coop" ]</code> will allow <a href="../../external.html?link=https://stardewvalleywiki.com/Barn" title="Barn">barn</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Coop" title="Coop">coop</a> animals in this building. Default none.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Item_processing">Item processing</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>HayCapacity</samp>
</td>
<td><i>(Optional)</i> The amount of hay that can be stored in this building. If built on the <a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm" title="The Farm">farm</a>, this works just like <a href="../../external.html?link=https://stardewvalleywiki.com/Silo" title="Silo">silos</a> and contributes to the farm's available hay.
</td></tr>
<tr>
<td><samp>ItemConversions</samp>
</td>
<td><i>(Optional)</i> The item processing rules which take input items and convert them into output items using the inventories defined by <samp>Chests</samp>. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this rule within the current list.
</td></tr>
<tr>
<td><samp>RequiredTags</samp>
</td>
<td>A list of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Context_tags" title="Modding:Items">context tags</a> to match against an input item. An item must have <i>all</i> of these tags to be accepted.
</td></tr>
<tr>
<td><samp>SourceChest</samp>
</td>
<td>The ID of the inventory defined in <samp>Chests</samp> from which to take input items.
</td></tr>
<tr>
<td><samp>DestinationChest</samp>
</td>
<td>The ID of the inventory defined in <samp>Chests</samp> in which to store output items.
</td></tr>
<tr>
<td><samp>ProducedItems</samp>
</td>
<td>The output items produced when an input item is converted. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries#Item_spawn_fields" title="Modding:Item queries">item spawn fields</a> for the generic item fields supported by machine output.
<p>If set to an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that the item will be produced, as a value between 0 (never drops) and 1 (always drops). Default 1 (100% chance).
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>RequiredCount</samp>
</td>
<td><i>(Optional)</i> The number of the input item to consume. Default 1.
</td></tr>
<tr>
<td><samp>MaxDailyConversions</samp>
</td>
<td><i>(Optional)</i> The maximum number of the input item which can be processed each day. Each conversion rule has its own separate maximum (e.g. if you have two rules each with a max of 1, then you can convert one of each daily). Set to -1 to allow unlimited conversions. Default 1.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Chests</samp>
</td>
<td><i>(Optional)</i> The input/output inventories that can be accessed from a tile on the building exterior. The allowed items are defined by the separate <samp>ItemConversions</samp> field. This is a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this chest within the current list.
<p>This is referenced from the <samp>ItemConversions</samp> field.
</p>
</td></tr>
<tr>
<td><samp>Type</samp>
</td>
<td>The inventory type. This must be one of:
<ul><li><samp>Chest</samp>: show a normal chest UI on click.</li>
<li><samp>Collect</samp>: provides items for the player to collect. Clicking the tile will do nothing (if empty), grab the item directly (if it only contains one item), else show a grab-only inventory UI.</li>
<li><samp>Load</samp>: lets the player add items for the building to process.</li></ul>
</td></tr>
<tr>
<td><samp>Sound</samp>
</td>
<td><i>(Optional)</i> The sound to play once when the player clicks the chest.
</td></tr>
<tr>
<td><samp>InvalidItemMessage</samp><br><samp>InvalidCountMessage</samp><br><samp>ChestFullMessage</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> to show when the player tries to add an item to the chest when...
<ul><li>it isn't a supported item;</li>
<li>it's supported but they don't have enough in their inventory;</li>
<li>the chest has no more room to accept it.</li></ul>
<p>If omitted, the player interaction is ignored with no message shown.
</p>
</td></tr>
<tr>
<td><samp>InvalidItemMessageCondition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether <samp>InvalidItemMessage</samp> should be shown. This can use item-related queries like <samp>ITEM_TYPE</samp>. Defaults to always true.
</td></tr>
<tr>
<td><samp>DisplayTile</samp>
</td>
<td><i>(Optional)</i> The chest's position on the building exterior, measured in tiles from the top-left corner of the building, specified in the form <samp>"<code title="required field 'x'">&lt;x&gt;</code>, <code title="required field 'y'">&lt;y&gt;</code>"</samp>. This affects the position of the 'item ready to collect' bubble. If omitted, the bubble is disabled.
</td></tr>
<tr>
<td><samp>DisplayHeight</samp>
</td>
<td><i>(Optional)</i> If <samp>DisplayTile</samp> is set, the chest's tile height like <samp>1.5</samp>.
</td></tr></tbody></table>
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Tile_interactions">Tile interactions</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ActionTiles</samp>
</td>
<td><i>(Optional)</i> A list of tiles which the player can click to trigger an <samp>Action</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map tile property</a>. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry within the current list.
</td></tr>
<tr>
<td><samp>Tile</samp>
</td>
<td>The tile position, relative to the building's top-left corner tile.
</td></tr>
<tr>
<td><samp>Action</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the action to perform, excluding the <samp>Action</samp> prefix. For example, <samp>"Dialogue Hi there @!"</samp> to show a messagebox like "<i>Hi there &lt;player name&gt;!</i>". The tokenizable string is expected before the action is raised. See the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps#Tile_properties_2" title="Modding:Maps">list of tile properties</a> for useful <samp>Action</samp> values.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>DefaultAction</samp>
</td>
<td><i>(Optional)</i> The default tile action if the clicked tile isn't in <samp>ActionTiles</samp>. Default none.
</td></tr>
<tr>
<td><samp>TileProperties</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map tile properties</a> to set. This consists of a list of models with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry within the current list.
</td></tr>
<tr>
<td><samp>Name</samp>
</td>
<td>The tile property name to set.
</td></tr>
<tr>
<td><samp>Value</samp>
</td>
<td><i>(Optional)</i> The tile property value to set, or omit to set a null value.
</td></tr>
<tr>
<td><samp>Layer</samp>
</td>
<td>The name of the map layer whose tiles to change.
</td></tr>
<tr>
<td><samp>TileArea</samp>
</td>
<td>The tiles to which to add the property, relative to the top-left corner of the building's collision box. This is specified as an object with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>AdditionalTilePropertyRadius</samp>
</td>
<td><i>(Optional)</i> When checking whether the player clicked on a <samp>TileProperties</samp> tile, an added distance around the building at which tile locations may be placed. Default 0, so only tile properties within the normal building bounds will work.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Advanced">Advanced</span></h4>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Metadata</samp>
</td>
<td><i>(Optional)</i> A list of custom properties applied to the building, which can optionally be overridden per-skin in the <samp>Skins</samp> field. Default none.
<p>The base game recognizes these properties:
</p>
<table class="wikitable">

<tbody><tr>
<th>property
</th>
<th>description
</th></tr>
<tr>
<td><samp>ChimneyPosition: <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp>
</td>
<td><i>(Optional)</i> The pixel position at which to place a chimney on the building exterior, relative to the top-left corner of the sprite. This will apply the same logic as the farmhouse chimney (e.g. producing smoke if there's a lit fireplace inside the building).
</td></tr>
<tr>
<td><samp>ChimneyPosition<code title="optional field 'upgrade level'">[upgrade level]</code>: <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp>
</td>
<td><i>(Optional, for farmhouses/cabins only)</i> Override <samp>ChimneyPosition</samp> for the given upgrade level, starting from 0 for the initial farmhouse/cabin. If there's no override for the current upgrade level, the highest override for a lower upgrade level is used (if any). For example, <samp>ChimneyPosition3</samp> would be used for the third house upgrade (and the fourth if there's no <samp>ChimneyPosition4</samp>).
</td></tr></tbody></table>
<p>This can also contain arbitrary custom properties, which C# mods can read using <samp>building.GetMetadata(key)</samp>.
</p>
</td></tr>
<tr>
<td><samp>BuildingType</samp>
</td>
<td><i>(Optional)</i> The full name of the C# type to instantiate for the building instance. Defaults to a generic <samp>Building</samp> instance.
<p><b>⚠ Caution:</b> this is meant to support vanilla building types like <samp>StardewValley.Shed</samp>. Setting this to a non-vanilla type will cause a crash when it's written to the save file, and may cause crashes in multiplayer. If you need custom behavior, consider handling it in C# based on the building type instead of creating a custom subclass; otherwise you'll need a framework mod like <a rel="nofollow" class="external text" href="../../external.html?link=https://www.nexusmods.com/stardewvalley/mods/1348">SpaceCore</a> to handle serialization and multiplayer sync.
</p>
</td></tr>
<tr>
<td><samp>ModData</samp>
</td>
<td><i>(Optional)</i> A string → string lookup of arbitrary <samp>modData</samp> values to attach to the building when it's constructed.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Build_anywhere">Build anywhere</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Blueprint_data" title="Modding:Blueprint data">Modding:Blueprint data</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">Modding:Maps</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<ul><li>You can now allow building construction for any location using the <a href="#Map.2Ftile_property_changes">new <samp>CanBuildHere</samp> and related map properties</a>. The game will adjust accordingly (e.g. Robin will let you choose where to construct the building).</li>
<li>Buildings and animals are no longer hardcoded to the <a href="../../external.html?link=https://stardewvalleywiki.com/The_Farm" title="The Farm">farm</a> location (except <a href="../../external.html?link=https://stardewvalleywiki.com/Cabin" title="Cabin">cabins</a> and the <a href="../../external.html?link=https://stardewvalleywiki.com/Farmhouse" title="Farmhouse">farmhouse</a> which still are).</li>
<li>Scything hay will now add hay to silos in any location, and animals will be auto-fed from hay in any location.</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Other_building_changes">Other building changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Blueprint_data" title="Modding:Blueprint data">Modding:Blueprint data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<dl><dd><i>See also: <a href="#Other_location.2Fmap_changes">other location changes</a> for location-related building changes.</i></dd></dl>
<dl><dt>General building changes</dt></dl>
<ul><li>Building display names &amp; descriptions are now in <samp>Strings/Buildings</samp> for reuse.</li>
<li>Removed <samp>Data/Blueprints</samp>. This has been replaced by <samp>Data/Buildings</samp> (building data) and <samp>Strings/Buildings</samp> (display names &amp; descriptions).</li></ul>
<ul>
<li>Added methods to simplify common operations:
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td rowspan="7"><samp>Building</samp>
</td>
<td><samp>CreateInstanceFromId</samp>
</td>
<td>Create a building instance from its type ID in <samp>Data/Buildings</samp>. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Building</span> <span class="n">shippingBin</span> <span class="p">=</span> <span class="n">Building</span><span class="p">.</span><span class="n">CreateInstanceFromId</span><span class="p">(</span><span class="s">"Shipping Bin"</span><span class="p">,</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">Zero</span><span class="p">);</span> <span class="c1">// creates an instance of StardewValley.Buildings.ShippingBin</span>
</pre></div>
</td></tr>
<tr>
<td><samp>GetData</samp><br><samp>TryGetData</samp>
</td>
<td>Get the data for the building's type from <samp>Data/Building</samp>.
</td></tr>
<tr>
<td><samp>GetMetadata</samp>
</td>
<td>Get a value from <a href="#Custom_buildings">the <samp>Metadata</samp> field in <samp>Data/Buildings</samp></a> for this building.
</td></tr>
<tr>
<td><samp>GetPaintDataKey</samp>
</td>
<td>Get the key in <samp>Data/PaintData</samp> for this building, if it has any.
</td></tr>
<tr>
<td><samp>ReloadBuildingData</samp>
</td>
<td>Apply the latest data in <samp>Data/Buildings</samp> to this building.
</td></tr>
<tr>
<td><samp>FinishConstruction</samp>
</td>
<td>If the building is being constructed or upgrade, instantly finish doing so.
</td></tr>
<tr>
<td><samp>UpdateTransparency</samp>
</td>
<td>Update the building transparency on tick for the local player's position.
<p>This method mainly exists to let mods override/patch the transparency logic.
</p>
</td></tr>
<tr>
<td><samp>Farm</samp>
</td>
<td><samp>GetMainFarmHouse</samp>
</td>
<td>Get the main <a href="../../external.html?link=https://stardewvalleywiki.com/Farmhouse" title="Farmhouse">farmhouse</a> building.
</td></tr>
<tr>
<td><samp>GameLocation</samp>
</td>
<td><samp>OnParentBuildingUpgraded</samp>
</td>
<td>Called when the building containing this location is upgraded, if applicable.
</td></tr></tbody></table>
</li>
</ul>
<ul><li>Added building <samp>id</samp> field, which uniquely identifies each building in the world.</li></ul>
<dl><dt><a href="../../external.html?link=https://stardewvalleywiki.com/Junimo_Hut" title="Junimo Hut">Junimo hut</a> changes</dt></dl>
<ul><li>The <samp>JunimoHut.cropHarvestRange</samp> field is now per-building and editable.</li></ul>
<dl><dt><a href="../../external.html?link=https://stardewvalleywiki.com/Fish_Pond" title="Fish Pond">Fish pond</a> changes</dt></dl>
<ul>
<li>In <samp>Data/FishPondData</samp>, added a <samp>Precedence</samp> field which sets the order in which entries are checked for a match (with lower values checked first). This ensures that the fallback entries are checked after specific fish. For consistency, vanilla entries use these values:
<table class="wikitable">

<tbody><tr>
<th>precedence
</th>
<th>used for
</th></tr>
<tr>
<td>0<br><small>(default value)</small>
</td>
<td>specific fish
</td></tr>
<tr>
<td>100
</td>
<td>custom groups (e.g. desert fish)
</td></tr>
<tr>
<td>500
</td>
<td>broad fish type (e.g. ocean fish)
</td></tr>
<tr>
<td>1000
</td>
<td>fallback (e.g. fish category)
</td></tr></tbody></table>
</li>
<li>In <samp>Data/FishPondData</samp>, the reward <samp>ItemId</samp> can now be an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">item query</a>.</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Legendary_Fish" class="mw-redirect" title="Legendary Fish">Legendary fish</a> can now be added to <a href="../../external.html?link=https://stardewvalleywiki.com/Fish_Pond" title="Fish Pond">fish ponds</a> if they have an entry in <samp>Data/FishPondData</samp>.</li>
</ul>
<h2><span id="What's_new_for_NPCs"></span><span class="mw-headline" id="What.27s_new_for_NPCs">What's new for NPCs</span></h2>
<h3 class="in-block"><span class="mw-headline" id="Custom_NPCs">Custom NPCs</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:NPC_data" title="Modding:NPC data">Modding:NPC data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:NPC_data" title="Modding:NPC data">Custom NPC data</a> has been overhauled in 1.6. The new <samp>Data/Characters</samp> asset (which replaces <samp>Data/NPCDispositions</samp> + <samp>Data/spousePatios</samp> + <samp>Data/spouseRooms</samp>) uses a data model format that's easier to edit and understand, and has a lot of fields to customize previously-hardcoded data.
</p>
<h4 class="in-block"><span class="mw-headline" id="Format_3">Format</span></h4>
<p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for the NPC like <samp>Example.ModId_NpcName</samp>, which will be used as the internal <samp>Name</samp> (not <samp>DisplayName</samp>).</li>
<li>The value is a model with the following fields.</li></ul>
<dl style="margin-left: 2em;">
<dt>Basic info:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the NPC's display name.
</td></tr>
<tr>
<td><samp>Language</samp>
</td>
<td><i>(Optional)</i> The language spoken by the NPC. One of <samp>Default</samp> (the default language understood by the player) or <samp>Dwarvish</samp> (which the player can only understand after finding the <a href="../../external.html?link=https://stardewvalleywiki.com/Dwarvish_Translation_Guide" title="Dwarvish Translation Guide">Dwarvish translation guide</a>). Default <samp>Default</samp>.
</td></tr>
<tr>
<td><samp>Gender</samp>
</td>
<td><i>(Optional)</i> The NPC's gender identity. One of <samp>Female</samp>, <samp>Male</samp>, or <samp>Undefined</samp>. Default <samp>Undefined</samp>.
</td></tr>
<tr>
<td><samp>Age</samp>
</td>
<td><i>(Optional)</i> The general age of the NPC. One of <samp>Child</samp>, <samp>Teen</samp>, or <samp>Adult</samp>. Default <samp>Adult</samp>.
<p>This affects generated dialogue lines (e.g. a child might say "stupid" and an adult might say "depressing"), generic dialogue (e.g. a child might respond to dumpster diving with "<i>Eww... What are you doing?</i>" and a teen would say "<i>Um... Why are you digging in the trash?</i>"), and the gift they choose as <a href="../../external.html?link=https://stardewvalleywiki.com/Feast_of_the_Winter_Star" title="Feast of the Winter Star">Feast of the Winter Star</a> gift-giver. Children are also excluded from item delivery quests.
</p>
</td></tr>
<tr>
<td><samp>Manner</samp>
</td>
<td><i>(Optional)</i> A measure of the character's general politeness, which affects some generic dialogue lines. One of <samp>Neutral</samp>, <samp>Polite</samp>, or <samp>Rude</samp>. Default <samp>Neutral</samp>.
</td></tr>
<tr>
<td><samp>SocialAnxiety</samp>
</td>
<td><i>(Optional)</i> A measure of the character's comfort with social situations, which affects some generic dialogue lines. One of <samp>Neutral</samp>, <samp>Outgoing</samp>, or <samp>Shy</samp>. Default <samp>Neutral</samp>.
</td></tr>
<tr>
<td><samp>Optimism</samp>
</td>
<td><i>(Optional)</i> A measure of the character's overall optimism. One of <samp>Neutral</samp>, <samp>Negative</samp>, or <samp>Positive</samp>. Default <samp>Neutral</samp>.
</td></tr>
<tr>
<td><samp>BirthSeason</samp>
</td>
<td><i>(Optional if non-social)</i> The season name (case-sensitive) for the NPC's birthday. One of <samp>spring</samp>, <samp>summer</samp>, <samp>fall</samp>, or <samp>winter</samp>. Default none.
</td></tr>
<tr>
<td><samp>BirthDay</samp>
</td>
<td><i>(Optional if non-social)</i> The day number for the NPC's birthday. Default 0.
</td></tr>
<tr>
<td><samp>HomeRegion</samp>
</td>
<td><i>(Optional)</i> The region of the world in which the NPC lives (one of <samp>Desert</samp>, <samp>Town</samp>, or <samp>Other</samp>). For example, only <samp>Town</samp> NPCs are counted for the introductions <a href="../../external.html?link=https://stardewvalleywiki.com/Quests#List_of_Story_Quests" title="Quests">quest</a>, can be selected as a secret santa for the <a href="../../external.html?link=https://stardewvalleywiki.com/Feast_of_the_Winter_Star" title="Feast of the Winter Star">Feast of the Winter Star</a>, or get a friendship boost from the <a href="../../external.html?link=https://stardewvalleywiki.com/Luau" title="Luau">Luau</a>. Default <samp>Other</samp>.
</td></tr>
<tr>
<td><samp>IsDarkSkinned</samp>
</td>
<td><i>(Optional)</i> Whether the NPC has dark skin, which affects the chance of children with the player having dark skin too. Default false.
</td></tr></tbody></table>
</dd>

<dt>Social features:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>CanSocialize</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether to enable social features (like birthdays, gift giving, <a href="../../external.html?link=https://stardewvalleywiki.com/Friendship" title="Friendship">friendship</a>, and an entry in the social tab). Default true.
</td></tr>
<tr>
<td><samp>CanBeRomanced</samp>
</td>
<td><i>(Optional)</i> Whether the NPC can be dated and romanced. This enables romance features for this NPC (like a 'single' label in the social menu, bouquet gifting, and marriage). Default false.
</td></tr>
<tr>
<td><samp>CanReceiveGifts</samp>
</td>
<td><i>(Optional)</i> Whether players can give gifts to this NPC. Default true.
<p>The NPC must also be social per <samp>CanSocialize</samp> and have an entry in <samp>Data/NPCGiftTastes</samp> to be giftable, regardless of this value.
</p>
</td></tr>
<tr>
<td><samp>CanCommentOnPurchasedShopItems</samp>
</td>
<td><i>(Optional)</i> Whether this NPC can comment on items that a player sold to a shop which then resold it to them. If null (or omitted), this will default to true if their <samp>HomeRegion</samp> is set to <samp>Town</samp>.
<p>The NPC must also be social per <samp>CanSocialize</samp> to allow it, regardless of this value.
</p>
</td></tr>
<tr>
<td><samp>CanGreetNearbyCharacters</samp>
</td>
<td><i>(Optional)</i> Whether this NPC can show a speech bubble greeting nearby players or NPCs, and or be greeted by other NPCs. Default true.
</td></tr>
<tr>
<td><samp>CanVisitIsland</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether the NPC can visit the <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a> resort once it's unlocked. Default true.
<p>The NPC must also be social per <samp>CanSocialize</samp> to visit the island, regardless of this value.
</p>
</td></tr>
<tr>
<td><samp>LoveInterest</samp>
</td>
<td><i>(Optional)</i> Unused.
</td></tr>
<tr>
<td><samp>Calendar</samp>
</td>
<td><i>(Optional)</i> Determines when the NPC's birthday is shown in the <a href="../../external.html?link=https://stardewvalleywiki.com/Calendar" title="Calendar">calendar</a>. Possible values:
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>HiddenAlways</samp>
</td>
<td>They never appear in the calendar.
</td></tr>
<tr>
<td><samp>HiddenUntilMet</samp>
</td>
<td>Until the player meets them, they don't appear in the calendar.
</td></tr>
<tr>
<td><samp>AlwaysShown</samp>
</td>
<td>They always appear in the calendar.
</td></tr></tbody></table>
<p>Defaults to <samp>AlwaysShown</samp>.
</p>
</td></tr>
<tr>
<td><samp>SocialTab</samp>
</td>
<td><i>(Optional)</i> Determines how the NPC is shown on the <a href="../../external.html?link=https://stardewvalleywiki.com/Friendship" title="Friendship">social tab</a> when unlocked. Possible values:
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>HiddenAlways</samp>
</td>
<td>They never appear in the social tab.
</td></tr>
<tr>
<td><samp>HiddenUntilMet</samp>
</td>
<td>Until the player meets them, they don't appear on the social tab.
</td></tr>
<tr>
<td><samp>UnknownUntilMet</samp>
</td>
<td>Until the player meets them, their name on the social tab is replaced with "???".
</td></tr>
<tr>
<td><samp>AlwaysShown</samp>
</td>
<td>They always appear in the social tab (including their name).
</td></tr></tbody></table>
<p>Defaults to <samp>UnknownUntilMet</samp>.
</p>
</td></tr>
<tr>
<td><samp>SpouseAdopts</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether the player will need to adopt children with this spouse, instead of either the player or NPC giving birth. If null, defaults to true for same-gender and false for opposite-gender spouses.
<p>The <samp>Target</samp> player is the one they're married to.
</p>
</td></tr>
<tr>
<td><samp>SpouseWantsChildren</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether the spouse will ask to have children. Defaults to true.
<p>The <samp>Target</samp> player is the one they're married to.
</p>
</td></tr>
<tr>
<td><samp>SpouseGiftJealousy</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether the <a href="../../external.html?link=https://stardewvalleywiki.com/Marriage#Jealousy" title="Marriage">spouse will get jealous of gifts to other NPCs</a>. Defaults to true.
<p>The <samp>Target</samp> player is the one they're married to, and the <samp>Target</samp> item is the one that was gifted.
</p>
</td></tr>
<tr>
<td><samp>SpouseGiftJealousyFriendshipChange</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Friendship" title="Friendship">friendship point</a> effect when the <samp>SpouseGiftJealously</samp> is triggered. Default -30.
</td></tr>
<tr>
<td><samp>SpouseRoom</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Marriage#Spouse_Rooms" title="Marriage">NPC's spouse room</a> in the farmhouse when the player marries them, if applicable. If this is omitted for a marriageable NPC, they'll use Abigail's spouse room by default.
<p>This consists of a model with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>MapAsset</samp>
</td>
<td><i>(Optional)</i> The asset name for the spouse room map. The <samp>Map/</samp> prefix is added automatically and shouldn't be included. Defaults to <samp>spouseRooms</samp>.
</td></tr>
<tr>
<td><samp>MapSourceRect</samp>
</td>
<td><i>(Optional)</i> The tile area within the <samp>MapAsset</samp> containing the spouse's room. This should usually be a 6x9 tile area, though the game will try to adjust to a different size. Specified as a model with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. Defaults to <samp>(0, 0, 6, 9)</samp>.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>SpousePatio</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Marriage#Spouse_Outside_Area" title="Marriage">NPC's patio area</a> on the farm when the player marries them, if any. Default none.
<p>This consists of a model with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>MapAsset</samp>
</td>
<td><i>(Optional)</i> The asset name for the patio area. The <samp>Map/</samp> prefix is added automatically and shouldn't be included. Defaults to <samp>spousePatios</samp>.
</td></tr>
<tr>
<td><samp>MapSourceRect</samp>
</td>
<td><i>(Optional)</i> The tile area within the <samp>MapAsset</samp> containing the spouse's patio area. This must be a 4x4 tile area. Specified as a model with <samp>X</samp>, <samp>Y</samp>, <samp>Width</samp>, and <samp>Height</samp> fields. Defaults to <samp>(0, 0, 4, 4)</samp>.
</td></tr>
<tr>
<td><samp>SpriteAnimationFrames</samp>
</td>
<td><i>(Optional)</i> The spouse's animation frames when they're in the patio. Each frame is an array containing [0] the sprite index in their spritesheet, and [1] the optional duration in milliseconds (default 100). If omitted or empty, the NPC won't be animated.
<p>For example, here is Abigail playing the flute:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"SpriteAnimationFrames"</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span> <span class="c1">// show index 16 for 500ms</span>
    <span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">19</span><span class="p">]</span>       <span class="c1">// if duration is omitted, defaults to 100ms</span>
<span class="p">]</span>
</pre></div>
</td></tr>
<tr>
<td><samp>SpriteAnimationPixelOffset</samp>
</td>
<td><i>(Optional)</i> The pixel offset to apply to the NPC's sprite when they're animated in the patio, specified as a model with <samp>X</samp> and <samp>Y</samp> fields. This is ignored if the NPC isn't animated via <samp>SpriteAnimationFrames</samp>. Default none.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>SpouseFloors</samp><br><samp>SpouseWallpapers</samp>
</td>
<td><i>(Optional)</i> The floors and wallpapers which the NPC may randomly apply to the farmhouse when married to the player. If omitted or empty, the NPC will randomly choose a base floor (0–39) or wallpaper (0–111).
</td></tr>
<tr>
<td><samp>IntroductionsQuest</samp>
</td>
<td><i>(Optional)</i> Whether to include this NPC in <a href="../../external.html?link=https://stardewvalleywiki.com/Quests#List_of_Story_Quests" title="Quests">the <i>introductions</i> quest</a>. If <samp>null</samp> (or omitted), this will default to true if the <samp>HomeRegion</samp> field is set to <samp>Town</samp>.
</td></tr>
<tr>
<td><samp>ItemDeliveryQuests</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this NPC can give item delivery quests. If <samp>null</samp> (or omitted), this will default to true if the <samp>HomeRegion</samp> field is set to <samp>Town</samp>.
<p>The NPC must also be social per <samp>CanSocialize</samp> to allow it, regardless of this value.
</p>
</td></tr>
<tr>
<td><samp>PerfectionScore</samp>
</td>
<td><i>(Optional)</i> Whether to include this NPC when checking whether the player has max friendships with every NPC for the perfection score. Default true.
<p>The NPC must also be social per <samp>CanSocialize</samp> to be counted, regardless of this value.
</p>
</td></tr>
<tr>
<td><samp>EndSlideShow</samp>
</td>
<td><i>(Optional)</i> How the NPC appears in the end-game perfection slide show. Possible values:
<table class="wikitable">

<tbody><tr>
<th>value
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Hidden</samp>
</td>
<td>The NPC doesn't appear in the slide show.
</td></tr>
<tr>
<td><samp>MainGroup</samp>
</td>
<td>The NPC is added to the main group of NPCs which walk across the screen.
</td></tr>
<tr>
<td><samp>TrailingGroup</samp>
</td>
<td>The NPC is added to the trailing group of NPCs which follow the main group.
</td></tr></tbody></table>
<p>Defaults to <samp>MainGroup</samp>.
</p>
</td></tr>
<tr>
<td><samp>FriendsAndFamily</samp>
</td>
<td><i>(Optional)</i> The NPC's closest friends and family, as a dictionary where the key is the other NPC's internal name and the value is an optional tokenizable string for the name to use in dialogue text (like 'mom'). Default none.
<p>This affects generic dialogue for revealing likes and dislikes to family members, and may affect <samp>inlaw_&lt;NPC&gt;</samp> dialogues. This isn't necessarily comprehensive.
</p>
</td></tr></tbody></table>
</dd>

<dt>Dumpster diving:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DumpsterDiveEmote</samp>
</td>
<td><i>(Optional)</i> The emote ID to show above the NPC's head when they see a player rummaging through trash. See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Emotes" title="Modding:Event data">emote IDs</a>. If omitted or <samp>null</samp>, the default depends on the NPC's age: a child will show sad (28), a teen will show a question mark (8), and an adult will show angry (12).
</td></tr>
<tr>
<td><samp>DumpsterDiveFriendshipEffect</samp>
</td>
<td><i>(Optional)</i> The friendship point change if this NPC sees a player rummaging through trash. Default -25.
</td></tr></tbody></table></dd>
<dt>Festivals:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>FlowerDanceCanDance</samp>
</td>
<td><i>(Optional)</i> Whether players can ask the NPC to dance at the Flower Dance festival. The possible values are <samp>true</samp> (can always ask), <samp>false</samp> (can never ask), or <samp>null</samp> (can ask if they're romanceable). Default <samp>null</samp>.
<p>If the NPC can dance, you should also add the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:NPC_data#Overworld_sprites" title="Modding:NPC data">dance sprite frames</a> and <samp>FlowerDance_Decline</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">dialogue text</a>. You can optionally set the <samp>FlowerDance_Accept</samp> dialogue too (though NPCs have a default accept dialogue if not).
</p>
</td></tr>
<tr>
<td><samp>WinterStarParticipant</samp>
</td>
<td><i>(Optional)</i>  A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this NPC can give and receive gifts at the <a href="../../external.html?link=https://stardewvalleywiki.com/Feast_of_the_Winter_Star" title="Feast of the Winter Star">Feast of the Winter Star</a>. If <samp>null</samp> (or omitted), this will default to true if the <samp>HomeRegion</samp> field is set to <samp>Town</samp>.
</td></tr>
<tr>
<td><samp>WinterStarGifts</samp>
</td>
<td>At the <a href="../../external.html?link=https://stardewvalleywiki.com/Feast_of_the_Winter_Star" title="Feast of the Winter Star">Feast of the Winter Star</a>, the possible gifts this NPC can give to players. A matching entry is selected at random.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries#Item_spawn_fields" title="Modding:Item queries">item spawn fields</a> for the generic item fields.
<p>If set to an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr></tbody></table>
</td></tr></tbody></table>
</dd><dt>Spawn rules:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>UnlockConditions</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether the NPC should be added to the world, checked when loading a save and when ending each day. This only affects whether the NPC is added when missing; returning false won't remove an NPC that's already been added. Defaults to true.
</td></tr>
<tr>
<td><samp>SpawnIfMissing</samp>
</td>
<td><i>(Optional)</i> Whether to add this NPC to the world if they're missing (if the <samp>UnlockConditions</samp> match and <samp>HomeLocation</samp> is valid). Default true.
</td></tr>
<tr>
<td><samp>Home</samp>
</td>
<td><i>(Optional)</i> The default place where this NPC spawns and returns each day. If there are multiple entries, the first matching one is used.
<p>This consists of a list of models with these fields: 
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry within the current list.
</td></tr>
<tr>
<td><samp>Location</samp>
</td>
<td><i>(Optional)</i> The internal name for the home location where this NPC spawns and returns each day. Default none.
</td></tr>
<tr>
<td><samp>Tile</samp>
</td>
<td><i>(Optional)</i> The tile position within the home location where this NPC spawns and returns each day. Specified as a model with <samp>X</samp> and <samp>Y</samp> fields. Defaults to <samp>(0, 0)</samp>.
</td></tr>
<tr>
<td><samp>Direction</samp>
</td>
<td><i>(Optional)</i> The default direction the NPC faces when they start each day. The possible values are <samp>down</samp>, <samp>left</samp>, <samp>right</samp>, and <samp>up</samp>. Defaults to <samp>up</samp>.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this entry can be selected. Default true.
</td></tr></tbody></table>
</td></tr></tbody></table>
</dd>

<dt>Appearance &amp; sprite:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>TextureName</samp>
</td>
<td><i>(Optional)</i> The <b>last segment</b> of the NPC's portrait and sprite asset names. For example, set to <samp>Abigail</samp> to use <samp>Portraits/Abigail</samp> and <samp>Characters/Abigail</samp> respectively. Defaults to the internal NPC name.
</td></tr>
<tr>
<td><samp>Appearance</samp>
</td>
<td><i>(Optional)</i> The portrait/sprite textures to use.
<p>This can list any number of appearance options. They'll be sorted by <samp>Precedence</samp> value (with lower values taking priority), then filtered to those whose fields match. If multiple matching appearances have precedence, one entry is randomly chosen based on their relative weight. This randomization is stable per day, so the NPC always makes the same choice until the next day. If a portrait/sprite can't be loaded (or no appearances match), the NPC will use the default asset based on <samp>TextureName</samp>.
</p><p>The NPC rechecks this field each time they change location.
</p><p>This consists of a list of models with these fields: 
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Id</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for this entry within the current list.
</td></tr>
<tr>
<td><samp>Season</samp>
</td>
<td><i>(Optional)</i> The season in which this appearance should be used (one of <samp>spring</samp>, <samp>summer</samp>, <samp>fall</samp>, or <samp>winter</samp>), or omit for any season. Defaults to any season.
</td></tr>
<tr>
<td><samp>Indoors</samp><br><samp>Outdoors</samp>
</td>
<td><i>(Optional)</i> Whether this appearance should be used when indoors and/or outdoors. Both default to true.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this entry can be selected. Default true.
</td></tr>
<tr>
<td><samp>Portrait</samp><br><samp>Sprite</samp>
</td>
<td><i>(Optional)</i> The asset name for the portraits and/or sprites texture to load. If omitted or it can't be loaded, it will default to the default asset per the <samp>Texture</samp> field.
</td></tr>
<tr>
<td><samp>IsIslandAttire</samp>
</td>
<td><i>(Optional)</i> Whether this is island beach attire worn at the resort. Default false.
<p>This is mutually exclusive: NPCs will never wear it in other contexts if it's true, and will never wear it as island attire if it's false.
</p>
</td></tr>
<tr>
<td><samp>Precedence</samp>
</td>
<td><i>(Optional)</i> The order in which this entry should be checked, where lower values are checked first. This can be a negative value. Default 0.
</td></tr>
<tr>
<td><samp>Weight</samp>
</td>
<td><i>(Optional)</i> If multiple entries with the same <samp>Precedence</samp> match, the relative weight to use when randomly choosing one. Default 1.
<p>For example, let's say two appearance entries match: one has a weight of 2, and the other has a weight of 1. Their probability of being chosen is 2/3 and 1/3 respectively.
</p>
</td></tr></tbody></table>
<p><b>Note:</b> the default textures based on <samp>TextureName</samp> must still exist, even if you use this field to override them.
</p>
</td></tr>
<tr>
<td><samp>MugShotSourceRect</samp>
</td>
<td><i>(Optional)</i> The 16x24-pixel area in the character's sprite texture to show as their mug shot icon in the calendar, social menu, and other contexts. Defaults to part of their first sprite.
</td></tr>
<tr>
<td><samp>Size</samp>
</td>
<td><i>(Optional)</i> The pixel size of the individual sprites in their overworld sprite spritesheet. Specified as a model with <samp>X</samp> and <samp>Y</samp> fields. Defaults to <samp>(16, 32)</samp>.
<p><b>Note:</b> sizes bigger than 16×32 will cause issues like broken spawning, pathfinding, misalignment in the <a href="../../external.html?link=https://stardewvalleywiki.com/Perfection" title="Perfection">perfection</a> end-game slide show, etc.
</p>
</td></tr>
<tr>
<td><samp>Breather</samp>
</td>
<td><i>(Optional)</i> Whether the chest on the NPC's overworld sprite puffs in and out as they breathe. Default true.
</td></tr>
<tr>
<td><samp>BreathChestRect</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Rectangle" title="Modding:Common data field types">rectangle</a> pixel area within the spritesheet which expands and contracts to simulate breathing, relative to the top-left corner of the source rectangle for their current sprite. Omit to calculate it automatically. This should be omitted for most NPCs, unless they have a non-standard size.
</td></tr>
<tr>
<td><samp>BreathChestPosition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Point" title="Modding:Common data field types">point</a> pixel offset to apply to the NPC's <samp>BreathChestPosition</samp> when drawn over the NPC. Omit to calculate it automatically. This should be omitted for most NPCs, unless they have a non-standard size.
</td></tr>
<tr>
<td><samp>Shadow</samp>
</td>
<td><i>(Optional)</i> The options for the shadow to draw under the NPC, or omit to apply the default shadow behavior.
<p>This consists of a model with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Visible</samp>
</td>
<td><i>(Optional)</i> Whether the shadow should be drawn. Default true.
</td></tr>
<tr>
<td><samp>Offset</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Point" title="Modding:Common data field types">point</a> pixel offset applied to the shadow position. Default zero.
</td></tr>
<tr>
<td><samp>Scale</samp>
</td>
<td><i>(Optional)</i> The scale at which to draw the shadow. Default 1.
<p>This is a multiplier applied to the default shadow scale, which can change based on factors like whether the NPC is jumping. For example, <samp>0.5</samp> means half the size it'd be drawn if you didn't specify a scale.
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>EmoteOffset</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Point" title="Modding:Common data field types">point</a> pixel offset applied to emote drawn over the NPC. Default zero.
</td></tr>
<tr>
<td><samp>ShakePortraits</samp>
</td>
<td><i>(Optional)</i> The portrait indexes which should shake when displayed. Default none.
</td></tr>
<tr>
<td><samp>KissSpriteIndex</samp>
</td>
<td><i>(Optional)</i> If the NPC can be married, the sprite index within their <samp>Texture</samp> to use when kissing a player. Default 28.
</td></tr>
<tr>
<td><samp>KissSpriteFacingDirection</samp>
</td>
<td><i>(Optional)</i> Whether the character is facing right (true) or left (false) in their <samp>KissSpriteIndex</samp>. The sprite will be flipped as needed to face the player. Default true.
</td></tr></tbody></table>
</dd>

<dt><a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">Hidden gift log emote</a>:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>HiddenProfileEmoteSound</samp>
</td>
<td><i>(Optional)</i> For the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">hidden gift log emote</a>, the <a href="#Custom_audio">cue ID</a> for the sound played when clicking the sprite. Defaults to <samp>drumkit6</samp>.
</td></tr>
<tr>
<td><samp>HiddenProfileEmoteDuration</samp>
</td>
<td><i>(Optional)</i> For the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">hidden gift log emote</a>, how long the animation plays measured in milliseconds. Defaults to 4000 (4 seconds).
</td></tr>
<tr>
<td><samp>HiddenProfileEmoteStartFrame</samp>
</td>
<td><i>(Optional)</i> For the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">hidden gift log emote</a>, the index within the NPC's overworld sprite spritesheet at which the animation starts. If omitted for a vanilla NPC, the game plays a default animation specific to that NPC; if omitted for a custom NPC, the game just shows them walking while facing down.
</td></tr>
<tr>
<td><samp>HiddenProfileEmoteFrameCount</samp>
</td>
<td><i>(Optional)</i> For the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">hidden gift log emote</a>, the number of frames in the animation. The first frame corresponds to <samp>HiddenProfileEmoteStartFrame</samp>, and each subsequent frame will use the next sprite in the spritesheet. Default 1.
<p>This has no effect if <samp>HiddenProfileEmoteStartFrame</samp> isn't set.
</p>
</td></tr>
<tr>
<td><samp>HiddenProfileEmoteFrameDuration</samp>
</td>
<td><i>(Optional)</i> For the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Gift_Log" title="Secrets">hidden gift log emote</a>, how long each animation frame is shown on-screen before switching to the next one, measured in milliseconds. Default 200.
<p>This has no effect if <samp>HiddenProfileEmoteStartFrame</samp> isn't set.
</p>
</td></tr></tbody></table>
</dd>

<dt>Advanced:</dt>
<dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr>
<tr>
<td><samp>FormerCharacterNames</samp>
</td>
<td><i>(Optional)</i> The former NPC names which may appear in save data. If matched, the game will rename the NPC and update related data (e.g. friendship).
<p>A former name is only applied if:
</p>
<ol><li>it doesn't match a current ID in <samp>Data/Characters</samp>;</li>
<li>the save has an NPC with the former name;</li>
<li>the save doesn't already have an NPC with the new name.</li></ol>
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"FormerCharacterNames"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"SomeOldName"</span> <span class="p">]</span>
</pre></div>
<p>Former names can have any format, but they must be <b>globally</b> unique. They can't match the ID or <samp>FormerCharacterNames</samp> of any other NPC in <samp>Data/Characters</samp> (whether vanilla or custom).
</p>
</td></tr>
<tr>
<td><samp>FestivalVanillaActorIndex</samp>
</td>
<td><i>(Optional, Specialized)</i> The NPC's index in the <samp>Maps/characterSheet</samp> tilesheet, if applicable. This is used for placing vanilla NPCs in festivals from the map; custom NPCs should use the <samp>&lt;layer&gt;_additionalCharacters</samp> field in the festival data instead.
</td></tr></tbody></table>
</dd>
</dl>
<h4 class="in-block"><span class="mw-headline" id="Examples">Examples</span></h4>
<p>For example, this content pack adds a new <i>Amabel</i> NPC with full social features:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/Characters"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"{{ModId}}_Amabel"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"DisplayName"</span><span class="o">:</span> <span class="s2">"Amabel"</span><span class="p">,</span> <span class="c1">// this would normally use {{i18n:}} to support translations</span>
                    <span class="s2">"BirthSeason"</span><span class="o">:</span> <span class="s2">"Fall"</span><span class="p">,</span>
                    <span class="s2">"BirthDay"</span><span class="o">:</span> <span class="mi">14</span><span class="p">,</span>
                    <span class="s2">"HomeRegion"</span><span class="o">:</span> <span class="s2">"Town"</span><span class="p">,</span>
                    <span class="s2">"Gender"</span><span class="o">:</span> <span class="s2">"Female"</span><span class="p">,</span>
                    <span class="s2">"Age"</span><span class="o">:</span> <span class="s2">"Teen"</span><span class="p">,</span>
                    <span class="s2">"Manner"</span><span class="o">:</span> <span class="s2">"Rude"</span><span class="p">,</span>
                    <span class="s2">"SocialAnxiety"</span><span class="o">:</span> <span class="s2">"Outgoing"</span><span class="p">,</span>
                    <span class="s2">"Optimism"</span><span class="o">:</span> <span class="s2">"Neutral"</span><span class="p">,</span>

                    <span class="s2">"CanBeRomanced"</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="s2">"LoveInterest"</span><span class="o">:</span> <span class="s2">"Abigail"</span><span class="p">,</span>

                    <span class="s2">"Home"</span><span class="o">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">"Id"</span><span class="o">:</span> <span class="s2">"Default"</span><span class="p">,</span>
                            <span class="s2">"Location"</span><span class="o">:</span> <span class="s2">"SeedShop"</span><span class="p">,</span>
                            <span class="s2">"Tile"</span><span class="o">:</span> <span class="p">{</span> <span class="s2">"X"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"Y"</span><span class="o">:</span> <span class="mi">9</span> <span class="p">},</span>
                            <span class="s2">"Direction"</span><span class="o">:</span> <span class="s2">"Left"</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>You can also add non-social NPCs which don't have birthdays or friendship points, accept gifts, give quests, etc:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/Characters"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"{{ModId}}_Belwick"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"DisplayName"</span><span class="o">:</span> <span class="s2">"Belwick"</span><span class="p">,</span> <span class="c1">// this would normally use {{i18n:}} to support translations</span>

                    <span class="s2">"SocialTab"</span><span class="o">:</span> <span class="s2">"HiddenAlways"</span><span class="p">,</span>
                    <span class="s2">"CanSocialize"</span><span class="o">:</span> <span class="s2">"FALSE"</span><span class="p">,</span>
                    <span class="s2">"IntroductionsQuest"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="s2">"PerfectionScore"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="s2">"EndSlideShow"</span><span class="o">:</span> <span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Custom_NPC_appearance">Custom NPC appearance</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:NPC_data" title="Modding:NPC data">Modding:NPC data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>Each NPC can now have any number of custom portraits/sprites in <samp>Data/Characters</samp> with arbitrary conditions. This lets mods add features like indoor/outdoor outfits without the performance impact of reloading textures. If multiple outfits apply, the game will choose between them with a day-stable randomization.
</p><p>For example, you can load indoor/outdoor outfits for a custom NPC to swap between automatically:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// add base indoor/outdoor sprites</span>
<span class="p">{</span>
    <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"Load"</span><span class="p">,</span>
    <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Characters/Johnny_Indoor, Characters/Johnny_Outdoor, Portraits/Johnny_Indoor, Portraits/Johnny_Outdoor"</span><span class="p">,</span>
    <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/{{Target}}.png"</span>
<span class="p">},</span>

<span class="c1">// apply any overlays needed</span>
<span class="p">{</span>
    <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditImage"</span><span class="p">,</span>
    <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Characters/Johnny_Indoor, Portraits/Johnny_Indoor"</span><span class="p">,</span>
    <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/overlays/{{Target}}_married.png"</span><span class="p">,</span>
    <span class="s2">"When"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"Spouse"</span><span class="o">:</span> <span class="s2">"Johnny"</span>
    <span class="p">}</span>
<span class="p">},</span>

<span class="c1">// add NPC</span>
<span class="p">{</span>
    <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
    <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/Characters"</span><span class="p">,</span>
    <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"SomeMod.Id_Johnny"</span><span class="o">:</span> <span class="p">{</span>
            <span class="p">...,</span>
            <span class="s2">"Appearance"</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">"Id"</span><span class="o">:</span> <span class="s2">"Outdoors"</span><span class="p">,</span>
                    <span class="s2">"Indoors"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="s2">"Portrait"</span><span class="o">:</span> <span class="s2">"Portraits/Johnny_Outdoor"</span><span class="p">,</span>
                    <span class="s2">"Sprite"</span><span class="o">:</span> <span class="s2">"Characters/Johnny_Outdoor"</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">"Id"</span><span class="o">:</span> <span class="s2">"Default"</span><span class="p">,</span>
                    <span class="s2">"Portrait"</span><span class="o">:</span> <span class="s2">"Portraits/Johnny_Indoor"</span><span class="p">,</span>
                    <span class="s2">"Sprite"</span><span class="o">:</span> <span class="s2">"Characters/Johnny_Indoor"</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>See the <samp>Appearance</samp> field in <a href="#Custom_NPCs">custom NPC data</a> for more info.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_farm_animals">Custom farm animals</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Animal_data" title="Modding:Animal data">Modding:Animal data</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now create and edit <a href="../../external.html?link=https://stardewvalleywiki.com/Animals" title="Animals">farm animals</a> by editing the revamped <samp>Data/FarmAnimals</samp> asset. This changes to a data model, adds built-in support for custom animals, and allows far more customizability per animal (like its size, growth, produce, appearance and sounds, etc).
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_pets">Custom pets</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Pets" title="Modding:Pets">Modding:Pets</a>. This section below focuses on what's new in 1.6.</div>
<ul><li>You can now create and customize <a href="../../external.html?link=https://stardewvalleywiki.com/Animals#Cat_or_Dog" title="Animals">pets</a> &amp; pet breeds by editing the new <samp>Data/Pets</samp> asset.*</li>
<li>The pet bowl is now a building which can be constructed or moved. Each pet is assigned to an available pet bowl. For C# mods, each pet now has a <samp>guid</samp> field populated with a unique ID, and each pet bowl has a <samp>petGuid</samp> field which tracks its owner (see the <samp>PetBowl::HasPet()</samp> and <samp>PetBowl::FindPet()</samp> methods).</li>
<li>In the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Basic_format" title="Modding:Event data">event character setup</a>, you can now use <samp>pet</samp> to add a pet of the player's selected type. Its actor name will be <samp>PetActor</samp> in other event commands. This supersedes <samp>cat</samp> (with name <samp>Cat</samp>) and <samp>dog</samp> (with name <samp>Dog</samp>), though those still work too.</li>
<li>For C# mods:
<ul><li>All pets now use a generic <samp>Pet</samp> class, instead of <samp>Cat</samp> or <samp>Dog</samp>. The pet type is tracked by the pet's <samp>petType</samp> field.</li>
<li>The player's preferred pet type is tracked by <samp>Game1.player.whichPetType</samp>. The former <samp>catPerson</samp> field is now readonly and checks that field.</li>
<li>Added <samp>Pet.type_cat</samp> and <samp>Pet.type_dog</samp> constants for the default pet types.</li></ul></li></ul>
<h3 class="in-block"><span class="mw-headline" id="Custom_monster_eradication_goals">Custom monster eradication goals</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<dl><dd><i>See also: <a href="#Monster_eradication_goal_flag_changes">Monster eradication goal flag changes</a>.</i></dd></dl>
<p>You can now add/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild" title="Adventurer's Guild">Adventurer's Guild</a> monster eradication goals by editing the new <samp>Data/MonsterSlayerQuests</samp> data asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for the monster eradication goal.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the goal's display name, shown on the board in the Adventurer's Guild.
</td></tr>
<tr>
<td><samp>Targets</samp>
</td>
<td>A list of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Monster_data#Monster_IDs" title="Modding:Monster data">monster IDs</a> that are counted towards the <samp>Count</samp>.
</td></tr>
<tr>
<td><samp>Count</samp>
</td>
<td>The total number of monsters (matching the <samp>Targets</samp>) which must be defeated to complete this goal.
</td></tr>
<tr>
<td><samp>RewardItemId</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_items">qualified ID</a> for the item that can be collected from <a href="../../external.html?link=https://stardewvalleywiki.com/Gil" title="Gil">Gil</a> when this goal is completed. Default none.
</td></tr>
<tr>
<td><samp>RewardItemPrice</samp>
</td>
<td><i>(Optional)</i> The price of the <samp>RewardItemId</samp> in <a href="../../external.html?link=https://stardewvalleywiki.com/Marlon" title="Marlon">Marlon</a>'s shop after the goal is completed, or -1 to disable buying it from Marlon. Default -1.
</td></tr>
<tr>
<td><samp>RewardDialogue</samp><br><samp>RewardDialogueFlag</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for custom <a href="../../external.html?link=https://stardewvalleywiki.com/Gil" title="Gil">Gil</a> dialogue shown when talking to him after completing the goal, and an optional <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail flag</a> to set when the player has seen the dialogue. Both default to none.
<p>If there are reward items, they're shown after this dialogue.
</p><p>If <samp>RewardDialogue</samp> is used without <samp>RewardDialogueFlag</samp>, then this dialogue will be shown each time the reward menu is opened after completing the goal, until the player collects the reward items. If the <samp>RewardItems</samp> isn't set, this can safely be omitted since the goal will be marked collected immediately.
</p><p>This doesn't send a letter; see <samp>RewardMail</samp> or <samp>RewardMailAll</samp> for that.
</p>
</td></tr>
<tr>
<td><samp>RewardFlag</samp><br><samp>RewardFlagAll</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">mail flag ID</a> to set for the current player (<samp>RewardFlag</samp>) or all players (<samp>RewardFlagAll</samp>) when talking to <a href="../../external.html?link=https://stardewvalleywiki.com/Gil" title="Gil">Gil</a> after completing the goal. Default none.
<p>Note that <samp>RewardFlag</samp> is usually not needed, since the game will also set a <samp>Gil_<code title="required field 'goal ID'">&lt;goal ID&gt;</code></samp> flag regardless.
</p><p>This doesn't send a letter; see <samp>RewardMail</samp> or <samp>RewardMailAll</samp> for that.
</p>
</td></tr>
<tr>
<td><samp>RewardMail</samp><br><samp>RewardMailAll</samp>
</td>
<td><i>(Optional)</i> The mail letter ID to add to the mailbox tomorrow for the current player (<samp>RewardMail</samp>) or all players (<samp>RewardMailAll</samp>). Default none.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Custom_phone_calls">Custom phone calls</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>Mods can now extend the <a href="../../external.html?link=https://stardewvalleywiki.com/Telephone" title="Telephone">telephone</a> with custom calls (both incoming calls, and phone numbers which the player can call).
</p>
<h4 class="in-block"><span class="mw-headline" id="Incoming_calls">Incoming calls</span></h4>
<p>You can add or customize incoming calls by editing the <samp>Data/IncomingPhoneCalls</samp> asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for the incoming call data.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Dialogue</samp>
</td>
<td>The dialogue text to show when the player answers the phone. This can use the full <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">dialogue format</a> (including questions and different dialogue based on the selected answer).
</td></tr>
<tr>
<td><samp>FromNpc</samp>
</td>
<td><i>(Optional)</i> The internal name of the NPC making the call. If specified, that NPC's name and portrait will be shown.
</td></tr>
<tr>
<td><samp>FromPortrait</samp>
</td>
<td><i>(Optional)</i> The asset name for the portrait spritesheet to display (like <samp>Portraits/Abigail</samp>). If <samp>FromNpc</samp> is specified too, this overrides the portrait from that NPC. If both <samp>FromNpc</samp> and <samp>FromDisplayName</samp> are null, this portrait will be shown with the display name "???".
</td></tr>
<tr>
<td><samp>FromDisplayName</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the calling NPC's display name. If <samp>FromNpc</samp> is specified too, this overrides the display name from that NPC.
</td></tr>
<tr>
<td><samp>MaxCalls</samp>
</td>
<td><i>(Optional)</i> The maximum number of times a player can receive this phone call, or <samp>-1</samp> for no limit. Default 1.
</td></tr>
<tr>
<td><samp>TriggerCondition</samp><br><samp>RingCondition</samp>
</td>
<td><i>(Optional)</i> If set, a game state query which indicates whether to trigger this phone call (<samp>TriggerCondition</samp>) or whether the phone rings when this call is received (<samp>RingCondition</samp>).
<p>Whether a player receives this call depends on both fields: <samp>TriggerCondition</samp> is checked on the main player before sending the call to all players, then <samp>RingCondition</samp> is checked on each player to determine whether the phone rings for them.
</p>
</td></tr>
<tr>
<td><samp>IgnoreBaseChance</samp>
</td>
<td><i>(Optional)</i> Whether to ignore the 1% base chance when checking whether to trigger an incoming call. If true, the game will check if this call can be received regardless of the base chance. Default false.
</td></tr>
<tr>
<td><samp>SimpleDialogueSplitBy</samp>
</td>
<td><i>(Optional, specialized)</i> If set, marks the call as having a simple dialogue string without an NPC name and portrait, with lines split into multiple boxes by this substring. For example, <code>"SimpleDialogueSplitBy": "#"</code> will split <code>Box A#Box B#Box C</code> into three consecutive dialogue boxes.
<p>You should omit this in most cases, and use the regular dialogue format in <samp>Dialogue</samp> to split lines if needed. This is mainly intended to support some older vanilla phone calls.
</p>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h4 class="in-block"><span id="Custom_handlers_in_C#"></span><span class="mw-headline" id="Custom_handlers_in_C.23">Custom handlers in C#</span></h4>
<p>C# mods can implement <samp>StardewValley.PhoneCalls.IPhoneHandler</samp> and add it to <samp>Phone.PhoneHandlers</samp> for full control over both incoming and outgoing calls:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">/// &lt;summary&gt;The mod entry point.&lt;/summary&gt;</span>
<span class="k">internal</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">ModEntry</span> <span class="p">:</span> <span class="n">Mod</span>
<span class="p">{</span>
    <span class="c1">/// &lt;inheritdoc /&gt;</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Entry</span><span class="p">(</span><span class="n">IModHelper</span> <span class="n">helper</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Phone</span><span class="p">.</span><span class="n">PhoneHandlers</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">CustomPhoneHandler</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">/// &lt;summary&gt;A custom phone handler.&lt;/summary&gt;</span>
<span class="k">internal</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">CustomPhoneHandler</span> <span class="p">:</span> <span class="n">IPhoneHandler</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
<p>See <samp>StardewValley.PhoneCalls.DefaultPhoneHandler</samp> in the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Get_Started#decompile" title="Modding:Modder Guide/Get Started">decompiled game code</a> for an example implementation.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_shops">Custom shops</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Shops" title="Modding:Shops">Modding:Shops</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now create and edit shops via the new <samp>Data/Shops</samp> asset. See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Shops" title="Modding:Shops">Modding:Shops</a> for documentation and examples.
</p>
<h3 class="in-block"><span class="mw-headline" id="Dialogue_changes">Dialogue changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">Modding:Dialogue</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<ul>
<li>Added new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">dialogue</a> keys:
<table class="wikitable">

<tbody><tr>
<th>asset
</th>
<th>key format
</th>
<th>description
</th></tr>
<tr>
<td rowspan="22"><samp>Characters/Dialogue/&lt;name&gt;</samp>
</td></tr>
<tr>
<td><samp>AcceptBirthdayGift_<code title="required field 'id'">&lt;id&gt;</code></samp><br><samp>AcceptBirthdayGift_<code title="required field 'tag'">&lt;tag&gt;</code></samp><br><samp>AcceptBirthdayGift_<code title="required field 'taste'">&lt;taste&gt;</code></samp><br><samp>AcceptBirthdayGift_Negative</samp><br><samp>AcceptBirthdayGift_Positive</samp><br><samp>AcceptBirthdayGift</samp>
</td>
<td>Shown when receiving a birthday gift from the player. If omitted, defaults to the generic translations for all NPCs.
<p>The first matching dialogue is used in this order:
</p>
<ol><li>by item ID (like <samp>AcceptBirthdayGift_(O)128</samp>);</li>
<li>by context tag (like <samp>AcceptBirthdayGift_category_fish</samp>);</li>
<li>by gift taste (one of <samp>AcceptBirthdayGift_Loved</samp>, <samp>AcceptBirthdayGift_Liked</samp>, <samp>AcceptBirthdayGift_Neutral</samp>, <samp>AcceptBirthdayGift_Disliked</samp>, or <samp>AcceptBirthdayGift_Hated</samp>);</li>
<li><samp>AcceptBirthdayGift_Negative</samp> (hated or disliked gift) or <samp>AcceptBirthdayGift_Positive</samp> (neutral, liked, or loved gift);</li>
<li>for all items (via <samp>AcceptBirthdayGift</samp>).</li></ol>
</td></tr>
<tr>
<td><samp>AcceptBouquet</samp>
</td>
<td>Shown when the NPC accepts a <a href="../../external.html?link=https://stardewvalleywiki.com/Bouquet" title="Bouquet">bouquet</a> from the player. Defaults to a generic dialogue.
</td></tr>
<tr>
<td><samp>AcceptGift_<code title="required field 'id'">&lt;id&gt;</code></samp><br><samp>AcceptGift_<code title="required field 'tag'">&lt;tag&gt;</code></samp>
</td>
<td>Shown when receiving a non-birthday gift from the player. This can be by item ID (like <samp>AcceptGift_(O)128</samp>) or context tag (like <samp>AcceptGift_category_fish</samp>). If omitted, defaults to the dialogue in <samp>Data/NPCGiftTastes</samp>.
</td></tr>
<tr>
<td><samp>DumpsterDiveComment</samp>
</td>
<td>Shown when the NPC catches the player digging through a trash can. Defaults to a generic dialogue based on the NPC's age.
</td></tr>
<tr>
<td><samp>HitBySlingshot</samp>
</td>
<td>Shown when the player shoots them with a <a href="../../external.html?link=https://stardewvalleywiki.com/Slingshot" title="Slingshot">slingshot</a>. Defaults to a generic dialogue.
</td></tr>
<tr>
<td><samp>RejectBouquet_Divorced</samp><br><samp>RejectBouquet_NotDatable</samp><br><samp>RejectBouquet_NpcAlreadyMarried</samp><br><samp>RejectBouquet_VeryLowHearts</samp><br><samp>RejectBouquet_LowHearts</samp><br><samp>RejectBouquet</samp>
</td>
<td>Shown when the NPC rejects a <a href="../../external.html?link=https://stardewvalleywiki.com/Bouquet" title="Bouquet">bouquet</a>.
<p>A specific dialogue is shown if possible:
</p>
<ul><li><samp>RejectBouquet_Divorced</samp>: the NPC won't accept this bouquet because you divorced them.</li>
<li><samp>RejectBouquet_NotDatable</samp>: the NPC isn't romanceable.</li>
<li><samp>RejectBouquet_NpcAlreadyMarried</samp>: the NPC is already married to another player. You can use <samp>{0}</samp> in the dialogue for the other player's name.</li>
<li><samp>RejectBouquet_VeryLowHearts</samp>: you have less than 4 hearts with the NPC.</li>
<li><samp>RejectBouquet_LowHearts</samp>: you have less than 8 hearts with the NPC.</li></ul>
<p>If the specific dialogue isn't set, the game will use the <samp>RejectBouquet</samp> dialogue (if set), else it'll default to generic dialogue for each case.
</p>
</td></tr>
<tr>
<td><samp>RejectGift_Divorced</samp>
</td>
<td>Shown when the NPC rejects a gift because you divorced them.
</td></tr>
<tr>
<td><samp>RejectItem_<code title="required field 'id'">&lt;id&gt;</code></samp><br><samp>RejectItem_<code title="required field 'tag'">&lt;tag&gt;</code></samp>
</td>
<td>If set, the NPC will refuse to accept any matching item and show this dialogue instead. This can be by item ID (like <samp>RejectItem_(O)128</samp>) or context tag (like <samp>RejectItem_category_fish</samp>). This can prevent gifting, movie tickets, bouquets, mermaid pendants, etc. However it won't prevent accepting an item for an active quest or special order.
</td></tr>
<tr>
<td><samp>RejectMermaidPendant_Divorced</samp><br><samp>RejectMermaidPendant_NeedHouseUpgrade</samp><br><samp>RejectMermaidPendant_NotDatable</samp><br><samp>RejectMermaidPendant_NpcWithSomeoneElse</samp><br><samp>RejectMermaidPendant_PlayerWithSomeoneElse</samp><br><samp>RejectMermaidPendant_Under8Hearts</samp><br><samp>RejectMermaidPendant_Under10Hearts</samp><br><samp>RejectMermaidPendant_Under10Hearts_AskedAgain</samp><br><samp>RejectMermaidPendant</samp>
</td>
<td>Shown when the NPC rejects a <a href="../../external.html?link=https://stardewvalleywiki.com/Mermaid%27s_Pendant" title="Mermaid's Pendant">mermaid's pendant</a>.
<p>A specific dialogue is shown if possible. The cases are checked in this order:
</p>
<ol><li><samp>RejectMermaidPendant_PlayerWithSomeoneElse</samp>: the player is already engaged or married to someone else. You can use <samp>{0}</samp> in the dialogue for the player's spouse name.</li>
<li><samp>RejectMermaidPendant_NotDatable</samp>: the NPC isn't romanceable.</li>
<li><samp>RejectMermaidPendant_Divorced</samp>: you divorced them, so they won't accept gifts or proposals from you.</li>
<li><samp>RejectMermaidPendant_NpcWithSomeoneElse</samp>: the NPC is already engaged or married to someone else. You can use <samp>{0}</samp> in the dialogue for the other player's name.</li>
<li><samp>RejectMermaidPendant_Under8Hearts</samp>: you have under 8 hearts with the NPC.</li>
<li><samp>RejectMermaidPendant_Under10Hearts</samp>: you have under 10 hearts with the NPC.</li>
<li><samp>RejectMermaidPendant_Under10Hearts_AskedAgain</samp>: you have under 10 hearts with the NPC, and asked again after they already said no. (Defaults to the previous dialogue if not set.)</li>
<li><samp>RejectMermaidPendant_NeedHouseUpgrade</samp>: you need to upgrade your house before they can accept.</li></ol>
<p>If the specific dialogue isn't set, the game will use the <samp>RejectMermaidPendant</samp> dialogue (if set), else it'll default to generic dialogue for each case.
</p>
</td></tr>
<tr>
<td><samp>RejectMovieTicket_AlreadyInvitedBySomeoneElse</samp><br><samp>RejectMovieTicket_AlreadyWatchedThisWeek</samp><br><samp>RejectMovieTicket_Divorced</samp><br><samp>RejectMovieTicket_DontWantToSeeThatMovie</samp><br><samp>RejectMovieTicket</samp>
</td>
<td>Show when the NPC rejects a <a href="../../external.html?link=https://stardewvalleywiki.com/Movie_Ticket" title="Movie Ticket">movie ticket</a>.
<p>A specific dialogue is shown if possible:
</p>
<ul><li><samp>RejectMovieTicket_AlreadyInvitedBySomeoneElse</samp>: someone else already invited the NPC to a movie. You can use <samp>{0}</samp> in the dialogue for the other player's name.</li>
<li><samp>RejectMovieTicket_AlreadyWatchedThisWeek</samp>: the NPC already watched a movie this week.</li>
<li><samp>RejectMovieTicket_Divorced</samp>: you divorced the NPC, so they won't accept gifts from you.</li>
<li><samp>RejectMovieTicket_DontWantToSeeThatMovie</samp>: the movie data marks that NPC as unwilling to watch it (e.g. kids for horror movies).</li></ul>
<p>If the specific dialogue isn't set, the game will use the <samp>RejectMovieTicket</samp> dialogue (if set), else it'll default to generic dialogue for each case.
</p>
</td></tr>
<tr>
<td><samp>SpouseFarmhouseClutter</samp>
</td>
<td>Shown by an NPC spouse when they couldn't pathfind to their kitchen standing spot in the farmhouse.
</td></tr>
<tr>
<td><samp>SpouseGiftJealous</samp>
</td>
<td>Shown by an NPC spouse when you gave a gift to another eligible NPC of the same gender as your spouse (unless it's their birthday). You can use <samp>{0}</samp> in the dialogue for the other NPC's name, and <samp>{1}</samp> for the gifted item name.
</td></tr>
<tr>
<td><samp>Spouse_MonstersInHouse</samp>
</td>
<td>Shown by an NPC spouse when they're in the farmhouse and there's a monster close to them.
</td></tr>
<tr>
<td><samp>SpouseStardrop</samp>
</td>
<td>Shown when receiving the <a href="../../external.html?link=https://stardewvalleywiki.com/Stardrop" title="Stardrop">stardrop</a> from your spouse.
</td></tr>
<tr>
<td><samp>Fair_Judging</samp>
</td>
<td>Shown at the <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Fair" title="Stardew Valley Fair">Stardew Valley Fair</a> while Lewis is judging the grange displays. If omitted, the NPC will keep their normal festival dialogue.
<p>If this is set without <samp>Fair_Judged*</samp>, the NPC will keep this dialogue after judging is done.
</p><p><i>This replaces the previously hardcoded translations in <samp>Strings/StringsFromCSFiles</samp>: <samp>Event.cs.1602</samp> (Marnie), <samp>Event.cs.1604</samp> (Pierre), and <samp>Event.cs.1606</samp> (Willy).</i>
</p>
</td></tr>
<tr>
<td><samp>Fair_Judged_PlayerLost_PurpleShorts</samp><br><samp>Fair_Judged_PlayerLost_Skipped</samp><br><samp>Fair_Judged_PlayerLost</samp><br><samp>Fair_Judged_PlayerWon</samp><br><samp>Fair_Judged</samp>
</td>
<td>Shown at the <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Fair" title="Stardew Valley Fair">Stardew Valley Fair</a> after Lewis finishes judging the grange displays.
<p>The first matching dialogue is used in this order:
</p>
<ol><li><samp>Fair_Judged_PlayerLost_PurpleShorts</samp>: the player put the <a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Lucky_Purple_Shorts" title="Secrets">lucky purple shorts</a> in their display (which is an automatic loss).  Defaults to <samp>Fair_Judged_PlayerLost</samp> if omitted.</li>
<li><samp>Fair_Judged_PlayerLost_Skipped</samp>: the player didn't put anything in their display. Defaults to <samp>Fair_Judged_PlayerLost</samp> if omitted.</li>
<li><samp>Fair_Judged_PlayerLost</samp> or <samp>Fair_Judged_PlayerWon</samp>: the player didn't/did win first place. Defaults to <samp>Fair_Judged</samp> if omitted.</li>
<li><samp>Fair_Judged</samp>: shown if a more specific dialogue didn't match. If omitted, the NPC will keep their current dialogue.</li></ol>
<p><i>These replace the previously hardcoded translations in <samp>Strings/StringsFromCSFiles</samp>: <samp>Event.cs.1591</samp> (Pierre when he won), <samp>Event.cs.1593</samp> (Pierre when the player won), <samp>Event.cs.1595</samp> (Marnie), <samp>Event.cs.1597</samp> (Willy), and <samp>Event.cs.1600</samp> (Marnie for the purple shorts).</i>
</p>
</td></tr>
<tr>
<td><samp>FlowerDance_Accept_Roommate</samp><br><samp>FlowerDance_Accept_Spouse</samp><br><samp>FlowerDance_Accept</samp>
</td>
<td>Shown at the <a href="../../external.html?link=https://stardewvalleywiki.com/Flower_Dance" title="Flower Dance">Flower Dance</a> when the NPC agrees to dance. The game will prefer the <samp>_Roommate</samp> (if roommates) or <samp>_Spouse</samp> (if married) variant if applicable, else it'll check for the normal key. If omitted, defaults to a generic accept dialogue.
<p><i>This replaces the previously hardcoded translations in <samp>Strings/StringsFromCSFiles</samp> (<samp>Event.cs.1613</samp>, <samp>Event.cs.1615</samp>, <samp>Event.cs.1617</samp>, <samp>Event.cs.1619</samp>, <samp>Event.cs.1621</samp>, <samp>Event.cs.1623</samp>, <samp>Event.cs.1625</samp>, <samp>Event.cs.1627</samp>, <samp>Event.cs.1629</samp>, and <samp>Event.cs.1631</samp>).</i>
</p>
</td></tr>
<tr>
<td><samp>FlowerDance_Decline</samp>
</td>
<td>Shown at the <a href="../../external.html?link=https://stardewvalleywiki.com/Flower_Dance" title="Flower Dance">Flower Dance</a> when the NPC declines to dance. This replaces the former <samp>danceRejection</samp> key (which still works as a fallback).
</td></tr>
<tr>
<td><samp>WinterStar_GiveGift_Before_Roommate</samp><br><samp>WinterStar_GiveGift_Before_Spouse</samp><br><samp>WinterStar_GiveGift_Before</samp><br><samp>WinterStar_GiveGift_After_Roommate</samp><br><samp>WinterStar_GiveGift_After_Spouse</samp><br><samp>WinterStar_GiveGift_After</samp>
</td>
<td>Shown at the <a href="../../external.html?link=https://stardewvalleywiki.com/Feast_of_the_Winter_Star" title="Feast of the Winter Star">Feast of the Winter Star</a> when the NPC gives the player their gift (before and after the player opens it). The game will prefer the <samp>_Roommate</samp> (if roommates) or <samp>_Spouse</samp> (if married) variant if applicable, else it'll check for the normal key. If omitted, the before/after dialogues each separately default to a generic translation for all NPCs.
</td></tr>
<tr>
<td><samp>WinterStar_ReceiveGift_<code title="required field 'id'">&lt;id&gt;</code></samp><br><samp>WinterStar_ReceiveGift_<code title="required field 'tag'">&lt;tag&gt;</code></samp><br><samp>WinterStar_ReceiveGift</samp>
</td>
<td>Shown at the <a href="../../external.html?link=https://stardewvalleywiki.com/Feast_of_the_Winter_Star" title="Feast of the Winter Star">Feast of the Winter Star</a> when receiving their gift from the player. This can be by item ID (like <samp>WinterStar_ReceiveGift_(O)128</samp>), context tag (like <samp>WinterStar_ReceiveGift_category_fish</samp>), or for any item (like <samp>WinterStar_ReceiveGift</samp>). If omitted, defaults to the generic translation for all NPCs.
</td></tr>
<tr>
<td><samp>WipedMemory</samp>
</td>
<td>Shown the first time you talk to the NPC after erasing their memory using the <a href="../../external.html?link=https://stardewvalleywiki.com/Dark_Shrine_of_Memory" title="Dark Shrine of Memory">Dark Shrine of Memory</a>.
</td></tr></tbody></table>
</li>
<li>Added new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">dialogue</a> commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>description
</th></tr>
<tr id="gender-switch">
<td><samp>${male^female}$</samp><br><samp>${male^female^non-binary}$</samp>
</td>
<td>Change text depending on the player's gender. This largely supersedes the <samp>^</samp> dialogue token (which still works), and is supported in many more places than that token. This is applied before most other commands or parsing, so it can safely be used in cases where <samp>^</samp> might have a different meaning (e.g. mail text). For example: <code>Ahoy there ${lad^lass}$!</code> or <code>Ahoy there ${lad^lass^matey}$!</code>.
<p>You can optionally use <samp>¦</samp> instead of <samp>^</samp>, in which case any <samp>^</samp> characters are left as-is.
</p><p>Note that the non-binary value is only used if a mod overrides the player's gender, since the in-game UI only allows male or female.
</p>
</td></tr>
<tr>
<td><samp>$action <code title="required field 'action'">&lt;action&gt;</code></samp>
</td>
<td>Run a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Trigger_actions" title="Modding:Trigger actions">trigger action string</a>, like <samp>$action AddMoney 500</samp> to add <span style="display: none;">data-sort-value="500"&gt;</span><span class="no-wrap"><noscript><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18"></noscript><span class="lazy-image-placeholder" style="width: 18px;height: 18px;" data-src="/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" data-alt="Gold.png" data-width="18" data-height="18"> </span>500g</span> to the current player.
</td></tr>
<tr>
<td><samp>$query <code title="required field 'query'">&lt;query&gt;</code>#<code title="required field 'if true'">&lt;if true&gt;</code>|<code title="required field 'if false'">&lt;if false&gt;</code></samp>
</td>
<td>Show different dialogue text depending on the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> in <code title="required field 'query'">&lt;query&gt;</code>. For example:
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"Mon"</span><span class="o">:</span> <span class="s2">"$query !PLAYER_VISITED_LOCATION Current Mine#Did you know there's an old abandoned mine up in the mountain? Apparently it's crawling with monsters!|I heard you went into the old mines up in the mountain!#Did you find anything tasty?$h"</span>
</pre></div>
</td></tr>
<tr>
<td><samp>$t <code title="required field 'topic ID'">&lt;topic ID&gt;</code> <code title="optional field 'day length'">[day length]</code></samp>
</td>
<td>Add a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue#Conversation_topics" title="Modding:Dialogue">conversation topic</a> for the next <code title="optional field 'day length'">[day length]</code> days (default 4 days).
</td></tr>
<tr>
<td><samp>$v <code title="required field 'event id'">&lt;event id&gt;</code> <code title="optional field 'check preconditions'">[check preconditions]</code> <code title="optional field 'skip if seen'">[skip if seen]</code></samp>
</td>
<td>Immediately start an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event</a> and end the current dialogue, subject to the conditions:
<ul><li><code title="optional field 'check preconditions'">[check preconditions]</code>: whether to ignore the command if the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Event_preconditions" title="Modding:Event data">event's preconditions</a> don't match (one of <samp>true</samp> or <samp>false</samp>). Default true.</li>
<li><code title="optional field 'skip if seen'">[skip if seen]</code>: whether to ignore the command if the player has already seen the given event. Default true.</li></ul>
<p>If the event is not played, the dialogue continues to the next line instead.
</p><p>For example, <code>$v 60367 false false</code> will replay the bus arrival event from the start of the game. <code>$v SomeMod.Test true false#$b#Wow! Good timing!$1</code> will play the event "SomeMod.Test" if the player meets the precondition requirements. If they do not, the dialogue "Wow! Good timing!$1" will play instead.  
</p><p>Note: The command will only work if it is at the very start of the dialogue. Adding any dialogue or other commands before it will cause it not to trigger the event and display the event commands as dialogue instead. 
</p>
</td></tr></tbody></table>
</li>
<li>Improved dialogue commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>changes
</th></tr>
<tr>
<td><samp>$p</samp>
</td>
<td>You can now check multiple answer IDs. For example, this will show the first dialogue if the player chose dialogue answer 17, 18, or 19:
<pre>$p 17|18|19#I guess you think nothing would happen, right?$u|Maybe a wicked ghost would appear!</pre>
</td></tr></tbody></table></li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue#Response_IDs" title="Modding:Dialogue">Dialogue response IDs</a> are now <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string IDs</a>.</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Secrets#Item_Spawn_Cheat" title="Secrets">Item spawn codes</a> now use string item IDs. That means you can spawn any item using its <a href="#Custom_items">qualified item ID</a> (like <code>[(F)1664]</code> for a <a href="../../external.html?link=https://stardewvalleywiki.com/Mystic_Rug" title="Mystic Rug">Mystic Rug</a>), but can no longer prepend zeros (e.g. <code>[128]</code> is a pufferfish but <code>[0128]</code> is an error item).</li>
<li>For C# mods, <samp>Dialogue</samp> now tracks the translation key used to build it (when applicable). For example, you can detect when the player is rejected at the <a href="../../external.html?link=https://stardewvalleywiki.com/Flower_Dance" title="Flower Dance">Flower Dance</a> (derived from <a rel="nofollow" class="external text" href="../../external.html?link=https://github.com/spacechase0/StardewValleyMods">Three-Heart Dance Partner</a>):
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">private</span> <span class="k">void</span> <span class="nf">OnMenuChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">MenuChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">bool</span> <span class="n">isDanceRejection</span> <span class="p">=</span>
        <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">?.</span><span class="n">currentEvent</span><span class="p">?.</span><span class="n">FestivalName</span> <span class="p">==</span> <span class="s">"Flower Dance"</span>
        <span class="p">&amp;&amp;</span> <span class="n">e</span><span class="p">.</span><span class="n">NewMenu</span> <span class="k">is</span> <span class="n">DialogueBox</span> <span class="n">dialogueBox</span>
        <span class="p">&amp;&amp;</span> <span class="n">dialogueBox</span><span class="p">.</span><span class="n">characterDialogue</span> <span class="k">is</span> <span class="p">{}</span> <span class="n">dialogue</span>
        <span class="p">&amp;&amp;</span> <span class="n">dialogue</span><span class="p">.</span><span class="n">TranslationKey</span> <span class="p">==</span> <span class="err">$</span><span class="s">"Characters\\Dialogue\\{dialogue.speaker?.Name}:danceRejection"</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>For C# mods that create <samp>Dialogue</samp> instances directly, there's a few ways to do it now:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// from a translation key</span>
<span class="kt">var</span> <span class="n">dialogue</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dialogue</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="s">"Strings\\StringsFromCSFiles:Utility.cs.5360"</span><span class="p">);</span>

<span class="c1">// from custom text (with or without a translation key)</span>
<span class="kt">var</span> <span class="n">dialogue</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dialogue</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s">"Some arbitrary text to show as-is"</span><span class="p">);</span>

<span class="c1">// from a translation with tokens</span>
<span class="kt">var</span> <span class="n">dialogue</span> <span class="p">=</span> <span class="n">Dialogue</span><span class="p">.</span><span class="n">FromTranslation</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="s">"Data\\ExtraDialogue:PurchasedItem_2_QualityLow_Willy"</span><span class="p">,</span> <span class="n">whatToCallPlayer</span><span class="p">,</span> <span class="n">particle</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">DisplayName</span><span class="p">);</span>
</pre></div>
<p>You can also easily add fallback logic using <samp>Dialogue.TryGetDialogue</samp> or <samp>npc.TryGetDialogue</samp>. For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Dialogue</span> <span class="n">dialogue</span> <span class="p">=</span>
    <span class="n">npc</span><span class="p">.</span><span class="n">TryGetDialogue</span><span class="p">(</span><span class="err">$</span><span class="s">"rejection_{itemId}_{locationName}_{x}_{y}"</span><span class="p">)</span>
    <span class="p">??</span> <span class="n">npc</span><span class="p">.</span><span class="n">TryGetDialogue</span><span class="p">(</span><span class="err">$</span><span class="s">"rejection_{itemId}_{locationName}"</span><span class="p">)</span>
    <span class="p">??</span> <span class="n">npc</span><span class="p">.</span><span class="n">TryGetDialogue</span><span class="p">(</span><span class="err">$</span><span class="s">"rejection_{itemId}"</span><span class="p">)</span>
    <span class="p">??</span> <span class="k">new</span> <span class="n">Dialogue</span><span class="p">(</span><span class="n">npc</span><span class="p">,</span> <span class="s">"Strings\\StringsFromCSFiles:NPC.cs.3971"</span><span class="p">);</span>
</pre></div>
</li>
<li>For C# mods, added a <samp>dialogue.sideEffects</samp> field to run code when the dialogue is displayed.</li>
<li>The 'reveal taste' dialogue command now uses the format <samp>%revealtaste:<code title="required field 'npc name'">&lt;npc name&gt;</code>:<code title="required field 'item ID'">&lt;item ID&gt;</code></samp> to support item IDs. (The previous <samp>%revealtaste<code title="required field 'npc name'">&lt;npc name&gt;</code><code title="required field 'item index'">&lt;item index&gt;</code></samp> format still works to support old content packs, but the item index can only be a number.)</li>
<li>NPCs no longer override the portrait for a gift taste dialogue that uses a portrait command explicitly.</li>
<li>Fixed unknown <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">dialogue</a> commands starting with <samp>$</samp> being parsed as a portrait number when not numeric.</li>
<li>Fixed NPCs only using a <code>{day name}{hearts}_{year}</code> dialogue if they also have a <code>{day name}{hearts}</code> one.</li>
<li>Fixed NPCs only using the <code>MovieInvitation</code> dialogue key in English.</li>
</ul>
<h3 class="in-block"><span class="mw-headline" id="Schedule_changes">Schedule changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Schedule_data" title="Modding:Schedule data">Modding:Schedule data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<ul>
<li>Schedule keys are now case-insensitive.</li>
<li>Added a new <samp><code title="required field 'day of week'">&lt;day of week&gt;</code>_<code title="required field 'min hearts'">&lt;min hearts&gt;</code></samp> schedule key.</li>
<li>Added an <samp>NPC.ScheduleKey</samp> field which always matches their loaded schedule.</li>
<li>Schedule commands now trim surrounding whitespace, so they can be multilined for readability. For example:
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"Wed"</span><span class="o">:</span> <span class="s2">"</span>
<span class="s2">    1000 ArchaeologyHouse 11 9 0/</span>
<span class="s2">    1800 Town 47 87 0/</span>
<span class="s2">    2200 SeedShop 1 9 3 abigail_sleep</span>
<span class="s2">"</span>
</pre></div></li>
<li>Removed an unintended schedule fallback to a <samp>{season}_spring_{hearts}</samp> key. It'll skip to the <samp>spring</samp> default instead.</li>
<li>Schedules are now fault-tolerant:
<ul><li>Fixed crash if a selected schedule can't be parsed. The NPC now logs an error and continues with the next fallback instead.</li>
<li>Fixed crash if certain hardcoded schedules aren't present (like Penny's <samp>marriageJob</samp> or Pam's <samp>bus</samp>).</li>
<li>Fixed error if a schedule command is empty.</li></ul>
</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Other_NPC_changes">Other NPC changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:NPC_data" title="Modding:NPC data">Modding:NPC data</a> as needed. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<ul>
<li>Added <samp>Game1.characterData</samp> and <samp>Game1.farmAnimalData</samp> to read NPC/animal info without constantly reloading the <samp>Data/Characters</samp> or <samp>Data/FarmAnimals</samp> asset.</li>
<li>All translated NPC names are now in <samp>Strings/NPCNames</samp>.
</li><li>Added new fields &amp; methods for C# mods:

<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>field/method
</th>
<th>effect
</th></tr>
<tr>
<td rowspan="2"><samp>AdventureGuild</samp>
</td>
<td><samp>IsComplete(data)</samp>
</td>
<td>Get whether an <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild" title="Adventurer's Guild">Adventurer's Guild</a> monster eradication goal has been completed, regardless of whether the player collected its rewards yet.
</td></tr>
<tr>
<td><samp>HasCollectedReward(player, id)</samp>
</td>
<td>Get whether a given player has completed an <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild" title="Adventurer's Guild">Adventurer's Guild</a> monster eradication goal and collected its rewards. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">isPhoneUnlocked</span> <span class="p">=</span> <span class="n">AdventureGuild</span><span class="p">.</span><span class="n">HasCollectedReward</span><span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">,</span> <span class="s">"Gil_FlameSpirits"</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>AnimalHouse</samp>
</td>
<td><samp>adoptAnimal</samp>
</td>
<td>Add an animal to this location and set the location as the animal's home.
</td></tr>
<tr>
<td><samp>AnimatedSprite</samp>
</td>
<td><samp>Owner</samp>
</td>
<td>The NPC which owns the sprite.
</td></tr>
<tr>
<td rowspan="3"><samp>Character</samp>
</td>
<td><samp>IsVillager</samp>
</td>
<td>Whether this is an NPC-type villager (i.e. not a monster, horse, pet, player's child, etc). In other words, this checks whether the NPC would use data from <samp>Data/Characters</samp> (regardless of whether they currently have an entry in the asset).
</td></tr>
<tr>
<td><samp>StandingPixel</samp>
</td>
<td>The character's cached pixel position within the current location, based on the center pixel of their bounding box.
</td></tr>
<tr>
<td><samp>Tile</samp><br><samp>TilePoint</samp>
</td>
<td>The character's cached tile position within their current location. <samp>Tile</samp> is their exact non-integer position, and <samp>TilePoint</samp> is their integer tile position.
</td></tr>
<tr>
<td rowspan="7"><samp>FarmAnimal</samp>
</td>
<td><samp>isAdult</samp>
</td>
<td>Get whether the farm animal is fully grown (opposite of <samp>isBaby()</samp>).
</td></tr>
<tr>
<td><samp>CanGetProduceWithTool</samp>
</td>
<td>Get whether the farm animal's produce can be collected with a given tool (e.g. milk pail for a cow).
</td></tr>
<tr>
<td><samp>CanLiveIn</samp>
</td>
<td>Get whether the animal can be added to a building.
</td></tr>
<tr>
<td><samp>GetDisplayName</samp><br><samp>GetShopDescription</samp>
</td>
<td>Get the translated display name or shop description for this animal.
</td></tr>
<tr>
<td><samp>GetHarvestType</samp>
</td>
<td>Get whether the animal's produce is dropped or collected with a tool.
</td></tr>
<tr>
<td><samp>growFully</samp>
</td>
<td>Instantly age the animal to adulthood if it's still a baby.
</td></tr>
<tr>
<td><samp>ReloadTextureIfNeeded</samp>
</td>
<td>Update the animal sprite based on the current state + data.
</td></tr>
<tr>
<td rowspan="2"><samp>Farmer</samp>
</td>
<td><samp>GetDisplayPants</samp><br><samp>GetDisplayShirt</samp>
</td>
<td>Get the texture and sprite index to draw for the player's pants or shirt. This accounts for override clothing, worn clothing, and the default clothing drawn when the farmer isn't wearing anything.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">GetDisplayShirt</span><span class="p">(</span><span class="k">out</span> <span class="n">Texture2D</span> <span class="n">texture</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">spriteIndex</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>CanDyePants</samp><br><samp>CanDyeShirt</samp>
</td>
<td>Get whether the currently equipped pants or shirt can be <a href="../../external.html?link=https://stardewvalleywiki.com/Dyeing" title="Dyeing">dyed</a>.
</td></tr>
<tr>
<td><samp>Monster</samp>
</td>
<td><samp>GetDisplayName(name)</samp>
</td>
<td>Get the translated display name for a monster type.
</td></tr>
<tr>
<td rowspan="4"><samp>NPC</samp>
</td>
<td><samp>CanReceiveGifts</samp>
</td>
<td>Get whether this NPC can receive gifts from the player (regardless of whether they've already received one today).
</td></tr>
<tr>
<td><samp>GetData</samp><br><samp>NPC.TryGetData</samp>
</td>
<td>Get the underlying data from <samp>Data/Characters</samp> for this NPC, if any.
</td></tr>
<tr>
<td><samp>NPC.GetDisplayName(name)</samp>
</td>
<td>Get the translated display name in the current language for an NPC by their internal name.
</td></tr>
<tr>
<td><samp>hasDarkSkin</samp>
</td>
<td>Whether this character has dark skin for the purposes of child genetics.
</td></tr>
<tr>
<td><samp>Pet</samp>
</td>
<td><samp>GetPetData</samp><br><samp>TryGetData</samp>
</td>
<td>Get the underlying data from <samp>Data/Pets</samp> for this pet, if any.
</td></tr>
<tr>
<td><samp>ShopMenu</samp>
</td>
<td><samp>ShopId</samp>
</td>
<td>A key which identifies the current shop. This may be the unique shop ID in <samp>Data/Shops</samp> for a standard shop, <samp>Dresser</samp> or <samp>FishTank</samp> for furniture, etc. This is guaranteed to be set to a relevant shop ID.
<p>This replaces the former <samp>shopContext</samp> field, and will usually have the same value in cases where that was set to a unique shop ID.
</p>
</td></tr>
<tr>
<td><samp>Utility</samp>
</td>
<td><samp>getAllVillagers</samp>
</td>
<td>Get all villager NPCs (excluding horses, pets, monsters, player children, etc). This works just like <samp>getAllCharacters</samp> with an added filter.
</td></tr></tbody></table>
</li>
<li>NPCs now update on save loaded when their home data changes.</li>
<li><samp>NPC.reloadSprite()</samp> now has an argument to only reload the appearance, without changing other data.</li>
<li><samp>Utility.getAllCharacters()</samp> now returns a plain <samp>List&lt;NPC&gt;</samp> value instead of a custom <samp>DisposableList&lt;NPC&gt;</samp>, so you can use normal LINQ querying on it.</li>
<li><samp>Utility.GetHorseWarpRestrictionsForFarmer(player)</samp> now returns an enum (which is more efficient and easier for mods to patch), and added a new <samp>Utility.GetHorseWarpErrorMessage(restrictions)</samp> method to get the error message to show for it.</li>
<li><samp>Farmer.hasAFriendWithHeartLevel</samp> now has an optional max-hearts argument.</li>
<li>Removed most <samp>FarmAnimal</samp> fields/properties which just mirror the underlying data.</li>
<li>Removed invalid item IDs in <samp>Data/NPCGiftTastes</samp>.</li>
<li>Fixed NPCs sometimes duplicated on save load (particularly if their home location changed).</li>
<li>Fixed child NPCs like <a href="../../external.html?link=https://stardewvalleywiki.com/Jas" title="Jas">Jas</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Vincent" title="Vincent">Vincent</a> ignoring relative titles like "mom" in <samp>Data/NPCDispositions</samp> (now <samp>Data/Characters</samp>) for reveal-gift-taste dialogues.</li>
<li>Fixed custom NPCs ignoring dialogue when they use a subclass of <samp>NPC</samp>.</li>
<li>Fixed monsters not loading their display name from <samp>Data/Monsters</samp> for English players.</li>
<li>Fixed player children not applying the <samp>IsInvisible</samp> flag.</li>
</ul>
<h2><span id="What's_new_for_everything_else"></span><span class="mw-headline" id="What.27s_new_for_everything_else">What's new for everything else</span></h2>
<h3 class="in-block"><span class="mw-headline" id="Buff_overhaul">Buff overhaul</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<dl><dd><i>See also: <a href="#Custom_buffs">custom buffs</a>.</i></dd></dl>
<p>1.6 rewrites buffs to work more consistently and be more extensible:
</p>
<ul><li>Buff logic is unified into <samp>Game1.player.buffs</samp>, which is the single source of truth for buff data. This replaces the previous <samp>player.added*</samp> and <samp>player.appliedBuffs</samp> fields, <samp>BuffsDisplay</samp> logic, enchantment stat bonuses, and boots/ring attribute changes on (un)equip.</li>
<li>This also removes limitations on buff types (e.g. buffs can add weapon bonuses and weapons can add attribute buffs) and buffable equipment (e.g. equipped tools can have buffs too).</li>
<li>Buff effects are now fully recalculated when they change, to fix a range of longstanding bugs like attribute drift and double-debuffs. Just like before, the buffs are managed locally; only the buff IDs and aggregate attribute effects are synced.</li></ul>
<p><b>For C# mods:</b>
</p>
<ul><li>Each buff now has a unique string ID. You can apply a new buff with the same ID to replace it (so you no longer need to manually find and remove previous instances of the buff).</li>
<li>The buff duration can now be set to <samp>Buff.ENDLESS</samp> to remove the duration. It'll last all day until the player sleeps.</li>
<li>You can add standard buff effects to any equipment by overriding <samp>Item.AddEquipmentEffects</samp>, or add custom behaviour/buffs by overriding <samp>Item.onEquip</samp> and <samp>Item.onUnequip</samp>.</li>
<li>You can add custom food or drink buffs by overriding <samp>Item.GetFoodOrDrinkBuffs()</samp>.</li>
<li>The <samp>Buff</samp> constructor now supports a custom icon texture, sprite index, display name, description, and millisecond duration to fully support custom buffs.</li>
<li>You can change how buff attributes are displayed (or add new attributes) by extending the <samp>BuffsDisplay.displayAttributes</samp> list.</li>
<li>You can have invisible buffs by setting <samp>buff.visible = false</samp>.</li></ul>
<p>For example, here's how to add a custom buff which adds +3 speed:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Buff</span> <span class="n">buff</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Buff</span><span class="p">(</span>
    <span class="n">id</span><span class="p">:</span> <span class="s">"Example.ModId_ZoomZoom"</span><span class="p">,</span>
    <span class="n">displayName</span><span class="p">:</span> <span class="s">"Zoom Zoom"</span><span class="p">,</span> <span class="c1">// can optionally specify description text too</span>
    <span class="n">iconTexture</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">ModContent</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Texture2D</span><span class="p">&gt;(</span><span class="s">"assets/zoom.png"</span><span class="p">),</span>
    <span class="n">iconSheetIndex</span><span class="p">:</span> <span class="m">0</span><span class="p">,</span>
    <span class="n">duration</span><span class="p">:</span> <span class="m">30</span><span class="n">_000</span><span class="p">,</span> <span class="c1">// 30 seconds</span>
    <span class="n">effects</span><span class="p">:</span> <span class="k">new</span> <span class="n">BuffEffects</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Speed</span> <span class="p">=</span> <span class="p">{</span> <span class="m">10</span> <span class="p">}</span> <span class="c1">// shortcut for buff.Speed.Value = 10</span>
    <span class="p">}</span>
<span class="p">);</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">applyBuff</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span>
</pre></div>
<p>You can also implement your own custom effects in code by checking if the buff is active, like <code>Game1.player.hasBuff("Example.ModId_ZoomZoom")</code>.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_audio">Custom audio</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Audio" title="Modding:Audio">Modding:Audio</a>. This section below focuses on what's new in 1.6.</div>
<p>You can now add or edit music tracks or sound effects by editing the new <samp>Data/AudioChanges</samp> asset. New cues are added to the game's soundbank, so they can be used anywhere normal audio can be used (e.g. the <samp>Music</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">map property</a>). This supports <samp>.ogg</samp> and <samp>.wav</samp> files, and the vanilla audio features (e.g. randomizing audio from one ID).
</p><p>Audio is also more fault-tolerant in 1.6: the game no longer crashes when playing audio which doesn't exist, it now logs an error and returns a default quiet click sound instead. (If you use <code>try..catch</code> to check if an audio cue exists, you should check <code>Game1.soundbank.Exists(name)</code> instead.)
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_buffs">Custom buffs</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<dl><dd><i>See also: <a href="#Buff_overhaul">buff overhaul</a>.</i></dd></dl>
<p>You can now define custom buffs by editing the new <samp>Data/Buffs</samp> asset. You can then use the buff from other places like <samp>Data/Object</samp>'s <samp>Buff</samp> field or the C# <samp>Buff</samp> constructor.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for the buff.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td><samp>DisplayName</samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the buff name.
</td></tr>
<tr>
<td><samp>Description</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the buff name. Default none.
</td></tr>
<tr>
<td><samp>IsDebuff</samp>
</td>
<td><i>(Optional)</i> &gt;Whether this buff counts as a debuff, so its duration should be halved when wearing a <a href="../../external.html?link=https://stardewvalleywiki.com/Sturdy_Ring" title="Sturdy Ring">sturdy ring</a>. Default false.
</td></tr>
<tr>
<td><samp>GlowColor</samp>
</td>
<td><i>(Optional)</i> The glow color to apply to the player. See <a href="#Color_fields">color format</a>. Default none.
</td></tr>
<tr>
<td><samp>Duration</samp>
</td>
<td>The duration in milliseconds for which the buff should be active. This can be set to value <samp>-2</samp> for a buff that should last for the rest of the day.
</td></tr>
<tr>
<td><samp>MaxDuration</samp>
</td>
<td><i>(Optional)</i> The maximum buff duration in milliseconds. If specified and larger than <samp>Duration</samp>, a random value between <samp>Duration</samp> and <samp>MaxDuration</samp> will be selected for each buff. Default none.
</td></tr>
<tr>
<td><samp>IconTexture</samp>
</td>
<td>The asset name for the texture containing the buff's sprite.
</td></tr>
<tr>
<td><samp>IconSpriteIndex</samp>
</td>
<td><i>(Optional)</i> The sprite index for the buff icon within the <samp>IconTexture</samp>. Default 0.
</td></tr>
<tr>
<td><samp>Effects</samp>
</td>
<td><i>(Optional)</i> The buff attributes to apply. Default none.
<p>This consists of a model with any combination of these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td><samp>FarmingLevel</samp><br><samp>FishingLevel</samp><br><samp>ForagingLevel</samp><br><samp>LuckLevel</samp><br><samp>MiningLevel</samp>
</td>
<td><i>(Optional)</i> An amount applied to the matching <a href="../../external.html?link=https://stardewvalleywiki.com/Skills" title="Skills">skill level</a> while the buff is active. This can be negative for a debuff. Default 0.
</td></tr>
<tr>
<td><samp>Attack</samp><br><samp>Defense</samp><br><samp>MagneticRadius</samp><br><samp>MaxStamina</samp><br><samp>Speed</samp>
</td>
<td><i>(Optional)</i> An amount applied to the player's <a href="../../external.html?link=https://stardewvalleywiki.com/Attack" title="Attack">attack</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Defense" title="Defense">defense</a>, <a href="../../external.html?link=https://stardewvalleywiki.com/Magnetism" title="Magnetism">magnetic radius</a>, maximum <a href="../../external.html?link=https://stardewvalleywiki.com/Energy" title="Energy">stamina</a>, or <a href="../../external.html?link=https://stardewvalleywiki.com/Speed" title="Speed">speed</a> while the buff is active. This can be negative for a debuff. Default 0.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>ActionsOnApply</samp>
</td>
<td><i>(Optional)</i> Run any number of <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Trigger_actions" title="Modding:Trigger actions">trigger action strings</a> when the buff is applied to the current player. For example, this increments a player stat:
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"ActionsOnApply"</span><span class="o">:</span> <span class="p">[</span>
    <span class="s2">"IncrementStat {{ModId}}_NumberEaten 1"</span>
<span class="p">]</span>
</pre></div>
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td><i>(Optional)</i> The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Custom_data_fields">Custom data fields</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Custom_fields" title="Modding:Common data field types">Modding:Common data field types#Custom fields</a>. This section below focuses on what's new in 1.6.</div>
<p>Many data assets now have a <samp>CustomFields</samp> field. This is ignored by the game, but lets mods add their own data (e.g. to enable mod framework features).
</p><p>For example, a content pack can <a href="#Custom_crops">add a crop</a> with custom fields:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/Crops"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"Example.Id_CucumberSeeds"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"Seasons"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"summer"</span> <span class="p">],</span>
                    <span class="s2">"DaysInPhase"</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">],</span>
                    <span class="s2">"HarvestItemId"</span><span class="o">:</span> <span class="s2">"Example.Id_Cucumber"</span><span class="p">,</span>
                    <span class="s2">"Texture"</span><span class="o">:</span> <span class="s2">"{{InternalAssetKey: assets/crops.png}}"</span><span class="p">,</span>
                    <span class="s2">"SpriteIndex"</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

                    <span class="s2">"CustomFields"</span><span class="o">:</span> <span class="p">{</span>
                        <span class="s2">"Example.FrameworkMod/WetTexture"</span><span class="o">:</span> <span class="s2">"{{InternalAssetKey: assets/crops-wet.png}}"</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>And then a C# mod could handle the custom field if it's set:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">IsRainingHere</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">CropData</span> <span class="n">data</span> <span class="p">=</span> <span class="n">crop</span><span class="p">.</span><span class="n">GetData</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">data</span><span class="p">.</span><span class="n">CustomFields</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="s">"Example.FrameworkMod/WetTexture"</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">textureName</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="c1">// do magic</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>See <samp>CustomFields</samp> in the docs for each asset type to see if it's supported. Besides the sections listed on this page, custom fields were also added to <samp>Data/AdditionalFarms</samp>, <samp>Data/AdditionalLanguages</samp>, <samp>Data/FishPondData</samp>, <samp>Data/HomeRenovations</samp>, <samp>Data/Movies</samp>, and <samp>Data/SpecialOrders</samp>.
</p><p>See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Custom_fields" title="Modding:Common data field types">Modding:Common data field types#Custom fields</a> for the main docs.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_giant_crops">Custom giant crops</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>You can now add/edit <a href="../../external.html?link=https://stardewvalleywiki.com/Crops#Giant_Crops" title="Crops">giant crops</a> by editing the <samp>Data/GiantCrops</samp> data asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a> for the giant crop.</li>
<li>The value is a model with the fields listed below.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>FromItemId</samp>
</td>
<td>The <a href="#Custom_items">item ID</a> (qualified or unqualified) for the harvest ID of the regular crop which can turn into this giant crop. For example, <samp>(O)254</samp> is <a href="../../external.html?link=https://stardewvalleywiki.com/Melon" title="Melon">melon</a>.
<p>Any number of giant crops can use the same <samp>FromItemId</samp> value. The first giant crop whose other fields match (if any) will spawn.
</p>
</td></tr>
<tr>
<td><samp>HarvestItems</samp>
</td>
<td>The items which can be dropped when you break the giant crop. If multiple items match, they'll all be dropped.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries#Item_spawn_fields" title="Modding:Item queries">item spawn fields</a> for the generic item fields supported for harvest items.
<p>If set to an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The probability that this entry is selected, as a value between 0 (never drops) and 1 (always drops). Default 1 (100% chance).
</td></tr>
<tr>
<td><samp>ForShavingEnchantment</samp>
</td>
<td><i>(Optional)</i> Whether this item is only dropped for <a href="../../external.html?link=https://stardewvalleywiki.com/Enchantments#Tool_enchantments" class="mw-redirect" title="Enchantments">Shaving enchantment</a> drops (<samp>true</samp>), only when the giant crop is broken (<samp>false</samp>), or both (<samp>null</samp>). Default both.
</td></tr>
<tr>
<td><samp>ScaledMinStackWhenShaving</samp><br><samp>ScaledMaxStackWhenShaving</samp>
</td>
<td><i>(Optional)</i> If set, the min/max stack size when this item is dropped due to the <a href="../../external.html?link=https://stardewvalleywiki.com/Forge#Enchantments" title="Forge">shaving enchantment</a>, scaled to the tool's power level.
<p>This value is multiplied by the health deducted by the tool hit which triggered the enchantment. For example, an iridium axe which reduced the giant crop's health by 3 points will produce three times this value per hit.
</p><p>If both fields are set, the stack size is randomized between them. If only one is set, it's applied as a limit after the generic fields. If neither is set, the generic <samp>MinStack</samp>/<samp>MaxStack</samp> fields are applied as usual without scaling.
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name for the texture containing the giant crop's sprite.
</td></tr>
<tr>
<td><samp>TexturePosition</samp>
</td>
<td><i>(Optional)</i> The top-left pixel position of the sprite within the <samp>Texture</samp>, specified as a model with <samp>X</samp> and <samp>Y</samp> fields. Defaults to (0, 0).
</td></tr>
<tr>
<td><samp>TileSize</samp>
</td>
<td><i>(Optional)</i> The area in tiles occupied by the giant crop, specified as a model with <samp>X</samp> and <samp>Y</samp> fields. This affects both its sprite size (which should be 16 pixels per tile) and the grid of crops needed for it to grow. Note that giant crops are drawn with an extra tile's height. Defaults to (3, 3).
</td></tr>
<tr>
<td><samp>Health</samp>
</td>
<td><i>(Optional)</i> The health points that must be depleted to break the giant crop. The number of points depleted per <a href="../../external.html?link=https://stardewvalleywiki.com/Axe" class="mw-redirect" title="Axe">axe</a> chop depends on the axe power level. Default 3.
</td></tr>
<tr>
<td><samp>Chance</samp>
</td>
<td><i>(Optional)</i> The percentage chance that a given grid of crops will grow into the giant crop each night, as a value between 0 (never) and 1 (always). Default 0.01 (1%).
<p>Note that the chance is checked for each giant crop that applies. If three giant crops each have a 1% chance of spawning for the same crop, then there's a 3% chance that one of them will spawn.
</p>
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether this giant crop is available to spawn. Defaults to always true.
</td></tr>
<tr>
<td><samp>CustomFields</samp>
</td>
<td>The <a href="#Custom_data_fields">custom fields</a> for this entry.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Custom_jukebox_tracks">Custom jukebox tracks</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>You can now change <a href="../../external.html?link=https://stardewvalleywiki.com/Jukebox" class="mw-redirect" title="Jukebox">jukebox</a> audio tracks by editing the new <samp>Data/JukeboxTracks</samp> data asset.
</p><p>This consists of a string → model lookup, where...
</p>
<ul><li>The key is the <a href="#Custom_audio">audio cue ID</a> to play (case-sensitive).</li>
<li>The value is a model with the fields listed below.</li></ul>
<p>If the player has heard a music track not listed in <samp>Data/JukeboxTracks</samp>, it's automatically available with the title set to the cue name. To disable a track, add an entry with <samp>"Available": false</samp>.
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Name</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> for the music track's in-game title. Defaults to the ID.
</td></tr>
<tr>
<td><samp>Available</samp>
</td>
<td><i>(Optional)</i> Whether the track should be shown in the jukebox menu. This can be <samp>true</samp> (always shown), <samp>false</samp> (never shown), or <samp>null</samp> (show if the player has heard it before). Default <samp>null</samp>.
<p>Tracks with <samp>"Available": true</samp> are listed first in the jukebox menu.
</p>
</td></tr>
<tr>
<td><samp>AlternativeTrackIds</samp>
</td>
<td><i>(Optional)</i> A list of other cue names for this audio track (not case-sensitive). If the player has heard any of these track IDs, this entry is available in the menu. Default none.
<p>For example, this can be used when renaming a track to keep it unlocked for existing players:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"{{ModId}}_TrackName"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"Name"</span><span class="o">:</span> <span class="s2">"{{i18n: track-name}}"</span><span class="p">,</span>
    <span class="s2">"AlternativeTrackIds"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"OldTrackName"</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Custom_movies">Custom movies</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Movie_theater_data" title="Modding:Movie theater data">Modding:Movie theater data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<dl><dd><i>See also: <a href="#Custom_movie_concessions">custom movie concessions</a>.</i></dd></dl>
<p><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Movie_theater_data#Movie_data" title="Modding:Movie theater data">Movie data</a> was previously very limited and prone to mod conflicts, since (a) we needed incrementing movie IDs like <samp>spring_movie_3</samp>, (b) we were limited to one movie per season, and (c) all sprites for each movie had to be in the vanilla <samp>LooseSprites/Movies</samp> spritesheet.
</p><p>Stardew Valley 1.6 revamps how movies work to address those limitations.
</p>
<dl>
<dt>Movie selection</dt>
<dd><p>Movies were previously selected based on a specific ID pattern: <samp>spring_movie_0</samp> would play in spring the year you built the movie theater, <samp>spring_movie_1</samp> would play in spring the next year, etc. That meant it'd take two in-game years to see the first custom movie, and ID conflicts had to be managed manually.</p>
In 1.6, we can now have multiple movies per month based on the new fields listed below. If multiple movies can play in the same season, each movie will be shown for an equal block of days within the month (e.g. four movies will each play for seven consecutive days). If there are more movies than days, 28 movies will be chosen at random to play that month.</dd>

<dt>New data fields
</dt><dd>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Seasons</samp>
</td>
<td><i>(Optional)</i> The seasons when the movie should play, or omit for any season. For example:
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"Seasons"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"Spring"</span><span class="p">,</span> <span class="s2">"Summer"</span> <span class="p">]</span>
</pre></div>
</td></tr>
<tr>
<td><samp>YearModulus</samp><br><samp>YearRemainder</samp>
</td>
<td><i>(Optional)</i> If set, plays the movie on alternating years based on the formula <samp>theater_age % modulus == remainder</samp>, where <samp>theater_age</samp> is the number of years since the movie theater was built. If omitted, the movie plays in any year.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// play in the first year, and every second year thereafter</span>
<span class="s2">"YearModulus"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="s2">"YearRemainder"</span><span class="o">:</span> <span class="mi">0</span>
</pre></div>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// play in the second year, and every second year thereafter</span>
<span class="s2">"YearModulus"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="s2">"YearRemainder"</span><span class="o">:</span> <span class="mi">1</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td><i>(Optional)</i> The asset name for the movie poster and screen images, or omit to use <samp>LooseSprites\Movies</samp>.
<p>This must be a spritesheet with one 490×128 pixel row per movie. A 13×19 area in the top-left corner of the row should contain the movie poster. With a 16-pixel offset from the left edge, there should be two rows of five 90×61 pixel movie screen images, with a six-pixel gap between each image. (The movie doesn't need to use all of the image slots.)
</p>
</td></tr>
<tr>
<td><samp>CranePrizes</samp>
</td>
<td><i>(Optional)</i> The items to add to the <a href="../../external.html?link=https://stardewvalleywiki.com/Movie_Theater#Crane_Game" title="Movie Theater">crane game</a> prize pool on days when this movie is playing, if any.
<p>This consists of a list of models with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><i>common fields</i>
</td>
<td>See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries#Item_spawn_fields" title="Modding:Item queries">item spawn fields</a> for the generic item fields supported for ammo items.
<p>If set to an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">item query</a> which returns multiple items, one of them will be selected at random.
</p>
</td></tr>
<tr>
<td><samp>Rarity</samp>
</td>
<td><i>(Optional)</i> The prize pool to add the item to. The possible values are <samp>1</samp> (common), <samp>2</samp> (rare), and <samp>3</samp> (deluxe). Default <samp>1</samp>.
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>ClearDefaultCranePrizeGroups</samp>
</td>
<td><i>(Optional)</i> The prize pools whose default items to discard, so only those specified by <samp>CranePrizes</samp> are available. Default none.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"ClearDefaultCranePrizeGroups"</span><span class="o">:</span> <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">]</span>
</pre></div>
</td></tr></tbody></table>
</dd>

<dt>Other changes</dt>
<dd>
<ul><li><samp>Data/Movies</samp>, <samp>Data/Concessions</samp>, and <samp>Data/MoviesReactions</samp> no longer have language variants. Instead translations were moved into <samp>Strings/*</samp> assets, and the data assets use <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable strings</a> to get text.</li>
<li><samp>Data/Movies</samp> is now a list instead of a dictionary. The order determines the order movies are shown within a season. Content packs can edit them the same way as before.</li>
<li>Added a <samp>debug movieSchedule <code title="optional field 'year'">[year]</code></samp> command to help troubleshoot movie selection.</li>
<li>Added methods for C# mods: <samp>MovieTheater.GetMovieToday()</samp>, <samp>GetUpcomingMovie()</samp>, and <samp>GetUpcomingMovie(afterDate)</samp>.</li></ul>
</dd>
</dl>
<p>For example, this content pack adds a new 'Pufferchick II' movie which plays in winter every third year:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/Movies"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"{{ModId}}_PufferchickII"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"Id"</span><span class="o">:</span> <span class="s2">"{{ModId}}_PufferchickII"</span><span class="p">,</span> <span class="c1">// must specify ID again when creating a new entry</span>

                    <span class="s2">"Seasons"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"winter"</span> <span class="p">],</span>
                    <span class="s2">"YearModulus"</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
                    <span class="s2">"YearRemainder"</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

                    <span class="s2">"Title"</span><span class="o">:</span> <span class="s2">"Pufferchick II"</span><span class="p">,</span> <span class="c1">// display text should usually use {{i18n}} for translations in actual usage</span>
                    <span class="s2">"Description"</span><span class="o">:</span> <span class="s2">"A sequel to the breakthrough adventure anime Pufferchick. The world is saved; what happens next?"</span><span class="p">,</span>
                    <span class="s2">"Tags"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"family"</span><span class="p">,</span> <span class="s2">"adventure"</span> <span class="p">],</span>

                    <span class="s2">"Texture"</span><span class="o">:</span> <span class="s2">"{{InternalAssetKey: assets/movie.png}}"</span><span class="p">,</span> <span class="c1">// an image in your content pack</span>
                    <span class="s2">"SheetIndex"</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

                    <span class="s2">"Scenes"</span><span class="o">:</span> <span class="p">[</span> <span class="p">...</span> <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Custom_wedding_event">Custom wedding event</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<p>The <a href="../../external.html?link=https://stardewvalleywiki.com/Marriage#The_Wedding" title="Marriage">wedding</a> event can now be changed by editing the <samp>Data\Weddings</samp> data asset, which consists of a data model with two relevant fields (listed below).
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>EventScript</samp>
</td>
<td>The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event scripts</a> which play the wedding. The game will use the script for the spouse NPC/player if it exists, otherwise it'll use the default script.
<p>This consists of a string → string dictionary, where...
</p>
<ul><li>The key is an NPC internal name (like <samp>Abigail</samp>), unique player ID, or <samp>default</samp> for the default script (which handles marrying either an NPC or player);</li>
<li>The value is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable strings</a> for the event script to play.</li></ul>
<p>The event scripts also have access to three extra tokens:
</p>
<table class="wikitable">

<tbody><tr>
<th>token
</th>
<th>effect
</th></tr>
<tr>
<td><samp>[SetupContextualWeddingAttendees]</samp>
</td>
<td>The concatenated <samp>Setup</samp> values for each of the <samp>Attendees</samp> present in the wedding.
</td></tr>
<tr>
<td><samp>[ContextualWeddingCelebrations]</samp>
</td>
<td>The concatenated <samp>Celebration</samp> values for each of the <samp>Attendees</samp> present in the wedding.
</td></tr>
<tr>
<td><samp>[SpouseActor]</samp>
</td>
<td>The actor ID for the NPC or other player being married (like <samp>Abigail</samp> for an NPC or <samp>farmer2</samp> for a player). This can be used in event commands like <code>faceDirection [SpouseActor] 1</code>.
<p>(You can also use <samp>spouse</samp> as an actor ID, but that will only work when marrying an NPC.)
</p>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>Attendees</samp>
</td>
<td>The other NPCs which should attend the wedding (unless they're the spouse). This consists of a string → model lookup, where the key is the internal NPC name, and the value is a model with these fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>The internal NPC name.
</td></tr>
<tr>
<td><samp>Setup</samp>
</td>
<td>The NPC's tile position and facing direction when they attend. This is equivalent to field index 2 in the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Basic_format" title="Modding:Event data">event basic data</a>.
</td></tr>
<tr>
<td><samp>Celebration</samp>
</td>
<td><i>(Optional)</i> The <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">event script</a> to run during the celebration, like <samp>faceDirection Pierre 3 true</samp> which makes Pierre turn to face left. This can contain any number of script commands.
</td></tr>
<tr>
<td><samp>Condition</samp>
</td>
<td><i>(Optional)</i> A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> which indicates whether the NPC should attend. Defaults to true.
</td></tr>
<tr>
<td><samp>IgnoreUnlockConditions</samp>
</td>
<td><i>(Optional)</i> Whether to add the NPC even if their entry in <samp>Data/Characters</samp> has an <samp>UnlockConditions</samp> field which doesn't match. Default false.
</td></tr></tbody></table>
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Game_state_queries">Game state queries</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">Modding:Game state queries</a>. This section below focuses on what's new in 1.6.</div>
<p>A <i>game state query</i> is a new vanilla way to specify conditions for some content like <a href="#Custom_shops">shop data</a>, inspired by <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a>'s conditions.
</p>
<h3 class="in-block"><span class="mw-headline" id="Gender_changes">Gender changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue" title="Modding:Dialogue">Modding:Dialogue</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<ul><li>Added an <a href="#gender-switch"><i>inline gender-switch token</i></a> to change text depending on the player's gender. This reduces duplicate text, works in more places than the <samp>^</samp> dialogue token, works in mail and other places where <samp>^</samp> has a different meaning, and supports non-binary gender.</li>
<li>For C# mod authors, added a unified <samp>Gender</samp> field for players and NPCs with the possible values <samp>Male</samp>, <samp>Female</samp>, and <samp>Unspecified</samp>. This replaces <samp>Farmer.isMale</samp> and the numeric NPC gender constants. Note that vanilla still only sets players to male or female, though mods can override it.</li>
<li>Gender-specific clothing variants can now be worn by any gender.</li>
<li>Removed French-only support for using <samp>^</samp> dialogue token in non-dialogue text. This is superseded by the new inline gender-switch command.</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Item_queries">Item queries</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">Modding:Item queries</a>. This section below focuses on what's new in 1.6.</div>
<p><i>Item queries</i> are a new built-in way to choose one or more items dynamically, instead of specifying a single item ID. These are used in various places like <a href="#Custom_machines">machine data</a> and <a href="#Custom_shops">shop data</a>.
</p><p>For example, a shop can sell a random <a href="../../external.html?link=https://stardewvalleywiki.com/House_Plant" title="House Plant">house plant</a> using the <samp>RANDOM_ITEMS</samp> query:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"ItemId"</span><span class="o">:</span> <span class="s2">"RANDOM_ITEMS (F) 1376 1390"</span><span class="p">,</span>
    <span class="s2">"MaxItems"</span><span class="o">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Item_spawn_fields">Item spawn fields</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries#Item_spawn_fields" title="Modding:Item queries">Modding:Item queries#Item spawn fields</a>. This section below focuses on what's new in 1.6.</div>
<p>Several data assets (like <a href="#Custom_machines">machines</a> and <a href="#Custom_shops">shops</a>) let you configure items to create using item queries. For consistency, these all share a set of common fields.
</p>
<h3 class="in-block"><span class="mw-headline" id="Color_fields">Color fields</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Color" title="Modding:Common data field types">Modding:Common data field types#Color</a>. This section below focuses on what's new in 1.6.</div>
<p>1.6 adds a standardized color format used in various data fields. This can be a color name, hexadecimal color code, or 8-bit RGB color code.
</p><p>For example, you can set debris color in <a href="#Custom_wild_trees"><samp>Data/WildTrees</samp></a>:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"DebrisColor"</span><span class="o">:</span> <span class="s2">"White"</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="modData_field_changes"><samp>modData</samp> field changes</span></h3>
<p>The <samp>modData</samp> fields are dictionaries of arbitrary string values which are synchronized in multiplayer and persisted in the save file, so mods can store custom data about the instances. The game already has the field for buildings, characters (including NPCs and players), items, locations, and terrain features.
</p><p>Stardew Valley 1.6...
</p>
<ul><li>Adds <samp>modData</samp> fields to the <samp>Crop</samp>, <samp>Projectile</samp>, and <samp>Quest</samp> types too.</li>
<li>Moves <samp>ModDataDictionary</samp> into the <samp>StardewValley.Mods</samp> namespace.</li>
<li>Fixes <samp>Item.modData</samp> not copied when performing special equipment replacement (e.g. for the <a href="../../external.html?link=https://stardewvalleywiki.com/Pans" title="Pans">copper pan</a> work as a hat).</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Quantity_modifiers">Quantity modifiers</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Quantity_modifiers" title="Modding:Common data field types">Modding:Common data field types#Quantity_modifiers</a>. This section below focuses on what's new in 1.6.</div>
<p><i>Quantity modifiers</i> apply dynamic changes to a numeric field in a data asset like <a href="#Custom_shops"><samp>Data/Shops</samp></a> or <a href="#Custom_machines"><samp>Data/Machines</samp></a>. For example, you can multiply a shop item's price or increase a machine output's quality. You can specify any number of modifiers for the same field.
</p>
<h3 class="in-block"><span class="mw-headline" id="Tokenizable_string_format">Tokenizable string format</span></h3>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">Modding:Tokenizable strings</a>. This section below focuses on what's new in 1.6.</div>
<p>Stardew Valley 1.6 adds <i>tokenizable strings</i>, which support any combination of literal text and token values. That includes a set of built-in tokens like <samp>FarmName</samp>, <samp>LocalizedText</samp>, etc.
</p><p>For example, previously you often needed to load text from a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Translation_key" title="Modding:Common data field types">translation key</a>. With this new format, you can use the literal text directly in the asset instead (including <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> tokens):
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// before</span>
<span class="s2">"Dialogue"</span><span class="o">:</span> <span class="s2">"Strings\\StringsFromCSFiles:ShopMenu.cs.11488"</span><span class="p">,</span>

<span class="c1">// after: any combination of literal text and tokens</span>
<span class="s2">"Dialogue"</span><span class="o">:</span> <span class="s2">"Welcome to Pierre's, {{PlayerName}}! How is [FarmName] doing?"</span><span class="p">,</span>
</pre></div>
<p>Tokenizable strings are only usable in specific fields (as indicated in their wiki or code docs).
</p><p>See <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">Modding:Tokenizable strings</a> for usage.
</p>
<h3 class="in-block"><span class="mw-headline" id="Event_changes"><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">Event</a> changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">Modding:Event data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<h4 class="in-block"><span class="mw-headline" id="High-level_changes">High-level changes</span></h4>
<ul><li>Event IDs are now <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string IDs</a>, so mods can use a unique key instead of hoping no other mod uses the same number. Unconditional events must have an empty precondition in their key (like <samp>"Example.ModId_EventName/"</samp>) to distinguish them from forks.</li>
<li>Event/festival commands with a direction argument now allow both case-insensitive names (like <samp>up</samp>) and numeric values.</li>
<li>Event script errors are now logged (in addition to being shown in the chatbox like before).</li>
<li>For C# mods:
<ul><li>You can now add custom event preconditions &amp; commands using new <samp>Event</samp> methods (<samp>RegisterPrecondition</samp>, <samp>RegisterPreconditionAlias</samp>, <samp>RegisterCommand</samp>, and <samp>RegisterCommandAlias</samp>).</li>
<li>Added <samp>Event.fromAssetName</samp>, which indicates which data asset (if any) the event was loaded from.</li>
<li>Added <samp>Game1.eventsSeenSinceLastLocationChange</samp> to track the events that played since the player arrived in their current location.</li></ul></li></ul>
<h4 class="in-block"><span class="mw-headline" id="Precondition_changes">Precondition changes</span></h4>
<ul>
<li>Added validation for preconditions. If a format or assumption is invalid, the game now logs a detailed error.</li>
<li>Added case-insensitive readable names for all preconditions. For example, <code>j 4/t 800 1300/a 0 54/H</code> can now optionally be written <code>daysPlayed 4/time 800 1300/tile 0 54/isHost</code>.
<table class="mw-collapsible mw-collapsed" style="">
<tbody><tr>
<th style="text-align: left;"><b>list of new names</b> 
</th></tr>
<tr>
<td>List of new event precondition names:
<pre>alias | readable name
----- | ------------------------------
*     | WorldState
*n    | HostOrLocalMail
a     | Tile
b     | ReachedMineBottom
B     | SpouseBed
C     | CommunityCenterOrWarehouseDone
c     | FreeInventorySlots
D     | Dating
e     | SawEvent
f     | Friendship
g     | Gender
H     | IsHost
h     | MissingPet
Hn    | HostMail
i     | HasItem
j     | DaysPlayed
J     | JojaBundlesDone
L     | InUpgradedHouse
m     | EarnedMoney
M     | HasMoney
N     | GoldenWalnuts
n     | LocalMail
O     | Spouse
p     | NpcVisibleHere
q     | ChoseDialogueAnswers
r     | Random
R     | Roommate
S     | SawSecretNote
s     | Shipped
t     | Time
u     | DayOfMonth
v     | NpcVisible
w     | Weather
x     | SendMail
y     | Year
</pre>
<p>And for deprecated preconditions (e.g. <code>NotSeason</code> is superseded by <code>!Season</code>):
</p>
<pre>alias | readable name
----- | ---------------------------------
*l    | NotHostOrLocalMail
A     | NotActiveDialogueEvent
d     | NotDayOfWeek
F     | NotFestivalDay
Hl    | NotHostMail
k     | NotSawEvent
l     | NotLocalMail
o     | NotSpouse
Rf    | NotRoommate
U     | NotUpcomingFestival
X     | NotCommunityCenterOrWarehouseDone
z     | NotSeason
</pre>
</td></tr></tbody></table>
</li>
<li>Event &amp; preconditions are now quote-aware, so you can escape spaces and slashes in arguments like <code>/G "SEASON Spring"/</code>.</li>
<li>Added new preconditions:
<table class="wikitable">

<tbody><tr>
<th>precondition
</th>
<th>description
</th></tr>
<tr>
<td><samp>!</samp>
</td>
<td>Prefixing <samp>!</samp> to any other precondition will now invert it. For example, <code>!spouse Abigail</code> will match if the player is <i>not</i> married to Abigail.
</td></tr>
<tr>
<td><samp>ActiveDialogueEvent <code title="required field 'id'">&lt;id&gt;</code></samp>
</td>
<td>The special dialogue event with the given ID (including <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Dialogue#Conversation_topics" title="Modding:Dialogue">Conversation Topics</a>) is in progress.
</td></tr>
<tr>
<td><samp>DayOfWeek <code title="required field 'day'">&lt;day&gt;</code>+</samp>
</td>
<td>Today is one of the specified days (may specify multiple days). This can be a case-insensitive three-letter abbreviation (like <samp>Mon</samp>) or full name (like <samp>Monday</samp>).
</td></tr>
<tr>
<td><samp>FestivalDay</samp>
</td>
<td>Today is a <a href="../../external.html?link=https://stardewvalleywiki.com/Festivals" title="Festivals">festival</a> day.
</td></tr>
<tr>
<td><samp>GameStateQuery <code title="required field 'query'">&lt;query&gt;</code></samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> matches, like <code>G !WEATHER Here Sun</code> for 'not sunny in this location'.
</td></tr>
<tr>
<td><samp>Season <code title="required field 'season'">&lt;season&gt;</code>+</samp>
</td>
<td>The current season is one of the given values (may specify multiple seasons).
</td></tr>
<tr>
<td><samp>Skill <code title="required field 'skill name'">&lt;skill name&gt;</code> <code title="required field 'min level'">&lt;min level&gt;</code></samp>
</td>
<td>The current farmer has reached at least <code title="required field 'min level'">&lt;min level&gt;</code> for the given <code title="required field 'skill name'">&lt;skill name&gt;</code> (one of <samp>Combat</samp>, <samp>Farming</samp>, <samp>Fishing</samp>, <samp>Foraging</samp>, <samp>Luck</samp>, or <samp>Mining</samp>).
</td></tr>
<tr>
<td><samp>UpcomingFestival <code title="required field 'day offset'">&lt;day offset&gt;</code></samp>
</td>
<td>A <a href="../../external.html?link=https://stardewvalleywiki.com/Festivals" title="Festivals">festival</a> day will occur within the given number of days.
</td></tr></tbody></table></li>
<li>Changed specific preconditions:
<table class="wikitable">

<tbody><tr>
<th>name
</th>
<th>changes
</th></tr>
<tr>
<td><samp>ChoseDialogueAnswers</samp> (<samp>q</samp>)
</td>
<td> 
<ul><li>Fixed precondition ignoring every second answer ID.</li></ul>
</td></tr>
<tr>
<td><samp>InUpgradedHouse</samp> (<samp>L</samp>)
</td>
<td> 
<ul><li>Added optional argument for the min upgrade level.</li></ul>
</td></tr>
<tr>
<td><samp>MissingPet</samp> (<samp>h</samp>)
</td>
<td> 
<ul><li>You can now specify any pet type ID.</li>
<li>You can now omit the argument to check for a pet of any type.</li></ul>
</td></tr>
<tr>
<td><samp>NotDayOfWeek</samp> (<samp>d</samp>)
</td>
<td> 
<ul><li>You can now specify a full name like <samp>Monday</samp>.</li>
<li>The day of week is now case-insensitive.</li></ul>
</td></tr>
<tr>
<td><samp>NotSeason</samp> (<samp>z</samp>)
</td>
<td> 
<ul><li>You can now list values (like <code>notSeason spring summer fall</code> instead of <code>notSeason fall/notSeason winter/notSeason fall</code>).</li></ul>
</td></tr>
<tr>
<td><samp>ReachedMineBottom</samp> (<samp>b</samp>)
</td>
<td> 
<ul><li>Argument is now optional (default 1).</li></ul>
</td></tr>
<tr>
<td><samp>SendMail</samp> (<samp>x</samp>)
</td>
<td> 
<ul><li>Deprecated; see <a href="#Send-mail_.28x.29_precondition_deprecated"><i>Send-mail (x) precondition deprecated</i></a> for more info.</li></ul>
</td></tr>
<tr>
<td><samp>Tile</samp> (<samp>a</samp>)
</td>
<td> 
<ul><li>Now also works when the player isn't currently warping, in which case it checks their current tile instead of their warp arrival tile.</li></ul>
</td></tr></tbody></table></li>
</ul>
<h4 class="in-block"><span class="mw-headline" id="Command_changes">Command changes</span></h4>
<ul>
<li>Added validation for event commands. If a format or assumption is invalid, the game now logs a detailed error and (if applicable) skips the command, instead of crashing or silently ignoring it. This also means event arguments are stricter (e.g. you can no longer set a true/false field to an invalid value, inner quotes in quoted arguments now need to be escaped, etc).</li>
<li>Event commands are now quote-aware, so you can escape spaces and slashes in arguments like <code>/speak "I'm running A/B tests"/</code>.</li>
<li>Event commands now trim surrounding whitespace, so they can be multilined for readability. Line breaks must be before or after the <samp>/</samp> delimiter. For example:
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"SomeEventId/"</span><span class="o">:</span> <span class="s2">"</span>
<span class="s2">    none/</span>
<span class="s2">    -1000 -1000/</span>
<span class="s2">    farmer 5 7 0/</span>
<span class="s2">    ...</span>
<span class="s2">"</span>
</pre></div>
<p>This can be also combined with the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Comments" title="Modding:Event data">comment syntax</a> to add notes. For example:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"SomeEventId/"</span><span class="o">:</span> <span class="s2">"</span>
<span class="s2">    none/            -- music/</span>
<span class="s2">    -1000 -1000/     -- initial viewport position/</span>
<span class="s2">    farmer 5 7 0/    -- actor positions/</span>
<span class="s2">    ...</span>
<span class="s2">"</span>
</pre></div>
</li>
<li>You can now mark NPCs optional in event commands by suffixing their name with <code>?</code>. For example, <code>jump Kent?</code> won't log an error if Kent is missing. When used in the initial event positions, the NPC is only added in they exist in <samp>Data/Characters</samp> and their <samp>UnlockConditions</samp> match.</li>
<li>Added new event commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>description
</th></tr>
<tr>
<td><samp>action <code title="required field 'action'">&lt;action&gt;</code></samp>
</td>
<td>Run a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Trigger_actions" title="Modding:Trigger actions">trigger action string</a>, like <samp>action AddMoney 500</samp> to add <span style="display: none;">data-sort-value="500"&gt;</span><span class="no-wrap"><noscript><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18"></noscript><span class="lazy-image-placeholder" style="width: 18px;height: 18px;" data-src="/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" data-alt="Gold.png" data-width="18" data-height="18"> </span>500g</span> to the current player.
</td></tr>
<tr>
<td><samp>addItem <code title="required field 'item ID'">&lt;item ID&gt;</code> <code title="optional field 'count'">[count]</code> <code title="optional field 'quality'">[quality]</code></samp>
</td>
<td>Add an item to the player inventory (or open a grab menu if their inventory is full). The <code title="required field 'item ID'">&lt;item ID&gt;</code> is the <a href="#Custom_items">qualified or unqualified item ID</a>, and <code title="optional field 'quality'">[quality]</code> is a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Items#Quality" title="Modding:Items">numeric quality value</a>.
</td></tr>
<tr>
<td><samp>addSpecialOrder <code title="required field 'order ID'">&lt;order ID&gt;</code></samp><br><samp>removeSpecialOrder <code title="required field 'order ID'">&lt;order ID&gt;</code></samp>
</td>
<td>Add or remove a special order to the player team. This affects all players, since special orders are shared.
</td></tr>
<tr>
<td><samp>eventSeen <code title="required field 'event ID'">&lt;event ID&gt;</code> <code title="optional field 'seen'">[seen]</code></samp>
</td>
<td>Add or remove an event ID from the player's list of seen events, based on <code title="optional field 'seen'">[seen]</code> (default <samp>true</samp> to add).
<p>An event can mark <i>itself</i> unseen using <samp>eventSeen <code title="required field 'event ID'">&lt;event ID&gt;</code> false</samp>. This takes effect immediately (i.e. the event won't be added to the list when it completes), but the game will prevent the event from playing again until the player changes location to avoid event loops. The event will still replay when re-entering the location.
</p>
</td></tr>
<tr>
<td><samp>mailToday <code title="required field 'mail key'">&lt;mail key&gt;</code></samp>
</td>
<td>Adds a letter to the mailbox immediately, given the <code title="required field 'mail key'">&lt;mail key&gt;</code> in <samp>Data/Mail</samp>.
</td></tr>
<tr>
<td><samp>questionAnswered <code title="required field 'answer ID'">&lt;answer ID&gt;</code> <code title="optional field 'answered'">[answered]</code></samp>
</td>
<td>Add or remove an answer ID from the player's list of chosen dialogue answers, based on <code title="optional field 'answered'">[answered]</code> (default <samp>true</samp> to add).
</td></tr>
<tr>
<td><samp>replaceWithClone <code title="required field 'NPC name'">&lt;NPC name&gt;</code></samp>
</td>
<td>Replace an NPC already in the event with a temporary copy. This allows changing the NPC for the event without affecting the real NPC.
<p>For example, this event changes Marnie's name/portrait only within the event:
</p>
<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"Some.ModId_ExampleEvent/"</span><span class="o">:</span> <span class="s2">"continue/64 15/farmer 64 15 2 Marnie 64 17 0/replaceWithClone Marnie/changeName Marnie Pufferchick/changePortrait Marnie Pufferchick/[...]/end"</span>
</pre></div>
</td></tr>
<tr>
<td><samp>setSkipActions <code title="optional field 'actions'">[actions]</code></samp>
</td>
<td>Set <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Trigger_actions" title="Modding:Trigger actions">trigger actions</a> that should run if the player skips the event. You can list multiple actions delimited with <samp>#</samp>, or omit <code title="optional field 'actions'">[actions]</code> so no actions are run. When the player skips, the last <samp>setSkipActions</samp> before that point is applied.
<p>For example, this adds the <a href="../../external.html?link=https://stardewvalleywiki.com/Garden_Pot" title="Garden Pot">garden pot</a> recipe and item to the player if the event is skipped, but avoids adding the item if the event already did it:
</p>
<pre>/setSkipActions AddCraftingRecipe Current "Garden Pot"#AddItem (BC)62
/skippable
/...
/addItem (BC)62
/setSkipActions AddCraftingRecipe Current "Garden Pot"
</pre>
<p>Skip actions aren't applied if the event completes normally without being skipped.
</p>
</td></tr>
<tr>
<td><samp>stopSound <code title="required field 'sound ID'">&lt;sound ID&gt;</code> <code title="optional field 'immediate'">[immediate]</code></samp>
</td>
<td>Stop a sound started with the <samp>startSound</samp> command. This has no effect if the sound has already stopped playing on its own (or hasn't been started). If you started multiple sounds with the same ID, this will stop all of them (e.g. <code>startSound fuse/startSound fuse/stopSound fuse</code>).
<p>By default the sound will stop immediately. For looping sounds, you can pass <samp>false</samp> to the <code title="optional field 'immediate'">[immediate]</code> argument to stop the sound when it finishes playing the current iteration instead (e.g. <code>stopSound fuse false</code>).
</p>
</td></tr>
<tr>
<td><samp>temporaryAnimatedSprite ...</samp>
</td>
<td>Add a temporary animated sprite to the event, using these space-delimited fields:
<table class="wikitable">

<tbody><tr>
<th>index
</th>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td>0
</td>
<td><samp>texture</samp>
</td>
<td>The asset name for texture to draw.
</td></tr>
<tr>
<td>1–4
</td>
<td><samp>rectangle</samp>
</td>
<td>The pixel area within the <samp>texture</samp> to draw, in the form <samp><code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code> <code title="required field 'width'">&lt;width&gt;</code> <code title="required field 'height'">&lt;height&gt;</code></samp>.
</td></tr>
<tr>
<td>5
</td>
<td><samp>interval</samp>
</td>
<td>The millisecond duration for each frame in the animation.
</td></tr>
<tr>
<td>6
</td>
<td><samp>frames</samp>
</td>
<td>The number of frames in the animation.
</td></tr>
<tr>
<td>7
</td>
<td><samp>loops</samp>
</td>
<td>The number of times to repeat the animation.
</td></tr>
<tr>
<td>8–9
</td>
<td><samp>tile</samp>
</td>
<td>The tile position at which to draw the sprite, in the form <samp><code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp>.
</td></tr>
<tr>
<td>10
</td>
<td><samp>flicker</samp>
</td>
<td>Causes the sprite to flicker in and out of view repeatedly. (one of <samp>true</samp> or <samp>false</samp>).
</td></tr>
<tr>
<td>11
</td>
<td><samp>flip</samp>
</td>
<td>Whether to flip the sprite horizontally when it's drawn (one of <samp>true</samp> or <samp>false</samp>).
</td></tr>
<tr>
<td>12
</td>
<td><samp>sort tile Y</samp>
</td>
<td>The tile Y position to use in the layer depth calculation, which affects which sprite is drawn on top if two sprites overlap. The larger the number, the higher layer the sprite is on.
</td></tr>
<tr>
<td>13
</td>
<td><samp>alpha fade</samp>
</td>
<td>Fades out the sprite based on alpha set. The larger the number, the faster the fade out. 1 is instant.
</td></tr>
<tr>
<td>14
</td>
<td><samp>scale</samp>
</td>
<td>A multiplier applied to the sprite size (in addition to the normal 4× pixel zoom).
</td></tr>
<tr>
<td>15
</td>
<td><samp>scale change</samp>
</td>
<td>Changes the scale based on the multiplier applied on top of the normal zoom. Continues endlessly.
</td></tr>
<tr>
<td>16
</td>
<td><samp>rotation</samp>
</td>
<td>The rotation to apply to the sprite, measured in <a href="../../external.html?link=https://en.wikipedia.org/wiki/radians" class="extiw" title="wikipedia:radians">radians</a>.
</td></tr>
<tr>
<td>17
</td>
<td><samp>rotation change</samp>
</td>
<td>Continuously rotates the sprite, causing it to spin. The speed is determined by input value.
</td></tr>
<tr>
<td>18+
</td>
<td><i>flags</i>
</td>
<td>Any combination of these space-delimited flags:
<ul><li><samp>color <code title="required field 'color'">&lt;color&gt;</code></samp>: apply a <a href="#Color_fields">standard color</a> to the sprite.</li>
<li><samp>hold_last_frame</samp>: after playing the animation once, freeze the last frame as long as the sprite is shown.</li>
<li><samp>ping_pong</samp>: Causes the animation frames to play forwards and backwards alternatingly. Example: An animation with the frames 0, 1, 2 will play "0 1 2 0 1 2" without the ping_pong flag and play "0 1 2 1 0" with the ping_pong flag.</li>
<li><samp>motion <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp>: Sprite moves based on the values set. Numbers can be decimals or negative.</li>
<li><samp>acceleration <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp>: <b>[TODO: document what this does]</b></li>
<li><samp>acceleration_change <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code></samp>: <b>[TODO: document what this does]</b></li></ul>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>translateName <code title="required field 'actor'">&lt;actor&gt;</code> <code title="required field 'translation key'">&lt;translation key&gt;</code></samp>
</td>
<td>Set the display name for an NPC in the event to match the given translation key.
</td></tr>
<tr>
<td><samp>warpFarmers [<code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code> <code title="required field 'direction'">&lt;direction&gt;</code>]+ <code title="required field 'default offset'">&lt;default offset&gt;</code> <code title="required field 'default x'">&lt;default x&gt;</code> <code title="required field 'default'">&lt;default&gt;</code> <code title="required field 'direction'">&lt;direction&gt;</code></samp>
</td>
<td>Warps connected players to the given <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#Tiles" title="Modding:Modder Guide/Game Fundamentals">tile coordinates</a> and <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Directions" title="Modding:Event data">numeric directions</a>. The <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code> <code title="required field 'direction'">&lt;direction&gt;</code> triplet is repeated for each connected player (e.g. the first triplet is for the main player, second triplet is for the first farmhand, etc). The triplets are followed by an offset direction (one of <samp>up</samp>, <samp>down</samp>, <samp>left</samp>, or <samp>right</samp>), and a final triplet which defines the default values used by any other player.
</td></tr></tbody></table>
</li>
<li>Fixed some commands assuming a boolean argument is true if present, regardless of its value. This affects the <samp>changeToTemporaryMap</samp>, <samp>emote</samp>, <samp>extendSourceRect</samp>, <samp>faceDirection</samp>, <samp>globalFade</samp>, <samp>globalFadeToClear</samp>, <samp>positionOffset</samp>, and <samp>warp</samp> commands.</li>
<li>Fixed some commands assuming any value except the exact case-sensitive string <samp>true</samp> is false. This affects the <samp>animate</samp>, <samp>glow</samp>, <samp>hideShadow</samp>, <samp>ignoreMovementAnimation</samp>, <samp>temporaryAnimatedSprite</samp>, <samp>temporarySprite</samp>, and <samp>viewport</samp> commands.</li>
<li>Fixed some commands silently ignoring values they can't parse as the expected type. This affects the <samp>addItem</samp>, <samp>makeInvisible</samp>, and <samp>removeItem</samp> commands.</li>
<li>Fixed crash when some commands are passed <samp>farmer[number]</samp> for a player who's not available, or <samp>farmer[number]</samp> when they expect <samp>farmer</samp>.</li>
<li>Fixed some commands not taking into account custom farmer actors when checking <samp>farmer*</samp> actor IDs.</li>
<li>Fixed warp-out event commands able to use NPC-only or gendered warps. They now use a valid warp for the player if possible.</li>
<li>Changed specific commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>changes
</th></tr>
<tr>
<td><samp>addCookingRecipe</samp>
</td>
<td>Fixed error if player already knows the recipe.
</td></tr>
<tr>
<td><samp>addMailReceived</samp>
</td>
<td> 
<ul><li>Renamed to <samp>mailReceived</samp>. (The old name is now an alias, so it'll still work.)</li>
<li>You can now remove a mail received by setting the optional third argument to false, like <samp>mailReceived <code title="required field 'id'">&lt;id&gt;</code> false</samp>.</li></ul>
</td></tr>
<tr>
<td><samp>addTemporaryActor</samp>
</td>
<td> 
<ul><li>Underscores in the asset name are now only replaced with spaces if an exact match wasn't found. You should quote arguments containing spaces instead, like <code>addTemporaryActor "White Chicken" …</code>.</li>
<li>Underscores in the display name are no longer replaced with spaces. You should quote arguments containing spaces instead.</li>
<li>Argument 9 (<code title="optional field 'animal name'">[animal name]</code>) is now <code title="optional field 'override name'">[override name]</code>, and can be used to set the name for non-animals too.</li></ul>
</td></tr>
<tr>
<td><samp>animate</samp>
</td>
<td>Underscores in the NPC name are now only replaced with spaces if an exact match wasn't found. You should quote arguments containing spaces instead, like <code>animate "Mr Qi" …</code>.
</td></tr>
<tr>
<td><samp>ambientLight</samp>
</td>
<td>Removed four-argument form (which was unused and had confusing behavior). The other versions of <samp>ambientLight</samp> still work like before.
</td></tr>
<tr>
<td><samp>awardFestivalPrize</samp>
</td>
<td>Added support for arbitrary item IDs, like <code>awardFestivalPrize (O)128</code> for a pufferfish.
</td></tr>
<tr>
<td><samp>changeLocation</samp>
</td>
<td>It now updates the event position offset if needed.
</td></tr>
<tr>
<td><samp>changeName</samp>
</td>
<td>Underscores in the NPC name are no longer replaced with spaces. You should quote arguments containing spaces instead, like <code>changeName Leo "Neo Leo"</code>.
</td></tr>
<tr>
<td><samp>changePortrait</samp><br><samp>changeSprite</samp>
</td>
<td>You can now omit the suffix argument to reset the NPC back to their normal portrait/sprite.
</td></tr>
<tr>
<td><samp>faceDirection</samp>
</td>
<td>You can now specify the direction in words, like <samp>faceDirection up</samp>
</td></tr>
<tr>
<td><samp>ignoreMovementAnimation</samp>
</td>
<td> 
<ul><li>Fixed its <i>ignore</i> argument being ignored.</li>
<li>Underscores in the NPC name are now only replaced with spaces if an exact match wasn't found. You should quote arguments containing spaces instead, like <code>ignoreMovementAnimation "Mr Qi" …</code>.</li></ul>
</td></tr>
<tr>
<td><samp>itemAboveHead</samp>
</td>
<td>Added support for arbitrary item IDs, like <code>itemAboveHead (O)128</code> for a pufferfish.
</td></tr>
<tr>
<td><samp>makeInvisible</samp>
</td>
<td>Fixed terrain features not hidden when using the default area size.
</td></tr>
<tr>
<td><samp>playSound</samp>
</td>
<td>Sounds started via <samp>playSound</samp> now stop automatically when the event ends.
</td></tr>
<tr>
<td><samp>removeItem</samp>
</td>
<td>Added argument for an optional count, like <code>removeItem (O)128 10</code> to remove 10 pufferfish.
</td></tr>
<tr>
<td><samp>speak</samp>
</td>
<td>Fixed friendship &amp; socialize quest not updated when calling it with a translation key.
</td></tr></tbody></table></li>
<li>Removed some commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>changes
</th></tr>
<tr>
<td><samp>addToTable</samp>
</td>
<td>Removed (it was unused and worked in counterintuitive ways).
</td></tr>
<tr>
<td><samp>addTool</samp>
</td>
<td>Removed (it was unused and only supported the <a href="../../external.html?link=https://stardewvalleywiki.com/Return_Scepter" title="Return Scepter">return scepter</a>). Use <samp>addItem</samp> instead, which supports adding tools.
</td></tr>
<tr>
<td><samp>grabObject</samp>
</td>
<td>Removed (it was unused and broken).
</td></tr>
<tr>
<td><samp>showRivalFrame</samp><br><samp>taxVote</samp>
</td>
<td>Removed (they were part of unimplemented features).
</td></tr>
<tr>
<td><samp>weddingSprite</samp>
</td>
<td>Removed (it was broken and unused).
</td></tr></tbody></table>
</li></ul>
<h4 class="in-block"><span class="mw-headline" id="Festival_changes">Festival changes</span></h4>
<ul><li>Festivals can now have a custom festival-started notification message by setting the <samp>startedMessage</samp> field in <samp>Data/Festivals/*</samp> to a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a>.</li>
<li>Festivals now set the event ID to a value like <samp>festival_fall16</samp>, instead of <samp>-1</samp>.</li>
<li>All in-festival data fields now support <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Festival_data#Year_variants" title="Modding:Festival data">year variants</a>.</li>
<li>Fixed NPCs getting duplicated in festivals if they're added to the <samp>set-up</samp> fields multiple times. Subsequent entries now move them instead.</li>
<li>Fixed <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Festival_data#Year_variants" title="Modding:Festival data">year variants</a> for festival <samp>set-up</samp> field being appended to the main script instead of replacing it.</li></ul>
<h4 class="in-block"><span id="Send-mail_(x)_precondition_deprecated"></span><span class="mw-headline" id="Send-mail_.28x.29_precondition_deprecated">Send-mail (<samp>x</samp>) precondition deprecated</span></h4>
<p>Using the <samp>x</samp> event precondition as a way to send mail is now deprecated (but still works). You should use <a href="#Trigger_actions">trigger actions</a> instead to perform actions like that.
</p><p>All vanilla events which used it have been replaced by equivalent trigger actions. This event IDs below no longer exist; if you check them (e.g. via <samp>HasSeenEvent</samp>), you'll need to check the new action or the mail flag they set instead.
</p>
<table class="wikitable">

<tbody><tr>
<th>old event ID
</th>
<th>new action ID
</th>
<th>mail flag
</th></tr>
<tr>
<td><samp>68</samp>
</td>
<td><samp>Mail_Mom_5K</samp>
</td>
<td><samp>mom1</samp>
</td></tr>
<tr>
<td><samp>69</samp>
</td>
<td><samp>Mail_Mom_15K</samp>
</td>
<td><samp>mom2</samp>
</td></tr>
<tr>
<td><samp>70</samp>
</td>
<td><samp>Mail_Mom_32K</samp>
</td>
<td><samp>mom3</samp>
</td></tr>
<tr>
<td><samp>71</samp>
</td>
<td><samp>Mail_Mom_120K</samp>
</td>
<td><samp>mom4</samp>
</td></tr>
<tr>
<td><samp>72</samp>
</td>
<td><samp>Mail_Dad_5K</samp>
</td>
<td><samp>dad1</samp>
</td></tr>
<tr>
<td><samp>73</samp>
</td>
<td><samp>Mail_Dad_15K</samp>
</td>
<td><samp>dad2</samp>
</td></tr>
<tr>
<td><samp>74</samp>
</td>
<td><samp>Mail_Dad_32K</samp>
</td>
<td><samp>dad3</samp>
</td></tr>
<tr>
<td><samp>75</samp>
</td>
<td><samp>Mail_Dad_120K</samp>
</td>
<td><samp>dad4</samp>
</td></tr>
<tr>
<td><samp>76</samp>
</td>
<td><samp>Mail_Tribune_UpAndComing</samp>
</td>
<td><samp>newsstory</samp>
</td></tr>
<tr>
<td><samp>706</samp>
</td>
<td><samp>Mail_Pierre_Fertilizers</samp>
</td>
<td><samp>fertilizers</samp>
</td></tr>
<tr>
<td><samp>707</samp>
</td>
<td><samp>Mail_Pierre_FertilizersHighQuality</samp>
</td>
<td><samp>fertilizers2</samp>
</td></tr>
<tr>
<td><samp>909</samp>
</td>
<td><samp>Mail_Robin_Woodchipper</samp>
</td>
<td><samp>WoodChipper</samp>
</td></tr>
<tr>
<td><samp>2111194</samp>
</td>
<td><samp>Mail_Emily_8heart</samp>
</td>
<td><samp>EmilyClothingTherapy</samp>
</td></tr>
<tr>
<td><samp>2111294</samp>
</td>
<td><samp>Mail_Emily_10heart</samp>
</td>
<td><samp>EmilyCamping</samp>
</td></tr>
<tr>
<td><samp>2346091</samp>
</td>
<td><samp>Mail_Alex_10heart</samp>
</td>
<td><samp>joshMessage</samp>
</td></tr>
<tr>
<td><samp>2346092</samp>
</td>
<td><samp>Mail_Sam_10heart</samp>
</td>
<td><samp>samMessage</samp>
</td></tr>
<tr>
<td><samp>2346093</samp>
</td>
<td><samp>Mail_Harvey_10heart</samp>
</td>
<td><samp>harveyBalloon</samp>
</td></tr>
<tr>
<td><samp>2346094</samp>
</td>
<td><samp>Mail_Elliott_10heart</samp>
</td>
<td><samp>elliottBoat</samp>
</td></tr>
<tr>
<td><samp>2346095</samp>
</td>
<td><samp>Mail_Elliott_8heart</samp>
</td>
<td><samp>elliottReading</samp>
</td></tr>
<tr>
<td><samp>2346096</samp>
</td>
<td><samp>Mail_Penny_10heart</samp>
</td>
<td><samp>pennySpa</samp>
</td></tr>
<tr>
<td><samp>2346097</samp>
</td>
<td><samp>Mail_Abigail_8heart</samp>
</td>
<td><samp>abbySpiritBoard</samp>
</td></tr>
<tr>
<td><samp>3333094</samp>
</td>
<td><samp>Mail_Pierre_ExtendedHours</samp>
</td>
<td><samp>pierreHours</samp>
</td></tr>
<tr>
<td><samp>3872126</samp>
</td>
<td><samp>Mail_Willy_BackRoomUnlocked</samp>
</td>
<td><samp>willyBackRoomInvitation</samp>
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Mail_changes"><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">Mail</a> changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Mail_data" title="Modding:Mail data">Modding:Mail data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<ul>
<li>Mail can now have multiple items attached (using multiple <samp>%item</samp> commands). When the player grabs the top item, the next one will appear in the slot to grab next.</li>
<li>Added mail commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>effect
</th></tr>
<tr>
<td><samp>%action <code title="required field 'action'">&lt;action&gt;</code>%%</samp>
</td>
<td>Run a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Trigger_actions" title="Modding:Trigger actions">trigger action string</a>, like <samp>%action AddMoney 500%%</samp> to add <span style="display: none;">data-sort-value="500"&gt;</span><span class="no-wrap"><noscript><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18"></noscript><span class="lazy-image-placeholder" style="width: 18px;height: 18px;" data-src="/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" data-alt="Gold.png" data-width="18" data-height="18"> </span>500g</span> to the current player.
</td></tr></tbody></table></li>
<li>Improved mail commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>changes
</th></tr>
<tr>
<td><samp>%item</samp>
</td>
<td> 
<ul><li>Added <samp>%item id <code title="required field 'item id'">&lt;item id&gt;</code> <code title="optional field 'count'">[count]</code></samp> form which accepts a <a href="#Custom_items">qualified or unqualified item ID</a>. If multiple items are listed (<i>e.g.,</i> <samp>%item id (BC)12 3 (O)34 5 %%</samp>) one set will be picked randomly. This deprecates the <samp>bigobject</samp>, <samp>furniture</samp>, <samp>object</samp>, and <samp>tools</samp> options.</li>
<li>Added <samp>%item specialOrder <code title="required field 'order id'">&lt;order id&gt;</code> <code title="optional field 'immediately'">[immediately]</code></samp> form to attach a special order to the letter.</li>
<li>Added optional <code title="required field 'key'">&lt;key&gt;</code> argument to <samp>%item cookingRecipe <code title="required field 'key'">&lt;key&gt;</code></samp>, to learn a specific <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Recipe_data" title="Modding:Recipe data">cooking recipe</a>. The previous <samp>%item cookingRecipe</samp> form (without a key) works the same way as before.</li>
<li>The type argument is now case-insensitive.</li>
<li>Fixed <samp>%item craftingRecipe</samp> not supporting recipe IDs containing underscores. It now checks for an exact match first, then tries replacing underscores with spaces like before, then logs a warning if neither was found instead of adding an invalid recipe.</li></ul>
</td></tr></tbody></table></li>
<li>All wallet items are now tracked via mail flags. That adds these mail flags: <samp>HasClubCard</samp>, <samp>HasDarkTalisman</samp>, <samp>HasDwarvishTranslationGuide</samp>, <samp>HasMagicInk</samp>, <samp>HasMagnifyingGlass</samp>, <samp>HasRustyKey</samp>, <samp>HasSkullKey</samp>, <samp>HasSpecialCharm</samp>, <samp>HasTownKey</samp>, and <samp>HasUnlockedSkullDoor</samp>.</li>
<li>Fixed letter viewer error when opening an invalid letter.</li>
</ul>
<h3 class="in-block"><span id="Stat_changes_for_C#_mods"></span><span class="mw-headline" id="Stat_changes_for_C.23_mods">Stat changes for C# mods</span></h3>
<p>The tracked stats API (e.g. <code>Game1.stats</code> and <code>Game1.player.stats</code>) has been overhauled.
</p><p>In particular, all stats are now in the underlying stat dictionary. If you use a stat field directly (like <code>stats.dirtHoed</code>), you'll need to use the property (like <code>stats.DirtHoed</code>) or method (like <code>stats.Get(StatsKey.DirtHoed)</code>). This lets the game or mods access all stats in a standard way without reflection. 1.6 also adds <samp>StatsKey</samp> constants for all stats tracked by the game.
</p><p>The <samp>stats</samp> API has also been redesigned:
</p>
<table class="wikitable">

<tbody><tr>
<th>member
</th>
<th>comments
</th></tr>
<tr>
<td><samp>Values</samp>
</td>
<td>The numeric metrics tracked by the game. This replaces <samp>stats_dictionary</samp>.
</td></tr>
<tr>
<td><samp>Get(key)</samp>
</td>
<td>Get the value of a tracked stat. This replaces <samp>getStat</samp>.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">uint</span> <span class="n">daysPlayed</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">stats</span><span class="p">.</span><span class="n">Get</span><span class="p">(</span><span class="n">StatKeys</span><span class="p">.</span><span class="n">DaysPlayed</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Set(key, value)</samp>
</td>
<td>Set the new value of a tracked stat. This method is new.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Game1</span><span class="p">.</span><span class="n">stats</span><span class="p">.</span><span class="n">Set</span><span class="p">(</span><span class="n">StatKeys</span><span class="p">.</span><span class="n">ChildrenTurnedToDoves</span><span class="p">,</span> <span class="m">5</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Increment(key)</samp><br><samp>Increment(key, amount)</samp>
</td>
<td>Add the given amount to the stat (default 1), and return the new stat value. This improves on the original <samp>incrementStat</samp>.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">uint</span> <span class="n">stepsTaken</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">stats</span><span class="p">.</span><span class="n">Increment</span><span class="p">(</span><span class="n">StatKeys</span><span class="p">.</span><span class="n">StepsTaken</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
<p>This can also be used to track custom mod stats, they doesn't need to be stats normally tracked by the game. Custom stats should be prefixed with your mod's unique ID to avoid conflicts:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Game1</span><span class="p">.</span><span class="n">stats</span><span class="p">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Your.ModId_CustomStat"</span><span class="p">,</span> <span class="m">5</span><span class="p">);</span>
</pre></div>
<p>And finally, setting a stat to 0 now removes it from the stats dictionary (since that's the default for missing stats).
</p>
<h3 class="in-block"><span id="New_C#_utility_methods"></span><span class="mw-headline" id="New_C.23_utility_methods">New C# utility methods</span></h3>
<p>Stardew Valley 1.6 adds several new methods to simplify common logic.
</p>
<h4 class="in-block"><span class="mw-headline" id="Argument_handling">Argument handling</span></h4>
<p>The new <samp>ArgUtility</samp> class handles splitting, reading, and validating <samp>string[]</samp> argument lists. The main methods are:
</p>
<dl><dt>Splitting arrays:</dt></dl>
<dl><dd><table class="wikitable">

<tbody><tr>
<th><samp>ArgUtility</samp> method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>SplitBySpace</samp>
</td>
<td>Split space-separated arguments in a string. This automatically ignores extra spaces, so <samp>" x  y "</samp> and <samp>"x y"</samp> are equivalent. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpace</span><span class="p">(</span><span class="s">"a b c"</span><span class="p">);</span>
<span class="kt">string</span> <span class="n">secondField</span> <span class="p">=</span> <span class="n">fields</span><span class="p">[</span><span class="m">1</span><span class="p">];</span> <span class="c1">// "b"</span>
</pre></div>
</td></tr>
<tr>
<td><samp>SplitBySpaceAndGet</samp>
</td>
<td>Get the value at an index in a space-delimited string (if found), else return the default value. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">thirdField</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceAndGet</span><span class="p">(</span><span class="s">"a b c"</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span> <span class="c1">// "c"</span>
<span class="kt">string</span> <span class="n">invalidFieldA</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceAndGet</span><span class="p">(</span><span class="s">"a b c"</span><span class="p">,</span> <span class="m">5</span><span class="p">);</span> <span class="c1">// null</span>
<span class="kt">string</span> <span class="n">invalidFieldB</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceAndGet</span><span class="p">(</span><span class="s">"a b c"</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">:</span> <span class="s">"boop"</span><span class="p">);</span> <span class="c1">// "boop"</span>
</pre></div>
<p>This is more efficient than <samp>SplitBySpace</samp> when you only need a single value, but it's slower if you need multiple values.
</p>
</td></tr>
<tr>
<td><samp>SplitBySpaceQuoteAware</samp>
</td>
<td>Split space-separated arguments in a string, with support for using quotes to protect spaces within an argument. See <samp>SplitQuoteAware</samp> below for info on quote handling.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">buildingName</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceQuoteAware</span><span class="p">(</span><span class="s">"BUILDINGS_CONSTRUCTED Here \"Junimo Hut\""</span><span class="p">)[</span><span class="m">1</span><span class="p">];</span> <span class="c1">// Junimo Hut</span>
</pre></div>
</td></tr>
<tr>
<td><samp>SplitQuoteAware</samp>
</td>
<td>Split delimited arguments in a string, with support for using quotes to protect delimiters within an argument.
<p>A quote in the text causes any delimiter to be ignored until the next quote, unless it's escaped like <code>\"</code>. Unescaped quotes are removed from the string. (Remember that backslashes need to be escaped in C# or JSON strings, like <code>"\\"</code> for a single backslash.)
</p><p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitQuoteAware</span><span class="p">(</span><span class="s">"A,B,C"</span><span class="p">,</span> <span class="sc">','</span><span class="p">);</span>        <span class="c1">// [ "A", "B", "C" ]</span>
<span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitQuoteAware</span><span class="p">(</span><span class="s">"A,\"B,C\",D"</span><span class="p">,</span> <span class="sc">','</span><span class="p">);</span> <span class="c1">// [ "A", "B,C", "D" ]</span>
<span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitQuoteAware</span><span class="p">(</span><span class="s">"A,\\\"B,C"</span><span class="p">,</span> <span class="sc">','</span><span class="p">);</span>    <span class="c1">// [ "A", "\"B", "C" ]</span>
</pre></div>
<p>You can also set the optional arguments for more advanced cases. For example, <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state queries</a> use this to split twice:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">gameStateQuery</span> <span class="p">=</span> <span class="s">"BUILDINGS_CONSTRUCTED Here \"Junimo Hut\", SEASON Spring"</span><span class="p">;</span>

<span class="kt">string</span><span class="p">[]</span> <span class="n">queries</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitQuoteAware</span><span class="p">(</span><span class="n">gameStateQuery</span><span class="p">,</span> <span class="sc">','</span><span class="p">,</span> <span class="n">StringSplitOptions</span><span class="p">.</span><span class="n">RemoveEmptyEntries</span><span class="p">,</span> <span class="n">keepQuotesAndEscapes</span><span class="p">:</span> <span class="k">true</span><span class="p">);</span> <span class="c1">// [ "BUILDINGS_CONSTRUCTED Here \"Junimo Hut\"", "SEASON Spring" ]</span>
<span class="kt">string</span> <span class="n">buildingName</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitBySpaceQuoteAware</span><span class="p">(</span><span class="n">queries</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span> <span class="c1">// Junimo Hut</span>
</pre></div>
</td></tr>
<tr>
<td><samp>EscapeQuotes</samp>
</td>
<td>Escape quotes in a string so they're ignored by methods like <samp>SplitQuoteAware</samp>.
<p>This isn't idempotent (e.g. calling it twice will result in double-escaped quotes).
</p>
</td></tr>
<tr>
<td><samp>UnsplitQuoteAware</samp>
</td>
<td>Combine an array of arguments into a single string with a custom delimiter, using quotes where needed to escape delimiters within an argument. Calling <samp>SplitQuoteAware</samp> on the resulting string with the same delimiter will produce the original values.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">args</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">UnsplitQuoteAware</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"A"</span><span class="p">,</span> <span class="s">"B C"</span><span class="p">,</span> <span class="s">"D"</span> <span class="p">},</span> <span class="sc">' '</span><span class="p">);</span> <span class="c1">// A "B C" D</span>
</pre></div>
<p>This isn't idempotent (e.g. calling it twice will result in double-escaped quotes).
</p>
</td></tr></tbody></table></dd></dl>
<dl><dt>Reading arrays:</dt></dl>
<dl><dd><table class="wikitable">

<tbody><tr>
<th><samp>ArgUtility</samp> method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>HasIndex</samp>
</td>
<td>Get whether an index is within the bounds of the array. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">"10 5"</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">inRange</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">HasIndex</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// true (index 1 has the value '5')</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Get</samp><br><samp>GetBool</samp><br><samp>GetDirection</samp><br><samp>GetEnum</samp><br><samp>GetFloat</samp><br><samp>GetInt</samp>
</td>
<td>Get the value at a position in an array, parsed as the relevant type (e.g. a string, boolean, <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Directions" title="Modding:Event data">direction</a>, enum, etc). If the index isn't in the array or the value can't be parsed as the expected type, returns a default value.
<p>For example, code like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="k">value</span> <span class="p">=</span> <span class="n">fields</span><span class="p">.</span><span class="n">Length</span> <span class="p">&gt;</span> <span class="m">4</span> <span class="p">&amp;&amp;</span> <span class="kt">int</span><span class="p">.</span><span class="n">TryParse</span><span class="p">(</span><span class="n">fields</span><span class="p">[</span><span class="m">4</span><span class="p">],</span> <span class="k">out</span> <span class="kt">int</span> <span class="n">parsed</span><span class="p">)</span>
    <span class="p">?</span> <span class="n">parsed</span>
    <span class="p">:</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>
</pre></div>
<p>Can now be rewritten like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="k">value</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetInt</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="p">-</span><span class="m">1</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGet</samp><br><samp>TryGetBool</samp><br><samp>TryGetDirection</samp><br><samp>TryGetEnum</samp><br><samp>TryGetFloat</samp><br><samp>TryGetInt</samp><br><samp>TryGetPoint</samp><br><samp>TryGetRectangle</samp><br><samp>TryGetVector2</samp>
</td>
<td>Try to get a parsed value from an array by its index. If it's not found or can't be converted to the expected value, it sets the <samp>out string error</samp> argument so you can log an error if needed.
<p>For example, this parses a numeric value from a space-delimited string:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">"10 35"</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">TryGetInt</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">error</span><span class="p">))</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">"Parsed value: {value}"</span><span class="p">);</span> <span class="c1">// "Parsed value: 35"</span>
<span class="k">else</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">"Failed parsing value: {error}"</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Warn</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>TryGetOptional</samp><br><samp>TryGetOptionalBool</samp><br><samp>TryGetOptionalDirection</samp><br><samp>TryGetOptionalEnum</samp><br><samp>TryGetOptionalFloat</samp><br><samp>TryGetOptionalInt</samp><br><samp>TryGetOptionalRemainder</samp>
</td>
<td>Equivalent to <samp>TryGet*</samp>, except that it'll return a default value if the argument is missing. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">"10"</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">TryGetOptionalInt</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="n">error</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">:</span> <span class="m">99</span><span class="p">))</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">"Parsed value: {value}"</span><span class="p">);</span> <span class="c1">// "Parsed value: 99"</span>
<span class="k">else</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">"Failed parsing value: {error}"</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Warn</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>GetRemainder</samp><br><samp>TryGetRemainder</samp><br><samp>TryGetOptionalRemainder</samp>
</td>
<td>Similar to the previous methods, but gets arguments starting from an index as a concatenated string. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">fields</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">SplitByString</span><span class="p">(</span><span class="s">"A B C D E F"</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ArgUtility</span><span class="p">.</span><span class="n">TryGetRemainder</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">remainder</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">error</span><span class="p">))</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">"Remainder: {remainder}"</span><span class="p">);</span> <span class="c1">// "Remainder: C D E F"</span>
<span class="k">else</span>
    <span class="k">this</span><span class="p">.</span><span class="n">Helper</span><span class="p">.</span><span class="n">Monitor</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="err">$</span><span class="s">"Failed getting remainder: {error}"</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Warn</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>GetSubsetOf</samp>
</td>
<td>Get a slice of the input array. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">subset1</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetSubsetOf</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">,</span> <span class="s">"C"</span><span class="p">,</span> <span class="s">"D"</span> <span class="p">},</span> <span class="n">startAt</span><span class="p">:</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// B, C, D</span>
<span class="kt">string</span><span class="p">[]</span> <span class="n">subset2</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetSubsetOf</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">,</span> <span class="s">"C"</span><span class="p">,</span> <span class="s">"D"</span> <span class="p">},</span> <span class="n">startAt</span><span class="p">:</span> <span class="m">1</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="m">2</span><span class="p">);</span> <span class="c1">// B, C</span>
</pre></div>
<p>This is fault-tolerant as long as <samp>startAt</samp> isn't negative. For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">subset2</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetSubsetOf</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">,</span> <span class="s">"C"</span><span class="p">,</span> <span class="s">"D"</span> <span class="p">},</span> <span class="n">startAt</span><span class="p">:</span> <span class="m">100</span><span class="p">);</span> <span class="c1">// &lt;empty array&gt;</span>
<span class="kt">string</span><span class="p">[]</span> <span class="n">subset1</span> <span class="p">=</span> <span class="n">ArgUtility</span><span class="p">.</span><span class="n">GetSubsetOf</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">,</span> <span class="s">"C"</span><span class="p">,</span> <span class="s">"D"</span> <span class="p">},</span> <span class="n">startAt</span><span class="p">:</span> <span class="m">1</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="m">100</span><span class="p">);</span> <span class="c1">// B, C, D</span>
</pre></div>
</td></tr></tbody></table></dd></dl>
<h4 class="in-block"><span class="mw-headline" id="Content_assets">Content assets</span></h4>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>LocalizedContentManager.DoesAssetExist</samp>
</td>
<td>Get whether an asset exists in the game's <samp>Content</samp> folder or is provided through <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Content" title="Modding:Modder Guide/APIs/Content">SMAPI's content API</a>. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">exists</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="n">DoesAssetExist</span><span class="p">&lt;</span><span class="n">Map</span><span class="p">&gt;(</span><span class="s">"Maps/Town"</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>LocalizedContentManager.IsValidTranslationKey</samp>
</td>
<td>Get whether a string is a translation key in the form <samp><code title="required field 'asset name'">&lt;asset name&gt;</code>:<code title="required field 'key'">&lt;key&gt;</code></samp>, and the asset and key both exist. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">exists</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="n">IsValidTranslationKey</span><span class="p">(</span><span class="s">"Strings\\NPCNames:Abigail"</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Filtering">Filtering</span></h4>
<p>The game now has an optimized <samp>RemoveWhere</samp> method for O(n) filtering on <samp>NetCollection</samp>, <samp>NetDictionary</samp>, <samp>NetList</samp>, and (via extension) <samp>IDictionary</samp>. This also deprecates <samp>Filter</samp> methods where they existed.
</p><p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="n">dirtTilesRemoved</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">currentLocation</span><span class="p">.</span><span class="n">terrainFeatures</span><span class="p">.</span><span class="n">RemoveWhere</span><span class="p">(</span><span class="n">pair</span> <span class="p">=&gt;</span> <span class="n">pair</span><span class="p">.</span><span class="n">Value</span> <span class="k">is</span> <span class="n">HoeDirt</span><span class="p">);</span>
</pre></div>
<h4 class="in-block"><span class="mw-headline" id="Game_paths">Game paths</span></h4>
<p>The game folder paths were previously hardcoded throughout the code. These are now centralized with a few methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Program.GetLocalAppDataFolder</samp><br><samp>Program.GetAppDataFolder</samp>
</td>
<td>Get the absolute path to the game's app data folder (which contains the <a href="../../external.html?link=https://stardewvalleywiki.com/Saves" title="Saves"><samp>Saves</samp> folder</a>) or local app data folder (which contains <samp>ErrorLogs</samp> and <samp>Screenshots</samp>). These methods are equivalent on Windows, but different on Linux/macOS.
</td></tr>
<tr>
<td><samp>Program.GetSavesFolder</samp>
</td>
<td>Get the absolute path to the game's <a href="../../external.html?link=https://stardewvalleywiki.com/Saves" title="Saves"><samp>Saves</samp> folder</a>.
</td></tr>
<tr>
<td><samp>Game1.GetScreenshotFolder</samp>
</td>
<td>Get the absolute path to the game's <samp>Screenshots</samp> folder.
</td></tr>
<tr>
<td><samp>options.GetFilePathForDefaultOptions</samp>
</td>
<td>Get the absolute path to the game's <samp>default_options</samp> file.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Hash_sets">Hash sets</span></h4>
<p>Since the <a href="#Hash_set_fields">game now uses hash sets</a>, it has a few extensions for working with them:
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>AddRange</samp>
</td>
<td>Add all the values from a list or enumerable to the set.
</td></tr>
<tr>
<td><samp>RemoveWhere</samp>
</td>
<td>Remove all values matching a condition.
</td></tr>
<tr>
<td><samp>Toggle</samp>
</td>
<td>Add or remove a value in the set based on a boolean. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="kt">bool</span> <span class="n">hasClubCard</span>
<span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">mailReceived</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="s">"HasClubCard"</span><span class="p">);</span> <span class="p">}</span>
    <span class="k">set</span> <span class="p">{</span> <span class="n">mailReceived</span><span class="p">.</span><span class="n">Toggle</span><span class="p">(</span><span class="s">"HasClubCard"</span><span class="p">,</span> <span class="k">value</span><span class="p">);</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Iteration">Iteration</span></h4>
<p>The new <samp>Utility.ForEach*</samp> methods let you check every thing of a type in the game world quickly and efficiently (with minimal allocations, boxing, etc). These are significantly faster than equivalent code using LINQ or <samp>yield</samp> methods.
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Utility.ForEachBuilding</samp>
</td>
<td>Perform an action for each building in the game world.
</td></tr>
<tr>
<td><samp>Utility.ForEachCharacter</samp><br><samp>Utility.ForEachVillager</samp>
</td>
<td>Perform an action for each NPC in the game world. <samp>ForEachCharacter</samp> matches all NPC types (villagers, horses, pets, monsters, player children, etc), while <samp>ForEachVillager</samp> only matches villager NPCs like <a href="../../external.html?link=https://stardewvalleywiki.com/Abigail" title="Abigail">Abigail</a>.
</td></tr>
<tr>
<td><samp>Utility.ForEachCrop</samp>
</td>
<td>Perform an action for each crop in the game world planted in the ground or in a <a href="../../external.html?link=https://stardewvalleywiki.com/Garden_Pot" title="Garden Pot">garden pot</a>.
</td></tr>
<tr>
<td><samp>Utility.ForEachItem</samp>
</td>
<td>Perform an action for each item in the game world, including items within items (e.g. in a chest or on a table), hats placed on children, items in player inventories, etc.
</td></tr>
<tr>
<td><samp>Utility.ForEachItemIn</samp>
</td>
<td>Perform an action for each item within a given location, including items within items (e.g. in a chest or on a table).
</td></tr>
<tr>
<td><samp>Utility.ForEachLocation</samp>
</td>
<td>Perform an action for each location in the game world, optionally including building interiors and generated <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">mine</a> or <a href="../../external.html?link=https://stardewvalleywiki.com/Volcano_Dungeon" title="Volcano Dungeon">volcano</a> levels.
</td></tr></tbody></table>
<p>For example, this code counts how many parsnips are planted everywhere in the world:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span> <span class="n">parsnips</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
<span class="n">Utility</span><span class="p">.</span><span class="n">ForEachCrop</span><span class="p">(</span><span class="n">crop</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">crop</span><span class="p">.</span><span class="n">IndexOfHarvest</span> <span class="p">==</span> <span class="s">"24"</span><span class="p">)</span>
        <span class="n">parsnips</span><span class="p">++;</span>
    <span class="k">return</span> <span class="k">true</span><span class="p">;</span> <span class="c1">// whether to keep iterating after this crop</span>
<span class="p">});</span>
</pre></div>
<p>Or you could replace all instances of an obsolete item with a new one:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Utility</span><span class="p">.</span><span class="n">ForEachItem</span><span class="p">((</span><span class="n">item</span><span class="p">,</span> <span class="k">remove</span><span class="p">,</span> <span class="n">replaceWith</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">QualifiedItemId</span> <span class="p">==</span> <span class="s">"(O)OldId"</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Item</span> <span class="n">newItem</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">"(O)NewId"</span><span class="p">,</span> <span class="n">item</span><span class="p">.</span><span class="n">Stack</span><span class="p">,</span> <span class="n">item</span><span class="p">.</span><span class="n">Quality</span><span class="p">);</span>
        <span class="n">replaceWith</span><span class="p">(</span><span class="n">newItem</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
<p>C# mods which add custom item types can override <samp>Item.ForEachItem</samp> to add support for nested items.
</p>
<h4 class="in-block"><span class="mw-headline" id="Randomization">Randomization</span></h4>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Utility.CreateDaySaveRandom</samp>
</td>
<td>Creates a <samp>Random</samp> instance using the most common seed (based on the save ID and total days played).
</td></tr>
<tr>
<td><samp>Utility.CreateRandom</samp><br><samp>Utility.CreateRandomSeed</samp>
</td>
<td>Creates a <samp>Random</samp> (or seed for a <samp>Random</samp>) by combining the given seed values, which can be any numeric type.
</td></tr>
<tr>
<td><samp>Utility.TryCreateIntervalRandom</samp>
</td>
<td>Get an RNG which produces identical results for all RNGs created with the same sync key during the given interval (one of <samp>tick</samp>, <samp>day</samp>, <samp>season</samp>, or <samp>year</samp>), including between players in multiplayer mode.
<p>For example, this will return the same number each time it's called until the in-game day changes:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="kt">int</span> <span class="nf">GetDailyRandomNumber</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Utility</span><span class="p">.</span><span class="n">TryCreateIntervalRandom</span><span class="p">(</span><span class="s">"day"</span><span class="p">,</span> <span class="s">"example sync key"</span><span class="p">,</span> <span class="k">out</span> <span class="n">Random</span> <span class="n">random</span><span class="p">,</span> <span class="k">out</span> <span class="n">_</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">random</span><span class="p">.</span><span class="n">Next</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.TryGetRandom</samp>
</td>
<td>Get a random entry from a dictionary.
</td></tr>
<tr>
<td><samp>random.Choose</samp>
</td>
<td>Choose a random option from the values provided:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span> <span class="n">npcName</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">Choose</span><span class="p">(</span><span class="s">"Abigail"</span><span class="p">,</span> <span class="s">"Penny"</span><span class="p">,</span> <span class="s">"Sam"</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>random.ChooseFrom</samp>
</td>
<td>Choose a random option from a list or array:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">names</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"Abigail"</span><span class="p">,</span> <span class="s">"Penny"</span><span class="p">,</span> <span class="s">"Sam"</span> <span class="p">};</span>
<span class="kt">string</span> <span class="n">npcName</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">ChooseFrom</span><span class="p">(</span><span class="n">names</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>random.NextBool</samp>
</td>
<td>Randomly choose <samp>true</samp> or <samp>false</samp>. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">flipSprite</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">NextBool</span><span class="p">();</span>
</pre></div>
<p>You can optionally set the probability of <samp>true</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">flipSprite</span> <span class="p">=</span> <span class="n">Game1</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">NextBool</span><span class="p">(</span><span class="m">0.8</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Other">Other</span></h4>
<p>Here are some of the other new methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Game1.getOfflineFarmhands()</samp>
</td>
<td>Get all farmhands who aren't connected to the game.
</td></tr>
<tr>
<td><samp>Game1.PerformActionWhenPlayerFree</samp>
</td>
<td>Calls the provided callback next time the player is free (e.g. no menu or event is up, not using a tool, etc). If the player is already free, it's run immediately.
<p>For example, if you receive your first geode from a fishing chest, this is used to show the geode-received animation &amp; animation when it closes.
</p>
</td></tr>
<tr>
<td><samp>Game1.createRadialDebris_MoreNatural</samp>
</td>
<td>Scatter item debris around a position with a more randomized distribution than <samp>createRadialDebris</samp>.
</td></tr>
<tr>
<td><samp>Object.GetCategoryColor</samp><br><samp>Object.GetCategoryDisplayName</samp>
</td>
<td>Get the color and display name for the given category number when it's shown in a tooltip.
</td></tr>
<tr>
<td><samp>Utility.distanceFromScreen</samp>
</td>
<td>Get the pixel distance between a position in the world and the player's screen viewport, where 0 is within the viewport.
</td></tr>
<tr>
<td><samp>Utility.DrawErrorTexture</samp>
</td>
<td>Draw the game's missing-texture image (🚫) to the screen, stretched to fit a given pixel area.
</td></tr>
<tr>
<td><samp>Utility.DrawSquare</samp>
</td>
<td>Draw a square to the screen with a background color and/or borders.
</td></tr>
<tr>
<td><samp>Utility.GetEnumOrDefault</samp>
</td>
<td>Get an enum value if it's valid, else get a default value. This is mainly used to validate input from data files.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">NpcGender</span> <span class="n">gender</span> <span class="p">=</span> <span class="p">(</span><span class="n">NPCGender</span><span class="p">)</span><span class="m">999999</span><span class="p">;</span>
<span class="n">gender</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">GetEnumOrDefault</span><span class="p">(</span><span class="n">gender</span><span class="p">,</span> <span class="n">Gender</span><span class="p">.</span><span class="n">Male</span><span class="p">);</span> <span class="c1">// returns Gender.Male since there's no enum constant with value 999999</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.getRandomNpcFromHomeRegion</samp>
</td>
<td>Get a random social NPC based on their <samp>HomeRegion</samp> value in <a href="#Custom_NPCs"><samp>Data/Characters</samp></a>. For example, this gets a random NPC for the <samp>Town</samp> home region:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">NPC</span> <span class="n">npc</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">getRandomNpcFromHomeRegion</span><span class="p">(</span><span class="n">NPC</span><span class="p">.</span><span class="n">region_town</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.isFestivalDay</samp>
</td>
<td>This method existed before 1.6, but you can now omit arguments to check today instead of a specific date:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">festivalToday</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">isFestivalToday</span><span class="p">();</span>
</pre></div>
<p>Or check for a festival in specific location context:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">desertFestivalToday</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">isFestivalToday</span><span class="p">(</span><span class="n">LocationContexts</span><span class="p">.</span><span class="n">DesertId</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.IsPassiveFestivalDay</samp>
</td>
<td>This method existed before 1.6, but now can now omit arguments to check today instead of a specific date:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">passiveFestivalToday</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">IsPassiveFestivalDay</span><span class="p">();</span>
</pre></div>
<p>Or check for a specific passive festival:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">nightMarketToday</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">IsPassiveFestivalDay</span><span class="p">(</span><span class="s">"NightMarket"</span><span class="p">);</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.TryGetPassiveFestivalData</samp><br><samp>Utility.TryGetPassiveFestivalDataForDay</samp>
</td>
<td>Get the <a href="#Custom_passive_festivals">passive festival data</a> for the given ID or date.
</td></tr>
<tr>
<td><samp>Utility.TryParseDirection</samp>
</td>
<td>Parse a string into a direction value (like <samp>Game1.down</samp>), if it's valid. This supports case-insensitive direction names (one of <samp>down</samp>, <samp>left</samp>, <samp>right</samp>, or <samp>up</samp>) or <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data#Directions" title="Modding:Event data">numeric values</a>.
</td></tr>
<tr>
<td><samp>Utility.TryParseEnum</samp>
</td>
<td>Parse a string into an enum value if possible, case-insensitively. Unlike <a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/api/system.enum.tryparse"><samp>Enum.TryParse</samp></a>, an invalid numeric value won't be cast:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Enum</span><span class="p">.</span><span class="n">TryParse</span><span class="p">(</span><span class="s">"999999"</span><span class="p">,</span> <span class="k">out</span> <span class="n">DayOfWeek</span> <span class="n">day</span><span class="p">);</span>        <span class="c1">// true, even though there's no matching DayOfWeek value</span>
<span class="n">Utility</span><span class="p">.</span><span class="n">TryParseEnum</span><span class="p">(</span><span class="s">"999999"</span><span class="p">,</span> <span class="k">out</span> <span class="n">DayOfWeek</span> <span class="n">day</span><span class="p">);</span> <span class="c1">// false</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.fuzzyCompare</samp>
</td>
<td>Get whether a term is a fuzzy match for a search query. Returns the numeric match priority (where lower values are a better match), or null if the term doesn't match the query.
</td></tr>
<tr>
<td><samp>rectangle.GetPoints</samp><br><samp>rectangle.GetVectors</samp>
</td>
<td>Get all the integer coordinates within a given <samp>Rectangle</samp>. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">var</span> <span class="n">tileArea</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
<span class="n">Point</span><span class="p">[]</span> <span class="n">tiles</span> <span class="p">=</span> <span class="n">tileArea</span><span class="p">.</span><span class="n">GetPoints</span><span class="p">();</span> <span class="c1">// (0, 0), (1, 0), (0, 1), (1, 1)</span>
</pre></div>
</td></tr>
<tr>
<td><samp>Utility.GetDeterministicHashCode</samp>
</td>
<td><i>(Specialized)</i> Get a <a rel="nofollow" class="external text" href="../../external.html?link=https://en.wikipedia.org/wiki/Hash_function">hash code</a> for a string key or numeric values. Unlike <a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/api/system.object.gethashcode"><samp>string.GetHashCode</samp></a> or <a rel="nofollow" class="external text" href="../../external.html?link=https://learn.microsoft.com/en-us/dotnet/api/system.hashcode.combine"><samp>HashCode.Combine</samp></a>, this produces a consistent hash for the same inputs between sessions and connected players.
</td></tr>
<tr>
<td><samp>Utility.WrapIndex</samp>
</td>
<td>Constrain an index to a range by wrapping out-of-bounds values to the other side (e.g. last index + 1 is the first index, and first index - 1 is the last one).
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">string</span><span class="p">[]</span> <span class="n">values</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"0"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">,</span> <span class="s">"2"</span> <span class="p">};</span>
<span class="kt">int</span> <span class="n">index</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">WrapIndex</span><span class="p">(-</span><span class="m">1</span><span class="p">,</span> <span class="n">values</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span> <span class="c1">// 2</span>
</pre></div>
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Static_delegate_builder">Static delegate builder</span></h3>
<p>For C# mods, <samp>StaticDelegateBuilder</samp> is a specialized class which converts a method name into an optimized delegate which can be called by code. This is used by vanilla code to optimize methods referenced in assets like <a href="#Custom_machines"><samp>Data/Machines</samp></a>.
</p><p>For example, given a static method like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">OutputDeconstructor</span><span class="p">(</span><span class="n">Object</span> <span class="n">machine</span><span class="p">,</span> <span class="n">Item</span> <span class="n">inputItem</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">probe</span><span class="p">,</span> <span class="n">MachineItemOutput</span> <span class="n">outputData</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int?</span> <span class="n">overrideMinutesUntilReady</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
<p>And a delegate which matches it:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="k">delegate</span> <span class="kt">bool</span> <span class="nf">MachineOutputDelegate</span><span class="p">(</span><span class="n">Object</span> <span class="n">machine</span><span class="p">,</span> <span class="n">Item</span> <span class="n">inputItem</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">probe</span><span class="p">,</span> <span class="n">MachineItemOutput</span> <span class="n">outputData</span><span class="p">,</span> <span class="k">out</span> <span class="kt">int?</span> <span class="n">overrideMinutesUntilReady</span><span class="p">);</span>
</pre></div>
<p>You can create an optimized delegate and call it like this:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">StaticDelegateBuilder</span><span class="p">.</span><span class="n">TryCreateDelegate</span><span class="p">(</span><span class="s">"StardewValley.Object.OutputDeconstructor"</span><span class="p">,</span> <span class="k">out</span> <span class="n">MachineOutputDelegate</span> <span class="n">method</span><span class="p">,</span> <span class="k">out</span> <span class="kt">string</span> <span class="n">error</span><span class="p">))</span>
    <span class="k">return</span> <span class="nf">method</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">inputItem</span><span class="p">,</span> <span class="n">probe</span><span class="p">,</span> <span class="n">outputData</span><span class="p">,</span> <span class="k">out</span> <span class="n">minutesUntilMorning</span><span class="p">);</span>
<span class="k">else</span>
    <span class="n">Game1</span><span class="p">.</span><span class="n">log</span><span class="p">.</span><span class="n">Warn</span><span class="p">(</span><span class="err">$</span><span class="s">"Machine {ItemId} has invalid output method: {error}"</span><span class="p">);</span>
</pre></div>
<p>The <samp>TryCreateDelegate</samp> method will cache created delegates, so calling it again will just return the same delegate instance.
</p>
<h3 class="in-block"><span class="mw-headline" id="Game_logging_changes">Game logging changes</span></h3>
<p>The game now writes debug output through an internal <samp>Game1.log</samp> wrapper, instead of using <samp>Console.WriteLine</samp> directly. For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// old code</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">"Error playing sound: "</span> <span class="p">+</span> <span class="n">ex</span><span class="p">);</span>

<span class="c1">// new code</span>
<span class="n">Game1</span><span class="p">.</span><span class="n">log</span><span class="p">.</span><span class="n">Error</span><span class="p">(</span><span class="s">"Error playing sound."</span><span class="p">,</span> <span class="n">ex</span><span class="p">);</span>
</pre></div>
<p>This has a few benefits:
</p>
<ul><li>For vanilla players, the game no longer uses time &amp; resources writing to a console that's not visible anyway.</li>
<li>For modded players, SMAPI can now...
<ul><li>distinguish between the game's debug/warn/error messages (so many warnings/errors that would previously appear as hidden <samp>TRACE</samp> messages will now be shown with the correct level);</li>
<li>apply its formatting rules to exceptions logged by the game too;</li>
<li>redirect game output much more efficiently without console interception.</li></ul></li></ul>
<h3 class="in-block"><span class="mw-headline" id="Other_changes">Other changes</span></h3>
<h4 class="in-block"><span class="mw-headline" id="Audio">Audio</span></h4>
<ul>
<li>Added <samp>Game1.sounds</samp>, which unifies the high-level sound effect logic (e.g. distance fading and multiplayer sync).</li>
<li>Added <samp>silence</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Audio" title="Modding:Audio">audio cue</a> for music. This is different from <samp>none</samp> in that it suppresses both town music and ambient sounds.</li>
<li>Added <samp>Game1.soundBank.Exists(cueName)</samp> method to check if an audio cue exists.</li>
<li>Added <samp>Game1.playSound</samp> overloads to get the audio cue being played.</li>
<li>Added <samp>character.playNearbySoundAll</samp> and <samp>playNearbySoundAllLocal</samp> methods to play a sound for players near the player/character.</li>
<li>Added position argument to <samp>DelayedAction.playSoundAfterDelay</samp>.</li>
<li>Removed <samp>NetAudioCueManager</samp> and <samp>Game1.locationCues</samp> (unused).</li>
<li>Unified the methods for playing normal/pitched/positional sounds (which also adds support for pitched non-synced &amp; pitched positional sounds):
<table class="wikitable">

<tbody><tr>
<th>old methods
</th>
<th>new method
</th></tr>
<tr>
<td><samp>Game1.playSound</samp><br><samp>Game1.playSoundAt</samp><br><samp>Game1.playSoundPitched</samp>
</td>
<td><samp>Game1.playSound</samp>
</td></tr>
<tr>
<td><samp>GameLocation.playSound</samp><br><samp>GameLocation.playSoundAt</samp><br><samp>GameLocation.playSoundPitched</samp>
</td>
<td><samp>GameLocation.playSound</samp>
</td></tr>
<tr>
<td><samp>GameLocation.localSound</samp><br><samp>GameLocation.localSoundAt</samp>
</td>
<td><samp>GameLocation.localSound</samp>
</td></tr>
<tr>
<td><samp>NetAudio.Play</samp><br><samp>NetAudio.PlayAt</samp><br><samp>NetAudio.PlayPitched</samp>
</td>
<td><samp>NetAudio.Play</samp>
</td></tr>
<tr>
<td><samp>NetAudio.PlayLocal</samp><br><samp>NetAudio.PlayLocalAt</samp>
</td>
<td><samp>NetAudio.PlayLocal</samp>
</td></tr></tbody></table></li>
</ul>
<h4 class="in-block"><span class="mw-headline" id="Debug_commands">Debug commands</span></h4>
<div style="border: 1px solid #0C0; background: #CFC; padding: 0.5em; border-radius: 2px;">See the updated docs at <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Console_commands" title="Modding:Console commands">Modding:Console commands</a>. This section below focuses on what's new in 1.6.</div>
<ul>
<li>All debug commands are now quote-aware, so you can pass spaces in arguments like <code>debug build "Junimo Hut"</code>.</li>
<li>Added new <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Console_commands" title="Modding:Console commands">debug commands</a>:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>description
</th></tr>
<tr>
<td><samp>action <code title="required field 'action'">&lt;action&gt;</code></samp>
</td>
<td>Run a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Trigger_actions" title="Modding:Trigger actions">trigger action string</a>, like <samp>action AddMoney 500</samp> to add <span style="display: none;">data-sort-value="500"&gt;</span><span class="no-wrap"><noscript><img alt="Gold.png" src="../../external.html?link=https://stardewvalleywiki.com/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" decoding="async" width="18" height="18"></noscript><span class="lazy-image-placeholder" style="width: 18px;height: 18px;" data-src="/mediawiki/images/thumb/1/10/Gold.png/18px-Gold.png" data-alt="Gold.png" data-width="18" data-height="18"> </span>500g</span> to the current player.
</td></tr>
<tr>
<td><samp>artifactSpots</samp>
</td>
<td>Spawn an <a href="../../external.html?link=https://stardewvalleywiki.com/Artifact_Spot" title="Artifact Spot">artifact spot</a> in each empty tile around the player.
</td></tr>
<tr>
<td><samp>endEvent</samp> / <samp>ee</samp>
</td>
<td>Immediately end the current event or festival, applying the event's skip logic (if any). The event is marked seen, but you can rewatch it using the <samp>eventById</samp> command if needed.
<p>This replaces the pre-1.6 commands (<samp>ee</samp>, <samp>endEvent</samp>/<samp>leaveEvent</samp>, and <samp>eventOver</samp>) which worked in different ways and had side-effects like restarting the event or clearing the player's mail.
</p>
</td></tr>
<tr>
<td><samp>exportShops</samp>
</td>
<td>Export a summary of what's in every shop in the game, taking into account their current conditions. This is saved to a file on disk, and the file path shown in the console.
</td></tr>
<tr>
<td><samp>filterLoadMenu</samp> / <samp>flm</samp>
</td>
<td><i>Syntax: <samp>filterLoadMenu <code title="required field 'search text'">&lt;search text&gt;</code></samp></i>
<p>Filter the current list of saves to those whose player name or farm name contains the given text.
</p>
</td></tr>
<tr>
<td><samp>forcebuild</samp>
</td>
<td>Equivalent to <samp>build</samp>, but disables all safety checks so you can build in a location that wouldn't normally allow buildings, build on top of farm animals or placed objects, etc.
</td></tr>
<tr>
<td><samp>gamequery</samp> / <samp>gq</samp>
</td>
<td><i>Syntax:</i> <samp>gq <code title="required field 'query'">&lt;query&gt;</code></samp>
<p>Check whether the given <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state query</a> matches in the current context. For example:
</p>
<pre>gq !SEASON Spring, WEATHER Here Sun
&gt; Result: true.
</pre>
</td></tr>
<tr>
<td><samp>itemquery</samp> / <samp>iq</samp>
</td>
<td><i>Syntax:</i> <samp>iq <code title="required field 'query'">&lt;query&gt;</code></samp>
<p>Open a shop menu with all the items matching an <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">item query</a> (all items free). For example:
</p>
<ul><li><samp>debug iq ALL_ITEMS</samp> shows all items;</li>
<li><samp>debug iq ALL_ITEMS (W)</samp> shows all weapons;</li>
<li><samp>debug iq (O)128</samp> shows a pufferfish (object 128);</li>
<li><samp>debug iq FLAVORED_ITEM Wine (O)128</samp> shows Pufferfish Wine.</li></ul>
</td></tr>
<tr>
<td><samp>logFile</samp>
</td>
<td>Begin writing debug messages to a log file at <samp>%appdata%/StardewValley/ErrorLogs/game-latest.txt</samp> to simplify troubleshooting. You can also enter <samp>/logtext</samp> into the in-game chatbox to enable it.
<p>This does nothing if SMAPI is installed, since the debug messages are already saved to SMAPI's log.
</p>
</td></tr>
<tr>
<td><samp>logSounds</samp>
</td>
<td>Log info about each sound effect played to the SMAPI console window.
</td></tr>
<tr>
<td><samp>movieSchedule <code title="optional field 'year'">[year]</code></samp>
</td>
<td>Lists the movies that will play in a given <code title="optional field 'year'">[year]</code> (default this year), with the dates they'll play.
</td></tr>
<tr>
<td><samp>qualifiedid</samp>
</td>
<td>Print the held item's display name and <a href="#Custom_items">qualified item ID</a>.
</td></tr>
<tr>
<td><samp>search</samp>
</td>
<td><i>Syntax:</i> <samp>search <code title="optional field 'term'">[term]</code></samp>
<p>List all debug commands that match the given search term (or all debug commands if the search term is omitted). For example:
</p>
<pre>debug search backpack
&gt; Found 2 debug commands matching search term 'backpack':
    - Backpack
    - FillBackpack (fbp, fill, fillbp)</pre>
</td></tr>
<tr>
<td><samp>setFarmEvent</samp> / <samp>sfe</samp>
</td>
<td><i>Syntax:</i> <samp>setFarmEvent <code title="required field 'event id'">&lt;event id&gt;</code></samp>
<p>Queue an <a href="../../external.html?link=https://stardewvalleywiki.com/Random_Events#Farm_events" title="Random Events">overnight farm event</a> if one doesn't plan naturally instead. The <code title="required field 'event id'">&lt;event id&gt;</code> can be one of...
</p>
<ul><li><samp>dogs</samp>;</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Random_Events#Earthquake" title="Random Events"><samp>earthquake</samp></a>;</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Random_Events#The_Crop_Fairy" title="Random Events"><samp>fairy</samp></a>;</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Random_Events#Meteorite" title="Random Events"><samp>meteorite</samp></a>;</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Random_Events#Stone_Owl" title="Random Events"><samp>owl</samp></a>;</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Random_Events#Strange_Capsule" title="Random Events"><samp>ufo</samp></a>;</li>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Random_Events#The_Witch" title="Random Events"><samp>witch</samp></a>.</li></ul>
<p>Note that even if the farm event runs, it may exit without doing anything (e.g. rare events like <samp>ufo</samp> have extra condition checks when the start).
</p>
</td></tr>
<tr>
<td><samp>shop</samp>
</td>
<td><i>Syntax:</i> <samp>shop <code title="required field 'shop ID'">&lt;shop ID&gt;</code> <code title="optional field 'owner name'">[owner name]</code></samp>
<p>Open a <a href="#Custom_shops">shop defined in <samp>Data/Shops</samp></a>, regardless of whether one of the owners is nearby. Specifying <code title="optional field 'owner name'">[owner name]</code> will use that NPC, otherwise the command will find the closest valid NPC if possible (else open with no NPC).
</p>
</td></tr>
<tr>
<td><samp>skinBuilding</samp> / <samp>bsm</samp>
</td>
<td>If the player is standing right under a building, open a menu to change the building appearance.
</td></tr>
<tr>
<td><samp>testwedding</samp>
</td>
<td>Immediately play the <a href="../../external.html?link=https://stardewvalleywiki.com/Marriage#The_Wedding" title="Marriage">wedding</a> event. This requires the player to be married first - to test specific NPCs, <samp>debug marry</samp> the NPC followed by this command.
</td></tr>
<tr>
<td><samp>thishouseupgrade</samp> / <samp>thishouse</samp> / <samp>thu</samp>
</td>
<td>Equivalent to <samp>houseupgrade</samp>, but can be used to upgrade another player's house by running it from inside or just south of its exterior.
</td></tr>
<tr>
<td><samp>toggleCheats</samp>
</td>
<td>Enable or disable entering debug commands into the in-game chat (prefixed with <samp>/</samp>).
</td></tr>
<tr>
<td><samp>tokens</samp>
</td>
<td><i>Syntax:</i> <samp>tokens <code title="required field 'tokenized string'">&lt;tokenized string&gt;</code></samp>
<p>Parses a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable string</a> and prints its output. For example:
</p>
<pre>tokens [LocalizedText Strings\StringsFromCSFiles:MapPage.cs.11064 [EscapedText [FarmName]]]
&gt; Result: "Lon Lon Farm"
</pre>
</td></tr>
<tr>
<td><samp>worldMapLines</samp>
</td>
<td>Toggles the <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:World_map#Debug_view" title="Modding:World map">world map's debug view</a>.
</td></tr></tbody></table></li>
<li>Improved existing debug commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>changes
</th></tr>
<tr>
<td><samp>build</samp>
</td>
<td>Removed custom space handling; quote arguments with spaces instead of replacing them with 9 (e.g. <code>Junimo9Hut</code> → <code>"Junimo Hut"</code>).
</td></tr>
<tr>
<td><samp>clearFurniture</samp>
</td>
<td>Now works outside the farmhouse too.
</td></tr>
<tr>
<td><samp>dialogue</samp>
</td>
<td>Removed custom space handling; quote NPC names containing spaces instead, with all text after the first argument treated as part of the dialogue (e.g. <code>debug dialogue "Some NPC" Some dialogue text$h</code>).
</td></tr>
<tr>
<td><samp>ebi</samp>
</td>
<td>Fixed event not played correctly if called from the same location as the event.
</td></tr>
<tr>
<td><samp>fish</samp>
</td>
<td>Fixed error if you're not holding a fishing rod. It now opens the fishing minigame with no tackle instead.
</td></tr>
<tr>
<td><samp>frameOffset</samp>
</td>
<td> 
<ul><li>Simplified usage. You can now pass negative offsets directly (like <samp>debug frameOffset -5 -10</samp>) instead of using the <samp>s</samp> number prefix.</li>
<li>Fixed command only taking the last digit in each number.</li></ul>
</td></tr>
<tr>
<td><samp>getStat</samp><br><samp>setStat</samp>
</td>
<td>Added argument validation.
</td></tr>
<tr>
<td><samp>grass</samp>
</td>
<td>Now applies to the current location, instead of the farm.
</td></tr>
<tr>
<td><samp>growAnimals</samp><br><samp>growAnimalsFarm</samp>
</td>
<td>Merged into one <samp>growAnimals</samp> command that supports any location and doesn't reset the age of animals which are already adults.
</td></tr>
<tr>
<td><samp>growCrops</samp>
</td>
<td>Fixed error growing mixed seeds or giant crops.
</td></tr>
<tr>
<td><samp>itemNamed</samp>
</td>
<td>Removed custom space handling; quote arguments with spaces instead of removing them (e.g. <code>EelRoe</code> → <code>"Eel Roe"</code>).
</td></tr>
<tr>
<td><samp>junimoGoodbye</samp><br><samp><samp>junimoStar</samp>
</samp></td>
<td>Added validation to check that you're inside the community center.
</td></tr>
<tr>
<td><samp>killAll</samp><br><samp>killAllHorses</samp><br><samp>killNpc</samp>
</td>
<td>These now remove matching NPCs inside constructed buildings too.
</td></tr>
<tr>
<td><samp>killMonsterStat</samp>
</td>
<td>Removed custom space handling; quote arguments with spaces instead of replacing them with 0 (e.g. <code>Dust0Spirit</code> → <code>"Dust Spirit"</code>).
</td></tr>
<tr>
<td><samp>mailForTomorrow</samp>
</td>
<td>Fixed zeros in the mail ID getting replaced with underscores.
</td></tr>
<tr>
<td><samp>monster</samp>
</td>
<td>Added validation for the monster name.
</td></tr>
<tr>
<td><samp>moveBuilding</samp>
</td>
<td>Now applies to the current location, instead of the farm.
</td></tr>
<tr>
<td><samp>movie</samp>
</td>
<td>Rewritten; it's now simpler, applies the normal game logic, defaults to today's movie, and avoids depending on NPC indexes in <samp>Data/NPCDispositions</samp> since those can change with custom NPCs.
<p>New usage:
</p>
<dl><dd><i><samp>debug movie <code title="optional field 'movie ID'">[movie ID]</code> <code title="optional field 'invite NPC name'">[invite NPC name]</code></samp></i></dd>
<dd><i><samp>debug movie current <code title="optional field 'invite NPC name'">[invite NPC name]</code></samp></i></dd></dl>
<p>The movie ID defaults to today's movie, and the NPC name can be omitted to watch the movie without an invitee. Specifying <samp>current</samp> as the movie uses the default value.
</p>
</td></tr>
<tr>
<td><samp>panMode</samp>
</td>
<td>The command no longer overrides debug command handling while it's active. Instead you can now turn it back off by running <samp>debug panMode</samp> again, clear with <samp>debug panMode clear</samp>, or set a time with <samp>debug panMode {time}</samp>.
</td></tr>
<tr>
<td><samp>paintBuilding</samp>
</td>
<td> 
<ul><li>Now applies to the current location, instead of the farm.</li>
<li>Added validation for the target building.</li></ul>
</td></tr>
<tr>
<td><samp>playSound</samp>
</td>
<td>Added an optional pitch argument, like <samp>debug playSound barrelBreak 1200</samp>. The pitch is a value from 1 (low pitch) to 2400 (high pitch) inclusively.
</td></tr>
<tr>
<td><samp>question</samp>
</td>
<td>You can now forget a selected answer (instead of adding it) by setting the second argument to false, like <samp>question <code title="required field 'id'">&lt;id&gt;</code> false</samp>.
</td></tr>
<tr>
<td><samp>runTestEvent</samp>
</td>
<td>Fixed support for Unix line endings.
</td></tr>
<tr>
<td><samp>seenEvent</samp>
</td>
<td>You can now forget an event (instead of adding it) by setting the second argument to false, like <samp>seenEvent <code title="required field 'id'">&lt;id&gt;</code> false</samp>.
</td></tr>
<tr>
<td><samp>seenMail</samp>
</td>
<td>You can now remove a mail received (instead of adding it) by setting the second argument to false, like <samp>seenMail <code title="required field 'id'">&lt;id&gt;</code> false</samp>.
</td></tr>
<tr>
<td><samp>skinBuilding</samp>
</td>
<td> 
<ul><li>Now applies to the current location, instead of the farm.</li>
<li>Added validation for the target building.</li></ul>
</td></tr>
<tr>
<td><samp>skullGear</samp>
</td>
<td> 
<ul><li>Fixed command setting 32 slots instead of 36.</li>
<li>Fixed command not adding empty inventory slots as expected by some game code.</li></ul>
</td></tr>
<tr>
<td><samp>setupFishPondFarm</samp>
</td>
<td>Fixed error if the farm already has non-fish-pond buildings constructed.
</td></tr>
<tr>
<td><samp>speech</samp>
</td>
<td>Removed custom space handling; quote NPC names containing spaces instead, with all text after the first argument treated as part of the dialogue (e.g. <code>debug speech "Some NPC" Some dialogue text$h</code>).
</td></tr>
<tr>
<td><samp>spreadDirt</samp>
</td>
<td>Now applies to the current location, instead of the farm.
</td></tr>
<tr>
<td><samp>spreadSeeds</samp>
</td>
<td>Now applies to the current location, instead of the farm.
</td></tr>
<tr>
<td><samp>thisHouseUpgrade</samp>
</td>
<td>Now applies to the current location, instead of the farm.
</td></tr>
<tr>
<td><samp>warpToPlayer</samp>
</td>
<td>Removed custom space handling; quote arguments with spaces instead of removing them (e.g. <code>JohnSmith</code> → <code>"John Smith"</code>).
</td></tr>
<tr>
<td><samp>whereIs</samp>
</td>
<td> 
<ul><li>Now lists all matching NPCs instead of the first one.</li>
<li>Now searches the current event or festival, if any.</li></ul>
</td></tr></tbody></table></li>
<li>Removed some debug commands:
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>notes
</th></tr>
<tr>
<td><samp>ax</samp><br><samp>bigItem</samp>/<samp>b</samp>/<samp>bi</samp>/<samp>big</samp><br><samp>boots</samp><br><samp>clothes</samp><br><samp>hoe</samp><br><samp>milkPail</samp>/<samp>mp</samp><br><samp>pan</samp><br><samp>pickaxe</samp>/<samp>pick</samp>/<samp>pickax</samp><br><samp>ring</samp>/<samp>addRing</samp><br><samp>shears</samp>/<samp>scissors</samp><br><samp>slingshot</samp><br><samp>tool</samp><br><samp>wateringCan</samp>/<samp>can</samp><br><samp>wand</samp><br><samp>weapon</samp>
</td>
<td>These are replaced by more general commands like <code>item (O)128</code> (spawn item by ID), <code>fuzzyItemNamed pufferfish</code> (spawn by item name), or <code>itemQuery FLAVORED_ITEM Wine (O)128</code> (spawn by <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Item_queries" title="Modding:Item queries">item query</a>).
</td></tr>
<tr>
<td><samp>addQuartz</samp><br><samp>blueBook</samp><br><samp>blueprint</samp><br><samp>end</samp>
</td>
<td>These were part of unused features removed in 1.6.
</td></tr>
<tr>
<td><samp>changeStat</samp>
</td>
<td>Removed; use <samp>setStat</samp> instead.
</td></tr>
<tr>
<td><samp>ee</samp><br><samp>endEvent</samp>/<samp>leaveEvent</samp><br><samp>eventOver</samp>
</td>
<td>Replaced by the new <samp>endEvent</samp> command.
</td></tr>
<tr>
<td><samp>everythingshop</samp>
</td>
<td>Removed. You can get all items like <code>debug iq ALL_ITEMS</code>, or all items of a given type like <code>debug iq ALL_ITEMS (O)</code>.
</td></tr>
<tr>
<td><samp>oldMineGame</samp>
</td>
<td>Removed along with the pre-1.4 <a href="../../external.html?link=https://stardewvalleywiki.com/Junimo_Kart" title="Junimo Kart">Junimo Kart</a> code.
</td></tr>
<tr>
<td><samp>pathSpouseToMe</samp>/<samp>pstm</samp>
</td>
<td>Removed along with the unimplemented farm activities code.
</td></tr></tbody></table></li>
<li>Added alternative names for some debug commands (new names in parentheses): <samp>bpm</samp> + <samp>bsm</samp> (<samp>paintBuilding</samp> + <samp>skinBuilding</samp>), <samp>craftingRecipe</samp> (addCraftingRecipe), <samp>db</samp> (speakTo), <samp>dialogue</samp> (addDialogue), <samp>pdb</samp> (printGemBirds), <samp>r</samp> (resetForPlayerEntry), <samp>removeLargeTf</samp> (removeLargeTerrainFeature), <samp>sb</samp> (showTextAboveHead), <samp>sl</samp> + <samp>sr</samp> (<samp>shiftToolbarLeft</samp> + shiftToolbarRight), <samp>sn</samp> (secretNote), and <samp>tls</samp> (toggleLightingScale).</li>
<li>Reworked how debug commands log output. This fixes an issue where they don't always log to the right place (e.g. a command run through the chatbox might log to the console or vice-versa), and lets mods pass a custom logger to capture or redirect output.</li>
</ul>
<h4 class="in-block"><span class="mw-headline" id="Location_logic">Location logic</span></h4>
<ul><li>The <a href="../../external.html?link=https://stardewvalleywiki.com/Desert" class="mw-redirect" title="Desert">desert</a> no longer assumes the player arrived by bus unless their previous location was the <a href="../../external.html?link=https://stardewvalleywiki.com/Bus_Stop" title="Bus Stop">bus stop</a>.</li>
<li>The ticket price for the bus and Willy's boat can now be edited by C# mods via <samp>BusStop.TicketPrice</samp> and <samp>BoatTunnel.TicketPrice</samp> respectively.</li></ul>
<h4 class="in-block"><span id="Menus_&amp;_UI"></span><span class="mw-headline" id="Menus_.26_UI">Menus &amp; UI</span></h4>
<ul><li>Rewrote calendar menu (<samp>Billboard</samp>) to simplify custom events &amp; event types. C# mods can now edit <samp>billboard.calendarDayData</samp> or patch <samp>billboard.GetEventsForDay</samp> to add new events.</li>
<li>Added <samp>Game1.textShadowDarkerColor</samp> field for the colors previously hardcoded in <samp>Utility.drawTextWithShadow</samp>.</li>
<li>Added <samp>MoneyDial.ShouldShakeMainMoneyBox</samp> field to simplify custom dials.</li>
<li>Partly de-hardcoded <samp>ShopMenu</samp> filter tabs. You can now change filter tabs by setting the <samp>shopMenu.tabButtons</samp> field with arbitrary <samp>Func&lt;ISalable, bool&gt; Filter</samp> values, or by using a predefined set of tabs like <samp>shopMenu.UseDresserTabs()</samp>.</li>
<li>The <samp>SpriteText</samp> methods now accept arbitrary <samp>Color</samp> tints instead of a few predefined color IDs.</li>
<li>The <samp>DiscreteColorPicker.getColorFromSelection</samp> methods are now static for reuse.</li>
<li>Fixed <samp>DiscreteColorPicker</samp> constructor ignoring the initial color argument, and added a constructor which takes a <samp>Color</samp> value.</li>
<li>Fixed an edge case where a custom language's fonts wouldn't be loaded when switching language.</li></ul>
<h4 class="in-block"><span class="mw-headline" id="Net_fields"><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#Net_fields" title="Modding:Modder Guide/Game Fundamentals">Net fields</a></span></h4>
<ul><li>Removed implicit conversion operators for most types due to their sometimes counter-intuitive behavior. The only ones left are <samp>NetBool</samp>, <samp>NetInt</samp>, and <samp>NetString</samp>; those are now marked obsolete and will raise build warnings on use.</li>
<li><samp>NetLocationRef</samp> now has a public <samp>LocationName</samp> and <samp>IsStructure</samp>, and its <samp>Update</samp> method allows forcing an update.</li></ul>
<h4 class="in-block"><span class="mw-headline" id="Quests">Quests</span></h4>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Quest_data" title="Modding:Quest data">Modding:Quest data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<ul><li>Quests now have string IDs, to simplify custom quest frameworks.</li>
<li>Added validation for quest data parsing.</li>
<li>In <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Special_orders" title="Modding:Special orders"><samp>Data/SpecialOrders</samp></a>, the <samp>Duration</samp> and <samp>Repeatable</samp> fields are now strongly-typed and case-insensitive.</li>
<li>For C# mods, fixed <samp>DescriptionElement</samp> not allowing more than four translation token substitutions.</li></ul>
<h4 class="in-block"><span id="Dates_&amp;_seasons"></span><span class="mw-headline" id="Dates_.26_seasons">Dates &amp; seasons</span></h4>
<ul><li>Added a <samp>Season</samp> enum for strongly-typed, case-insensitive season checks (like <code>Game1.season == Season.Spring</code> instead of <code>Game1.currentSeason == "spring"</code>).</li>
<li>Added <samp>Game1.season</samp>, <samp>Game1.GetSeasonForLocation</samp>, <samp>Game1.WorldDate.Season</samp>, and <samp>location.GetSeason()</samp> to get the season enum.</li>
<li>Added <samp>Utility.getSeasonKey</samp> to get the key form from a season enum.</li>
<li>Improved <samp>WorldDate</samp>:
<ul><li>added <samp>Now()</samp> to get a new instance matching the current date;</li>
<li>added <samp>WorldDate.Equals</samp> and <samp>GetHashCode</samp> implementations;</li>
<li>added code docs;</li>
<li><samp>TotalDays</samp> is no longer written to the save file.</li></ul></li>
<li>Renamed some members for clarity (<samp>Game1.GetSeasonForLocation</samp> → <samp>GetSeasonKeyForLocation</samp>, <samp>location.GetSeasonForLocation</samp> → <samp>GetSeasonKey</samp>, <samp>WorldDate.Season</samp> → <samp>SeasonKey</samp>).</li>
<li>Fixed <samp>location.GetSeasonKey()</samp> not applying the greenhouse logic.</li></ul>
<h4 class="in-block"><span class="mw-headline" id="Time">Time</span></h4>
<ul><li>For C# mods, the <samp>Game1.realMilliSecondsPerGame</samp> and <samp>Game1.realMilliSecondsPerGameTenMinutes</samp> fields are no longer marked <samp>const</samp>, and the <samp>GameLocation.getExtraMillisecondsPerInGameMinuteForThisLocation()</samp> method has been replaced with a settable <samp>ExtraMillisecondsPerInGameMinute</samp> property. That lets you change the time rate used by the vanilla game code, but you should be careful doing this since it may cause unintended effects.</li></ul>
<h4 class="in-block"><span class="mw-headline" id="Other_2">Other</span></h4>
<ul><li>Error stack traces on Linux/macOS now have line numbers.</li>
<li>All space-delimited fields now ignore extra spaces instead of crashing. This affects map/tile properties, data assets, event commands, game state queries, etc.</li>
<li>All players and NPCs now have <samp>Tile</samp> &amp; <samp>TilePoint</samp> properties (their cached tile position) and a <samp>StandingPixel</samp> property (the cached pixel coordinate at the center of their bounding box). These <a href="#Other_breaking_API_changes">replace various deleted methods</a>.</li>
<li>All terrain features now have <samp>Tile</samp> and <samp>Location</samp> properties, and their methods no longer have location/tile parameters in most cases.</li>
<li>All <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/Game_Fundamentals#Net_fields" title="Modding:Modder Guide/Game Fundamentals">net fields</a> now have <samp>Name</samp> and <samp>Owner</samp> fields, which are used to show informative error messages when there's a sync issue and validate common mistakes (e.g. a net field not added to the <samp>NetFields</samp> collection).</li>
<li>The game now tracks the locations a player has visited. Mods can check the list in C# (via <samp>Game1.player.locationsVisited</samp>) or <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Game_state_queries" title="Modding:Game state queries">game state queries</a> (via <samp>PLAYER_VISITED_LOCATION</samp>). For pre-existing saves, the list is retroactively populated based on accessible locations, events seen, mail flags set, etc.</li>
<li>Added menu queuing (via <samp>Game1.nextClickableMenu</samp> in C#). For example, this applies if you try to take an item from a mail letter when your inventory is full.</li>
<li>Added C# code docs in many places.</li>
<li>Added <samp>Id</samp> fields to simplify content pack edits in fish pond, movie concession, random bundle, and tailoring recipe data.</li>
<li>Added <samp>Game1.Multiplayer</samp> to get the game's low-level handler. (Most code should still use <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Modder_Guide/APIs/Multiplayer" title="Modding:Modder Guide/APIs/Multiplayer">SMAPI's multiplayer API</a> though.)</li>
<li>Added <samp>Game1.versionBuildNumber</samp> with the build number (like <samp>26039</samp>).</li>
<li>Added field-changed events to <samp>NetPosition</samp>.</li>
<li>Added <samp>LocalizedContentManager.CurrentLanguageString</samp>, which caches the language code like <samp>pt-BR</samp>).</li>
<li>The game now uses <samp>[XmlInclude]</samp> on its types more consistently. That means the default save serializer can handle more types (e.g. all monsters), and it's easier to create custom serializers.</li>
<li>Refactored many parts of the code to make it more moddable for C# mods. This includes marking all classes public, changing <samp>private</samp> members to <samp>protected</samp> or <samp>public</samp>, marking members <samp>virtual</samp>, rewriting or splitting code so it's easier to extend, etc.</li>
<li>The <samp>startup_preferences</samp> file is now formatted to simplify troubleshooting.</li>
<li>Fixed many cases where the game used <samp>Game1.player</samp> instead of the provided player.</li></ul>
<h2><span id="Breaking_changes_for_C#_mods"></span><span class="mw-headline" id="Breaking_changes_for_C.23_mods">Breaking changes for C# mods</span></h2>
<p><b>This section only describes how this update may break existing mods. See the <i>what's new</i> sections above for more info, including new functionality mods can use.</b>
</p><p>See also <a href="#Breaking_changes_for_content_packs"><i>Breaking changes for content packs</i></a>, which affect C# mods too.
</p>
<h3 class="in-block"><span class="mw-headline" id=".NET_6_2">.NET 6</span></h3>
<dl><dd><i>See also: <a href="#.NET_6">.NET 6</a> under what's new.</i></dd></dl>
<p>Stardew Valley 1.6 updates from .NET 5 to .NET 6. SMAPI can still load .NET 5 mods fine, but you'll get a build error when compiling them. To update a C# mod:
</p>
<ol>
<li>Make sure you have <a rel="nofollow" class="external text" href="../../external.html?link=https://visualstudio.microsoft.com/vs">Visual Studio Community 2022</a> or later. (Compiling .NET 6 with earlier versions of Visual Studio isn't officially supported.)</li>
<li>In Visual Studio, click <i>Help &gt; Check For Updates</i> and install the latest version.</li>
<li>Fully exit Visual Studio.</li>
<li>Open each mod's <samp>.csproj</samp> file in a text editor, then find this line:
<div class="mw-highlight mw-highlight-lang-xml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">&lt;TargetFramework&gt;</span>net5.0<span class="nt">&lt;/TargetFramework&gt;</span>
</pre></div>
<p>And change it to this:
</p>
<div class="mw-highlight mw-highlight-lang-xml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">&lt;TargetFramework&gt;</span>net6.0<span class="nt">&lt;/TargetFramework&gt;</span>
</pre></div>
</li>
<li>Delete your solution's hidden <samp>.vs</samp> folder, and every project's <samp>bin</samp> and <samp>obj</samp> folders.</li>
<li>Reopen the solution in Visual Studio, click <i>Build &gt; Rebuild Solution</i>, and make sure it still loads into the game fine.</li>
</ol>
<h3 class="in-block"><span class="mw-headline" id="Item_ID_changes">Item ID changes</span></h3>
<dl><dd><i>See also: <a href="#Custom_items">custom items in what's new</a>.</i></dd></dl>
<p>The <a href="#Custom_items">main <samp>Item</samp> properties have changed</a>. To migrate existing code:
</p>
<ul>
<li>Don't use <samp>ParentSheetIndex</samp> to compare items. For example, <samp>item.ParentSheetIndex == 0</samp> will match both <a href="../../external.html?link=https://stardewvalleywiki.com/Weeds" title="Weeds">weeds</a> and any custom item whose sprite is the first one in its custom spritesheet. You should compare items using <a href="#Custom_items">their new <samp>ItemId</samp> and <samp>QualifiedItemId</samp> properties</a> instead. For example, here's how to migrate various common forms:

<table class="wikitable">

<tbody><tr>
<th>old code
</th>
<th>new code
</th></tr>

<tr>
<td><samp>item.ParentSheetIndex == 848</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)848"</samp>
</td></tr>
<tr>
<td><samp>IsNormalObjectAtParentSheetIndex(item, 74)</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)74"</samp>
</td></tr>
<tr>
<td><samp>!item.bigCraftable &amp;&amp; item.ParentSheetIndex == 128</samp>
</td>
<td><samp>item.QualifiedItemId == "(O)128"</samp>
</td></tr>
<tr>
<td><samp>item is Boots &amp;&amp; item.ParentSheetIndex == 505</samp>
</td>
<td><samp>item.QualifiedItemId == "(B)505"</samp>
</td></tr></tbody></table></li>
<li>Don't assume item sprites are in the vanilla spritesheets. For example, instead of rendering <samp>Game1.objectSpriteSheet</samp> for an object, call <code>ItemRegistry.GetMetadata(item.QualifiedItemId).GetTexture()</code> to get its texture.</li>
<li>Creating items works just like before, except that you now specify the item's <samp>ItemId</samp> (<i>not</i> <samp>QualifiedItemId</samp>) instead of its <samp>ParentSheetIndex</samp>. This is the same value for vanilla items. For example:

<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="s">"634"</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>                      <span class="c1">// vanilla item</span>
<span class="k">new</span> <span class="nf">Object</span><span class="p">(</span><span class="s">"Example.ModId_Watermelon"</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// custom item</span>
</pre></div>
<p>You can also use the new <samp>ItemRegistry</samp> API to construct items from their <samp>QualifiedItemId</samp>:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Item</span> <span class="n">item</span> <span class="p">=</span> <span class="n">ItemRegistry</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">"(B)505"</span><span class="p">);</span> <span class="c1">// Rubber Boots</span>
</pre></div></li>
</ul>
<h3 class="in-block"><span class="mw-headline" id="Other_ID_changes">Other ID changes</span></h3>
<p>Many other things in the game now have unique string IDs too (including <a href="#Buff_overhaul">buffs</a>, <a href="#String_event_IDs">events</a>, and fruit trees). To migrate existing code: 
</p>
<ul><li>When referencing numeric IDs, you usually just need to convert them into a string (like <code>Game1.player.hasBuff("1590166")</code> or <code>Game1.player.eventsSeen.Contains("1590166")</code>).</li>
<li>When creating buffs, see <a href="#Buff_overhaul">buff overhaul</a> for how to create buffs now.</li>
<li>For pre-existing content pack data, see migration steps in the <i><a href="#Unique_string_IDs">unique string IDs</a></i> section.</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Building_and_animal_changes">Building and animal changes</span></h3>
<dl><dd><i>See also: <a href="#Build_anywhere">build anywhere in what's new</a>.</i></dd></dl>
<ul><li>Since all locations now allow buildings and animals, mod code which handles <samp>BuildableGameLocation</samp> and <samp>IAnimalLocation</samp> won't detect all buildable locations. You can replace them with <samp>location.IsBuildableLocation()</samp> (or just access <samp>location.buildings</samp> directly) and <samp>location.animals.Any()</samp> instead. Mods should no longer have any reference at all to <samp>BuildableGameLocation</samp> and <samp>IAnimalLocation</samp>.</li>
<li>Since buildings can be built anywhere, you can no longer assume a building is on the farm. You can check the new <samp>building.buildingLocation</samp> field instead.</li>
<li>You should review direct references to the farm (like <code>Game1.getFarm()</code> or <code>Game1.getLocationFromName("Farm")</code>) to see if it needs to be rewritten to allow other locations.</li>
<li><code>Utility.numSilos()</code> should no longer be used to calculate available hay, since it doesn't account for custom buildings with hay storage. Use <code>Game1.getFarm().GetHayCapacity()</code> instead.</li>
<li>The <samp>Cat</samp> and <samp>Dog</samp> classes are now unused; all pets are now <samp>Pet</samp> directly.</li></ul>
<h3 class="in-block"><span class="mw-headline" id="Player_changes">Player changes</span></h3>
<dl><dd><i>See also: <a href="#Buff_overhaul">buff overhaul in what's new</a>.</i></dd></dl>
<ul>
<li>Several <samp>Game1.player</samp> / <samp>Farmer</samp> fields changed as part of the <a href="#Buff_overhaul">buff overhaul</a>:
<table class="wikitable">

<tbody><tr>
<th>old field
</th>
<th>how to migrate
</th></tr>
<tr>
<td><samp>appliedBuffs</samp><br><samp>appliedSpecialBuffs</samp>
</td>
<td>Use <code>Game1.player.hasBuff(id)</code> instead.
</td></tr>
<tr>
<td><samp>attack</samp><br><samp>immunity</samp>
</td>
<td>Use <samp>Attack</samp> and <samp>Immunity</samp> instead.
</td></tr>
<tr>
<td><samp>addedCombatLevel</samp><br><samp>addedFarmingLevel</samp><br><samp>addedFishingLevel</samp><br><samp>addedForagingLevel</samp><br><samp>addedLuckLevel</samp><br><samp>addedMiningLevel</samp><br><samp>attackIncreaseModifier</samp><br><samp>critChanceModifier</samp><br><samp>critPowerModifier</samp><br><samp>knockbackModifier</samp><br><samp>weaponPrecisionModifier</samp><br><samp>weaponSpeedModifier</samp>
</td>
<td>Use equivalent properties under <samp>Game1.player.buffs</samp> instead (e.g. <samp>Game1.player.buffs.CombatLevel).
</samp></td></tr>
<tr>
<td><samp>resilience</samp>
</td>
<td>Use <samp>buffs.Defense</samp> instead.
</td></tr>
<tr>
<td><samp>addedSpeed</samp><br><samp>CombatLevel</samp><br><samp>CraftingTime</samp><br><samp>FarmingLevel</samp><br><samp>FishingLevel</samp><br><samp>ForagingLevel</samp><br><samp>LuckLevel</samp><br><samp>MagneticRadius</samp><br><samp>MaxStamina</samp><br><samp>MiningLevel</samp><br><samp>Stamina</samp>
</td>
<td>These are now readonly and can't be set directly. You can change them by <a href="#Buff_overhaul">adding a buff</a> (which can be invisible), equipment bonus, etc instead.
</td></tr></tbody></table></li>
<li>Buffs are now recalculated automatically, and you can reset a buff by just reapplying it. See <a href="#Buff_overhaul">buff overhaul</a> for more info.</li>
<li>Buff logic has been centralized into <samp>Game1.player.buffs</samp>. This replaces a number of former fields/methods like <samp>Game1.buffsDisplay</samp>.</li>
</ul>
<h3 class="in-block"><span class="mw-headline" id="Collision_changes">Collision changes</span></h3>
<p>The game's tile collision logic has been overhauled and merged into a simpler set of methods on <samp>GameLocation</samp> instances:
</p>
<table class="wikitable">

<tbody><tr>
<th>method
</th>
<th>effect
</th></tr>
<tr>
<td><samp>CanSpawnCharacterHere</samp>
</td>
<td>Get whether NPCs can be placed on the given tile (e.g. it's within the map bounds and tile is walkable), there's no placed object there, and the <samp>NoFurniture</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">tile property</a> isn't set.
</td></tr>
<tr>
<td><samp>CanItemBePlacedHere</samp>
</td>
<td>Get whether items can be placed on the given tile in non-floating form (e.g. it's within the map bounds and not blocked by a non-walkable item), and the <samp>NoFurniture</samp> <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">tile property</a> isn't set.
</td></tr>
<tr>
<td><samp>isBuildable</samp>
</td>
<td>Get whether buildings can be placed on the given tile.
</td></tr>
<tr>
<td><samp>IsTilePassable</samp>
</td>
<td>Get whether the tile can be walked on (ignoring collisions with in-game objects, NPCs, etc).
</td></tr>
<tr>
<td><samp>IsTileOccupiedBy</samp>
</td>
<td>Get whether the tile contains a player, object, NPC/monster/pet/etc, terrain feature, building, etc. You can choose which entities to check, and which ones to ignore if they don't block movement.
</td></tr>
<tr>
<td><samp>IsTileBlockedBy</samp>
</td>
<td>Equivalent to calling both <samp>IsTilePassable</samp> and <samp>IsTileOccupiedBy</samp>.
</td></tr>
<tr>
<td><samp>IsLocationSpecificOccupantOnTile</samp><br><samp>IsLocationSpecificPlacementRestriction</samp>
</td>
<td>Generally shouldn't be used directly. Checks for location-specific collisions (e.g. ladders in <a href="../../external.html?link=https://stardewvalleywiki.com/The_Mines" title="The Mines">the mines</a> or parrot platforms on <a href="../../external.html?link=https://stardewvalleywiki.com/Ginger_Island" title="Ginger Island">Ginger Island</a>).
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Other_breaking_API_changes">Other breaking API changes</span></h3>
<p><i>(This section is meant as a quick reference if you have build errors; there's no need to read through it otherwise.)</i>
</p>
<h4 class="in-block"><span class="mw-headline" id="Removed_unused_code">Removed unused code</span></h4>
<p>1.6 removes a lot of unused code. That includes these classes:
</p>
<table class="wikitable">

<tbody><tr>
<th>namespace
</th>
<th>class name
</th></tr>
<tr>
<td><samp>StardewValley</samp>
</td>
<td> 
<ul><li><samp>BuildingUpgrade</samp></li>
<li><samp>DisposableList</samp></li>
<li><samp>FurniturePlacer</samp></li>
<li><samp>ListPool</samp></li>
<li><samp>OneTimeRandom</samp></li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.Characters</samp>
</td>
<td> 
<ul><li><samp>BotchedNetBool</samp></li>
<li><samp>BotchedNetField</samp></li>
<li><samp>BotchedNetInt</samp></li>
<li><samp>BotchedNetLong</samp></li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.Menus</samp>
</td>
<td> 
<ul><li><samp>FarmInfoPage</samp></li>
<li><samp>MiniatureTerrainFeature</samp></li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.Monsters</samp>
</td>
<td> 
<ul><li><samp>LavaCrab</samp></li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.Objects</samp>
</td>
<td> 
<ul><li><samp>ObjectFactory</samp> (replaced by <a href="#Custom_items"><samp>ItemRegistry</samp></a>)</li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.TerrainFeatures</samp>
</td>
<td> 
<ul><li><samp>Quartz</samp></li></ul>
</td></tr>
<tr>
<td><samp>StardewValley.Tools</samp>
</td>
<td> 
<ul><li><samp>Blueprints</samp></li>
<li><samp>ToolFactory</samp> (replaced by <a href="#Custom_items"><samp>ItemRegistry</samp></a>)</li></ul>
</td></tr></tbody></table>
<p>And these class members:
</p>
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>members
</th></tr>
<tr>
<td><samp>Axe</samp>
</td>
<td> 
<ul><li><samp>StumpStrength</samp></li></ul>
</td></tr>
<tr>
<td><samp>Bush</samp>
</td>
<td> 
<ul><li><samp>alpha</samp></li>
<li><samp>lastPlayerToHit</samp></li></ul>
</td></tr>
<tr>
<td><samp>Chest</samp>
</td>
<td> 
<ul><li><samp>chestType</samp></li>
<li><samp>coins</samp></li></ul>
</td></tr>
<tr>
<td><samp>CosmeticPlant</samp>
</td>
<td> 
<ul><li><samp>scale</samp></li></ul>
</td></tr>
<tr>
<td><samp>CraftingRecipe</samp>
</td>
<td> 
<ul><li><samp>itemType</samp></li></ul>
</td></tr>
<tr>
<td><samp>Critter</samp>
</td>
<td> 
<ul><li><samp>InitShared()</samp></li></ul>
</td></tr>
<tr>
<td><samp>Crop</samp>
</td>
<td> 
<ul><li><samp>daysOfUnclutteredGrowth</samp></li></ul>
</td></tr>
<tr>
<td><samp>Dialogue</samp>
</td>
<td> 
<ul><li><samp>dialogueToBeKilled</samp></li></ul>
</td></tr>
<tr>
<td><samp>Farm</samp>
</td>
<td> 
<ul><li><samp>GetSpouseOutdoorAreaSpritesheetIndex()</samp></li></ul>
</td></tr>
<tr>
<td><samp>FarmAnimal</samp>
</td>
<td> 
<ul><li><samp>homeLocation</samp></li></ul>
</td></tr>
<tr>
<td><samp>Farmer</samp>
</td>
<td> 
<ul><li><samp>barnUpgradeLevel</samp> and <samp>BarnUpgradeLevel</samp></li>
<li><samp>blueprints</samp></li>
<li><samp>coalPieces</samp> and <samp>CoalPieces</samp></li>
<li><samp>coopUpgradeLevel</samp> and <samp>CoopUpgradeLevel</samp></li>
<li><samp>copperPieces</samp> and <samp>CopperPieces</samp></li>
<li><samp>eyeColor</samp></li>
<li><samp>feed</samp> and <samp>Feed</samp></li>
<li><samp>furnitureOwned</samp></li>
<li><samp>goldPieces</samp> and <samp>GoldPieces</samp></li>
<li><samp>hasBusTicket</samp></li>
<li><samp>hasGreenhouse</samp></li>
<li><samp>iridiumPieces</samp> and <samp>IridiumPieces</samp></li>
<li><samp>ironPieces</samp> and <samp>IronPieces</samp></li>
<li><samp>newSkillPointsToSpend</samp></li>
<li><samp>overallsColor</samp></li>
<li><samp>ownsFurniture</samp></li>
<li><samp>quartzPieces</samp> and <samp>QuartzPieces</samp></li>
<li><samp>shirtColor</samp></li>
<li><samp>skinColor</samp></li>
<li><samp>stonePieces</samp> and <samp>StonePieces</samp></li>
<li><samp>theaterBuildDate</samp></li>
<li><samp>woodPieces</samp> and <samp>WoodPieces</samp></li></ul>
</td></tr>
<tr>
<td><samp>Game1</samp>
</td>
<td> 
<ul><li><samp>boardingBus</samp></li>
<li><samp>chanceToRainTomorrow</samp></li>
<li><samp>checkForNewLevelPerks</samp></li>
<li><samp>cloud</samp></li>
<li><samp>coopDwellerBorn<samp></samp></samp></li>
<li><samp>cropsOfTheWeek</samp></li>
<li><samp>currentBarnTexture</samp></li>
<li><samp>currentBillboard</samp></li>
<li><samp>currentCoopTexture</samp></li>
<li><samp>currentFloor</samp></li>
<li><samp>currentHouseTexture</samp></li>
<li><samp>currentWallpaper</samp></li>
<li><samp>dealerCalicoJackTotal</samp></li>
<li><samp>FarmerFloor</samp></li>
<li><samp>farmerWallpaper</samp></li>
<li><samp>fertilizer</samp></li>
<li><samp>floorPrice</samp></li>
<li><samp>greenhouseTexture</samp></li>
<li><samp>inMine<samp></samp></samp></li>
<li><samp>jukeboxPlaying</samp></li>
<li><samp>keyHelpString</samp></li>
<li><samp>listeningForKeyControlDefinitions<samp></samp></samp></li>
<li><samp>littleEffect</samp></li>
<li><samp>logoScreenTexture</samp></li>
<li><samp>mailboxTexture</samp></li>
<li><samp>menuChoice</samp></li>
<li><samp>menuUp<samp></samp></samp></li>
<li><samp>nameSelectUp<samp></samp></samp></li>
<li><samp>nameSelectType</samp></li>
<li><samp>numberOfSelectedItems</samp></li>
<li><samp>particleRaining<samp></samp></samp></li>
<li><samp>pickingTool</samp></li>
<li><samp>pickToolDelay</samp></li>
<li><samp>pickToolInterval</samp></li>
<li><samp>priceOfSelectedItem</samp></li>
<li><samp>progressBar</samp></li>
<li><samp>removeSquareDebrisFromTile(…)</samp></li>
<li><samp>selectedItemsType</samp></li>
<li><samp>shiny</samp></li>
<li><samp>shippingTax</samp></li>
<li><samp>showKeyHelp<samp></samp></samp></li>
<li><samp>slotResult</samp></li>
<li><samp>startedJukeboxMusic</samp></li>
<li><samp>tinyFontBorder</samp></li>
<li><samp>toolHeld</samp></li>
<li><samp>toolIconBox</samp></li>
<li><samp>tvStation</samp></li>
<li><samp>tvStationTexture</samp></li>
<li><samp>wallpaperPrice</samp></li></ul>
</td></tr>
<tr>
<td><samp>GameLocation</samp>
</td>
<td> 
<ul><li><samp>boardBus(…)</samp></li>
<li><samp>checkForMapChanges()</samp></li>
<li><samp>getWallDecorItem(…)</samp></li>
<li><samp>removeBatch(…)</samp></li>
<li><samp>removeDirt(…)</samp></li>
<li><samp>removeStumpOrBoulder(…)</samp></li>
<li><samp>tryToBuyNewBackpack()</samp></li></ul>
</td></tr>
<tr>
<td><samp>GiantCrop</samp>
</td>
<td> 
<ul><li><samp>forSale</samp></li></ul>
</td></tr>
<tr>
<td><samp>IClickableMenu</samp>
</td>
<td> 
<ul><li><samp>currentRegion</samp></li></ul>
</td></tr>
<tr>
<td><samp>MeleeWeapon</samp>
</td>
<td> 
<ul><li><samp>attackSwordCooldownTime</samp></li>
<li><samp>doStabbingSwordFunction(…)</samp></li></ul>
</td></tr>
<tr>
<td><samp>Monster</samp>
</td>
<td> 
<ul><li><samp>doHorizontalMovement(…)</samp></li>
<li><samp>durationOfRandomMovements</samp></li>
<li><samp>coinsToDrop</samp></li></ul>
</td></tr>
<tr>
<td><samp>NPC</samp>
</td>
<td> 
<ul><li><samp>idForClones</samp></li></ul>
</td></tr>
<tr>
<td><samp>Object</samp>
</td>
<td> 
<ul><li><samp>attachToSprinklerAttachment(…)</samp></li>
<li><samp>canBePlacedInWater()</samp></li>
<li><samp>consumeRecipe(…)</samp></li>
<li><samp>copperBar</samp></li>
<li><samp>goldBar</samp></li>
<li><samp>iridiumBar</samp></li>
<li><samp>ironBar</samp></li>
<li><samp>isHoeDirt</samp> and <samp>IsHoeDirt</samp></li></ul>
</td></tr>
<tr>
<td><samp>PathFindController</samp>
</td>
<td> 
<ul><li><samp>CheckClearance(…)</samp></li>
<li><samp>limit</samp></li></ul>
</td></tr>
<tr>
<td><samp>SaveGame</samp>
</td>
<td> 
<ul><li><samp>cropsOfTheWeek</samp></li>
<li><samp>currentFloor</samp></li>
<li><samp>currentWallpaper</samp></li>
<li><samp>FarmerFloor</samp></li>
<li><samp>farmerWallpaper</samp></li>
<li><samp>shippingTax</samp></li></ul>
</td></tr>
<tr>
<td><samp>Spiker</samp>
</td>
<td> 
<ul><li><samp>GetSpawnPosition</samp></li></ul>
</td></tr>
<tr>
<td><samp>Stats</samp>
</td>
<td> 
<ul><li><samp>barsSmelted</samp> and <samp>BarsSmelted</samp></li>
<li><samp>coalFound</samp> and <samp>CoalFound</samp></li>
<li><samp>coinsFound</samp> and <samp>coinsFound</samp></li>
<li><samp>starLevelCropsShipped</samp> and <samp>starLevelCropsShipped</samp></li></ul>
</td></tr>
<tr>
<td><samp>Tool</samp>
</td>
<td> 
<ul><li><samp>batteredSwordSpriteIndex</samp></li>
<li><samp>copperColor</samp></li>
<li><samp>GetSecondaryEnchantmentCount()</samp></li>
<li><samp>goldColor</samp></li>
<li><samp>iridiumColor</samp></li>
<li><samp>nonUpgradeable</samp></li>
<li><samp>parsnipSpriteIndex</samp></li>
<li><samp>Stackable</samp></li>
<li><samp>startOfNegativeWeaponIndex</samp></li>
<li><samp>steelColor</samp></li></ul>
</td></tr>
<tr>
<td><samp>Utility</samp>
</td>
<td> 
<ul><li><samp>buyFloor()</samp></li>
<li><samp>buyWallpaper()</samp></li>
<li><samp>cropsOfTheWeek()</samp></li>
<li><samp>facePlayerEndBehavior(…)</samp></li>
<li><samp>getRandomSlotCharacter()</samp></li>
<li><samp>plantCrops(…)</samp></li>
<li><samp>showLanternBar()</samp></li></ul>
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Renamed_classes">Renamed classes</span></h4>
<p>These classes were renamed in 1.6:
</p>
<table class="wikitable">

<tbody><tr>
<th>old name
</th>
<th>new name
</th></tr>
<tr>
<td><samp>Game1.MusicContext</samp>
</td>
<td><samp>MusicContext</samp> (in <samp>StardewValley.GameData</samp>)
</td></tr>
<tr>
<td><samp>LocationContext</samp>
</td>
<td><samp>LocationContexts</samp>
</td></tr>
<tr>
<td><samp>SpecialOrder.QuestStatus</samp>
</td>
<td><samp>SpecialOrderStatus</samp> (in <samp>StardewValley.SpecialOrders</samp>)
</td></tr></tbody></table>
<p>And these were moved to a different namespace:
</p>
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>old namespace
</th>
<th>new namespace
</th></tr>
<tr>
<td><samp>AmethystEnchantment</samp><br><samp>AquamarineEnchantment</samp><br><samp>ArchaeologistEnchantment</samp><br><samp>ArtfulEnchantment</samp><br><samp>AutoHookEnchantment</samp><br><samp>AxeEnchantment</samp><br><samp>BaseEnchantment</samp><br><samp>BaseWeaponEnchantment</samp><br><samp>BottomlessEnchantment</samp><br><samp>BugKillerEnchantment</samp><br><samp>CrusaderEnchantment</samp><br><samp>DiamondEnchantment</samp><br><samp>EfficientToolEnchantment</samp><br><samp>EmeraldEnchantment</samp><br><samp>FishingRodEnchantment</samp><br><samp>GalaxySoulEnchantment</samp><br><samp>GenerousEnchantment</samp><br><samp>HaymakerEnchantment</samp><br><samp>HoeEnchantment</samp><br><samp>JadeEnchantment</samp><br><samp>MagicEnchantment</samp><br><samp>MasterEnchantment</samp><br><samp>MilkPailEnchantment</samp><br><samp>PanEnchantment</samp><br><samp>PickaxeEnchantment</samp><br><samp>PowerfulEnchantment</samp><br><samp>PreservingEnchantment</samp><br><samp>ReachingToolEnchantment</samp><br><samp>RubyEnchantment</samp><br><samp>ShavingEnchantment</samp><br><samp>ShearsEnchantment</samp><br><samp>SwiftToolEnchantment</samp><br><samp>TopazEnchantment</samp><br><samp>VampiricEnchantment</samp><br><samp>WateringCanEnchantment</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.Enchantments</samp>
</td></tr>
<tr>
<td><samp>Extensions</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.Extensions</samp>
</td></tr>
<tr>
<td><samp>ModDataDictionary</samp><br><samp>ModHooks</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.Mods</samp>
</td></tr>
<tr>
<td><samp>PathFindController</samp><br><samp>PathNode</samp><br><samp>PriorityQueue</samp><br><samp>SchedulePathDescription</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.Pathfinding</samp>
</td></tr>
<tr>
<td><samp>SpecialOrder</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.SpecialOrders</samp>
</td></tr>
<tr>
<td><samp>CollectObjective</samp><br><samp>DeliverObjective</samp><br><samp>DonateObjective</samp><br><samp>FishObjective</samp><br><samp>GiftObjective</samp><br><samp>JKScoreObjective</samp><br><samp>OrderObjective</samp><br><samp>ReachMineFloorObjective</samp><br><samp>ShipObjective</samp><br><samp>SlayObjective</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.SpecialOrders.Objectives</samp>
</td></tr>
<tr>
<td><samp>FriendshipReward</samp><br><samp>GemsReward</samp><br><samp>MailReward</samp><br><samp>MoneyReward</samp><br><samp>OrderReward</samp><br><samp>ResetEventReward</samp>
</td>
<td><samp>StardewValley</samp>
</td>
<td><samp>StardewValley.SpecialOrders.Rewards</samp>
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Other_API_changes">Other API changes</span></h4>
<p>These class members changed in 1.6:
</p>
<table class="wikitable">

<tbody><tr>
<th>type
</th>
<th>member
</th>
<th>migration
</th></tr>
<tr>
<td><samp>BigSlime</samp>
</td>
<td><samp>heldObject</samp>
</td>
<td>Replaced by <samp>heldItem</samp>, which allows non-object items too.
</td></tr>
<tr>
<td rowspan="3"><samp>Bush</samp>
</td>
<td><samp>overrideSeason</samp>
</td>
<td>Removed; use <code>bush.Location.GetSeason()</code> instead.
</td></tr>
<tr>
<td><samp>greenhouseBush</samp>
</td>
<td>Removed; use <code>bush.IsSheltered()</code> or <code>bush.currentLocation.IsGreenhouse</code> instead.
</td></tr>
<tr>
<td><samp>inBloom</samp>
</td>
<td>Remove the arguments, like <code>bush.inBloom(Game1.currentSeason, Game1.dayOfMonth)</code> → <code>bush.inBloom()</code>.
</td></tr>
<tr>
<td rowspan="3"><samp>Character</samp>
</td>
<td><samp>getStandingX</samp><br><samp>getStandingY</samp><br><samp>getStandingXY</samp>
</td>
<td>Removed; use <samp>character.StandingPixel</samp> instead.
</td></tr>
<tr>
<td><samp>getTileLocation</samp><br><samp>getTileX</samp><br><samp>getTileY</samp><br>
</td>
<td>Removed; use <samp>character.Tile</samp> instead.
</td></tr>
<tr>
<td><samp>getTileLocationPoint</samp>
</td>
<td>Removed; use <samp>character.TilePoint</samp> instead.
</td></tr>
<tr>
<td><samp>Chest</samp>
</td>
<td><samp>MoveToSafePosition</samp>
</td>
<td>Replaced by the simpler <samp>TryMoveToSafePosition</samp>
</td></tr>
<tr>
<td rowspan="2"><samp>Dialogue</samp>
</td>
<td><samp>dialogues</samp>
</td>
<td>Changed from <code>List&lt;string&gt;</code> to <code>List&lt;DialogueLine&gt;</code>. The <samp>Text</samp> field on each dialogue line is equivalent to the old value.
</td></tr>
<tr>
<td><samp>isOnFinalDialogue()</samp>
</td>
<td>This now indicates whether it's showing the last dialogue <i>with message text</i>; there may still be entries in <samp>dialogues</samp> which apply side-effects without message text.
</td></tr>
<tr>
<td rowspan="3"><samp>Farmer</samp>
</td>
<td><samp>changePants(…)</samp>
</td>
<td>Renamed to <samp>changePantsColor(…)</samp> for consistency with <samp>change[Eye|Hair|Shoe]Color</samp>.
</td></tr>
<tr>
<td><samp>isMarried()</samp>
</td>
<td>Renamed to <samp>isMarriedOrRoommates()</samp> for clarity.
</td></tr>
<tr>
<td><samp>visibleQuestCount</samp>
</td>
<td>Replaced by <samp>hasVisibleQuests</samp>.
</td></tr>
<tr>
<td><samp>Flooring</samp>
</td>
<td><samp>GetFloorPathLookup</samp>
</td>
<td>Use <samp>Game1.floorPathData</samp> instead.
</td></tr>
<tr>
<td><samp>Forest</samp>
</td>
<td><samp>log</samp>
</td>
<td>Moved into <samp>Forest.resourceClumps</samp>.
</td></tr>
<tr>
<td><samp>FruitTree</samp>
</td>
<td><samp>GreenHouseTree</samp>
</td>
<td>Replaced by <samp>IgnoresSeasonsHere()</samp>.
</td></tr>
<tr>
<td rowspan="3"><samp>Game1</samp>
</td>
<td><samp>bigCraftableInformation</samp>
</td>
<td>Overhauled into <a href="#Custom_big_craftables"><samp>Game1.bigCraftableData</samp></a>.
</td></tr>
<tr>
<td><samp>clothingInformation</samp>
</td>
<td>Overhauled into <a href="#Custom_shirts"><samp>Game1.shirtData</samp></a> and <a href="#Custom_pants"><samp>Game1.pantsData</samp></a>.
</td></tr>
<tr>
<td><samp>objectInformation</samp>
</td>
<td>Overhauled into <a href="#Custom_objects"><samp>Game1.objectData</samp></a>.
</td></tr>
<tr>
<td rowspan="3"><samp>GameLocation</samp>
</td>
<td><samp>getCharacters</samp>
</td>
<td>Removed; use the <samp>characters</samp> field instead.
</td></tr>
<tr>
<td><samp>GetMapPropertyPosition</samp>
</td>
<td>Replaced by <samp>TryGetMapPropertyAs</samp>, which supports multiple data types (not just <samp>Point</samp>).
</td></tr>
<tr>
<td><samp>isTileOccupied</samp><br><samp>isTileOccupiedForPlacement</samp><br><samp>isTileOccupiedIgnoreFloors</samp><br><samp>isTileLocationOpenIgnoreFrontLayers</samp><br><samp>isTileLocationTotallyClearAndPlaceable</samp><br><samp>isTileLocationTotallyClearAndPlaceableIgnoreFloors</samp>
</td>
<td>Removed. The collision logic has been significantly rewritten and uses a new set of methods (mainly <samp>isTilePassable</samp>, <samp>IsTileOccupiedBy</samp>, and <samp>CanItemBePlacedHere</samp>). Mods should ideally be updated to use the new methods.
<p>Here's a drop-in set of extension methods which re-add the older methods. This lets you temporarily fix code until you can update it properly, but depending on these isn't recommended since they won't be maintained in future versions.
</p>
<table class="mw-collapsible mw-collapsed" style="">
<tbody><tr>
<th style="text-align: left;"><b>expand for non-recommended code</b> 
</th></tr>
<tr>
<td><div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">GameLocationExtensions</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileOccupiedForPlacement</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">tileLocation</span><span class="p">,</span> <span class="n">Object</span> <span class="n">toPlace</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">CanItemBePlacedHere</span><span class="p">(</span><span class="n">tileLocation</span><span class="p">,</span> <span class="n">toPlace</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">toPlace</span><span class="p">.</span><span class="n">isPassable</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileOccupied</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">tileLocation</span><span class="p">,</span> <span class="kt">string</span> <span class="n">characterToIgnore</span> <span class="p">=</span> <span class="s">""</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">ignoreAllCharacters</span> <span class="p">=</span> <span class="k">false</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">CollisionMask</span> <span class="n">mask</span> <span class="p">=</span> <span class="n">ignoreAllCharacters</span> <span class="p">?</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">All</span> <span class="p">&amp;</span> <span class="p">~</span><span class="n">CollisionMask</span><span class="p">.</span><span class="n">Characters</span> <span class="p">&amp;</span> <span class="p">~</span><span class="n">CollisionMask</span><span class="p">.</span><span class="n">Farmers</span> <span class="p">:</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">All</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">IsTileOccupiedBy</span><span class="p">(</span><span class="n">tileLocation</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileOccupiedIgnoreFloors</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">tileLocation</span><span class="p">,</span> <span class="kt">string</span> <span class="n">characterToIgnore</span> <span class="p">=</span> <span class="s">""</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">IsTileOccupiedBy</span><span class="p">(</span><span class="n">tileLocation</span><span class="p">,</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">Buildings</span> <span class="p">|</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">Furniture</span> <span class="p">|</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">Objects</span> <span class="p">|</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">Characters</span> <span class="p">|</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">TerrainFeatures</span><span class="p">,</span> <span class="n">ignorePassables</span><span class="p">:</span> <span class="n">CollisionMask</span><span class="p">.</span><span class="n">Flooring</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileLocationOpenIgnoreFrontLayers</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Location</span> <span class="n">tile</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">map</span><span class="p">.</span><span class="n">RequireLayer</span><span class="p">(</span><span class="s">"Buildings"</span><span class="p">).</span><span class="n">Tiles</span><span class="p">[</span><span class="n">tile</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="n">tile</span><span class="p">.</span><span class="n">Y</span><span class="p">]</span> <span class="p">==</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">location</span><span class="p">.</span><span class="n">isWaterTile</span><span class="p">(</span><span class="n">tile</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="n">tile</span><span class="p">.</span><span class="n">Y</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileLocationTotallyClearAndPlaceable</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">isTileLocationTotallyClearAndPlaceable</span><span class="p">(</span><span class="k">new</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileLocationTotallyClearAndPlaceableIgnoreFloors</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">v</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">isTileOnMap</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">location</span><span class="p">.</span><span class="n">isTileOccupiedIgnoreFloors</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">location</span><span class="p">.</span><span class="n">isTilePassable</span><span class="p">(</span><span class="k">new</span> <span class="n">Location</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">Y</span><span class="p">),</span> <span class="n">Game1</span><span class="p">.</span><span class="n">viewport</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">location</span><span class="p">.</span><span class="n">isTilePlaceable</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">isTileLocationTotallyClearAndPlaceable</span><span class="p">(</span><span class="k">this</span> <span class="n">GameLocation</span> <span class="n">location</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">v</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Vector2</span> <span class="n">pixel</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">((</span><span class="n">v</span><span class="p">.</span><span class="n">X</span> <span class="p">*</span> <span class="n">Game1</span><span class="p">.</span><span class="n">tileSize</span><span class="p">)</span> <span class="p">+</span> <span class="n">Game1</span><span class="p">.</span><span class="n">tileSize</span> <span class="p">/</span> <span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">Y</span> <span class="p">*</span> <span class="n">Game1</span><span class="p">.</span><span class="n">tileSize</span><span class="p">)</span> <span class="p">+</span> <span class="n">Game1</span><span class="p">.</span><span class="n">tileSize</span> <span class="p">/</span> <span class="m">2</span><span class="p">);</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="n">Furniture</span> <span class="n">f</span> <span class="k">in</span> <span class="n">location</span><span class="p">.</span><span class="n">furniture</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">furniture_type</span> <span class="p">!=</span> <span class="n">Furniture</span><span class="p">.</span><span class="n">rug</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">f</span><span class="p">.</span><span class="n">isPassable</span><span class="p">()</span> <span class="p">&amp;&amp;</span> <span class="n">f</span><span class="p">.</span><span class="n">GetBoundingBox</span><span class="p">().</span><span class="n">Contains</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">pixel</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">pixel</span><span class="p">.</span><span class="n">Y</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">f</span><span class="p">.</span><span class="n">AllowPlacementOnThisTile</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">Y</span><span class="p">))</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">location</span><span class="p">.</span><span class="n">isTileOnMap</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">location</span><span class="p">.</span><span class="n">isTileOccupied</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">location</span><span class="p">.</span><span class="n">isTilePassable</span><span class="p">(</span><span class="k">new</span> <span class="n">Location</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">X</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">v</span><span class="p">.</span><span class="n">Y</span><span class="p">),</span> <span class="n">Game1</span><span class="p">.</span><span class="n">viewport</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">location</span><span class="p">.</span><span class="n">isTilePlaceable</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
</td></tr>
<tr>
<td><samp>GiantCrop</samp>
</td>
<td><samp>which</samp>
</td>
<td>Replaced by <samp>itemId</samp>.
</td></tr>
<tr>
<td><samp>Item</samp>
</td>
<td><samp>SanitizeContextTag</samp>
</td>
<td>Replaced by <samp>ItemContextTagManager.SanitizeContextTag</samp>.
</td></tr>
<tr>
<td><samp>LocalizedContentManager</samp>
</td>
<td><samp>LanguageCodeString</samp>
</td>
<td>Now static.
</td></tr>
<tr>
<td><samp>LocationContextData</samp>
</td>
<td><samp>Name</samp>
</td>
<td>Removed; use its dictionary key in <samp>Game1.locationContextData</samp> instead.
</td></tr>
<tr>
<td><samp>NetFields</samp>
</td>
<td><samp>AddFields</samp>
</td>
<td>Removed; use <samp>AddField</samp> instead. For example:
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// old code</span>
<span class="n">NetFields</span><span class="p">.</span><span class="n">AddFields</span><span class="p">(</span><span class="n">textureName</span><span class="p">,</span> <span class="n">spriteWidth</span><span class="p">,</span> <span class="n">spriteHeight</span><span class="p">);</span>

<span class="c1">// new code</span>
<span class="n">NetFields</span>
    <span class="p">.</span><span class="n">AddField</span><span class="p">(</span><span class="n">textureName</span><span class="p">)</span>
    <span class="p">.</span><span class="n">AddField</span><span class="p">(</span><span class="n">spriteWidth</span><span class="p">)</span>
    <span class="p">.</span><span class="n">AddField</span><span class="p">(</span><span class="n">spriteHeight</span><span class="p">);</span>
</pre></div>
<p>Note that the second argument (<samp>name</samp>) should usually be omitted, since it'll be auto-populated from the value passed to the first argument.
</p>
</td></tr>
<tr>
<td rowspan="7"><samp>NPC</samp>
</td>
<td><samp>canReceiveThisItemAsGift(…)</samp>
</td>
<td>Removed. The closest equivalent is <code>item.canBeGivenAsGift()</code>, or you can check if the NPC will accept the player's held object (as a gift or otherwise) using <code>npc.tryReceiveActiveObject(Game1.player, probe: true)</code>.
</td></tr>
<tr>
<td><samp>Gender</samp><br><samp>female</samp><br><samp>male</samp><br><samp>undefined</samp>
</td>
<td>The <samp>Gender</samp> field now uses a <samp>Gender</samp> enum instead of numeric constants. For example, <code>npc.Gender == NPC.female</code> becomes <code>npc.Gender == Gender.Female</code> in 1.6.
</td></tr>
<tr>
<td><samp>homeRegion</samp>
</td>
<td>Removed; use <samp>npc.GetData()?.HomeRegion</samp> instead. Change <samp>0</samp> to <samp>"Other"</samp> or <samp>NPC.region_other</samp>, <samp>1</samp> to <samp>"Desert"</samp> or <samp>NPC.region_desert</samp>, and <samp>2</samp> to <samp>"Town"</samp> or <samp>NPC.region_town</samp>.
</td></tr>
<tr>
<td><samp>isBirthday</samp>
</td>
<td>Remove the arguments, like <code>npc.isBirthday(Game1.currentSeason, Game1.dayOfMonth)</code> → <code>npc.isBirthday()</code>.
</td></tr>
<tr>
<td><samp>isVillager()</samp>
</td>
<td>Deprecated; use the <samp>character.IsVillager</samp> property instead.
</td></tr>
<tr>
<td><samp>populateRoutesFromLocationToLocationList</samp>
</td>
<td>Replaced by <samp>WarpPathfindingCache.PopulateCache</samp>.
</td></tr>
<tr>
<td><samp>Schedule</samp>
</td>
<td>No longer assignable, use one of the <samp>TryLoadSchedule</samp> overloads instead.
</td></tr>
<tr>
<td rowspan="3"><samp>Object</samp>
</td>
<td><samp>GetContextTagList()</samp>
</td>
<td>Replaced by <samp>GetContextTags()</samp>, which returns a hash set instead of a list.
</td></tr>
<tr>
<td><samp>HasBeenPickedUpByPlayer</samp>
</td>
<td>Removed; use <samp>HasBeenInInventory</samp> instead.
</td></tr>
<tr>
<td><samp>isPotentialBasicShippedCategory</samp>
</td>
<td>The second argument should now be an integer (like <samp>-75</samp> or <samp>Object.VegetableCategory</samp>) instead of a string (like <samp>"-75"</samp>).
</td></tr>
<tr>
<td rowspan="9"><samp>Utility</samp>
</td>
<td><samp>doesItemWithThisIndexExistAnywhere</samp>
</td>
<td>Replace with <samp>Utility.doesItemExistAnywhere</samp>, which takes a string item ID. For example:
<ul><li><code>Utility.doesItemWithThisIndexExistAnywhere(128)</code> → <code>Utility.doesItemExistAnywhere("(O)128")</code>;</li>
<li><code>Utility.doesItemWithThisIndexExistAnywhere(128, true)</code> → <code>Utility.doesItemExistAnywhere("(BC)128")</code>.</li></ul>
</td></tr>
<tr>
<td><samp>ForAllLocations</samp><br><samp>iterateAllCrops</samp><br><samp>iterateAllItems</samp>
</td>
<td>Removed; use the equivalent <samp>Utility.ForEach*</samp> methods instead.
</td></tr>
<tr>
<td><samp>GetHorseWarpRestrictionsForFarmer</samp>
</td>
<td>This now returns a flag enum instead of a list of integer values. The equivalent values are 1 → <samp>NoOwnedHorse</samp>, 2 → <samp>Indoors</samp>, 3 → <samp>NoRoom</samp>, and 4 → <samp>InUse</samp>.
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">// old code</span>
<span class="kt">bool</span> <span class="n">inUse</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">GetHorseWarpRestrictionsForFarmer</span><span class="p">(</span><span class="n">player</span><span class="p">).</span><span class="n">Any</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span> <span class="p">==</span> <span class="m">4</span><span class="p">);</span>

<span class="c1">// new code</span>
<span class="kt">bool</span> <span class="n">inUse</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">GetHorseWarpRestrictionsForFarmer</span><span class="p">(</span><span class="n">player</span><span class="p">).</span><span class="n">HasFlag</span><span class="p">(</span><span class="n">Utility</span><span class="p">.</span><span class="n">HorseWarpRestrictions</span><span class="p">.</span><span class="n">InUse</span><span class="p">);</span>
</pre></div>
<p>Or to check if no restrictions apply:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">bool</span> <span class="n">canSummon</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="n">GetHorseWarpRestrictionsForFarmer</span><span class="p">(</span><span class="n">player</span><span class="p">)</span> <span class="p">==</span> <span class="n">Utility</span><span class="p">.</span><span class="n">HorseWarpRestrictions</span><span class="p">.</span><span class="n">None</span><span class="p">;</span>
</pre></div>
<p>C# mods can patch <samp>Utility.GetHorseWarpErrorMessage</samp> if they need to add an error message for a custom restriction value.
</p>
</td></tr>
<tr>
<td><samp>getRandomTownNPC(…)</samp>
</td>
<td>Replaced by either <code>Utility.GetRandomWinterStartParticipant(…)</code> or <code>Utility.getRandomNpcFromHomeRegion(NPC.region_town)</code>.
</td></tr>
<tr>
<td><samp>getTodaysBirthdayNPC</samp>
</td>
<td>Remove the arguments, like <code>Utility.getTodaysBirthdayNPC(Game1.currentSeason, Game1.dayOfMonth)</code> → <code>Utility.getTodaysBirthdayNPC()</code>.
</td></tr>
<tr>
<td><samp>getPooledList</samp><br><samp>returnPooledList</samp>
</td>
<td>The game no longer uses a list pool. In most cases you should use the <a href="#Iteration"><samp>Utility.ForEach*</samp> methods</a> instead, which don't need it.
</td></tr>
<tr>
<td><samp>numObelisksOnFarm</samp>
</td>
<td>Renamed to <samp>GetObeliskTypesBuilt</samp>, which searches all locations.
</td></tr>
<tr>
<td><samp>numSilos</samp>
</td>
<td>Removed.
<p>If you're using this to calculate hay capacity, it's a bit more complicated in 1.6 since hay storage can be enabled for custom buildings and building construction can be enabled for any location. To get capacity for the current location, use <samp>Game1.currentLocation.GetHayCapacity()</samp> instead. To get total hay capacity in the world, use <samp>Utility.ForEachLocation</samp> to call it on every location.
</p><p>If you actually need the number of silos, use <samp>location.getNumberBuildingsConstructed("Silo")</samp> (one location) or <samp>Game1.GetNumberBuildingsConstructed("Silo")</samp> (all locations).
</p>
</td></tr>
<tr>
<td><samp>removeThisCharacterFromAllLocations</samp>
</td>
<td>Removed; use <samp>Game1.removeCharacterFromItsLocation</samp> instead.
</td></tr>
<tr>
<td><samp>ShopMenu</samp>
</td>
<td><samp>storeContext</samp>
</td>
<td>Replaced by <samp>ShopId</samp>.
</td></tr>
<tr>
<td rowspan="3"><samp>Stats</samp>
</td>
<td><samp>averageBedtime</samp><br><samp>beveragesMade</samp><br><samp>bouldersCracked</samp><br><samp>caveCarrotsFound</samp><br><samp>cheeseMade</samp><br><samp>chickenEggsLayed</samp><br><samp>copperFound</samp><br><samp>cowMilkProduced</samp><br><samp>cropsShipped</samp><br><samp>daysPlayed</samp><br><samp>diamondsFound</samp><br><samp>dirtHoed</samp><br><samp>duckEggsLayed</samp><br><samp>fishCaught</samp><br><samp>geodesCracked</samp><br><samp>giftsGiven</samp><br><samp>goatCheeseMade</samp><br><samp>goatMilkProduced</samp><br><samp>goldFound</samp><br><samp>goodFriends</samp><br><samp>individualMoneyEarned</samp><br><samp>iridiumFound</samp><br><samp>ironFound</samp><br><samp>itemsCooked</samp><br><samp>itemsCrafted</samp><br><samp>itemsForaged</samp><br><samp>itemsShipped</samp><br><samp>monstersKilled</samp><br><samp>mysticStonesCrushed</samp><br><samp>notesFound</samp><br><samp>otherPreciousGemsFound</samp><br><samp>piecesOfTrashRecycled</samp><br><samp>preservesMade</samp><br><samp>prismaticShardsFound</samp><br><samp>questsCompleted</samp><br><samp>rabbitWoolProduced</samp><br><samp>rocksCrushed</samp><br><samp>seedsSown</samp><br><samp>sheepWoolProduced</samp><br><samp>slimesKilled</samp><br><samp>stepsTaken</samp><br><samp>stoneGathered</samp><br><samp>stumpsChopped</samp><br><samp>timesFished</samp><br><samp>timesUnconscious</samp><br><samp>totalMoneyGifted</samp><br><samp>trufflesFound</samp><br><samp>weedsEliminated</samp>
</td>
<td>Removed; use the equivalent property or methods. For example, <code>Game1.stats.daysPlayed</code> can be replaced with <code>Game1.stats.DaysPlayed</code> or methods like <code>Game1.stats.Get(StatKeys.DaysPlayed)</code>. See <a href="#Stat_changes_for_C.23_mods">stat changes for C# mods</a>.
</td></tr>
<tr>
<td><samp>getStat(…)</samp><br><samp>incrementStat(…)</samp>
</td>
<td>Replaced by <samp>Get(…)</samp> and <samp>Increment(…)</samp>. See <a href="#Stat_changes_for_C.23_mods">stat changes for C# mods</a>.
</td></tr>
<tr>
<td><samp>stat_dictionary</samp>
</td>
<td>Renamed to <samp>Values</samp>. See <a href="#Stat_changes_for_C.23_mods">stat changes for C# mods</a>.
</td></tr>
<tr>
<td><samp>Woods</samp>
</td>
<td><samp>stumps</samp>
</td>
<td>Moved into <samp>resourceClumps</samp>.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Check_for_obsolete_code">Check for obsolete code</span></h3>
<p>Perform a full rebuild of your mod (in Visual Studio, click <i>Build &gt; Rebuild Solution</i>), then check the Error List pane for any warnings like "'<i>X' is obsolete</i>". Anything from the vanilla game code which is marked obsolete won't work anymore and is only kept for save migrations. Usually the warning will include an explanation of what you should use instead.
</p>
<h2><span class="mw-headline" id="Breaking_changes_for_content_packs">Breaking changes for content packs</span></h2>
<p><b>This section only describes how this update may break existing mods. See the <i>what's new</i> sections above for more info, including new functionality mods can use.</b>
</p>
<h3 class="in-block"><span class="mw-headline" id="Standardized_ID_fields">Standardized ID fields</span></h3>
<p>Stardew Valley 1.6 adds an <samp>Id</samp> field to these assets. For Content Patcher content packs, these replace the previous synthetic ID:
</p>
<table class="wikitable">

<tbody><tr>
<th>asset
</th>
<th>old key
</th>
<th>new key
</th>
<th>migration steps
</th></tr>
<tr>
<td><samp>Data/ConcessionTastes</samp><br><samp>Data/MovieReactions</samp><br><samp>Data/RandomBundles</samp> (area)<br><samp>Data/RandomBundles</samp> (bundle)
</td>
<td><samp>Name</samp><br><samp>NPCName</samp><br><samp>AreaName</samp><br><i>none</i>
</td>
<td><samp>Id</samp>
</td>
<td>None. The <samp>Id</samp> field is set automatically to the same value (or <samp>Name</samp> for bundles), so there's no change for content packs. Omit the new field when creating a new entry.
</td></tr>
<tr>
<td><samp>Data/FishPondData</samp><br><samp>Data/RandomBundles</samp> (bundle set)
</td>
<td><samp>RequiredTags</samp><br><i>none</i>
</td>
<td><samp>Id</samp>
</td>
<td>Use the new <samp>Id</samp> field to target an entry, and add it when creating a new entry. Required.
</td></tr>
<tr>
<td><samp>Data/TailoringRecipes</samp>
</td>
<td><samp>FirstItemTags</samp> and <samp>SecondItemTags</samp>
</td>
<td><samp>Id</samp>
</td>
<td>Use the new <samp>Id</samp> field to target an entry, and add it when creating a new entry. Defaults to the <samp>CraftedItemIds</samp> (comma-delimited) or <samp>CraftedItemId</samp> value if omitted, but there's a high chance of conflicts so mods should always specify a unique ID.
</td></tr></tbody></table>
<p>For example, let's say you have a patch like this using Content Patcher:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/TailorRecipes"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"item_cloth|item_pufferchick"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"FirstItemTags"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"item_cloth"</span> <span class="p">],</span>
                    <span class="s2">"SecondItemTags"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"item_pufferchick"</span> <span class="p">],</span>
                    <span class="s2">"CraftedItemId"</span><span class="o">:</span> <span class="s2">"(S)1260"</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>When updating to Stardew Valley 1.6, replace the synthetic ID (<samp>item_cloth|item_pufferchick</samp>) with a real one:
</p>
<ul><li>To edit an existing entry, unpack the asset and get its new <samp>Id</samp> value.</li>
<li>To add a custom entry, use a <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Common_data_field_types#Unique_string_ID" title="Modding:Common data field types">unique string ID</a>.</li></ul>
<p>For example:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/TailorRecipes"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"ExampleAuthor.ModId_RainCoatFromPufferchick"</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">"Id"</span><span class="o">:</span> <span class="s2">"ExampleAuthor.ModId_RainCoatFromPufferchick"</span><span class="p">,</span> <span class="c1">// need to specify ID again when creating it</span>
                    <span class="s2">"FirstItemTags"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"item_cloth"</span> <span class="p">],</span>
                    <span class="s2">"SecondItemTags"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"item_pufferchick"</span> <span class="p">],</span>
                    <span class="s2">"CraftedItemId"</span><span class="o">:</span> <span class="s2">"(S)1260"</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Event_ID_changes">Event ID changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Event_data" title="Modding:Event data">Modding:Event data</a>. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<dl><dd><i>See also: <a href="#String_event_IDs">string event IDs in what's new</a>.</i></dd></dl>
<p>Events now have unique string IDs.
</p><p>When creating an event:
</p>
<ul>
<li>New events should use a globally unique ID in the form <samp>Your.ModId_EventName</samp>. Existing events should be fine as-is, but it may be worth migrating them to avoid future conflicts.</li>
<li>Every non-fork event <b>must</b> have a precondition in its key (even if it's empty). For example, change <code>"Your.ModId_EventName": "..."</code> to <code>"Your.ModId_EventName/": "..."</code>. This is needed for the game to distinguish between events and fork scripts.

<div class="mw-highlight mw-highlight-lang-js mw-content-ltr" dir="ltr"><pre><span></span><span class="s2">"Example.ModId_EventName/"</span><span class="o">:</span> <span class="s2">"..."</span><span class="p">,</span> <span class="c1">// event: loaded automatically by the game</span>
<span class="s2">"SomeFork"</span><span class="o">:</span> <span class="s2">"..."</span>                  <span class="c1">// event fork: ignored unless it's loaded through an event script</span>
</pre></div></li>
</ul>
<h3 class="in-block"><span class="mw-headline" id="Monster_eradication_goal_flag_changes">Monster eradication goal flag changes</span></h3>
<div style="border: 1px solid #C00; background: #FCC; padding: 0.5em; border-radius: 2px;">These docs should be merged into a new doc page. When copying content, <b><a href="../../external.html?link=https://stardewvalleywiki.com/Modding_talk:Migrate_to_Stardew_Valley_1.6#How_to_copy_info_to_a_specific_page" title="Modding talk:Migrate to Stardew Valley 1.6">make sure you attribute the original authors</a></b>.</div>
<dl><dd><i>See also: <a href="#Custom_monster_eradication_goals">Custom monster eradication goals</a>.</i></dd></dl>
<p>The game now tracks <a href="../../external.html?link=https://stardewvalleywiki.com/Adventurer%27s_Guild" title="Adventurer's Guild">Adventurer's Guild</a> monster eradication goal completion by the goal ID, instead of the produced item. You'll need to replace these mail flags if you check them:
</p>
<table class="wikitable">

<tbody><tr>
<th>old flag
</th>
<th>new flag
</th></tr>
<tr>
<td><samp>Gil_Slime Charmer Ring</samp>
</td>
<td><samp>Gil_Slimes</samp>
</td></tr>
<tr>
<td><samp>Gil_Savage Ring</samp>
</td>
<td><samp>Gil_Shadows</samp>
</td></tr>
<tr>
<td><samp>Gil_Vampire Ring</samp>
</td>
<td><samp>Gil_Bats</samp>
</td></tr>
<tr>
<td><samp>Gil_Skeleton Mask</samp>
</td>
<td><samp>Gil_Skeletons</samp>
</td></tr>
<tr>
<td><samp>Gil_Insect Head</samp>
</td>
<td><samp>Gil_Insects</samp>
</td></tr>
<tr>
<td><samp>Gil_Hard Hat</samp>
</td>
<td><samp>Gil_Duggy</samp>
</td></tr>
<tr>
<td><samp>Gil_Burglar's Ring</samp>
</td>
<td><samp>Gil_DustSpirits</samp>
</td></tr>
<tr>
<td><samp>Gil_Crabshell Ring</samp>
</td>
<td><samp>Gil_Crabs</samp>
</td></tr>
<tr>
<td><samp>Gil_Arcane Hat</samp>
</td>
<td><samp>Gil_Mummies</samp>
</td></tr>
<tr>
<td><samp>Gil_Knight's Helmet</samp>
</td>
<td><samp>Gil_Dinos</samp>
</td></tr>
<tr>
<td><samp>Gil_Napalm Ring</samp>
</td>
<td><samp>Gil_Serpents</samp>
</td></tr>
<tr>
<td><samp>Gil_Telephone</samp>
</td>
<td><samp>Gil_FlameSpirits</samp>
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="XNB_impact">XNB impact</span></h3>
<h4 class="in-block"><span class="mw-headline" id="Overview_2">Overview</span></h4>
<p>This section provides a summary of the XNB files which changed in Stardew Valley 1.6. This doesn't include new files (since they won't impact existing mods), or text changes in non-English files.
</p><p><a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Using_XNB_mods" title="Modding:Using XNB mods">XNB mods</a> are disproportionately affected, since...
</p>
<ol><li>they replace the entire file;</li>
<li>they're loaded through the MonoGame content pipeline which is less tolerant of format changes;</li>
<li>they don't benefit from the compatibility rewrites <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Content_Patcher" title="Modding:Content Patcher">Content Patcher</a> provides for its content packs.</li></ol>
<p>Content Patcher packs are typically unaffected (and Content Patcher will try to rewrite content packs automatically). However if a content pack replaces an entire asset instead of editing, it's more likely to be affected like an XNB mod.
</p>
<h4 class="in-block"><span class="mw-headline" id="Changed_assets">Changed assets</span></h4>
<p>Compatibility is broadly grouped into four categories:
</p>
<ul><li>"<b>✘ broken</b>": mods will remove new content or significant changes, or the mod's intended changes will no longer work. Effects may range from display bugs to crashes, depending how the game uses that specific content.</li>
<li>"✘ will remove changes": mods will remove minor changes in 1.6 (e.g. typo fixes).</li>
<li>"✓ mostly unaffected": mods will only be affected if they replace the entire asset, or edit specific entries or fields.</li>
<li>Blank: no expected impact for the vast majority of mods.</li></ul>
<table class="wikitable">

<tbody><tr>
<th rowspan="2">content asset
</th>
<th rowspan="2">changes in 1.6
</th>
<th colspan="2">compatibility for pre-1.6 mods
</th></tr>
<tr>
<th>XNB mods
</th>
<th>Content Patcher packs
</th></tr>
<tr>
<td><samp>Buildings/houses</samp>
</td>
<td> 
<ul><li>fixed missing pixels</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Abigail</samp><br><samp>Characters/Dialogue/Alex</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Caroline</samp><br><samp>Characters/Dialogue/Demetrius</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Elliott</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Emily</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li>
<li>fixed typos</li>
<li>updated <samp>%revealtaste</samp> format (backwards-compatible)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/George</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">Winter Star gift exchange dialogue</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Gus</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Haley</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Harvey</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Jas</samp><br><samp>Characters/Dialogue/Jodi</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Krobus</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">roommate stardrop dialogue</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Leah</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Lewis</samp>
</td>
<td> 
<ul><li>updated <samp>%revealtaste</samp> format (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Linus</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">dumpster dive dialogue</a></li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Marnie</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">Stardew Valley Fair dialogue</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/MarriageDialogue</samp><br><samp>Characters/Dialogue/MarriageDialogueAbigail</samp><br><samp>Characters/Dialogue/MarriageDialogueElliott</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/MarriageDialogueEmily</samp>
</td>
<td> 
<ul><li>changed <samp>spring_Maru</samp> key to <samp>spring_Emily</samp></li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/MarriageDialogueKrobus</samp><br><samp>Characters/Dialogue/MarriageDialogueLeah</samp><br><samp>Characters/Dialogue/MarriageDialogueMaru</samp><br><samp>Characters/Dialogue/MarriageDialoguePenny</samp><br><samp>Characters/Dialogue/MarriageDialogueSam</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Maru</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Penny</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Pierre</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">Stardew Valley Fair dialogue</a></li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Robin</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Sam</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Sandy</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Sebastian</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Willy</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">Stardew Valley Fair dialogue</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Dialogue/Shane</samp>
</td>
<td> 
<ul><li>added <a href="#Dialogue_changes">flower dance dialogue</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Farmer/hats</samp>
</td>
<td> 
<ul><li>removed stray pixel on chicken mask</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/schedules/Elliott</samp>
</td>
<td> 
<ul><li>fixed order of <samp>Fri_6</samp> and <samp>Fri</samp> entries</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Characters/schedules/Lewis</samp>
</td>
<td> 
<ul><li>fixed <samp>winter_Sun</samp> schedule</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/schedules/Maru</samp>
</td>
<td> 
<ul><li>fixed <samp>summer_Mon</samp> and <samp>summer_Sun</samp> schedules</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/schedules/Penny</samp>
</td>
<td> 
<ul><li>fixed <samp>summer_Sun</samp> schedule</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Characters/Schedules/Shane</samp>
</td>
<td> 
<ul><li>fixed dialogue key</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/animationDescriptions</samp>
</td>
<td> 
<ul><li>fixed frame in Lewis' Saloon drinking animation</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/AquariumFish</samp>
</td>
<td> 
<ul><li><a href="#Custom_items">changed key type</a></li>
<li>added hat position for <a href="../../external.html?link=https://stardewvalleywiki.com/Sea_Urchin" title="Sea Urchin">Sea Urchin</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/BigCraftablesInformation</samp>
</td>
<td> 
<ul><li>asset replaced by <a href="#Custom_big_craftables"><samp>Data/BigCraftables</samp></a>:
<ul><li>migrated to data model format</li>
<li>added new features</li></ul></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(covered by runtime migration)</small>
</td></tr>
<tr>
<td><samp>Data/Blueprints</samp>
</td>
<td> 
<ul><li>asset replaced by <a href="#Custom_buildings"><samp>Data/Buildings</samp></a>:
<ul><li>migrated to data model format</li>
<li>added new features</li></ul></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(covered by runtime migration)</small>
</td></tr>
<tr>
<td><samp>Data/Boots</samp>
</td>
<td> 
<ul><li><a href="#Custom_items">changed key type</a></li>
<li>added display name</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(covered by runtime migration)</small>
</td></tr>
<tr>
<td><samp>Data/Bundles</samp>
</td>
<td> 
<ul><li>can no longer omit empty fields before display name</li>
<li>added display name field in English</li>
<li>removed meat items in animal bundle</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/ClothingInformation</samp>
</td>
<td> 
<ul><li>asset replaced by <a href="#Custom_pants"><samp>Data/Pants</samp></a> and <a href="#Custom_shirts"><samp>Data/Shirts</samp></a>:
<ul><li>migrated to data model format</li>
<li>added new features</li></ul></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/Concessions</samp>
</td>
<td> 
<ul><li><a href="#Custom_movie_concessions">added new required fields (<samp>Texture</samp> and <samp>SpriteIndex</samp>)</a></li>
<li>replaced translations with <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable strings</a></li>
<li>changed IDs to strings</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/ConcessionTastes</samp>
</td>
<td> 
<ul><li>added automatic <samp>ID</samp> field</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/CookingRecipes</samp>
</td>
<td> 
<ul><li>replaced translations with <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable strings</a></li>
<li>display names can now be omitted to use item name</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ may remove unaffected
</td></tr>
<tr>
<td><samp>Data/CraftingRecipes</samp>
</td>
<td> 
<ul><li>replaced translations with <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable strings</a></li>
<li>display names can now be omitted to use item name</li>
<li>added <samp>default</samp> unlock condition</li>
<li>fixed typo in Cookout Kit entry</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Crops</samp>
</td>
<td> 
<ul><li><a href="#Custom_crops">completely overhauled</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(covered by runtime migration)</small>
</td></tr>
<tr>
<td><samp>Data/Events/AnimalShop</samp>
</td>
<td> 
<ul><li>updated command syntax (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/Events/Farm</samp>
</td>
<td> 
<ul><li>replaced send-mail events with <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Trigger_actions" title="Modding:Trigger actions">trigger actions</a></li>
<li>updated pet event to support custom pet types</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(✘ may cause duplicate mail if they edit<br>send-mail events)</small>
</td></tr>
<tr>
<td><samp>Data/Events/FishShop</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Events/Forest</samp>
</td>
<td> 
<ul><li>fixed typos</li>
<li>updated Jas <samp>faceDirection</samp> command for sewer event</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Events/IslandHut</samp>
</td>
<td> 
<ul><li>updated how Leo's name is translated</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Events/IslandNorth</samp>
</td>
<td> 
<ul><li>updated quote format</li>
<li>fixed blank music field (backwards-compatible)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(✘ likely broken if they edit the <samp>6497421</samp> event)</small>
</td></tr>
<tr>
<td><samp>Data/Events/IslandSouth</samp>
</td>
<td> 
<ul><li>fixed blank music field (backwards-compatible)</li>
<li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Events/JoshHouse</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Events/LeahHouse</samp>
</td>
<td> 
<ul><li>fixed <samp>move</samp> command format in Leah's 2-heart event</li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Events/Mountain</samp>
</td>
<td> 
<ul><li>fixed skipped dialogue in Maru's 14-heart event</li>
<li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Events/Saloon</samp><br><samp>Data/Events/ScienceHouse</samp><br><samp>Data/Events/SebastianRoom</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Events/Town</samp>
</td>
<td> 
<ul><li>fixed <samp>warp</samp> command format in community center completed event</li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Events/WizardHouse</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/ExtraDialogue</samp>
</td>
<td> 
<ul><li>split <samp>SummitEvent_Dialogue1_Spouse</samp> entry</li>
<li>fixed event command formats in some summit dialogue</li>
<li>moved <a href="#Dialogue_changes">dumpster dive dialogue into NPC files</a></li>
<li>removed unused entries</li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/FarmAnimals</samp>
</td>
<td> 
<ul><li><a href="#Custom_farm_animals">completely overhauled</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ broken</b>
</td></tr>
<tr>
<td><samp>Data/Festivals/fall16</samp>
</td>
<td> 
<ul><li>updated command syntax (backwards-compatible)</li>
<li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Festivals/fall27</samp>
</td>
<td> 
<ul><li>removed <samp>shop</samp> field (moved into <a href="#Custom_shops"><samp>Data/Shops</samp></a>)</li></ul>
</td>
<td>✓ mostly unaffected
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Festivals/spring13</samp>
</td>
<td> 
<ul><li>migrated to new <samp>warpFarmers</samp> command</li>
<li>removed <samp>shop</samp> field (moved into <a href="#Custom_shops"><samp>Data/Shops</samp></a>)</li>
<li>updated <samp>faceDirection</samp> syntax</li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(✘ broken if they edit <samp>mainEvent</samp> or<br><samp>afterEggHunt</samp> fields)</small>
</td></tr>
<tr>
<td><samp>Data/Festivals/spring24</samp><br><samp>Data/Festivals/summer11</samp><br><samp>Data/Festivals/summer28</samp>
</td>
<td> 
<ul><li>migrated to new <samp>warpFarmers</samp> command</li>
<li>removed <samp>shop</samp> field (moved into <a href="#Custom_shops"><samp>Data/Shops</samp></a>)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(✘ broken if they edit <samp>mainEvent</samp> field)</small>
</td></tr>
<tr>
<td><br><samp>Data/Festivals/winter8</samp>
</td>
<td> 
<ul><li>migrated to new <samp>warpFarmers</samp> command</li>
<li>removed <samp>shop</samp> field (moved into <a href="#Custom_shops"><samp>Data/Shops</samp></a>)</li>
<li>removed broken <samp>loadActors MainEvent</samp> command</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(✘ broken if they edit <samp>mainEvent</samp> or<br><samp>afterIceFishing</samp> field)</small>
</td></tr>
<tr>
<td><samp>Data/Festivals/winter25</samp>
</td>
<td> 
<ul><li>removed <samp>shop</samp> field (moved into <a href="#Custom_shops"><samp>Data/Shops</samp></a>)</li></ul>
</td>
<td>✓ mostly unaffected
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Fish</samp>
</td>
<td> 
<ul><li>no longer has per-language versions</li>
<li><a href="#Custom_items">changed key type</a></li>
<li>field 13 now refers to whether fish can be tutorial catch</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✘ likely broken
</td></tr>
<tr>
<td><samp>Data/FishPondData</samp>
</td>
<td> 
<ul><li>added required <samp>Id</samp> &amp; optional <samp>Precedence</samp> fields</li>
<li>standardized <samp>ID</samp>→<samp>Id</samp> naming</li>
<li>changed to qualified item IDs</li>
<li>moved fallback entries to bottom</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✘ likely broken
</td></tr>
<tr>
<td><samp>Data/fruitTrees</samp>
</td>
<td> 
<ul><li><a href="#Custom_fruit_trees">completely overhauled</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ broken</b>
</td></tr>
<tr>
<td><samp>Data/Furniture</samp>
</td>
<td> 
<ul><li><a href="#Custom_items">changed key type</a></li>
<li>replaced translations with <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable strings</a></li>
<li><a href="#Custom_items">changed key type</a></li>
<li>can no longer omit empty fields before display name</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(covered by runtime migration)</small>
</td></tr>
<tr>
<td><samp>Data/hats</samp>
</td>
<td> 
<ul><li><a href="#Custom_items">changed key type</a></li>
<li>can no longer omit empty fields before display name</li>
<li>added display name field in English</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ likely broken</b>
</td></tr>
<tr>
<td><samp>Data/Locations</samp>
</td>
<td> 
<ul><li><a href="#Custom_locations">completely overhauled</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(covered by runtime migration)</small>
</td></tr>
<tr>
<td><samp>Data/mail</samp>
</td>
<td> 
<ul><li>migrated to <samp>%item id</samp> (backwards-compatible)</li>
<li>removed unused entries</li>
<li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Monsters</samp>
</td>
<td> 
<ul><li>changed <i>Dust Spirit</i> display name to <i>Dust Sprite</i></li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/Movies</samp>
</td>
<td> 
<ul><li><a href="#Custom_movies">significantly overhauled</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ broken</b>
</td></tr>
<tr>
<td><samp>Data/MoviesReactions</samp>
</td>
<td> 
<ul><li>replaced translations with <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Tokenizable_strings" title="Modding:Tokenizable strings">tokenizable strings</a></li>
<li>standardized <samp>ID</samp>→<samp>Id</samp> naming</li>
<li>fixed typo</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/NPCDispositions</samp>
</td>
<td> 
<ul><li>asset replaced by <a href="#Custom_NPCs"><samp>Data/Characters</samp></a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(covered by runtime migration)</small>
</td></tr>
<tr>
<td><samp>Data/NPCGiftTastes</samp>
</td>
<td> 
<ul><li>removed invalid item IDs</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/ObjectContextTags</samp>
</td>
<td> 
<ul><li>asset removed (replaced by <samp>ContextTags</samp> field in <a href="#Custom_big_craftables"><samp>Data/BigCraftables</samp></a> and <a href="#Custom_objects"><samp>Data/Objects</samp></a>)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(covered by runtime migration,<br>except context tags defined<br>before their objects and context<br>tags for bigcraftables.)
</small><p><small></small>
</p>
</td></tr>
<tr>
<td><samp>Data/ObjectInformation</samp>
</td>
<td> 
<ul><li>asset replaced by <a href="#Custom_objects"><samp>Data/Objects</samp></a>:
<ul><li>migrated to data model format</li>
<li>added new features</li>
<li>added new entries</li>
<li>adjusted <a href="#Other_item_changes">litter items</a></li>
<li>fixed typos</li></ul></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(covered by runtime migration)</small>
</td></tr>
<tr>
<td><samp>Data/PaintData</samp>
</td>
<td> 
<ul><li>fixed trailing slash in <samp>Deluxe Barn</samp> entry</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/Quests</samp>
</td>
<td> 
<ul><li>changed key type to string</li>
<li>migrated to use item IDs (backwards-compatible)</li>
<li>fixed typo</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/RandomBundles</samp>
</td>
<td> 
<ul><li>add optional <samp>Id</samp> field</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/SecretNotes</samp>
</td>
<td> 
<ul><li>updated <samp>%revealtaste</samp> format (backwards-compatible)</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/SpecialOrders</samp>
</td>
<td> 
<ul><li>changed type of <samp>Repeatable</samp> and <samp>Duration</samp> fields</li>
<li>added optional <samp>CustomFields</samp> and <samp>Conditions</samp> fields</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Data/SpousePatios</samp><br><samp>Data/SpouseRooms</samp>
</td>
<td> 
<ul><li>removed asset (merged into <a href="#Custom_NPCs"><samp>Data/Characters</samp></a>)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ broken</b>
</td></tr>
<tr>
<td><samp>Data/TailoringRecipes</samp>
</td>
<td> 
<ul><li>changed to <a href="#Custom_items">string item IDs</a> (backwards-compatible)</li>
<li>added optional <samp>Id</samp> and <samp>CraftedItemIdFeminine</samp> fields</li>
<li>removed <samp>CraftedItemColor</samp> field</li>
<li>adjusted recipes for gender-variant shirts</li>
<li>standardized <samp>ID</samp>→<samp>Id</samp> naming</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(<samp>MoveEntries</samp> may break, but fallback entries<br>are now checked last automatically)</small>
</td></tr>
<tr>
<td><samp>Data/TV/CookingChannel</samp><br><samp>Data/TV/TipChannel</samp>
</td>
<td> 
<ul><li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Data/weapons</samp>
</td>
<td> 
<ul><li><a href="#Custom_melee_weapons">completely overhauled</a></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected<br><small>(covered by runtime migration)</small>
</td></tr>
<tr>
<td><samp>LooseSprites/Cursors</samp>
</td>
<td> 
<ul><li>new sprites in empty area</li>
<li>moved mailbox to <samp>Buildings/Mailbox</samp></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>LooseSprites/Cursors2</samp>
</td>
<td> 
<ul><li>new sprite in empty area</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>LooseSprites/map</samp>
</td>
<td> 
<ul><li>redrawn to better match in-game locations</li>
<li>added more detail</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✘ likely broken
</td></tr>
<tr>
<td><samp>Maps/AbandonedJojaMart</samp><br><samp>Maps/AdventureGuild</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/AnimalShop</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/ArchaeologyHouse</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li>
<li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Backwoods</samp><br><samp>Maps/Backwoods_GraveSite</samp><br><samp>Maps/Backwoods_Staircase</samp>
</td>
<td> 
<ul><li>removed unused tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Barn</samp><br><samp>Maps/Barn2</samp>
</td>
<td> 
<ul><li>removed unused map properties</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Barn3</samp>
</td>
<td> 
<ul><li>added <samp>AutoFeed</samp> map property</li>
<li>removed unused map properties</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/BathHouse_Entry</samp><br><samp>Maps/BathHouse_MensLocker</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li>
<li>removed unused pathfinding tiles</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/BathHouse_Pool</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li>
<li>removed unused map &amp; tile properties</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/BathHouse_WomensLocker</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li>
<li>removed unused pathfinding tiles</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Beach</samp>
</td>
<td> 
<ul><li>removed unused map properties</li>
<li>removed unused pathfinding tiles</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Beach-Jellies</samp><br><samp>Maps/Beach-Luau</samp><br><samp>Maps/Beach-NightMarket</samp>
</td>
<td> 
<ul><li>updated for festival shops now in <samp>Data/Shops</samp></li>
<li>removed unused map/tile properties</li>
<li>removed unused pathfinding tiles</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Blacksmith</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/BoatTunnel</samp>
</td>
<td> 
<ul><li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/BugLand</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/BusStop</samp>
</td>
<td> 
<ul><li>removed unused map/tile properties</li>
<li>removed unused pathfinding tiles</li>
<li>changed <samp>Action BusTicket</samp> to <samp>Action None</samp></li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Caldera</samp>
</td>
<td> 
<ul><li>removed unused map property</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Cellar</samp>
</td>
<td> 
<ul><li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Club</samp>
</td>
<td> 
<ul><li>added <samp>LocationContext</samp> map property</li>
<li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Coop</samp><br><samp>Maps/Coop2</samp>
</td>
<td> 
<ul><li>removed unused map properties</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Coop3</samp>
</td>
<td> 
<ul><li>added <samp>AutoFeed</samp> map property</li>
<li>removed unused map properties</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Desert</samp>
</td>
<td> 
<ul><li>added <samp>LocationContext</samp> map property</li>
<li>removed unused map/tile properties</li>
<li>removed unused pathfinding tiles</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/ElliottHouse</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Farm</samp><br><samp>Maps/Farm_Combat</samp><br><samp>Maps/Farm_Fishing</samp><br><samp>Maps/Farm_Foraging</samp><br><samp>Maps/Farm_FourCorners</samp><br><samp>Maps/Farm_Island</samp><br><samp>Maps/Farm_Mining</samp>
</td>
<td> 
<ul><li>added new tilesheet</li>
<li>added cabin positions for players 5–8</li>
<li>added <samp>PetBowlLocation</samp> map property (for <samp>Maps/Four_Corners</samp> and <samp>Farm/Island</samp> only)</li>
<li>added <samp>SpouseAreaLocation</samp> map property (for <samp>Maps/Farm_Island</samp> only)</li>
<li>significant tile &amp; tile property changes</li>
<li>removed farmhouse + pet bowl areas (now moveable)</li>
<li>removed unused map/tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✘ may remove changes
</td></tr>
<tr>
<td><samp>Maps/Farm_Greenhouse_Dirt</samp><br><samp>Maps/Farm_Greenhouse_Dirt_FourCorners</samp>
</td>
<td> 
<ul><li>removed unused map properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/FarmHouse</samp><br><samp>Maps/FarmHouse_Bedroom_Normal</samp><br><samp>Maps/FarmHouse_Bedroom_Open</samp><br><samp>Maps/FarmHouse_Cellar</samp><br><samp>Maps/FarmHouse_ChildBed_0</samp><br><samp>Maps/FarmHouse_ChildBed_1</samp><br><samp>Maps/FarmHouse_CornerRoom_Add</samp><br><samp>Maps/FarmHouse_CornerRoom_Remove</samp><br><samp>Maps/FarmHouse_SouthernRoom_Add</samp><br><samp>Maps/FarmHouse_SouthernRoom_Remove</samp><br><samp>Maps/FarmHouse1</samp><br><samp>Maps/FarmHouse1_marriage</samp><br><samp>Maps/FarmHouse2</samp><br><samp>Maps/FarmHouse2_marriage</samp>
</td>
<td> 
<ul><li>removed unused map properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/FishingGame</samp>
</td>
<td> 
<ul><li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/FishShop</samp>
</td>
<td> 
<ul><li>fixed broken <samp>DayTiles</samp> and <samp>NightTiles</samp> values</li>
<li>removed unused pathfinding tiles</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Forest</samp>
</td>
<td> 
<ul><li>removed unused map/tile properties</li>
<li>removed unused pathfinding tiles</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Forest-FlowerFestival</samp>
</td>
<td> 
<ul><li>updated for festival shops now in <samp>Data/Shops</samp></li>
<li>removed unused map/tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Forest-IceFestival</samp>
</td>
<td> 
<ul><li>updated for festival shops now in <samp>Data/Shops</samp></li>
<li>fixed warp positions</li>
<li>removed unused map/tile properties</li>
<li>removed unused pathfinding tiles</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Forest-SewerClean</samp>
</td>
<td> 
<ul><li>removed unused map/tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/HaleyHouse</samp><br><samp>Maps/HarveyRoom</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Hospital</samp>
</td>
<td> 
<ul><li>removed deprecated <samp>UniquePortrait</samp> &amp; <samp>UniqueSprite</samp> map properties</li>
<li>removed unused pathfinding tiles</li></ul>
</td>
<td>✘ will remove changes<br><small>(This may cause mod conflicts)
</small></td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Island_Bridge_Broken</samp><br><samp>Maps/Island_Bridge_Repaired</samp><br><samp>Maps/Island_House_Cave</samp>
</td>
<td> 
<ul><li>removed unused map properties</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Island_N</samp>
</td>
<td> 
<ul><li>update walnut bush tile so it still works in 1.6</li>
<li>removed unused tile property</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/IslandNorthCave1</samp><br><samp>Maps/IslandSouthEastCave</samp><br><samp>Maps/IslandSouthEastCave_pirates</samp><br><samp>Maps/IslandWestCave1</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Island_Bridge_Broken</samp><br><samp>Maps/Island_Bridge_Repaired</samp>
</td>
<td> 
<ul><li>removed unused map property</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Island_E</samp><br><samp>Maps/IslandFarmCave</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Island_House_Cave</samp>
</td>
<td> 
<ul><li>removed unused map property</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Island_Hut</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Island_N</samp>
</td>
<td> 
<ul><li>added a <samp>NowSpawn False</samp> tile property to fix tree that hides a golden walnut</li>
<li>removed unused tile property</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Island_N_Trader</samp><br><samp>Maps/Island_Secret</samp>
</td>
<td> 
<ul><li>removed unused tile property</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Island_Shrine</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Island_W</samp>
</td>
<td> 
<ul><li>removed unused tile property</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/IslandFarmHouse</samp>
</td>
<td> 
<ul><li>removed unused tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/JojaMart</samp><br><samp>Maps/JoshHouse</samp><br><samp>Maps/LeahHouse</samp><br><samp>Maps/ManorHouse</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/MarnieBarn</samp>
</td>
<td> 
<ul><li>removed unused map properties</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Mine</samp>
</td>
<td> 
<ul><li>updated for <a href="#Custom_minecarts">minecart changes</a></li>
<li>removed unused map properties</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Mountain</samp>
</td>
<td> 
<ul><li>removed unused map/tile properties</li>
<li>removed unused pathfinding tiles</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Mountain-BridgeFixed</samp><br><samp>Maps/Mountain_Shortcuts</samp>
</td>
<td> 
<ul><li>removed unused map/tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/MovieTheater</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/MovieTheaterScreen</samp>
</td>
<td> 
<ul><li>updated for tilesheet changes</li></ul>
</td>
<td>✘ broken visuals (e.g. missing chairs)
</td>
<td>✓ mostly unaffected<br><small>(✘ broken visuals if they edit the affected tiles)</small>
</td></tr>
<tr>
<td><samp>Maps/MovieTheaterScreen_TileSheet</samp>
</td>
<td> 
<ul><li>improved light cone</li>
<li>moved chair sprite to make room for new light cone</li></ul>
</td>
<td>✘ broken visuals (e.g. missing chairs)
</td>
<td>✓ mostly unaffected<br><small>(✘ broken visuals if they edit the affected sprites)</small>
</td></tr>
<tr>
<td><samp>Maps/paths</samp>
</td>
<td> 
<ul><li>added icon for <a href="#Custom_wild_trees">custom wild tree spawn</a></li>
<li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/QiNutRoom</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Railroad</samp>
</td>
<td> 
<ul><li>removed unused map property</li>
<li>removed unused pathfinding tiles</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Saloon</samp><br><samp>Maps/SamHouse</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/SandyHouse</samp>
</td>
<td> 
<ul><li>added <samp>LocationContext</samp> map property</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/ScienceHouse</samp><br><samp>Maps/SebastianRoom</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/SeedShop</samp>
</td>
<td> 
<ul><li>removed unused tile properties</li>
<li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Sewer</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Shed</samp><br><samp>Maps/Shed2</samp>
</td>
<td> 
<ul><li>added <samp>FloorIDs</samp> and <samp>WallIDs</samp> map properties</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/SkullCave</samp>
</td>
<td> 
<ul><li>added <samp>LocationContext</samp> map property</li>
<li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/SlimeHutch</samp>
</td>
<td> 
<ul><li>removed unused tile property</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/spousePatios</samp>
</td>
<td> 
<ul><li>removed unused map/tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/spring_outdoorsTileSheet</samp><br><samp>Maps/summer_outdoorsTileSheet</samp><br><samp>Maps/fall_outdoorsTileSheet</samp><br><samp>Maps/winter_outdoorsTileSheet</samp>
</td>
<td> 
<ul><li>pet bowl moved to <samp>Buildings/Pet Bowl</samp></li></ul>
</td>
<td>✓ mostly unaffected
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Submarine</samp>
</td>
<td> 
<ul><li>removed unused tile property</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Sunroom</samp>
</td>
<td> 
<ul><li>added <samp>IsGreenhouse&lt;/samp map property</samp></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Tent</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Town</samp>
</td>
<td> 
<ul><li>updated <a href="#Custom_garbage_cans">garbage can IDs</a> (backwards-compatible)</li>
<li>removed unused map/tile properties</li>
<li>removed unused pathfinding tiles</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Town-Christmas</samp>
</td>
<td> 
<ul><li>updated for festival shops now in <samp>Data/Shops</samp></li>
<li>removed unused map/tile properties</li>
<li>removed unused pathfinding tiles</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Town-DogHouse</samp>
</td>
<td> 
<ul><li>removed unused map/tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Town-EggFestival</samp>
</td>
<td> 
<ul><li>updated for festival shops now in <samp>Data/Shops</samp></li>
<li>fixed Elliott appearing twice during egg hunt</li>
<li>removed unused map/tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Town-Fair</samp>
</td>
<td> 
<ul><li>removed unused map/tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Town-Halloween</samp>
</td>
<td> 
<ul><li>updated for festival shops now in <samp>Data/Shops</samp></li>
<li>removed unused map/tile properties</li>
<li>removed unused pathfinding tiles</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Town-Theater</samp><br><samp>Maps/Town-TheaterCC</samp><br><samp>Maps/Town-TrashGone</samp>
</td>
<td> 
<ul><li>removed unused tile properties</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Trailer</samp>
</td>
<td> 
<ul><li>removed unused tile property</li>
<li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Trailer_big</samp>
</td>
<td> 
<ul><li>removed unused pathfinding tiles</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Maps/Tunnel</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li>
<li>removed unused map property</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/WitchHut</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/WitchSwamp</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/WitchWarpCave</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/WizardHouse</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li>
<li>removed unused pathfinding tiles</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/WizardHouseBasement</samp>
</td>
<td> 
<ul><li>moved <samp>Music</samp> property into <samp>Data/Locations</samp></li>
<li>removed unused map property</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Woods</samp>
</td>
<td> 
<ul><li>removed unused tile property</li>
<li>standardized <samp>T</samp> for boolean tile property values (backwards-compatible)</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Minigames/boatJourneyMap</samp>
</td>
<td> 
<ul><li>asset replaced by redrawn seasonal variants like <samp>fall_boatJourneyMap</samp></li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td><b>✘ broken</b>
</td></tr>
<tr>
<td><samp>Strings/Characters</samp>
</td>
<td> 
<ul><li>added new entries</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/BundleNames</samp>
</td>
<td> 
<ul><li>removed unused entries</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Characters</samp>
</td>
<td> 
<ul><li>added new entries</li>
<li>removed unused entry</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/credits</samp>
</td>
<td> 
<ul><li>updated for 1.6</li>
<li>various changes</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✘ will remove changes
</td></tr>
<tr>
<td><samp>Strings/Events</samp>
</td>
<td> 
<ul><li>moved <a href="#Dialogue_changes">flower dance dialogue</a> for Emily and Shane to their NPC dialogue files</li></ul>
</td>
<td>✓ mostly unaffected
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Strings/FarmAnimals</samp>
</td>
<td> 
<ul><li>added new entries</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Lexicon</samp>
</td>
<td> 
<ul><li>removed unused entries</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Locations</samp>
</td>
<td> 
<ul><li>added new entries</li>
<li>added placeholder to <samp>BusStop_BuyTicketToDesert</samp></li>
<li>renamed <samp>BoatTunnel_BuyTicket</samp> to <samp>BuyTicket</samp></li>
<li>updated how Professor Snail's name is translated, removed unused entries</li>
<li>fixed typos</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Strings/NPCNames</samp>
</td>
<td> 
<ul><li>added new entries</li>
<li>removed unused entry</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Notes</samp>
</td>
<td> 
<ul><li>trimmed trailing whitespace</li></ul>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/Objects</samp>
</td>
<td> 
<ul><li>added new entries</li>
<li>removed unused entries</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/schedules/Caroline</samp>
</td>
<td> 
<ul><li>fixed typo</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Strings/SpecialOrderStrings</samp>
</td>
<td> 
<ul><li>renamed <i>Dust Spirits</i> to <i>Dust Sprites</i></li>
<li>fixed typos</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Strings/StringsFromCSFiles</samp>
</td>
<td> 
<ul><li>added new entries</li>
<li>removed unused entries</li>
<li>reworked <samp>FarmComputer_*</samp> translations</li>
<li>merged some gendered translations</li>
<li>merged <samp>ItemDeliveryQuest.cs.13533</samp> into <samp>ItemDeliveryQuest.cs.13534</samp>–<samp>13536</samp></li>
<li>changed some player names from <samp>{0}</samp> to <samp>@</samp></li>
<li>fixed typo</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Strings/StringsFromMaps</samp>
</td>
<td> 
<ul><li>fixed typos</li>
<li>removed unused entries</li></ul>
</td>
<td>✘ will remove changes
</td>
<td>
</td></tr>
<tr>
<td><samp>Strings/UI</samp>
</td>
<td> 
<ul><li>added new entries</li>
<li>added placeholder for cabin count in <samp>Character_CoopHelpString</samp></li>
<li>fixed typos</li>
<li>removed unused entries</li></ul>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="Removed_unused_assets">Removed unused assets</span></h4>
<p>Stardew Valley 1.6 deletes assets which weren't used by the game. Mods usually aren't affected by this.
</p><p>Removed assets:
</p>
<ul><li><samp>Characters/Dana</samp></li>
<li><samp>Characters/Dick</samp></li>
<li><samp>Characters/femaleRival</samp></li>
<li><samp>Characters/maleRival</samp></li>
<li><samp>Characters/shirts</samp></li>
<li><samp>Characters/WeddingOutfits</samp></li>
<li><samp>Data/TV/InterviewShow</samp></li>
<li><samp>Effects/BrightWhite</samp></li>
<li><samp>Fonts/tinyFontBorder</samp></li>
<li><samp>Maps/Cabin</samp></li>
<li><samp>Maps/Cabin1</samp></li>
<li><samp>Maps/Cabin1_marriage</samp></li>
<li><samp>Maps/Cabin2</samp></li>
<li><samp>Maps/Cabin2_marriage</samp></li>
<li><samp>Maps/Island_Boulder_Removed</samp></li>
<li><samp>Maps/qiNutRoom_tilesheet_0</samp></li>
<li><samp>Maps/spring_outrdoorsTileSheet_lightergrass</samp></li>
<li><samp>Portraits/Dobson</samp></li>
<li><samp>TerrainFeatures/DiggableWall_basic</samp></li>
<li><samp>TerrainFeatures/DiggableWall_basic_dark</samp></li>
<li><samp>TerrainFeatures/DiggableWall_frost</samp></li>
<li><samp>TerrainFeatures/DiggableWall_frost_dark</samp></li>
<li><samp>TerrainFeatures/DiggableWall_lava</samp></li>
<li><samp>TerrainFeatures/DiggableWall_lava_dark</samp></li>
<li><samp>TerrainFeatures/Quartz</samp></li></ul>
<h2><span class="mw-headline" id="Vanilla_release_notes">Vanilla release notes</span></h2>
<p><i>Moved to <a href="../../external.html?link=https://stardewvalleywiki.com/Version_History#1.6" title="Version History">Version History#1.6</a>.</i>
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a href="../../external.html?link=https://stardewvalleywiki.com/User:Pathoschild/Modding_wishlist/Completed#Done_in_Stardew_Valley_1.6" title="User:Pathoschild/Modding wishlist/Completed">Modding wishlist items done in Stardew Valley 1.6</a> lists a few specialized changes not mentioned on this page.</li></ul></li></ul>




</section></div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;oldid=172219">https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;oldid=172219</a>"</div>
</div>
			<div class="post-content" id="page-secondary-actions">
			
			</div>
		</main>
		<footer class="mw-footer minerva-footer">
		<div class="last-modified-bar">
	<div class="post-content last-modified-bar__content">
		<span class="last-modified-bar__icon mw-ui-icon mw-ui-icon-mw-ui-icon-small mw-ui-icon-wikimedia-history-base20 "></span>
		<a class="last-modified-bar__text modified-enhancement" href="../../external.html?link=https://stardewvalleywiki.com/Special:History/Modding:Migrate_to_Stardew_Valley_1.6"
				data-user-name="BarleyZP"
				data-user-gender="unknown"
				data-timestamp="1717730936">
				<span>Last edited on 7 June 2024, at 03:28</span>
		</a>
		<span class="mw-ui-icon mw-ui-icon-small mw-ui-icon-mf-expand-gray mf-mw-ui-icon-rotate-anti-clockwise indicator"></span>
	</div>
</div>

		<div class="post-content footer-content">
			
			<h2>Stardew Valley Wiki</h2>
			<div class="license">Content is available under <a class="external" rel="nofollow" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</div>
			<ul class="footer-info hlist hlist-separated">
				<li id="footer-info-lastmod"> This page was last edited on 7 June 2024, at 03:28.</li><li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</li>
			</ul>
			<ul class="footer-places hlist hlist-separated">
				<li id="footer-places-privacy"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:Privacy_policy" title="Stardew Valley Wiki:Privacy policy">Privacy policy</a></li><li id="footer-places-about"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:About" title="Stardew Valley Wiki:About">About Stardew Valley Wiki</a></li><li id="footer-places-disclaimer"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:General_disclaimer" title="Stardew Valley Wiki:General disclaimer">Disclaimers</a></li><li id="footer-places-desktop-toggle"><a id="mw-mf-display-toggle" href="../../external.html?link=http://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.6&amp;oldid=172219&amp;mobileaction=toggle_view_desktop">Desktop</a></li>
			</ul>
		</div>
		</footer>
	</div>
</div>
<div class="mw-notification-area" data-mw="interface"></div>
<!-- v:8.3.0 -->

<script src="../../external.html?link=https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.536","walltime":"0.559","ppvisitednodes":{"value":8332,"limit":1000000},"postexpandincludesize":{"value":45395,"limit":2097152},"templateargumentsize":{"value":7655,"limit":2097152},"expansiondepth":{"value":6,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":141099,"limit":5000000},"timingprofile":["100.00%  104.498      1 -total"," 24.27%   25.359    156 Template:T","  9.34%    9.765     59 Template:O","  9.00%    9.402     68 Modding:Migrate_to_Stardew_Valley_1.6/doc_status","  6.92%    7.235      1 Template:TOC","  2.90%    3.026      6 Template:Price","  2.03%    2.120      2 Template:Nexus_mod","  1.72%    1.800      3 Template:Collapse","  1.42%    1.481      9 Template:Content_Patcher_version","  1.32%    1.380      1 Template:Github"]},"cachereport":{"timestamp":"20240607033253","ttl":86400,"transientcontent":false}}});});</script>
<script>(window.NORLQ=window.NORLQ||[]).push(function(){var ns,i,p,img;ns=document.getElementsByTagName('noscript');for(i=0;i<ns.length;i++){p=ns[i].nextSibling;if(p&&p.className&&p.className.indexOf('lazy-image-placeholder')>-1){img=document.createElement('img');img.setAttribute('src',p.getAttribute('data-src'));img.setAttribute('width',p.getAttribute('data-width'));img.setAttribute('height',p.getAttribute('data-height'));img.setAttribute('alt',p.getAttribute('data-alt'));p.parentNode.replaceChild(img,p);}}});</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":127});});</script>		</body>
		

</html>
