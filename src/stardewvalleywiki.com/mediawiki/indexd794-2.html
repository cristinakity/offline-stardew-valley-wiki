<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">


<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>View source for Modding:Maps - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!0,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"8ed0b3d854ef88415bf9eef8","wgCSPNonce":!1,"wgCanonicalNamespace":"Modding","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":570,"wgPageName":"Modding:Maps","wgTitle":"Maps","wgCurRevisionId":171739,"wgRevisionId":0,"wgArticleId":7384,"wgIsArticle":!1,"wgIsRedirect":!1,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Modding:Maps","wgRelevantArticleId":7384,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgMFMode":"stable","wgMFAmc":!1,"wgMFAmcOutreachActive":!1,"wgMFAmcOutreachUserEligible":!1,
"wgMFLazyLoadImages":!0,"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,"watchlist":!1,"tagline":!1},"wgMFIsPageContentModelEditable":!0,"wgCargoMapClusteringMinimum":80,"wgCargoMonthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"wgCargoMonthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgCargoWeekDays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"wgCargoWeekDaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"wgMinervaPermissions":{"watch":!0,"talk":!1},"wgMinervaFeatures":{"beta":!1,"donate":!0,"mobileOptionsLink":!0,"categories":!1,"pageIssues":!0,"talkAtTop":!1,"historyInPageActions":!1,"overflowSubmenu":!1,"tabsOnSpecials":!1,"personalMenu":!1,"mainMenuExpanded":!1,"simplifiedTalk":!0},"wgMinervaDownloadNamespaces":[0]};RLSTATE={"site.styles":"ready","noscript":"ready",
"user.styles":"ready","user":"ready","user.options":"loading","mediawiki.ui.input":"ready","mediawiki.ui.checkbox":"ready","skins.minerva.base.styles":"ready","skins.minerva.content.styles":"ready","skins.minerva.content.styles.images":"ready","mediawiki.hlist":"ready","mediawiki.ui.icon":"ready","mediawiki.ui.button":"ready","skins.minerva.icons.wikimedia":"ready","skins.minerva.mainMenu.icons":"ready","skins.minerva.mainMenu.styles":"ready","mobile.init.styles":"ready","mobile.messageBox.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","skins.minerva.options","skins.minerva.scripts","mobile.init"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="loadb780.css?lang=en&amp;modules=mediawiki.hlist%7Cmediawiki.ui.button%2Ccheckbox%2Cicon%2Cinput%7Cmobile.init.styles%7Cmobile.messageBox.styles%7Cskins.minerva.base.styles%7Cskins.minerva.content.styles%7Cskins.minerva.content.styles.images%7Cskins.minerva.icons.wikimedia%7Cskins.minerva.mainMenu.icons%2Cstyles&amp;only=styles&amp;skin=minerva"/>
<script async="" src="loadc82b.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=minerva&amp;target=mobile"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load1154.css?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=minerva"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="description" content="You do not have permission to edit this page, for the following reason:"/>
<meta name="theme-color" content="#eaecf0"/>
<meta name="viewport" content="initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0, width=device-width"/>
<link rel="manifest" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/api.php?action=webapp-manifest"/>
<link rel="shortcut icon" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="../../external.html?link=http://stardewvalleywiki.com/mediawiki/api.php?action=rsd"/>
<link rel="license" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/"/>
<meta property="og:title" content="View source for Modding:Maps - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://stardewvalleywiki.com/Modding:Maps"/>
<meta property="og:description" content="← Index"/>
<meta property="og:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="article:modified_time" content="2024-05-27T18:29:11Z"/>
<meta property="article:published_time" content="2024-05-27T18:29:11Z"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="View source for Modding:Maps - Stardew Valley Wiki"/>
<meta property="twitter:description" content="← Index"/>
<meta property="twitter:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"View source for Modding:Maps - Stardew Valley Wiki","headline":"View source for Modding:Maps - Stardew Valley Wiki","mainEntityOfPage":"View source for Modding:Maps","identifier":"https:\/\/stardewvalleywiki.com\/Modding:Maps","url":"https:\/\/stardewvalleywiki.com\/Modding:Maps","description":"\u2190 Index","dateModified":"2024-05-27T18:29:11Z","datePublished":"2024-05-27T18:29:11Z","image":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-570 ns-subject page-Modding_Maps rootpage-Modding_Maps stable skin-minerva action-edit skin-vector-legacy">
<div id="mw-mf-viewport">
	<div id="mw-mf-page-center">
		<a class="mw-mf-page-center__mask" href="#"></a>
		<header class="header-container header-chrome">
			<form class="header" action="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php" method="get">
				<nav class="navigation-drawer toggle-list view-border-box">
					<input type="checkbox" id="main-menu-input" class="toggle-list__checkbox" role="button" aria-labelledby="mw-mf-main-menu-button">
					<label for="main-menu-input" id="mw-mf-main-menu-button"
						class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-menu-base20 mw-ui-icon-flush-left toggle-list__toggle"
						title="Open main menu" data-event-name="ui.mainmenu">Open main menu</label>
					<div id="mw-mf-page-left" class="menu toggle-list__list view-border-box">
	<ul id="p-navigation">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-home" data-event-name="menu.home"><span>Home</span></a>
			</li>
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Special:Random#/random" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-die " data-event-name="menu.random"><span>Random</span></a>
			</li>
	</ul>
	<ul id="p-personal">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Modding%3AMaps&amp;returntoquery=action%3Dedit" class="menu__item--login mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-logIn " data-event-name="menu.login"><span>Log in</span></a>
			</li>
	</ul>
	<ul id="pt-preferences">
			<li class="jsonly">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Special:MobileOptions&amp;returnto=Modding%3AMaps" class="menu__item--settings mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-settings " data-event-name="menu.settings"><span>Settings</span></a>
			</li>
	</ul>
	<ul class="hlist">
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:About" class="" data-event-name=""><span>About Stardew Valley Wiki</span></a>
			</li>
			<li class="">
			    <a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:General_disclaimer" class="" data-event-name=""><span>Disclaimers</span></a>
			</li>
	</ul>
</div>

					<label class="main-menu-mask" for="main-menu-input"></label>
				</nav>
				<div class="branding-box">
					<a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki">
						<span>Stardew Valley Wiki</span>
						
					</a>
				</div>
				<div class="search-box">
					<input class="search mw-ui-background-icon-search skin-minerva-search-trigger" type="search" name="search" id="searchInput"
						autocomplete="off" placeholder="Search Stardew Valley Wiki" aria-label="Search Stardew Valley Wiki"
						value="">
				</div>
				<nav class="minerva-user-navigation" aria-label="User navigation">
					<div><button id="searchIcon" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-search-base20 skin-minerva-search-trigger" type="submit">Search</button></div>
					
				</nav>
			</form>
		</header>
		<main id="content" class="mw-body">
			<div class="banner-container">
			<div id="siteNotice"></div>
			</div>
			
			<div class="pre-content heading-holder">
				<div class="page-heading">
					<h1 id="section_0">View source for Modding:Maps</h1>
					<div class="tagline"></div>
				</div>
				
				
				
				<div class="minerva__subtitle">← <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">Modding:Maps</a></div>
			</div>
			
			<div id="bodyContent" class="content"><div id="mw-content-text"><script>function mfTempOpenSection(id){var block=document.getElementById("mf-section-"+id);block.className+=" open-block";block.previousSibling.className+=" open-block";}</script><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in the group: <a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Stardew_Valley_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Stardew Valley Wiki:Users (page does not exist)">Users</a>.
</p>
</div><hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" class="mw-editfont-monospace mw-ui-input" lang="en" dir="ltr" name="wpTextbox1">← [[Modding:Index|Index]]

This page explains how to edit maps. This is an advanced guide for modders.

{{TOC|limit=3}}

==Intro==
===Basic concepts===
&lt;ul>
&lt;li>A '''map''' is the layout of the terrain (like water, cliffs, and land), terrain features (like bushes), buildings, paths, and triggers for a particular area. When you reach the edge of an area or enter a building, and the screen fades to black during the transition, you're moving between maps.&lt;/li>

&lt;li>Each map consists of several '''layers''' stacked one in front of the other. Objects in a layer closer to the front will hide objects in layers behind them. From back to front, the standard layers are...

{| class="wikitable"
|-
! layer name
! typical contents
|-
| Back
| Terrain, water, and basic features (like permanent paths).
|-
| Buildings
| Placeholders for buildings (like the farmhouse). Any tiles placed on this layer will act like a wall unless the tile property has a "Passable" "T".
|-
| Paths
| Flooring, paths, grass, and debris (like stones, weeds, and stumps from the 'paths' tilesheet) which can be removed by the player.
|-
| Front
| Objects that are drawn on top of things behind them, like most trees. These objects will be drawn on top of the player if the player is North of them but behind the player if the player is south of them.
|-
| AlwaysFront
| Objects that are always drawn on top of other layers as well as the player. This is typically used for foreground effects like foliage cover.
|}&lt;/li>

[[File:MapLayers.png]]
&lt;li>(Using Tiled) There are 2 different types of layers along with the 5 main layers, Objects Layer (cloud-like icon) and Tile Layer (grid icon). The Tile Layer is where you make map edits (placing and removing tiles) and the Objects Layers is where you add and edit tile data. Your layers must match the ones above. Note that depending on the map, they may be missing a Paths or AlwaysFront layer&lt;/li>

&lt;li>Each layer consists of many '''tiles''', which are 16×16 pixel squares placed in a grid to form the visible map. Each tile can have properties (''e.g.,'' passable / blocked), special logic (''e.g.,'' an action to perform when the player steps on them), and a picture to show. The picture is represented by a sprite index (or tile index), which is its position in an associated spritesheet (see next).&lt;/li>

&lt;li>Each map has one or more spritesheets (also known as tilesheets when talking about mods), which contains the available tiles and images that are put together to form the visible map.&lt;/li>
&lt;/ul>

===Tile coordinates===
Each tile has an (x, y) coordinate which represents its position on the map, where (0, 0) is the top-left tile. The ''x'' value increases towards the right, and ''y'' increases downwards. For example:

[[File:Modding - creating an XNB mod - tile coordinates.png]]

You can use the {{Nexus mod|679|Debug Mode}} mod to see tile coordinates in-game.

===Map formats===
There are two map formats used in Stardew Valley modding: &lt;samp>.tmx&lt;/samp> (from the Tiled map editor) and &lt;samp>.tbin&lt;/samp> (from the now-deprecated tIDE map editor). The features supported by both formats are almost identical, but there are a few differences:
{| class="wikitable"
|-
! feature
! &lt;samp>.tmx&lt;/samp>
! &lt;samp>.tbin&lt;/samp>
|-
| format
| ✓ XML (basically text)
| ✘ binary
|-
| edit in Tiled
| ✓ supported
| ✓ supported with plugin
|-
| edit directly
| ✓ can open in a text editor
| ✘ not supported
|-
| tile flip
| ✓ supported
| ✘ not supported
|-
| tile rotation
| ✓ supported
| ✘ not supported
|-
| source control
| ✓ efficient storage, can diff changes
| ✘ inefficient storage (need to copy entire file with each commit), can't diff changes
|}

&lt;samp>.tmx&lt;/samp> is recommended per the above, but both formats are fine to use, and you can convert between them in Tiled by clicking ''File > Export As''.

===Tilesets vs Tilesheets===

&lt;samp>Tilesheets&lt;/samp> are the &lt;samp>.png&lt;/samp> files used as source images. Tilesheets have no animation, properties, terrains, or anything else but pixels associated with them -- they're just images. &lt;samp>Tilesets&lt;/samp> are Tiled's XML files that contain all the information about how the map uses the source image. They are confusingly named and often used interchangeably.

==Getting started==
There are two main ways to edit a map.

===Using SMAPI===
Creating a SMAPI mod requires programming, but it's much more powerful and multiple SMAPI mods can edit the same map. If you want to use this approach:
# [[Modding:Modder Guide/Get Started|Create a SMAPI mod]].
# See ''[[#Making changes with SMAPI|Making changes with SMAPI]]'' below.

The rest of this guide assumes you're using Tiled, but many of the concepts are transferrable and you can use both Tiled and SMAPI (''e.g.,'' create/edit maps in Tiled and load/edit them in SMAPI).

===Using Tiled===
Tiled is a popular map editor that can be used to edit Stardew Valley maps, no programming needed. You need to [[Modding:Editing XNB files|unpack the map's XNB]], edit the map, and make a {{nexus mod|1915|Content Patcher}} or SMAPI mod to load your map. If you want to use this approach:

&lt;ol>
&lt;li>Install the [http://www.mapeditor.org/ latest version of Tiled].&lt;/li>
&lt;li>Once installed, at the top left, go to Edit > Preferences > Plugins and enable the tbin plugin (&lt;samp>tbin.dll&lt;/samp> on Windows, &lt;samp>libtbin.so&lt;/samp> on Linux, or &lt;samp>libtbin.dylib&lt;/samp> on Mac).
&lt;li>Set the following settings:
{| class="wikitable"
|-
! setting
! value
! reason
|-
| ''View > Snapping > Snap to Grid''
| ✓ enabled
| This is required to convert objects back into the game's format.
|-
| ''View > Highlight Current Layer''
| ✓ enabled
| This makes it more clear which tile you're editing.
|}&lt;/li>
&lt;li>See [[Modding:Editing XNB files]] for help unpacking &amp; packing the map files.&lt;/li>
&lt;li>See instructions below for map changes.&lt;/li>
&lt;/ol>

(If you use xnbcli to [[Modding:Editing XNB files#Unpack game files|unpack the original game maps]], you'll need the &lt;samp>.tbin&lt;/samp> plugin even if you plan to use &lt;samp>.tmx&lt;/samp> since xnbcli still produces &lt;samp>.tbin&lt;/samp> files.)

==Map edits==
===Editing maps===
Important note: when making custom maps, always start with a vanilla map and edit it. Don't try to create a new map in Tiled; the game needs certain tiles, map properties, etc to be present. Also note that when making a map edit or adding a custom map, sizes bigger than 155 for height and 199 for width will break the layering.

# [[Modding:Editing XNB files|Unpack]] the game's &lt;samp>Content/Maps&lt;/samp> folder and create a copy to edit your maps in.  Use this copy of the folder to edit any maps in before moving them to your mod release folder.
# Use the same method to unpack the map you want to edit if it is not a vanilla one, then place the map in your editing folder.
# Open the &lt;samp>.tbin&lt;/samp> or &lt;samp>.tmx&lt;/samp> file via Tiled. Note: make sure the file is in the same folder as the unpacked tilesheets!
# Make your changes.
# Save the file. Don't use &lt;samp>Save as&lt;/samp> to change folders, as your tilesheet paths will be wrong.
# Move the &lt;samp>.tbin&lt;/samp> or &lt;samp>.tmx&lt;/samp> file, and any custom tilesheets it needs, to your mod release folder. Place them in the &lt;samp>assets&lt;/samp> folder.
# Load your map via SMAPI or Content Patcher (or another framework mod).

===Custom map===
You can add a new map and location to the game. The easiest option is to create the map using Tiled, then use [[Modding:Content Patcher|Content Patcher]] to [https://github.com/Pathoschild/StardewMods/blob/develop/ContentPatcher/docs/author-guide.md#custom-locations add the custom location to the game]. After loading your save, you can use this console command to jump to the map: &lt;code>debug warp YourLocationName X Y&lt;/code>.

Note that the map must be built in a certain pattern; look at the maps in the &lt;samp>Content/Maps&lt;/samp> folder for examples. It's often easier to start from an existing map and modify it, instead of starting from scratch.

{{note box|'''Using Content Patcher to add custom locations is strongly recommended.'''&lt;br />You can add new locations in C# yourself, but be aware of factors like object persistence and NPC pathfinding that are easy to get wrong. If you ''really'' want to do it yourself, use the [[Modding:Modder Guide/APIs/Events#Specialised.LoadStageChanged|specialized &lt;samp>LoadStageChanged&lt;/samp> event]] to add the location to &lt;samp>Game1.locations&lt;/samp> during the &lt;samp>CreatedInitialLocations&lt;/samp> and &lt;samp>SaveAddedLocations&lt;/samp> stage.}}

===Adding tilesets===
You can add new sprites, tiles, or images to a map, from both custom and vanilla sources. If you're editing a vanilla map, make sure to [[#Tilesheet order|prefix custom tileset names with &lt;code>z_&lt;/code>]] to avoid shifting the vanilla tilesheet indexes.

# Open the map that you created or are editing.
# Click &lt;samp>Map&lt;/samp> then ''Add External Tileset...'' in the top menu, and open a &lt;samp>.tsx&lt;/samp> file you have in the same folder.
# You should have a new copy of the tileset in your map, with any saved animations, properties, or terrains still intact.

====Re-using vanilla tilesets====
If you want to use a tilesheet like &lt;samp>spring_outdoorsTileSheet.png&lt;/samp> in your map, adding a new tileset from a &lt;samp>.png&lt;/samp> file means you need to re-animate any animated tiles, and re-add properties like diggable. (You'll also lose any terrain types that had been created for that set.) You can avoid this by first exporting them from an existing map, then using external tilesets, instead.

# Open an existing map that already has the properties and animations you want.
# In the tileset pane, click the wrench to ''Edit Tileset''. It should open a new edit tab.
# In the new window that opens, click ''File'', then ''Export as...'' and save it as a .tsx file.
# Close the tileset editor.

====Replace existing tileset====

If you are already using a tilesheet image, you can replace its tileset.
# Open the map that you created or are editing.
# In the tileset pane on the right, click the tab for your existing version.
# Under that, click the ''Replace Tileset'' button.
# Choose the &lt;samp>.tsx&lt;/samp> file you saved, and click Open.

====Adding a new custom tilesheet====
If you made a your own tilesheet and are adding it to a map the first time, you can create a new tileset from image.

# Create your spritesheet and place it in the same folder as your &lt;samp>.tbin&lt;/samp> or &lt;samp>.tmx&lt;/samp> map file. This should be a PNG image with images divided into 16x16 tiles (see [[Modding:Editing XNB files#Intro]] for examples).
# Open the map in Tiled.
# Add the custom spritesheet:
## In the ''Tilesets'' pane, click the [[File:Modding - creating an XNB mod - Tiled 'new tilesheet' button.png]] button.
## Give it a descriptive name (like 'zcute bugs') and choose the image source.
## Make sure that ''Embed in map'' is checked.
## Keep the defaults for the other settings and click ''OK''.


===Painting tiles onto your map===

# In the ''Layers'' pane, click the layer you want to edit.
# At the top left of Tiled's toolbar, click the Stamp Brush.
# In the ''Tilesets'' pane, click the tab for the tileset you want to use.
# In the ''Tilesets'' pane, click one tile to select it. To choose multiple, click and drag the cursor.
# Move the cursor to the map, and you'll see an overlay with the tiles you selected.
# Click the map to place those tiles on the selected layer.

===Map properties===
Each map can have multiple map properties, which define attributes and behaviour associated with the map like lighting, music, warp points, etc. Each property has a name (which defines the type of property), type (always 'string' in Stardew Valley), and value (which configures the property). See [[#Known_map_properties|known properties]] below.

In Tiled:
# Click ''Map'' on the toolbar and choose ''Map Properties''.
# View and edit properties using the GUI.

===Tile properties===
Tile properties are set on individual map tiles. They can change game behaviour (like whether the player can cross them), or perform actions when the player steps on or clicks the tile. Each property has a name, type (always 'string' in Stardew Valley), and value. In Tiled these are represented by two types: ''object properties'' only apply to the selected tile, while ''tile properties'' apply to every instance of that tile. In general you'll always set ''object properties'', so we'll only cover those.

Note that tile properties need to have a tile associated with them; if there is no tile, they'll simply not be applied.

To view tile properties:
# Select the object layer in the ''Layers'' pane.
# Choose the [[File:Modding - creating an XNB mod - Tiled 'select object' button.png]] ''select object'' tool in the toolbar.
# Click the object whose properties you want to view. Objects are represented with a gray selection box on the map:&lt;br />[[File:Modding - creating an XNB mod - map object.png]]
# The object properties will be shown in the ''Properties'' pane.&lt;br />[[File:Modding - creating an XNB mod - Tiled tile properties pane.png]] 

To edit properties for an existing object:
* Change a value: click the value field and enter the new value.
* Change a name: select the property and click the [[File:Modding - creating an XNB mod - Tiled 'edit' button.png]] icon.
* Add a property: click the [[File:Modding - creating an XNB mod - Tiled 'add' button.png]] icon, enter the property name, make sure the selected type is "string", and click OK.

To add a new object:
# Select the object layer in the ''Layers'' pane.&lt;br />''There should be one object layer for each tile layer. If the object layer is missing, create one with the same name as the right tile layer.''
# Choose the [[File:Modding - creating an XNB mod - Tiled 'insert rectangle' button.png]] ''insert rectangle'' tool from the toolbar.
# Click and drag the rectangle over the tile you want to edit . Make sure it snaps to the tile grid (see [[#Using Tiled]]), and only one tile is selected.
# Change its Name field to &lt;samp>TileData&lt;/samp>.
# See previous for how to edit its properties.

===Tiles===
You can edit the tiles for an existing map. See the [http://doc.mapeditor.org Tiled documentation] for more info.

===Tile animation===
[[File:Modding - creating an XNB mod - example animation.gif|right]]
You can animate tiles to create effects like Gil in his rocking chair (see example at right).

In Tiled:
:# Click the edit button (wrench icon) for the tilesheet in the ''Tilesets'' pane.
:# Select the tile you want to animate in the new view.
:# Click ''Tileset > Tile Animation Editor'' in the toolbar to show that window.
:# In the new window, drag tiles from the tilesheet into the box on the left to create a ''frame'' (one image in the sequence). If you need to delete frames, select the frame(s) and press Backspace/Delete(Windows) or fn + Backspace(Apple)
:# Double-click the numbers to change how long each frame stays on the screen before the next one (in milliseconds). '''Make sure every frame has the same time; the game can't handle variable frame times.''' For example, here's the animation editor showing one of the tiles of Gil rocking:&lt;br />[[File:Modding - creating an XNB mod - Tiled example animation pane.gif]]
:# When you're done, close the pane.
:# The animated tiles in the ''Tilesets'' pane will now have a little symbol in the bottom-right corner:&lt;br />[[File:Modding - creating an XNB mod - Tiled example animation tileset.png]]&lt;br />The animation is now part of that tile. Every instance of that tile on the map will now have the same animation.

===Tile flip/rotation===
[[File:Tiled tile rotation.png|thumb|An example tile rotated four ways, below the Tiled flip/rotate buttons.]]

You can rotate and flip tiles without needing to create rotated/flipped versions of the tilesheet. This needs SMAPI 3.4 or later to be installed; the base game doesn't recognize tile transforms.

In Tiled:
:# With the stamp tool selected, click the tile in the tilesheet you want to use.
:# Click the flip or rotate buttons (see image at right).
:# Click the map to place the flipped/rotated tile.

{{note box|'''This only works with &lt;samp>.tmx&lt;/samp> map files.'''&lt;br /> Tile transforms aren't supported by the &lt;samp>.tbin&lt;/samp> plugin. See [[#Map formats|''map formats'']] for more info.}}

==Advanced edits==
===Sitting on non-furniture chairs===
Players can sit on chairs that are part of the map. This works by checking the tile on the &lt;samp>Buildings&lt;/samp> layer, and comparing its tilesheet and tilesheet index to the data in &lt;samp>Data\ChairTiles&lt;/samp>.

Each entry has a key in the form &lt;code>sheet filename/tile X/tile Y&lt;/code>:
{| class="wikitable"
|-
! field
! description
|-
| sheet filename
| The ''file name'' of the tilesheet, without the file extension. For example, for a tilesheet loaded from &lt;code>assets/some-tilesheet.png&lt;/code>, this should be &lt;code>some-tilesheet&lt;/code>.
|-
| tile X&lt;br />tile Y
| The tile's X and Y position in the map tilesheet, starting at zero.
|}

And a value in the form &lt;code>width in tiles/height in tiles/direction/type/draw tile X/draw tile Y/is seasonal/alternate tilesheet&lt;/code>:
{| class="wikitable"
|-
! field
! description
|-
| width in tiles&lt;br />height in tiles
| The size of the seat in tiles. For example, a width of 2 lets the player sit on the next tile to the right of it too.
|-
| direction
| The direction the player should face when sitting. The possible values are &lt;samp>down&lt;/samp>, &lt;samp>left&lt;/samp>, &lt;samp>right&lt;/samp>, &lt;samp>up&lt;/samp>, or &lt;samp>opposite&lt;/samp>. Any other value defaults to &lt;samp>up&lt;/samp>.
|-
| type
| Either:
* An arbitrary seat code (like &lt;samp>playground&lt;/samp> or &lt;samp>ccdesk&lt;/samp>), which affects hardcoded game logic for specific seats in the game. You can specify an invalid value like &lt;samp>default&lt;/samp> to ignore this.
* ''Or'' &lt;samp>custom {{t|offset_x}} {{t|offset_y}} {{t|extra_height}}&lt;/samp> to override the hardcoded offset and height values. The three values are measured in tiles (''e.g.,'' an X offset value of 0.5 would shift the sitting location by half a tile).
|-
| draw tile X&lt;br />draw tile Y
| The X and Y position in &lt;samp>TileSheets\ChairTiles&lt;/samp> (or the custom tilesheet) to draw when the player is sitting, starting at 0. If the width and/or height are more than 1, this is the position of the top-left tile.
|-
| is seasonal
| Whether to draw seasonal variants when sitting. If enabled, the {{t|draw tile X}} and {{t|draw tile Y}} are offset by one width for each season. In other words, the spring/summer/fall/winter sprites should appear in the draw tilesheet directly adjacent, moving rightward in that order.
|-
| alternate tilesheet
| ''(Optional)'' The asset name for the tilesheet from which to get the draw tiles, using &lt;samp>\\&lt;/samp> (two backslashes) as the path separator. The default value is &lt;samp>TileSheets\\ChairTiles&lt;/samp>.
|}

==Known map properties==
¹
====Building construction====
{| class="wikitable"
|-
! property
! explanation
|-
| &lt;samp>CanBuildHere T&lt;/samp>&lt;br />''(valid in any outdoor location)''
| Whether to allow constructing buildings in this location. The game will adjust automatically to account for it (e.g. Robin will let you choose where to build).
|-
| &lt;samp>BuildConditions {{t|query}}&lt;/samp>&lt;br />''(valid in any outdoor location)''
| If &lt;samp>CanBuildHere&lt;/samp> is set, an optional [[Modding:Game state queries|game state query]] which indicates whether building is allowed currently.
|-
| &lt;samp>LooserBuildRestrictions T&lt;/samp>&lt;br />''(valid in any outdoor location)''
| If set, tiles don't need to be marked &lt;samp>Buildable T&lt;/samp> or &lt;samp>Diggable T&lt;/samp> in their properties. Tiles can be blocked with &lt;samp>Buildable F&lt;/samp> instead. The other restrictions still apply.
|-
| &lt;samp>ValidBuildRect {{t|x}} {{t|y}} {{t|width}} {{t|height}}&lt;/samp>&lt;br />''(valid in any outdoor location)''
| The tile area within the map where buildings may be placed. If omitted, buildings may be placed in any open space in the map.
|}

====Crops====
{| class="wikitable"
|-
! property
! explanation
|-
| &lt;samp>AllowGiantCrops T&lt;/samp>
| If set with any non-blank value, [[Crops#Giant Crops|giant crops]] can grow in this location (if crops are also allowed per the [[Modding:Migrate to Stardew Valley 1.6#Custom crops|crop data]] or [[Modding:Migrate to Stardew Valley 1.6#Custom location contexts|&lt;samp>PlantableLocations&lt;/samp> context field]]).
|-
| &lt;samp>DirtDecayChance {{t|chance}}&lt;/samp>
| The probability that each dirt tile will disappear overnight if it doesn't contain a crop, as a value between 0 (never) and 1 (always). Defaults to 0 (greenhouses), 0.1 (farms), and 1 (anywhere else).
|}

===Plants, forage, &amp; item spawning===
{| class="wikitable"
|-
! property
! explanation
|-
| &lt;samp>AllowGrassGrowInWinter T&lt;/samp>²&lt;br />''(valid in any location)''
| Allows [[grass]] to spread in winter.
|-
| &lt;samp>AllowGrassSurviveInWinter T&lt;/samp>²&lt;br />''(valid in any location)''
| Allows [[grass]] that's alive on the last day of fall to survive through to winter.
|-
| &lt;samp>EnableGrassSpread T&lt;/samp>²&lt;br />''(valid in any location)''
| Gives [[grass]] in the location a chance to spread each day.
|-
| &lt;samp>Fall_Objects T&lt;/samp>²&lt;br />&lt;samp>Spring_Objects T&lt;/samp>²&lt;br />&lt;samp>Summer_Objects T&lt;/samp>²&lt;br />&lt;samp>Winter_Objects T&lt;/samp>²
| Whether to spawn seasonal objects on spawnable tiles based on the data in &lt;samp>Data\Locations.xnb&lt;/samp>.&lt;br />''Example: &lt;samp>Fall_Objects&lt;/samp>.''
|-
| &lt;samp>Feed {{t|int x}} {{t|int y}}&lt;/samp>&lt;br />''(valid in coops and barns)''
| &lt;s>Sets the spawn location of the [[Hay Hopper]] in a coop or barn.&lt;br />''Example: &lt;samp>Feed 3 2&lt;/samp>.''&lt;/s>&lt;br />The Feed map property has been deprecated with 1.6. The FeedHopper is now being defined in Data/Buildings as a IndoorItems entry "(BC)99"
|-
| &lt;samp>ForceAllowTreePlanting T&lt;/samp>²&lt;br />''(valid in any location)''
| Allows planting trees (both wild and fruit) in this location, even if it normally wouldn't be allowed.
|-
| &lt;samp>ForceSpawnForageables T&lt;/samp>²&lt;br />''(valid in indoor locations)''
| Enables forage items spawning in that location.
|-
| &lt;samp>skipWeedGrowth T&lt;/samp>²&lt;br />''(valid in any location)''
| Prevents weeds from spawning and spreading in this location.
|-
| &lt;samp>SpawnBeachFarmForage T&lt;/samp>²&lt;br />''(valid in farm)''
| Randomly spawns beach forage and [[Supply Crate|supply crates]] on the farm (like the [[Farm Maps|vanilla beach farm]]). Forage and crates will only appear on tiles which have the &lt;samp>BeachSpawn T&lt;/samp> property on the &lt;samp>Back&lt;/samp> layer, are clear for placement, and don't have a tile on the &lt;samp>AlwaysFront&lt;/samp> layer.
|-
| &lt;samp>SpawnForestFarmForage T&lt;/samp>²&lt;br />''(valid in farm)''
| Randomly spawns forest forage on the farm (like the [[Farm Maps|vanilla forest farm]]). Forage will only spawn on tiles which have the &lt;samp>Type Grass&lt;/samp> tile property, are clear for placement, and don't have a tile on the &lt;samp>AlwaysFront&lt;/samp> layer.
|-
| &lt;samp>SpawnGrassFromPathsOnNewYear T&lt;/samp>²&lt;br />''(valid in any location)''
| Spawns grass on every tile with index 22 on the &lt;samp>Paths&lt;/samp> layer when a new year starts. See also &lt;samp>SpawnRandomGrassOnNewYear&lt;/samp>.
|-
| &lt;samp>SpawnDebrisOnNewMonth T&lt;/samp>&lt;br />&lt;samp>SpawnDebrisOnNewYear T&lt;/samp>²&lt;br />''(valid in any location)''
| Spawns weeds, stones, or twigs at random positions when a new month/year starts (subject to their usual spawn rules).
|-
| &lt;samp>SpawnMountainFarmOreRect {{t|tile X}} {{t|tile Y}} {{t|tile width}} {{t|tile height}}&lt;/samp>&lt;br />''(valid in farm)''
| The tile area on the farm map where ores should randomly spawn (like the [[Farm Maps|vanilla hilltop farm]]). Ores will only spawn on tiles which have the &lt;samp>Type Dirt&lt;/samp> tile property and are clear for object placement.
|-
| &lt;samp>SpawnRandomGrassOnNewYear T&lt;/samp>²&lt;br />''(valid in any location)''
| Spawns grass at random positions when a new year starts (subject to its usual spawn rules). See also &lt;samp>SpawnGrassFromPathsOnNewYear&lt;/samp>.
|-
| &lt;samp>Stumps [{{t|int x}} {{t|int y}} {{t|unused}}]+&lt;/samp>&lt;br />''(valid in any location)''
| Adds stumps to the Secret Woods map daily. The third field for each stump appears to be unused.&lt;br />''Example: &lt;samp>Stumps 24 6 3 29 7 3 26 10 3 46 6 3 34 26 3 41 26 3&lt;/samp>.''
|-
| &lt;samp>Treasure {{t|type}} {{t|int id}}&lt;/samp>&lt;br />''(valid in any location)''
| Adds buried treasure that the player can dig up. {{t|type}} can be any of the following: &lt;br />&lt;samp>Coins, Copper, Coal, Iron, Gold, Iridium, CaveCarrot, Arch, Object&lt;/samp>.&lt;br /> If set to &lt;samp>Arch&lt;/samp> or &lt;samp>Object&lt;/samp>, {{t|id}} may be used to specify the ID of the item that is buried.
|-
| &lt;samp>Trees [{{t|int x}} {{t|int y}} {{t|int type}}]+&lt;/samp>&lt;br />''(valid in any location)''
| Adds trees to the map. The {{t|x}} {{t|y}} fields are the tile coordinates, and {{t|type}} is the tree type (0: oak, 1: maple, 2: pine, 5: palm, 6: mushroom tree, 7: mahogany).&lt;br />''Example: &lt;samp>Trees 17 18 2 20 31 2&lt;/samp>.''
|}

===Warps &amp; map positions===
{| class="wikitable"
|-
! property
! explanation
|-
| &lt;samp>AllowWakeUpWithoutBed {{t|allow}}&lt;/samp>
| Whether the player can wake up in this location without a bed, similar to the island farmhouse. This is typically used with &lt;samp>PassOutLocations&lt;/samp> in [[Modding:Migrate to Stardew Valley 1.6#Custom location contexts|&lt;samp>Data/LocationContexts&lt;/samp>]].
|-
| &lt;samp>BackwoodsEntry [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| The position the player is warped to when entering the farm from the Backwoods.
|-
| &lt;samp>BusStopEntry [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| The position the player is warped to when entering the farm from the Bus Stop.
|-
| &lt;samp>DefaultWarpLocation {{t|x}} {{t|y}}&lt;/samp>&lt;br />''(valid in any location)''
| The default arrival tile, used when a player or NPC is added to the location without a target tile (e.g. using [[Modding:Console commands|debug commands]] like &lt;samp>debug warp&lt;/samp> or &lt;samp>debug eventbyid&lt;/samp>).
|-
| &lt;samp>EntryLocation {{t|tile X}} {{t|tile Y}}&lt;/samp>&lt;br />''(valid in farmhouse)''
| Sets the tile on which the player appears when they warp into the farmhouse.
|-
| &lt;samp>FarmCaveEntry [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| The position the player is warped to when entering the farm from the farm cave.
|-
| &lt;samp>FarmHouseEntry [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| Changes the position of the Farm House. Corresponds to the front door, or the position the player will be warped to when leaving the house.
|-
| &lt;samp>ForestEntry [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| The position the player is warped to when entering the farm from the Cindersap Forest.
|-
| &lt;samp>GrandpaShrineLocation [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| The position of grandpa's shrine. Corresponds to the upper left corner of note.
|-
| &lt;samp>GreenhouseLocation [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| The default position of the greenhouse. Corresponds to the upper left corner of the greenhouse's foundation.
|-
| &lt;samp>KitchenStandingLocation [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farmhouse)''
| The position the player's spouse will stand when using the kitchen.
|-
| &lt;samp>MailboxLocation [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| The position of the player's mailbox. Corresponds to the upper left corner.
|-
| &lt;samp>NPCWarp [{{t|int fromX}} {{t|int fromY}} {{t|string toArea}} {{t|int toX}} {{t|int toY}}]+&lt;/samp>&lt;br />''(valid in any location)''
| Equivalent to &lt;samp>Warp&lt;/samp>, but only usable by npcs.
|-
| &lt;samp>PetBowlLocation {{t|x}} {{t|y}}&lt;/samp>&lt;br />''(valid in the farm)''
| The default position of the pet bowl
|-
| &lt;samp>ShippingBinLocation [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| The position of the default shipping bin. Corresponds to the upper left corner.
|-
| &lt;samp>SpouseAreaLocation [{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| The position of the the 4x4 outdoor spouse area. Corresponds to the upper left corner.[[File:SpouseArea.png|upright=0.5|right|thumb]]
|-
| &lt;samp>SpouseRoomPosition {{t|x}} {{t|y}}&lt;/samp>&lt;br />''(valid in farmhouse)''
| The top-left position at which to place the [[Marriage#Spouse Rooms|spouse room]].
|-
| &lt;samp>TravelingCartPosition {{t|x}} {{t|y}}&lt;/samp>&lt;br />''(valid in the forest)''
| The top-left position at which to place the [[Traveling Cart]]. This is the top-left corner of the collision box, so the roof will extend two tiles above this tile.
|-
| &lt;samp>Warp [{{t|int fromX}} {{t|int fromY}} {{t|string toArea}} {{t|int toX}} {{t|int toY}}]+&lt;/samp>&lt;br />''(valid in any location)''
| Sets the tiles which warp the player to another map (''e.g.,'' doors). The {{t|fromX}} {{t|fromY}} fields are the tile coordinates that initiate the warp, and {{t|toArea}} {{t|toX}} {{t|toY}} are the name of the in-game location to warp to and the tile coordinates within it.&lt;br />''Example: 6 20 Mountain 76 9.''
|-
| &lt;samp>WarpTotemEntry[{{t|int x}} {{t|int y}}]&lt;/samp>&lt;br />''(valid in farm)''
| The position the player is warped to when teleporting to the farm via Warp Totem or Return Scepter.
|}

===Audio===
{| class="wikitable"
|-
! property
! explanation
|-
| &lt;samp>BrookSounds [{{t|int x}} {{t|int y}} {{t|int type}}]&lt;/samp>&lt;br />''(valid in outdoor locations)''
| Adds sound sources. The {{t|x}} {{t|y}} fields are the tile coordinates, and {{t|type}} is the ambient sound ID. The {{t|type}} of sound can be one of...
* &lt;samp>0&lt;/samp> (babblingBrook);
* &lt;samp>1&lt;/samp> (cracklingFire);
* &lt;samp>2&lt;/samp> (engine);
* &lt;samp>3&lt;/samp> (cricket).
|-
| &lt;samp>Music {{t|string name}}&lt;/samp>&lt;br />''(valid in any location)''
| Sets the music that plays when the player enters, where {{t|name}} is the cue name in the audio files.&lt;br />''Example: &lt;samp>Music MarlonsTheme&lt;/samp>.'' (Deprecated; use the music fields in [[Modding:Location data#Music|&lt;samp>Data/Locations&lt;/samp>]] instead. This property is only applied if the location has no music in &lt;samp>Data/Locations&lt;/samp>.)
|-
| &lt;samp>Music {{t|int start}} {{t|int end}} {{t|string name}}&lt;/samp>&lt;br />''(valid in any location)''
| Sets the music that plays when the player enters, where {{t|name}} is the cue name in the audio files, music will only play if the time is between {{t|int start}} (inclusive) and {{t|int end}} (exclusive).&lt;br />''Example: &lt;samp>Music 800 1200 MarlonsTheme&lt;/samp>.'' (Deprecated; use the music fields in [[Modding:Location data#Music|&lt;samp>Data/Locations&lt;/samp>]] instead. This property is only applied if the location has no music in &lt;samp>Data/Locations&lt;/samp>.)
|}

===Lighting===
{| class="wikitable"
|-
! property
! explanation
|-
| &lt;samp>AmbientLight {{t|byte r}} {{t|byte g}} {{t|byte b}}&lt;/samp>&lt;br />''(valid in indoor locations and locations that ignore outdoor lighting)''
| Sets the [[wikipedia:RGB color model|RGB colour]] that is subtracted from white (255,255,255) in order to create the ambient light.&lt;br />''Example: &lt;samp>AmbientLight 95 95 95&lt;/samp> for a normal indoor daytime lighting.''
|-
| &lt;samp>AmbientNightLight {{t|byte r}} {{t|byte g}} {{t|byte b}}&lt;/samp>&lt;br />''(valid in indoor locations and locations that ignore outdoor lighting)''
| Sets the [[wikipedia:RGB color model|RGB colour]] that is subtracted from white (255,255,255) in order to create the ambient night light.&lt;br />''Example: &lt;samp>AmbientLight 150 150 30&lt;/samp> for greenhouse nighttime lighting.''
|-
| &lt;samp>forceLoadPathLayerLights T&lt;/samp>²&lt;br />''(valid in outdoor non-festival locations)''
| Whether to load lights from the &lt;samp>Paths&lt;/samp> layer on maps where they would not normally be.&lt;br />''Example: &lt;samp>forceLoadPathLayerLights true&lt;/samp>.''
|-
| &lt;samp>IgnoreLightingTiles T&lt;/samp>²&lt;br />''(valid in indoor locations)''
| Whether to ignore lights on the &lt;samp>Front&lt;/samp> and &lt;samp>Buildings&lt;/samp> layers.&lt;br />''Example: &lt;samp>IgnoreLightingTiles true&lt;/samp>.''
|-
| &lt;samp>Light [{{t|int x}} {{t|int y}} {{t|int type}}]+&lt;/samp>&lt;br />''(valid in any location)''
| Adds light sources. The {{t|type}} field is the kind of light source (''e.g.,'' 4 for twin candles), and {{t|x}} {{t|y}} are the tile coordinates.The {{t|type}} of light source can be one of...
* &lt;samp>1&lt;/samp> (lantern);
* &lt;samp>2&lt;/samp> (window);
* &lt;samp>4&lt;/samp> (sconce);
* &lt;samp>5&lt;/samp> (cauldron);
* &lt;samp>6&lt;/samp> (indoor window);
* &lt;samp>7&lt;/samp> (projector).
* &lt;samp>8&lt;/samp> (fish tank).
Any other value will crash the game.&lt;br />''Example: &lt;samp>Light 3 8 4 6 8 4 11 8 4 3 2 5 10 2 5 6 19 5 5 15 5 5 11 5 11 12 5&lt;/samp> (Adventurer's Guild).''
|-
| &lt;samp>WindowLight [{{t|int x}} {{t|int y}} {{t|int type}}]+&lt;/samp>&lt;br />''(valid in any location)''
| Adds light sources that are only lit during the day when it is not raining (like the light coming through a window). See &lt;samp>Light&lt;/samp> for details.
|}

===Map &amp; tile changes===
{| class="wikitable"
|-
! property
! explanation
|-
| &lt;samp>ClearEmptyDirtOnNewMonth T&lt;/samp>²&lt;br />''(valid in any location)''
| Destroy most tilled dirt that doesn't contain crops when a new year starts.
|-
| &lt;samp>DayTiles [{{t|string layerName}} {{t|int x}} {{t|int y}} {{t|int tilesheetIndex}}]+&lt;/samp>&lt;br />''(valid in any location)''
| Sets tiles to appear between 6AM to 7PM. Anytime before 7pm, this finds the tile at position ({{t|x}}, {{t|y}}) on the map layer matching {{t|layerName}}, changes its tilesheet index to the specified {{t|tilesheetIndex}}, and adds a glow to simulate daylight. The glow will only be added if the location is indoors and the {{t|tilesheetIndex}} is 256, 288, 405, 469, or 1224. The parameters can be repeated to affect multiple tiles.&lt;br />''Example: &lt;samp>DayTiles Front 3 1 256 Front 3 2 288&lt;/samp>.''
|-
| &lt;samp>NightTiles [{{t|string layerName}} {{t|int x}} {{t|int y}} {{t|int tilesheetIndex}}]+&lt;/samp>&lt;br />''(valid in any location)''
| Changes the tile after 7pm. Outside, it works along &lt;samp>DayTiles&lt;/samp>: set a &lt;samp>DayTiles&lt;/samp> tile for the map to load between 6am to 7pm, then a &lt;samp>NightTiles&lt;/samp> to load between 7pm to the end of the day. It is mostly used for lamps in the game. Note that night time starts at different times depending on season ([[Day Cycle#Darkness|Day Cycle]]).
|-
| &lt;samp>Doors [{{t|int x}} {{t|int y}} {{t|string sheetID}} {{t|int tileID}}]+&lt;/samp>&lt;br />''(valid in indoor locations)''
| Adds functionality to interior doors. Used with &lt;samp>Action Door&lt;/samp> tile properties. The {{t|x}} {{t|y}} fields are the tile coordinates, {{t|sheetID}} is the name of the sheet containing the door sprite, and {{t|tileID}} is the tile index in the spritesheet.
|}

===Fishing===
{| class="wikitable"
|-
! property
! explanation
|-
| &lt;samp>FarmFishLocationOverride {{t|location name}} {{t|chance}}&lt;/samp>&lt;br />''(valid in farm)''
| Adds an alternative location name when catching fish, where the {{t|chance}} is a decimal value between 0 (never happens) and 1 (always happens). For example, &lt;samp>FarmFishLocationOverride Mountain 0.5&lt;/samp> adds a 50% chance of catching mountain fish instead of the normal fish for that location. The location name is case-sensitive, and matches those shown by the {{nexus mod|679|Debug Mode mod}}.
|-
| &lt;samp>FarmOceanCrabPotOverride T&lt;/samp>²&lt;br />''(valid in farm)''
| Causes crab pots on the farm should catch ocean fish.
|}

===Farmhouse interior===
{| class="wikitable"
|-
! property
! explanation
|-
| &lt;samp>FarmHouseFlooring {{t|flooring id}}&lt;/samp>&lt;br />''(valid in farm)''
| Sets the initial farmhouse floor to the given ID when creating a new save. These are mapped to the 4x4 tile areas in the &lt;samp>Maps/walls_and_floors&lt;/samp> tilesheet starting at tile index 336 (where index 0 is mapped to the top-left square).
|-
| &lt;samp>FarmHouseFurniture [{{t|furniture ID}} {{t|tile X}} {{t|tile Y}} {{t|rotations}}]+&lt;/samp>&lt;br />''(valid in farm)''
| Spawns initial furniture in the farmhouse when creating a new save. If you add multiple furniture to the same tile, the first one will be placed on the ground and the last one will be placed on the first one.&lt;br />
|-
| &lt;samp>FarmHouseStarterGift [{{t|id}} {{o|count}}]+&lt;/samp>
| The items that should appear in the initial gift box placed in the farmhouse when the save is created. This consists of one or more pairs of item ID (which can be qualified or unqualified) and count. The count is optional on the last entry.

For example, this will add 10 pufferfish (object 128) and a blobfish mask (hat 56):
&lt;pre>FarmHouseStarterGift (O)128 10 (H)56 1&lt;/pre>

If omitted, the default items (usually a 15 parsnip seeds) are added instead.
|-
| &lt;samp>FarmHouseStarterSeedsPosition {{t|tile X}} {{t|tile Y}}&lt;/samp>&lt;br />''(valid in farm)''
| Sets the tile position in the farmhouse where the seed package is placed when creating a new save.
|-
| &lt;samp>FarmHouseWallpaper {{t|wallpaper id}}&lt;/samp>&lt;br />''(valid in farm)''
| Sets the initial farmhouse wallpaper to the given ID when creating a new save. These are mapped to the 1x4 tile areas in the &lt;samp>Maps/walls_and_floors&lt;/samp> tilesheet starting from the top-left.
|}

===Other location metadata===
{| class="wikitable"
|-
! property
! explanation
|-
| &lt;samp>CanCaskHere T&lt;/samp>²&lt;br />''(valid in any location)''
| Allows casks to work in that location.
|-
| &lt;samp>indoorWater T&lt;/samp>²&lt;br />''(valid in indoor locations)''
| Enables water logic (ie. fishing, etc.) in that location.
|-
| &lt;samp>IsFarm T&lt;/samp>²&lt;br />''(valid in any location)''
| Marks the location as a farm. This only affects generic location/interaction logic which checks the in-code &lt;code>location.IsFarm&lt;/code> property; logic hardcoded into the game's &lt;code>Farm&lt;/code> class (''e.g.,'' farm animals, pets, crows/scarecrows, greenhouse, farm buildings, etc) is still limited to the actual farm.
|-
| &lt;samp>IsGreenhouse T&lt;/samp>²&lt;br />''(valid in any location)''
| Marks the location as a greenhouse.
|-
| &lt;samp>LocationContext Default&lt;/samp>&lt;br />''(valid in any location)''
| Sets the map to be part of the mainland for game logic purposes, like weather.
|-
| &lt;samp>LocationContext Island&lt;/samp>&lt;br />''(valid in any location)''
| Sets the map to be part of Ginger Island for game logic purposes, like weather.
|-
| &lt;samp>Outdoors T&lt;/samp>²&lt;br />''(valid in any location)''
| Sets whether the location is outdoors.&lt;br />''Example: &lt;samp>Outdoors true&lt;/samp>.''
|-
| &lt;samp>ProduceArea {{t|int x}} {{t|int y}} {{t|int width}} {{t|int height}}&lt;/samp>&lt;br />''(valid in coops and barns)''
| Sets the area where animals can spawn within a coop or barn.&lt;br />''Example: &lt;samp>ProduceArea 6 4 8 7&lt;/samp>.''
|-
| &lt;samp>ScreenshotRegion {{t|int left}} {{t|int top}} {{t|int right}} {{t|int bottom}}&lt;/samp>&lt;br />''(valid in any location)''
| Constrains the portion of the map rendered when screenshots are taken.&lt;br />''Example: &lt;samp>ScreenshotRegion 0 27 69 61&lt;/samp>.''
|-
| &lt;samp>SeasonOverride [{{t|string season}}]&lt;/samp>&lt;br />''(valid in any location)''
| Assumes a specific season for most game checks. (If a crop is in season, which tilesheet to use, etc.)
|-
| &lt;samp>TreatAsOutdoors T&lt;/samp>²&lt;br />''(valid in indoor locations)''
| The location is treated as outdoors for the purposes of spawning anything other than lights from the &lt;samp>Paths&lt;/samp> layer and yielding [[Coal]] from breaking rocks.&lt;br />''Example: &lt;samp>TreatAsOutdoors true&lt;/samp>.''
|-
| &lt;samp>UniquePortrait [{{t|str name}}]+&lt;/samp>&lt;br />''(valid in any location)''
| Switches the portraits for the named NPCs to the unique variants for the location. An NPC &lt;samp>Jane&lt;/samp> in location &lt;samp>Room&lt;/samp> will switch to portrait &lt;samp>Portraits/Jane_Room&lt;/samp>.&lt;br />''Example: &lt;samp>UniquePortrait Maru&lt;/samp>.'' (Deprecated; use [[Modding:Migrate to Stardew Valley 1.6#Custom NPC appearance|custom NPC appearances]] instead. These properties will override NPC appearances.)
|-
| &lt;samp>UniqueSprite [{{t|str name}}]+&lt;/samp>&lt;br />''(valid in any location)''
| Switches the spritesheets for the named NPCs to the unique variants for the location. An NPC &lt;samp>Jane&lt;/samp> in location &lt;samp>Room&lt;/samp> will switch to spritesheet &lt;samp>Characters/Jane_Room&lt;/samp>.&lt;br />''Example: &lt;samp>UniqueSprite Maru&lt;/samp>.'' (Deprecated; use [[Modding:Migrate to Stardew Valley 1.6#Custom NPC appearance|custom NPC appearances]] instead. These properties will override NPC appearances.)
|-
| &lt;samp>ViewportFollowPlayer T&lt;/samp>²&lt;br />''(valid in any location)''
| Forces the viewport to stay centered on the player.&lt;br />''Example: &lt;samp>ViewportFollowPlayer&lt;/samp>.''
|}


&lt;small>¹ Map properties are primarily handled in various methods of the &lt;samp>GameLocation&lt;/samp> class, particularly &lt;samp>resetLocalState&lt;/samp>.&lt;/small>&lt;br />
&lt;small>² The &lt;samp>T&lt;/samp> value (short for ''true'') is conventional, but any non-empty value will work too.&lt;/small>

==Known tile properties==
This excludes very specialised properties like &lt;samp>TouchAction WomensLocker&lt;/samp>.¹

===General===
{| class="wikitable"
|-
! layer
! property
! explanation
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>BeachSpawn T&lt;/samp>²
| Allows spawning of beach-related forage and supply crates on this tile, when using the beach farm type.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>Bed T&lt;/samp>²
| If the player stands on this tile, they're considered in bed for the purposes of stamina regen (in multiplayer) and pass-out logic.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>Buildable T&lt;/samp>²
| Allows farm buildings to be placed on this tile if there are no other obstructions.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>DefaultBedPosition T&lt;/samp>²
| Used in the upgraded farmhouse for the initial placement of the player bed and when migrating saves.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>DefaultChildBedPosition T&lt;/samp>²
| Used in the upgraded farmhouse for the initial placement of the child beds.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>Diggable T&lt;/samp>²
| Marks the tile as diggable with the hoe and enables planting crops. Also allows [[grass]] to spread to this tile.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>NoFishing T&lt;/samp>²
| Prevents the player from casting the line onto this tile when fishing.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>NoFurniture T&lt;/samp>²
| Prevents the player from placing furniture on this tile.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>NoPath&lt;/samp>
| Excludes this tile from NPC pathing, making them go around it if necesssary.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>NoSpawn All&lt;/samp>&lt;br />&lt;samp>NoSpawn True&lt;/samp>
| Combines &lt;samp>NoSpawn Grass&lt;/samp> and &lt;samp>NoSpawn Tree&lt;/samp>.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>NoSpawn False&lt;/samp>
| Disables any previous &lt;samp>NoSpawn&lt;/samp> property on the tile. For example, this can be used to enable spawning on a tile which has a &lt;samp>NoSpawn&lt;/samp> tile index property.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>NoSpawn Grass&lt;/samp>
| Prevents debris (''e.g.,'' weeds or stones) from spawning on this tile.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>NoSpawn Tree&lt;/samp>
| Prevents trees from spawning on this tile. Prevents the player from planting trees on this tile, except on the farm. If a tree is already on this tile, prevents it from growing.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>NoSprinklers T&lt;/samp>²
| Prevents sprinklers from being placed on this tile.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>NPCBarrier T&lt;/samp>²
| Prevents NPCs from crossing this tile when used on the Farm (including coops, barns, and slime hutches), UndergroundMine, or the island. Also prevents some spawns on this tile, in those locations.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>Passable T&lt;/samp>²
| Prevents players from walking or placing objects on this tile, even if they'd normally be able to do. (Direct opposite of &lt;samp>Buildings Passable T&lt;/samp> below.) Commonly used on certain water tiles for bordering the sides of bridges, to prevent players from walking off into open water. Can be added as a single TileData object for a specific tile, or (more commonly) to every instance of a tile by editing the tileset and adding it to the tile index.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>Placeable T&lt;/samp>²
| '''Prevents''' players from placing objects on this tile.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TemporaryBarrier T&lt;/samp>²
| Used only briefly when doors open. Marks this tile impassable to a player, while NPCs will treat it as an obstacle to pause before rushing through.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>Type {{t|str type}}&lt;/samp>
| Sets the tile type for various game logic (''e.g.,'' step sounds or planting crops), where {{t|type}} is one of ''Dirt'', ''Stone'', ''Grass'', or ''Wood''.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>Water T&lt;/samp>²
| Marks the tile as a water tile for various game logic (''i.e.,'' items splash into it, can refill watering can from it, can possibly fish in it, can possibly place crab pots in it, will water nearby paddy crops, will block most open-tile checks, will regenerate health in it if indoors, and will draw animated overlay over it if indoors, outdoors, in the Mines, Sewer, or Submarine; or otherwise not in the Desert).
''Setting the value to I (uppercase i) will make the tile behave like normal water, without rendering the water animation overlay.'' 
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>WaterSource T&lt;/samp>²
| Lets the player refill the watering can from this tile.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>NPCPassable T&lt;/samp>²
| NPC-only version of &lt;samp>Passable&lt;/samp> below. Allows NPCs to pass through this tile.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Passable T&lt;/samp>²
| Allows passing through a tile, even though Buildings tiles can't normally be walked through. Often used for small footbridges that need to be on Buildings, over water. Direct opposite of &lt;samp>Back Passable T&lt;/samp> above. Can be added as a single TileData object for a specific tile, or (more commonly) to every instance of a tile by editing the tileset and adding it to the tile index.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>ProjectilePassable T&lt;/samp>²
| Allows projectiles to cross tiles that would normally block them (''e.g.,'' to allow shooting into lava pools)
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Shadow T&lt;/samp>²
| Player-only version of &lt;samp>Passable&lt;/samp> above. Allows the player to pass through this tile, but not NPCs.
|-
| &lt;samp>Paths&lt;/samp>
| &lt;samp>Order {{T|I}}&lt;/samp>
| To place on index 29 and 30 of the Paths tilsheet. Set the order the cabins will spawn at the creation of a Multiplayer save.
|-
| &lt;samp>Paths&lt;/samp>
| &lt;samp>SpawnTree {{t|type}} {{t|ID}} {{o|stage on spawn}} {{o|stage on regrow}}&lt;/samp>
| Spawns a tree when the map is created, where:
* {{t|type}} is &lt;samp>wild&lt;/samp> (spawn a [[trees|wild tree]]) or &lt;samp>fruit&lt;/samp> (spawn a [[Fruit Trees|fruit tree]]).
* {{t|ID}} is the tree's key in &lt;samp>Data/FruitTrees&lt;/samp> or &lt;samp>Data/WildTrees&lt;/samp>.
* {{o|stage on spawn}} is the preferred tree growth stage when first populating the save (if applicable).
* {{o|stage on regrow}} is the preferred tree growth stage when regrowing trees on day update (if applicable).

The tile must have [[#Paths layer|&lt;samp>Paths&lt;/samp> tile index]] 34.
|}

===TouchAction===
The &lt;samp>TouchAction&lt;/samp> property makes something happen when the player steps on the tile:

{| class="wikitable"
|-
! layer
! property
! explanation
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction ChangeIntoSwimsuit&lt;/samp>
| Changes the player into their swimsuit and disables running.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction ChangeOutOfSwimsuit&lt;/samp>
| Changes the player into their regular clothes and enables running.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction DesertBus&lt;/samp>
| Lets you ride the bus back to the Bus Stop.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction Emote {{t|string npc}} {{t|int emoteID}}&lt;/samp>
| Finds the NPC whose name matches the {{t|npc}} field, and causes them to show the given {{t|emoteID}} above their head (4: empty can, 8: question mark, 12: angry, 16: exclamation, 20: heart, 24: sleep, 28: sad, 32: happy, 36: x, 40: pause, 52: videogame, 56: music note, 60: blush).
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction FaceDirection {{t|string npc}} {{t|int direction}}&lt;/samp>
| Finds the NPC whose name matches the {{t|npc}} field, and make them face the given direction (0: up, 1: right, 2: down, 3: left).
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction legendarySword&lt;/samp>
| Gives them the [[Galaxy Sword]] when holding a [[Prismatic Shard]].
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction MagicWarp {{t|string area}} {{t|int x}} {{t|int y}} {{o|string prerequisite}}&lt;/samp>
| Warps the player to the {{t|x}} {{t|y}} tile coordinates in the given {{t|area}} with a magic sound and effects. If the {{o|prerequisite}} field is specified, only occurs if that flag is set via &lt;samp>Game1.player.mailReceived&lt;/samp>.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction PlayEvent {{t|event id}} {{o|check preconditions}} {{o|skip if seen}} {{o|fallback action}}&lt;/samp>
| Equivalent to &lt;samp>Action PlayEvent&lt;/samp>, but activated on touch. Note that {{o|fallback action}} is an &lt;samp>Action&lt;/samp> tile property, ''not'' a &lt;samp>TouchAction&lt;/samp> tile property.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction PoolEntrance&lt;/samp>
| Switches the player between swimming and walking mode.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction Sleep&lt;/samp>
| Ends the day if the player confirms.
|-
| &lt;samp>Back&lt;/samp>
| &lt;samp>TouchAction Warp {{t|string area}} {{t|int x}} {{t|int y}} {{o|string prerequisite}}&lt;/samp>
| Adds a player-only warp on the tile to the specified location name and position. This is exactly equivalent to &lt;samp>TouchAction MagicWarp&lt;/samp>, but without the magic sound/visual effect.
|}

===Action===
The &lt;samp>Action&lt;/samp> property makes something happen when the player interacts (''e.g.,'' clicks) with the tile:

{| class="wikitable"
|-
! layer
! property
! explanation
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action AdventureShop&lt;/samp>
| Shows the Adventurer's Guild shop screen.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Arcade_Prairie&lt;/samp>
| Shows the ''Journey of the Prairie King'' arcade game.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Arcade_Minecart&lt;/samp>
| Shows the ''Junimo Kart'' arcade game.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action BuyBackpack&lt;/samp>
| Shows a menu which lets the player upgrade their backpack if an upgrade is available.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Billboard&lt;/samp>
| Shows the calendar menu.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Blacksmith&lt;/samp>
| Opens Clint's shop menu, if Clint is nearby.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Buy&lt;/samp>
| In the SeedShop, opens Pierre's shop menu, if Pierre is nearby (or the box version if he's visiting Ginger Island). In Sandy's house, opens Sandy's shop menu, if Sandy is neaby. Does nothing in other locations.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action BrokenBeachBridge&lt;/samp>
| Prompts you to use wood to repair the bridge.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action BuildingSilo&lt;/samp>
| If a building covers this tile, enables [[silo]] interactions on this tile subject to the building's &lt;samp>HayCapacity&lt;/samp> field in &lt;samp>Data/Buildings&lt;/samp>.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action BuildingToggleAnimalDoor&lt;/samp>
| If a building covers this tile, opens or closes its animal door.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action BuyQiCoins&lt;/samp>
| Shows a dialogue which lets the player buy 100 Casino club coins.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Concessions&lt;/samp>
| Opens the snack shop in the theater. (Only from inside the theater.)
|-

| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Carpenter&lt;/samp>
| Opens the carpenter menu, if Robin is nearby.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action ColaMachine&lt;/samp>
| Offers to let the player buy a Joja cola.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action ClubCards&lt;/samp>&lt;br />&lt;samp>Action Blackjack&lt;/samp>
| Shows the casino blackjack minigame.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action ClubComputer&lt;/samp>&lt;br />&lt;samp>Action FarmerFile&lt;/samp>
| Shows a dialogue with play stats (steps taken, gifts given, dirt hoed, etc).
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action ClubSeller&lt;/samp>
| Shows a dialogue which lets the player buy a [[Statue Of Endless Fortune]] for one million gold.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action ClubShop&lt;/samp>
| Shows the casino shop menu.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action ClubSlots&lt;/samp>
| Shows the casino slots minigame.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Dialogue {{t|text}}&lt;/samp>
| Shows a generic dialogue box with the given text. See [[Modding:Dialogue|dialogue format]].&lt;br />''Example: Action Dialogue Hi there @!''
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action DivorceBook&lt;/samp>
| Shows divorce options for the player's current marriage status (as if they clicked the [[Marriage#Divorce|divorce book]]).
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Door {{t|npcName}} {{o|npcName}}&lt;/samp>
| Sets up an interior door that cannot be opened unless the player has two or more hearts of friendship with any of the named NPC(s). Placed on the lower of the two door tiles. See [[Modding:Dialogue|dialogue format]].&lt;br />''Example: Action Door Abigail''
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action DropBox {{t|ID}}&lt;/samp>
| A location that allows the player to drop off items when a [[Modding:Special orders|special order]] with the given {{t|ID}} is active.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action ElliottBook&lt;/samp>
| Displays the text ''Blank book''.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action ElliottPiano&lt;/samp>
| Plays one of four possible piano notes. ''ElliottPiano 1'' plays the lowest note and ''ElliottPiano 4'' plays the highest note.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action EnterSewer&lt;/samp>
| Warps you to the sewer if you have obtained the key.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action EvilShrineLeft&lt;/samp>
| Turns your kids into doves for a prismatic shard.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action EvilShrineCenter&lt;/samp>
| Erases your ex-spouses memory of you.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action EvilShrineRight&lt;/samp>
| Toggles monster spawning for your farm.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Forge&lt;/samp>
| Opens the [[Forge]] menu.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Garbage {{t|ID}}&lt;/samp>
| Has a chance to give a specific item to the player based on the {{t|ID}}. Can only be clicked once per day. TODO: Explain what each {{t|ID}} means.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Gunther&lt;/samp>
| Opens the museum menu where you can donate artifacts or claim rewards.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action HMGTF&lt;/samp>
| Gives you "[[??HMTGF??]]" when you have a [[Super Cucumber]] in your hand.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action IceCreamStand&lt;/samp>
| If Summer, shows the Ice Cream Stand shopping screen. Otherwise, the player will be told to come back in the summer. (Needs an NPC behind the stand.)
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action JojaShop&lt;/samp>
| Shows the Joja shopping screen.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Jukebox&lt;/samp>
| Shows the jukebox menu to choose the ambient music.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action kitchen&lt;/samp>&lt;br />''(valid in any location)''
| Shows the cooking menu.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Letter {{t|string messageKey}}&lt;/samp>
| Loads a message with the given key from the ''Content\Strings\StringsFromMaps.xnb'' file and displays it on-screen as a letter. Uses the same syntax as ''Data\mail.xnb''.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action LockedDoorWarp [{{t|int toX}} {{t|int toY}} {{t|string toArea}} {{t|int openTime}} {{t|int closeTime}} {{t|NPC}} {{t|friendship}}]&lt;/samp>
| Creates an activation warp normally used on doors with a time window for when it can be used. Note that you must use 24-hour times, ''i.e.,'' 2000 for 8pm. The last two terms, if specified, add a friendship requirement on top of the time requirement. &lt;br />''Example: 7 9 LeahHouse 1000 1800 Leah 500''
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action LuauSoup&lt;/samp>
| Used for the Luau Festival, this is where you insert a food item for the soup.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action MagicInk&lt;/samp>
| Adds the Magic Ink to your wallet.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Mailbox&lt;/samp>
| Shows the next letter from the player's mailbox (if any).
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Message {{t|string messageKey}}&lt;/samp>
| Loads a message with the given key from the ''Content\Strings\StringsFromMaps.xnb'' file and displays it in a dialogue box.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action MessageOnce {{t|int eventID}} {{t|string message}}&lt;/samp>
| If the player hasn't seen the event with ID {{t|eventID}}, marks that event seen and displays the given message text in a dialogue box. This does ''not'' parse [[Modding:Dialogue|dialogue format]].
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action MessageSpeech {{t|string messageKey}}&lt;/samp>
| Identical to &lt;samp>Action Message&lt;/samp>, but replaces the usual inspection cursor with a speech cursor.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action MineSign {{t|string message}}&lt;/samp>
| Shows a mini-dialogue box with the given raw message text. This does ''not'' parse [[Modding:Dialogue|dialogue format]].
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action MinecartTransport&lt;/samp>
| Shows the minecart destination menu (or a message if not unlocked).
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action MineElevator&lt;/samp>
| Shows the mine elevator menu (to warp to a mine level) if the player has reached mine level 5+, else a mine elevator not working message.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action NextMineLevel&lt;/samp>
| Warps the player to the next mine level (or level 1 if they're not in the mine).
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action None&lt;/samp>
| Does nothing. This is used to mark the tile interactive if the click will be handled separately.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Notes {{t|int noteID}}&lt;/samp>
| If the player has found the specified lost book, displays its museum note text and marks it read.&lt;br />''Example: Action Notes 17''
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action NPCMessage {{t|str name}} "{{t|str dialogueKey}}"&lt;/samp>
| If the named NPC is within 14 tiles of the player, reads dialogue with the given key from the string files and displays a dialogue box. See [[Modding:Dialogue|dialogue format]].&lt;br />''Example: Action NPCMessage Abigail "Strings\\StringsFromCSFiles:Event.cs.1022"''
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action ObeliskWarp {{t|location name}} {{t|x}} {{t|y}} {{o|whether to dismount}}&lt;/samp>
| Warps the player to the specified location name and position with the [[Warp Totem|Obelisk]] animation/sound effects.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action OpenShop {{t|shop id}} {{o|from direction}} {{o|open time}} {{o|close time}} {{o|owner tile area}}&lt;/samp>
| Open the [[Modding:Shops|shop]] with the given {{t|shop id}}. All arguments besides the ID are optional:
* {{o|from direction}}: if specified, the player must be standing in this direction relative to the shop (one of &lt;samp>down&lt;/samp>, &lt;samp>up&lt;/samp>, &lt;samp>left&lt;/samp>, &lt;samp>right&lt;/samp>, or &lt;samp>none&lt;/samp>). Setting this to &lt;samp>none&lt;/samp> disables the requirement. The default for most vanilla shops is &lt;samp>down&lt;/samp>.
* {{o|open time}} and {{o|close time}}: the start &amp; end times in 26-hour format when the shop is available. Interacting with the tile outside those times does nothing.
* {{o|owner tile area}}: if specified, the tile area which must contain one of the shop owners for the shop to be available. For a custom shop, these are defined by its &lt;samp>Owners&lt;/samp> field. This can be specified in two forms: &lt;samp>{{t|x}} {{t|y}}&lt;/samp> for a single tile, or &lt;samp>{{t|x}} {{t|y}} {{t|width}} {{t|height}}&lt;/samp> for a multi-tile area.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action PlayEvent {{t|event id}} {{o|check preconditions}} {{o|skip if seen}} {{o|fallback action}}&lt;/samp>
| Immediately start an [[Modding:Event data|event]], subject to the conditions:
* {{o|check preconditions}}: whether to ignore the action if the [[Modding:Event data#Event preconditions|event's preconditions]] don't match (one of &lt;samp>true&lt;/samp> or &lt;samp>false&lt;/samp>). Default true.
* {{o|skip if seen}}: whether to ignore the action if the player has already seen the given event. Default true.

If the event doesn't start for any reason (including the preceding conditions):
* If {{o|fallback action}} is specified, it'll be run as an action. This can be any &lt;samp>Action&lt;/samp> tile property (without the "Action " prefix), like &lt;code>Action PlayEvent 60367 true true PlayEvent 520702 false false&lt;/code> to play a different event.
* Otherwise the action is silently ignored.

For example, &lt;code>Action PlayEvent 60367 false false&lt;/code> will replay the bus arrival event from the start of the game.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action playSound {{t|str cueName}}&lt;/samp>
| Play the sound or music with the given name.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action QiCoins&lt;/samp>
| Shows a dialogue which lets the player buy 10 Casino club coins if they have none, else shows how many they have.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Saloon&lt;/samp>
| Opens the Saloon menu, if Gus is nearby.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action SandDragon&lt;/samp>
| Used for Part 3 of the Mysterious Mr. Qi Quest.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Shop&lt;/samp>
| On festival maps, opens the festival shop. No effect on non-festival maps.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Theater_BoxOffice&lt;/samp>
| Opens the ticket menu for the theater, if you have it unlocked.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action TownMailbox {{t|ID}}&lt;/samp>
| TODO: Explain what this does.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action Warp {{t|int x}} {{t|int y}} {{t|str area}}&lt;/samp>
| Warps the player to the {{t|x}} {{t|y}} tile coordinate in the {{t|area}} game location.&lt;br />''Example: Action Warp 76 9 Mountain''
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action WarpCommunityCenter&lt;/samp>
| Warps the player to the inside of the Community Center if they have access (else show an "it's locked" message).
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action WarpGreenhouse&lt;/samp>
| Warps the player to the inside of their greenhouse if they've unlocked it, else shows a message about the greenhouse ruins.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action WizardBook&lt;/samp>
| If unlocked, you buy buildings from the wizard here.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action WizardHatch&lt;/samp>
| If you're good enough friends with the wizard you warp to his basement, if not you get told you can't go in.
|-
| &lt;samp>Buildings&lt;/samp>
| &lt;samp>Action WizardShrine&lt;/samp>
| Shows the character customisation menu normally available from the Wizard's tower.
|}

&lt;small>¹ Tile properties are handled throughout the codebase using &lt;samp>GameLocation::doesTileHaveProperty&lt;/samp>. Actions and touch actions are handled by &lt;samp>GameLocation::performAction&lt;/samp> and &lt;samp>GameLocation::performTouchAction&lt;/samp> respectively. Emote IDs are listed as &lt;samp>Character&lt;/samp> constants.&lt;/small>&lt;br />
&lt;small>² The &lt;samp>T&lt;/samp> value (short for ''true'') is conventional, but any non-empty value will work too.&lt;/small>

==Paths layer==
The &lt;samp>Paths&lt;/samp> layer has icon tiles from the &lt;samp>paths&lt;/samp> tilesheet which affect game behavior on the map:

[[File:PathsExplanation.png|thumb|The tile indexes shown in the table.]]

{| class="wikitable"
|-
! tile index
! explanation
! restrictions
|-
| 0–6
| Unused. NPCs automatically path to their schedule points, with routes influenced by tile type. These tiles depicted directional arrows before they were erased in update 1.6.
|
|- 
| 7 
| Used in the [[Modding:Migrate_to_Stardew_Valley_1.5.5#Custom_spouse_rooms|spouse room]], [[Modding:Migrate_to_Stardew_Valley_1.5.5#Custom_spouse_outside_areas|spouse patio]], and [[Movie Theater]] to mark where an NPC should stand. Can be given a "direction" property in TileData.
| Used for spouse areas and the Movie Theater.
|-
| 8
| Add this tile to the [[#Map properties 2|&lt;samp>Light&lt;/samp> map property]] with light type 4 (sconce).
| Indoors and festivals only.²
|-
| 9–12
| Spawn a [[trees|tree]] when the location is created. Trees have a 50% chance to respawn each day outside the farm. (See also 31–32.)&lt;br />Available trees: oak (9), maple (10), pine (11), and palm 1 (12).
| Outdoors only.
|-
| 13–18
| Spawn debris when the location is created, or randomly each day. Outside the farm, respawn in spring.&lt;br />Available debris: [[weeds|seasonal weed]] (13–15), rock (16–17), twig (18).
| Outdoors only.
|-
| 19
| Spawn a [[Large Log|large log]] when the farm is created, with the top-left corner on this tile.
| Farm only.
|-
| 20
| Spawn a [[boulder]] when the farm is created, with the top-left corner on this tile.
| Farm only.
|-
| 21
| Spawn a [[Large Stump|hardwood stump]] when the farm is created (and every day on the forest farm), with the top-left corner on this tile.
| Farm only.
|-
| 22
| Spawn [[grass]] when the location is created, or randomly afterwards.
| Outdoors only.
|-
| 23
| Spawn a random oak, maple, or pine [[trees|tree]] at growth stage 2–3 when the location is created.
| Outdoors only.
|-
| 24–26
| Spawn a normal bush when the location is created. Medium bushes grow [[blackberry|blackberries]] and [[salmonberry|salmonberries]].&lt;br />Available bushes: large (24), medium (25), small (26).
| Outdoors only.
|-
| 27
| When the location is created, add this tile to the [[#Map properties 2|&lt;samp>BrookSounds&lt;/samp> map property]] with the &lt;samp>babblingBrook&lt;/samp> sound.
| Outdoors only.
|-
| 28
| Spawn a [[grub]] here (33% chance per day, unless the map already has 50 grubs).
| [[Mutant Bug Lair]] only.
|-
| 29–30
| Place prebuilt [[cabin]]s in [[multiplayer]] based on the layout (29=nearby or 30=separate) and [[#Tile properties 2|&lt;samp>Order&lt;/samp> tile property]], with the top-left corner on this tile.
| Farm only.
|-
| 31–32
| Spawn a [[trees|tree]] when the location is created. Trees have a 50% chance to respawn each day outside the farm. (See also 9–12.)&lt;br />Available trees: palm 2 (31), mahogany (32).
| Outdoors only.
|-
| 33
| Spawn a [[Golden Walnut|golden walnut]] bush when the location is created.
| Outdoors only.
|-
| 34
| Enables the &lt;samp>SpawnTree&lt;/samp> [[Modding:Maps#Known tile properties|tile property]] on this tile, which lets you spawn/regrow wild or fruit trees.
| Outdoors only.
|-
| 35
| Has no effect in-game. This is just a visual indicator you can use when editing maps (e.g. to keep track of where you set tile properties).
|
|-
| 36
| Spawn blue [[grass]] when the location is created, or randomly afterwards.
| Outdoors only.
|}

Notes:
# In the [[Mutant Bug Lair]], debris spawn rate is reduced to 33% chance per day.
# Restriction can be overridden with &lt;samp>forceLoadPathLayerLights&lt;/samp> map property.

==Potential issues==
===Tilesheet order===
When you replace a vanilla map, '''don't''' change the order or IDs of the original tilesheets. Prefix new tilesheet IDs with &lt;code>z_&lt;/code> to avoid changing the original order.

; Why this causes problems
: For example, let's say you replace a map which normally has these tilesheets in Tiled:
: [[File:Tiled tileset order A.png|thumb|none|The original tilesheet order.]]

: When you add a new tilesheet, note that the order changes from ''[paths, untitled tile sheet]'' to ''[customSheet, paths, untitled tile sheet]'':
: [[File:Tiled tileset order B.png|thumb|none|'''Wrong''' way to add a new tilesheet (changes the original order).]]

: If the game tries to access a tile from the first tilesheet, it will get it from &lt;samp>customSheet&lt;/samp> instead of the expected &lt;samp>Paths&lt;/samp> tilesheet. That can cause anything from visual glitches (''e.g.,'' showing the wrong tile images) to outright crashes (especially if the new tilesheet is smaller than the one it expected).

: To avoid that, always keep the original tilesheets in the same order and prefix new tilesheets with &lt;code>z_&lt;/code> so they're added at the end:
: [[File:Tiled tileset order C.png|thumb|none|Correct way to add a new tilesheet.]]

; How to fix an affected tilesheet
: See ''[[#"mod reordered the original tilesheets"|"mod reordered the original tilesheets"]]'' below.

===Local copy of a vanilla tilesheet===
When editing a map in Tiled, you may need to copy vanilla tilesheets like &lt;samp>path.png&lt;/samp> or &lt;samp>spring_town.png&lt;/samp> into the map folder for Tiled to find. If the tilesheet is still there when you load the game, SMAPI will use it for your map instead of the game's vanilla tilesheet, which may have unintended effects (''e.g.,'' edits from recolor mods won't work in your map).

To avoid issues, you can either...
* Delete vanilla tilesheets from the folder before testing or releasing the mod.
* Rename the tilesheet file to start with a dot (like &lt;samp>.spring_town.png&lt;/samp>) and reference that. When SMAPI loads the map in-game, it'll automatically ignore the dot and look for &lt;samp>spring_town.png&lt;/samp> in the local files or &lt;samp>Content/Maps&lt;/samp> folder.

===Map-specific issues===
The game makes some assumptions about maps which may break for modded maps. These are the known issues:
{| class="wikitable"
|-
! affected maps
! issue
|-
| &lt;samp>Maps/Farm&lt;/samp>&lt;br />&lt;samp>Maps/Farm_Combat&lt;/samp>&lt;br />&lt;samp>Maps/Farm_Fishing&lt;/samp>&lt;br />&lt;samp>Maps/Farm_Foraging&lt;/samp>&lt;br />&lt;samp>Maps/Farm_Mining&lt;/samp>
| &amp;#32;
* The farm's &lt;samp>Paths&lt;/samp> layer must have at least one tile with index 22 (grass spawn). This is used to initialise the grass code when the save is loaded, even if no grass is spawned.&lt;ref>The grass sound is set in &lt;samp>Grass::loadSprite&lt;/samp>, which is called from &lt;samp>GameLocation::loadObjects&lt;/samp> if the &lt;samp>Paths&lt;/samp> layer has tile index 22. (The game spawns a grass for each such tile, and later removes them.)&lt;/ref>
|-
| &lt;samp>Maps/FarmHouse*&lt;/samp>
| &amp;#32;
* The two bed tiles where the player can walk must have two properties: &lt;samp>Bed T&lt;/samp> (used to decide if the player is in bed) and &lt;samp>TouchAction Sleep&lt;/samp>.
* Deleting or changing the wallpapers and floors will cause a game crash.
* The &lt;samp>DayTiles&lt;/samp> and &lt;samp>NightTiles&lt;/samp> map properties are cleared when loading the spouse room, so custom values for those properties won't work for married players.
|-
| &lt;samp>Maps/SpouseRooms&lt;/samp>
| &amp;#32;
* If you add or resize any tilesheet, you must also edit &lt;samp>Maps/FarmHouse1_marriage&lt;/samp> and &lt;samp>Maps/FarmHouse2_marriage&lt;/samp> to have the same changes (even if you don't make any other changes to the farmhouse). This is needed because the tilesheet references and sizes are stored as part of the map file.
|}
&lt;small>&lt;references />&lt;/small>

==='Save as' in Tiled===
When you use 'save as' in Tiled, never save into a different folder. That will change all the tilesheet references to point to the old folder, so it'll no longer work in-game. Instead, copy/move the map files to a different folder if needed.

===Locating tilesheets in Tiled===
When a map tilesheet is missing, never use the locate option to use a tilesheet from a different folder. That will add a complex tilesheet path which won't work in-game. Instead copy the tilesheets into the same folder as the map, and reference them from there.

==Troubleshooting==
See also [[#Potential issues|''potential issues'']] above for common issues.

==="Tilesheet paths must be a relative path without directory climbing (../)"===
; What does this mean?
: Your map uses a tilesheet that's outside its folder root. That might happen if you [[#'Save as' in Tiled|used 'save as' in Tiled to save into a different folder]], copied &amp; pasted tiles between maps in different folders, or manually added a tilesheet from a different folder.

: For example:
&lt;pre style="margin-left: 2em;">
📁 Stardew Valley/
   📁 Content/
      📁 Maps/
         🗎 townInterior     &lt;──┐
   📁 Mods/                    │
      📁 YourModName/          │ ../../../Content/Maps/townInterior
         📁 assets/            │
            🗎 your-map.tmx  ───┘
&lt;/pre>

: This isn't allowed since it's very fragile (''e.g.,'' players might install your mod in a different folder path).

; How do I fix it?
:# Copy the tilesheets you're using into the same folder as the map.
:# For unchanged vanilla tilesheets, rename them to start with a dot (like &lt;samp>.townInterior.png&lt;/samp>). This tells SMAPI to ignore the file when loading the map in-game, and load the one in the &lt;samp>Content&lt;/samp> folder instead.
:# In Tiled, click the edit icon under the tilesheet.
:# In the tab that opens, click ''Tileset > Tileset Properties''.
:# Click the 'Image' field, then the 'Edit' button to locate the tilesheet in the same folder.
For a screenshot guide of steps 3-5, [https://imgur.com/a/rukygAr see these images] provided by Discord user foggywizard#7430.

: After fixing it, the above example would look like this:
&lt;pre style="margin-left: 2em;">
📁 Stardew Valley/
   📁 Mods/
      📁 YourModName/
         📁 assets/
            🗎 your-map.tmx       ───┐
            🗎 .townInterior.png  &lt;──┘ .townInterior.png
&lt;/pre>

==="mod reordered the original tilesheets"===
; What does this mean?
: See [[#Tilesheet order|''tilesheet order'']] for more info.

; How do I fix it?
: Always keep the original tilesheets in the same order and prefix new tilesheets with &lt;code>z_&lt;/code> so they're added at the end:
: [[File:Tiled tileset order C.png|thumb|none|Correct way to add a new tilesheet.]]

: To rename an affected tilesheet in Tiled:
&lt;gallery style="margin-left: 2em;">
File:Tiled rename tileset A.png|In the tileset pane, click the tab for the tileset and then click the edit icon.
File:Tiled rename tileset B.png|Click ''Tileset > Tileset Properties'' from the top menu to show the properties pane.
File:Tiled rename tileset C.png|Change the name in the ''Name'' field.
&lt;/gallery>

==="mod has no tilesheet with ID '&lt;name>'"===
; What does this mean?
: You replaced one of the vanilla maps, but your custom map doesn't have all of the original map's tilesheets (or you changed their names in Tiled). This will cause a crash if the game tries to access the missing tilesheet.

; How do I fix it?
: Compare the original and custom maps in Tiled. For each tilesheet in the original map, make sure it's also in the custom map '''and''' has the same name (even if you're not using it).

: If you need to rename a tilesheet:
:# In the tileset pane, click the tab for the tileset and then click the edit icon.
:# Click ''Tileset > Tileset Properties'' from the top menu to show the properties pane.
:# Change the ''Name'' field to match the original map's tilesheet name.

==Making changes with SMAPI==
This page mainly covers editing maps with Tiled, but you can make the same changes programmatically using a [[Modding:Modder Guide/Get Started|C# SMAPI mod]]. There are two main approaches to changing a location in C# code.

===Using the &lt;samp>AssetRequested&lt;/samp> event===
Most map edits should be applied using [[Modding:Modder Guide/APIs/Content|the &lt;samp>AssetRequested&lt;/samp> event]], so your changes aren't lost if another mod reloads the map. This works with the &lt;samp>Map&lt;/samp> asset directly before it's used by the [[Modding:Modder Guide/Game Fundamentals#GameLocation et al|in-game location]]; that means you can't use location methods at this point, but you can make any changes you want before the map is read (e.g. change warps). See the [[Modding:Modder Guide/APIs/Events|events page]] for help using events.

For example, this mod code edits the town map and adds an optional &lt;samp>GetTile&lt;/samp> helper method:

&lt;syntaxhighlight lang="C#">
/// &lt;summary>The mod entry point.&lt;/summary>
internal sealed class ModEntry : Mod
{
    /// &lt;inheritdoc />
    public override void Entry(IModHelper helper)
    {
        helper.Events.Content.AssetRequested += this.OnAssetRequested;
    }

    /// &lt;inheritdoc cref="IContentEvents.AssetRequested"/>
    /// &lt;param name="sender">The event sender.&lt;/param>
    /// &lt;param name="e">The event data.&lt;/param>
    private void OnAssetRequested(object?/ sender, AssetRequestedEventArgs e)
    {
        if (e.Name.IsEquivalentTo("Maps/Town"))
        {
            e.Edit(asset =>
            {
                IAssetDataForMap editor = asset.AsMap();
                Map map = editor.Data;

                // your code here
            });
        }
    }

    /// &lt;summary>Get a tile from the map.&lt;/summary>
    /// &lt;param name="map">The map instance.&lt;/param>
    /// &lt;param name="layerName">The name of the layer from which to get a tile.&lt;/param>
    /// &lt;param name="tileX">The X position measured in tiles.&lt;/param>
    /// &lt;param name="tileY">The Y position measured in tiles.&lt;/param>
    /// &lt;returns>Returns the tile if found, else &lt;c>null&lt;/c>.&lt;/returns>
    private Tile GetTile(Map map, string layerName, int tileX, int tileY)
    {
        Layer layer = map.GetLayer(layerName);
        Location pixelPosition = new Location(tileX * Game1.tileSize, tileY * Game1.tileSize);

        return layer.PickTile(pixelPosition, Game1.viewport.Size);
    }
}
&lt;/syntaxhighlight>

Now you can make any changes you want to the map before it's loaded by location. For example, you can...

&lt;ul>
&lt;li>Add a custom tilesheet:
&lt;syntaxhighlight lang="C#">
map.AddTileSheet(new TileSheet(
    id: "z_custom-tilesheet", // always prefix custom tilesheets with z_ to avoid reordering vanilla tilesheets
    map: map,
    imageSource: this.Helper.Content.GetActualAssetKey("assets/tilesheet.png", ContentSource.ModFolder), // get a unique asset name for local mod file which can be passed to the game
    sheetSize: new Size(32, 64), // the size in tiles for the tilesheet image
    tileSize: new Size(16)       // the size of each tile in pixels, should always be 16
));
&lt;/syntaxhighlight>&lt;/li>

&lt;li>Manage map properties:
&lt;syntaxhighlight lang="C#">
// get a property value
string currentMusic = map.Properties.TryGetValue("Music", out PropertyValue rawMusic)
    ? rawMusic.ToString()
    : null;

// add/replace a property
map.Properties["Music"] = "MarlonsTheme";

// delete a property
map.Properties.Remove("Music");
&lt;/syntaxhighlight>&lt;/li>

&lt;li>Manage tile properties:
&lt;syntaxhighlight lang="C#">
// get tile
Tile tile = this.GetTile(map, layerName: "Back", tileX: 10, tileY: 20);
if (tile == null)
    return; // you should handle the tile not being there to avoid errors

// get a property value
string diggable = tile.TileIndexProperties.TryGetValue("Diggable", out PropertyValue rawDiggable) || tile.Properties.TryGetValue("Diggable", out rawDiggable)
    ? rawDiggable?.ToString()
    : null;

// set a property
tile.Properties["Diggable"] = "T";

// delete a property
tile.Properties.Remove("Diggable");
&lt;/syntaxhighlight>&lt;/li>

&lt;li>Add new tiles:
&lt;syntaxhighlight lang="C#">
int tileX = 10;
int tileY = 20;
Layer layer = map.GetLayer("Back");

// add a static tile
layer.Tiles[tileX, tileY] = new StaticTile(
    layer: layer,
    tileSheet: map.GetTileSheet("z_custom-tilesheet"),
    tileIndex: 100,            // the sprite index in the tilesheet
    blendMode: BlendMode.Alpha // should usually be Alpha
);

// add an animated tile
layer.Tiles[tileX, tileY] = new AnimatedTile(
    layer: layer,
    tileFrames: new StaticTile[]
    {
        new StaticTile(...),
        new StaticTile(...),
        new StaticTile(...),
    },
    frameInterval: 100 // frame duration in milliseconds
);
&lt;/syntaxhighlight>&lt;/li>

&lt;li>Delete tiles:
&lt;syntaxhighlight lang="C#">
layer.Tiles[tileX, tileY] = null;
&lt;/syntaxhighlight>&lt;/li>

&lt;li>Apply tile transformations:
&lt;syntaxhighlight lang="C#">
Tile tile = this.GetTile(map, layerName: "Back", tileX, tileY);
tile.Properties["@Rotation"] = 45; // rotate it 45° clockwise
tile.Properties["@Flip"] = 1; // flip the tile: 0 (normal), 1 (horizontal), 2 (vertical)
&lt;/syntaxhighlight>&lt;/li>
&lt;/ul>

See also [[Modding:Modder Guide/APIs/Content#Edit a map|SMAPI's map edit helper]], which lets you do things like merge a custom map area into the map.

===After location is loaded===
After the [[Modding:Modder Guide/Game Fundamentals#GameLocation et al|in-game location]] is loaded, you can edit locations and their maps using the game's helpers. Be careful doing this though: another mod (or sometimes the game itself) may reload the location at any time, which would lose your changes if you're not careful.

For example, within any [[Modding:Modder Guide/APIs/Events|in-game events]] you can...

&lt;ul>
&lt;li>Access the map to use the methods described above:
&lt;syntaxhighlight lang="C#">
Map map = location.map;
&lt;/syntaxhighlight>&lt;/li>

&lt;li>Manage tile properties:
&lt;syntaxhighlight lang="C#">
Town town = (Town)Game1.getLocationFromName("Town");
int tileX = 10;
int tileY = 20;

// get property value
string diggable = town.doesTileHaveProperty(tileX, tileY, "Diggable", "Back");

// set property value
location.setTileProperty(tileX, tileY, "Back", "Diggable", "T");
&lt;/syntaxhighlight>&lt;/li>

&lt;li>Manage tiles:
&lt;syntaxhighlight lang="C#">
location.removeTile(tileX, tileY, "Back");
&lt;/syntaxhighlight>&lt;/li>
&lt;/ul>

==Modder Help and Tricks==
* Feel Free to visit the Stardew Valley Discord and ask for help if you need it in the #Making Mods Section.
* Discord user foggywizard#7430 [https://imgur.com/a/l1Ql16D annotated some screenshot guides for using Tiled]. These include an annotated overview, how to find where the coordinates are, and how to rename a tilesheet.
* [https://stardewmodding.wiki.gg/wiki/Tutorial:How_Draylon_curves_his_cliffs Tutorial]: How Discord user Draylon curves his cliffs

[[Category:Modding]]

[[ru:Модификации:Карты]]
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Templates used on this page:
</p></div><ul>
<li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:Nexus_mod" title="Template:Nexus mod">Template:Nexus mod</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:Nexus_mod&amp;action=edit" title="Template:Nexus mod">view source</a>) </li><li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:Note_box" title="Template:Note box">Template:Note box</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:Note_box&amp;action=edit" title="Template:Note box">view source</a>) </li><li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:O" title="Template:O">Template:O</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:O&amp;action=edit" title="Template:O">view source</a>) </li><li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:T" title="Template:T">Template:T</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:T&amp;action=edit" title="Template:T">view source</a>) </li><li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:TOC" title="Template:TOC">Template:TOC</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:TOC&amp;action=edit" title="Template:TOC">view source</a>) </li><li><a href="../../external.html?link=https://stardewvalleywiki.com/Template:TOC/limit-styles.css" title="Template:TOC/limit-styles.css">Template:TOC/limit-styles.css</a> (<a href="../../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php?title=Template:TOC/limit-styles.css&amp;action=edit" title="Template:TOC/limit-styles.css">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps" title="Modding:Maps">Modding:Maps</a>.</p>
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="../../external.html?link=https://stardewvalleywiki.com/Modding:Maps">https://stardewvalleywiki.com/Modding:Maps</a>"</div>
</div>
			<div class="post-content" id="page-secondary-actions">
			
			</div>
		</main>
		<footer class="mw-footer minerva-footer">
		
		<div class="post-content footer-content">
			
			<h2>Stardew Valley Wiki</h2>
			<div class="license">Content is available under <a class="external" rel="nofollow" href="../../external.html?link=https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</div>
			<ul class="footer-info hlist hlist-separated">
				
			</ul>
			<ul class="footer-places hlist hlist-separated">
				<li id="footer-places-privacy"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:Privacy_policy" title="Stardew Valley Wiki:Privacy policy">Privacy policy</a></li><li id="footer-places-about"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:About" title="Stardew Valley Wiki:About">About Stardew Valley Wiki</a></li><li id="footer-places-disclaimer"><a href="../../external.html?link=https://stardewvalleywiki.com/Stardew_Valley_Wiki:General_disclaimer" title="Stardew Valley Wiki:General disclaimer">Disclaimers</a></li><li id="footer-places-desktop-toggle"><a id="mw-mf-display-toggle" href="../../external.html?link=http://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Maps&amp;action=edit&amp;mobileaction=toggle_view_desktop">Desktop</a></li>
			</ul>
		</div>
		</footer>
	</div>
</div>
<div class="mw-notification-area" data-mw="interface"></div>
<!-- v:8.3.0 -->

<script src="../../external.html?link=https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(window.NORLQ=window.NORLQ||[]).push(function(){var ns,i,p,img;ns=document.getElementsByTagName('noscript');for(i=0;i<ns.length;i++){p=ns[i].nextSibling;if(p&&p.className&&p.className.indexOf('lazy-image-placeholder')>-1){img=document.createElement('img');img.setAttribute('src',p.getAttribute('data-src'));img.setAttribute('width',p.getAttribute('data-width'));img.setAttribute('height',p.getAttribute('data-height'));img.setAttribute('alt',p.getAttribute('data-alt'));p.parentNode.replaceChild(img,p);}}});</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":59});});</script>		</body>
		

</html>
		


