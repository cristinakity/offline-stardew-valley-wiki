<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">


<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Modding:Migrate to Stardew Valley 1.5.5 - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"3203a6d5a256cb7c08c4e533","wgCSPNonce":!1,"wgCanonicalNamespace":"Modding","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":570,"wgPageName":"Modding:Migrate_to_Stardew_Valley_1.5.5","wgTitle":"Migrate to Stardew Valley 1.5.5","wgCurRevisionId":160135,"wgRevisionId":160135,"wgArticleId":13270,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Modding:Migrate_to_Stardew_Valley_1.5.5","wgRelevantArticleId":13270,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgMFMode":
"stable","wgMFAmc":!1,"wgMFAmcOutreachActive":!1,"wgMFAmcOutreachUserEligible":!1,"wgMFLazyLoadImages":!0,"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,"watchlist":!1,"tagline":!1},"wgMFIsPageContentModelEditable":!0,"wgCargoMapClusteringMinimum":80,"wgCargoMonthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"wgCargoMonthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgCargoWeekDays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"wgCargoWeekDaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"wgMinervaPermissions":{"watch":!0,"talk":!1},"wgMinervaFeatures":{"beta":!1,"donate":!0,"mobileOptionsLink":!0,"categories":!1,"pageIssues":!0,"talkAtTop":!1,"historyInPageActions":!1,"overflowSubmenu":!1,"tabsOnSpecials":!1,"personalMenu":!1,"mainMenuExpanded":!1,"simplifiedTalk":!0}
,"wgMinervaDownloadNamespaces":[0]};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.minerva.base.styles":"ready","skins.minerva.content.styles":"ready","skins.minerva.content.styles.images":"ready","mediawiki.hlist":"ready","mediawiki.ui.icon":"ready","mediawiki.ui.button":"ready","skins.minerva.icons.wikimedia":"ready","skins.minerva.mainMenu.icons":"ready","skins.minerva.mainMenu.styles":"ready","mobile.init.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","skins.minerva.options","skins.minerva.scripts","mobile.init"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="mediawiki/loadaf7f.css?lang=en&amp;modules=ext.pygments%7Cmediawiki.hlist%7Cmediawiki.ui.button%2Cicon%7Cmobile.init.styles%7Cskins.minerva.base.styles%7Cskins.minerva.content.styles%7Cskins.minerva.content.styles.images%7Cskins.minerva.icons.wikimedia%7Cskins.minerva.mainMenu.icons%2Cstyles&amp;only=styles&amp;skin=minerva"/>
<script async="" src="mediawiki/loadc82b.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=minerva&amp;target=mobile"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="mediawiki/load1154.css?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=minerva"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="description" content="←Index"/>
<meta name="theme-color" content="#eaecf0"/>
<meta name="viewport" content="initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0, width=device-width"/>
<link rel="manifest" href="mediawiki/api-resultc989.json?action=webapp-manifest"/>
<link rel="shortcut icon" href="mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="mediawiki/api-result251f.xml?action=rsd"/>
<link rel="license" href="../creativecommons.org/licenses/by-nc-sa/3.0/index.html"/>
<meta property="og:title" content="Modding:Migrate to Stardew Valley 1.5.5 - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://stardewvalleywiki.com/Modding:Migrate_to_Stardew_Valley_1.5.5"/>
<meta property="og:description" content="←Index"/>
<meta property="og:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="article:modified_time" content="2024-03-25T20:42:58Z"/>
<meta property="article:published_time" content="2024-03-25T20:42:58Z"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="Modding:Migrate to Stardew Valley 1.5.5 - Stardew Valley Wiki"/>
<meta property="twitter:description" content="←Index"/>
<meta property="twitter:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"Modding:Migrate to Stardew Valley 1.5.5 - Stardew Valley Wiki","headline":"Modding:Migrate to Stardew Valley 1.5.5 - Stardew Valley Wiki","mainEntityOfPage":"Modding:Migrate to Stardew Valley 1.5.5","identifier":"https:\/\/stardewvalleywiki.com\/Modding:Migrate_to_Stardew_Valley_1.5.5","url":"https:\/\/stardewvalleywiki.com\/Modding:Migrate_to_Stardew_Valley_1.5.5","description":"\u2190Index","dateModified":"2024-03-25T20:42:58Z","datePublished":"2024-03-25T20:42:58Z","image":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-570 ns-subject page-Modding_Migrate_to_Stardew_Valley_1_5_5 rootpage-Modding_Migrate_to_Stardew_Valley_1_5_5 stable skin-minerva action-view skin-vector-legacy">
<div id="mw-mf-viewport">
	<div id="mw-mf-page-center">
		<a class="mw-mf-page-center__mask" href="#"></a>
		<header class="header-container header-chrome">
			<form class="header" action="../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php" method="get">
				<nav class="navigation-drawer toggle-list view-border-box">
					<input type="checkbox" id="main-menu-input" class="toggle-list__checkbox" role="button" aria-labelledby="mw-mf-main-menu-button">
					<label for="main-menu-input" id="mw-mf-main-menu-button"
						class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-menu-base20 mw-ui-icon-flush-left toggle-list__toggle"
						title="Open main menu" data-event-name="ui.mainmenu">Open main menu</label>
					<div id="mw-mf-page-left" class="menu toggle-list__list view-border-box">
	<ul id="p-navigation">
			<li class="">
			    <a href="Stardew_Valley_Wiki.html" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-home" data-event-name="menu.home"><span>Home</span></a>
			</li>
			<li class="">
			    <a href="Wizard_Bookshelf.html#/random" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-die " data-event-name="menu.random"><span>Random</span></a>
			</li>
	</ul>
	<ul id="p-personal">
			<li class="">
			    <a href="mediawiki/index4536.html?title=Special:UserLogin&amp;returnto=Modding%3AMigrate+to+Stardew+Valley+1.5.5" class="menu__item--login mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-logIn " data-event-name="menu.login"><span>Log in</span></a>
			</li>
	</ul>
	<ul id="pt-preferences">
			<li class="jsonly">
			    <a href="mediawiki/index1ec9.html?title=Special:MobileOptions&amp;returnto=Modding%3AMigrate+to+Stardew+Valley+1.5.5" class="menu__item--settings mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-settings " data-event-name="menu.settings"><span>Settings</span></a>
			</li>
	</ul>
	<ul class="hlist">
			<li class="">
			    <a href="Stardew_Valley_Wiki_About.html" class="" data-event-name=""><span>About Stardew Valley Wiki</span></a>
			</li>
			<li class="">
			    <a href="Stardew_Valley_Wiki_General_disclaimer.html" class="" data-event-name=""><span>Disclaimers</span></a>
			</li>
	</ul>
</div>

					<label class="main-menu-mask" for="main-menu-input"></label>
				</nav>
				<div class="branding-box">
					<a href="Stardew_Valley_Wiki.html">
						<span>Stardew Valley Wiki</span>
						
					</a>
				</div>
				<div class="search-box">
					<input class="search mw-ui-background-icon-search skin-minerva-search-trigger" type="search" name="search" id="searchInput"
						autocomplete="off" placeholder="Search Stardew Valley Wiki" aria-label="Search Stardew Valley Wiki"
						value="">
				</div>
				<nav class="minerva-user-navigation" aria-label="User navigation">
					<div><button id="searchIcon" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-search-base20 skin-minerva-search-trigger" type="submit">Search</button></div>
					
				</nav>
			</form>
		</header>
		<main id="content" class="mw-body">
			<div class="banner-container">
			<div id="siteNotice"></div>
			</div>
			
			<div class="pre-content heading-holder">
				<div class="page-heading">
					<h1 id="section_0">Modding:Migrate to Stardew Valley 1.5.5</h1>
					<div class="tagline"></div>
				</div>
				<nav class="page-actions-menu">
	<ul id="page-actions" class="page-actions-menu__list">
		<li id="language-selector" class="page-actions-menu__list-item">
				<a id="" href="Special_MobileLanguages/Modding_Migrate_to_Stardew_Valley_1.5.html" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-language-base20 mw-ui-icon-with-label-desktop language-selector"
					data-mw="interface"
					data-event-name="menu.languages" role="button" title="Language">Language</a>
		</li>
		<li id="page-actions-watch" class="page-actions-menu__list-item">
				<a id="ca-watch" href="mediawiki/index4536.html?title=Special:UserLogin&amp;returnto=Modding%3AMigrate+to+Stardew+Valley+1.5.5" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-star-base20 mw-ui-icon-with-label-desktop watch-this-article mw-watchlink menu__item--page-actions-watch"
					data-mw="interface"
					data-event-name="menu.watch" role="button" title="Watch">Watch</a>
		</li>
		<li id="page-actions-edit" class="page-actions-menu__list-item">
				<a id="ca-edit" href="mediawiki/index43bb.html?title=Modding:Migrate_to_Stardew_Valley_1.5.5&amp;action=edit&amp;section=0" class="edit-page menu__item--page-actions-edit mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-editLock-base20 mw-ui-icon-with-label-desktop"
					data-mw="interface"
					data-event-name="menu.edit" role="button" title="Edit the lead section of this page">Edit</a>
		</li>
	</ul>
</nav>
<!-- version 1.0.2 (change every time you update a partial) -->

				
				
				<div class="minerva__subtitle"></div>
			</div>
			
			<div id="bodyContent" class="content"><div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><script>function mfTempOpenSection(id){var block=document.getElementById("mf-section-"+id);block.className+=" open-block";block.previousSibling.className+=" open-block";}</script><div class="mw-parser-output"><section class="mf-section-0" id="mf-section-0"><p>←<a href="Modding_Index.html" title="Modding:Index">Index</a>
</p>
<div style="border: 1px solid orange; border-left: 1em solid orange; padding: 0.5em 1em; border-radius: 5px;">
<p><b>This page is for mod authors. Players: see <a href="Modding_Mod_compatibility.html" title="Modding:Mod compatibility">Modding:Mod compatibility</a> instead.</b>
</p>
</div>
<p><br>
This page explains how to update your mods for compatibility with <a href="Version_History.html#1.5.5" title="Version History">Stardew Valley 1.5.5</a>, and documents some of the changes and new functionality.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Breaking_changes_for_SMAPI_mods"><span class="tocnumber">1</span> <span class="toctext">Breaking changes for SMAPI mods</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#64-bit_MonoGame_and_.NET_5"><span class="tocnumber">1.1</span> <span class="toctext">64-bit MonoGame and .NET 5</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Asset_name_format_change"><span class="tocnumber">1.2</span> <span class="toctext">Asset name format change</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Game_compatibility_branch"><span class="tocnumber">1.3</span> <span class="toctext">Game compatibility branch</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Game_assembly_name"><span class="tocnumber">1.4</span> <span class="toctext">Game assembly name</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#New_assembly_reference_model"><span class="tocnumber">1.5</span> <span class="toctext">New assembly reference model</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Breaking_changes_for_Content_Patcher_packs"><span class="tocnumber">2</span> <span class="toctext">Breaking changes for Content Patcher packs</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#XNB_impact"><span class="tocnumber">2.1</span> <span class="toctext">XNB impact</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#New_features_for_SMAPI_mods"><span class="tocnumber">3</span> <span class="toctext">New features for SMAPI mods</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Scarecrow_changes"><span class="tocnumber">3.1</span> <span class="toctext">Scarecrow changes</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Horse_footstep_changes"><span class="tocnumber">3.2</span> <span class="toctext">Horse footstep changes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#New_features_for_Content_Patcher_packs"><span class="tocnumber">4</span> <span class="toctext">New features for Content Patcher packs</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Custom_farm_types"><span class="tocnumber">4.1</span> <span class="toctext">Custom farm types</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Custom_languages"><span class="tocnumber">4.2</span> <span class="toctext">Custom languages</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Custom_festival_location_names"><span class="tocnumber">4.3</span> <span class="toctext">Custom festival location names</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Custom_spouse_rooms"><span class="tocnumber">4.4</span> <span class="toctext">Custom spouse rooms</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Custom_spouse_outside_areas"><span class="tocnumber">4.5</span> <span class="toctext">Custom spouse outside areas</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Custom_farmhouse_renovations"><span class="tocnumber">4.6</span> <span class="toctext">Custom farmhouse renovations</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Custom_floors.2Fwalls"><span class="tocnumber">4.7</span> <span class="toctext">Custom floors/walls</span></a>
<ul>
<li class="toclevel-3 tocsection-20"><a href="#In_decoratable_locations"><span class="tocnumber">4.7.1</span> <span class="toctext">In decoratable locations</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#In_the_furniture_catalogue"><span class="tocnumber">4.7.2</span> <span class="toctext">In the furniture catalogue</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-22"><a href="#Map_property_changes"><span class="tocnumber">4.8</span> <span class="toctext">Map property changes</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Non-Krobus_roommates"><span class="tocnumber">4.9</span> <span class="toctext">Non-Krobus roommates</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#Custom_mail_formatting"><span class="tocnumber">4.10</span> <span class="toctext">Custom mail formatting</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#Custom_scarecrows"><span class="tocnumber">4.11</span> <span class="toctext">Custom scarecrows</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Improved_map_seats"><span class="tocnumber">4.12</span> <span class="toctext">Improved map seats</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27"><a href="#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(1)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span class="mw-headline" id="Breaking_changes_for_SMAPI_mods">Breaking changes for SMAPI mods</span></h2><section class="mf-section-1 collapsible-block" id="mf-section-1">
<h3 class="in-block"><span class="mw-headline" id="64-bit_MonoGame_and_.NET_5">64-bit MonoGame and .NET 5</span></h3>
<p>Stardew Valley 1.5.5 migrates to 64-bit MonoGame and .NET 5 on all platforms. SMAPI rewrites mods so they should mostly still work, but posting an update for every C# mod is strongly recommended to avoid edge cases.
</p><p>To update your C# mod code:
</p>
<ol>
<li><a href="Modding_Migrate_to_64-bit_on_Windows.html#How_do_I_update_mod_code_for_64-bit.3F" title="Modding:Migrate to 64-bit on Windows">Enable 64-bit compatibility</a> if you haven't already. (Unless you explicitly changed the project settings, mods are 64-bit ready by default.)</li>
<li>Migrate your <samp>.csproj</samp> files to the new format if you haven't already:<ol>
<li>Replace your mod's <samp>.csproj</samp> file with this:
<div class="mw-highlight mw-highlight-lang-xml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;AssemblyName&gt;</span>EXAMPLE_MOD_NAME<span class="nt">&lt;/AssemblyName&gt;</span>
    <span class="nt">&lt;RootNamespace&gt;</span>EXAMPLE_MOD_NAME<span class="nt">&lt;/RootNamespace&gt;</span>
    <span class="nt">&lt;Version&gt;</span>1.0.0<span class="nt">&lt;/Version&gt;</span>
    <span class="nt">&lt;TargetFramework&gt;</span>net5.0<span class="nt">&lt;/TargetFramework&gt;</span>
    <span class="nt">&lt;LangVersion&gt;</span>Latest<span class="nt">&lt;/LangVersion&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>

  <span class="nt">&lt;ItemGroup&gt;</span>
    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Pathoschild.Stardew.ModBuildConfig"</span> <span class="na">Version=</span><span class="s">"4.1.1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/ItemGroup&gt;</span>
<span class="nt">&lt;/Project&gt;</span>
</pre></div>
</li>
<li>If the mod uses <a href="Modding_Modder_Guide/APIs/Harmony.html" title="Modding:Modder Guide/APIs/Harmony">Harmony</a>, add <code>&lt;EnableHarmony&gt;true&lt;/EnableHarmony&gt;</code> to the property group.</li>
<li>Update the <samp>AssemblyName</samp>, <samp>RootNamespace</samp>, and <samp>Version</samp> tags. (You can delete the <samp>AssemblyName</samp> and <samp>RootNamespace</samp> tags if they just match the project name.)</li>
<li>Add any other NuGet packages you used, if any.</li>
</ol>
<p>If you're using the simplified format already, you just need to update version numbers in the .csproj file:
</p>
<ol>
<li>Replace <code>&lt;TargetFramework&gt;net452&lt;/TargetFramework&gt;</code> with <code>&lt;TargetFramework&gt;net5.0&lt;/TargetFramework&gt;</code>.</li>
<li>Replace <code>&lt;PackageReference Include="Pathoschild.Stardew.ModBuildConfig" Version="3.3.0" /&gt;</code> with <code>&lt;PackageReference Include="Pathoschild.Stardew.ModBuildConfig" Version="4.1.1" /&gt;</code></li>
</ol>
</li>
<li>Delete the <samp>Properties/AssemblyInfo.cs</samp> file, <samp>packages</samp> folder, and <samp>packages.config</samp> file (if present).</li>
<li>Exit Visual Studio.</li>
<li>Delete your solution's hidden <samp>.vs</samp> folder, and every project's <samp>bin</samp> and <samp>obj</samp> folders.</li>
<li>Reopen the solution in Visual Studio, click <i>Build &gt; Rebuild Solution</i>, fix any errors, and test the mod in-game.</li>
</ol>
<p>Specific things to check for:
</p>
<ul><li><a href="Modding_Modder_Guide/APIs/Utilities.html#Constants" title="Modding:Modder Guide/APIs/Utilities"><code>Constants.GameFramework</code></a> now always returns <samp>MonoGame</samp>. Any code which checks for <samp>Xna</samp> can be removed or rewritten.</li></ul>
<p>If you need help, feel free to ask in <a href="Modding_Community.html#Discord" title="Modding:Community">#making-mods on the Stardew Valley Discord</a>!
</p>
<h3 class="in-block"><span class="mw-headline" id="Asset_name_format_change">Asset name format change</span></h3>
<p>Some background first:
</p>
<ul><li>An <i>asset name</i> identifies an asset you can load through a content API like <code>Game1.content.Load&lt;T&gt;("asset name")</code>. For example: <code>Characters/Abigail</code>.</li>
<li>A <i>file path</i> identifies a physical file on the computer. For example: <code>C:\Program Files (x86)\Steam\steamapps\common\Stardew Valley\Content\Characters\Abigail.xnb</code>.</li></ul>
<p>Stardew Valley 1.5.5 makes that distinction more important, since MonoGame uses Linux-style separators in asset names on all platforms. That means <b>asset names no longer match path conventions on Windows</b>.
</p><p>You should review all code in your mods that creates/compares paths, check whether it's actually creating/comparing asset names, and if so migrate it to the equivalent methods:
</p>
<table class="wikitable">

<tbody><tr>
<th>code for file paths
</th>
<th>code for asset names
</th></tr>
<tr>
<td><code>PathUtilities.NormalizePath("a/b")</code>
</td>
<td><code>PathUtilities.NormalizeAssetName("a/b")</code>
</td></tr>
<tr>
<td><code>Path.Combine("a", "b")</code>
</td>
<td><code>PathUtilities.NormalizeAssetName("a/b")</code>
</td></tr>
<tr>
<td><code>Path.DirectorySeparatorChar</code>
</td>
<td><code>PathUtilities.AssetDirectorySeparator</code>
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Game_compatibility_branch">Game compatibility branch</span></h3>
<dl><dd><i>Main article: <a href="Modding_Player_Guide/Troubleshooting.html#SMAPI_doesn.27t_work_with_compatibility_branch" title="Modding:Player Guide/Troubleshooting">Modding:Player Guide/Troubleshooting#SMAPI doesn't work with compatibility branch</a></i></dd></dl>
<p>Stardew Valley 1.5.5 is available in two branches on each OS: the <i>main branch</i> which is installed by default, and an optional <a rel="nofollow" class="external text" href="../external.html?link=https://www.stardewvalley.net/compatibility"><i>compatibility branch</i> for older systems</a>. These have identical content for players, but use different frameworks:
</p>
<table class="wikitable">

<tbody><tr>
<th>branch
</th>
<th>OS
</th>
<th>game framework
</th>
<th>runtime
</th></tr>
<tr style="color: #090;">
<td rowspan="2">main
</td>
<td>Linux/macOS
</td>
<td>MonoGame 3.8
</td>
<td>64-bit .NET 5
</td></tr>
<tr style="color: #090;">
<td>Windows
</td>
<td>MonoGame 3.8
</td>
<td>64-bit .NET 5
</td></tr>
<tr style="color: #900;">
<td rowspan="2">compatibility
</td>
<td>Linux/macOS
</td>
<td>MonoGame 3.5.1
</td>
<td>64-bit Mono 4.5
</td></tr>
<tr style="color: #900;">
<td>Windows
</td>
<td>XNA Framework 4.0
</td>
<td>32-bit .NET Framework 4.5
</td></tr></tbody></table>
<p>Unfortunately <b>SMAPI only supports the main branch of the game currently.</b> There are formidable difficulties across all mods in supporting all three variations, 32-bit imposes significant restrictions on what mods can do, and the <a rel="nofollow" class="external text" href="../external.html?link=https://store.steampowered.com/hwsurvey">Steam hardware stats</a> show that ≈99.69% of players have 64-bit.
</p><p>Having two versions of SMAPI (like we do for Linux/macOS vs Windows compatibility) wouldn't be enough in this case. Every C# mod author would need to manually port two versions of every update of every mod forever, which is prohibitively unfeasible. It's possible that in the future we'll either figure out how SMAPI can automatically rewrite mods for the compatibility branch, or some modders may port SMAPI and individual mods to the compatibility branch.
</p>
<h3 class="in-block"><span class="mw-headline" id="Game_assembly_name">Game assembly name</span></h3>
<p>Previously the game assembly was <code>Stardew Valley</code> on Windows, and <code>StardewValley</code> on Linux and macOS. The assembly is now named <code>Stardew Valley</code> on all platforms. Most mods shouldn't be affected once you update the mod build package.
</p>
<h3 class="in-block"><span class="mw-headline" id="New_assembly_reference_model">New assembly reference model</span></h3>
<p>If your mod references a <samp>.dll</samp> file manually, note that assembly references are handled differently in .NET 5. Custom assemblies are no longer copied into your mod's folder by default, which may break your mod. In that case you need to explicitly enable assembly bundling in your project file; see <code>BundleExtraAssemblies</code> in the <a rel="nofollow" class="external text" href="../external.html?link=https://smapi.io/package">mod build package</a> documentation for details.
</p>
</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(2)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span class="mw-headline" id="Breaking_changes_for_Content_Patcher_packs">Breaking changes for Content Patcher packs</span></h2><section class="mf-section-2 collapsible-block" id="mf-section-2">
<h3 class="in-block"><span class="mw-headline" id="XNB_impact">XNB impact</span></h3>
<p>Here's a summary of the XNB files which changed in Stardew Valley 1.5.5.
</p><p>Notes:
</p>
<ul><li>This ignores text changes in non-English files for simplicity.</li>
<li>New content files aren't listed, since they won't impact existing mods.</li>
<li>XNB mods are disproportionately affected, since they replace the entire file. Content Patcher packs are typically unaffected unless they replace the entire file (in which case see the XNB mod column).</li></ul>
<p>Shorthand:
</p>
<ul><li>'broken' means removing new content or potentially important changes, or potentially causing significant display bugs. This is a broad category — the game may work fine without it or crash, depending how it uses that specific content.</li>
<li>'mostly unaffected' means mods will only be affected if they edit specific entries or fields.</li>
<li>Blank means no expected impact for the vast majority of mods.</li></ul>
<table class="wikitable">

<tbody><tr>
<th>content file
</th>
<th>changes
</th>
<th>XNB
</th>
<th>Content Patcher
</th></tr>
<tr>
<td><samp>Data/TV/TipChannel</samp>
</td>
<td>fixed typo
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Effects/BloomCombine</samp><br><samp>Effects/BloomExtract</samp><br><samp>Effects/GaussianBlur</samp>
</td>
<td>deleted
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>Fonts/*</samp>
</td>
<td>no changes<br>(<a href="Modding_Editing_XNB_files.html#unpack" title="Modding:Editing XNB files">unpacked format</a> may differ on Windows due to <a href="#64-bit_MonoGame_and_.NET_5">MonoGame</a>)
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td><samp>LooseSprites/Cursors2</samp>
</td>
<td>new sprite in empty area
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Desert</samp>
</td>
<td>cosmetic fixes
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/ElliottHouse</samp>
</td>
<td>minor fixes
</td>
<td>✘ will remove changes
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Maps/Farm</samp><br><samp>Maps/Farm_Combat</samp><br><samp>Maps/Farm_Fishing</samp><br><samp>Maps/Farm_Foraging</samp><br><samp>Maps/Farm_FourCorners</samp><br><samp>Maps/Farm_Island</samp><br><samp>Maps/Farm_Mining</samp>
</td>
<td>cave and shipping areas now use tile properties to disable building, instead of being hardcoded
</td>
<td>✘ will remove those build restrictions
</td>
<td>✘ may remove those build restrictions
</td></tr>
<tr>
<td><samp>Maps/FarmHouse</samp><br><samp>Maps/FarmHouse1</samp><br><samp>Maps/FarmHouse1_marriage</samp><br><samp>Maps/FarmHouse2</samp><br><samp>Maps/FarmHouse2_marriage</samp><br><samp>Maps/Farmhouse_*</samp> renovation maps<br><samp>Maps/IslandFarmHouse</samp><br><samp>Maps/Shed</samp><br><samp>Maps/Shed2</samp>
</td>
<td>added new <a href="#Custom_floors.2Fwalls">wall/flooring properties</a>
</td>
<td><b>✘ broken</b> (will disable most floor/walls when renovations applied)
</td>
<td>✘ may disable some floor/walls when renovations applied
</td></tr>
<tr>
<td><samp>Maps/spouseRooms</samp>
</td>
<td>added <a href="#Custom_spouse_rooms">spouse standing spots</a> (defaults to old offset if not set)
</td>
<td>✓ mostly unaffected
</td>
<td>✓ mostly unaffected
</td></tr>
<tr>
<td><samp>Strings/Locations</samp>
</td>
<td>changed <samp>ManorHouse_DivorceBook_*</samp> entries to support <a href="#Non-Krobus_roommates">Non-Krobus roommates</a>
</td>
<td><b>✘ broken</b>
</td>
<td>✓ mostly unaffected
</td></tr></tbody></table>
</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(3)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span class="mw-headline" id="New_features_for_SMAPI_mods">New features for SMAPI mods</span></h2><section class="mf-section-3 collapsible-block" id="mf-section-3">
<dl><dd><i>See also <a href="#New_features_for_Content_Patcher_packs">new features for Content Patcher packs</a>, which apply for C# mods too.</i></dd></dl>
<h3 class="in-block"><span class="mw-headline" id="Scarecrow_changes">Scarecrow changes</span></h3>
<p>You can now patch <code>Object.IsScarecrow()</code> and/or <code>Object.GetRadiusForScarecrow()</code> (or add <a href="#Custom_scarecrows">context tags</a>) to support custom scarecrows or custom ranges.
</p>
<h3 class="in-block"><span class="mw-headline" id="Horse_footstep_changes">Horse footstep changes</span></h3>
<p>You can now override the footstep logic for a horse by setting its <samp>onFootstepAction</samp> field. For example:
</p>
<div class="mw-highlight mw-highlight-lang-c# mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Horse</span> <span class="n">horse</span> <span class="p">=</span> <span class="p">...;</span> <span class="c1">// get the horse instance you want to change</span>
<span class="n">horse</span><span class="p">.</span><span class="n">onFootstepAction</span> <span class="p">=</span> <span class="p">(</span><span class="kt">string</span> <span class="n">tileType</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
   <span class="c1">// play custom audio, etc</span>
<span class="p">};</span>
</pre></div>
</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(4)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span class="mw-headline" id="New_features_for_Content_Patcher_packs">New features for Content Patcher packs</span></h2><section class="mf-section-4 collapsible-block" id="mf-section-4">
<p>Stardew Valley 1.5.5 has no known breaking changes for content packs. All content packs should work fine once the framework mod that loads them is updated.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_farm_types">Custom farm types</span></h3>
<p>You can now add custom farm types by editing the <samp>Data/AdditionalFarms</samp> asset. Each entry consists of an object with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>description
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>A unique ID value. This must be <b>globally</b> unique across all mods, so you should prefix your mod ID (<i>e.g.,</i> <samp>Example.PineapplesAnywhere/PineappleFarm</samp>). You should avoid commas for compatibility with Content Patcher packs checking the <samp>{{FarmType}}</samp> token. This is not shown in-game.
</td></tr>
<tr>
<td><samp>TooltipStringPath</samp>
</td>
<td>Where to get the translatable farm name and description. This must be a key in the form <samp><code title="required field 'asset name'">&lt;asset name&gt;</code>:<code title="required field 'key'">&lt;key&gt;</code></samp>; for example, <samp>Strings/UI:Farm_Description</samp> will get it from the <samp>Farm_Description</samp> entry in the <samp>Strings/UI</samp> file. The translated text must be in the form "<samp><code title="required field 'name'">&lt;name&gt;</code>_<code title="required field 'description'">&lt;description&gt;</code></samp>", like "Pineapple Farm_A farm shaped like a pineapple".
</td></tr>
<tr>
<td><samp>MapName</samp>
</td>
<td>The map asset name relative to the <samp>Maps</samp> folder. For example, <samp>Farm_Pineapple</samp> would load <samp>Maps/Farm_Pineapple</samp>.
</td></tr>
<tr>
<td><samp>IconTexture</samp>
</td>
<td><i>(optional)</i> The asset name for a 22x20 pixel icon texture, shown on the 'New Game' and co-op join screens.
</td></tr>
<tr>
<td><samp>WorldMapTexture</samp>
</td>
<td><i>(optional)</i> The asset name for a 131x61 pixel texture that's drawn over the farm area in the in-game world map.
</td></tr>
<tr>
<td><samp>ModData</samp>
</td>
<td><i>(optional)</i> A string→string dictionary of mod-specific metadata for the farm, which can be accessed in C# code via <samp>Game1.GetFarmTypeModData(key)</samp>.
</td></tr></tbody></table>
<p>For example, this Content Patcher pack would create a 'pineapple' farm:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// add farm type</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/AdditionalFarms"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"ExampleAuthor.PineappleFarm/PineappleFarm"</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// for technical reasons, you need to specify the ID here *and* in the "ID" field</span>
                    <span class="s2">"ID"</span><span class="o">:</span> <span class="s2">"ExampleAuthor.PineappleFarm/PineappleFarm"</span><span class="p">,</span>
                    <span class="s2">"TooltipStringPath"</span><span class="o">:</span> <span class="s2">"Strings/UI:ExampleAuthor_PineappleFarm"</span><span class="p">,</span>
                    <span class="s2">"MapName"</span><span class="o">:</span> <span class="s2">"ExampleAuthor_PineappleFarm"</span><span class="p">,</span>
                    <span class="s2">"IconTexture"</span><span class="o">:</span> <span class="s2">"Mods/ExampleAuthor.PineappleFarm/Icon"</span><span class="p">,</span>
                    <span class="s2">"WorldMapTexture"</span><span class="o">:</span> <span class="s2">"Mods/ExampleAuthor.PineappleFarm/WorldMap"</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// add farm name + description</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Strings/UI"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"ExampleAuthor_PineappleFarm"</span><span class="o">:</span> <span class="s2">"Pineapple Farm_A farm shaped like a pineapple!"</span> <span class="c1">// tip: use {{i18n}} to translate it</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// load map</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"Load"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Maps/ExampleAuthor_PineappleFarm"</span><span class="p">,</span>
            <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/map.tmx"</span>
        <span class="p">},</span>

        <span class="c1">// load icon</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"Load"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Mods/ExampleAuthor.PineappleFarm/Icon, Mods/ExampleAuthor.PineappleFarm/WorldMap"</span><span class="p">,</span>
            <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/{{TargetWithoutPath}}.png"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Custom_languages">Custom languages</span></h3>
<dl><dd><i>Main article: <a href="Modding_Custom_languages.html" title="Modding:Custom languages">Modding:Custom languages</a></i></dd></dl>
<p>You can now add custom languages by editing the <samp>Data/AdditionalLanguages</samp> asset. Each entry consists of an object with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>description
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>A unique ID value. This is not shown in-game.
</td></tr>
<tr>
<td><samp>LanguageCode</samp>
</td>
<td>The language code for this localization. This should ideally be a <a href="../external.html?link=https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes" class="extiw" title="wikipedia:List of ISO 639-1 codes">ISO 639-1 code</a>. You should avoid commas for compatibility with Content Patcher packs checking the <samp>{{Language}}</samp> token.
</td></tr>
<tr>
<td><samp>ButtonTexture</samp>
</td>
<td>The asset name for a 174x78 pixel texture containing the button of the language for language selection menu. The top half of the sprite is the default state, while the bottom half is the hover state.
</td></tr>
<tr>
<td><samp>UseLatinFont</samp>
</td>
<td>Whether the language uses the same Latin character font as English. If set to <samp>false</samp>, you must set the <samp>FontFile</samp> field.
</td></tr>
<tr>
<td><samp>TimeFormat</samp>
</td>
<td>A string which describes the in-game time format, with tokens replaced by in-game values. For example, <code>[HOURS_12]:[MINUTES] [AM_PM]</code> would show <code>12:00 PM</code> at noon.
<p>The valid tokens are:
</p>
<ul><li><code>[HOURS_12]</code>: hours in 12-hour format, where midnight and noon are both "12".</li>
<li><code>[HOURS_12_0]</code>: hours in 12-hour format, where midnight and noon are both "0".</li>
<li><code>[HOURS_24]</code>: hours in 24-hour format, where midnight is "0" and noon is "12".</li>
<li><code>[HOURS_24_00]</code>: hours in 24-hour format with zero-padding, where midnight is "00" and noon is "12".</li>
<li><code>[MINUTES]</code>: minutes with zero-padding.</li>
<li><code>[AM_PM]</code>: the localized text for "am" or "pm" (taken from <code>Strings\\StringsFromCSFiles:DayTimeMoneyBox.cs.10370</code> and <code>DayTimeMoneyBox.cs.10371</code> respectively). The game shows "pm" between noon and 11:59pm inclusively; it shows "am" otherwise.</li></ul>
</td></tr>
<tr>
<td><samp>ClockTimeFormat</samp>
</td>
<td>A string which describes the in-game time format. Equivalent to <samp>TimeFormat</samp>, but used for the in-game clock.
</td></tr>
<tr>
<td><samp>ClockDateFormat</samp>
</td>
<td>A string which describes the in-game date format as shown in the in-game clock, with tokens replaced by in-game values. For example, <code>[DAY_OF_WEEK]. [DAY_OF_MONTH]</code> would show <code>Mon. 1</code>.
<p>The valid tokens are:
</p>
<ul><li><code>[DAY_OF_WEEK]</code>: the abbreviated day of week as returned by <code>Game1.shortDayDisplayNameFromDayOfSeason</code> (like <samp>Mon</samp> for Monday).</li>
<li><code>[DAY_OF_MONTH]</code>: the numerical day of the month.</li></ul>
</td></tr>
<tr>
<td><samp>FontFile</samp>
</td>
<td><i>(optional)</i> The asset name for the font file to use (if <samp>UseLatinFont</samp> is <samp>false</samp>).
</td></tr>
<tr>
<td><samp>FontPixelZoom</samp>
</td>
<td><i>(optional)</i> A factor by while to multiply the font size.
</td></tr>
<tr>
<td><samp>FontApplyYOffset</samp>
</td>
<td><i>(optional)</i> Whether to shift the font up by four pixels (multiplied by the <samp>FontPixelZoom</samp>), to better align languages with larger characters like Chinese and Japanese.
</td></tr>
<tr>
<td><samp>NumberComma</samp>
</td>
<td><i>(optional)</i> The string to use as the thousands separator (<i>e.g.,</i> <code>","</code> for <code>5,000,000</code>). Defaults to a comma.
</td></tr>
<tr>
<td><samp>SmallFontLineSpacing</samp>
</td>
<td><i>(optional)</i> The line spacing value used by <samp>smallFont</samp>. Defaults to 26.
</td></tr>
<tr>
<td><samp>UseGenderedCharacterTranslations</samp>
</td>
<td><i>(optional)</i> Whether the social tab and gift log will use gender-specific translations (like the vanilla Portuguese language). Defaults to false.
<p>Specifically, this affects the <samp>Strings\StringsFromCSFiles:SocialPage.cs.11635</samp> translation ("<i>(Single)</i>"). When enabled, it can contain male and female translations separated by <code>/</code>, like the vanilla Portuguese translation: "<i>(solteiro)/(solteira)</i>".
</p>
</td></tr></tbody></table>
<p>For example, this Content Patcher pack would add Esperanto to the game:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// define language</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/AdditionalLanguages"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"ExampleAuthor.Esperanto"</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// for technical reasons, you need to specify the ID here *and* in the "ID" field</span>
                    <span class="s2">"ID"</span><span class="o">:</span> <span class="s2">"ExampleAuthor.Esperanto"</span><span class="p">,</span>
                    <span class="s2">"LanguageCode"</span><span class="o">:</span> <span class="s2">"eo"</span><span class="p">,</span>
                    <span class="s2">"ButtonTexture"</span><span class="o">:</span> <span class="s2">"Mods/ExampleAuthor.Esperanto/Button"</span><span class="p">,</span>
                    <span class="s2">"UseLatinFont"</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="s2">"TimeFormat"</span><span class="o">:</span> <span class="s2">"[HOURS_24_00]:[MINUTES]"</span><span class="p">,</span>
                    <span class="s2">"ClockTimeFormat"</span><span class="o">:</span> <span class="s2">"[HOURS_24_00]:[MINUTES]"</span><span class="p">,</span>
                    <span class="s2">"ClockDateFormat"</span><span class="o">:</span> <span class="s2">"[DAY_OF_WEEK] [DAY_OF_MONTH]"</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// load button texture</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"Load"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Mods/ExampleAuthor.Esperanto/Button"</span><span class="p">,</span>
            <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/button.png"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<p>Once the language is defined, you can add translations to the game by patching game assets like usual, and use the language code you specified above. For example:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
    <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Strings/StringsFromCSFiles"</span><span class="p">,</span>
    <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"Game1.cs.3043"</span><span class="o">:</span> <span class="s2">"Lundo"</span><span class="p">,</span>
        <span class="s2">"Game1.cs.3044"</span><span class="o">:</span> <span class="s2">"Mardo"</span><span class="p">,</span>
        <span class="p">...</span>
    <span class="p">},</span>
    <span class="s2">"When"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"Language"</span><span class="o">:</span> <span class="s2">"eo"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Custom_festival_location_names">Custom festival location names</span></h3>
<p>The location name in the festival-started message (<i>e.g.,</i> "<i>The Luau has begun on the beach</i>") was previously hardcoded, so it would always show the internal name for non-vanilla festival locations. You can now add a <samp>locationDisplayName</samp> field in the <samp>Data/Festivals/*</samp> file to set the display name.
</p>
<h3 class="in-block"><span class="mw-headline" id="Custom_spouse_rooms">Custom spouse rooms</span></h3>
<p>Adding spouse rooms for custom NPCs is now much easier. 
</p>
<ul>
<li>You can edit the <samp>Data/SpouseRooms</samp> asset to add the spouse room info in this format: <code>"<code title="required field 'NPC name'">&lt;NPC name&gt;</code>": "<code title="required field 'map name'">&lt;map name&gt;</code>/<code title="required field 'map index'">&lt;map index&gt;</code>"</code>.

<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><code><code title="required field 'NPC name'">&lt;NPC name&gt;</code></code>
</td>
<td>The internal name of the NPC (<i>i.e.,</i> their key in <samp>Data/NPCDispositions</samp>).
</td></tr>
<tr>
<td><code><code title="required field 'map name'">&lt;map name&gt;</code></code>
</td>
<td>The asset name of the map in the game's <samp>Content/Maps</samp> folder. This can be a custom map loaded through Content Patcher's <samp>Load</samp> action or SMAPI's <samp>IAssetLoader</samp> API.
</td></tr>
<tr>
<td><code><code title="required field 'map index'">&lt;map index&gt;</code></code>
</td>
<td>The index of the spouse room within the map file, to allow multiple spouse rooms in the same file. Each spouse room is 6 tiles across by 9 tiles down, starting with index 0 in the top-left corner. You can have any number of rows and columns (the index will wrap at the end of the row), as long as they fit an integer number of spouse rooms.
</td></tr></tbody></table></li>
<li>You can mark where the spouse stands in their spouse room by placing the red circle path tile (tile index 7) on <a href="Modding_Maps.html#Paths_layer" title="Modding:Maps">the <samp>Paths</samp> layer</a>.</li>
<li>The spouse room maps are now applied using the game's newer map override system, so tile properties and custom tilesheets in the spouse room map are copied over automatically.</li>
<li>Some of the game's spouse room code (<i>e.g.,</i> positions for Sebastian's 14-heart frog terrarium) was updated to potentially allow moving spouse rooms around. However, some things like event positions are still hardcoded and will need to be fixed to fully support this feature.</li>
</ul>
<p>For example, this Content Patcher pack would add a spouse room for a new Akila NPC:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// register spouse room</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/SpouseRooms"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"Akila"</span><span class="o">:</span> <span class="s2">"ExampleAuthor_ExampleAkilaMod_SpouseRoom/0"</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// load spouse room map</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"Load"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Maps/ExampleAuthor_ExampleAkilaMod_SpouseRoom"</span><span class="p">,</span>
            <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/spouse-room.tmx"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Custom_spouse_outside_areas">Custom spouse outside areas</span></h3>
<p>You can now customize the <a href="Marriage.html#Spouse_Outside_Area" title="Marriage">spouse outside area</a> for any NPC by editing <samp>Data/SpousePatios</samp>, which has four slash-delimited fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>map asset name</samp>
</td>
<td>The asset name relative to the <samp>Content/Maps</samp> folder which contains the spouse area map. The map must contain one or more 4x4 tile areas, with any number of rows and columns.
</td></tr>
<tr>
<td><samp>index</samp>
</td>
<td>The index (starting at zero) within the map for the 4x4 area to use as the outdoor area.
</td></tr>
<tr>
<td><samp>NPC animation frames</samp>
</td>
<td><i>(Optional)</i> The spouse's animation frames, as a sequence of space-delimited frame indexes in their sprite's spritesheet each lasting 100 milliseconds. If not set, vanilla spouses will use their hardcoded animations and custom spouses won't be animated.
</td></tr>
<tr>
<td><samp><code title="required field 'NPC offset X'">&lt;NPC offset X&gt;</code> <code title="required field 'NPC offset Y'">&lt;NPC offset Y&gt;</code></samp>
</td>
<td><i>(Optional)</i> A pixel X and Y offset applied to the NPC's position when they're in their outdoor area.
</td></tr></tbody></table>
<p>You can mark where the spouse stands in their spouse area by placing the red circle path tile (tile index 7) on <a href="Modding_Maps.html#Paths_layer" title="Modding:Maps">the <samp>Paths</samp> layer</a>.
</p><p>For example, this Content Patcher pack would add the outside area for a new Akila NPC. When in the outside area, their sprite would cycle through spritesheet indexes 16–19 for 300 milliseconds each, and be offset by 1 pixel to the right and 5 pixels down.
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// register outside area</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/SpousePatios"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"Akila"</span><span class="o">:</span> <span class="s2">"ExampleAuthor_ExampleAkilaMod_OutsideArea/0/16 16 16 17 17 17 18 18 18 19 19 19/1 5"</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// load spouse map</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"Load"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Maps/ExampleAuthor_ExampleAkilaMod_OutsideArea"</span><span class="p">,</span>
            <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/outside-area.tmx"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Custom_farmhouse_renovations">Custom farmhouse renovations</span></h3>
<p>You can now add custom <a href="Farmhouse.html#Upgrades" title="Farmhouse">farmhouse renovations</a> that will be applied automatically when the specified <a href="Modding_Mail_data.html#Mail_flags" title="Modding:Mail data">mail flag</a> is set. This is based on a new map property in the farmhouse map:
</p>
<table class="wikitable">

<tbody><tr>
<th>valid in
</th>
<th>map property
</th>
<th>usage
</th></tr>
<tr>
<td>farmhouse
</td>
<td><samp>AdditionalRenovations <code title="required field 'renovation'">&lt;renovation&gt;</code>+</samp>
</td>
<td>A comma-separated list of renovations to apply, each in the form <samp><code title="required field 'map patch ID'">&lt;map patch ID&gt;</code> <code title="required field 'required mail flag'">&lt;required mail flag&gt;</code> <code title="required field 'map asset if active'">&lt;map asset if active&gt;</code> <code title="required field 'map asset if inactive'">&lt;map asset if inactive&gt;</code> <code title="optional field 'area rectangle'">[area rectangle]</code></samp>. Fields:
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>effect
</th></tr>
<tr>
<td><samp>map patch ID</samp>
</td>
<td>A unique ID for the patch being applied. This is usually similar to the renovation name, but can be any unique value. If a renovation applies multiple map patches, each one must have unique ID.
</td></tr>
<tr>
<td><samp>required mail flag</samp>
</td>
<td>The <a href="Modding_Mail_data.html#Mail_flags" title="Modding:Mail data">mail flag</a> that is checked on the house's owner  to decide whether the patch should be applied.
</td></tr>
<tr>
<td><samp>map asset if active</samp>
</td>
<td>The asset name for the map applied when the mail flag is set, relative to the <samp>Maps</samp> folder.
</td></tr>
<tr>
<td><samp>map asset if inactive</samp>
</td>
<td>The asset name for the map applied when the mail flag is not set, relative to the <samp>Maps</samp> folder.
</td></tr>
<tr>
<td><samp>area rectangle</samp>
</td>
<td><i>(Optional)</i> The tile area in the map to patch, specified as <samp><code title="required field 'X'">&lt;X&gt;</code> <code title="required field 'Y'">&lt;Y&gt;</code> <code title="required field 'width'">&lt;width&gt;</code> <code title="required field 'height'">&lt;height&gt;</code></samp>. If <code title="required field 'X'">&lt;X&gt;</code> isn't set, this defaults to the top-left corner of the map. If it is, you must specify all four values.
</td></tr></tbody></table>
</td></tr></tbody></table>
<p>For example, this Content Patcher pack would add a renovation to the fully-upgraded farmhouse based on a custom <samp>ExampleAuthor_PineapplesEverywhere_HasRenovation</samp> flag. Note that <samp>TextOperations</samp> is used to avoid overwriting any renovations added by another mod, and <samp>ExampleAuthor_PineapplesEverywhere_</samp> is a unique prefix for the hypothetical mod to avoid conflicts with other mods.
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// add renovation</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditMap"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Maps/FarmHouse2, Maps/FarmHouse2_marriage"</span><span class="p">,</span>
            <span class="s2">"TextOperations"</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">"Operation"</span><span class="o">:</span> <span class="s2">"Append"</span><span class="p">,</span>
                    <span class="s2">"Target"</span><span class="o">:</span> <span class="p">[</span> <span class="s2">"MapProperties"</span><span class="p">,</span> <span class="s2">"AdditionalRenovations"</span> <span class="p">],</span>
                    <span class="s2">"Value"</span><span class="o">:</span> <span class="s2">"ExampleAuthor_PineapplesEverywhere_KitchenUpgrade ExampleAuthor_PineapplesEverywhere_HasRenovation ExampleAuthor_PineapplesEverywhere_Kitchen ExampleAuthor_PineapplesEverywhere_Empty 0 19 3 3"</span><span class="p">,</span>
                    <span class="s2">"Delimiter"</span><span class="o">:</span> <span class="s2">","</span> <span class="c1">// if there are already renovations, add a comma before this one</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>

        <span class="c1">// load renovation map patch</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"Load"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Maps/ExampleAuthor_PineapplesEverywhere_Kitchen"</span><span class="p">,</span>
            <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/kitchen-upgrade.tmx"</span>
        <span class="p">},</span>

        <span class="c1">// load empty map (applied if renovation is inactive)</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"Load"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Maps/ExampleAuthor_PineapplesEverywhere_Empty"</span><span class="p">,</span>
            <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/kitchen-upgrade-empty.tmx"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span id="Custom_floors/walls"></span><span class="mw-headline" id="Custom_floors.2Fwalls">Custom floors/walls</span></h3>
<h4 class="in-block"><span class="mw-headline" id="In_decoratable_locations">In decoratable locations</span></h4>
<p>You can now change the walls/floors for decoratable locations (like farmhouses, cabins, or sheds) for flooring/painting/wallpaper placement just by editing map/tile properties.
</p><p>First, you can define distinct areas using two new map properties:
</p>
<table class="wikitable">

<tbody><tr>
<th>valid in
</th>
<th>map property
</th>
<th>usage
</th></tr>
<tr>
<td><i>decoratable locations</i>
</td>
<td><samp>FloorIDs <code title="optional field 'area'">[area]</code>+</samp><br><samp>WallIDs <code title="optional field 'area'">[area]</code>+</samp><br>
</td>
<td>A comma-separated list of the distinct areas which have flooring or walls. The <samp>FloorIDs</samp> and <samp>WallIDs</samp> don't need to match. Each area has the form <code><code title="required field 'area ID'">&lt;area ID&gt;</code> <code title="optional field 'default flooring/wallpaper ID'">[default flooring/wallpaper ID]</code></code>, where:
<ul><li><samp><code title="required field 'area ID'">&lt;area ID&gt;</code></samp> uniquely identifies the area or room.</li>
<li><samp><code title="optional field 'default flooring/wallpaper ID'">[default flooring/wallpaper ID]</code></samp> (optional) sets the initial flooring/wallpaper ID if that area hasn't been customized by the player yet. This can be defined in three forms:
<ul><li><code><code title="required field 'index'">&lt;index&gt;</code></code>: get the floor/wallpaper matching that index in the vanilla <samp>Maps/walls_and_floors</samp> tilesheet.</li>
<li><code><code title="required field 'tilesheet'">&lt;tilesheet&gt;</code>:<code title="required field 'index'">&lt;index&gt;</code></code>: add <samp>Maps/<code title="required field 'tilesheet'">&lt;tilesheet&gt;</code></samp> to the map, and match the index in that tilesheet.</li>
<li><code><code title="required field 'area ID'">&lt;area ID&gt;</code></code>: inherit the default floor/wallpaper from the named area. For example, <samp>Hallway_Bedroom Bedroom</samp> applies the bedroom wallpaper to the hallway between the bedroom and living room when the farmhouse is first upgraded.</li>
<li>If omitted, the default will be flooring/wallpaper #0.</li></ul></li></ul>
For example: <pre>FloorIDs: Kitchen 22, LivingRoom Bedroom, Hallway_Bedroom Bedroom, Bedroom
WallIDs: LivingRoom, Hallway_Bedroom Bedroom, Bedroom</pre>
<p>You don't need to add every area to the <samp>FloorIDs</samp>/<samp>WallIDs</samp> list; assigning a flooring/wall to an unlisted value will be handled correctly. You only really need to add an area to <samp>FloorIDs</samp>/<samp>WallIDs</samp> to set the default flooring/wallpaper value, or for cases where the order of the walls/floors is important (for backwards compatibility with code that sets wallpaper/flooring by an integer room index, as is the case with the floors/walls in the vanilla farmhouse).
</p>
</td></tr></tbody></table>
<p>Then you can add individual tiles to each area with two new tile properties:
</p>
<table class="wikitable">

<tbody><tr>
<th>layer
</th>
<th>property
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>WallID <code title="required field 'area ID'">&lt;area ID&gt;</code></samp><br><samp>FloorID <code title="required field 'area ID'">&lt;area ID&gt;</code></samp>
</td>
<td>Adds this tile to the given floor/wall area. Each floor tile should have the <samp>FloorID</samp> property, but only the top edge of the wall should have <samp>WallID</samp>.
</td></tr></tbody></table>
<h4 class="in-block"><span class="mw-headline" id="In_the_furniture_catalogue">In the furniture catalogue</span></h4>
<p>You can also add new flooring/wallpaper options to the furniture catalogue by adding it to <samp>Data/AdditionalWallpaperFlooring</samp>. Each entry consists of an object with these fields:
</p>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>description
</th></tr>
<tr>
<td><samp>ID</samp>
</td>
<td>A unique ID value. This is not shown in-game.
</td></tr>
<tr>
<td><samp>Texture</samp>
</td>
<td>The asset name which contains 32x32 pixel (flooring) or 16x48 pixel (wallpaper) sprites. The tilesheet must be 256 pixels wide, but can have any number of flooring/wallpaper rows.
</td></tr>
<tr>
<td><samp>IsFlooring</samp>
</td>
<td>Whether this is a flooring tilesheet; else it's a wallpaper tilesheet.
</td></tr>
<tr>
<td><samp>Count</samp>
</td>
<td>The number of flooring or wallpaper sprites in the tilesheet.
</td></tr></tbody></table>
<p>For example, this Content Patcher pack would add three new wallpapers to the game:
</p>
<div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span>
    <span class="s2">"Format"</span><span class="o">:</span> <span class="s2">"2.0.0"</span><span class="p">,</span>
    <span class="s2">"Changes"</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// define wallpaper</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"EditData"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Data/AdditionalWallpaperFlooring"</span><span class="p">,</span>
            <span class="s2">"Entries"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"ExampleAuthor.CustomWallpapers"</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// for technical reasons, you need to specify the ID here *and* in the "ID" field</span>
                    <span class="s2">"ID"</span><span class="o">:</span> <span class="s2">"ExampleAuthor.CustomWallpapers"</span><span class="p">,</span>
                    <span class="s2">"Texture"</span><span class="o">:</span> <span class="s2">"Mods/ExampleAuthor.CustomWallpapers/Wallpapers"</span><span class="p">,</span>
                    <span class="s2">"IsFlooring"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="s2">"Count"</span><span class="o">:</span> <span class="mi">3</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>

        <span class="c1">// load wallpaper tilesheet</span>
        <span class="p">{</span>
            <span class="s2">"Action"</span><span class="o">:</span> <span class="s2">"Load"</span><span class="p">,</span>
            <span class="s2">"Target"</span><span class="o">:</span> <span class="s2">"Mods/ExampleAuthor.CustomWallpapers/Wallpapers"</span><span class="p">,</span>
            <span class="s2">"FromFile"</span><span class="o">:</span> <span class="s2">"assets/wallpapers.png"</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
<h3 class="in-block"><span class="mw-headline" id="Map_property_changes">Map property changes</span></h3>
<dl><dd><i>Main article: <a href="Modding_Maps.html#Known_properties" title="Modding:Maps">Modding:Maps#Known_properties</a></i></dd></dl>
<p>Stardew Valley 1.5.5 adds several map properties (in addition to those listed in their own sections):
</p>
<table class="wikitable">

<tbody><tr>
<th>valid in
</th>
<th>map property
</th>
<th>usage
</th></tr>
<tr>
<td><i>any</i>
</td>
<td><samp>AllowGrassGrowInWinter T</samp>
</td>
<td>Allows <a href="Grass.html" title="Grass">grass</a> to spread in winter.
</td></tr>
<tr>
<td><i>any</i>
</td>
<td><samp>AllowGrassSurviveInWinter T</samp>
</td>
<td>Allows <a href="Grass.html" title="Grass">grass</a> that's alive on the last day of fall to survive through to winter.
</td></tr>
<tr>
<td><i>any</i>
</td>
<td><samp>ClearEmptyDirtOnNewMonth T</samp>
</td>
<td>Destroy most tilled dirt that doesn't contain crops when a new year starts.
</td></tr>
<tr>
<td><i>any</i>
</td>
<td><samp>EnableGrassSpread T</samp>
</td>
<td>Gives <a href="Grass.html" title="Grass">grass</a> in the location a chance to spread each day.
</td></tr>
<tr>
<td><i>any</i>
</td>
<td><samp>ForceAllowTreePlanting T</samp>
</td>
<td>Allows planting trees (both wild and fruit) in this location, even if it normally wouldn't be allowed.
</td></tr>
<tr>
<td><i>any</i>
</td>
<td><samp>IsFarm T</samp>
</td>
<td>Marks the location as a farm. This only affects generic location/interaction logic which checks the in-code <code>location.IsFarm</code> property; logic hardcoded into the game's <code>Farm</code> class (<i>e.g.,</i> farm animals, pets, crows/scarecrows, greenhouse, farm buildings, etc) is still limited to the actual farm.
</td></tr>
<tr>
<td><i>any</i>
</td>
<td><samp>IsGreenhouse T</samp>
</td>
<td>Marks the location as a greenhouse.
</td></tr>
<tr>
<td><i>any</i>
</td>
<td><samp>SpawnGrassFromPathsOnNewYear T</samp>
</td>
<td>Spawns grass on every tile with index 22 on the <samp>Paths</samp> layer when a new year starts. See also <samp>SpawnRandomGrassOnNewYear</samp>.
</td></tr>
<tr>
<td><i>any</i>
</td>
<td><samp>SpawnDebrisOnNewMonth T</samp><br><samp>SpawnDebrisOnNewYear T</samp>
</td>
<td>Spawns weeds, stones, or twigs at random positions when a new month/year starts (subject to their usual spawn rules).
</td></tr>
<tr>
<td><i>any</i>
</td>
<td><samp>SpawnRandomGrassOnNewYear T</samp>
</td>
<td>Spawns grass at random positions when a new year starts (subject to its usual spawn rules). See also <samp>SpawnGrassFromPathsOnNewYear</samp>.
</td></tr>
<tr>
<td>farm
</td>
<td><samp>FarmFishLocationOverride <code title="required field 'location name'">&lt;location name&gt;</code> <code title="required field 'chance'">&lt;chance&gt;</code></samp>
</td>
<td>Adds an alternative location name when catching fish, where the <code title="required field 'chance'">&lt;chance&gt;</code> is a decimal value between 0 (never happens) and 1 (always happens). For example, <samp>FarmFishLocationOverride Mountain 0.5</samp> adds a 50% chance of catching mountain fish instead of the normal fish for that location. The location name is case-sensitive, and matches those shown by the <a rel="nofollow" class="external text" href="../external.html?link=https://www.nexusmods.com/stardewvalley/mods/679">Debug Mode mod</a>.
</td></tr>
<tr>
<td>farm
</td>
<td><samp>FarmHouseFurniture [<code title="required field 'furniture ID'">&lt;furniture ID&gt;</code> <code title="required field 'tile X'">&lt;tile X&gt;</code> <code title="required field 'tile Y'">&lt;tile Y&gt;</code> <code title="required field 'rotations'">&lt;rotations&gt;</code>]+</samp>
</td>
<td>Spawns initial furniture in the farmhouse when creating a new save. If you add multiple furniture to the same tile, the first one will be placed on the ground and the last one will be placed on the first one.<br>This is also required to enable the <samp>FarmHouseWallpaper</samp>, <samp>FarmHouseFlooring</samp>, and <samp>FarmHouseStarterSeedsPosition</samp> properties. You can enable it without spawning any furniture with <samp>FarmHouseFurniture -1 0 0 0</samp>.
</td></tr>
<tr>
<td>farm
</td>
<td><samp>FarmHouseFlooring <code title="required field 'flooring id'">&lt;flooring id&gt;</code></samp>
</td>
<td>Sets the initial farmhouse floor to the given ID when creating a new save. These are mapped to the 4x4 tile areas in the <samp>Maps/walls_and_floors</samp> tilesheet starting at tile index 336 (where index 0 is mapped to the top-left square).<br>This is only enabled if <samp>FarmHouseFurniture</samp> is set.
</td></tr>
<tr>
<td>farm
</td>
<td><samp>FarmHouseWallpaper <code title="required field 'wallpaper id'">&lt;wallpaper id&gt;</code></samp>
</td>
<td>Sets the initial farmhouse wallpaper to the given ID when creating a new save. These are mapped to the 1x4 tile areas in the <samp>Maps/walls_and_floors</samp> tilesheet starting from the top-left.<br>This is only enabled if <samp>FarmHouseFurniture</samp> is set.
</td></tr>
<tr>
<td>farm
</td>
<td><samp>FarmHouseStarterSeedsPosition <code title="required field 'tile X'">&lt;tile X&gt;</code> <code title="required field 'tile Y'">&lt;tile Y&gt;</code></samp>
</td>
<td>Sets the tile position in the farmhouse where the seed package is placed when creating a new save.<br>This is only enabled if <samp>FarmHouseFurniture</samp> is set.
</td></tr>
<tr>
<td>farm
</td>
<td><samp>FarmOceanCrabPotOverride T</samp>
</td>
<td>Causes crab pots on the farm should catch ocean fish.
</td></tr>
<tr>
<td>farm
</td>
<td><samp>SpawnBeachFarmForage T</samp>
</td>
<td>Randomly spawns beach forage and <a href="Supply_Crate.html" title="Supply Crate">supply crates</a> on the farm (like the <a href="Farm_Maps.html" title="Farm Maps">vanilla beach farm</a>). Forage and crates will only appear on tiles which have the <samp>BeachSpawn T</samp> property on the <samp>Back</samp> layer, are clear for placement, and don't have a tile on the <samp>AlwaysFront</samp> layer.
</td></tr>
<tr>
<td>farm
</td>
<td><samp>SpawnForestFarmForage T</samp>
</td>
<td>Randomly spawns forest forage on the farm (like the <a href="Farm_Maps.html" title="Farm Maps">vanilla forest farm</a>). Forage will only spawn on tiles which have the <samp>Type Grass</samp> tile property, are clear for placement, and don't have a tile on the <samp>AlwaysFront</samp> layer.
</td></tr>
<tr>
<td>farm
</td>
<td><samp>SpawnMountainFarmOreRect <code title="required field 'tile X'">&lt;tile X&gt;</code> <code title="required field 'tile Y'">&lt;tile Y&gt;</code> <code title="required field 'tile width'">&lt;tile width&gt;</code> <code title="required field 'tile height'">&lt;tile height&gt;</code></samp>
</td>
<td>The tile area on the farm map where ores should randomly spawn (like the <a href="Farm_Maps.html" title="Farm Maps">vanilla hilltop farm</a>). Ores will only spawn on tiles which have the <samp>Type Dirt</samp> tile property and are clear for object placement.
</td></tr>
<tr>
<td>farmhouse
</td>
<td><samp>EntryLocation <code title="required field 'tile X'">&lt;tile X&gt;</code> <code title="required field 'tile Y'">&lt;tile Y&gt;</code></samp>
</td>
<td>Sets the tile on which the player appears when they warp into the farmhouse.
</td></tr></tbody></table>
<p>And one new tile property:
</p>
<table class="wikitable">

<tbody><tr>
<th>layer
</th>
<th>property
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>TouchAction Warp <code title="required field 'area'">&lt;area&gt;</code> <code title="required field 'x'">&lt;x&gt;</code> <code title="required field 'y'">&lt;y&gt;</code> <code title="optional field 'string prerequisite'">[string prerequisite]</code></samp>
</td>
<td>Adds a player-only warp on the tile to the specified location name and position. This is exactly equivalent to <samp>TouchAction MagicWarp</samp>, but without the magic sound/visual effect.
</td></tr></tbody></table>
<p>It also changes one tile property:
</p>
<table class="wikitable">

<tbody><tr>
<th>layer
</th>
<th>property
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Back</samp>
</td>
<td><samp>Water</samp>
</td>
<td>Setting the value to <samp>I</samp> (uppercase i) will make the tile behave like normal water, but won't render the water animation overlay for it.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Non-Krobus_roommates">Non-Krobus roommates</span></h3>
<p>The game's <a href="Marriage.html" title="Marriage">marriage</a> logic previously had hardcoded exceptions to treat <a href="Krobus.html" title="Krobus">Krobus</a> as a roommate instead. That logic has been reworked so it can be applied to any NPC (including custom NPCs).
</p><p>Specifically:
</p>
<ul>
<li>Items with the "<samp>propose_roommate_<code title="required field 'NPC name'">&lt;NPC name&gt;</code></samp>" <a href="Modding_Items.html#Context_tags" title="Modding:Items">context tag</a> will trigger a roommate proposal when given to the named NPC. The NPC name must be lowercase with underscores instead of spaces (<i>e.g.,</i> <samp>propose_roommate_dwarf</samp>).</li>
<li>These <a href="Modding_Dialogue.html" title="Modding:Dialogue">dialogue keys</a> apply before they move in:
<table class="wikitable">

<tbody><tr>
<th>content file
</th>
<th>key
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Strings/StringsFromCSFiles</samp>
</td>
<td><samp><code title="required field 'NPC name'">&lt;NPC name&gt;</code>_EngagedRoommate</samp>
</td>
<td>The NPC's roommate proposal accept dialogue.<br>⚠ Ignored if you don't specify <samp>Data/EngagementDialogue:<code title="required field 'NPC name'">&lt;NPC name&gt;</code>Roommate0</samp>.<br>For example: <i>A Void Ghost pendant! How did you...?$3#$b#Oh, wow.$7#$b#@... yes, I'll come live with you, if you like. But we have to keep it secret from everyone.#$b#I'll be at your house in a few days... okay?$h</i>
</td></tr>
<tr>
<td><samp>Strings/Characters</samp>
</td>
<td><samp>MovieInvite_NoTheater</samp>
</td>
<td>The NPC's roommate proposal rejection text when you don't meet the requirements (<i>i.e.,</i> min friendship + house upgrade level, and not already having a roommate/spouse). This is the same dialogue used when you can't invite someone to the movies.
</td></tr>
<tr>
<td><samp>Data/EngagementDialogue</samp>
</td>
<td><samp><code title="required field 'NPC name'">&lt;NPC name&gt;</code>Roommate0</samp><br><samp><code title="required field 'NPC name'">&lt;NPC name&gt;</code>Roommate1</samp>
</td>
<td>The NPC's normal dialogue after accepting the proposal, but before moving in. The <samp>Roommate0</samp> variant is always used on the day the NPC accepted; on subsequent days the NPC randomly chooses <samp>Roommate0</samp> or <samp>Roommate1</samp>. If the <samp>Roommate0</samp> variant isn't defined, the NPC will use the normal <samp><code title="required field 'NPC Name'">&lt;NPC Name&gt;</code>0</samp> and <samp><code title="required field 'NPC Name'">&lt;NPC Name&gt;</code>1</samp> keys. If the <samp>Roommate0</samp> variant is defined, <samp>Roommate1</samp> must be set too to avoid errors.<br>For example: <i>@... I'm afraid we'll have to keep this a secret... Neither my people nor yours would accept us living together.</i>
</td></tr></tbody></table>
<p>And after they move in:
</p>
<table class="wikitable">

<tbody><tr>
<th>content file
</th>
<th>key
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Characters/Dialogue/MarriageDialogue<code title="required field 'NPC name'">&lt;NPC name&gt;</code>Roommate</samp>
</td>
<td><i>all keys</i>
</td>
<td>Equivalent to <samp>Characters/Dialogue/MarriageDialogue<code title="required field 'NPC name'">&lt;NPC name&gt;</code></samp>, but only applies if the NPC is a roommate. If the file exists, it completely replaces the spouse version; otherwise the game defaults to the spouse version.
</td></tr>
<tr>
<td><samp>Characters/Dialogue/MarriageDialogue</samp>
</td>
<td><samp>*Roommate</samp>
</td>
<td>Keys with the <samp>Roommate</samp> suffix take priority if they exist (only in this file, not the <samp>MarriageDialogue<code title="required field 'NPC name'">&lt;NPC name&gt;</code></samp> files).
</td></tr>
<tr>
<td><samp>Data/Festivals/*</samp>
</td>
<td><samp><code title="required field 'NPC name'">&lt;NPC name&gt;</code>_roommate</samp>
</td>
<td>The NPC's normal dialogue at the festival if they're a roommate. If the key isn't defined, they'll use <samp><code title="required field 'NPC name'">&lt;NPC name&gt;</code>_spouse</samp> instead.
</td></tr></tbody></table>
<p>And for other NPCs:
</p>
<table class="wikitable">

<tbody><tr>
<th>content file
</th>
<th>key
</th>
<th>effect
</th></tr>
<tr>
<td><samp>Characters/Dialogue/*</samp>
</td>
<td><samp>*_roommate_*</samp>
</td>
<td>Equivalent to the <samp>*_inlaw_*</samp> infix in <a href="Modding_Dialogue.html#Generic_dialogue" title="Modding:Dialogue">generic dialogue</a>, used if you're a roommate with the NPC. If not defined, the game will fallback to the non-infixed dialogue (it won't use the <samp>*_inlaw_*</samp> variant).
</td></tr></tbody></table></li>
<li>Roommates will sleep in a <a href="Single_Bed.html" title="Single Bed">Single Bed</a> if one is available and unused in the house; otherwise they'll use a double bed like a normal spouse. (Krobus is an exception, since he doesn't sleep in a bed.)</li>
<li>Added <a href="Modding_Event_data.html#Event_preconditions" title="Modding:Event data">event preconditions</a> to check whether the local player has a roommate (<samp>R</samp>) or doesn't have a roommate (<samp>Rf</samp>). This can be combined with <samp>O <code title="required field 'NPC name'">&lt;NPC name&gt;</code></samp> to check for a specific roommate, like <samp>R/O Abigail</samp>.</li>
</ul>
<h3 class="in-block"><span class="mw-headline" id="Custom_mail_formatting">Custom mail formatting</span></h3>
<p>You can now customize <a href="Modding_Mail_data.html" title="Modding:Mail data">mail</a> and <a href="Secret_Notes.html" title="Secret Notes">secret notes</a> by including three custom commands in the letter text (including the <samp>[]</samp> characters):
</p>
<table class="wikitable">

<tbody><tr>
<th>command
</th>
<th>effect
</th></tr>
<tr>
<td><samp>[letterbg <code title="required field 'index'">&lt;index&gt;</code>]</samp>
</td>
<td>Changes the default letter background to a vanilla background from <samp>LooseSprites/letterBG</samp>. The index can be 0 (default letter), 1 (Sandy's lined paper), 2 (Wizard style), or 3 (Krobus style). This will also set the default text color for that style, unless overridden by <samp>textcolor</samp>.
</td></tr>
<tr>
<td><samp>[letterbg <code title="required field 'asset name'">&lt;asset name&gt;</code> <code title="required field 'index'">&lt;index&gt;</code>]</samp>
</td>
<td>Changes the default letter background to the given texture. The asset name should match a texture containing two rows: one with 320x180 pixel letter background images, and one with 24x24 pixel button backgrounds shown behind attached items. The index is the sprite to use from those rows, starting at 0 for the first one.
<p>Only the first 4 letter background images of a row will be properly displayed.
Only one row of button may exist.
See image below
</p>
</td></tr>
<tr>
<td><samp>[textcolor <code title="required field 'color'">&lt;color&gt;</code>]</samp>
</td>
<td>Changes the letter text color. The valid colors are <samp>black</samp>, <samp>blue</samp>, <samp>cyan</samp>, <samp>gray</samp>, <samp>green</samp>, <samp>orange</samp>, <samp>purple</samp>, <samp>red</samp>, and <samp>white</samp>.
</td></tr></tbody></table>
<p><br>
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:302px;"><a href="File_Lettersbglayers.html" class="image"><noscript><img alt="" src="mediawiki/images/thumb/4/45/Lettersbglayers.png/300px-Lettersbglayers.png" decoding="async" width="300" height="88" class="thumbimage"></noscript><span class="lazy-image-placeholder" style="width: 300px;height: 88px;" data-src="/mediawiki/images/thumb/4/45/Lettersbglayers.png/300px-Lettersbglayers.png" data-alt="" data-width="300" data-height="88" data-class="thumbimage"> </span></a>  <div class="thumbcaption"><div class="magnify"><a href="File_Lettersbglayers.html" class="internal" title="Enlarge"></a></div>Example : the letters  background images can go on the pale pink, pink and purple spaces, while the buttons can only go on the orange line.</div></div></div></div>
<h3 class="in-block"><span class="mw-headline" id="Custom_scarecrows">Custom scarecrows</span></h3>
<p>You can now mark any placeable item as a <a href="Scarecrow.html" title="Scarecrow">scarecrow</a> with two new <a href="Modding_Items.html#Context_tags" title="Modding:Items">context tags</a>:
</p>
<table class="wikitable">

<tbody><tr>
<th>context tag
</th>
<th>effect
</th></tr>
<tr>
<td><samp>crow_scare</samp>
</td>
<td>Sets the item as a placeable scarecrow. If not set, the item is considered a scarecrow if its default name contains the substring <code>arecrow</code> (like before).
</td></tr>
<tr>
<td><samp>crow_scare_radius_<code title="required field 'radius'">&lt;radius&gt;</code></samp>
</td>
<td>If the item is a scarecrow, sets the radius that it covers. If not set, the scarecrow defaults to 17 if the default name contains the substring <code>Deluxe</code> and 9 otherwise.
</td></tr></tbody></table>
<h3 class="in-block"><span class="mw-headline" id="Improved_map_seats">Improved map seats</span></h3>
<dl><dd><i>Main article: <a href="Modding_Maps.html#Sitting_on_non-furniture_chairs" title="Modding:Maps">Modding:Maps#Sitting on non-furniture chairs</a></i></dd></dl>
<p>When defining map seats via <samp>Data\ChairTiles</samp> (see <a href="Modding_Migrate_to_Stardew_Valley_1-2.html#Sitting_on_non-furniture_chairs" title="Modding:Migrate to Stardew Valley 1.5">docs in the 1.5 migration guide</a>), you can now set the type field to <samp>custom <code title="required field 'offset_x'">&lt;offset_x&gt;</code> <code title="required field 'offset_y'">&lt;offset_y&gt;</code> <code title="required field 'extra_height'">&lt;extra_height&gt;</code></samp> to override the hardcoded offset and height values in code. The three values are measured in tiles (<i>e.g.,</i> an X offset value of 0.5 would shift the sitting location by half a tile).
</p>
</section><h2 class="section-heading" onclick="javascript:mfTempOpenSection(5)"><div class="mw-ui-icon mw-ui-icon-element indicator mw-ui-icon-small mw-ui-icon-flush-left"></div><span class="mw-headline" id="See_also">See also</span></h2><section class="mf-section-5 collapsible-block" id="mf-section-5">
<ul><li><a href="User_Pathoschild/Modding_wishlist/Completed.html#Done_in_Stardew_Valley_1.5.5" title="User:Pathoschild/Modding wishlist/Completed">Modding wishlist items done in Stardew Valley 1.5.5</a></li></ul>




</section></div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="mediawiki/index09d2.html?title=Modding:Migrate_to_Stardew_Valley_1.5.5&amp;oldid=160135">https://stardewvalleywiki.com/mediawiki/index.php?title=Modding:Migrate_to_Stardew_Valley_1.5.5&amp;oldid=160135</a>"</div>
</div>
			<div class="post-content" id="page-secondary-actions">
			
			</div>
		</main>
		<footer class="mw-footer minerva-footer">
		<div class="last-modified-bar">
	<div class="post-content last-modified-bar__content">
		<span class="last-modified-bar__icon mw-ui-icon mw-ui-icon-mw-ui-icon-small mw-ui-icon-wikimedia-history-base20 "></span>
		<a class="last-modified-bar__text modified-enhancement" href="Special_History/Modding_Migrate_to_Stardew_Valley_1.5.html"
				data-user-name="Tlitookilakin"
				data-user-gender="unknown"
				data-timestamp="1711399378">
				<span>Last edited on 25 March 2024, at 20:42</span>
		</a>
		<span class="mw-ui-icon mw-ui-icon-small mw-ui-icon-mf-expand-gray mf-mw-ui-icon-rotate-anti-clockwise indicator"></span>
	</div>
</div>

		<div class="post-content footer-content">
			
			<h2>Stardew Valley Wiki</h2>
			<div class="license">Content is available under <a class="external" rel="nofollow" href="../creativecommons.org/licenses/by-nc-sa/3.0/index.html">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</div>
			<ul class="footer-info hlist hlist-separated">
				<li id="footer-info-lastmod"> This page was last edited on 25 March 2024, at 20:42.</li><li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="../creativecommons.org/licenses/by-nc-sa/3.0/index.html">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</li>
			</ul>
			<ul class="footer-places hlist hlist-separated">
				<li id="footer-places-privacy"><a href="Stardew_Valley_Wiki_Privacy_policy.html" title="Stardew Valley Wiki:Privacy policy">Privacy policy</a></li><li id="footer-places-about"><a href="Stardew_Valley_Wiki_About.html" title="Stardew Valley Wiki:About">About Stardew Valley Wiki</a></li><li id="footer-places-disclaimer"><a href="Stardew_Valley_Wiki_General_disclaimer.html" title="Stardew Valley Wiki:General disclaimer">Disclaimers</a></li><li id="footer-places-desktop-toggle"><a id="mw-mf-display-toggle" href="mediawiki/indexaed8.html?title=Modding:Migrate_to_Stardew_Valley_1.5.5&amp;mobileaction=toggle_view_desktop">Desktop</a></li>
			</ul>
		</div>
		</footer>
	</div>
</div>
<div class="mw-notification-area" data-mw="interface"></div>
<!-- v:8.3.0 -->

<script src="../external.html?link=https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.104","walltime":"0.167","ppvisitednodes":{"value":1903,"limit":1000000},"postexpandincludesize":{"value":5981,"limit":2097152},"templateargumentsize":{"value":1594,"limit":2097152},"expansiondepth":{"value":6,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":20641,"limit":5000000},"timingprofile":["100.00%   46.814      1 -total"," 29.89%   13.991     72 Template:T"," 15.25%    7.137      1 Template:Version"," 12.62%    5.907      6 Template:Content_Patcher_version","  9.72%    4.551      4 Template:Main_article","  5.63%    2.635      6 Template:O","  4.61%    2.157      1 Template:Modder_compatibility_header","  2.83%    1.323      1 Template:Nexus_mod"]},"cachereport":{"timestamp":"20240607142152","ttl":86400,"transientcontent":false}}});});</script>
<script>(window.NORLQ=window.NORLQ||[]).push(function(){var ns,i,p,img;ns=document.getElementsByTagName('noscript');for(i=0;i<ns.length;i++){p=ns[i].nextSibling;if(p&&p.className&&p.className.indexOf('lazy-image-placeholder')>-1){img=document.createElement('img');img.setAttribute('src',p.getAttribute('data-src'));img.setAttribute('width',p.getAttribute('data-width'));img.setAttribute('height',p.getAttribute('data-height'));img.setAttribute('alt',p.getAttribute('data-alt'));p.parentNode.replaceChild(img,p);}}});</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":89});});</script>		</body>
		

</html>
		






