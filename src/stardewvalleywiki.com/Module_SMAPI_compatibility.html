<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from stardewvalleywiki.com/Module:SMAPI_compatibility by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 07 Jun 2024 22:36:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Module:SMAPI compatibility - Stardew Valley Wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"b53b4bde9873a6a53232a6ee","wgCSPNonce":!1,"wgCanonicalNamespace":"Module","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":828,"wgPageName":"Module:SMAPI_compatibility","wgTitle":"SMAPI compatibility","wgCurRevisionId":162447,"wgRevisionId":162447,"wgArticleId":8478,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgPageContentLanguage":"en","wgPageContentModel":"Scribunto","wgRelevantPageName":"Module:SMAPI_compatibility","wgRelevantArticleId":8478,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgMFMode":"stable","wgMFAmc":!1,
"wgMFAmcOutreachActive":!1,"wgMFAmcOutreachUserEligible":!1,"wgMFLazyLoadImages":!0,"wgMFDisplayWikibaseDescriptions":{"search":!1,"nearby":!1,"watchlist":!1,"tagline":!1},"wgMFIsPageContentModelEditable":!0,"wgCargoMapClusteringMinimum":80,"wgCargoMonthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"wgCargoMonthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgCargoWeekDays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"wgCargoWeekDaysShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"wgMinervaPermissions":{"watch":!0,"talk":!1},"wgMinervaFeatures":{"beta":!1,"donate":!0,"mobileOptionsLink":!0,"categories":!1,"pageIssues":!0,"talkAtTop":!1,"historyInPageActions":!1,"overflowSubmenu":!1,"tabsOnSpecials":!1,"personalMenu":!1,"mainMenuExpanded":!1,"simplifiedTalk":!0},
"wgMinervaDownloadNamespaces":[0]};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.pygments":"ready","skins.minerva.base.styles":"ready","skins.minerva.content.styles":"ready","skins.minerva.content.styles.images":"ready","mediawiki.hlist":"ready","mediawiki.ui.icon":"ready","mediawiki.ui.button":"ready","skins.minerva.icons.wikimedia":"ready","skins.minerva.mainMenu.icons":"ready","skins.minerva.mainMenu.styles":"ready","mobile.init.styles":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","skins.minerva.options","skins.minerva.scripts","mobile.init"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="mediawiki/loadaf7f.css?lang=en&amp;modules=ext.pygments%7Cmediawiki.hlist%7Cmediawiki.ui.button%2Cicon%7Cmobile.init.styles%7Cskins.minerva.base.styles%7Cskins.minerva.content.styles%7Cskins.minerva.content.styles.images%7Cskins.minerva.icons.wikimedia%7Cskins.minerva.mainMenu.icons%2Cstyles&amp;only=styles&amp;skin=minerva"/>
<script async="" src="mediawiki/loadc82b.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=minerva&amp;target=mobile"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="mediawiki/load1154.css?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=minerva"/>
<meta name="generator" content="MediaWiki 1.35.1"/>
<meta name="description" content="This module provides the table structure and data for the Modding:Mod compatibility list."/>
<meta name="theme-color" content="#eaecf0"/>
<meta name="viewport" content="initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0, width=device-width"/>
<link rel="manifest" href="mediawiki/api-resultc989.json?action=webapp-manifest"/>
<link rel="shortcut icon" href="mediawiki/extensions/StardewValley/images/favicon.png"/>
<link rel="search" type="application/opensearchdescription+xml" href="mediawiki/opensearch_desc.php" title="Stardew Valley Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="mediawiki/api-result251f.xml?action=rsd"/>
<link rel="license" href="../creativecommons.org/licenses/by-nc-sa/3.0/index.html"/>
<meta property="og:title" content="Module:SMAPI compatibility - Stardew Valley Wiki"/>
<meta property="og:site_name" content="Stardew Valley Wiki"/>
<meta property="og:url" content="https://stardewvalleywiki.com/Module:SMAPI_compatibility"/>
<meta property="og:description" content="This module provides the table structure and data for the Modding:Mod compatibility list."/>
<meta property="og:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="article:modified_time" content="2024-03-30T15:12:50Z"/>
<meta property="article:published_time" content="2024-03-30T15:12:50Z"/>
<meta property="twitter:site" content="@stardewwiki"/>
<meta property="twitter:title" content="Module:SMAPI compatibility - Stardew Valley Wiki"/>
<meta property="twitter:description" content="This module provides the table structure and data for the Modding:Mod compatibility list."/>
<meta property="twitter:image" content="https://stardewvalleywiki.com/mediawiki/extensions/StardewValley/images/site_logo_sm.png"/>
<meta property="twitter:card" content="summary_large_image"/>
<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"article","name":"Module:SMAPI compatibility - Stardew Valley Wiki","headline":"Module:SMAPI compatibility - Stardew Valley Wiki","mainEntityOfPage":"Module:SMAPI compatibility","identifier":"https:\/\/stardewvalleywiki.com\/Module:SMAPI_compatibility","url":"https:\/\/stardewvalleywiki.com\/Module:SMAPI_compatibility","description":"This module provides the table structure and data for the Modding:Mod compatibility list.","dateModified":"2024-03-30T15:12:50Z","datePublished":"2024-03-30T15:12:50Z","image":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png"},"author":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"publisher":{"@type":"Organization","name":"Stardew Valley Wiki","url":"\/\/stardewvalleywiki.com","logo":{"@type":"ImageObject","url":"https:\/\/stardewvalleywiki.com\/mediawiki\/extensions\/StardewValley\/images\/site_logo_sm.png","caption":"Stardew Valley Wiki"}},"potentialAction":{"@type":"SearchAction","target":"https:\/\/stardewvalleywiki.com\/mediawiki\/index.php?title=Special:Search&search={search_term}","query-input":"required name=search_term"}}</script>
<!--[if lt IE 9]><script src="/mediawiki/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-828 ns-subject page-Module_SMAPI_compatibility rootpage-Module_SMAPI_compatibility stable skin-minerva action-view skin-vector-legacy">
<div id="mw-mf-viewport">
	<div id="mw-mf-page-center">
		<a class="mw-mf-page-center__mask" href="#"></a>
		<header class="header-container header-chrome">
			<form class="header" action="../external.html?link=https://stardewvalleywiki.com/mediawiki/index.php" method="get">
				<nav class="navigation-drawer toggle-list view-border-box">
					<input type="checkbox" id="main-menu-input" class="toggle-list__checkbox" role="button" aria-labelledby="mw-mf-main-menu-button">
					<label for="main-menu-input" id="mw-mf-main-menu-button"
						class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-menu-base20 mw-ui-icon-flush-left toggle-list__toggle"
						title="Open main menu" data-event-name="ui.mainmenu">Open main menu</label>
					<div id="mw-mf-page-left" class="menu toggle-list__list view-border-box">
	<ul id="p-navigation">
			<li class="">
			    <a href="Stardew_Valley_Wiki.html" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-home" data-event-name="menu.home"><span>Home</span></a>
			</li>
			<li class="">
			    <a href="Wizard_Bookshelf.html#/random" class="mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-die " data-event-name="menu.random"><span>Random</span></a>
			</li>
	</ul>
	<ul id="p-personal">
			<li class="">
			    <a href="mediawiki/index9792.html?title=Special:UserLogin&amp;returnto=Module%3ASMAPI+compatibility" class="menu__item--login mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-logIn " data-event-name="menu.login"><span>Log in</span></a>
			</li>
	</ul>
	<ul id="pt-preferences">
			<li class="jsonly">
			    <a href="mediawiki/index54d9-2.html?title=Special:MobileOptions&amp;returnto=Module%3ASMAPI+compatibility" class="menu__item--settings mw-ui-icon mw-ui-icon-before mw-ui-icon-minerva-settings " data-event-name="menu.settings"><span>Settings</span></a>
			</li>
	</ul>
	<ul class="hlist">
			<li class="">
			    <a href="Stardew_Valley_Wiki_About.html" class="" data-event-name=""><span>About Stardew Valley Wiki</span></a>
			</li>
			<li class="">
			    <a href="Stardew_Valley_Wiki_General_disclaimer.html" class="" data-event-name=""><span>Disclaimers</span></a>
			</li>
	</ul>
</div>

					<label class="main-menu-mask" for="main-menu-input"></label>
				</nav>
				<div class="branding-box">
					<a href="Stardew_Valley_Wiki.html">
						<span>Stardew Valley Wiki</span>
						
					</a>
				</div>
				<div class="search-box">
					<input class="search mw-ui-background-icon-search skin-minerva-search-trigger" type="search" name="search" id="searchInput"
						autocomplete="off" placeholder="Search Stardew Valley Wiki" aria-label="Search Stardew Valley Wiki"
						value="">
				</div>
				<nav class="minerva-user-navigation" aria-label="User navigation">
					<div><button id="searchIcon" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-search-base20 skin-minerva-search-trigger" type="submit">Search</button></div>
					
				</nav>
			</form>
		</header>
		<main id="content" class="mw-body">
			<div class="banner-container">
			<div id="siteNotice"></div>
			</div>
			
			<div class="pre-content heading-holder">
				<div class="page-heading">
					<h1 id="section_0">Module:SMAPI compatibility</h1>
					<div class="tagline"></div>
				</div>
				<nav class="page-actions-menu">
	<ul id="page-actions" class="page-actions-menu__list">
		<li id="language-selector" class="page-actions-menu__list-item">
				<a id="" href="#" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-language-base20 mw-ui-icon-with-label-desktop language-selector disabled"
					data-mw="interface"
					data-event-name="menu.languages" role="button" title="Language">Language</a>
		</li>
		<li id="page-actions-watch" class="page-actions-menu__list-item">
				<a id="ca-watch" href="mediawiki/index9792.html?title=Special:UserLogin&amp;returnto=Module%3ASMAPI+compatibility" class="mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-star-base20 mw-ui-icon-with-label-desktop watch-this-article mw-watchlink menu__item--page-actions-watch"
					data-mw="interface"
					data-event-name="menu.watch" role="button" title="Watch">Watch</a>
		</li>
		<li id="page-actions-edit" class="page-actions-menu__list-item">
				<a id="ca-edit" href="mediawiki/indexf111-3.html?title=Module:SMAPI_compatibility&amp;action=edit" class="edit-page menu__item--page-actions-edit mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-editLock-base20 mw-ui-icon-with-label-desktop"
					data-mw="interface"
					data-event-name="menu.edit" role="button" title="Edit the lead section of this page">Edit</a>
		</li>
	</ul>
</nav>
<!-- version 1.0.2 (change every time you update a partial) -->

				
				
				<div class="minerva__subtitle"></div>
			</div>
			
			<div id="bodyContent" class="content"><div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><script>function mfTempOpenSection(id){var block=document.getElementById("mf-section-"+id);block.className+=" open-block";block.previousSibling.className+=" open-block";}</script><div class="mw-parser-output"><div lang="en" dir="ltr" class="mw-content-ltr">
<p>This module provides the table structure and data for the <a href="Modding_Mod_compatibility.html" title="Modding:Mod compatibility">Modding:Mod compatibility</a> list.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1"><a href="#Examples"><span class="tocnumber">1</span> <span class="toctext">Examples</span></a>
<ul>
<li class="toclevel-2"><a href="#Compatible_mod"><span class="tocnumber">1.1</span> <span class="toctext">Compatible mod</span></a></li>
<li class="toclevel-2"><a href="#Broken_mod"><span class="tocnumber">1.2</span> <span class="toctext">Broken mod</span></a></li>
<li class="toclevel-2"><a href="#Unofficial_update"><span class="tocnumber">1.3</span> <span class="toctext">Unofficial update</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2"><a href="#Limitations"><span class="tocnumber">2.1</span> <span class="toctext">Limitations</span></a></li>
<li class="toclevel-2"><a href="#Main_fields_.28shown_above.29"><span class="tocnumber">2.2</span> <span class="toctext">Main fields (shown above)</span></a></li>
<li class="toclevel-2"><a href="#Other_fields"><span class="tocnumber">2.3</span> <span class="toctext">Other fields</span></a></li>
<li class="toclevel-2"><a href="#Valid_statuses"><span class="tocnumber">2.4</span> <span class="toctext">Valid statuses</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Examples">Examples</span></h2>
<h3><span class="mw-headline" id="Compatible_mod">Compatible mod</span></h3>
<pre>{{#invoke:SMAPI compatibility|entry
  |name    = Lookup Anything
  |author  = Pathoschild
  |id      = Pathoschild.LookupAnything
  |nexus   = 541
  |github  = Pathoschild/StardewMods
}}
</pre>
<style data-mw-deduplicate="TemplateStyles:r145525">.mw-parser-output #mod-list th{position:sticky;top:0}.mw-parser-output #mod-list tr.mod{line-height:1em;background:#999}.mw-parser-output #mod-list tr.mod[data-status="ok"],.mw-parser-output #mod-list tr.mod[data-status="optional"]{background:#9F9}.mw-parser-output #mod-list tr.mod[data-status="workaround"],.mw-parser-output #mod-list tr.mod[data-status="unofficial"]{background:#CF9}.mw-parser-output #mod-list tr.mod[data-status="broken"]{background:#F99}.mw-parser-output #mod-list tr.mod[data-status="obsolete"],.mw-parser-output #mod-list tr.mod[data-status="abandoned"]{background:#999}.mw-parser-output #mod-list tr.mod:not([data-github]):not([data-custom-url]) .mod-source span{color:red;font-size:0.85em;opacity:0.5}.mw-parser-output #mod-list tr.mod .mod-metadata{font-size:0.8em}</style><table class="wikitable sortable plainlinks" id="mod-list"><tbody><tr><th>mod name</th><th>author</th><th><abbr title="This only shows whether a mod is *compatible*; it may have bugs unrelated to SMAPI compatibility.">compatibility</abbr></th><th>broke in</th><th>source</th><th> </th></tr>
<tr class="mod" id="Lookup_Anything" data-id="Pathoschild.LookupAnything" data-name="Lookup Anything" data-author="Pathoschild" data-nexus-id="541" data-github="Pathoschild/StardewMods" data-url="https://www.nexusmods.com/stardewvalley/mods/541" data-status="ok" data-summary="use latest version.">
<td><a rel="nofollow" class="external text" href="../external.html?link=https://www.nexusmods.com/stardewvalley/mods/541">Lookup Anything</a></td>
<td>Pathoschild</td>
<td><span class="mod-summary">✓ use latest version.</span></td>
<td></td>
<td class="mod-source"><a rel="nofollow" class="external text" href="../external.html?link=https://github.com/Pathoschild/StardewMods">source</a></td>
<td class="mod-metadata"><a href="#Lookup_Anything">#</a> </td></tr>
</tbody></table>
<h3><span class="mw-headline" id="Broken_mod">Broken mod</span></h3>
<pre>{{#invoke:SMAPI compatibility|entry
  |name    = Lookup Anything
  |author  = Pathoschild
  |id      = Pathoschild.LookupAnything
  |nexus   = 541
  |github  = Pathoschild/StardewMods

  |summary  = 
  |broke in = Stardew Valley 1.2
}}
</pre>
<link rel="mw-deduplicated-inline-style" href="Mw-data_TemplateStyles_r145525.html"><table class="wikitable sortable plainlinks" id="mod-list"><tbody><tr><th>mod name</th><th>author</th><th><abbr title="This only shows whether a mod is *compatible*; it may have bugs unrelated to SMAPI compatibility.">compatibility</abbr></th><th>broke in</th><th>source</th><th> </th></tr>
<tr class="mod" id="Lookup_Anything" data-id="Pathoschild.LookupAnything" data-name="Lookup Anything" data-author="Pathoschild" data-nexus-id="541" data-github="Pathoschild/StardewMods" data-url="https://www.nexusmods.com/stardewvalley/mods/541" data-status="broken" data-summary="broken, not updated yet." data-broke-in="Stardew Valley 1.2">
<td><a rel="nofollow" class="external text" href="../external.html?link=https://www.nexusmods.com/stardewvalley/mods/541">Lookup Anything</a></td>
<td>Pathoschild</td>
<td><span class="mod-summary">↻ broken, not updated yet.</span></td>
<td>Stardew Valley 1.2</td>
<td class="mod-source"><a rel="nofollow" class="external text" href="../external.html?link=https://github.com/Pathoschild/StardewMods">source</a></td>
<td class="mod-metadata"><a href="#Lookup_Anything">#</a> </td></tr>
</tbody></table>
<h3><span class="mw-headline" id="Unofficial_update">Unofficial update</span></h3>
<p>For an unofficial update, use the broken-mod template and add these under the other fields:
</p>
<pre>  |unofficial url     = https://community.playstarbound.com/attachments/201345000
  |unofficial version = 1.18.2-unofficial.1-example
</pre>
<link rel="mw-deduplicated-inline-style" href="Mw-data_TemplateStyles_r145525.html"><table class="wikitable sortable plainlinks" id="mod-list"><tbody><tr><th>mod name</th><th>author</th><th><abbr title="This only shows whether a mod is *compatible*; it may have bugs unrelated to SMAPI compatibility.">compatibility</abbr></th><th>broke in</th><th>source</th><th> </th></tr>
<tr class="mod" id="Lookup_Anything" data-id="Pathoschild.LookupAnything" data-name="Lookup Anything" data-author="Pathoschild" data-nexus-id="541" data-github="Pathoschild/StardewMods" data-url="https://www.nexusmods.com/stardewvalley/mods/541" data-status="unofficial" data-summary="broken, use [https://community.playstarbound.com/attachments/201345000 unofficial version] (&lt;small&gt;1.18.2-unofficial.1-example&lt;/small&gt;)." data-broke-in="Stardew Valley 1.2" data-unofficial-version="1.18.2-unofficial.1-example" data-unofficial-url="https://community.playstarbound.com/attachments/201345000">
<td><a rel="nofollow" class="external text" href="../external.html?link=https://www.nexusmods.com/stardewvalley/mods/541">Lookup Anything</a></td>
<td>Pathoschild</td>
<td><span class="mod-summary">⚠ broken, use <a rel="nofollow" class="external text" href="../external.html?link=https://community.playstarbound.com/attachments/201345000">unofficial version</a> (<small>1.18.2-unofficial.1-example</small>).</span></td>
<td>Stardew Valley 1.2</td>
<td class="mod-source"><a rel="nofollow" class="external text" href="../external.html?link=https://github.com/Pathoschild/StardewMods">source</a></td>
<td class="mod-metadata"><a href="#Lookup_Anything">#</a> </td></tr>
</tbody></table>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<h3><span class="mw-headline" id="Limitations">Limitations</span></h3>
<p>The name, author, and id arguments are comma-separated. If the actual value contains a comma, use <code>&amp;#44;</code> instead.
</p>
<h3><span id="Main_fields_(shown_above)"></span><span class="mw-headline" id="Main_fields_.28shown_above.29">Main fields (shown above)</span></h3>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td><code>name</code>
</td>
<td>The normalised display name for the mod. Delimit alternate names with commas.
</td></tr>
<tr>
<td><code>author</code>
</td>
<td>The name of the author, as shown on Nexus or in its <samp>manifest.json</samp> file. Delimit alternate names with commas.
</td></tr>
<tr>
<td><code>id</code>
</td>
<td>The latest unique mod ID, as listed in its <samp>manifest.json</samp> file. Delimit alternate/older IDs with commas (ideally in latest to oldest order). For very old mods with no ID, use <samp>none</samp> to disable validation checks.
</td></tr>
<tr>
<td><code>nexus</code>
</td>
<td>The mod's unique ID on Nexus (if any). This is the number in the mod page's URL.
</td></tr>
<tr>
<td><code>github</code>
</td>
<td>The mod's GitHub repository in the form <samp>owner/repo</samp>.
</td></tr>
<tr>
<td><code>summary</code>
</td>
<td>Specify custom notes or instructions about the mod's compatibility. Should usually be blank.
</td></tr>
<tr>
<td><code>broke in</code>
</td>
<td>The SMAPI or Stardew Valley update which broke this mod (if applicable).
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Other_fields">Other fields</span></h3>
<table class="wikitable">

<tbody><tr>
<th>field
</th>
<th>purpose
</th></tr>
<tr>
<td><code>status</code>
</td>
<td>Whether the mod is compatible with the latest versions of Stardew Valley and SMAPI (see <a href="#Valid_statuses">#Valid statuses</a>). If not specified, it defaults to <code>unofficial</code> if an unofficial URL is given, else <code>broken</code> if <code>broke in</code> is specified, else <code>ok</code>.
</td></tr>
<tr>
<td><code>unofficial url</code>
</td>
<td>A page URL where the player can download an unofficial update, if any.
</td></tr>
<tr>
<td><code>unofficial version</code>
</td>
<td>The unofficial update's version number, if any.
</td></tr>
<tr>
<td><code>chucklefish</code>
</td>
<td>The mod's ID in the <a rel="nofollow" class="external text" href="../external.html?link=https://community.playstarbound.com/resources/categories/stardew-valley.22/">Chucklefish mod repository</a>.
</td></tr>
<tr>
<td><code>curse</code>
</td>
<td>The mod's project ID and key in the <a rel="nofollow" class="external text" href="../external.html?link=https://www.curseforge.com/stardewvalley">CurseForge mod repository</a>. The ID is shown on the mod page next to "Project ID", and the key is shown in the mod page's URL. This must be in the form <code>id,key</code>.
</td></tr>
<tr>
<td><code>moddrop</code>
</td>
<td>The mod's ID in the <a rel="nofollow" class="external text" href="../external.html?link=https://www.moddrop.com/stardew-valley/">ModDrop mod repository</a>.
</td></tr>
<tr>
<td><code>url</code>
</td>
<td>The arbitrary mod URL, if not on a known mod site. Avoid if possible, since this makes crossreferencing more difficult.
</td></tr>
<tr>
<td><code>source</code>
</td>
<td>An arbitrary source code URL, if not on GitHub. Avoid if possible, since this makes crossreferencing more difficult.
</td></tr>
<tr>
<td><code>warnings</code>
</td>
<td>Text explaining additional compatibility warnings about the mod (<i>e.g.,</i> not compatible with Linux/Mac).
</td></tr>
<tr>
<td><code>content pack for</code>
</td>
<td>The name of the mod which loads this content pack.
</td></tr>
<tr>
<td><code>dev note</code>
</td>
<td>Special notes intended for developers who maintain unofficial updates or submit pull requests.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Valid_statuses">Valid statuses</span></h3>
<table class="wikitable">

<tbody><tr>
<th>status
</th>
<th>description
</th></tr>
<tr>
<td><code>ok</code>
</td>
<td>The mod is compatible. This is the default and doesn't need to be specified.<br>Default summary: <i>use latest version.</i>
</td></tr>
<tr>
<td><code>optional</code>
</td>
<td>The mod is compatible, if you use an optional download on the mod page.<br>Default summary: <i>use optional download.<sup><a href="#footnote">[1]</a></sup></i>
</td></tr>
<tr>
<td><code>unofficial</code>
</td>
<td>The mod is compatible using an unofficial update. There's no need to specify this; if you also set <samp>unofficial url</samp> and <samp>unofficial version</samp>, you can remove the status field.
</td></tr>
<tr>
<td><code>workaround</code>
</td>
<td>The mod isn't compatible, but the player can fix it or there's a good alternative. A summary should be provided manually. If you also set <samp>unofficial url</samp> and <samp>unofficial version</samp>, you can remove the status field.
</td></tr>
<tr>
<td><code>broken</code>
</td>
<td>The mod isn't compatible. The message depends on whether the <code>source</code> link is set.<br>Default summary: <i>broken, not updated yet</i> or <i>broken, not open-source.</i>
</td></tr>
<tr>
<td><code>abandoned</code>
</td>
<td>The mod is no longer maintained by the author, and an unofficial update or continuation is unlikely. This should only be used when the author has definitively abandoned the mod (either explicitly, or by removing the mod page or downloads).<br>Default summary: <i>no longer maintained.</i>
</td></tr>
<tr>
<td><code>obsolete</code>
</td>
<td>The mod is no longer needed and should be removed.
</td></tr>
<tr>
<td><code>unknown</code>
</td>
<td>The mod's compatibility status hasn't been tested. This should only be used as a placeholder (<i>e.g.,</i> when adding a new beta), it should never be used long since that defeats the purpose of the compatibility list.
</td></tr></tbody></table>
<hr>
</div>


<div class="mw-highlight"><pre><span></span><span class="kd">local</span> <span class="n">p</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kd">local</span> <span class="n">private</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1">-- whether to handle Stardew Valley beta fields (don't forget to comment or uncomment the beta fields in /doc)</span>
<span class="kd">local</span> <span class="n">enableBeta</span> <span class="o">=</span> <span class="kc">false</span>

<span class="c1">--##########</span>
<span class="c1">--## Public functions</span>
<span class="c1">--##########</span>
<span class="c1">-- Start a SMAPI compatibility table.</span>
<span class="c1">-- @test mw.log(p.header({}))</span>
<span class="kr">function</span> <span class="nc">p</span><span class="p">.</span><span class="nf">header</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
  <span class="kr">return</span>
    <span class="n">private</span><span class="p">.</span><span class="n">style</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
    <span class="o">..</span> <span class="s1">'&lt;table class="wikitable sortable plainlinks" id="mod-list"&gt;'</span>
    <span class="o">..</span> <span class="s2">"&lt;tr&gt;&lt;th&gt;mod name&lt;/th&gt;&lt;th&gt;author&lt;/th&gt;&lt;th&gt;&lt;abbr title=</span><span class="se">\"</span><span class="s2">This only shows whether a mod is *compatible*; it may have bugs unrelated to SMAPI compatibility.</span><span class="se">\"</span><span class="s2">&gt;compatibility&lt;/abbr&gt;&lt;/th&gt;&lt;th&gt;broke in&lt;/th&gt;&lt;th&gt;source&lt;/th&gt;&lt;th&gt;&amp;nbsp;&lt;/th&gt;&lt;/tr&gt;"</span><span class="p">;</span>
<span class="kr">end</span>

<span class="c1">-- End a SMAPI compatibility table.</span>
<span class="c1">-- @test mw.log(p.footer())</span>
<span class="kr">function</span> <span class="nc">p</span><span class="p">.</span><span class="nf">footer</span><span class="p">()</span>
  <span class="kr">return</span> <span class="s1">'&lt;/table&gt;'</span>
<span class="kr">end</span>

<span class="c1">--- Render the SMAPI compatibility table based on JSON input.</span>
<span class="c1">-- @param frame The arguments passed to the script.</span>
<span class="c1">-- @test mw.log(p.table({ args = { [1]='[  { "name":   "24h Clock", "author": "Lajna", // test\n"id":  "Lajna.24hClock", "nexus": 1695, "github": "LajnaLegenden/Stardew_Valley_Mods", "brokeIn": "SMAPI 3.0", "unofficial": [ "1.0.1-unofficial.1-pathoschild", "https://community.playstarbound.com/threads/updating-mods-for-stardew-valley-1-3.142524/page-76#post-3342641" ] } ]' }}))</span>
<span class="kr">function</span> <span class="nc">p</span><span class="p">.</span><span class="nf">table</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
  <span class="c1">-- parse data</span>
  <span class="kd">local</span> <span class="n">json</span> <span class="o">=</span> <span class="nb">string.gsub</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">'%s*//[^"</span><span class="se">\n</span><span class="s1">]+'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">data</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">jsonDecode</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">mw</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">JSON_TRY_FIXING</span><span class="p">)</span>

  <span class="c1">-- start table</span>
  <span class="kd">local</span> <span class="n">table</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s2">"table"</span><span class="p">)</span>
  <span class="n">table</span><span class="p">:</span><span class="n">addClass</span><span class="p">(</span><span class="s2">"wikitable sortable plainlinks"</span><span class="p">)</span>
  <span class="n">table</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="s2">"mod-list"</span><span class="p">)</span>
  <span class="n">table</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;th&gt;mod name&lt;/th&gt;&lt;th&gt;author&lt;/th&gt;&lt;th&gt;&lt;abbr title=</span><span class="se">\"</span><span class="s2">This only shows whether a mod is *compatible*; it may have bugs unrelated to SMAPI compatibility.</span><span class="se">\"</span><span class="s2">&gt;compatibility&lt;/abbr&gt;&lt;/th&gt;&lt;th&gt;broke in&lt;/th&gt;&lt;th&gt;source&lt;/th&gt;&lt;th&gt;&amp;nbsp;&lt;/th&gt;&lt;/tr&gt;"</span><span class="p">)</span>

  <span class="c1">-- add mod rows</span>
  <span class="kr">for</span> <span class="n">index</span><span class="p">,</span><span class="n">mod</span> <span class="kr">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="kr">do</span>
    <span class="c1">-- temporarily passthrough args to avoid duplicating code until we migrate fully to JSON</span>
    <span class="c1">-- (We need tostring on numeric fields since the previous code doesn't support numbers)</span>
    <span class="n">mod</span><span class="p">.</span><span class="n">chucklefish</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">toSafeString</span><span class="p">(</span><span class="n">mod</span><span class="p">.</span><span class="n">chucklefish</span><span class="p">)</span>
    <span class="n">mod</span><span class="p">.</span><span class="n">curse</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">toSafeString</span><span class="p">(</span><span class="n">mod</span><span class="p">.</span><span class="n">curse</span><span class="p">)</span>
    <span class="n">mod</span><span class="p">.</span><span class="n">moddrop</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">toSafeString</span><span class="p">(</span><span class="n">mod</span><span class="p">.</span><span class="n">moddrop</span><span class="p">)</span>
    <span class="n">mod</span><span class="p">.</span><span class="n">nexus</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">toSafeString</span><span class="p">(</span><span class="n">mod</span><span class="p">.</span><span class="n">nexus</span><span class="p">)</span>

    <span class="kd">local</span> <span class="n">row</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">entry</span><span class="p">({</span> <span class="n">args</span> <span class="o">=</span> <span class="n">mod</span> <span class="p">})</span>
    <span class="n">table</span><span class="p">:</span><span class="n">node</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
  <span class="kr">end</span>

  <span class="c1">-- return output</span>
  <span class="kr">return</span> <span class="n">private</span><span class="p">.</span><span class="n">style</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span> <span class="o">..</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">--- Render a mod row in the SMAPI compatibility table.</span>
<span class="c1">-- @param frame The arguments passed to the script.</span>
<span class="c1">-- @test mw.log(p.entry({ args = { name="Content Patcher, ContentPatcher", author="Pathoschild, Pathos", id="Pathoschild.ContentPatcher, ContentPatcher", nexus="1915", chucklefish="4250", curse="309243,content-patcher", github="Pathoschild/StardewMods", warnings="warning A, warning B" }}))</span>
<span class="kr">function</span> <span class="nc">p</span><span class="p">.</span><span class="nf">entry</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
  <span class="c1">-- read input args</span>
  <span class="kd">local</span> <span class="n">names</span>      <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">parseCommaDelimited</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"name"</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">authors</span>    <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">parseCommaDelimited</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"author"</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">ids</span>        <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">parseCommaDelimited</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">nexusId</span>    <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"nexus"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">github</span>     <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"github"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">summary</span>    <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"summary"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">brokeIn</span>    <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"broke in"</span><span class="p">])</span>

  <span class="kd">local</span> <span class="n">status</span>     <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"status"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">unofficialVersion</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"unofficial version"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">unofficialUrl</span>     <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"unofficial url"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">chucklefishId</span>  <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"chucklefish"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">curseforgeId</span>   <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"curse"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">moddropId</span>      <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"moddrop"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">customUrl</span>      <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"url"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">customSource</span>   <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"source"</span><span class="p">])</span>

  <span class="kd">local</span> <span class="n">warnings</span>       <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">parseCommaDelimited</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"warnings"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">devNote</span>        <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"dev note"</span><span class="p">])</span>
  <span class="kd">local</span> <span class="n">contentPackFor</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"content pack for"</span><span class="p">])</span>

  <span class="kd">local</span> <span class="n">betaSummary</span> <span class="o">=</span> <span class="kc">nil</span>
  <span class="kd">local</span> <span class="n">betaBrokeIn</span> <span class="o">=</span> <span class="kc">nil</span>
  <span class="kd">local</span> <span class="n">betaStatus</span>  <span class="o">=</span> <span class="kc">nil</span>
  <span class="kd">local</span> <span class="n">betaUnofficialVersion</span> <span class="o">=</span> <span class="kc">nil</span>
  <span class="kd">local</span> <span class="n">betaUnofficialUrl</span>     <span class="o">=</span> <span class="kc">nil</span>
  <span class="kr">if</span> <span class="n">enableBeta</span> <span class="kr">then</span>
    <span class="n">betaSummary</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"beta summary"</span><span class="p">])</span>
    <span class="n">betaBrokeIn</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"beta broke in"</span><span class="p">])</span>
    <span class="n">betaStatus</span>  <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"beta status"</span><span class="p">])</span>
    <span class="n">betaUnofficialVersion</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"beta unofficial version"</span><span class="p">])</span>
    <span class="n">betaUnofficialUrl</span>     <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">args</span><span class="p">[</span><span class="s2">"beta unofficial url"</span><span class="p">])</span>
  <span class="kr">end</span>

  <span class="c1">-- get source url</span>
  <span class="kd">local</span> <span class="n">sourceUrl</span> <span class="o">=</span> <span class="n">customSource</span>
  <span class="kr">if</span> <span class="n">github</span> <span class="kr">then</span>
    <span class="n">sourceUrl</span> <span class="o">=</span> <span class="s2">"https://github.com/"</span> <span class="o">..</span> <span class="nb">string.gsub</span><span class="p">(</span><span class="n">mw</span><span class="p">.</span><span class="n">uri</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">github</span><span class="p">,</span> <span class="s2">"PATH"</span><span class="p">),</span> <span class="s2">"%%2F"</span><span class="p">,</span> <span class="s2">"/"</span><span class="p">)</span>
  <span class="kr">end</span>
  <span class="kd">local</span> <span class="n">hasSource</span> <span class="o">=</span> <span class="n">sourceUrl</span> <span class="o">~=</span> <span class="kc">nil</span>

  <span class="c1">-- parse compatibility</span>
  <span class="kd">local</span> <span class="n">compat</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">getCompatInfo</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">brokeIn</span><span class="p">,</span> <span class="n">unofficialVersion</span><span class="p">,</span> <span class="n">unofficialUrl</span><span class="p">,</span> <span class="n">hasSource</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">betaCompat</span> <span class="o">=</span> <span class="kc">nil</span>
  <span class="kr">if</span> <span class="n">enableBeta</span> <span class="ow">and</span> <span class="p">(</span><span class="n">betaStatus</span> <span class="ow">or</span> <span class="n">betaBrokeIn</span> <span class="ow">or</span> <span class="n">betaUnofficialUrl</span> <span class="ow">or</span> <span class="n">betaUnofficialVersion</span><span class="p">)</span> <span class="kr">then</span>
    <span class="n">betaCompat</span> <span class="o">=</span> <span class="n">private</span><span class="p">.</span><span class="n">getCompatInfo</span><span class="p">(</span><span class="n">betaStatus</span><span class="p">,</span> <span class="n">betaSummary</span><span class="p">,</span> <span class="n">betaBrokeIn</span><span class="p">,</span> <span class="n">betaUnofficialVersion</span><span class="p">,</span> <span class="n">betaUnofficialUrl</span><span class="p">,</span> <span class="n">hasSource</span><span class="p">)</span>
  <span class="kr">end</span>

  <span class="c1">-- get main URL</span>
  <span class="kd">local</span> <span class="n">url</span> <span class="o">=</span> <span class="kc">nil</span>
  <span class="kr">if</span> <span class="n">nexusId</span> <span class="kr">then</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">"https://www.nexusmods.com/stardewvalley/mods/"</span> <span class="o">..</span> <span class="n">mw</span><span class="p">.</span><span class="n">uri</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">nexusId</span><span class="p">,</span> <span class="s2">"PATH"</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">moddropId</span> <span class="kr">then</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">"https://www.moddrop.com/stardew-valley/mods/"</span> <span class="o">..</span> <span class="n">mw</span><span class="p">.</span><span class="n">uri</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">moddropId</span><span class="p">,</span> <span class="s2">"PATH"</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">curseforgeId</span> <span class="kr">then</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">"https://www.curseforge.com/projects/"</span> <span class="o">..</span> <span class="n">mw</span><span class="p">.</span><span class="n">uri</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">curseforgeId</span><span class="p">,</span> <span class="s2">"PATH"</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">chucklefishId</span> <span class="kr">then</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">"https://community.playstarbound.com/resources/"</span> <span class="o">..</span> <span class="n">mw</span><span class="p">.</span><span class="n">uri</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">chucklefishId</span><span class="p">,</span> <span class="s2">"PATH"</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">customUrl</span> <span class="kr">then</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">customUrl</span>
  <span class="kr">elseif</span> <span class="n">hasSource</span> <span class="kr">then</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">sourceUrl</span>
  <span class="kr">end</span>

  <span class="c1">-- build HTML row</span>
  <span class="kd">local</span> <span class="n">row</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s2">"tr"</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">addClass</span><span class="p">(</span><span class="s2">"mod"</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="n">names</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">mw</span><span class="p">.</span><span class="n">uri</span><span class="p">.</span><span class="n">anchorEncode</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-id"</span><span class="p">,</span> <span class="nb">table.concat</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span> <span class="s2">","</span><span class="p">))</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-name"</span><span class="p">,</span> <span class="nb">table.concat</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="s2">","</span><span class="p">))</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-author"</span><span class="p">,</span> <span class="nb">table.concat</span><span class="p">(</span><span class="n">authors</span><span class="p">,</span> <span class="s2">","</span><span class="p">))</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-cf-id"</span><span class="p">,</span> <span class="n">chucklefishId</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-curseforge-id"</span><span class="p">,</span> <span class="n">curseforgeId</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-moddrop-id"</span><span class="p">,</span> <span class="n">moddropId</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-nexus-id"</span><span class="p">,</span> <span class="n">nexusId</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-github"</span><span class="p">,</span> <span class="n">github</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-custom-source"</span><span class="p">,</span> <span class="n">customSource</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-url"</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-status"</span><span class="p">,</span> <span class="n">compat</span><span class="p">.</span><span class="n">status</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-summary"</span><span class="p">,</span> <span class="n">compat</span><span class="p">.</span><span class="n">summary</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-broke-in"</span><span class="p">,</span> <span class="n">compat</span><span class="p">.</span><span class="n">brokeIn</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-unofficial-version"</span><span class="p">,</span> <span class="n">compat</span><span class="p">.</span><span class="n">unofficialVersion</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-unofficial-url"</span><span class="p">,</span> <span class="n">compat</span><span class="p">.</span><span class="n">unofficialUrl</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">enableBeta</span> <span class="kr">then</span>
    <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-beta-status"</span><span class="p">,</span> <span class="n">betaCompat</span> <span class="ow">and</span> <span class="n">betaCompat</span><span class="p">.</span><span class="n">status</span><span class="p">)</span>
    <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-beta-summary"</span><span class="p">,</span> <span class="n">betaCompat</span> <span class="ow">and</span> <span class="n">betaCompat</span><span class="p">.</span><span class="n">summary</span><span class="p">)</span>
    <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-beta-broke-in"</span><span class="p">,</span> <span class="n">betaCompat</span> <span class="ow">and</span> <span class="n">betaCompat</span><span class="p">.</span><span class="n">brokeIn</span><span class="p">)</span>
    <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-beta-unofficial-version"</span><span class="p">,</span> <span class="n">betaCompat</span> <span class="ow">and</span> <span class="n">betaCompat</span><span class="p">.</span><span class="n">unofficialVersion</span><span class="p">)</span>
    <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-beta-unofficial-url"</span><span class="p">,</span> <span class="n">betaCompat</span> <span class="ow">and</span> <span class="n">betaCompat</span><span class="p">.</span><span class="n">unofficialUrl</span><span class="p">)</span>
  <span class="kr">end</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-warnings"</span><span class="p">,</span> <span class="n">private</span><span class="p">.</span><span class="n">emptyToNil</span><span class="p">(</span><span class="nb">table.concat</span><span class="p">(</span><span class="n">warnings</span><span class="p">,</span> <span class="s2">","</span><span class="p">)))</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-content-pack-for"</span><span class="p">,</span> <span class="n">contentPackFor</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"data-dev-note"</span><span class="p">,</span> <span class="n">devNote</span><span class="p">)</span>
  <span class="n">row</span><span class="p">:</span><span class="n">newline</span><span class="p">()</span>

  <span class="c1">-- add name field</span>
  <span class="kr">do</span>
    <span class="kd">local</span> <span class="n">field</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s2">"td"</span><span class="p">)</span>

    <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"["</span> <span class="o">..</span> <span class="p">(</span><span class="n">url</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">)</span> <span class="o">..</span> <span class="s2">" "</span> <span class="o">..</span> <span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">)</span> <span class="o">..</span> <span class="s2">"]"</span><span class="p">)</span>

    <span class="kd">local</span> <span class="n">nameCount</span> <span class="o">=</span> <span class="o">#</span><span class="n">names</span>
    <span class="kr">if</span> <span class="n">nameCount</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span>
      <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"&lt;br /&gt;&lt;small&gt;(aka "</span><span class="p">)</span>
      <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nameCount</span> <span class="kr">do</span>
        <span class="kr">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span>
          <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
          <span class="kr">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nameCount</span> <span class="kr">then</span>
            <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">", "</span><span class="p">)</span>
          <span class="kr">end</span>
        <span class="kr">end</span>
      <span class="kr">end</span>
      <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">")&lt;/small&gt;"</span><span class="p">)</span>
    <span class="kr">end</span>

    <span class="n">row</span><span class="p">:</span><span class="n">node</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
    <span class="n">row</span><span class="p">:</span><span class="n">newline</span><span class="p">()</span>
  <span class="kr">end</span>

  <span class="c1">-- add author field</span>
  <span class="kr">do</span>
    <span class="kd">local</span> <span class="n">field</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s2">"td"</span><span class="p">)</span>

    <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="n">authors</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="kd">local</span> <span class="n">authorCount</span> <span class="o">=</span> <span class="o">#</span><span class="n">authors</span>
    <span class="kr">if</span> <span class="n">authorCount</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span>
      <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"&lt;br /&gt;&lt;small&gt;(aka "</span><span class="p">)</span>
      <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">authorCount</span> <span class="kr">do</span>
        <span class="kr">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span>
          <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="n">authors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
          <span class="kr">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">authorCount</span> <span class="kr">then</span>
            <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">", "</span><span class="p">)</span>
          <span class="kr">end</span>
        <span class="kr">end</span>
      <span class="kr">end</span>
      <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">")&lt;/small&gt;"</span><span class="p">)</span>
    <span class="kr">end</span>

    <span class="n">row</span><span class="p">:</span><span class="n">node</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
    <span class="n">row</span><span class="p">:</span><span class="n">newline</span><span class="p">()</span>
  <span class="kr">end</span>

  <span class="c1">-- add summary field</span>
  <span class="kr">do</span>
    <span class="kd">local</span> <span class="n">field</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s2">"td"</span><span class="p">)</span>

    <span class="c1">-- stable status</span>
    <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"&lt;span class=</span><span class="se">\"</span><span class="s2">mod-summary</span><span class="se">\"</span><span class="s2">&gt;"</span> <span class="o">..</span> <span class="n">compat</span><span class="p">.</span><span class="n">summaryIcon</span> <span class="o">..</span> <span class="s2">" "</span> <span class="o">..</span> <span class="n">compat</span><span class="p">.</span><span class="n">summary</span> <span class="o">..</span> <span class="s2">"&lt;/span&gt;"</span><span class="p">)</span>
    <span class="kr">if</span> <span class="n">compat</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">"optional"</span> <span class="kr">then</span>
      <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"&lt;ref name=</span><span class="se">\"</span><span class="s2">optional-update</span><span class="se">\"</span><span class="s2"> /&gt;"</span><span class="p">)</span>
    <span class="kr">end</span>

    <span class="c1">-- beta status</span>
    <span class="kr">if</span> <span class="n">betaCompat</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
      <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"&lt;br /&gt;"</span><span class="p">)</span>
      <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"'''SDV 1.6 beta only:''' &lt;span class=</span><span class="se">\"</span><span class="s2">mod-beta-summary</span><span class="se">\"</span><span class="s2">&gt;"</span> <span class="o">..</span> <span class="n">betaCompat</span><span class="p">.</span><span class="n">summaryIcon</span> <span class="o">..</span> <span class="s2">" "</span> <span class="o">..</span> <span class="n">betaCompat</span><span class="p">.</span><span class="n">summary</span> <span class="o">..</span> <span class="s2">"&lt;/span&gt;"</span><span class="p">)</span>
      <span class="kr">if</span> <span class="n">betaCompat</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">"optional"</span> <span class="kr">then</span>
        <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"&lt;ref name=</span><span class="se">\"</span><span class="s2">optional-update</span><span class="se">\"</span><span class="s2"> /&gt;"</span><span class="p">)</span>
      <span class="kr">end</span>
    <span class="kr">end</span>

    <span class="c1">-- warnings</span>
    <span class="kr">do</span>
      <span class="kd">local</span> <span class="n">warningCount</span> <span class="o">=</span> <span class="o">#</span><span class="n">warnings</span>
      <span class="kr">if</span> <span class="n">warningCount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">then</span>
        <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">warningCount</span> <span class="kr">do</span>
          <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"&lt;br /&gt;⚠ "</span> <span class="o">..</span> <span class="n">warnings</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="kr">end</span>
      <span class="kr">end</span>
    <span class="kr">end</span>

    <span class="n">row</span><span class="p">:</span><span class="n">node</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
    <span class="n">row</span><span class="p">:</span><span class="n">newline</span><span class="p">()</span>
  <span class="kr">end</span>

  <span class="c1">-- add 'broke in' field</span>
  <span class="kr">do</span>
    <span class="kd">local</span> <span class="n">field</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s2">"td"</span><span class="p">)</span>

    <span class="kr">if</span> <span class="n">betaCompat</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="ow">and</span> <span class="n">betaCompat</span><span class="p">.</span><span class="n">brokeIn</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
      <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="n">betaCompat</span><span class="p">.</span><span class="n">brokeIn</span><span class="p">)</span>
    <span class="kr">elseif</span> <span class="n">compat</span><span class="p">.</span><span class="n">brokeIn</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
      <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="n">compat</span><span class="p">.</span><span class="n">brokeIn</span><span class="p">)</span>
    <span class="kr">end</span>

    <span class="n">row</span><span class="p">:</span><span class="n">node</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
    <span class="n">row</span><span class="p">:</span><span class="n">newline</span><span class="p">()</span>
  <span class="kr">end</span>

  <span class="c1">-- add 'source' field</span>
  <span class="kr">do</span>
    <span class="kr">if</span> <span class="n">sourceUrl</span> <span class="kr">then</span>
      <span class="n">row</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"&lt;td class=</span><span class="se">\"</span><span class="s2">mod-source</span><span class="se">\"</span><span class="s2">&gt;["</span> <span class="o">..</span> <span class="n">sourceUrl</span> <span class="o">..</span> <span class="s2">" source]&lt;/td&gt;"</span><span class="p">)</span>
    <span class="kr">else</span>
      <span class="n">row</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"&lt;td class=</span><span class="se">\"</span><span class="s2">mod-source</span><span class="se">\"</span><span class="s2">&gt;&lt;span&gt;closed source&lt;/span&gt;&lt;/td&gt;"</span><span class="p">)</span>
    <span class="kr">end</span>
    <span class="n">row</span><span class="p">:</span><span class="n">newline</span><span class="p">()</span>
  <span class="kr">end</span>

  <span class="c1">-- add metadata field</span>
  <span class="kr">do</span>
    <span class="kd">local</span> <span class="n">field</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s2">"td"</span><span class="p">)</span>
    <span class="n">field</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"class"</span><span class="p">,</span> <span class="s2">"mod-metadata"</span><span class="p">)</span>

    <span class="c1">-- anchor</span>
    <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"[[#"</span> <span class="o">..</span> <span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">)</span> <span class="o">..</span> <span class="s2">"|#]] "</span><span class="p">)</span>

    <span class="c1">-- dev note</span>
    <span class="kr">if</span> <span class="n">devNote</span> <span class="kr">then</span>
      <span class="kd">local</span> <span class="n">devNoteField</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">html</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s2">"abbr"</span><span class="p">)</span>
      <span class="n">devNoteField</span><span class="p">:</span><span class="n">attr</span><span class="p">(</span><span class="s2">"title"</span><span class="p">,</span> <span class="n">devNote</span><span class="p">)</span>
      <span class="n">devNoteField</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"[dev note]"</span><span class="p">)</span>

      <span class="n">field</span><span class="p">:</span><span class="n">node</span><span class="p">(</span><span class="n">devNoteField</span><span class="p">)</span>
    <span class="kr">end</span>

    <span class="c1">-- validation</span>
    <span class="kr">if</span> <span class="o">#</span><span class="n">ids</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span>
      <span class="n">field</span><span class="p">:</span><span class="n">wikitext</span><span class="p">(</span><span class="s2">"[⚠ no id] "</span><span class="p">)</span>
    <span class="kr">end</span>

    <span class="n">row</span><span class="p">:</span><span class="n">node</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
  <span class="kr">end</span>

  <span class="kr">return</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<span class="kr">end</span>


<span class="c1">--##########</span>
<span class="c1">--## Private functions</span>
<span class="c1">--##########</span>
<span class="c1">-- Get the &lt;templatestyles&gt; tag for the module's stylesheet.</span>
<span class="c1">-- @param frame The arguments passed to the script.</span>
<span class="kr">function</span> <span class="nc">private</span><span class="p">.</span><span class="nf">style</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">frame</span><span class="p">.</span><span class="n">extensionTag</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">frame</span><span class="p">:</span><span class="n">extensionTag</span><span class="p">(</span><span class="s1">'templatestyles'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="p">{</span><span class="n">src</span> <span class="o">=</span> <span class="s1">'Module:SMAPI compatibility/styles.css'</span><span class="p">})</span>
  <span class="kr">else</span>
    <span class="kr">return</span> <span class="s2">""</span> <span class="c1">-- called from the debug console</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="c1">-- Get the normalised compatibility info for a mod.</span>
<span class="c1">-- @param status The specified status code. If nil or blank, it'll be derived from the other fields.</span>
<span class="c1">-- @param summary A human-readable summary of the compatibility info. If nil or blank, it'll be derived from the other fields.</span>
<span class="c1">-- @param brokeIn The SMAPI or Stardew Valley version which broke the mod, if applicable.</span>
<span class="c1">-- @param unofficialVersion The unofficial version which fixes compatibility, if applicable.</span>
<span class="c1">-- @param unofficialUrl The URL for the unofficial version which fixes compatibility, if applicable.</span>
<span class="c1">-- @param hasSource Whether the mod has public source code available.</span>
<span class="kr">function</span> <span class="nc">private</span><span class="p">.</span><span class="nf">getCompatInfo</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">brokeIn</span><span class="p">,</span> <span class="n">unofficialVersion</span><span class="p">,</span> <span class="n">unofficialUrl</span><span class="p">,</span> <span class="n">hasSource</span><span class="p">)</span>
  <span class="c1">-- derive status</span>
  <span class="kr">if</span> <span class="n">status</span> <span class="o">==</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">if</span> <span class="n">unofficialVersion</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
      <span class="n">status</span> <span class="o">=</span> <span class="s2">"unofficial"</span>
    <span class="kr">elseif</span> <span class="n">brokeIn</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
      <span class="n">status</span> <span class="o">=</span> <span class="s2">"broken"</span>
    <span class="kr">else</span>
      <span class="n">status</span> <span class="o">=</span> <span class="s2">"ok"</span>
    <span class="kr">end</span>
  <span class="kr">end</span>

  <span class="c1">-- derive summary icon</span>
  <span class="kd">local</span> <span class="n">summaryIcon</span> <span class="o">=</span> <span class="s2">"✓"</span>
  <span class="kr">if</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"unofficial"</span> <span class="ow">or</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"workaround"</span> <span class="kr">then</span>
    <span class="n">summaryIcon</span> <span class="o">=</span> <span class="s2">"⚠"</span>
  <span class="kr">elseif</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"broken"</span> <span class="ow">and</span> <span class="n">hasSource</span> <span class="kr">then</span>
    <span class="n">summaryIcon</span> <span class="o">=</span> <span class="s2">"↻"</span>
  <span class="kr">elseif</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"broken"</span> <span class="ow">or</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"obsolete"</span> <span class="ow">or</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"abandoned"</span> <span class="kr">then</span>
    <span class="n">summaryIcon</span> <span class="o">=</span> <span class="s2">"✖"</span>
  <span class="kr">end</span>

  <span class="c1">-- derive summary</span>
  <span class="kr">if</span> <span class="ow">not</span> <span class="n">summary</span> <span class="kr">then</span>
    <span class="kr">if</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"ok"</span> <span class="kr">then</span>
      <span class="n">summary</span> <span class="o">=</span> <span class="s2">"use latest version."</span>
    <span class="kr">elseif</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"optional"</span> <span class="kr">then</span>
      <span class="n">summary</span> <span class="o">=</span> <span class="s2">"use optional download."</span>
    <span class="kr">elseif</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"unofficial"</span> <span class="kr">then</span>
      <span class="n">summary</span> <span class="o">=</span> <span class="s2">"broken, use ["</span> <span class="o">..</span> <span class="p">(</span><span class="n">unofficialUrl</span> <span class="ow">or</span> <span class="s2">""</span><span class="p">)</span> <span class="o">..</span> <span class="s2">" "</span> <span class="o">..</span> <span class="s2">"unofficial version]"</span>
      <span class="kr">if</span> <span class="n">unofficialVersion</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="n">summary</span> <span class="o">..</span> <span class="s2">" (&lt;small&gt;"</span> <span class="o">..</span> <span class="n">unofficialVersion</span> <span class="o">..</span> <span class="s2">"&lt;/small&gt;)"</span>
      <span class="kr">end</span>
      <span class="n">summary</span> <span class="o">=</span> <span class="n">summary</span> <span class="o">..</span> <span class="s2">"."</span>
    <span class="kr">elseif</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"workaround"</span> <span class="kr">then</span>
      <span class="n">summary</span> <span class="o">=</span> <span class="s2">"broken. '''error:''' should specify summary."</span>
    <span class="kr">elseif</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"broken"</span> <span class="kr">then</span>
      <span class="kr">if</span> <span class="n">hasSource</span> <span class="kr">then</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="s2">"broken, not updated yet."</span>
      <span class="kr">else</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="s2">"broken, not open-source."</span>
      <span class="kr">end</span>
    <span class="kr">elseif</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"obsolete"</span> <span class="kr">then</span>
      <span class="n">summary</span> <span class="o">=</span> <span class="s2">"remove this mod (obsolete)."</span>
    <span class="kr">elseif</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">"abandoned"</span> <span class="kr">then</span>
      <span class="n">summary</span> <span class="o">=</span> <span class="s2">"remove this mod (no longer maintained)."</span>
    <span class="kr">else</span>
      <span class="n">summary</span> <span class="o">=</span> <span class="s2">"'''error:''' unknown status '"</span> <span class="o">..</span> <span class="n">status</span> <span class="o">..</span> <span class="s2">"'."</span>
    <span class="kr">end</span>
  <span class="kr">end</span>

  <span class="kr">return</span> <span class="p">{</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="p">,</span>
    <span class="n">summaryIcon</span> <span class="o">=</span> <span class="n">summaryIcon</span><span class="p">,</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">summary</span><span class="p">,</span>
    <span class="n">brokeIn</span> <span class="o">=</span> <span class="n">brokeIn</span><span class="p">,</span>
    <span class="n">unofficialVersion</span> <span class="o">=</span> <span class="n">unofficialVersion</span><span class="p">,</span>
    <span class="n">unofficialUrl</span> <span class="o">=</span> <span class="n">unofficialUrl</span>
  <span class="p">}</span>
<span class="kr">end</span>

<span class="c1">-- Call tostring() on the value if it's not nil, else return the value as-is.</span>
<span class="c1">-- @param value The value to format.</span>
<span class="kr">function</span> <span class="nc">private</span><span class="p">.</span><span class="nf">toSafeString</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">value</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
  <span class="kr">else</span>
    <span class="kr">return</span> <span class="kc">nil</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="c1">-- Get a nil value if the specified value is an empty string, else return the value unchanged.</span>
<span class="c1">-- @param value The string to format.</span>
<span class="kr">function</span> <span class="nc">private</span><span class="p">.</span><span class="nf">emptyToNil</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">value</span> <span class="o">~=</span> <span class="s2">""</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">value</span>
  <span class="kr">else</span>
    <span class="kr">return</span> <span class="kc">nil</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="c1">-- Parse a comma-delimited string into an array.</span>
<span class="c1">-- @param value The string to parse.</span>
<span class="kr">function</span> <span class="nc">private</span><span class="p">.</span><span class="nf">parseCommaDelimited</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>

  <span class="kr">if</span> <span class="n">value</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kd">local</span> <span class="n">values</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">","</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
    <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">#</span><span class="n">values</span> <span class="kr">do</span>
      <span class="n">v</span> <span class="o">=</span> <span class="n">mw</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">trim</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
      <span class="kr">if</span> <span class="n">v</span> <span class="o">~=</span> <span class="s2">""</span> <span class="kr">then</span>
        <span class="nb">table.insert</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
      <span class="kr">end</span>
    <span class="kr">end</span>
  <span class="kr">end</span>

  <span class="kr">return</span> <span class="n">result</span>
<span class="kr">end</span>

<span class="kr">return</span> <span class="n">p</span>
</pre></div>
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="mediawiki/index91e3-2.html?title=Module:SMAPI_compatibility&amp;oldid=162447">https://stardewvalleywiki.com/mediawiki/index.php?title=Module:SMAPI_compatibility&amp;oldid=162447</a>"</div>
</div>
			<div class="post-content" id="page-secondary-actions">
			
			</div>
		</main>
		<footer class="mw-footer minerva-footer">
		<div class="last-modified-bar">
	<div class="post-content last-modified-bar__content">
		<span class="last-modified-bar__icon mw-ui-icon mw-ui-icon-mw-ui-icon-small mw-ui-icon-wikimedia-history-base20 "></span>
		<a class="last-modified-bar__text modified-enhancement" href="Special_History/Module_SMAPI_compatibility.html"
				data-user-name="Pathoschild"
				data-user-gender="unknown"
				data-timestamp="1711811570">
				<span>Last edited on 30 March 2024, at 15:12</span>
		</a>
		<span class="mw-ui-icon mw-ui-icon-small mw-ui-icon-mf-expand-gray mf-mw-ui-icon-rotate-anti-clockwise indicator"></span>
	</div>
</div>

		<div class="post-content footer-content">
			
			<h2>Stardew Valley Wiki</h2>
			<div class="license">Content is available under <a class="external" rel="nofollow" href="../creativecommons.org/licenses/by-nc-sa/3.0/index.html">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</div>
			<ul class="footer-info hlist hlist-separated">
				<li id="footer-info-lastmod"> This page was last edited on 30 March 2024, at 15:12.</li><li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="../creativecommons.org/licenses/by-nc-sa/3.0/index.html">Creative Commons Attribution-NonCommercial-ShareAlike</a> unless otherwise noted.</li>
			</ul>
			<ul class="footer-places hlist hlist-separated">
				<li id="footer-places-privacy"><a href="Stardew_Valley_Wiki_Privacy_policy.html" title="Stardew Valley Wiki:Privacy policy">Privacy policy</a></li><li id="footer-places-about"><a href="Stardew_Valley_Wiki_About.html" title="Stardew Valley Wiki:About">About Stardew Valley Wiki</a></li><li id="footer-places-disclaimer"><a href="Stardew_Valley_Wiki_General_disclaimer.html" title="Stardew Valley Wiki:General disclaimer">Disclaimers</a></li><li id="footer-places-desktop-toggle"><a id="mw-mf-display-toggle" href="mediawiki/index996c-3.html?title=Module:SMAPI_compatibility&amp;mobileaction=toggle_view_desktop">Desktop</a></li>
			</ul>
		</div>
		</footer>
	</div>
</div>
<div class="mw-notification-area" data-mw="interface"></div>
<!-- v:8.3.0 -->

<script src="../external.html?link=https://www.googletagmanager.com/gtag/js?id=G-1S37VCXXZ9" async=""></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1S37VCXXZ9', {"anonymize_ip":true});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.039","walltime":"0.041","ppvisitednodes":{"value":114,"limit":1000000},"postexpandincludesize":{"value":11968,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":3,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":3275,"limit":5000000},"timingprofile":["100.00%   30.919      1 Module:SMAPI_compatibility/doc","100.00%   30.919      1 -total"]},"scribunto":{"limitreport-timeusage":{"value":"0.019","limit":"7.000"},"limitreport-memusage":{"value":772293,"limit":52428800}},"cachereport":{"timestamp":"20240607211253","ttl":86400,"transientcontent":false}}});});</script>
<script>(window.NORLQ=window.NORLQ||[]).push(function(){var ns,i,p,img;ns=document.getElementsByTagName('noscript');for(i=0;i<ns.length;i++){p=ns[i].nextSibling;if(p&&p.className&&p.className.indexOf('lazy-image-placeholder')>-1){img=document.createElement('img');img.setAttribute('src',p.getAttribute('data-src'));img.setAttribute('width',p.getAttribute('data-width'));img.setAttribute('height',p.getAttribute('data-height'));img.setAttribute('alt',p.getAttribute('data-alt'));p.parentNode.replaceChild(img,p);}}});</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":132});});</script>		</body>
		
<!-- Mirrored from stardewvalleywiki.com/Module:SMAPI_compatibility by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 07 Jun 2024 22:36:44 GMT -->
</html>
		